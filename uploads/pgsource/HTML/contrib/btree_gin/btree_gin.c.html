<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta name="generator" content="Source Insight Version 4.00.0084 Built on 2017-02-26">
<meta charset='UTF-8' />
<style type='text/css'><!--
TD {background-color: #C0C0C0; font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.blurb {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.filename {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 120%; font-weight: bold; }
.dirname {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 100%; font-weight: bold; margin-top: 2.5em;}
--></style>
<title>contrib\btree_gin\btree_gin.c</title>
<LINK REL=StyleSheet HREF="../../C_Cpp_Source_File.css" TYPE='text/css' MEDIA=screen>
</head>
<body bgcolor=#ffffff>
<table bgcolor='#c0c0c0' width='100%'>
<tr><td><p class='filename'><b>contrib\btree_gin\btree_gin.c</b></p></td>
<td align='right'>
Wed Jun 14 08:25:25 2017
</td></tr>
<tr><td><a href='../../Contents.html'>Contents</a></td></tr>
</table>
<pre>
</span><span class='Comment_Multi_Line'>/* 
 * contrib/btree_gin/btree_gin.c 
 */ 
</span><span class='Keyword'>#include </span><span class='String'>"postgres.h"</span> 
 
<span class='Keyword'>#include </span><span class='String'>&LT;limits.h&GT;</span> 
 
<span class='Keyword'>#include </span><span class='String'>"access/stratnum.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/builtins.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/bytea.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/cash.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/date.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/inet.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/numeric.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/timestamp.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/varbit.h"</span> 
 
<a href="../../src/include/fmgr.h.html#LN442"><span class='Ref_to_Const'>PG_MODULE_MAGIC</span></a><span class='Delimiter'>; 
</span> 
<a name="LN19"></a><span class='Control'>typedef</span> <span class='Control'>struct</span> <span class='Declare_Struct'>QueryInfo</span> 
<span class='Delimiter'>{ 
</span><a name="LN21"></a>    <a href="../../src/include/access/stratnum.h.html#LN21"><span class='Ref_to_Typedef'>StrategyNumber</span></a> <span class='Declare_Member'>strategy</span><span class='Delimiter'>; 
</span><a name="LN22"></a>    <a href="../../src/include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>       <span class='Declare_Member'>datum</span><span class='Delimiter'>; 
</span><a name="LN23"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Member'>is_varlena</span><span class='Delimiter'>; 
</span><a name="LN24"></a>    <a href="../../src/include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>       <span class='Parentheses'>(</span><span class='Operator'>*</span><span class='Declare_Member'>typecmp</span><span class='Parentheses'>) (</span><a href="../../src/include/fmgr.h.html#LN37"><span class='Ref_to_Typedef'>FunctionCallInfo</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN25"></a>} <span class='Declare_Typedef'>QueryInfo</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/*** GIN support functions shared by all datatypes ***/ 
</span> 
<span class='Keyword'>static </span><a href="../../src/include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN30"></a><span class='Declare_Function'>gin_btree_extract_value</span><span class='Parentheses'>(</span><a href="../../src/include/fmgr.h.html#LN37"><span class='Ref_to_Typedef'>FunctionCallInfo</span></a> <span class='Declare_Parameter'>fcinfo</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>is_varlena</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN32"></a>    <a href="../../src/include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>       <span class='Declare_Local'>datum</span> <span class='Operator'>= </span><a href="../../src/include/fmgr.h.html#LN232"><span class='Ref_to_Macro'>PG_GETARG_DATUM</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN33"></a>    <a href="../../src/include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>nentries</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../src/include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../src/include/fmgr.h.html#LN240"><span class='Ref_to_Macro'>PG_GETARG_POINTER</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN34"></a>    <a href="../../src/include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>entries</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../src/include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../src/include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../src/include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="btree_gin.c.html#LN30"><span class='Ref_to_Parameter'>is_varlena</span></a><span class='Parentheses'>) 
</span>        <a href="btree_gin.c.html#LN32"><span class='Ref_To_Local'>datum</span></a> <span class='Operator'>= </span><a href="../../src/include/postgres.h.html#LN561"><span class='Ref_to_Macro'>PointerGetDatum</span></a><span class='Parentheses'>(</span><a href="../../src/include/fmgr.h.html#LN204"><span class='Ref_to_Macro'>PG_DETOAST_DATUM</span></a><span class='Parentheses'>(</span><a href="btree_gin.c.html#LN32"><span class='Ref_To_Local'>datum</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="btree_gin.c.html#LN34"><span class='Ref_To_Local'>entries</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="btree_gin.c.html#LN32"><span class='Ref_To_Local'>datum</span></a><span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="btree_gin.c.html#LN33"><span class='Ref_To_Local'>nentries</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span> 
    <a href="../../src/include/fmgr.h.html#LN320"><span class='Ref_to_Macro'>PG_RETURN_POINTER</span></a><span class='Parentheses'>(</span><a href="btree_gin.c.html#LN34"><span class='Ref_To_Local'>entries</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * For BTGreaterEqualStrategyNumber, BTGreaterStrategyNumber, and 
 * BTEqualStrategyNumber we want to start the index scan at the 
 * supplied query datum, and work forward. For BTLessStrategyNumber 
 * and BTLessEqualStrategyNumber, we need to start at the leftmost 
 * key, and work forward until the supplied query datum (which must be 
 * sent along inside the QueryInfo structure). 
 */ 
</span><span class='Keyword'>static </span><a href="../../src/include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN53"></a><span class='Declare_Function'>gin_btree_extract_query</span><span class='Parentheses'>(</span><a href="../../src/include/fmgr.h.html#LN37"><span class='Ref_to_Typedef'>FunctionCallInfo</span></a> <span class='Declare_Parameter'>fcinfo</span><span class='Delimiter'>, 
</span><a name="LN54"></a>                        <span class='Keyword'>bool </span><span class='Declare_Parameter'>is_varlena</span><span class='Delimiter'>, 
</span><a name="LN55"></a>                        <a href="../../src/include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Parentheses'>(</span><span class='Operator'>*</span><span class='Declare_Parameter'>leftmostvalue</span><span class='Parentheses'>) (</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span><a name="LN56"></a>                        <a href="../../src/include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Parentheses'>(</span><span class='Operator'>*</span><span class='Declare_Parameter'>typecmp</span><span class='Parentheses'>) (</span><a href="../../src/include/fmgr.h.html#LN37"><span class='Ref_to_Typedef'>FunctionCallInfo</span></a><span class='Parentheses'>))</span> 
<span class='Delimiter'>{ 
</span><a name="LN58"></a>    <a href="../../src/include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>       <span class='Declare_Local'>datum</span> <span class='Operator'>= </span><a href="../../src/include/fmgr.h.html#LN232"><span class='Ref_to_Macro'>PG_GETARG_DATUM</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN59"></a>    <a href="../../src/include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>nentries</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../src/include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../src/include/fmgr.h.html#LN240"><span class='Ref_to_Macro'>PG_GETARG_POINTER</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN60"></a>    <a href="../../src/include/access/stratnum.h.html#LN21"><span class='Ref_to_Typedef'>StrategyNumber</span></a> <span class='Declare_Local'>strategy</span> <span class='Operator'>= </span><a href="../../src/include/fmgr.h.html#LN236"><span class='Ref_to_Macro'>PG_GETARG_UINT16</span></a><span class='Parentheses'>(</span><span class='Number'>2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN61"></a>    <span class='Keyword'>bool</span>      <span class='Operator'>**</span><span class='Declare_Local'>partialmatch</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>bool </span><span class='Operator'>**</span><span class='Parentheses'>) </span><a href="../../src/include/fmgr.h.html#LN240"><span class='Ref_to_Macro'>PG_GETARG_POINTER</span></a><span class='Parentheses'>(</span><span class='Number'>3</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN62"></a>    <a href="../../src/include/c.h.html#LN244"><span class='Ref_to_Typedef'>Pointer</span></a>   <span class='Operator'>**</span><span class='Declare_Local'>extra_data</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../src/include/c.h.html#LN244"><span class='Ref_to_Typedef'>Pointer</span></a> <span class='Operator'>**</span><span class='Parentheses'>) </span><a href="../../src/include/fmgr.h.html#LN240"><span class='Ref_to_Macro'>PG_GETARG_POINTER</span></a><span class='Parentheses'>(</span><span class='Number'>4</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN63"></a>    <a href="../../src/include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>entries</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../src/include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../src/include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../src/include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span><a name="LN64"></a>    <a href="btree_gin.c.html#LN19"><span class='Ref_to_Struct'>QueryInfo</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>data</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="btree_gin.c.html#LN19"><span class='Ref_to_Struct'>QueryInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../src/include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="btree_gin.c.html#LN19"><span class='Ref_to_Struct'>QueryInfo</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span><a name="LN65"></a>    <span class='Keyword'>bool</span>       <span class='Operator'>*</span><span class='Declare_Local'>ptr_partialmatch</span><span class='Delimiter'>; 
</span> 
    <span class='Operator'>*</span><a href="btree_gin.c.html#LN59"><span class='Ref_To_Local'>nentries</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <a href="btree_gin.c.html#LN65"><span class='Ref_To_Local'>ptr_partialmatch</span></a> <span class='Operator'>= *</span><a href="btree_gin.c.html#LN61"><span class='Ref_To_Local'>partialmatch</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../src/include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>bool</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="btree_gin.c.html#LN65"><span class='Ref_To_Local'>ptr_partialmatch</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="btree_gin.c.html#LN54"><span class='Ref_to_Parameter'>is_varlena</span></a><span class='Parentheses'>) 
</span>        <a href="btree_gin.c.html#LN58"><span class='Ref_To_Local'>datum</span></a> <span class='Operator'>= </span><a href="../../src/include/postgres.h.html#LN561"><span class='Ref_to_Macro'>PointerGetDatum</span></a><span class='Parentheses'>(</span><a href="../../src/include/fmgr.h.html#LN204"><span class='Ref_to_Macro'>PG_DETOAST_DATUM</span></a><span class='Parentheses'>(</span><a href="btree_gin.c.html#LN58"><span class='Ref_To_Local'>datum</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="btree_gin.c.html#LN64"><span class='Ref_To_Local'>data</span></a><span class='Operator'>-&GT;</span><a href="btree_gin.c.html#LN21"><span class='Ref_to_Member'>strategy</span></a> <span class='Operator'>= </span><a href="btree_gin.c.html#LN60"><span class='Ref_To_Local'>strategy</span></a><span class='Delimiter'>; 
</span>    <a href="btree_gin.c.html#LN64"><span class='Ref_To_Local'>data</span></a><span class='Operator'>-&GT;</span><a href="btree_gin.c.html#LN22"><span class='Ref_to_Member'>datum</span></a> <span class='Operator'>= </span><a href="btree_gin.c.html#LN58"><span class='Ref_To_Local'>datum</span></a><span class='Delimiter'>; 
</span>    <a href="btree_gin.c.html#LN64"><span class='Ref_To_Local'>data</span></a><span class='Operator'>-&GT;</span><a href="btree_gin.c.html#LN23"><span class='Ref_to_Member'>is_varlena</span></a> <span class='Operator'>= </span><a href="btree_gin.c.html#LN54"><span class='Ref_to_Parameter'>is_varlena</span></a><span class='Delimiter'>; 
</span>    <a href="btree_gin.c.html#LN64"><span class='Ref_To_Local'>data</span></a><span class='Operator'>-&GT;</span><a href="btree_gin.c.html#LN24"><span class='Ref_to_Member'>typecmp</span></a> <span class='Operator'>= </span><a href="btree_gin.c.html#LN56"><span class='Ref_to_Parameter'>typecmp</span></a><span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="btree_gin.c.html#LN62"><span class='Ref_To_Local'>extra_data</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../src/include/c.h.html#LN244"><span class='Ref_to_Typedef'>Pointer</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../src/include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../src/include/c.h.html#LN244"><span class='Ref_to_Typedef'>Pointer</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Operator'>**</span><a href="btree_gin.c.html#LN62"><span class='Ref_To_Local'>extra_data</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../src/include/c.h.html#LN244"><span class='Ref_to_Typedef'>Pointer</span></a><span class='Parentheses'>) </span><a href="btree_gin.c.html#LN64"><span class='Ref_To_Local'>data</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="btree_gin.c.html#LN60"><span class='Ref_To_Local'>strategy</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>case</span> <a href="../../src/include/access/stratnum.h.html#LN28"><span class='Ref_to_Const'>BTLessStrategyNumber</span></a><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="../../src/include/access/stratnum.h.html#LN29"><span class='Ref_to_Const'>BTLessEqualStrategyNumber</span></a><span class='Operator'>: 
</span>            <a href="btree_gin.c.html#LN63"><span class='Ref_To_Local'>entries</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="btree_gin.c.html#LN55"><span class='Ref_to_Parameter'>leftmostvalue</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>            <span class='Operator'>*</span><a href="btree_gin.c.html#LN65"><span class='Ref_To_Local'>ptr_partialmatch</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../src/include/access/stratnum.h.html#LN31"><span class='Ref_to_Const'>BTGreaterEqualStrategyNumber</span></a><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="../../src/include/access/stratnum.h.html#LN32"><span class='Ref_to_Const'>BTGreaterStrategyNumber</span></a><span class='Operator'>: 
</span>            <span class='Operator'>*</span><a href="btree_gin.c.html#LN65"><span class='Ref_To_Local'>ptr_partialmatch</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../src/include/access/stratnum.h.html#LN30"><span class='Ref_to_Const'>BTEqualStrategyNumber</span></a><span class='Operator'>: 
</span>            <a href="btree_gin.c.html#LN63"><span class='Ref_To_Local'>entries</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="btree_gin.c.html#LN58"><span class='Ref_To_Local'>datum</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>default</span><span class='Operator'>: 
</span>            <a href="../../src/backend/bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../src/include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"unrecognized strategy number: %d"</span><span class='Delimiter'>, </span><a href="btree_gin.c.html#LN60"><span class='Ref_To_Local'>strategy</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../src/include/fmgr.h.html#LN320"><span class='Ref_to_Macro'>PG_RETURN_POINTER</span></a><span class='Parentheses'>(</span><a href="btree_gin.c.html#LN63"><span class='Ref_To_Local'>entries</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end gin_btree_extract_query &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Datum a is a value from extract_query method and for BTLess* 
 * strategy it is a left-most value.  So, use original datum from QueryInfo 
 * to decide to stop scanning or not.  Datum b is always from index. 
 */ 
</span><span class='Keyword'>static </span><a href="../../src/include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN105"></a><span class='Declare_Function'>gin_btree_compare_prefix</span><span class='Parentheses'>(</span><a href="../../src/include/fmgr.h.html#LN37"><span class='Ref_to_Typedef'>FunctionCallInfo</span></a> <span class='Declare_Parameter'>fcinfo</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN107"></a>    <a href="../../src/include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>       <span class='Declare_Local'>a</span> <span class='Operator'>= </span><a href="../../src/include/fmgr.h.html#LN232"><span class='Ref_to_Macro'>PG_GETARG_DATUM</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN108"></a>    <a href="../../src/include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>       <span class='Declare_Local'>b</span> <span class='Operator'>= </span><a href="../../src/include/fmgr.h.html#LN232"><span class='Ref_to_Macro'>PG_GETARG_DATUM</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN109"></a>    <a href="btree_gin.c.html#LN19"><span class='Ref_to_Struct'>QueryInfo</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>data</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="btree_gin.c.html#LN19"><span class='Ref_to_Struct'>QueryInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../src/include/fmgr.h.html#LN240"><span class='Ref_to_Macro'>PG_GETARG_POINTER</span></a><span class='Parentheses'>(</span><span class='Number'>3</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN110"></a>    <a href="../../src/include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>res</span><span class='Delimiter'>, 
</span><a name="LN111"></a>                <span class='Declare_Local'>cmp</span><span class='Delimiter'>; 
</span> 
    <a href="btree_gin.c.html#LN111"><span class='Ref_To_Local'>cmp</span></a> <span class='Operator'>= </span><a href="../../src/include/postgres.h.html#LN477"><span class='Ref_to_Macro'>DatumGetInt32</span></a><span class='Parentheses'>(</span><a href="../../src/include/fmgr.h.html#LN503"><span class='Ref_to_Proto'>CallerFInfoFunctionCall2</span></a><span class='Parentheses'>(</span> 
                                                 <a href="btree_gin.c.html#LN109"><span class='Ref_To_Local'>data</span></a><span class='Operator'>-&GT;</span><a href="btree_gin.c.html#LN24"><span class='Ref_to_Member'>typecmp</span></a><span class='Delimiter'>, 
</span>                                                 <a href="btree_gin.c.html#LN105"><span class='Ref_to_Parameter'>fcinfo</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/fmgr.h.html#LN78"><span class='Ref_to_Member'>flinfo</span></a><span class='Delimiter'>, 
</span>                                                 <a href="../../src/include/fmgr.h.html#LN162"><span class='Ref_to_Macro'>PG_GET_COLLATION</span></a><span class='Parentheses'>()</span><span class='Delimiter'>, 
</span>                                   <span class='Parentheses'>(</span><a href="btree_gin.c.html#LN109"><span class='Ref_To_Local'>data</span></a><span class='Operator'>-&GT;</span><a href="btree_gin.c.html#LN21"><span class='Ref_to_Member'>strategy</span></a> <span class='Operator'>== </span><a href="../../src/include/access/stratnum.h.html#LN28"><span class='Ref_to_Const'>BTLessStrategyNumber</span></a> <span class='Operator'>|| 
</span>                                 <a href="btree_gin.c.html#LN109"><span class='Ref_To_Local'>data</span></a><span class='Operator'>-&GT;</span><a href="btree_gin.c.html#LN21"><span class='Ref_to_Member'>strategy</span></a> <span class='Operator'>== </span><a href="../../src/include/access/stratnum.h.html#LN29"><span class='Ref_to_Const'>BTLessEqualStrategyNumber</span></a><span class='Parentheses'>) 
</span>                                                 <span class='Operator'>? </span><a href="btree_gin.c.html#LN109"><span class='Ref_To_Local'>data</span></a><span class='Operator'>-&GT;</span><a href="btree_gin.c.html#LN22"><span class='Ref_to_Member'>datum</span></a> <span class='Operator'>: </span><a href="btree_gin.c.html#LN107"><span class='Ref_To_Local'>a</span></a><span class='Delimiter'>, 
</span>                                                 <a href="btree_gin.c.html#LN108"><span class='Ref_To_Local'>b</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="btree_gin.c.html#LN109"><span class='Ref_To_Local'>data</span></a><span class='Operator'>-&GT;</span><a href="btree_gin.c.html#LN21"><span class='Ref_to_Member'>strategy</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>case</span> <a href="../../src/include/access/stratnum.h.html#LN28"><span class='Ref_to_Const'>BTLessStrategyNumber</span></a><span class='Operator'>: 
</span>            <span class='Comment_Multi_Line'>/* If original datum &GT; indexed one then return match */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="btree_gin.c.html#LN111"><span class='Ref_To_Local'>cmp</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                <a href="btree_gin.c.html#LN110"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
                <a href="btree_gin.c.html#LN110"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../src/include/access/stratnum.h.html#LN29"><span class='Ref_to_Const'>BTLessEqualStrategyNumber</span></a><span class='Operator'>: 
</span>            <span class='Comment_Multi_Line'>/* The same except equality */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="btree_gin.c.html#LN111"><span class='Ref_To_Local'>cmp</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                <a href="btree_gin.c.html#LN110"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
                <a href="btree_gin.c.html#LN110"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../src/include/access/stratnum.h.html#LN30"><span class='Ref_to_Const'>BTEqualStrategyNumber</span></a><span class='Operator'>: 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="btree_gin.c.html#LN111"><span class='Ref_To_Local'>cmp</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                <a href="btree_gin.c.html#LN110"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
                <a href="btree_gin.c.html#LN110"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../src/include/access/stratnum.h.html#LN31"><span class='Ref_to_Const'>BTGreaterEqualStrategyNumber</span></a><span class='Operator'>: 
</span>            <span class='Comment_Multi_Line'>/* If original datum &LT;= indexed one then return match */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="btree_gin.c.html#LN111"><span class='Ref_To_Local'>cmp</span></a> <span class='Operator'>&LT;= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                <a href="btree_gin.c.html#LN110"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
                <a href="btree_gin.c.html#LN110"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../src/include/access/stratnum.h.html#LN32"><span class='Ref_to_Const'>BTGreaterStrategyNumber</span></a><span class='Operator'>: 
</span>            <span class='Comment_Multi_Line'>/* If original datum &LT;= indexed one then return match */ 
</span>            <span class='Comment_Multi_Line'>/* If original datum == indexed one then continue scan */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="btree_gin.c.html#LN111"><span class='Ref_To_Local'>cmp</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                <a href="btree_gin.c.html#LN110"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="btree_gin.c.html#LN111"><span class='Ref_To_Local'>cmp</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                <a href="btree_gin.c.html#LN110"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= -</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
                <a href="btree_gin.c.html#LN110"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>default</span><span class='Operator'>: 
</span>            <a href="../../src/backend/bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../src/include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"unrecognized strategy number: %d"</span><span class='Delimiter'>, 
</span>                 <a href="btree_gin.c.html#LN109"><span class='Ref_To_Local'>data</span></a><span class='Operator'>-&GT;</span><a href="btree_gin.c.html#LN21"><span class='Ref_to_Member'>strategy</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="btree_gin.c.html#LN110"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch data-&GT;strategy &raquo; </span> 
 
    <a href="../../src/include/fmgr.h.html#LN313"><span class='Ref_to_Macro'>PG_RETURN_INT32</span></a><span class='Parentheses'>(</span><a href="btree_gin.c.html#LN110"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end gin_btree_compare_prefix &raquo; </span> 
 
<a name="LN170"></a><span class='Declare_Prototype'>PG_FUNCTION_INFO_V1</span><span class='Parentheses'>(</span><a href="btree_gin.c.html#LN171"><span class='Ref_to_Func'>gin_btree_consistent</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a href="../../src/include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN172"></a><span class='Declare_Function'>gin_btree_consistent</span><span class='Parentheses'>(</span><a href="../../src/include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN174"></a>    <span class='Keyword'>bool</span>       <span class='Operator'>*</span><span class='Declare_Local'>recheck</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../src/include/fmgr.h.html#LN240"><span class='Ref_to_Macro'>PG_GETARG_POINTER</span></a><span class='Parentheses'>(</span><span class='Number'>5</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Operator'>*</span><a href="btree_gin.c.html#LN174"><span class='Ref_To_Local'>recheck</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="../../src/include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/*** GIN_SUPPORT macro defines the datatype specific functions ***/ 
</span> 
<a name="LN182"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>GIN_SUPPORT</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>type</span><span class='Delimiter'>, </span><span class='Declare_Parameter'>is_varlena</span><span class='Delimiter'>, </span><span class='Declare_Parameter'>leftmostvalue</span><span class='Delimiter'>, </span><span class='Declare_Parameter'>typecmp</span><span class='Parentheses'>)</span>               <span class='Operator'>\ 
</span><a href="../btree_gist/btree_bytea.c.html#LN14"><span class='Ref_to_Proto'>PG_FUNCTION_INFO_V1</span></a><span class='Parentheses'>(</span>gin_extract_value_##<a href="btree_gin.c.html#LN182"><span class='Ref_to_Parameter'>type</span></a><span class='Parentheses'>)</span><span class='Delimiter'>;</span>                              <span class='Operator'>\ 
</span><a href="../../src/include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>                                                                       <span class='Operator'>\ 
</span>gin_extract_value_##<a href="btree_gin.c.html#LN182"><span class='Ref_to_Parameter'>type</span></a><span class='Parentheses'>(</span><a href="../../src/include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>)</span>                                  <span class='Operator'>\ 
</span><span class='Delimiter'>{</span>                                                                           <span class='Operator'>\ 
</span>    <span class='Control'>return</span> <a href="btree_gin.c.html#LN29"><span class='Ref_to_Func'>gin_btree_extract_value</span></a><span class='Parentheses'>(</span>fcinfo<span class='Delimiter'>, </span><a href="btree_gin.c.html#LN182"><span class='Ref_to_Parameter'>is_varlena</span></a><span class='Parentheses'>)</span><span class='Delimiter'>;</span>                     <span class='Operator'>\ 
</span><span class='Delimiter'>}</span>   <span class='Operator'>\ 
</span><a href="../btree_gist/btree_bytea.c.html#LN14"><span class='Ref_to_Proto'>PG_FUNCTION_INFO_V1</span></a><span class='Parentheses'>(</span>gin_extract_query_##<a href="btree_gin.c.html#LN182"><span class='Ref_to_Parameter'>type</span></a><span class='Parentheses'>)</span><span class='Delimiter'>;</span>                              <span class='Operator'>\ 
</span><a href="../../src/include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>                                                                       <span class='Operator'>\ 
</span>gin_extract_query_##<a href="btree_gin.c.html#LN182"><span class='Ref_to_Parameter'>type</span></a><span class='Parentheses'>(</span><a href="../../src/include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>)</span>                                  <span class='Operator'>\ 
</span><span class='Delimiter'>{</span>                                                                           <span class='Operator'>\ 
</span>    <span class='Control'>return</span> <a href="btree_gin.c.html#LN52"><span class='Ref_to_Func'>gin_btree_extract_query</span></a><span class='Parentheses'>(</span>fcinfo<span class='Delimiter'>,</span>                                  <span class='Operator'>\ 
</span>                                   <a href="btree_gin.c.html#LN182"><span class='Ref_to_Parameter'>is_varlena</span></a><span class='Delimiter'>, </span><a href="btree_gin.c.html#LN182"><span class='Ref_to_Parameter'>leftmostvalue</span></a><span class='Delimiter'>, </span><a href="btree_gin.c.html#LN182"><span class='Ref_to_Parameter'>typecmp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>;</span>     <span class='Operator'>\ 
</span><span class='Delimiter'>}</span>   <span class='Operator'>\ 
</span><a href="../btree_gist/btree_bytea.c.html#LN14"><span class='Ref_to_Proto'>PG_FUNCTION_INFO_V1</span></a><span class='Parentheses'>(</span>gin_compare_prefix_##<a href="btree_gin.c.html#LN182"><span class='Ref_to_Parameter'>type</span></a><span class='Parentheses'>)</span><span class='Delimiter'>;</span>                             <span class='Operator'>\ 
</span><a href="../../src/include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>                                                                       <span class='Operator'>\ 
</span>gin_compare_prefix_##<a href="btree_gin.c.html#LN182"><span class='Ref_to_Parameter'>type</span></a><span class='Parentheses'>(</span><a href="../../src/include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>)</span>                                 <span class='Operator'>\ 
</span><span class='Delimiter'>{</span>                                                                           <span class='Operator'>\ 
</span>    <span class='Control'>return</span> <a href="btree_gin.c.html#LN104"><span class='Ref_to_Func'>gin_btree_compare_prefix</span></a><span class='Parentheses'>(</span>fcinfo<span class='Parentheses'>)</span><span class='Delimiter'>;</span>                                <span class='Operator'>\ 
</span><span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end GIN_SUPPORT &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/*** Datatype specifications ***/ 
</span> 
<span class='Keyword'>static </span><a href="../../src/include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN207"></a><span class='Declare_Function'>leftmostvalue_int2</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> <a href="../../src/include/postgres.h.html#LN456"><span class='Ref_to_Macro'>Int16GetDatum</span></a><span class='Parentheses'>(</span>SHRT_MIN<span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a name="LN212"></a><span class='Declare_Function'>GIN_SUPPORT</span><span class='Parentheses'>(</span>int2<span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span><a href="btree_gin.c.html#LN206"><span class='Ref_to_Func'>leftmostvalue_int2</span></a><span class='Delimiter'>, </span><a href="../../src/backend/access/nbtree/nbtcompare.c.html#LN63"><span class='Ref_to_Func'>btint2cmp</span></a><span class='Parentheses'>) 
</span> 
<span class='Keyword'>static </span><a href="../../src/include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
leftmostvalue_int4<span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> <a href="../../src/include/postgres.h.html#LN484"><span class='Ref_to_Macro'>Int32GetDatum</span></a><span class='Parentheses'>(</span>INT_MIN<span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a name="LN220"></a><span class='Declare_Function'>GIN_SUPPORT</span><span class='Parentheses'>(</span>int4<span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span>leftmostvalue_int4<span class='Delimiter'>, </span><a href="../../src/backend/access/nbtree/nbtcompare.c.html#LN90"><span class='Ref_to_Func'>btint4cmp</span></a><span class='Parentheses'>) 
</span> 
<span class='Keyword'>static </span><a href="../../src/include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
leftmostvalue_int8<span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> <a href="../../src/include/postgres.h.html#LN624"><span class='Ref_to_Macro'>Int64GetDatum</span></a><span class='Parentheses'>(</span><a href="../../src/include/c.h.html#LN341"><span class='Ref_to_Const'>PG_INT64_MIN</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a name="LN228"></a><span class='Declare_Function'>GIN_SUPPORT</span><span class='Parentheses'>(</span><a href="../../src/include/c.h.html#LN253"><span class='Ref_to_Typedef'>int8</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span>leftmostvalue_int8<span class='Delimiter'>, </span><a href="../../src/backend/access/nbtree/nbtcompare.c.html#LN127"><span class='Ref_to_Func'>btint8cmp</span></a><span class='Parentheses'>) 
</span> 
<span class='Keyword'>static </span><a href="../../src/include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
leftmostvalue_float4<span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> <a href="../../src/include/postgres.h.html#LN696"><span class='Ref_to_Func'>Float4GetDatum</span></a><span class='Parentheses'>(</span><span class='Operator'>-</span><a href="../../src/include/utils/builtins.h.html#LN56"><span class='Ref_to_Proto'>get_float4_infinity</span></a><span class='Parentheses'>())</span><span class='Delimiter'>; 
} 
</span> 
<a name="LN236"></a><span class='Declare_Function'>GIN_SUPPORT</span><span class='Parentheses'>(</span><a href="../../src/include/c.h.html#LN379"><span class='Ref_to_Typedef'>float4</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span>leftmostvalue_float4<span class='Delimiter'>, </span><a href="../../src/backend/utils/adt/float.c.html#LN1020"><span class='Ref_to_Func'>btfloat4cmp</span></a><span class='Parentheses'>) 
</span> 
<span class='Keyword'>static </span><a href="../../src/include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
leftmostvalue_float8<span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> <a href="../../src/include/postgres.h.html#LN745"><span class='Ref_to_Func'>Float8GetDatum</span></a><span class='Parentheses'>(</span><span class='Operator'>-</span><a href="../../src/include/utils/builtins.h.html#LN55"><span class='Ref_to_Proto'>get_float8_infinity</span></a><span class='Parentheses'>())</span><span class='Delimiter'>; 
} 
</span> 
<a name="LN244"></a><span class='Declare_Function'>GIN_SUPPORT</span><span class='Parentheses'>(</span><a href="../../src/include/c.h.html#LN380"><span class='Ref_to_Typedef'>float8</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span>leftmostvalue_float8<span class='Delimiter'>, </span><a href="../../src/backend/utils/adt/float.c.html#LN1134"><span class='Ref_to_Func'>btfloat8cmp</span></a><span class='Parentheses'>) 
</span> 
<span class='Keyword'>static </span><a href="../../src/include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
leftmostvalue_money<span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> <a href="../../src/include/postgres.h.html#LN624"><span class='Ref_to_Macro'>Int64GetDatum</span></a><span class='Parentheses'>(</span><a href="../../src/include/c.h.html#LN341"><span class='Ref_to_Const'>PG_INT64_MIN</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a name="LN252"></a><span class='Declare_Function'>GIN_SUPPORT</span><span class='Parentheses'>(</span>money<span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span>leftmostvalue_money<span class='Delimiter'>, </span><a href="../../src/backend/utils/adt/cash.c.html#LN592"><span class='Ref_to_Func'>cash_cmp</span></a><span class='Parentheses'>) 
</span> 
<span class='Keyword'>static </span><a href="../../src/include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
leftmostvalue_oid<span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> <a href="../../src/include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a name="LN260"></a><span class='Declare_Function'>GIN_SUPPORT</span><span class='Parentheses'>(</span><a href="../../src/pl/plpgsql/src/pl_gram.y.html#LN129"><span class='Ref_to_Global_Var'>oid</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span>leftmostvalue_oid<span class='Delimiter'>, </span><a href="../../src/backend/access/nbtree/nbtcompare.c.html#LN248"><span class='Ref_to_Func'>btoidcmp</span></a><span class='Parentheses'>) 
</span> 
<span class='Keyword'>static </span><a href="../../src/include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
leftmostvalue_timestamp<span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> <a href="../../src/include/utils/timestamp.h.html#LN30"><span class='Ref_to_Macro'>TimestampGetDatum</span></a><span class='Parentheses'>(</span><a href="../../src/include/datatype/timestamp.h.html#LN108"><span class='Ref_to_Const'>DT_NOBEGIN</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a name="LN268"></a><span class='Declare_Function'>GIN_SUPPORT</span><span class='Parentheses'>(</span><a href="../../src/interfaces/ecpg/include/pgtypes_timestamp.h.html#LN8"><span class='Ref_to_Typedef'>timestamp</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span>leftmostvalue_timestamp<span class='Delimiter'>, </span><a href="../../src/backend/utils/adt/timestamp.c.html#LN2081"><span class='Ref_to_Func'>timestamp_cmp</span></a><span class='Parentheses'>) 
</span> 
<a href="btree_gin.c.html#LN182"><span class='Ref_to_Macro'>GIN_SUPPORT</span></a><span class='Parentheses'>(</span><a href="../../src/include/catalog/pg_authid.h.html#LN33"><span class='Ref_to_Const'>timestamptz</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span>leftmostvalue_timestamp<span class='Delimiter'>, </span><a href="../../src/backend/utils/adt/timestamp.c.html#LN2081"><span class='Ref_to_Func'>timestamp_cmp</span></a><span class='Parentheses'>) 
</span> 
<span class='Keyword'>static </span><a href="../../src/include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
leftmostvalue_time<span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> <a href="../../src/include/utils/date.h.html#LN56"><span class='Ref_to_Macro'>TimeADTGetDatum</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a name="LN278"></a><span class='Declare_Function'>GIN_SUPPORT</span><span class='Parentheses'>(</span>time<span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span>leftmostvalue_time<span class='Delimiter'>, </span><a href="../../src/backend/utils/adt/date.c.html#LN1491"><span class='Ref_to_Func'>time_cmp</span></a><span class='Parentheses'>) 
</span> 
<span class='Keyword'>static </span><a href="../../src/include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
leftmostvalue_timetz<span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN283"></a>    <a href="../../src/include/utils/date.h.html#LN25"><span class='Ref_to_Typedef'>TimeTzADT</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>v</span> <span class='Operator'>= </span><a href="../../src/include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../src/include/utils/date.h.html#LN25"><span class='Ref_to_Typedef'>TimeTzADT</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="btree_gin.c.html#LN283"><span class='Ref_To_Local'>v</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/utils/date.h.html#LN27"><span class='Ref_to_Member'>time</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="btree_gin.c.html#LN283"><span class='Ref_To_Local'>v</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/utils/date.h.html#LN28"><span class='Ref_to_Member'>zone</span></a> <span class='Operator'>= -</span><span class='Number'>24</span> <span class='Operator'>* </span><span class='Number'>3600</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* XXX is that true? */ 
</span> 
    <span class='Control'>return</span> <a href="../../src/include/utils/date.h.html#LN57"><span class='Ref_to_Macro'>TimeTzADTPGetDatum</span></a><span class='Parentheses'>(</span><a href="btree_gin.c.html#LN283"><span class='Ref_To_Local'>v</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a name="LN291"></a><span class='Declare_Function'>GIN_SUPPORT</span><span class='Parentheses'>(</span>timetz<span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span>leftmostvalue_timetz<span class='Delimiter'>, </span><a href="../../src/backend/utils/adt/date.c.html#LN2190"><span class='Ref_to_Func'>timetz_cmp</span></a><span class='Parentheses'>) 
</span> 
<span class='Keyword'>static </span><a href="../../src/include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
leftmostvalue_date<span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> <a href="../../src/include/utils/date.h.html#LN55"><span class='Ref_to_Macro'>DateADTGetDatum</span></a><span class='Parentheses'>(</span><a href="../../src/include/utils/date.h.html#LN34"><span class='Ref_to_Const'>DATEVAL_NOBEGIN</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a name="LN299"></a><span class='Declare_Function'>GIN_SUPPORT</span><span class='Parentheses'>(</span><a href="../../src/interfaces/ecpg/include/pgtypes_date.h.html#LN7"><span class='Ref_to_Typedef'>date</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span>leftmostvalue_date<span class='Delimiter'>, </span><a href="../../src/backend/utils/adt/date.c.html#LN441"><span class='Ref_to_Func'>date_cmp</span></a><span class='Parentheses'>) 
</span> 
<span class='Keyword'>static </span><a href="../../src/include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
leftmostvalue_interval<span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN304"></a>    <a href="../../src/include/datatype/timestamp.h.html#LN42"><span class='Ref_to_Typedef'>Interval</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>v</span> <span class='Operator'>= </span><a href="../../src/include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../src/include/datatype/timestamp.h.html#LN42"><span class='Ref_to_Typedef'>Interval</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="btree_gin.c.html#LN304"><span class='Ref_To_Local'>v</span></a><span class='Operator'>-&GT;</span><a href="../../src/interfaces/ecpg/include/pgtypes_interval.h.html#LN27"><span class='Ref_to_Member'>time</span></a> <span class='Operator'>= </span><a href="../../src/include/datatype/timestamp.h.html#LN108"><span class='Ref_to_Const'>DT_NOBEGIN</span></a><span class='Delimiter'>; 
</span>    <a href="btree_gin.c.html#LN304"><span class='Ref_To_Local'>v</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/datatype/timestamp.h.html#LN46"><span class='Ref_to_Member'>day</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="btree_gin.c.html#LN304"><span class='Ref_To_Local'>v</span></a><span class='Operator'>-&GT;</span><a href="../../src/interfaces/ecpg/include/pgtypes_interval.h.html#LN28"><span class='Ref_to_Member'>month</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="../../src/include/utils/timestamp.h.html#LN32"><span class='Ref_to_Macro'>IntervalPGetDatum</span></a><span class='Parentheses'>(</span><a href="btree_gin.c.html#LN304"><span class='Ref_To_Local'>v</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a name="LN312"></a><span class='Declare_Function'>GIN_SUPPORT</span><span class='Parentheses'>(</span><a href="../../src/interfaces/ecpg/include/pgtypes_interval.h.html#LN25"><span class='Ref_to_Typedef'>interval</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span>leftmostvalue_interval<span class='Delimiter'>, </span><a href="../../src/backend/utils/adt/timestamp.c.html#LN2387"><span class='Ref_to_Func'>interval_cmp</span></a><span class='Parentheses'>) 
</span> 
<span class='Keyword'>static </span><a href="../../src/include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
leftmostvalue_macaddr<span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN317"></a>    <a href="../../src/include/utils/inet.h.html#LN93"><span class='Ref_to_Struct'>macaddr</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>v</span> <span class='Operator'>= </span><a href="../../src/include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../src/include/utils/inet.h.html#LN93"><span class='Ref_to_Struct'>macaddr</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="../../src/include/utils/inet.h.html#LN131"><span class='Ref_to_Macro'>MacaddrPGetDatum</span></a><span class='Parentheses'>(</span><a href="btree_gin.c.html#LN317"><span class='Ref_To_Local'>v</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a name="LN322"></a><span class='Declare_Function'>GIN_SUPPORT</span><span class='Parentheses'>(</span><a href="../../src/include/utils/inet.h.html#LN93"><span class='Ref_to_Struct'>macaddr</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span>leftmostvalue_macaddr<span class='Delimiter'>, </span><a href="../../src/backend/utils/adt/mac.c.html#LN195"><span class='Ref_to_Func'>macaddr_cmp</span></a><span class='Parentheses'>) 
</span> 
<span class='Keyword'>static </span><a href="../../src/include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
leftmostvalue_macaddr8<span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN327"></a>    <a href="../../src/include/utils/inet.h.html#LN106"><span class='Ref_to_Struct'>macaddr8</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>v</span> <span class='Operator'>= </span><a href="../../src/include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../src/include/utils/inet.h.html#LN106"><span class='Ref_to_Struct'>macaddr8</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="../../src/include/utils/inet.h.html#LN137"><span class='Ref_to_Macro'>Macaddr8PGetDatum</span></a><span class='Parentheses'>(</span><a href="btree_gin.c.html#LN327"><span class='Ref_To_Local'>v</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a name="LN332"></a><span class='Declare_Function'>GIN_SUPPORT</span><span class='Parentheses'>(</span><a href="../../src/include/utils/inet.h.html#LN106"><span class='Ref_to_Struct'>macaddr8</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span>leftmostvalue_macaddr8<span class='Delimiter'>, </span><a href="../../src/backend/utils/adt/mac8.c.html#LN331"><span class='Ref_to_Func'>macaddr8_cmp</span></a><span class='Parentheses'>) 
</span> 
<span class='Keyword'>static </span><a href="../../src/include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
leftmostvalue_inet<span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> <a href="../../src/include/fmgr.h.html#LN583"><span class='Ref_to_Macro'>DirectFunctionCall1</span></a><span class='Parentheses'>(</span><a href="../../src/backend/utils/adt/network.c.html#LN78"><span class='Ref_to_Func'>inet_in</span></a><span class='Delimiter'>, </span><a href="../../src/include/postgres.h.html#LN583"><span class='Ref_to_Macro'>CStringGetDatum</span></a><span class='Parentheses'>(</span><span class='String'>"0.0.0.0/0"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<a name="LN340"></a><span class='Declare_Function'>GIN_SUPPORT</span><span class='Parentheses'>(</span><a href="../../src/include/utils/inet.h.html#LN51"><span class='Ref_to_Typedef'>inet</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span>leftmostvalue_inet<span class='Delimiter'>, </span><a href="../../src/backend/utils/adt/network.c.html#LN382"><span class='Ref_to_Func'>network_cmp</span></a><span class='Parentheses'>) 
</span> 
<a href="btree_gin.c.html#LN182"><span class='Ref_to_Macro'>GIN_SUPPORT</span></a><span class='Parentheses'>(</span>cidr<span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span>leftmostvalue_inet<span class='Delimiter'>, </span><a href="../../src/backend/utils/adt/network.c.html#LN382"><span class='Ref_to_Func'>network_cmp</span></a><span class='Parentheses'>) 
</span> 
<span class='Keyword'>static </span><a href="../../src/include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
leftmostvalue_text<span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> <a href="../../src/include/postgres.h.html#LN561"><span class='Ref_to_Macro'>PointerGetDatum</span></a><span class='Parentheses'>(</span><a href="../../src/include/utils/builtins.h.html#LN86"><span class='Ref_to_Proto'>cstring_to_text_with_len</span></a><span class='Parentheses'>(</span><span class='String'>""</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<a name="LN350"></a><span class='Declare_Function'>GIN_SUPPORT</span><span class='Parentheses'>(</span><a href="../seg/segparse.y.html#LN46"><span class='Ref_to_Global_Var'>text</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span>leftmostvalue_text<span class='Delimiter'>, </span><a href="../../src/backend/utils/adt/varlena.c.html#LN1760"><span class='Ref_to_Func'>bttextcmp</span></a><span class='Parentheses'>) 
</span> 
<span class='Keyword'>static </span><a href="../../src/include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
leftmostvalue_char<span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> <a href="../../src/include/postgres.h.html#LN421"><span class='Ref_to_Macro'>CharGetDatum</span></a><span class='Parentheses'>(</span>SCHAR_MIN<span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a name="LN358"></a><span class='Declare_Function'>GIN_SUPPORT</span><span class='Parentheses'>(</span><span class='Keyword'>char</span><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span>leftmostvalue_char<span class='Delimiter'>, </span><a href="../../src/backend/access/nbtree/nbtcompare.c.html#LN309"><span class='Ref_to_Func'>btcharcmp</span></a><span class='Parentheses'>) 
</span> 
<a href="btree_gin.c.html#LN182"><span class='Ref_to_Macro'>GIN_SUPPORT</span></a><span class='Parentheses'>(</span><a href="../../src/include/c.h.html#LN451"><span class='Ref_to_Typedef'>bytea</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span>leftmostvalue_text<span class='Delimiter'>, </span><a href="../../src/backend/utils/adt/varlena.c.html#LN3612"><span class='Ref_to_Func'>byteacmp</span></a><span class='Parentheses'>) 
</span> 
<span class='Keyword'>static </span><a href="../../src/include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
leftmostvalue_bit<span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> <a href="../../src/include/fmgr.h.html#LN587"><span class='Ref_to_Macro'>DirectFunctionCall3</span></a><span class='Parentheses'>(</span><a href="../../src/backend/utils/adt/varbit.c.html#LN111"><span class='Ref_to_Func'>bit_in</span></a><span class='Delimiter'>, 
</span>                               <a href="../../src/include/postgres.h.html#LN583"><span class='Ref_to_Macro'>CStringGetDatum</span></a><span class='Parentheses'>(</span><span class='String'>""</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                               <a href="../../src/include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                               <a href="../../src/include/postgres.h.html#LN484"><span class='Ref_to_Macro'>Int32GetDatum</span></a><span class='Parentheses'>(</span><span class='Operator'>-</span><span class='Number'>1</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<a name="LN371"></a><span class='Declare_Function'>GIN_SUPPORT</span><span class='Parentheses'>(</span><a href="../../src/backend/utils/adt/varbit.c.html#LN359"><span class='Ref_to_Func'>bit</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span>leftmostvalue_bit<span class='Delimiter'>, </span><a href="../../src/backend/utils/adt/varbit.c.html#LN926"><span class='Ref_to_Func'>bitcmp</span></a><span class='Parentheses'>) 
</span> 
<span class='Keyword'>static </span><a href="../../src/include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
leftmostvalue_varbit<span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> <a href="../../src/include/fmgr.h.html#LN587"><span class='Ref_to_Macro'>DirectFunctionCall3</span></a><span class='Parentheses'>(</span><a href="../../src/backend/utils/adt/varbit.c.html#LN427"><span class='Ref_to_Func'>varbit_in</span></a><span class='Delimiter'>, 
</span>                               <a href="../../src/include/postgres.h.html#LN583"><span class='Ref_to_Macro'>CStringGetDatum</span></a><span class='Parentheses'>(</span><span class='String'>""</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                               <a href="../../src/include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                               <a href="../../src/include/postgres.h.html#LN484"><span class='Ref_to_Macro'>Int32GetDatum</span></a><span class='Parentheses'>(</span><span class='Operator'>-</span><span class='Number'>1</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<a name="LN382"></a><span class='Declare_Function'>GIN_SUPPORT</span><span class='Parentheses'>(</span><a href="../../src/backend/utils/adt/varbit.c.html#LN712"><span class='Ref_to_Func'>varbit</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span>leftmostvalue_varbit<span class='Delimiter'>, </span><a href="../../src/backend/utils/adt/varbit.c.html#LN926"><span class='Ref_to_Func'>bitcmp</span></a><span class='Parentheses'>) 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Numeric type hasn't a real left-most value, so we use PointerGetDatum(NULL) 
 * (*not* a SQL NULL) to represent that.  We can get away with that because 
 * the value returned by our leftmostvalue function will never be stored in 
 * the index nor passed to anything except our compare and prefix-comparison 
 * functions.  The same trick could be used for other pass-by-reference types. 
 */ 
</span> 
<span class='Keyword'>#define </span>NUMERIC_IS_LEFTMOST<span class='Parentheses'>(</span><a href="../../src/bin/psql/psqlscanslash.l.html#LN108"><span class='Ref_to_Global_Var'>x</span></a><span class='Parentheses'>)</span>  <span class='Parentheses'>((</span><a href="../../src/bin/psql/psqlscanslash.l.html#LN108"><span class='Ref_to_Global_Var'>x</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
 
<a href="../btree_gist/btree_bytea.c.html#LN14"><span class='Ref_to_Proto'>PG_FUNCTION_INFO_V1</span></a><span class='Parentheses'>(</span>gin_numeric_cmp<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<a href="../../src/include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
gin_numeric_cmp<span class='Parentheses'>(</span><a href="../../src/include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN399"></a>    <a href="../../src/include/utils/numeric.h.html#LN42"><span class='Ref_to_Typedef'>Numeric</span></a>     <span class='Declare_Local'>a</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../src/include/utils/numeric.h.html#LN42"><span class='Ref_to_Typedef'>Numeric</span></a><span class='Parentheses'>) </span><a href="../../src/include/fmgr.h.html#LN240"><span class='Ref_to_Macro'>PG_GETARG_POINTER</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN400"></a>    <a href="../../src/include/utils/numeric.h.html#LN42"><span class='Ref_to_Typedef'>Numeric</span></a>     <span class='Declare_Local'>b</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../src/include/utils/numeric.h.html#LN42"><span class='Ref_to_Typedef'>Numeric</span></a><span class='Parentheses'>) </span><a href="../../src/include/fmgr.h.html#LN240"><span class='Ref_to_Macro'>PG_GETARG_POINTER</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN401"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>res</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span>NUMERIC_IS_LEFTMOST<span class='Parentheses'>(</span><a href="btree_gin.c.html#LN399"><span class='Ref_To_Local'>a</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="btree_gin.c.html#LN401"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span>NUMERIC_IS_LEFTMOST<span class='Parentheses'>(</span><a href="btree_gin.c.html#LN400"><span class='Ref_To_Local'>b</span></a><span class='Parentheses'>))</span> <span class='Operator'>? </span><span class='Number'>0</span> <span class='Operator'>: -</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span>NUMERIC_IS_LEFTMOST<span class='Parentheses'>(</span><a href="btree_gin.c.html#LN400"><span class='Ref_To_Local'>b</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="btree_gin.c.html#LN401"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="btree_gin.c.html#LN401"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="../../src/include/postgres.h.html#LN477"><span class='Ref_to_Macro'>DatumGetInt32</span></a><span class='Parentheses'>(</span><a href="../../src/include/fmgr.h.html#LN585"><span class='Ref_to_Macro'>DirectFunctionCall2</span></a><span class='Parentheses'>(</span><a href="../../src/backend/utils/adt/numeric.c.html#LN2018"><span class='Ref_to_Func'>numeric_cmp</span></a><span class='Delimiter'>, 
</span>                                                <a href="../../src/include/utils/numeric.h.html#LN50"><span class='Ref_to_Macro'>NumericGetDatum</span></a><span class='Parentheses'>(</span><a href="btree_gin.c.html#LN399"><span class='Ref_To_Local'>a</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                                <a href="../../src/include/utils/numeric.h.html#LN50"><span class='Ref_to_Macro'>NumericGetDatum</span></a><span class='Parentheses'>(</span><a href="btree_gin.c.html#LN400"><span class='Ref_To_Local'>b</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../src/include/fmgr.h.html#LN313"><span class='Ref_to_Macro'>PG_RETURN_INT32</span></a><span class='Parentheses'>(</span><a href="btree_gin.c.html#LN401"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end GIN_SUPPORT &raquo; </span> 
 
<span class='Keyword'>static </span><a href="../../src/include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN422"></a><span class='Declare_Function'>leftmostvalue_numeric</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> <a href="../../src/include/postgres.h.html#LN561"><span class='Ref_to_Macro'>PointerGetDatum</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a name="LN427"></a><span class='Declare_Function'>GIN_SUPPORT</span><span class='Parentheses'>(</span><a href="../../src/interfaces/ecpg/include/pgtypes_numeric.h.html#LN15"><span class='Ref_to_Typedef'>numeric</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span><a href="btree_gin.c.html#LN421"><span class='Ref_to_Func'>leftmostvalue_numeric</span></a><span class='Delimiter'>, </span>gin_numeric_cmp<span class='Parentheses'>) 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Use a similar trick to that used for numeric for enums, since we don't 
 * actually know the leftmost value of any enum without knowing the concrete 
 * type, so we use a dummy leftmost value of InvalidOid. 
 * 
 * Note that we use CallerFInfoFunctionCall2 here so that enum_cmp 
 * gets a valid fn_extra to work with. Unlike most other type comparison 
 * routines it needs it, so we can't use DirectFunctionCall2. 
 */ 
</span> 
 
<span class='Keyword'>#define </span>ENUM_IS_LEFTMOST<span class='Parentheses'>(</span><a href="../../src/bin/psql/psqlscanslash.l.html#LN108"><span class='Ref_to_Global_Var'>x</span></a><span class='Parentheses'>) ((</span><a href="../../src/bin/psql/psqlscanslash.l.html#LN108"><span class='Ref_to_Global_Var'>x</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><a href="../../src/include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Parentheses'>)</span> 
 
<a href="../btree_gist/btree_bytea.c.html#LN14"><span class='Ref_to_Proto'>PG_FUNCTION_INFO_V1</span></a><span class='Parentheses'>(</span>gin_enum_cmp<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<a href="../../src/include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
gin_enum_cmp<span class='Parentheses'>(</span><a href="../../src/include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN447"></a>    <a href="../../src/include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>a</span> <span class='Operator'>= </span><a href="../../src/include/fmgr.h.html#LN239"><span class='Ref_to_Macro'>PG_GETARG_OID</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN448"></a>    <a href="../../src/include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>b</span> <span class='Operator'>= </span><a href="../../src/include/fmgr.h.html#LN239"><span class='Ref_to_Macro'>PG_GETARG_OID</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN449"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>res</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span>ENUM_IS_LEFTMOST<span class='Parentheses'>(</span><a href="btree_gin.c.html#LN447"><span class='Ref_To_Local'>a</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="btree_gin.c.html#LN449"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span>ENUM_IS_LEFTMOST<span class='Parentheses'>(</span><a href="btree_gin.c.html#LN448"><span class='Ref_To_Local'>b</span></a><span class='Parentheses'>))</span> <span class='Operator'>? </span><span class='Number'>0</span> <span class='Operator'>: -</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span>ENUM_IS_LEFTMOST<span class='Parentheses'>(</span><a href="btree_gin.c.html#LN448"><span class='Ref_To_Local'>b</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="btree_gin.c.html#LN449"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="btree_gin.c.html#LN449"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="../../src/include/postgres.h.html#LN477"><span class='Ref_to_Macro'>DatumGetInt32</span></a><span class='Parentheses'>(</span><a href="../../src/include/fmgr.h.html#LN503"><span class='Ref_to_Proto'>CallerFInfoFunctionCall2</span></a><span class='Parentheses'>(</span> 
                                                     <a href="../../src/backend/utils/adt/enum.c.html#LN386"><span class='Ref_to_Func'>enum_cmp</span></a><span class='Delimiter'>, 
</span>                                                     fcinfo<span class='Operator'>-&GT;</span>flinfo<span class='Delimiter'>, 
</span>                                                     <a href="../../src/include/fmgr.h.html#LN162"><span class='Ref_to_Macro'>PG_GET_COLLATION</span></a><span class='Parentheses'>()</span><span class='Delimiter'>, 
</span>                                                     <a href="../../src/include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="btree_gin.c.html#LN447"><span class='Ref_To_Local'>a</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                                     <a href="../../src/include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="btree_gin.c.html#LN448"><span class='Ref_To_Local'>b</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../src/include/fmgr.h.html#LN313"><span class='Ref_to_Macro'>PG_RETURN_INT32</span></a><span class='Parentheses'>(</span><a href="btree_gin.c.html#LN449"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end GIN_SUPPORT &raquo; </span> 
 
<span class='Keyword'>static </span><a href="../../src/include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN473"></a><span class='Declare_Function'>leftmostvalue_enum</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> <a href="../../src/include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="../../src/include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="btree_gin.c.html#LN182"><span class='Ref_to_Macro'>GIN_SUPPORT</span></a><span class='Parentheses'>(</span>anyenum<span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span><a href="btree_gin.c.html#LN472"><span class='Ref_to_Func'>leftmostvalue_enum</span></a><span class='Delimiter'>, </span>gin_enum_cmp<span class='Parentheses'>) 
</span></pre>
<table bgcolor='#c0c0c0' width='100%'><tr><td><a href='../../Contents.html'>Contents</a></td></tr>
</table><hr><p class='blurb' align='center'><a href='http://www.sourceinsight.com'>HTML Created by Source Insight Version 4.00.0084 Built on 2017-02-26</a></p>
</body></html>