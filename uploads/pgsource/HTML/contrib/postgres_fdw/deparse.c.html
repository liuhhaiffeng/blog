<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta name="generator" content="Source Insight Version 4.00.0084 Built on 2017-02-26">
<meta charset='UTF-8' />
<style type='text/css'><!--
TD {background-color: #C0C0C0; font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.blurb {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.filename {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 120%; font-weight: bold; }
.dirname {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 100%; font-weight: bold; margin-top: 2.5em;}
--></style>
<title>contrib\postgres_fdw\deparse.c</title>
<LINK REL=StyleSheet HREF="../../C_Cpp_Source_File.css" TYPE='text/css' MEDIA=screen>
</head>
<body bgcolor=#ffffff>
<table bgcolor='#c0c0c0' width='100%'>
<tr><td><p class='filename'><b>contrib\postgres_fdw\deparse.c</b></p></td>
<td align='right'>
Wed Jun 14 08:25:26 2017
</td></tr>
<tr><td><a href='../../Contents.html'>Contents</a></td></tr>
</table>
<pre>
<span class='Comment_Multi_Line'>/*------------------------------------------------------------------------- 
 * 
 * deparse.c 
 *        Query deparser for postgres_fdw 
 * 
 * This file includes functions that examine query WHERE clauses to see 
 * whether they're safe to send to the remote server for execution, as 
 * well as functions to construct the query text to be sent.  The latter 
 * functionality is annoyingly duplicative of ruleutils.c, but there are 
 * enough special considerations that it seems best to keep this separate. 
 * One saving grace is that we only need deparse logic for node types that 
 * we consider safe to send. 
 * 
 * We assume that the remote session's search_path is exactly "pg_catalog", 
 * and thus we need schema-qualify all and only names outside pg_catalog. 
 * 
 * We do not consider that it is ever safe to send COLLATE expressions to 
 * the remote server: it might not have the same collation names we do. 
 * (Later we might consider it safe to send COLLATE "C", but even that would 
 * fail on old remote servers.)  An expression is considered safe to send 
 * only if all operator/function input collations used in it are traceable to 
 * Var(s) of the foreign table.  That implies that if the remote server gets 
 * a different answer than we do, the foreign table's columns are not marked 
 * with collations that match the remote table's columns, which we can 
 * consider to be user error. 
 * 
 * Portions Copyright (c) 2012-2017, PostgreSQL Global Development Group 
 * 
 * IDENTIFICATION 
 *        contrib/postgres_fdw/deparse.c 
 * 
 *------------------------------------------------------------------------- 
 */ 
</span><span class='Keyword'>#include </span><span class='String'>"postgres.h"</span> 
 
<span class='Keyword'>#include </span><span class='String'>"postgres_fdw.h"</span> 
 
<span class='Keyword'>#include </span><span class='String'>"access/heapam.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"access/htup_details.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"access/sysattr.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_aggregate.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_collation.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_namespace.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_operator.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_proc.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_type.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"commands/defrem.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"nodes/makefuncs.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"nodes/nodeFuncs.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"nodes/plannodes.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"optimizer/clauses.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"optimizer/prep.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"optimizer/tlist.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"optimizer/var.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"parser/parsetree.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/builtins.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/lsyscache.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/rel.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/syscache.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/typcache.h"</span> 
 
 
<span class='Comment_Multi_Line'>/* 
 * Global context for foreign_expr_walker's search of an expression tree. 
 */ 
</span><a name="LN65"></a><span class='Control'>typedef</span> <span class='Control'>struct</span> <span class='Declare_Struct'>foreign_glob_cxt</span> 
<span class='Delimiter'>{ 
</span><a name="LN67"></a>    <a href="../../src/include/nodes/relation.h.html#LN150"><span class='Ref_to_Struct'>PlannerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Member'>root</span><span class='Delimiter'>;</span>          <span class='Comment_Single_Line'>/* global planner state */ 
</span><a name="LN68"></a>    <a href="../../src/include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Member'>foreignrel</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* the foreign relation we are planning for */ 
</span><a name="LN69"></a>    <a href="../../src/include/nodes/relation.h.html#LN27"><span class='Ref_to_Typedef'>Relids</span></a>      <span class='Declare_Member'>relids</span><span class='Delimiter'>;</span>         <span class='Comment_Multi_Line'>/* relids of base relations in the underlying 
                                 * scan */ 
</span><a name="LN71"></a><span class='Delimiter'>} </span><span class='Declare_Typedef'>foreign_glob_cxt</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Local (per-tree-level) context for foreign_expr_walker's search. 
 * This is concerned with identifying collations used in the expression. 
 */ 
</span><span class='Control'>typedef</span> <span class='Control'>enum</span> 
<span class='Delimiter'>{ 
</span><a name="LN79"></a>    <span class='Declare_Enum_Const'>FDW_COLLATE_NONE</span><span class='Delimiter'>,</span>           <span class='Comment_Multi_Line'>/* expression is of a noncollatable type, or 
                                 * it has default collation that is not 
                                 * traceable to a foreign Var */ 
</span><a name="LN82"></a>    <span class='Declare_Enum_Const'>FDW_COLLATE_SAFE</span><span class='Delimiter'>,</span>           <span class='Comment_Single_Line'>/* collation derives from a foreign Var */ 
</span><a name="LN83"></a>    <span class='Declare_Enum_Const'>FDW_COLLATE_UNSAFE</span>          <span class='Comment_Multi_Line'>/* collation is non-default and derives from 
                                 * something other than a foreign Var */ 
</span><a name="LN85"></a><span class='Delimiter'>} </span><span class='Declare_Typedef'>FDWCollateState</span><span class='Delimiter'>; 
</span> 
<a name="LN87"></a><span class='Control'>typedef</span> <span class='Control'>struct</span> <span class='Declare_Struct'>foreign_loc_cxt</span> 
<span class='Delimiter'>{ 
</span><a name="LN89"></a>    <a href="../../src/include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Member'>collation</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* OID of current collation, if any */ 
</span><a name="LN90"></a>    <a href="deparse.c.html#LN77"><span class='Ref_to_Typedef'>FDWCollateState</span></a> <span class='Declare_Member'>state</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* state of current collation choice */ 
</span><a name="LN91"></a><span class='Delimiter'>} </span><span class='Declare_Typedef'>foreign_loc_cxt</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Context for deparseExpr 
 */ 
</span><a name="LN96"></a><span class='Control'>typedef</span> <span class='Control'>struct</span> <span class='Declare_Struct'>deparse_expr_cxt</span> 
<span class='Delimiter'>{ 
</span><a name="LN98"></a>    <a href="../../src/include/nodes/relation.h.html#LN150"><span class='Ref_to_Struct'>PlannerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Member'>root</span><span class='Delimiter'>;</span>          <span class='Comment_Single_Line'>/* global planner state */ 
</span><a name="LN99"></a>    <a href="../../src/include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Member'>foreignrel</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* the foreign relation we are planning for */ 
</span><a name="LN100"></a>    <a href="../../src/include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Member'>scanrel</span><span class='Delimiter'>;</span>        <span class='Comment_Multi_Line'>/* the underlying scan relation. Same as 
                                 * foreignrel, when that represents a join or 
                                 * a base relation. */ 
</span><a name="LN103"></a>    <a href="../../src/include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Member'>buf</span><span class='Delimiter'>;</span>            <span class='Comment_Single_Line'>/* output buffer to append to */ 
</span><a name="LN104"></a>    <a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>      <span class='Operator'>**</span><span class='Declare_Member'>params_list</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* exprs that will become remote Params */ 
</span><a name="LN105"></a><span class='Delimiter'>} </span><span class='Declare_Typedef'>deparse_expr_cxt</span><span class='Delimiter'>; 
</span> 
<a name="LN107"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>REL_ALIAS_PREFIX</span>    <span class='String'>"r"</span> 
<span class='Comment_Multi_Line'>/* Handy macro to add relation name qualification */ 
</span><a name="LN109"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>ADD_REL_QUALIFIER</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>buf</span><span class='Delimiter'>, </span><span class='Declare_Parameter'>varno</span><span class='Parentheses'>)</span>   <span class='Operator'>\ 
</span>        <a href="../../src/bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>((</span><a href="deparse.c.html#LN109"><span class='Ref_to_Parameter'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='String'>"%s%d."</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN107"><span class='Ref_to_Const'>REL_ALIAS_PREFIX</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="deparse.c.html#LN109"><span class='Ref_to_Parameter'>varno</span></a><span class='Parentheses'>))</span> 
<a name="LN111"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>SUBQUERY_REL_ALIAS_PREFIX</span>   <span class='String'>"s"</span> 
<a name="LN112"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>SUBQUERY_COL_ALIAS_PREFIX</span>   <span class='String'>"c"</span> 
 
<span class='Comment_Multi_Line'>/* 
 * Functions to determine whether an expression can be evaluated safely on 
 * remote server. 
 */ 
</span><a name="LN118"></a><span class='Keyword'>static bool </span><span class='Declare_Prototype'>foreign_expr_walker</span><span class='Parentheses'>(</span><a href="../../src/include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, 
</span><a name="LN119"></a>                    <a href="deparse.c.html#LN65"><span class='Ref_to_Struct'>foreign_glob_cxt</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>glob_cxt</span><span class='Delimiter'>, 
</span><a name="LN120"></a>                    <a href="deparse.c.html#LN87"><span class='Ref_to_Struct'>foreign_loc_cxt</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>outer_cxt</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN121"></a><span class='Keyword'>static char </span><span class='Operator'>*</span><span class='Declare_Prototype'>deparse_type_name</span><span class='Parentheses'>(</span><a href="../../src/include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>type_oid</span><span class='Delimiter'>, </span><a href="../../src/include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a> <span class='Declare_Parameter'>typemod</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Functions to construct string representation of a node tree. 
 */ 
</span><a name="LN126"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>deparseTargetList</span><span class='Parentheses'>(</span><a href="../../src/include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a> <span class='Declare_Parameter'>buf</span><span class='Delimiter'>, 
</span><a name="LN127"></a>                  <a href="../../src/include/nodes/relation.h.html#LN150"><span class='Ref_to_Struct'>PlannerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>root</span><span class='Delimiter'>, 
</span><a name="LN128"></a>                  <a href="../../src/include/c.h.html#LN364"><span class='Ref_to_Typedef'>Index</span></a> <span class='Declare_Parameter'>rtindex</span><span class='Delimiter'>, 
</span><a name="LN129"></a>                  <a href="../../src/include/utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a> <span class='Declare_Parameter'>rel</span><span class='Delimiter'>, 
</span><a name="LN130"></a>                  <span class='Keyword'>bool </span><span class='Declare_Parameter'>is_returning</span><span class='Delimiter'>, 
</span><a name="LN131"></a>                  <a href="../../src/include/nodes/bitmapset.h.html#LN36"><span class='Ref_to_Struct'>Bitmapset</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>attrs_used</span><span class='Delimiter'>, 
</span><a name="LN132"></a>                  <span class='Keyword'>bool </span><span class='Declare_Parameter'>qualify_col</span><span class='Delimiter'>, 
</span><a name="LN133"></a>                  <a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>retrieved_attrs</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN134"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>deparseExplicitTargetList</span><span class='Parentheses'>(</span><a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tlist</span><span class='Delimiter'>, </span><a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>retrieved_attrs</span><span class='Delimiter'>, 
</span><a name="LN135"></a>                          <a href="deparse.c.html#LN96"><span class='Ref_to_Struct'>deparse_expr_cxt</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN136"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>deparseSubqueryTargetList</span><span class='Parentheses'>(</span><a href="deparse.c.html#LN96"><span class='Ref_to_Struct'>deparse_expr_cxt</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN137"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>deparseReturningList</span><span class='Parentheses'>(</span><a href="../../src/include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a> <span class='Declare_Parameter'>buf</span><span class='Delimiter'>, </span><a href="../../src/include/nodes/relation.h.html#LN150"><span class='Ref_to_Struct'>PlannerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>root</span><span class='Delimiter'>, 
</span><a name="LN138"></a>                     <a href="../../src/include/c.h.html#LN364"><span class='Ref_to_Typedef'>Index</span></a> <span class='Declare_Parameter'>rtindex</span><span class='Delimiter'>, </span><a href="../../src/include/utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a> <span class='Declare_Parameter'>rel</span><span class='Delimiter'>, 
</span><a name="LN139"></a>                     <span class='Keyword'>bool </span><span class='Declare_Parameter'>trig_after_row</span><span class='Delimiter'>, 
</span><a name="LN140"></a>                     <a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>returningList</span><span class='Delimiter'>, 
</span><a name="LN141"></a>                     <a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>retrieved_attrs</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN142"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>deparseColumnRef</span><span class='Parentheses'>(</span><a href="../../src/include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a> <span class='Declare_Parameter'>buf</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>varno</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>varattno</span><span class='Delimiter'>, 
</span><a name="LN143"></a>                 <a href="../../src/include/nodes/relation.h.html#LN150"><span class='Ref_to_Struct'>PlannerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>root</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>qualify_col</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN144"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>deparseRelation</span><span class='Parentheses'>(</span><a href="../../src/include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a> <span class='Declare_Parameter'>buf</span><span class='Delimiter'>, </span><a href="../../src/include/utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a> <span class='Declare_Parameter'>rel</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN145"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>deparseExpr</span><span class='Parentheses'>(</span><a href="../../src/include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>expr</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN96"><span class='Ref_to_Struct'>deparse_expr_cxt</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN146"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>deparseVar</span><span class='Parentheses'>(</span><a href="../../src/include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN96"><span class='Ref_to_Struct'>deparse_expr_cxt</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN147"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>deparseConst</span><span class='Parentheses'>(</span><a href="../../src/include/nodes/primnodes.h.html#LN188"><span class='Ref_to_Struct'>Const</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN96"><span class='Ref_to_Struct'>deparse_expr_cxt</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>showtype</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN148"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>deparseParam</span><span class='Parentheses'>(</span><a href="../../src/include/nodes/primnodes.h.html#LN240"><span class='Ref_to_Struct'>Param</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN96"><span class='Ref_to_Struct'>deparse_expr_cxt</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN149"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>deparseArrayRef</span><span class='Parentheses'>(</span><a href="../../src/include/nodes/primnodes.h.html#LN395"><span class='Ref_to_Struct'>ArrayRef</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN96"><span class='Ref_to_Struct'>deparse_expr_cxt</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN150"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>deparseFuncExpr</span><span class='Parentheses'>(</span><a href="../../src/include/nodes/primnodes.h.html#LN444"><span class='Ref_to_Struct'>FuncExpr</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN96"><span class='Ref_to_Struct'>deparse_expr_cxt</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN151"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>deparseOpExpr</span><span class='Parentheses'>(</span><a href="../../src/include/nodes/primnodes.h.html#LN491"><span class='Ref_to_Struct'>OpExpr</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN96"><span class='Ref_to_Struct'>deparse_expr_cxt</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN152"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>deparseOperatorName</span><span class='Parentheses'>(</span><a href="../../src/include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a> <span class='Declare_Parameter'>buf</span><span class='Delimiter'>, </span><a href="../../src/include/catalog/pg_operator.h.html#LN56"><span class='Ref_to_Typedef'>Form_pg_operator</span></a> <span class='Declare_Parameter'>opform</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN153"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>deparseDistinctExpr</span><span class='Parentheses'>(</span><a href="../../src/include/nodes/primnodes.h.html#LN514"><span class='Ref_to_Typedef'>DistinctExpr</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN96"><span class='Ref_to_Struct'>deparse_expr_cxt</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN154"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>deparseScalarArrayOpExpr</span><span class='Parentheses'>(</span><a href="../../src/include/nodes/primnodes.h.html#LN534"><span class='Ref_to_Struct'>ScalarArrayOpExpr</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, 
</span><a name="LN155"></a>                         <a href="deparse.c.html#LN96"><span class='Ref_to_Struct'>deparse_expr_cxt</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN156"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>deparseRelabelType</span><span class='Parentheses'>(</span><a href="../../src/include/nodes/primnodes.h.html#LN786"><span class='Ref_to_Struct'>RelabelType</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN96"><span class='Ref_to_Struct'>deparse_expr_cxt</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN157"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>deparseBoolExpr</span><span class='Parentheses'>(</span><a href="../../src/include/nodes/primnodes.h.html#LN557"><span class='Ref_to_Struct'>BoolExpr</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN96"><span class='Ref_to_Struct'>deparse_expr_cxt</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN158"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>deparseNullTest</span><span class='Parentheses'>(</span><a href="../../src/include/nodes/primnodes.h.html#LN1175"><span class='Ref_to_Struct'>NullTest</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN96"><span class='Ref_to_Struct'>deparse_expr_cxt</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN159"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>deparseArrayExpr</span><span class='Parentheses'>(</span><a href="../../src/include/nodes/primnodes.h.html#LN947"><span class='Ref_to_Struct'>ArrayExpr</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN96"><span class='Ref_to_Struct'>deparse_expr_cxt</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN160"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>printRemoteParam</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>paramindex</span><span class='Delimiter'>, </span><a href="../../src/include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>paramtype</span><span class='Delimiter'>, </span><a href="../../src/include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a> <span class='Declare_Parameter'>paramtypmod</span><span class='Delimiter'>, 
</span><a name="LN161"></a>                 <a href="deparse.c.html#LN96"><span class='Ref_to_Struct'>deparse_expr_cxt</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN162"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>printRemotePlaceholder</span><span class='Parentheses'>(</span><a href="../../src/include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>paramtype</span><span class='Delimiter'>, </span><a href="../../src/include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a> <span class='Declare_Parameter'>paramtypmod</span><span class='Delimiter'>, 
</span><a name="LN163"></a>                       <a href="deparse.c.html#LN96"><span class='Ref_to_Struct'>deparse_expr_cxt</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN164"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>deparseSelectSql</span><span class='Parentheses'>(</span><a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tlist</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>is_subquery</span><span class='Delimiter'>, </span><a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>retrieved_attrs</span><span class='Delimiter'>, 
</span><a name="LN165"></a>                 <a href="deparse.c.html#LN96"><span class='Ref_to_Struct'>deparse_expr_cxt</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN166"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>deparseLockingClause</span><span class='Parentheses'>(</span><a href="deparse.c.html#LN96"><span class='Ref_to_Struct'>deparse_expr_cxt</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN167"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>appendOrderByClause</span><span class='Parentheses'>(</span><a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pathkeys</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN96"><span class='Ref_to_Struct'>deparse_expr_cxt</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN168"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>appendConditions</span><span class='Parentheses'>(</span><a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>exprs</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN96"><span class='Ref_to_Struct'>deparse_expr_cxt</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN169"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>deparseFromExprForRel</span><span class='Parentheses'>(</span><a href="../../src/include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a> <span class='Declare_Parameter'>buf</span><span class='Delimiter'>, </span><a href="../../src/include/nodes/relation.h.html#LN150"><span class='Ref_to_Struct'>PlannerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>root</span><span class='Delimiter'>, 
</span><a name="LN170"></a>                    <a href="../../src/include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>joinrel</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>use_alias</span><span class='Delimiter'>, </span><a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>params_list</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN171"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>deparseFromExpr</span><span class='Parentheses'>(</span><a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>quals</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN96"><span class='Ref_to_Struct'>deparse_expr_cxt</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN172"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>deparseRangeTblRef</span><span class='Parentheses'>(</span><a href="../../src/include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a> <span class='Declare_Parameter'>buf</span><span class='Delimiter'>, </span><a href="../../src/include/nodes/relation.h.html#LN150"><span class='Ref_to_Struct'>PlannerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>root</span><span class='Delimiter'>, 
</span><a name="LN173"></a>                   <a href="../../src/include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>foreignrel</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>make_subquery</span><span class='Delimiter'>, 
</span><a name="LN174"></a>                   <a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>params_list</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN175"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>deparseAggref</span><span class='Parentheses'>(</span><a href="../../src/include/nodes/primnodes.h.html#LN290"><span class='Ref_to_Struct'>Aggref</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN96"><span class='Ref_to_Struct'>deparse_expr_cxt</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN176"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>appendGroupByClause</span><span class='Parentheses'>(</span><a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tlist</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN96"><span class='Ref_to_Struct'>deparse_expr_cxt</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN177"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>appendAggOrderBy</span><span class='Parentheses'>(</span><a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>orderList</span><span class='Delimiter'>, </span><a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>targetList</span><span class='Delimiter'>, 
</span><a name="LN178"></a>                 <a href="deparse.c.html#LN96"><span class='Ref_to_Struct'>deparse_expr_cxt</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN179"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>appendFunctionName</span><span class='Parentheses'>(</span><a href="../../src/include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>funcid</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN96"><span class='Ref_to_Struct'>deparse_expr_cxt</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN180"></a><span class='Keyword'>static </span><a href="../../src/include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Prototype'>deparseSortGroupClause</span><span class='Parentheses'>(</span><a href="../../src/include/c.h.html#LN364"><span class='Ref_to_Typedef'>Index</span></a> <span class='Declare_Parameter'>ref</span><span class='Delimiter'>, </span><a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tlist</span><span class='Delimiter'>, 
</span><a name="LN181"></a>                       <a href="deparse.c.html#LN96"><span class='Ref_to_Struct'>deparse_expr_cxt</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Helper functions 
 */ 
</span><a name="LN186"></a><span class='Keyword'>static bool </span><span class='Declare_Prototype'>is_subquery_var</span><span class='Parentheses'>(</span><a href="../../src/include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><a href="../../src/include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>foreignrel</span><span class='Delimiter'>, 
</span><a name="LN187"></a>                <span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>relno</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>colno</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN188"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>get_relation_column_alias_ids</span><span class='Parentheses'>(</span><a href="../../src/include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><a href="../../src/include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>foreignrel</span><span class='Delimiter'>, 
</span><a name="LN189"></a>                              <span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>relno</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>colno</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
 
<span class='Comment_Multi_Line'>/* 
 * Examine each qual clause in input_conds, and classify them into two groups, 
 * which are returned as two lists: 
 *  - remote_conds contains expressions that can be evaluated remotely 
 *  - local_conds contains expressions that can't be evaluated remotely 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN199"></a><span class='Declare_Function'>classifyConditions</span><span class='Parentheses'>(</span><a href="../../src/include/nodes/relation.h.html#LN150"><span class='Ref_to_Struct'>PlannerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>root</span><span class='Delimiter'>, 
</span><a name="LN200"></a>                   <a href="../../src/include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>baserel</span><span class='Delimiter'>, 
</span><a name="LN201"></a>                   <a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>input_conds</span><span class='Delimiter'>, 
</span><a name="LN202"></a>                   <a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>remote_conds</span><span class='Delimiter'>, 
</span><a name="LN203"></a>                   <a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>local_conds</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN205"></a>    <a href="../../src/include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc</span><span class='Delimiter'>; 
</span> 
    <span class='Operator'>*</span><a href="deparse.c.html#LN202"><span class='Ref_to_Parameter'>remote_conds</span></a> <span class='Operator'>= </span><a href="../../src/include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="deparse.c.html#LN203"><span class='Ref_to_Parameter'>local_conds</span></a> <span class='Operator'>= </span><a href="../../src/include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span> 
    <a href="../../src/include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN205"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN201"><span class='Ref_to_Parameter'>input_conds</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN212"></a>        <a href="../../src/include/nodes/relation.h.html#LN1742"><span class='Ref_to_Struct'>RestrictInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>ri</span> <span class='Operator'>= </span><a href="../../src/include/nodes/pg_list.h.html#LN108"><span class='Ref_to_Macro'>lfirst_node</span></a><span class='Parentheses'>(</span><a href="../../src/include/nodes/relation.h.html#LN1742"><span class='Ref_to_Struct'>RestrictInfo</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN205"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="postgres_fdw.h.html#LN139"><span class='Ref_to_Proto'>is_foreign_expr</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN199"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN200"><span class='Ref_to_Parameter'>baserel</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN212"><span class='Ref_To_Local'>ri</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/relation.h.html#LN1746"><span class='Ref_to_Member'>clause</span></a><span class='Parentheses'>))</span> 
            <span class='Operator'>*</span><a href="deparse.c.html#LN202"><span class='Ref_to_Parameter'>remote_conds</span></a> <span class='Operator'>= </span><a href="../../src/backend/nodes/list.c.html#LN126"><span class='Ref_to_Func'>lappend</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="deparse.c.html#LN202"><span class='Ref_to_Parameter'>remote_conds</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN212"><span class='Ref_To_Local'>ri</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <span class='Operator'>*</span><a href="deparse.c.html#LN203"><span class='Ref_to_Parameter'>local_conds</span></a> <span class='Operator'>= </span><a href="../../src/backend/nodes/list.c.html#LN126"><span class='Ref_to_Func'>lappend</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="deparse.c.html#LN203"><span class='Ref_to_Parameter'>local_conds</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN212"><span class='Ref_To_Local'>ri</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
}</span><span class='Auto_Annotations'> &laquo; end classifyConditions &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Returns true if given expr is safe to evaluate on the foreign server. 
 */ 
</span><span class='Keyword'>bool 
</span><a name="LN225"></a><span class='Declare_Function'>is_foreign_expr</span><span class='Parentheses'>(</span><a href="../../src/include/nodes/relation.h.html#LN150"><span class='Ref_to_Struct'>PlannerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>root</span><span class='Delimiter'>, 
</span><a name="LN226"></a>                <a href="../../src/include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>baserel</span><span class='Delimiter'>, 
</span><a name="LN227"></a>                <a href="../../src/include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>expr</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN229"></a>    <a href="deparse.c.html#LN65"><span class='Ref_to_Struct'>foreign_glob_cxt</span></a> <span class='Declare_Local'>glob_cxt</span><span class='Delimiter'>; 
</span><a name="LN230"></a>    <a href="deparse.c.html#LN87"><span class='Ref_to_Struct'>foreign_loc_cxt</span></a> <span class='Declare_Local'>loc_cxt</span><span class='Delimiter'>; 
</span><a name="LN231"></a>    <a href="postgres_fdw.h.html#LN29"><span class='Ref_to_Struct'>PgFdwRelationInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>fpinfo</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="postgres_fdw.h.html#LN29"><span class='Ref_to_Struct'>PgFdwRelationInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) (</span><a href="deparse.c.html#LN226"><span class='Ref_to_Parameter'>baserel</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/relation.h.html#LN576"><span class='Ref_to_Member'>fdw_private</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Check that the expression consists of nodes that are safe to execute 
     * remotely. 
     */ 
</span>    <a href="deparse.c.html#LN229"><span class='Ref_To_Local'>glob_cxt</span></a><span class='Operator'>.</span><a href="deparse.c.html#LN67"><span class='Ref_to_Member'>root</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN225"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>; 
</span>    <a href="deparse.c.html#LN229"><span class='Ref_To_Local'>glob_cxt</span></a><span class='Operator'>.</span><a href="deparse.c.html#LN68"><span class='Ref_to_Member'>foreignrel</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN226"><span class='Ref_to_Parameter'>baserel</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * For an upper relation, use relids from its underneath scan relation, 
     * because the upperrel's own relids currently aren't set to anything 
     * meaningful by the core code.  For other relation, use their own relids. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../src/include/nodes/relation.h.html#LN512"><span class='Ref_to_Macro'>IS_UPPER_REL</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN226"><span class='Ref_to_Parameter'>baserel</span></a><span class='Parentheses'>))</span> 
        <a href="deparse.c.html#LN229"><span class='Ref_To_Local'>glob_cxt</span></a><span class='Operator'>.</span><a href="deparse.c.html#LN69"><span class='Ref_to_Member'>relids</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN231"><span class='Ref_To_Local'>fpinfo</span></a><span class='Operator'>-&GT;</span><a href="postgres_fdw.h.html#LN88"><span class='Ref_to_Member'>outerrel</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/relation.h.html#LN524"><span class='Ref_to_Member'>relids</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="deparse.c.html#LN229"><span class='Ref_To_Local'>glob_cxt</span></a><span class='Operator'>.</span><a href="deparse.c.html#LN69"><span class='Ref_to_Member'>relids</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN226"><span class='Ref_to_Parameter'>baserel</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/relation.h.html#LN524"><span class='Ref_to_Member'>relids</span></a><span class='Delimiter'>; 
</span>    <a href="deparse.c.html#LN230"><span class='Ref_To_Local'>loc_cxt</span></a><span class='Operator'>.</span><a href="deparse.c.html#LN89"><span class='Ref_to_Member'>collation</span></a> <span class='Operator'>= </span><a href="../../src/include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
</span>    <a href="deparse.c.html#LN230"><span class='Ref_To_Local'>loc_cxt</span></a><span class='Operator'>.</span><a href="deparse.c.html#LN90"><span class='Ref_to_Member'>state</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN79"><span class='Ref_to_EnumConst'>FDW_COLLATE_NONE</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="deparse.c.html#LN118"><span class='Ref_to_Proto'>foreign_expr_walker</span></a><span class='Parentheses'>((</span><a href="../../src/include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN227"><span class='Ref_to_Parameter'>expr</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="deparse.c.html#LN229"><span class='Ref_To_Local'>glob_cxt</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="deparse.c.html#LN230"><span class='Ref_To_Local'>loc_cxt</span></a><span class='Parentheses'>))</span> 
        <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If the expression has a valid collation that does not arise from a 
     * foreign var, the expression can not be sent over. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN230"><span class='Ref_To_Local'>loc_cxt</span></a><span class='Operator'>.</span><a href="deparse.c.html#LN90"><span class='Ref_to_Member'>state</span></a> <span class='Operator'>== </span><a href="deparse.c.html#LN83"><span class='Ref_to_EnumConst'>FDW_COLLATE_UNSAFE</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * An expression which includes any mutable functions can't be sent over 
     * because its result is not stable.  For example, sending now() remote 
     * side could cause confusion from clock offsets.  Future versions might 
     * be able to make this choice with more granularity.  (We check this last 
     * because it requires a lot of expensive catalog lookups.) 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../src/include/optimizer/clauses.h.html#LN59"><span class='Ref_to_Proto'>contain_mutable_functions</span></a><span class='Parentheses'>((</span><a href="../../src/include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN227"><span class='Ref_to_Parameter'>expr</span></a><span class='Parentheses'>))</span> 
        <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* OK to evaluate on the remote server */ 
</span>    <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end is_foreign_expr &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Check if expression is safe to execute remotely, and return true if so. 
 * 
 * In addition, *outer_cxt is updated with collation information. 
 * 
 * We must check that the expression contains only node types we can deparse, 
 * that all types/functions/operators are safe to send (they are "shippable"), 
 * and that all collations used in the expression derive from Vars of the 
 * foreign table.  Because of the latter, the logic is pretty close to 
 * assign_collations_walker() in parse_collate.c, though we can assume here 
 * that the given expression is valid.  Note function mutability is not 
 * currently considered here. 
 */ 
</span><span class='Keyword'>static bool 
</span><a name="LN289"></a><span class='Declare_Function'>foreign_expr_walker</span><span class='Parentheses'>(</span><a href="../../src/include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, 
</span><a name="LN290"></a>                    <a href="deparse.c.html#LN65"><span class='Ref_to_Struct'>foreign_glob_cxt</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>glob_cxt</span><span class='Delimiter'>, 
</span><a name="LN291"></a>                    <a href="deparse.c.html#LN87"><span class='Ref_to_Struct'>foreign_loc_cxt</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>outer_cxt</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN293"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>check_type</span> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span><a name="LN294"></a>    <a href="postgres_fdw.h.html#LN29"><span class='Ref_to_Struct'>PgFdwRelationInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>fpinfo</span><span class='Delimiter'>; 
</span><a name="LN295"></a>    <a href="deparse.c.html#LN87"><span class='Ref_to_Struct'>foreign_loc_cxt</span></a> <span class='Declare_Local'>inner_cxt</span><span class='Delimiter'>; 
</span><a name="LN296"></a>    <a href="../../src/include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>collation</span><span class='Delimiter'>; 
</span><a name="LN297"></a>    <a href="deparse.c.html#LN77"><span class='Ref_to_Typedef'>FDWCollateState</span></a> <span class='Declare_Local'>state</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Need do nothing for empty subexpressions */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN289"><span class='Ref_to_Parameter'>node</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* May need server info from baserel's fdw_private struct */ 
</span>    <a href="deparse.c.html#LN294"><span class='Ref_To_Local'>fpinfo</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="postgres_fdw.h.html#LN29"><span class='Ref_to_Struct'>PgFdwRelationInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) (</span><a href="deparse.c.html#LN290"><span class='Ref_to_Parameter'>glob_cxt</span></a><span class='Operator'>-&GT;</span><a href="deparse.c.html#LN68"><span class='Ref_to_Member'>foreignrel</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/relation.h.html#LN576"><span class='Ref_to_Member'>fdw_private</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Set up inner_cxt for possible recursion to child nodes */ 
</span>    <a href="deparse.c.html#LN295"><span class='Ref_To_Local'>inner_cxt</span></a><span class='Operator'>.</span><a href="deparse.c.html#LN89"><span class='Ref_to_Member'>collation</span></a> <span class='Operator'>= </span><a href="../../src/include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
</span>    <a href="deparse.c.html#LN295"><span class='Ref_To_Local'>inner_cxt</span></a><span class='Operator'>.</span><a href="deparse.c.html#LN90"><span class='Ref_to_Member'>state</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN79"><span class='Ref_to_EnumConst'>FDW_COLLATE_NONE</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="../../src/include/nodes/nodes.h.html#LN513"><span class='Ref_to_Macro'>nodeTag</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN289"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>case</span> <a href="../../src/include/nodes/nodes.h.html#LN145"><span class='Ref_to_EnumConst'>T_Var</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN314"></a>                <a href="../../src/include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>var</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../src/include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN289"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * If the Var is from the foreign table, we consider its 
                 * collation (if any) safe to use.  If it is from another 
                 * table, we treat its collation the same way as we would a 
                 * Param's collation, ie it's not safe for it to have a 
                 * non-default collation. 
                 */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../src/include/nodes/bitmapset.h.html#LN75"><span class='Ref_to_Proto'>bms_is_member</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN314"><span class='Ref_To_Local'>var</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN165"><span class='Ref_to_Member'>varno</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN290"><span class='Ref_to_Parameter'>glob_cxt</span></a><span class='Operator'>-&GT;</span><a href="deparse.c.html#LN69"><span class='Ref_to_Member'>relids</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>                    <a href="deparse.c.html#LN314"><span class='Ref_To_Local'>var</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN172"><span class='Ref_to_Member'>varlevelsup</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                <span class='Delimiter'>{ 
</span>                    <span class='Comment_Multi_Line'>/* Var belongs to foreign table */ 
</span> 
                    <span class='Comment_Multi_Line'>/* 
                     * System columns other than ctid and oid should not be 
                     * sent to the remote, since we don't make any effort to 
                     * ensure that local and remote values match (tableoid, in 
                     * particular, almost certainly doesn't match). 
                     */ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN314"><span class='Ref_To_Local'>var</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN167"><span class='Ref_to_Member'>varattno</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span> <span class='Operator'>&& 
</span>                        <a href="deparse.c.html#LN314"><span class='Ref_To_Local'>var</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN167"><span class='Ref_to_Member'>varattno</span></a> <span class='Operator'>!= </span><a href="../../src/include/access/sysattr.h.html#LN20"><span class='Ref_to_Const'>SelfItemPointerAttributeNumber</span></a> <span class='Operator'>&& 
</span>                        <a href="deparse.c.html#LN314"><span class='Ref_To_Local'>var</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN167"><span class='Ref_to_Member'>varattno</span></a> <span class='Operator'>!= </span><a href="../../src/include/access/sysattr.h.html#LN21"><span class='Ref_to_Const'>ObjectIdAttributeNumber</span></a><span class='Parentheses'>) 
</span>                        <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
                    <span class='Comment_Multi_Line'>/* Else check the collation */ 
</span>                    <a href="deparse.c.html#LN296"><span class='Ref_To_Local'>collation</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN314"><span class='Ref_To_Local'>var</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN171"><span class='Ref_to_Member'>varcollid</span></a><span class='Delimiter'>; 
</span>                    <a href="deparse.c.html#LN297"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>= </span><a href="../../src/include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN296"><span class='Ref_To_Local'>collation</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><a href="deparse.c.html#LN82"><span class='Ref_to_EnumConst'>FDW_COLLATE_SAFE</span></a> <span class='Operator'>: </span><a href="deparse.c.html#LN79"><span class='Ref_to_EnumConst'>FDW_COLLATE_NONE</span></a><span class='Delimiter'>; 
</span>                <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if bms_is_member(var-&GT;va... &raquo; </span> 
                <span class='Control'>else</span> 
                <span class='Delimiter'>{ 
</span>                    <span class='Comment_Multi_Line'>/* Var belongs to some other table */ 
</span>                    <a href="deparse.c.html#LN296"><span class='Ref_To_Local'>collation</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN314"><span class='Ref_To_Local'>var</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN171"><span class='Ref_to_Member'>varcollid</span></a><span class='Delimiter'>; 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN296"><span class='Ref_To_Local'>collation</span></a> <span class='Operator'>== </span><a href="../../src/include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a> <span class='Operator'>|| 
</span>                        <a href="deparse.c.html#LN296"><span class='Ref_To_Local'>collation</span></a> <span class='Operator'>== </span><a href="../../src/include/catalog/pg_collation.h.html#LN74"><span class='Ref_to_Const'>DEFAULT_COLLATION_OID</span></a><span class='Parentheses'>) 
</span>                    <span class='Delimiter'>{ 
</span>                        <span class='Comment_Multi_Line'>/* 
                         * It's noncollatable, or it's safe to combine with a 
                         * collatable foreign Var, so set state to NONE. 
                         */ 
</span>                        <a href="deparse.c.html#LN297"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN79"><span class='Ref_to_EnumConst'>FDW_COLLATE_NONE</span></a><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                    <span class='Control'>else</span> 
                    <span class='Delimiter'>{ 
</span>                        <span class='Comment_Multi_Line'>/* 
                         * Do not fail right away, since the Var might appear 
                         * in a collation-insensitive context. 
                         */ 
</span>                        <a href="deparse.c.html#LN297"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN83"><span class='Ref_to_EnumConst'>FDW_COLLATE_UNSAFE</span></a><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../src/include/nodes/nodes.h.html#LN146"><span class='Ref_to_EnumConst'>T_Const</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN369"></a>                <a href="../../src/include/nodes/primnodes.h.html#LN188"><span class='Ref_to_Struct'>Const</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>c</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../src/include/nodes/primnodes.h.html#LN188"><span class='Ref_to_Struct'>Const</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN289"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * If the constant has nondefault collation, either it's of a 
                 * non-builtin type, or it reflects folding of a CollateExpr. 
                 * It's unsafe to send to the remote unless it's used in a 
                 * non-collation-sensitive context. 
                 */ 
</span>                <a href="deparse.c.html#LN296"><span class='Ref_To_Local'>collation</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN369"><span class='Ref_To_Local'>c</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN193"><span class='Ref_to_Member'>constcollid</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN296"><span class='Ref_To_Local'>collation</span></a> <span class='Operator'>== </span><a href="../../src/include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a> <span class='Operator'>|| 
</span>                    <a href="deparse.c.html#LN296"><span class='Ref_To_Local'>collation</span></a> <span class='Operator'>== </span><a href="../../src/include/catalog/pg_collation.h.html#LN74"><span class='Ref_to_Const'>DEFAULT_COLLATION_OID</span></a><span class='Parentheses'>) 
</span>                    <a href="deparse.c.html#LN297"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN79"><span class='Ref_to_EnumConst'>FDW_COLLATE_NONE</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>else</span> 
                    <a href="deparse.c.html#LN297"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN83"><span class='Ref_to_EnumConst'>FDW_COLLATE_UNSAFE</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../src/include/nodes/nodes.h.html#LN147"><span class='Ref_to_EnumConst'>T_Param</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN387"></a>                <a href="../../src/include/nodes/primnodes.h.html#LN240"><span class='Ref_to_Struct'>Param</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>p</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../src/include/nodes/primnodes.h.html#LN240"><span class='Ref_to_Struct'>Param</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN289"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * Collation rule is same as for Consts and non-foreign Vars. 
                 */ 
</span>                <a href="deparse.c.html#LN296"><span class='Ref_To_Local'>collation</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN387"><span class='Ref_To_Local'>p</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN247"><span class='Ref_to_Member'>paramcollid</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN296"><span class='Ref_To_Local'>collation</span></a> <span class='Operator'>== </span><a href="../../src/include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a> <span class='Operator'>|| 
</span>                    <a href="deparse.c.html#LN296"><span class='Ref_To_Local'>collation</span></a> <span class='Operator'>== </span><a href="../../src/include/catalog/pg_collation.h.html#LN74"><span class='Ref_to_Const'>DEFAULT_COLLATION_OID</span></a><span class='Parentheses'>) 
</span>                    <a href="deparse.c.html#LN297"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN79"><span class='Ref_to_EnumConst'>FDW_COLLATE_NONE</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>else</span> 
                    <a href="deparse.c.html#LN297"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN83"><span class='Ref_to_EnumConst'>FDW_COLLATE_UNSAFE</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../src/include/nodes/nodes.h.html#LN151"><span class='Ref_to_EnumConst'>T_ArrayRef</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN402"></a>                <a href="../../src/include/nodes/primnodes.h.html#LN395"><span class='Ref_to_Struct'>ArrayRef</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>ar</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../src/include/nodes/primnodes.h.html#LN395"><span class='Ref_to_Struct'>ArrayRef</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN289"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* Assignment should not be in restrictions. */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN402"><span class='Ref_To_Local'>ar</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN408"><span class='Ref_to_Member'>refassgnexpr</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>                    <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * Recurse to remaining subexpressions.  Since the array 
                 * subscripts must yield (noncollatable) integers, they won't 
                 * affect the inner_cxt state. 
                 */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="deparse.c.html#LN118"><span class='Ref_to_Proto'>foreign_expr_walker</span></a><span class='Parentheses'>((</span><a href="../../src/include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN402"><span class='Ref_To_Local'>ar</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN402"><span class='Ref_to_Member'>refupperindexpr</span></a><span class='Delimiter'>, 
</span>                                         <a href="deparse.c.html#LN290"><span class='Ref_to_Parameter'>glob_cxt</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="deparse.c.html#LN295"><span class='Ref_To_Local'>inner_cxt</span></a><span class='Parentheses'>))</span> 
                    <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="deparse.c.html#LN118"><span class='Ref_to_Proto'>foreign_expr_walker</span></a><span class='Parentheses'>((</span><a href="../../src/include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN402"><span class='Ref_To_Local'>ar</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN404"><span class='Ref_to_Member'>reflowerindexpr</span></a><span class='Delimiter'>, 
</span>                                         <a href="deparse.c.html#LN290"><span class='Ref_to_Parameter'>glob_cxt</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="deparse.c.html#LN295"><span class='Ref_To_Local'>inner_cxt</span></a><span class='Parentheses'>))</span> 
                    <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="deparse.c.html#LN118"><span class='Ref_to_Proto'>foreign_expr_walker</span></a><span class='Parentheses'>((</span><a href="../../src/include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN402"><span class='Ref_To_Local'>ar</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN406"><span class='Ref_to_Member'>refexpr</span></a><span class='Delimiter'>, 
</span>                                         <a href="deparse.c.html#LN290"><span class='Ref_to_Parameter'>glob_cxt</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="deparse.c.html#LN295"><span class='Ref_To_Local'>inner_cxt</span></a><span class='Parentheses'>))</span> 
                    <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * Array subscripting should yield same collation as input, 
                 * but for safety use same logic as for function nodes. 
                 */ 
</span>                <a href="deparse.c.html#LN296"><span class='Ref_To_Local'>collation</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN402"><span class='Ref_To_Local'>ar</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN401"><span class='Ref_to_Member'>refcollid</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN296"><span class='Ref_To_Local'>collation</span></a> <span class='Operator'>== </span><a href="../../src/include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Parentheses'>) 
</span>                    <a href="deparse.c.html#LN297"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN79"><span class='Ref_to_EnumConst'>FDW_COLLATE_NONE</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN295"><span class='Ref_To_Local'>inner_cxt</span></a><span class='Operator'>.</span><a href="deparse.c.html#LN90"><span class='Ref_to_Member'>state</span></a> <span class='Operator'>== </span><a href="deparse.c.html#LN82"><span class='Ref_to_EnumConst'>FDW_COLLATE_SAFE</span></a> <span class='Operator'>&& 
</span>                         <a href="deparse.c.html#LN296"><span class='Ref_To_Local'>collation</span></a> <span class='Operator'>== </span><a href="deparse.c.html#LN295"><span class='Ref_To_Local'>inner_cxt</span></a><span class='Operator'>.</span><a href="deparse.c.html#LN89"><span class='Ref_to_Member'>collation</span></a><span class='Parentheses'>) 
</span>                    <a href="deparse.c.html#LN297"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN82"><span class='Ref_to_EnumConst'>FDW_COLLATE_SAFE</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN296"><span class='Ref_To_Local'>collation</span></a> <span class='Operator'>== </span><a href="../../src/include/catalog/pg_collation.h.html#LN74"><span class='Ref_to_Const'>DEFAULT_COLLATION_OID</span></a><span class='Parentheses'>) 
</span>                    <a href="deparse.c.html#LN297"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN79"><span class='Ref_to_EnumConst'>FDW_COLLATE_NONE</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>else</span> 
                    <a href="deparse.c.html#LN297"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN83"><span class='Ref_to_EnumConst'>FDW_COLLATE_UNSAFE</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../src/include/nodes/nodes.h.html#LN152"><span class='Ref_to_EnumConst'>T_FuncExpr</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN441"></a>                <a href="../../src/include/nodes/primnodes.h.html#LN444"><span class='Ref_to_Struct'>FuncExpr</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>fe</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../src/include/nodes/primnodes.h.html#LN444"><span class='Ref_to_Struct'>FuncExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN289"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * If function used by the expression is not shippable, it 
                 * can't be sent to remote because it might have incompatible 
                 * semantics on remote side. 
                 */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="shippable.c.html#LN163"><span class='Ref_to_Func'>is_shippable</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN441"><span class='Ref_To_Local'>fe</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN447"><span class='Ref_to_Member'>funcid</span></a><span class='Delimiter'>, </span><a href="../../src/include/catalog/pg_proc.h.html#LN32"><span class='Ref_to_Const'>ProcedureRelationId</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN294"><span class='Ref_To_Local'>fpinfo</span></a><span class='Parentheses'>))</span> 
                    <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * Recurse to input subexpressions. 
                 */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="deparse.c.html#LN118"><span class='Ref_to_Proto'>foreign_expr_walker</span></a><span class='Parentheses'>((</span><a href="../../src/include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN441"><span class='Ref_To_Local'>fe</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN455"><span class='Ref_to_Member'>args</span></a><span class='Delimiter'>, 
</span>                                         <a href="deparse.c.html#LN290"><span class='Ref_to_Parameter'>glob_cxt</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="deparse.c.html#LN295"><span class='Ref_To_Local'>inner_cxt</span></a><span class='Parentheses'>))</span> 
                    <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * If function's input collation is not derived from a foreign 
                 * Var, it can't be sent to remote. 
                 */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN441"><span class='Ref_To_Local'>fe</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN454"><span class='Ref_to_Member'>inputcollid</span></a> <span class='Operator'>== </span><a href="../../src/include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Parentheses'>) 
</span>                     <span class='Comment_Multi_Line'>/* OK, inputs are all noncollatable */ </span><span class='Delimiter'>; 
</span>                <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN295"><span class='Ref_To_Local'>inner_cxt</span></a><span class='Operator'>.</span><a href="deparse.c.html#LN90"><span class='Ref_to_Member'>state</span></a> <span class='Operator'>!= </span><a href="deparse.c.html#LN82"><span class='Ref_to_EnumConst'>FDW_COLLATE_SAFE</span></a> <span class='Operator'>|| 
</span>                         <a href="deparse.c.html#LN441"><span class='Ref_To_Local'>fe</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN454"><span class='Ref_to_Member'>inputcollid</span></a> <span class='Operator'>!= </span><a href="deparse.c.html#LN295"><span class='Ref_To_Local'>inner_cxt</span></a><span class='Operator'>.</span><a href="deparse.c.html#LN89"><span class='Ref_to_Member'>collation</span></a><span class='Parentheses'>) 
</span>                    <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * Detect whether node is introducing a collation not derived 
                 * from a foreign Var.  (If so, we just mark it unsafe for now 
                 * rather than immediately returning false, since the parent 
                 * node might not care.) 
                 */ 
</span>                <a href="deparse.c.html#LN296"><span class='Ref_To_Local'>collation</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN441"><span class='Ref_To_Local'>fe</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN453"><span class='Ref_to_Member'>funccollid</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN296"><span class='Ref_To_Local'>collation</span></a> <span class='Operator'>== </span><a href="../../src/include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Parentheses'>) 
</span>                    <a href="deparse.c.html#LN297"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN79"><span class='Ref_to_EnumConst'>FDW_COLLATE_NONE</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN295"><span class='Ref_To_Local'>inner_cxt</span></a><span class='Operator'>.</span><a href="deparse.c.html#LN90"><span class='Ref_to_Member'>state</span></a> <span class='Operator'>== </span><a href="deparse.c.html#LN82"><span class='Ref_to_EnumConst'>FDW_COLLATE_SAFE</span></a> <span class='Operator'>&& 
</span>                         <a href="deparse.c.html#LN296"><span class='Ref_To_Local'>collation</span></a> <span class='Operator'>== </span><a href="deparse.c.html#LN295"><span class='Ref_To_Local'>inner_cxt</span></a><span class='Operator'>.</span><a href="deparse.c.html#LN89"><span class='Ref_to_Member'>collation</span></a><span class='Parentheses'>) 
</span>                    <a href="deparse.c.html#LN297"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN82"><span class='Ref_to_EnumConst'>FDW_COLLATE_SAFE</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN296"><span class='Ref_To_Local'>collation</span></a> <span class='Operator'>== </span><a href="../../src/include/catalog/pg_collation.h.html#LN74"><span class='Ref_to_Const'>DEFAULT_COLLATION_OID</span></a><span class='Parentheses'>) 
</span>                    <a href="deparse.c.html#LN297"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN79"><span class='Ref_to_EnumConst'>FDW_COLLATE_NONE</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>else</span> 
                    <a href="deparse.c.html#LN297"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN83"><span class='Ref_to_EnumConst'>FDW_COLLATE_UNSAFE</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../src/include/nodes/nodes.h.html#LN154"><span class='Ref_to_EnumConst'>T_OpExpr</span></a><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="../../src/include/nodes/nodes.h.html#LN155"><span class='Ref_to_EnumConst'>T_DistinctExpr</span></a><span class='Operator'>:</span>    <span class='Comment_Single_Line'>/* struct-equivalent to OpExpr */ 
</span>            <span class='Delimiter'>{ 
</span><a name="LN489"></a>                <a href="../../src/include/nodes/primnodes.h.html#LN491"><span class='Ref_to_Struct'>OpExpr</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>oe</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../src/include/nodes/primnodes.h.html#LN491"><span class='Ref_to_Struct'>OpExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN289"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * Similarly, only shippable operators can be sent to remote. 
                 * (If the operator is shippable, we assume its underlying 
                 * function is too.) 
                 */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="shippable.c.html#LN163"><span class='Ref_to_Func'>is_shippable</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN489"><span class='Ref_To_Local'>oe</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN494"><span class='Ref_to_Member'>opno</span></a><span class='Delimiter'>, </span><a href="../../src/include/catalog/pg_operator.h.html#LN31"><span class='Ref_to_Const'>OperatorRelationId</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN294"><span class='Ref_To_Local'>fpinfo</span></a><span class='Parentheses'>))</span> 
                    <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * Recurse to input subexpressions. 
                 */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="deparse.c.html#LN118"><span class='Ref_to_Proto'>foreign_expr_walker</span></a><span class='Parentheses'>((</span><a href="../../src/include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN489"><span class='Ref_To_Local'>oe</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN500"><span class='Ref_to_Member'>args</span></a><span class='Delimiter'>, 
</span>                                         <a href="deparse.c.html#LN290"><span class='Ref_to_Parameter'>glob_cxt</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="deparse.c.html#LN295"><span class='Ref_To_Local'>inner_cxt</span></a><span class='Parentheses'>))</span> 
                    <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * If operator's input collation is not derived from a foreign 
                 * Var, it can't be sent to remote. 
                 */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN489"><span class='Ref_To_Local'>oe</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN499"><span class='Ref_to_Member'>inputcollid</span></a> <span class='Operator'>== </span><a href="../../src/include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Parentheses'>) 
</span>                     <span class='Comment_Multi_Line'>/* OK, inputs are all noncollatable */ </span><span class='Delimiter'>; 
</span>                <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN295"><span class='Ref_To_Local'>inner_cxt</span></a><span class='Operator'>.</span><a href="deparse.c.html#LN90"><span class='Ref_to_Member'>state</span></a> <span class='Operator'>!= </span><a href="deparse.c.html#LN82"><span class='Ref_to_EnumConst'>FDW_COLLATE_SAFE</span></a> <span class='Operator'>|| 
</span>                         <a href="deparse.c.html#LN489"><span class='Ref_To_Local'>oe</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN499"><span class='Ref_to_Member'>inputcollid</span></a> <span class='Operator'>!= </span><a href="deparse.c.html#LN295"><span class='Ref_To_Local'>inner_cxt</span></a><span class='Operator'>.</span><a href="deparse.c.html#LN89"><span class='Ref_to_Member'>collation</span></a><span class='Parentheses'>) 
</span>                    <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* Result-collation handling is same as for functions */ 
</span>                <a href="deparse.c.html#LN296"><span class='Ref_To_Local'>collation</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN489"><span class='Ref_To_Local'>oe</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN498"><span class='Ref_to_Member'>opcollid</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN296"><span class='Ref_To_Local'>collation</span></a> <span class='Operator'>== </span><a href="../../src/include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Parentheses'>) 
</span>                    <a href="deparse.c.html#LN297"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN79"><span class='Ref_to_EnumConst'>FDW_COLLATE_NONE</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN295"><span class='Ref_To_Local'>inner_cxt</span></a><span class='Operator'>.</span><a href="deparse.c.html#LN90"><span class='Ref_to_Member'>state</span></a> <span class='Operator'>== </span><a href="deparse.c.html#LN82"><span class='Ref_to_EnumConst'>FDW_COLLATE_SAFE</span></a> <span class='Operator'>&& 
</span>                         <a href="deparse.c.html#LN296"><span class='Ref_To_Local'>collation</span></a> <span class='Operator'>== </span><a href="deparse.c.html#LN295"><span class='Ref_To_Local'>inner_cxt</span></a><span class='Operator'>.</span><a href="deparse.c.html#LN89"><span class='Ref_to_Member'>collation</span></a><span class='Parentheses'>) 
</span>                    <a href="deparse.c.html#LN297"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN82"><span class='Ref_to_EnumConst'>FDW_COLLATE_SAFE</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN296"><span class='Ref_To_Local'>collation</span></a> <span class='Operator'>== </span><a href="../../src/include/catalog/pg_collation.h.html#LN74"><span class='Ref_to_Const'>DEFAULT_COLLATION_OID</span></a><span class='Parentheses'>) 
</span>                    <a href="deparse.c.html#LN297"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN79"><span class='Ref_to_EnumConst'>FDW_COLLATE_NONE</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>else</span> 
                    <a href="deparse.c.html#LN297"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN83"><span class='Ref_to_EnumConst'>FDW_COLLATE_UNSAFE</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../src/include/nodes/nodes.h.html#LN157"><span class='Ref_to_EnumConst'>T_ScalarArrayOpExpr</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN531"></a>                <a href="../../src/include/nodes/primnodes.h.html#LN534"><span class='Ref_to_Struct'>ScalarArrayOpExpr</span></a> <span class='Operator'>*</span><span class='Declare_Local'>oe</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../src/include/nodes/primnodes.h.html#LN534"><span class='Ref_to_Struct'>ScalarArrayOpExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN289"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * Again, only shippable operators can be sent to remote. 
                 */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="shippable.c.html#LN163"><span class='Ref_to_Func'>is_shippable</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN531"><span class='Ref_To_Local'>oe</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN537"><span class='Ref_to_Member'>opno</span></a><span class='Delimiter'>, </span><a href="../../src/include/catalog/pg_operator.h.html#LN31"><span class='Ref_to_Const'>OperatorRelationId</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN294"><span class='Ref_To_Local'>fpinfo</span></a><span class='Parentheses'>))</span> 
                    <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * Recurse to input subexpressions. 
                 */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="deparse.c.html#LN118"><span class='Ref_to_Proto'>foreign_expr_walker</span></a><span class='Parentheses'>((</span><a href="../../src/include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN531"><span class='Ref_To_Local'>oe</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN541"><span class='Ref_to_Member'>args</span></a><span class='Delimiter'>, 
</span>                                         <a href="deparse.c.html#LN290"><span class='Ref_to_Parameter'>glob_cxt</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="deparse.c.html#LN295"><span class='Ref_To_Local'>inner_cxt</span></a><span class='Parentheses'>))</span> 
                    <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * If operator's input collation is not derived from a foreign 
                 * Var, it can't be sent to remote. 
                 */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN531"><span class='Ref_To_Local'>oe</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN540"><span class='Ref_to_Member'>inputcollid</span></a> <span class='Operator'>== </span><a href="../../src/include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Parentheses'>) 
</span>                     <span class='Comment_Multi_Line'>/* OK, inputs are all noncollatable */ </span><span class='Delimiter'>; 
</span>                <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN295"><span class='Ref_To_Local'>inner_cxt</span></a><span class='Operator'>.</span><a href="deparse.c.html#LN90"><span class='Ref_to_Member'>state</span></a> <span class='Operator'>!= </span><a href="deparse.c.html#LN82"><span class='Ref_to_EnumConst'>FDW_COLLATE_SAFE</span></a> <span class='Operator'>|| 
</span>                         <a href="deparse.c.html#LN531"><span class='Ref_To_Local'>oe</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN540"><span class='Ref_to_Member'>inputcollid</span></a> <span class='Operator'>!= </span><a href="deparse.c.html#LN295"><span class='Ref_To_Local'>inner_cxt</span></a><span class='Operator'>.</span><a href="deparse.c.html#LN89"><span class='Ref_to_Member'>collation</span></a><span class='Parentheses'>) 
</span>                    <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* Output is always boolean and so noncollatable. */ 
</span>                <a href="deparse.c.html#LN296"><span class='Ref_To_Local'>collation</span></a> <span class='Operator'>= </span><a href="../../src/include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
</span>                <a href="deparse.c.html#LN297"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN79"><span class='Ref_to_EnumConst'>FDW_COLLATE_NONE</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../src/include/nodes/nodes.h.html#LN164"><span class='Ref_to_EnumConst'>T_RelabelType</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN563"></a>                <a href="../../src/include/nodes/primnodes.h.html#LN786"><span class='Ref_to_Struct'>RelabelType</span></a> <span class='Operator'>*</span><span class='Declare_Local'>r</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../src/include/nodes/primnodes.h.html#LN786"><span class='Ref_to_Struct'>RelabelType</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN289"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * Recurse to input subexpression. 
                 */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="deparse.c.html#LN118"><span class='Ref_to_Proto'>foreign_expr_walker</span></a><span class='Parentheses'>((</span><a href="../../src/include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN563"><span class='Ref_To_Local'>r</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN789"><span class='Ref_to_Member'>arg</span></a><span class='Delimiter'>, 
</span>                                         <a href="deparse.c.html#LN290"><span class='Ref_to_Parameter'>glob_cxt</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="deparse.c.html#LN295"><span class='Ref_To_Local'>inner_cxt</span></a><span class='Parentheses'>))</span> 
                    <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * RelabelType must not introduce a collation not derived from 
                 * an input foreign Var (same logic as for a real function). 
                 */ 
</span>                <a href="deparse.c.html#LN296"><span class='Ref_To_Local'>collation</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN563"><span class='Ref_To_Local'>r</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN792"><span class='Ref_to_Member'>resultcollid</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN296"><span class='Ref_To_Local'>collation</span></a> <span class='Operator'>== </span><a href="../../src/include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Parentheses'>) 
</span>                    <a href="deparse.c.html#LN297"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN79"><span class='Ref_to_EnumConst'>FDW_COLLATE_NONE</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN295"><span class='Ref_To_Local'>inner_cxt</span></a><span class='Operator'>.</span><a href="deparse.c.html#LN90"><span class='Ref_to_Member'>state</span></a> <span class='Operator'>== </span><a href="deparse.c.html#LN82"><span class='Ref_to_EnumConst'>FDW_COLLATE_SAFE</span></a> <span class='Operator'>&& 
</span>                         <a href="deparse.c.html#LN296"><span class='Ref_To_Local'>collation</span></a> <span class='Operator'>== </span><a href="deparse.c.html#LN295"><span class='Ref_To_Local'>inner_cxt</span></a><span class='Operator'>.</span><a href="deparse.c.html#LN89"><span class='Ref_to_Member'>collation</span></a><span class='Parentheses'>) 
</span>                    <a href="deparse.c.html#LN297"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN82"><span class='Ref_to_EnumConst'>FDW_COLLATE_SAFE</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN296"><span class='Ref_To_Local'>collation</span></a> <span class='Operator'>== </span><a href="../../src/include/catalog/pg_collation.h.html#LN74"><span class='Ref_to_Const'>DEFAULT_COLLATION_OID</span></a><span class='Parentheses'>) 
</span>                    <a href="deparse.c.html#LN297"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN79"><span class='Ref_to_EnumConst'>FDW_COLLATE_NONE</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>else</span> 
                    <a href="deparse.c.html#LN297"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN83"><span class='Ref_to_EnumConst'>FDW_COLLATE_UNSAFE</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../src/include/nodes/nodes.h.html#LN158"><span class='Ref_to_EnumConst'>T_BoolExpr</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN590"></a>                <a href="../../src/include/nodes/primnodes.h.html#LN557"><span class='Ref_to_Struct'>BoolExpr</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>b</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../src/include/nodes/primnodes.h.html#LN557"><span class='Ref_to_Struct'>BoolExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN289"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * Recurse to input subexpressions. 
                 */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="deparse.c.html#LN118"><span class='Ref_to_Proto'>foreign_expr_walker</span></a><span class='Parentheses'>((</span><a href="../../src/include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN590"><span class='Ref_To_Local'>b</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN561"><span class='Ref_to_Member'>args</span></a><span class='Delimiter'>, 
</span>                                         <a href="deparse.c.html#LN290"><span class='Ref_to_Parameter'>glob_cxt</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="deparse.c.html#LN295"><span class='Ref_To_Local'>inner_cxt</span></a><span class='Parentheses'>))</span> 
                    <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* Output is always boolean and so noncollatable. */ 
</span>                <a href="deparse.c.html#LN296"><span class='Ref_To_Local'>collation</span></a> <span class='Operator'>= </span><a href="../../src/include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
</span>                <a href="deparse.c.html#LN297"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN79"><span class='Ref_to_EnumConst'>FDW_COLLATE_NONE</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../src/include/nodes/nodes.h.html#LN179"><span class='Ref_to_EnumConst'>T_NullTest</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN606"></a>                <a href="../../src/include/nodes/primnodes.h.html#LN1175"><span class='Ref_to_Struct'>NullTest</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>nt</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../src/include/nodes/primnodes.h.html#LN1175"><span class='Ref_to_Struct'>NullTest</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN289"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * Recurse to input subexpressions. 
                 */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="deparse.c.html#LN118"><span class='Ref_to_Proto'>foreign_expr_walker</span></a><span class='Parentheses'>((</span><a href="../../src/include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN606"><span class='Ref_To_Local'>nt</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN1178"><span class='Ref_to_Member'>arg</span></a><span class='Delimiter'>, 
</span>                                         <a href="deparse.c.html#LN290"><span class='Ref_to_Parameter'>glob_cxt</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="deparse.c.html#LN295"><span class='Ref_To_Local'>inner_cxt</span></a><span class='Parentheses'>))</span> 
                    <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* Output is always boolean and so noncollatable. */ 
</span>                <a href="deparse.c.html#LN296"><span class='Ref_To_Local'>collation</span></a> <span class='Operator'>= </span><a href="../../src/include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
</span>                <a href="deparse.c.html#LN297"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN79"><span class='Ref_to_EnumConst'>FDW_COLLATE_NONE</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../src/include/nodes/nodes.h.html#LN172"><span class='Ref_to_EnumConst'>T_ArrayExpr</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN622"></a>                <a href="../../src/include/nodes/primnodes.h.html#LN947"><span class='Ref_to_Struct'>ArrayExpr</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>a</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../src/include/nodes/primnodes.h.html#LN947"><span class='Ref_to_Struct'>ArrayExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN289"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * Recurse to input subexpressions. 
                 */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="deparse.c.html#LN118"><span class='Ref_to_Proto'>foreign_expr_walker</span></a><span class='Parentheses'>((</span><a href="../../src/include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN622"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN953"><span class='Ref_to_Member'>elements</span></a><span class='Delimiter'>, 
</span>                                         <a href="deparse.c.html#LN290"><span class='Ref_to_Parameter'>glob_cxt</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="deparse.c.html#LN295"><span class='Ref_To_Local'>inner_cxt</span></a><span class='Parentheses'>))</span> 
                    <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * ArrayExpr must not introduce a collation not derived from 
                 * an input foreign Var (same logic as for a function). 
                 */ 
</span>                <a href="deparse.c.html#LN296"><span class='Ref_To_Local'>collation</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN622"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN951"><span class='Ref_to_Member'>array_collid</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN296"><span class='Ref_To_Local'>collation</span></a> <span class='Operator'>== </span><a href="../../src/include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Parentheses'>) 
</span>                    <a href="deparse.c.html#LN297"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN79"><span class='Ref_to_EnumConst'>FDW_COLLATE_NONE</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN295"><span class='Ref_To_Local'>inner_cxt</span></a><span class='Operator'>.</span><a href="deparse.c.html#LN90"><span class='Ref_to_Member'>state</span></a> <span class='Operator'>== </span><a href="deparse.c.html#LN82"><span class='Ref_to_EnumConst'>FDW_COLLATE_SAFE</span></a> <span class='Operator'>&& 
</span>                         <a href="deparse.c.html#LN296"><span class='Ref_To_Local'>collation</span></a> <span class='Operator'>== </span><a href="deparse.c.html#LN295"><span class='Ref_To_Local'>inner_cxt</span></a><span class='Operator'>.</span><a href="deparse.c.html#LN89"><span class='Ref_to_Member'>collation</span></a><span class='Parentheses'>) 
</span>                    <a href="deparse.c.html#LN297"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN82"><span class='Ref_to_EnumConst'>FDW_COLLATE_SAFE</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN296"><span class='Ref_To_Local'>collation</span></a> <span class='Operator'>== </span><a href="../../src/include/catalog/pg_collation.h.html#LN74"><span class='Ref_to_Const'>DEFAULT_COLLATION_OID</span></a><span class='Parentheses'>) 
</span>                    <a href="deparse.c.html#LN297"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN79"><span class='Ref_to_EnumConst'>FDW_COLLATE_NONE</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>else</span> 
                    <a href="deparse.c.html#LN297"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN83"><span class='Ref_to_EnumConst'>FDW_COLLATE_UNSAFE</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../src/include/nodes/nodes.h.html#LN290"><span class='Ref_to_EnumConst'>T_List</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN649"></a>                <a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>l</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN289"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span><a name="LN650"></a>                <a href="../../src/include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * Recurse to component subexpressions. 
                 */ 
</span>                <a href="../../src/include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN650"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN649"><span class='Ref_To_Local'>l</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="deparse.c.html#LN118"><span class='Ref_to_Proto'>foreign_expr_walker</span></a><span class='Parentheses'>((</span><a href="../../src/include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../src/include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN650"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                             <a href="deparse.c.html#LN290"><span class='Ref_to_Parameter'>glob_cxt</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="deparse.c.html#LN295"><span class='Ref_To_Local'>inner_cxt</span></a><span class='Parentheses'>))</span> 
                        <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * When processing a list, collation state just bubbles up 
                 * from the list elements. 
                 */ 
</span>                <a href="deparse.c.html#LN296"><span class='Ref_To_Local'>collation</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN295"><span class='Ref_To_Local'>inner_cxt</span></a><span class='Operator'>.</span><a href="deparse.c.html#LN89"><span class='Ref_to_Member'>collation</span></a><span class='Delimiter'>; 
</span>                <a href="deparse.c.html#LN297"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN295"><span class='Ref_To_Local'>inner_cxt</span></a><span class='Operator'>.</span><a href="deparse.c.html#LN90"><span class='Ref_to_Member'>state</span></a><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* Don't apply exprType() to the list. */ 
</span>                <a href="deparse.c.html#LN293"><span class='Ref_To_Local'>check_type</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../src/include/nodes/nodes.h.html#LN148"><span class='Ref_to_EnumConst'>T_Aggref</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN675"></a>                <a href="../../src/include/nodes/primnodes.h.html#LN290"><span class='Ref_to_Struct'>Aggref</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>agg</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../src/include/nodes/primnodes.h.html#LN290"><span class='Ref_to_Struct'>Aggref</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN289"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span><a name="LN676"></a>                <a href="../../src/include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* Not safe to pushdown when not in grouping context */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../src/include/nodes/relation.h.html#LN512"><span class='Ref_to_Macro'>IS_UPPER_REL</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN290"><span class='Ref_to_Parameter'>glob_cxt</span></a><span class='Operator'>-&GT;</span><a href="deparse.c.html#LN68"><span class='Ref_to_Member'>foreignrel</span></a><span class='Parentheses'>))</span> 
                    <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* Only non-split aggregates are pushable. */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN675"><span class='Ref_To_Local'>agg</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN309"><span class='Ref_to_Member'>aggsplit</span></a> <span class='Operator'>!= </span><a href="../../src/include/nodes/nodes.h.html#LN758"><span class='Ref_to_EnumConst'>AGGSPLIT_SIMPLE</span></a><span class='Parentheses'>) 
</span>                    <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* As usual, it must be shippable. */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="shippable.c.html#LN163"><span class='Ref_to_Func'>is_shippable</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN675"><span class='Ref_To_Local'>agg</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN293"><span class='Ref_to_Member'>aggfnoid</span></a><span class='Delimiter'>, </span><a href="../../src/include/catalog/pg_proc.h.html#LN32"><span class='Ref_to_Const'>ProcedureRelationId</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN294"><span class='Ref_To_Local'>fpinfo</span></a><span class='Parentheses'>))</span> 
                    <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * Recurse to input args. aggdirectargs, aggorder and 
                 * aggdistinct are all present in args, so no need to check 
                 * their shippability explicitly. 
                 */ 
</span>                <a href="../../src/include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN676"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN675"><span class='Ref_To_Local'>agg</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN300"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span><a name="LN697"></a>                    <a href="../../src/include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>n</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../src/include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../src/include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN676"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <span class='Comment_Multi_Line'>/* If TargetEntry, extract the expression from it */ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../src/include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN697"><span class='Ref_To_Local'>n</span></a><span class='Delimiter'>, </span><a href="../../src/include/nodes/primnodes.h.html#LN1363"><span class='Ref_to_Struct'>TargetEntry</span></a><span class='Parentheses'>))</span> 
                    <span class='Delimiter'>{ 
</span><a name="LN702"></a>                        <a href="../../src/include/nodes/primnodes.h.html#LN1363"><span class='Ref_to_Struct'>TargetEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>tle</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../src/include/nodes/primnodes.h.html#LN1363"><span class='Ref_to_Struct'>TargetEntry</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN697"><span class='Ref_To_Local'>n</span></a><span class='Delimiter'>; 
</span> 
                        <a href="deparse.c.html#LN697"><span class='Ref_To_Local'>n</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../src/include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN702"><span class='Ref_To_Local'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN1366"><span class='Ref_to_Member'>expr</span></a><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span> 
                    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="deparse.c.html#LN118"><span class='Ref_to_Proto'>foreign_expr_walker</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN697"><span class='Ref_To_Local'>n</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN290"><span class='Ref_to_Parameter'>glob_cxt</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="deparse.c.html#LN295"><span class='Ref_To_Local'>inner_cxt</span></a><span class='Parentheses'>))</span> 
                        <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * For aggorder elements, check whether the sort operator, if 
                 * specified, is shippable or not. 
                 */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN675"><span class='Ref_To_Local'>agg</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN301"><span class='Ref_to_Member'>aggorder</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span><a name="LN717"></a>                    <a href="../../src/include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc</span><span class='Delimiter'>; 
</span> 
                    <a href="../../src/include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN717"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN675"><span class='Ref_To_Local'>agg</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN301"><span class='Ref_to_Member'>aggorder</span></a><span class='Parentheses'>) 
</span>                    <span class='Delimiter'>{ 
</span><a name="LN721"></a>                        <a href="../../src/include/nodes/parsenodes.h.html#LN1161"><span class='Ref_to_Struct'>SortGroupClause</span></a> <span class='Operator'>*</span><span class='Declare_Local'>srt</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../src/include/nodes/parsenodes.h.html#LN1161"><span class='Ref_to_Struct'>SortGroupClause</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../src/include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN717"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN722"></a>                        <a href="../../src/include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>sortcoltype</span><span class='Delimiter'>; 
</span><a name="LN723"></a>                        <a href="../../src/include/utils/typcache.h.html#LN28"><span class='Ref_to_Struct'>TypeCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>typentry</span><span class='Delimiter'>; 
</span><a name="LN724"></a>                        <a href="../../src/include/nodes/primnodes.h.html#LN1363"><span class='Ref_to_Struct'>TargetEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>tle</span><span class='Delimiter'>; 
</span> 
                        <a href="deparse.c.html#LN724"><span class='Ref_To_Local'>tle</span></a> <span class='Operator'>= </span><a href="../../src/include/optimizer/tlist.h.html#LN35"><span class='Ref_to_Proto'>get_sortgroupref_tle</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN721"><span class='Ref_To_Local'>srt</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/parsenodes.h.html#LN1164"><span class='Ref_to_Member'>tleSortGroupRef</span></a><span class='Delimiter'>, 
</span>                                                   <a href="deparse.c.html#LN675"><span class='Ref_To_Local'>agg</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN300"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <a href="deparse.c.html#LN722"><span class='Ref_To_Local'>sortcoltype</span></a> <span class='Operator'>= </span><a href="../../src/include/nodes/nodeFuncs.h.html#LN31"><span class='Ref_to_Proto'>exprType</span></a><span class='Parentheses'>((</span><a href="../../src/include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN724"><span class='Ref_To_Local'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN1366"><span class='Ref_to_Member'>expr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <a href="deparse.c.html#LN723"><span class='Ref_To_Local'>typentry</span></a> <span class='Operator'>= </span><a href="../../src/include/utils/typcache.h.html#LN142"><span class='Ref_to_Proto'>lookup_type_cache</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN722"><span class='Ref_To_Local'>sortcoltype</span></a><span class='Delimiter'>, 
</span>                                        <a href="../../src/include/utils/typcache.h.html#LN110"><span class='Ref_to_Const'>TYPECACHE_LT_OPR</span></a> <span class='Operator'>| </span><a href="../../src/include/utils/typcache.h.html#LN111"><span class='Ref_to_Const'>TYPECACHE_GT_OPR</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Comment_Multi_Line'>/* Check shippability of non-default sort operator. */ 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN721"><span class='Ref_To_Local'>srt</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/parsenodes.h.html#LN1166"><span class='Ref_to_Member'>sortop</span></a> <span class='Operator'>!= </span><a href="deparse.c.html#LN723"><span class='Ref_To_Local'>typentry</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/utils/typcache.h.html#LN54"><span class='Ref_to_Member'>lt_opr</span></a> <span class='Operator'>&& 
</span>                            <a href="deparse.c.html#LN721"><span class='Ref_To_Local'>srt</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/parsenodes.h.html#LN1166"><span class='Ref_to_Member'>sortop</span></a> <span class='Operator'>!= </span><a href="deparse.c.html#LN723"><span class='Ref_To_Local'>typentry</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/utils/typcache.h.html#LN55"><span class='Ref_to_Member'>gt_opr</span></a> <span class='Operator'>&& 
</span>                            <span class='Operator'>!</span><a href="shippable.c.html#LN163"><span class='Ref_to_Func'>is_shippable</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN721"><span class='Ref_To_Local'>srt</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/parsenodes.h.html#LN1166"><span class='Ref_to_Member'>sortop</span></a><span class='Delimiter'>, </span><a href="../../src/include/catalog/pg_operator.h.html#LN31"><span class='Ref_to_Const'>OperatorRelationId</span></a><span class='Delimiter'>, 
</span>                                          <a href="deparse.c.html#LN294"><span class='Ref_To_Local'>fpinfo</span></a><span class='Parentheses'>))</span> 
                            <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if agg-&GT;aggorder &raquo; </span> 
 
                <span class='Comment_Multi_Line'>/* Check aggregate filter */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="deparse.c.html#LN118"><span class='Ref_to_Proto'>foreign_expr_walker</span></a><span class='Parentheses'>((</span><a href="../../src/include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN675"><span class='Ref_To_Local'>agg</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN303"><span class='Ref_to_Member'>aggfilter</span></a><span class='Delimiter'>, 
</span>                                         <a href="deparse.c.html#LN290"><span class='Ref_to_Parameter'>glob_cxt</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="deparse.c.html#LN295"><span class='Ref_To_Local'>inner_cxt</span></a><span class='Parentheses'>))</span> 
                    <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * If aggregate's input collation is not derived from a 
                 * foreign Var, it can't be sent to remote. 
                 */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN675"><span class='Ref_To_Local'>agg</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN296"><span class='Ref_to_Member'>inputcollid</span></a> <span class='Operator'>== </span><a href="../../src/include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Parentheses'>) 
</span>                     <span class='Comment_Multi_Line'>/* OK, inputs are all noncollatable */ </span><span class='Delimiter'>; 
</span>                <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN295"><span class='Ref_To_Local'>inner_cxt</span></a><span class='Operator'>.</span><a href="deparse.c.html#LN90"><span class='Ref_to_Member'>state</span></a> <span class='Operator'>!= </span><a href="deparse.c.html#LN82"><span class='Ref_to_EnumConst'>FDW_COLLATE_SAFE</span></a> <span class='Operator'>|| 
</span>                         <a href="deparse.c.html#LN675"><span class='Ref_To_Local'>agg</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN296"><span class='Ref_to_Member'>inputcollid</span></a> <span class='Operator'>!= </span><a href="deparse.c.html#LN295"><span class='Ref_To_Local'>inner_cxt</span></a><span class='Operator'>.</span><a href="deparse.c.html#LN89"><span class='Ref_to_Member'>collation</span></a><span class='Parentheses'>) 
</span>                    <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * Detect whether node is introducing a collation not derived 
                 * from a foreign Var.  (If so, we just mark it unsafe for now 
                 * rather than immediately returning false, since the parent 
                 * node might not care.) 
                 */ 
</span>                <a href="deparse.c.html#LN296"><span class='Ref_To_Local'>collation</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN675"><span class='Ref_To_Local'>agg</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN295"><span class='Ref_to_Member'>aggcollid</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN296"><span class='Ref_To_Local'>collation</span></a> <span class='Operator'>== </span><a href="../../src/include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Parentheses'>) 
</span>                    <a href="deparse.c.html#LN297"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN79"><span class='Ref_to_EnumConst'>FDW_COLLATE_NONE</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN295"><span class='Ref_To_Local'>inner_cxt</span></a><span class='Operator'>.</span><a href="deparse.c.html#LN90"><span class='Ref_to_Member'>state</span></a> <span class='Operator'>== </span><a href="deparse.c.html#LN82"><span class='Ref_to_EnumConst'>FDW_COLLATE_SAFE</span></a> <span class='Operator'>&& 
</span>                         <a href="deparse.c.html#LN296"><span class='Ref_To_Local'>collation</span></a> <span class='Operator'>== </span><a href="deparse.c.html#LN295"><span class='Ref_To_Local'>inner_cxt</span></a><span class='Operator'>.</span><a href="deparse.c.html#LN89"><span class='Ref_to_Member'>collation</span></a><span class='Parentheses'>) 
</span>                    <a href="deparse.c.html#LN297"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN82"><span class='Ref_to_EnumConst'>FDW_COLLATE_SAFE</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN296"><span class='Ref_To_Local'>collation</span></a> <span class='Operator'>== </span><a href="../../src/include/catalog/pg_collation.h.html#LN74"><span class='Ref_to_Const'>DEFAULT_COLLATION_OID</span></a><span class='Parentheses'>) 
</span>                    <a href="deparse.c.html#LN297"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN79"><span class='Ref_to_EnumConst'>FDW_COLLATE_NONE</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>else</span> 
                    <a href="deparse.c.html#LN297"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN83"><span class='Ref_to_EnumConst'>FDW_COLLATE_UNSAFE</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>default</span><span class='Operator'>: 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * If it's anything else, assume it's unsafe.  This list can be 
             * expanded later, but don't forget to add deparse support below. 
             */ 
</span>            <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch nodeTag(node) &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* 
     * If result type of given expression is not shippable, it can't be sent 
     * to remote because it might have incompatible semantics on remote side. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN293"><span class='Ref_To_Local'>check_type</span></a> <span class='Operator'>&& !</span><a href="shippable.c.html#LN163"><span class='Ref_to_Func'>is_shippable</span></a><span class='Parentheses'>(</span><a href="../../src/include/nodes/nodeFuncs.h.html#LN31"><span class='Ref_to_Proto'>exprType</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN289"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="../../src/include/catalog/pg_type.h.html#LN33"><span class='Ref_to_Const'>TypeRelationId</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN294"><span class='Ref_To_Local'>fpinfo</span></a><span class='Parentheses'>))</span> 
        <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Now, merge my collation information into my parent's state. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN297"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>&GT; </span><a href="deparse.c.html#LN291"><span class='Ref_to_Parameter'>outer_cxt</span></a><span class='Operator'>-&GT;</span><a href="deparse.c.html#LN90"><span class='Ref_to_Member'>state</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Override previous parent state */ 
</span>        <a href="deparse.c.html#LN291"><span class='Ref_to_Parameter'>outer_cxt</span></a><span class='Operator'>-&GT;</span><a href="deparse.c.html#LN89"><span class='Ref_to_Member'>collation</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN296"><span class='Ref_To_Local'>collation</span></a><span class='Delimiter'>; 
</span>        <a href="deparse.c.html#LN291"><span class='Ref_to_Parameter'>outer_cxt</span></a><span class='Operator'>-&GT;</span><a href="deparse.c.html#LN90"><span class='Ref_to_Member'>state</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN297"><span class='Ref_To_Local'>state</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN297"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>== </span><a href="deparse.c.html#LN291"><span class='Ref_to_Parameter'>outer_cxt</span></a><span class='Operator'>-&GT;</span><a href="deparse.c.html#LN90"><span class='Ref_to_Member'>state</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Merge, or detect error if there's a collation conflict */ 
</span>        <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN297"><span class='Ref_To_Local'>state</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>case</span> <a href="deparse.c.html#LN79"><span class='Ref_to_EnumConst'>FDW_COLLATE_NONE</span></a><span class='Operator'>: 
</span>                <span class='Comment_Multi_Line'>/* Nothing + nothing is still nothing */ 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="deparse.c.html#LN82"><span class='Ref_to_EnumConst'>FDW_COLLATE_SAFE</span></a><span class='Operator'>: 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN296"><span class='Ref_To_Local'>collation</span></a> <span class='Operator'>!= </span><a href="deparse.c.html#LN291"><span class='Ref_to_Parameter'>outer_cxt</span></a><span class='Operator'>-&GT;</span><a href="deparse.c.html#LN89"><span class='Ref_to_Member'>collation</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Comment_Multi_Line'>/* 
                     * Non-default collation always beats default. 
                     */ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN291"><span class='Ref_to_Parameter'>outer_cxt</span></a><span class='Operator'>-&GT;</span><a href="deparse.c.html#LN89"><span class='Ref_to_Member'>collation</span></a> <span class='Operator'>== </span><a href="../../src/include/catalog/pg_collation.h.html#LN74"><span class='Ref_to_Const'>DEFAULT_COLLATION_OID</span></a><span class='Parentheses'>) 
</span>                    <span class='Delimiter'>{ 
</span>                        <span class='Comment_Multi_Line'>/* Override previous parent state */ 
</span>                        <a href="deparse.c.html#LN291"><span class='Ref_to_Parameter'>outer_cxt</span></a><span class='Operator'>-&GT;</span><a href="deparse.c.html#LN89"><span class='Ref_to_Member'>collation</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN296"><span class='Ref_To_Local'>collation</span></a><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN296"><span class='Ref_To_Local'>collation</span></a> <span class='Operator'>!= </span><a href="../../src/include/catalog/pg_collation.h.html#LN74"><span class='Ref_to_Const'>DEFAULT_COLLATION_OID</span></a><span class='Parentheses'>) 
</span>                    <span class='Delimiter'>{ 
</span>                        <span class='Comment_Multi_Line'>/* 
                         * Conflict; show state as indeterminate.  We don't 
                         * want to "return false" right away, since parent 
                         * node might not care about collation. 
                         */ 
</span>                        <a href="deparse.c.html#LN291"><span class='Ref_to_Parameter'>outer_cxt</span></a><span class='Operator'>-&GT;</span><a href="deparse.c.html#LN90"><span class='Ref_to_Member'>state</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN83"><span class='Ref_to_EnumConst'>FDW_COLLATE_UNSAFE</span></a><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if collation!=outer_cxt-... &raquo; </span> 
                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="deparse.c.html#LN83"><span class='Ref_to_EnumConst'>FDW_COLLATE_UNSAFE</span></a><span class='Operator'>: 
</span>                <span class='Comment_Multi_Line'>/* We're still conflicted ... */ 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch state &raquo; </span> 
    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if state==outer_cxt-&GT;sta... &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* It looks OK */ 
</span>    <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end foreign_expr_walker &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Convert type OID + typmod info into a type name we can ship to the remote 
 * server.  Someplace else had better have verified that this type name is 
 * expected to be known on the remote end. 
 * 
 * This is almost just format_type_with_typemod(), except that if left to its 
 * own devices, that function will make schema-qualification decisions based 
 * on the local search_path, which is wrong.  We must schema-qualify all 
 * type names that are not in pg_catalog.  We assume here that built-in types 
 * are all in pg_catalog and need not be qualified; otherwise, qualify. 
 */ 
</span><span class='Keyword'>static char </span><span class='Operator'>* 
</span><a name="LN850"></a><span class='Declare_Function'>deparse_type_name</span><span class='Parentheses'>(</span><a href="../../src/include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>type_oid</span><span class='Delimiter'>, </span><a href="../../src/include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a> <span class='Declare_Parameter'>typemod</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="shippable.c.html#LN153"><span class='Ref_to_Func'>is_builtin</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN850"><span class='Ref_to_Parameter'>type_oid</span></a><span class='Parentheses'>))</span> 
        <span class='Control'>return</span> <a href="../../src/backend/utils/adt/format_type.c.html#LN111"><span class='Ref_to_Func'>format_type_with_typemod</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN850"><span class='Ref_to_Parameter'>type_oid</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN850"><span class='Ref_to_Parameter'>typemod</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <span class='Control'>return</span> <a href="../../src/include/utils/builtins.h.html#LN117"><span class='Ref_to_Proto'>format_type_with_typemod_qualified</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN850"><span class='Ref_to_Parameter'>type_oid</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN850"><span class='Ref_to_Parameter'>typemod</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Build the targetlist for given relation to be deparsed as SELECT clause. 
 * 
 * The output targetlist contains the columns that need to be fetched from the 
 * foreign server for the given relation.  If foreignrel is an upper relation, 
 * then the output targetlist can also contain expressions to be evaluated on 
 * foreign server. 
 */ 
</span><a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>* 
</span><a name="LN867"></a><span class='Declare_Function'>build_tlist_to_deparse</span><span class='Parentheses'>(</span><a href="../../src/include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>foreignrel</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN869"></a>    <a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>tlist</span> <span class='Operator'>= </span><a href="../../src/include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span><a name="LN870"></a>    <a href="postgres_fdw.h.html#LN29"><span class='Ref_to_Struct'>PgFdwRelationInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>fpinfo</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="postgres_fdw.h.html#LN29"><span class='Ref_to_Struct'>PgFdwRelationInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN867"><span class='Ref_to_Parameter'>foreignrel</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/relation.h.html#LN576"><span class='Ref_to_Member'>fdw_private</span></a><span class='Delimiter'>; 
</span><a name="LN871"></a>    <a href="../../src/include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * For an upper relation, we have already built the target list while 
     * checking shippability, so just return that. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../src/include/nodes/relation.h.html#LN512"><span class='Ref_to_Macro'>IS_UPPER_REL</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN867"><span class='Ref_to_Parameter'>foreignrel</span></a><span class='Parentheses'>))</span> 
        <span class='Control'>return</span> <a href="deparse.c.html#LN870"><span class='Ref_To_Local'>fpinfo</span></a><span class='Operator'>-&GT;</span><a href="postgres_fdw.h.html#LN95"><span class='Ref_to_Member'>grouped_tlist</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * We require columns specified in foreignrel-&GT;reltarget-&GT;exprs and those 
     * required for evaluating the local conditions. 
     */ 
</span>    <a href="deparse.c.html#LN869"><span class='Ref_To_Local'>tlist</span></a> <span class='Operator'>= </span><a href="../../src/include/optimizer/tlist.h.html#LN22"><span class='Ref_to_Proto'>add_to_flat_tlist</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN869"><span class='Ref_To_Local'>tlist</span></a><span class='Delimiter'>, 
</span>                       <a href="../../src/include/optimizer/var.h.html#LN36"><span class='Ref_to_Proto'>pull_var_clause</span></a><span class='Parentheses'>((</span><a href="../../src/include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN867"><span class='Ref_to_Parameter'>foreignrel</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/relation.h.html#LN535"><span class='Ref_to_Member'>reltarget</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/relation.h.html#LN882"><span class='Ref_to_Member'>exprs</span></a><span class='Delimiter'>, 
</span>                                       <a href="../../src/include/optimizer/var.h.html#LN25"><span class='Ref_to_Const'>PVC_RECURSE_PLACEHOLDERS</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../src/include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN871"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN870"><span class='Ref_To_Local'>fpinfo</span></a><span class='Operator'>-&GT;</span><a href="postgres_fdw.h.html#LN43"><span class='Ref_to_Member'>local_conds</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN889"></a>        <a href="../../src/include/nodes/relation.h.html#LN1742"><span class='Ref_to_Struct'>RestrictInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>rinfo</span> <span class='Operator'>= </span><a href="../../src/include/nodes/pg_list.h.html#LN108"><span class='Ref_to_Macro'>lfirst_node</span></a><span class='Parentheses'>(</span><a href="../../src/include/nodes/relation.h.html#LN1742"><span class='Ref_to_Struct'>RestrictInfo</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN871"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="deparse.c.html#LN869"><span class='Ref_To_Local'>tlist</span></a> <span class='Operator'>= </span><a href="../../src/include/optimizer/tlist.h.html#LN22"><span class='Ref_to_Proto'>add_to_flat_tlist</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN869"><span class='Ref_To_Local'>tlist</span></a><span class='Delimiter'>, 
</span>                                  <a href="../../src/include/optimizer/var.h.html#LN36"><span class='Ref_to_Proto'>pull_var_clause</span></a><span class='Parentheses'>((</span><a href="../../src/include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN889"><span class='Ref_To_Local'>rinfo</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/relation.h.html#LN1746"><span class='Ref_to_Member'>clause</span></a><span class='Delimiter'>, 
</span>                                                  <a href="../../src/include/optimizer/var.h.html#LN25"><span class='Ref_to_Const'>PVC_RECURSE_PLACEHOLDERS</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>return</span> <a href="deparse.c.html#LN869"><span class='Ref_To_Local'>tlist</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end build_tlist_to_deparse &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Deparse SELECT statement for given relation into buf. 
 * 
 * tlist contains the list of desired columns to be fetched from foreign server. 
 * For a base relation fpinfo-&GT;attrs_used is used to construct SELECT clause, 
 * hence the tlist is ignored for a base relation. 
 * 
 * remote_conds is the list of conditions to be deparsed into the WHERE clause 
 * (or, in the case of upper relations, into the HAVING clause). 
 * 
 * If params_list is not NULL, it receives a list of Params and other-relation 
 * Vars used in the clauses; these values must be transmitted to the remote 
 * server as parameter values. 
 * 
 * If params_list is NULL, we're generating the query for EXPLAIN purposes, 
 * so Params and other-relation Vars should be replaced by dummy values. 
 * 
 * pathkeys is the list of pathkeys to order the result by. 
 * 
 * is_subquery is the flag to indicate whether to deparse the specified 
 * relation as a subquery. 
 * 
 * List of columns selected is returned in retrieved_attrs. 
 */ 
</span><span class='Keyword'>extern void 
</span><a name="LN924"></a><span class='Declare_Function'>deparseSelectStmtForRel</span><span class='Parentheses'>(</span><a href="../../src/include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a> <span class='Declare_Parameter'>buf</span><span class='Delimiter'>, </span><a href="../../src/include/nodes/relation.h.html#LN150"><span class='Ref_to_Struct'>PlannerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>root</span><span class='Delimiter'>, </span><a href="../../src/include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rel</span><span class='Delimiter'>, 
</span><a name="LN925"></a>                        <a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tlist</span><span class='Delimiter'>, </span><a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>remote_conds</span><span class='Delimiter'>, </span><a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pathkeys</span><span class='Delimiter'>, 
</span><a name="LN926"></a>                        <span class='Keyword'>bool </span><span class='Declare_Parameter'>is_subquery</span><span class='Delimiter'>, </span><a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>retrieved_attrs</span><span class='Delimiter'>, 
</span><a name="LN927"></a>                        <a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>params_list</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN929"></a>    <a href="deparse.c.html#LN96"><span class='Ref_to_Struct'>deparse_expr_cxt</span></a> <span class='Declare_Local'>context</span><span class='Delimiter'>; 
</span><a name="LN930"></a>    <a href="postgres_fdw.h.html#LN29"><span class='Ref_to_Struct'>PgFdwRelationInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>fpinfo</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="postgres_fdw.h.html#LN29"><span class='Ref_to_Struct'>PgFdwRelationInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN924"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/relation.h.html#LN576"><span class='Ref_to_Member'>fdw_private</span></a><span class='Delimiter'>; 
</span><a name="LN931"></a>    <a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>quals</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * We handle relations for foreign tables, joins between those and upper 
     * relations. 
     */ 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="../../src/include/nodes/relation.h.html#LN509"><span class='Ref_to_Macro'>IS_JOIN_REL</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN924"><span class='Ref_to_Parameter'>rel</span></a><span class='Parentheses'>) </span><span class='Operator'>|| </span><a href="../../src/include/nodes/relation.h.html#LN504"><span class='Ref_to_Macro'>IS_SIMPLE_REL</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN924"><span class='Ref_to_Parameter'>rel</span></a><span class='Parentheses'>) </span><span class='Operator'>|| </span><a href="../../src/include/nodes/relation.h.html#LN512"><span class='Ref_to_Macro'>IS_UPPER_REL</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN924"><span class='Ref_to_Parameter'>rel</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Fill portions of context common to upper, join and base relation */ 
</span>    <a href="deparse.c.html#LN929"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="deparse.c.html#LN103"><span class='Ref_to_Member'>buf</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN924"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>; 
</span>    <a href="deparse.c.html#LN929"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="deparse.c.html#LN98"><span class='Ref_to_Member'>root</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN924"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>; 
</span>    <a href="deparse.c.html#LN929"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="deparse.c.html#LN99"><span class='Ref_to_Member'>foreignrel</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN924"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>; 
</span>    <a href="deparse.c.html#LN929"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="deparse.c.html#LN100"><span class='Ref_to_Member'>scanrel</span></a> <span class='Operator'>= </span><a href="../../src/include/nodes/relation.h.html#LN512"><span class='Ref_to_Macro'>IS_UPPER_REL</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN924"><span class='Ref_to_Parameter'>rel</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><a href="deparse.c.html#LN930"><span class='Ref_To_Local'>fpinfo</span></a><span class='Operator'>-&GT;</span><a href="postgres_fdw.h.html#LN88"><span class='Ref_to_Member'>outerrel</span></a> <span class='Operator'>: </span><a href="deparse.c.html#LN924"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>; 
</span>    <a href="deparse.c.html#LN929"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="deparse.c.html#LN104"><span class='Ref_to_Member'>params_list</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN927"><span class='Ref_to_Parameter'>params_list</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Construct SELECT clause */ 
</span>    <a href="deparse.c.html#LN164"><span class='Ref_to_Proto'>deparseSelectSql</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN925"><span class='Ref_to_Parameter'>tlist</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN926"><span class='Ref_to_Parameter'>is_subquery</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN926"><span class='Ref_to_Parameter'>retrieved_attrs</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="deparse.c.html#LN929"><span class='Ref_To_Local'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * For upper relations, the WHERE clause is built from the remote 
     * conditions of the underlying scan relation; otherwise, we can use the 
     * supplied list of remote conditions directly. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../src/include/nodes/relation.h.html#LN512"><span class='Ref_to_Macro'>IS_UPPER_REL</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN924"><span class='Ref_to_Parameter'>rel</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN956"></a>        <a href="postgres_fdw.h.html#LN29"><span class='Ref_to_Struct'>PgFdwRelationInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>ofpinfo</span><span class='Delimiter'>; 
</span> 
        <a href="deparse.c.html#LN956"><span class='Ref_To_Local'>ofpinfo</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="postgres_fdw.h.html#LN29"><span class='Ref_to_Struct'>PgFdwRelationInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN930"><span class='Ref_To_Local'>fpinfo</span></a><span class='Operator'>-&GT;</span><a href="postgres_fdw.h.html#LN88"><span class='Ref_to_Member'>outerrel</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/relation.h.html#LN576"><span class='Ref_to_Member'>fdw_private</span></a><span class='Delimiter'>; 
</span>        <a href="deparse.c.html#LN931"><span class='Ref_To_Local'>quals</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN956"><span class='Ref_To_Local'>ofpinfo</span></a><span class='Operator'>-&GT;</span><a href="postgres_fdw.h.html#LN42"><span class='Ref_to_Member'>remote_conds</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
        <a href="deparse.c.html#LN931"><span class='Ref_To_Local'>quals</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN925"><span class='Ref_to_Parameter'>remote_conds</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Construct FROM and WHERE clauses */ 
</span>    <a href="deparse.c.html#LN171"><span class='Ref_to_Proto'>deparseFromExpr</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN931"><span class='Ref_To_Local'>quals</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="deparse.c.html#LN929"><span class='Ref_To_Local'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../src/include/nodes/relation.h.html#LN512"><span class='Ref_to_Macro'>IS_UPPER_REL</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN924"><span class='Ref_to_Parameter'>rel</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Append GROUP BY clause */ 
</span>        <a href="deparse.c.html#LN176"><span class='Ref_to_Proto'>appendGroupByClause</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN925"><span class='Ref_to_Parameter'>tlist</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="deparse.c.html#LN929"><span class='Ref_To_Local'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Append HAVING clause */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN925"><span class='Ref_to_Parameter'>remote_conds</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="../../src/bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN924"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" HAVING "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="deparse.c.html#LN168"><span class='Ref_to_Proto'>appendConditions</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN925"><span class='Ref_to_Parameter'>remote_conds</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="deparse.c.html#LN929"><span class='Ref_To_Local'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* Add ORDER BY clause if we found any useful pathkeys */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN925"><span class='Ref_to_Parameter'>pathkeys</span></a><span class='Parentheses'>) 
</span>        <a href="deparse.c.html#LN167"><span class='Ref_to_Proto'>appendOrderByClause</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN925"><span class='Ref_to_Parameter'>pathkeys</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="deparse.c.html#LN929"><span class='Ref_To_Local'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Add any necessary FOR UPDATE/SHARE. */ 
</span>    <a href="deparse.c.html#LN166"><span class='Ref_to_Proto'>deparseLockingClause</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="deparse.c.html#LN929"><span class='Ref_To_Local'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end deparseSelectStmtForRel &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Construct a simple SELECT statement that retrieves desired columns 
 * of the specified foreign table, and append it to "buf".  The output 
 * contains just "SELECT ... ". 
 * 
 * We also create an integer List of the columns being retrieved, which is 
 * returned to *retrieved_attrs, unless we deparse the specified relation 
 * as a subquery. 
 * 
 * tlist is the list of desired columns.  is_subquery is the flag to 
 * indicate whether to deparse the specified relation as a subquery. 
 * Read prologue of deparseSelectStmtForRel() for details. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN1002"></a><span class='Declare_Function'>deparseSelectSql</span><span class='Parentheses'>(</span><a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tlist</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>is_subquery</span><span class='Delimiter'>, </span><a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>retrieved_attrs</span><span class='Delimiter'>, 
</span><a name="LN1003"></a>                 <a href="deparse.c.html#LN96"><span class='Ref_to_Struct'>deparse_expr_cxt</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1005"></a>    <a href="../../src/include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><a href="deparse.c.html#LN1003"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="deparse.c.html#LN103"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>; 
</span><a name="LN1006"></a>    <a href="../../src/include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>foreignrel</span> <span class='Operator'>= </span><a href="deparse.c.html#LN1003"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="deparse.c.html#LN99"><span class='Ref_to_Member'>foreignrel</span></a><span class='Delimiter'>; 
</span><a name="LN1007"></a>    <a href="../../src/include/nodes/relation.h.html#LN150"><span class='Ref_to_Struct'>PlannerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>root</span> <span class='Operator'>= </span><a href="deparse.c.html#LN1003"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="deparse.c.html#LN98"><span class='Ref_to_Member'>root</span></a><span class='Delimiter'>; 
</span><a name="LN1008"></a>    <a href="postgres_fdw.h.html#LN29"><span class='Ref_to_Struct'>PgFdwRelationInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>fpinfo</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="postgres_fdw.h.html#LN29"><span class='Ref_to_Struct'>PgFdwRelationInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN1006"><span class='Ref_To_Local'>foreignrel</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/relation.h.html#LN576"><span class='Ref_to_Member'>fdw_private</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Construct SELECT list 
     */ 
</span>    <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1005"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN1002"><span class='Ref_to_Parameter'>is_subquery</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * For a relation that is deparsed as a subquery, emit expressions 
         * specified in the relation's reltarget.  Note that since this is for 
         * the subquery, no need to care about *retrieved_attrs. 
         */ 
</span>        <a href="deparse.c.html#LN136"><span class='Ref_to_Proto'>deparseSubqueryTargetList</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1003"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../src/include/nodes/relation.h.html#LN509"><span class='Ref_to_Macro'>IS_JOIN_REL</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1006"><span class='Ref_To_Local'>foreignrel</span></a><span class='Parentheses'>) </span><span class='Operator'>|| </span><a href="../../src/include/nodes/relation.h.html#LN512"><span class='Ref_to_Macro'>IS_UPPER_REL</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1006"><span class='Ref_To_Local'>foreignrel</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * For a join or upper relation the input tlist gives the list of 
         * columns required to be fetched from the foreign server. 
         */ 
</span>        <a href="deparse.c.html#LN134"><span class='Ref_to_Proto'>deparseExplicitTargetList</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1002"><span class='Ref_to_Parameter'>tlist</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1002"><span class='Ref_to_Parameter'>retrieved_attrs</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1003"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * For a base relation fpinfo-&GT;attrs_used gives the list of columns 
         * required to be fetched from the foreign server. 
         */ 
</span><a name="LN1038"></a>        <a href="../../src/include/nodes/parsenodes.h.html#LN932"><span class='Ref_to_Struct'>RangeTblEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>rte</span> <span class='Operator'>= </span><a href="../../src/include/nodes/relation.h.html#LN324"><span class='Ref_to_Macro'>planner_rt_fetch</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1006"><span class='Ref_To_Local'>foreignrel</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/relation.h.html#LN552"><span class='Ref_to_Member'>relid</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1007"><span class='Ref_To_Local'>root</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Core code already has some lock on each rel being planned, so we 
         * can use NoLock here. 
         */ 
</span><a name="LN1044"></a>        <a href="../../src/include/utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a>    <span class='Declare_Local'>rel</span> <span class='Operator'>= </span><a href="../../src/include/access/heapam.h.html#LN91"><span class='Ref_to_Proto'>heap_open</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1038"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/parsenodes.h.html#LN947"><span class='Ref_to_Member'>relid</span></a><span class='Delimiter'>, </span><a href="../../src/include/storage/lockdefs.h.html#LN33"><span class='Ref_to_Const'>NoLock</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="deparse.c.html#LN126"><span class='Ref_to_Proto'>deparseTargetList</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1005"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1007"><span class='Ref_To_Local'>root</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1006"><span class='Ref_To_Local'>foreignrel</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/relation.h.html#LN552"><span class='Ref_to_Member'>relid</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1044"><span class='Ref_To_Local'>rel</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, 
</span>                          <a href="deparse.c.html#LN1008"><span class='Ref_To_Local'>fpinfo</span></a><span class='Operator'>-&GT;</span><a href="postgres_fdw.h.html#LN49"><span class='Ref_to_Member'>attrs_used</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN1002"><span class='Ref_to_Parameter'>retrieved_attrs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../src/include/access/heapam.h.html#LN96"><span class='Ref_to_Macro'>heap_close</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1044"><span class='Ref_To_Local'>rel</span></a><span class='Delimiter'>, </span><a href="../../src/include/storage/lockdefs.h.html#LN33"><span class='Ref_to_Const'>NoLock</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
}</span><span class='Auto_Annotations'> &laquo; end deparseSelectSql &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Construct a FROM clause and, if needed, a WHERE clause, and append those to 
 * "buf". 
 * 
 * quals is the list of clauses to be included in the WHERE clause. 
 * (These may or may not include RestrictInfo decoration.) 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN1060"></a><span class='Declare_Function'>deparseFromExpr</span><span class='Parentheses'>(</span><a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>quals</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN96"><span class='Ref_to_Struct'>deparse_expr_cxt</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1062"></a>    <a href="../../src/include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><a href="deparse.c.html#LN1060"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="deparse.c.html#LN103"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>; 
</span><a name="LN1063"></a>    <a href="../../src/include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>scanrel</span> <span class='Operator'>= </span><a href="deparse.c.html#LN1060"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="deparse.c.html#LN100"><span class='Ref_to_Member'>scanrel</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* For upper relations, scanrel must be either a joinrel or a baserel */ 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../src/include/nodes/relation.h.html#LN512"><span class='Ref_to_Macro'>IS_UPPER_REL</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1060"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="deparse.c.html#LN99"><span class='Ref_to_Member'>foreignrel</span></a><span class='Parentheses'>) </span><span class='Operator'>|| 
</span>           <a href="../../src/include/nodes/relation.h.html#LN509"><span class='Ref_to_Macro'>IS_JOIN_REL</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1063"><span class='Ref_To_Local'>scanrel</span></a><span class='Parentheses'>) </span><span class='Operator'>|| </span><a href="../../src/include/nodes/relation.h.html#LN504"><span class='Ref_to_Macro'>IS_SIMPLE_REL</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1063"><span class='Ref_To_Local'>scanrel</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Construct FROM clause */ 
</span>    <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1062"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" FROM "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="deparse.c.html#LN169"><span class='Ref_to_Proto'>deparseFromExprForRel</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1062"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1060"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="deparse.c.html#LN98"><span class='Ref_to_Member'>root</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1063"><span class='Ref_To_Local'>scanrel</span></a><span class='Delimiter'>, 
</span>                          <span class='Parentheses'>(</span><a href="../../src/include/nodes/bitmapset.h.html#LN81"><span class='Ref_to_Proto'>bms_num_members</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1063"><span class='Ref_To_Local'>scanrel</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/relation.h.html#LN524"><span class='Ref_to_Member'>relids</span></a><span class='Parentheses'>) </span><span class='Operator'>&GT; </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                          <a href="deparse.c.html#LN1060"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="deparse.c.html#LN104"><span class='Ref_to_Member'>params_list</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Construct WHERE clause */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN1060"><span class='Ref_to_Parameter'>quals</span></a> <span class='Operator'>!= </span><a href="../../src/include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../src/bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1062"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" WHERE "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="deparse.c.html#LN168"><span class='Ref_to_Proto'>appendConditions</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1060"><span class='Ref_to_Parameter'>quals</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1060"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
}</span><span class='Auto_Annotations'> &laquo; end deparseFromExpr &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Emit a target list that retrieves the columns specified in attrs_used. 
 * This is used for both SELECT and RETURNING targetlists; the is_returning 
 * parameter is true only for a RETURNING targetlist. 
 * 
 * The tlist text is appended to buf, and we also create an integer List 
 * of the columns being retrieved, which is returned to *retrieved_attrs. 
 * 
 * If qualify_col is true, add relation alias before the column name. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN1094"></a><span class='Declare_Function'>deparseTargetList</span><span class='Parentheses'>(</span><a href="../../src/include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a> <span class='Declare_Parameter'>buf</span><span class='Delimiter'>, 
</span><a name="LN1095"></a>                  <a href="../../src/include/nodes/relation.h.html#LN150"><span class='Ref_to_Struct'>PlannerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>root</span><span class='Delimiter'>, 
</span><a name="LN1096"></a>                  <a href="../../src/include/c.h.html#LN364"><span class='Ref_to_Typedef'>Index</span></a> <span class='Declare_Parameter'>rtindex</span><span class='Delimiter'>, 
</span><a name="LN1097"></a>                  <a href="../../src/include/utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a> <span class='Declare_Parameter'>rel</span><span class='Delimiter'>, 
</span><a name="LN1098"></a>                  <span class='Keyword'>bool </span><span class='Declare_Parameter'>is_returning</span><span class='Delimiter'>, 
</span><a name="LN1099"></a>                  <a href="../../src/include/nodes/bitmapset.h.html#LN36"><span class='Ref_to_Struct'>Bitmapset</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>attrs_used</span><span class='Delimiter'>, 
</span><a name="LN1100"></a>                  <span class='Keyword'>bool </span><span class='Declare_Parameter'>qualify_col</span><span class='Delimiter'>, 
</span><a name="LN1101"></a>                  <a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>retrieved_attrs</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1103"></a>    <a href="../../src/include/access/tupdesc.h.html#LN70"><span class='Ref_to_Typedef'>TupleDesc</span></a>   <span class='Declare_Local'>tupdesc</span> <span class='Operator'>= </span><a href="../../src/include/utils/rel.h.html#LN428"><span class='Ref_to_Macro'>RelationGetDescr</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1097"><span class='Ref_to_Parameter'>rel</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1104"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>have_wholerow</span><span class='Delimiter'>; 
</span><a name="LN1105"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>first</span><span class='Delimiter'>; 
</span><a name="LN1106"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <span class='Operator'>*</span><a href="deparse.c.html#LN1101"><span class='Ref_to_Parameter'>retrieved_attrs</span></a> <span class='Operator'>= </span><a href="../../src/include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* If there's a whole-row reference, we'll need all the columns. */ 
</span>    <a href="deparse.c.html#LN1104"><span class='Ref_To_Local'>have_wholerow</span></a> <span class='Operator'>= </span><a href="../../src/include/nodes/bitmapset.h.html#LN75"><span class='Ref_to_Proto'>bms_is_member</span></a><span class='Parentheses'>(</span><span class='Number'>0</span> <span class='Operator'>- </span><a href="../../src/include/access/sysattr.h.html#LN27"><span class='Ref_to_Const'>FirstLowInvalidHeapAttributeNumber</span></a><span class='Delimiter'>, 
</span>                                  <a href="deparse.c.html#LN1099"><span class='Ref_to_Parameter'>attrs_used</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="deparse.c.html#LN1105"><span class='Ref_To_Local'>first</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN1106"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; </span><a href="deparse.c.html#LN1106"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT;= </span><a href="deparse.c.html#LN1103"><span class='Ref_To_Local'>tupdesc</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/access/tupdesc.h.html#LN72"><span class='Ref_to_Member'>natts</span></a><span class='Delimiter'>; </span><a href="deparse.c.html#LN1106"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN1117"></a>        <a href="../../src/include/catalog/pg_attribute.h.html#LN186"><span class='Ref_to_Typedef'>Form_pg_attribute</span></a> <span class='Declare_Local'>attr</span> <span class='Operator'>= </span><a href="deparse.c.html#LN1103"><span class='Ref_To_Local'>tupdesc</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="deparse.c.html#LN1106"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>]; 
</span> 
        <span class='Comment_Multi_Line'>/* Ignore dropped attributes. */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN1117"><span class='Ref_To_Local'>attr</span></a><span class='Operator'>-&GT;</span>attisdropped<span class='Parentheses'>) 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN1104"><span class='Ref_To_Local'>have_wholerow</span></a> <span class='Operator'>|| 
</span>            <a href="../../src/include/nodes/bitmapset.h.html#LN75"><span class='Ref_to_Proto'>bms_is_member</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1106"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>- </span><a href="../../src/include/access/sysattr.h.html#LN27"><span class='Ref_to_Const'>FirstLowInvalidHeapAttributeNumber</span></a><span class='Delimiter'>, 
</span>                          <a href="deparse.c.html#LN1099"><span class='Ref_to_Parameter'>attrs_used</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="deparse.c.html#LN1105"><span class='Ref_To_Local'>first</span></a><span class='Parentheses'>) 
</span>                <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1094"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>", "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN1098"><span class='Ref_to_Parameter'>is_returning</span></a><span class='Parentheses'>) 
</span>                <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1094"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" RETURNING "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="deparse.c.html#LN1105"><span class='Ref_To_Local'>first</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
            <a href="deparse.c.html#LN142"><span class='Ref_to_Proto'>deparseColumnRef</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1094"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1096"><span class='Ref_to_Parameter'>rtindex</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1106"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1095"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1100"><span class='Ref_to_Parameter'>qualify_col</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Operator'>*</span><a href="deparse.c.html#LN1101"><span class='Ref_to_Parameter'>retrieved_attrs</span></a> <span class='Operator'>= </span><a href="../../src/backend/nodes/list.c.html#LN144"><span class='Ref_to_Func'>lappend_int</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="deparse.c.html#LN1101"><span class='Ref_to_Parameter'>retrieved_attrs</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1106"><span class='Ref_To_Local'>i</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=1;i&LT;=tupdesc-&GT;natts... &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* 
     * Add ctid and oid if needed.  We currently don't support retrieving any 
     * other system columns. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../src/include/nodes/bitmapset.h.html#LN75"><span class='Ref_to_Proto'>bms_is_member</span></a><span class='Parentheses'>(</span><a href="../../src/include/access/sysattr.h.html#LN20"><span class='Ref_to_Const'>SelfItemPointerAttributeNumber</span></a> <span class='Operator'>- </span><a href="../../src/include/access/sysattr.h.html#LN27"><span class='Ref_to_Const'>FirstLowInvalidHeapAttributeNumber</span></a><span class='Delimiter'>, 
</span>                      <a href="deparse.c.html#LN1099"><span class='Ref_to_Parameter'>attrs_used</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="deparse.c.html#LN1105"><span class='Ref_To_Local'>first</span></a><span class='Parentheses'>) 
</span>            <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1094"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>", "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN1098"><span class='Ref_to_Parameter'>is_returning</span></a><span class='Parentheses'>) 
</span>            <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1094"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" RETURNING "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="deparse.c.html#LN1105"><span class='Ref_To_Local'>first</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN1100"><span class='Ref_to_Parameter'>qualify_col</span></a><span class='Parentheses'>) 
</span>            <a href="deparse.c.html#LN109"><span class='Ref_to_Macro'>ADD_REL_QUALIFIER</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1094"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1096"><span class='Ref_to_Parameter'>rtindex</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1094"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"ctid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Operator'>*</span><a href="deparse.c.html#LN1101"><span class='Ref_to_Parameter'>retrieved_attrs</span></a> <span class='Operator'>= </span><a href="../../src/backend/nodes/list.c.html#LN144"><span class='Ref_to_Func'>lappend_int</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="deparse.c.html#LN1101"><span class='Ref_to_Parameter'>retrieved_attrs</span></a><span class='Delimiter'>, 
</span>                                       <a href="../../src/include/access/sysattr.h.html#LN20"><span class='Ref_to_Const'>SelfItemPointerAttributeNumber</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../src/include/nodes/bitmapset.h.html#LN75"><span class='Ref_to_Proto'>bms_is_member</span></a><span class='Parentheses'>(</span><a href="../../src/include/access/sysattr.h.html#LN21"><span class='Ref_to_Const'>ObjectIdAttributeNumber</span></a> <span class='Operator'>- </span><a href="../../src/include/access/sysattr.h.html#LN27"><span class='Ref_to_Const'>FirstLowInvalidHeapAttributeNumber</span></a><span class='Delimiter'>, 
</span>                      <a href="deparse.c.html#LN1099"><span class='Ref_to_Parameter'>attrs_used</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="deparse.c.html#LN1105"><span class='Ref_To_Local'>first</span></a><span class='Parentheses'>) 
</span>            <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1094"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>", "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN1098"><span class='Ref_to_Parameter'>is_returning</span></a><span class='Parentheses'>) 
</span>            <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1094"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" RETURNING "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="deparse.c.html#LN1105"><span class='Ref_To_Local'>first</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN1100"><span class='Ref_to_Parameter'>qualify_col</span></a><span class='Parentheses'>) 
</span>            <a href="deparse.c.html#LN109"><span class='Ref_to_Macro'>ADD_REL_QUALIFIER</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1094"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1096"><span class='Ref_to_Parameter'>rtindex</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1094"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"oid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Operator'>*</span><a href="deparse.c.html#LN1101"><span class='Ref_to_Parameter'>retrieved_attrs</span></a> <span class='Operator'>= </span><a href="../../src/backend/nodes/list.c.html#LN144"><span class='Ref_to_Func'>lappend_int</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="deparse.c.html#LN1101"><span class='Ref_to_Parameter'>retrieved_attrs</span></a><span class='Delimiter'>, 
</span>                                       <a href="../../src/include/access/sysattr.h.html#LN21"><span class='Ref_to_Const'>ObjectIdAttributeNumber</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* Don't generate bad syntax if no undropped columns */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN1105"><span class='Ref_To_Local'>first</span></a> <span class='Operator'>&& !</span><a href="deparse.c.html#LN1098"><span class='Ref_to_Parameter'>is_returning</span></a><span class='Parentheses'>) 
</span>        <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1094"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"NULL"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end deparseTargetList &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Deparse the appropriate locking clause (FOR UPDATE or FOR SHARE) for a 
 * given relation (context-&GT;scanrel). 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN1186"></a><span class='Declare_Function'>deparseLockingClause</span><span class='Parentheses'>(</span><a href="deparse.c.html#LN96"><span class='Ref_to_Struct'>deparse_expr_cxt</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1188"></a>    <a href="../../src/include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><a href="deparse.c.html#LN1186"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="deparse.c.html#LN103"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>; 
</span><a name="LN1189"></a>    <a href="../../src/include/nodes/relation.h.html#LN150"><span class='Ref_to_Struct'>PlannerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>root</span> <span class='Operator'>= </span><a href="deparse.c.html#LN1186"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="deparse.c.html#LN98"><span class='Ref_to_Member'>root</span></a><span class='Delimiter'>; 
</span><a name="LN1190"></a>    <a href="../../src/include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>rel</span> <span class='Operator'>= </span><a href="deparse.c.html#LN1186"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="deparse.c.html#LN100"><span class='Ref_to_Member'>scanrel</span></a><span class='Delimiter'>; 
</span><a name="LN1191"></a>    <a href="postgres_fdw.h.html#LN29"><span class='Ref_to_Struct'>PgFdwRelationInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>fpinfo</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="postgres_fdw.h.html#LN29"><span class='Ref_to_Struct'>PgFdwRelationInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN1190"><span class='Ref_To_Local'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/relation.h.html#LN576"><span class='Ref_to_Member'>fdw_private</span></a><span class='Delimiter'>; 
</span><a name="LN1192"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>relid</span> <span class='Operator'>= -</span><span class='Number'>1</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>while</span> <span class='Parentheses'>((</span><a href="deparse.c.html#LN1192"><span class='Ref_To_Local'>relid</span></a> <span class='Operator'>= </span><a href="../../src/include/nodes/bitmapset.h.html#LN98"><span class='Ref_to_Proto'>bms_next_member</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1190"><span class='Ref_To_Local'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/relation.h.html#LN524"><span class='Ref_to_Member'>relids</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1192"><span class='Ref_To_Local'>relid</span></a><span class='Parentheses'>))</span> <span class='Operator'>&GT;= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * Ignore relation if it appears in a lower subquery.  Locking clause 
         * for such a relation is included in the subquery if necessary. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../src/include/nodes/bitmapset.h.html#LN75"><span class='Ref_to_Proto'>bms_is_member</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1192"><span class='Ref_To_Local'>relid</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1191"><span class='Ref_To_Local'>fpinfo</span></a><span class='Operator'>-&GT;</span><a href="postgres_fdw.h.html#LN102"><span class='Ref_to_Member'>lower_subquery_rels</span></a><span class='Parentheses'>))</span> 
            <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Add FOR UPDATE/SHARE if appropriate.  We apply locking during the 
         * initial row fetch, rather than later on as is done for local 
         * tables. The extra roundtrips involved in trying to duplicate the 
         * local semantics exactly don't seem worthwhile (see also comments 
         * for RowMarkType). 
         * 
         * Note: because we actually run the query as a cursor, this assumes 
         * that DECLARE CURSOR ... FOR UPDATE is supported, which it isn't 
         * before 8.3. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN1192"><span class='Ref_To_Local'>relid</span></a> <span class='Operator'>== </span><a href="deparse.c.html#LN1189"><span class='Ref_To_Local'>root</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/relation.h.html#LN154"><span class='Ref_to_Member'>parse</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/parsenodes.h.html#LN119"><span class='Ref_to_Member'>resultRelation</span></a> <span class='Operator'>&& 
</span>            <span class='Parentheses'>(</span><a href="deparse.c.html#LN1189"><span class='Ref_To_Local'>root</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/relation.h.html#LN154"><span class='Ref_to_Member'>parse</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/parsenodes.h.html#LN109"><span class='Ref_to_Member'>commandType</span></a> <span class='Operator'>== </span><a href="../../src/include/nodes/nodes.h.html#LN651"><span class='Ref_to_EnumConst'>CMD_UPDATE</span></a> <span class='Operator'>|| 
</span>             <a href="deparse.c.html#LN1189"><span class='Ref_To_Local'>root</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/relation.h.html#LN154"><span class='Ref_to_Member'>parse</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/parsenodes.h.html#LN109"><span class='Ref_to_Member'>commandType</span></a> <span class='Operator'>== </span><a href="../../src/include/nodes/nodes.h.html#LN653"><span class='Ref_to_EnumConst'>CMD_DELETE</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* Relation is UPDATE/DELETE target, so use FOR UPDATE */ 
</span>            <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1188"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" FOR UPDATE"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* Add the relation alias if we are here for a join relation */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../src/include/nodes/relation.h.html#LN509"><span class='Ref_to_Macro'>IS_JOIN_REL</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1190"><span class='Ref_To_Local'>rel</span></a><span class='Parentheses'>))</span> 
                <a href="../../src/bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1188"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" OF %s%d"</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN107"><span class='Ref_to_Const'>REL_ALIAS_PREFIX</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1192"><span class='Ref_To_Local'>relid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span><a name="LN1227"></a>            <a href="../../src/include/nodes/plannodes.h.html#LN1002"><span class='Ref_to_Struct'>PlanRowMark</span></a> <span class='Operator'>*</span><span class='Declare_Local'>rc</span> <span class='Operator'>= </span><a href="../../src/include/optimizer/prep.h.html#LN45"><span class='Ref_to_Proto'>get_plan_rowmark</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1189"><span class='Ref_To_Local'>root</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/relation.h.html#LN255"><span class='Ref_to_Member'>rowMarks</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1192"><span class='Ref_To_Local'>relid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN1227"><span class='Ref_To_Local'>rc</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* 
                 * Relation is specified as a FOR UPDATE/SHARE target, so 
                 * handle that.  (But we could also see LCS_NONE, meaning this 
                 * isn't a target relation after all.) 
                 * 
                 * For now, just ignore any [NO] KEY specification, since (a) 
                 * it's not clear what that means for a remote table that we 
                 * don't have complete information about, and (b) it wouldn't 
                 * work anyway on older remote servers.  Likewise, we don't 
                 * worry about NOWAIT. 
                 */ 
</span>                <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN1227"><span class='Ref_To_Local'>rc</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/plannodes.h.html#LN1010"><span class='Ref_to_Member'>strength</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Control'>case</span> <a href="../../src/include/nodes/lockoptions.h.html#LN22"><span class='Ref_to_EnumConst'>LCS_NONE</span></a><span class='Operator'>: 
</span>                        <span class='Comment_Multi_Line'>/* No locking needed */ 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>case</span> <a href="../../src/include/nodes/lockoptions.h.html#LN23"><span class='Ref_to_EnumConst'>LCS_FORKEYSHARE</span></a><span class='Operator'>: 
</span>                    <span class='Control'>case</span> <a href="../../src/include/nodes/lockoptions.h.html#LN24"><span class='Ref_to_EnumConst'>LCS_FORSHARE</span></a><span class='Operator'>: 
</span>                        <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1188"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" FOR SHARE"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>case</span> <a href="../../src/include/nodes/lockoptions.h.html#LN25"><span class='Ref_to_EnumConst'>LCS_FORNOKEYUPDATE</span></a><span class='Operator'>: 
</span>                    <span class='Control'>case</span> <a href="../../src/include/nodes/lockoptions.h.html#LN26"><span class='Ref_to_EnumConst'>LCS_FORUPDATE</span></a><span class='Operator'>: 
</span>                        <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1188"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" FOR UPDATE"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span> 
                <span class='Comment_Multi_Line'>/* Add the relation alias if we are here for a join relation */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../src/include/nodes/bitmapset.h.html#LN81"><span class='Ref_to_Proto'>bms_num_members</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1190"><span class='Ref_To_Local'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/relation.h.html#LN524"><span class='Ref_to_Member'>relids</span></a><span class='Parentheses'>) </span><span class='Operator'>&GT; </span><span class='Number'>1</span> <span class='Operator'>&& 
</span>                    <a href="deparse.c.html#LN1227"><span class='Ref_To_Local'>rc</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/plannodes.h.html#LN1010"><span class='Ref_to_Member'>strength</span></a> <span class='Operator'>!= </span><a href="../../src/include/nodes/lockoptions.h.html#LN22"><span class='Ref_to_EnumConst'>LCS_NONE</span></a><span class='Parentheses'>)</span> 
                    <a href="../../src/bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1188"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" OF %s%d"</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN107"><span class='Ref_to_Const'>REL_ALIAS_PREFIX</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1192"><span class='Ref_To_Local'>relid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if rc &raquo; </span> 
        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end while (relid=bms_next_membe... &raquo; </span> 
<span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end deparseLockingClause &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Deparse conditions from the provided list and append them to buf. 
 * 
 * The conditions in the list are assumed to be ANDed. This function is used to 
 * deparse WHERE clauses, JOIN .. ON clauses and HAVING clauses. 
 * 
 * Depending on the caller, the list elements might be either RestrictInfos 
 * or bare clauses. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN1276"></a><span class='Declare_Function'>appendConditions</span><span class='Parentheses'>(</span><a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>exprs</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN96"><span class='Ref_to_Struct'>deparse_expr_cxt</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1278"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>nestlevel</span><span class='Delimiter'>; 
</span><a name="LN1279"></a>    <a href="../../src/include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc</span><span class='Delimiter'>; 
</span><a name="LN1280"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>is_first</span> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span><a name="LN1281"></a>    <a href="../../src/include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><a href="deparse.c.html#LN1276"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="deparse.c.html#LN103"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Make sure any constants in the exprs are printed portably */ 
</span>    <a href="deparse.c.html#LN1278"><span class='Ref_To_Local'>nestlevel</span></a> <span class='Operator'>= </span><a href="postgres_fdw.h.html#LN113"><span class='Ref_to_Proto'>set_transmission_modes</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="../../src/include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1279"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1276"><span class='Ref_to_Parameter'>exprs</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN1288"></a>        <a href="../../src/include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>expr</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../src/include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../src/include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1279"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Extract clause from RestrictInfo, if required */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../src/include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1288"><span class='Ref_To_Local'>expr</span></a><span class='Delimiter'>, </span><a href="../../src/include/nodes/relation.h.html#LN1742"><span class='Ref_to_Struct'>RestrictInfo</span></a><span class='Parentheses'>))</span> 
            <a href="deparse.c.html#LN1288"><span class='Ref_To_Local'>expr</span></a> <span class='Operator'>= </span><span class='Parentheses'>((</span><a href="../../src/include/nodes/relation.h.html#LN1742"><span class='Ref_to_Struct'>RestrictInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN1288"><span class='Ref_To_Local'>expr</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>clause<span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Connect expressions with "AND" and parenthesize each condition. */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="deparse.c.html#LN1280"><span class='Ref_To_Local'>is_first</span></a><span class='Parentheses'>) 
</span>            <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1281"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" AND "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../src/backend/replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1281"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'('</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="deparse.c.html#LN145"><span class='Ref_to_Proto'>deparseExpr</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1288"><span class='Ref_To_Local'>expr</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1276"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../src/backend/replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1281"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="deparse.c.html#LN1280"><span class='Ref_To_Local'>is_first</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="postgres_fdw.h.html#LN114"><span class='Ref_to_Proto'>reset_transmission_modes</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1278"><span class='Ref_To_Local'>nestlevel</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end appendConditions &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* Output join name for given join type */ 
</span><span class='Keyword'>extern const char </span><span class='Operator'>* 
</span><a name="LN1310"></a><span class='Declare_Function'>get_jointype_name</span><span class='Parentheses'>(</span><a href="../../src/include/nodes/nodes.h.html#LN671"><span class='Ref_to_Enum'>JoinType</span></a> <span class='Declare_Parameter'>jointype</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN1310"><span class='Ref_to_Parameter'>jointype</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>case</span> <a href="../../src/include/nodes/nodes.h.html#LN677"><span class='Ref_to_EnumConst'>JOIN_INNER</span></a><span class='Operator'>: 
</span>            <span class='Control'>return</span> <span class='String'>"INNER"</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../src/include/nodes/nodes.h.html#LN678"><span class='Ref_to_EnumConst'>JOIN_LEFT</span></a><span class='Operator'>: 
</span>            <span class='Control'>return</span> <span class='String'>"LEFT"</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../src/include/nodes/nodes.h.html#LN680"><span class='Ref_to_EnumConst'>JOIN_RIGHT</span></a><span class='Operator'>: 
</span>            <span class='Control'>return</span> <span class='String'>"RIGHT"</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../src/include/nodes/nodes.h.html#LN679"><span class='Ref_to_EnumConst'>JOIN_FULL</span></a><span class='Operator'>: 
</span>            <span class='Control'>return</span> <span class='String'>"FULL"</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>default</span><span class='Operator'>: 
</span>            <span class='Comment_Multi_Line'>/* Shouldn't come here, but protect from buggy code. */ 
</span>            <a href="../../src/backend/bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../src/include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"unsupported join type %d"</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN1310"><span class='Ref_to_Parameter'>jointype</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* Keep compiler happy */ 
</span>    <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end get_jointype_name &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Deparse given targetlist and append it to context-&GT;buf. 
 * 
 * tlist is list of TargetEntry's which in turn contain Var nodes. 
 * 
 * retrieved_attrs is the list of continuously increasing integers starting 
 * from 1. It has same number of entries as tlist. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN1344"></a><span class='Declare_Function'>deparseExplicitTargetList</span><span class='Parentheses'>(</span><a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tlist</span><span class='Delimiter'>, </span><a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>retrieved_attrs</span><span class='Delimiter'>, 
</span><a name="LN1345"></a>                          <a href="deparse.c.html#LN96"><span class='Ref_to_Struct'>deparse_expr_cxt</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1347"></a>    <a href="../../src/include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc</span><span class='Delimiter'>; 
</span><a name="LN1348"></a>    <a href="../../src/include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><a href="deparse.c.html#LN1345"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="deparse.c.html#LN103"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>; 
</span><a name="LN1349"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <span class='Operator'>*</span><a href="deparse.c.html#LN1344"><span class='Ref_to_Parameter'>retrieved_attrs</span></a> <span class='Operator'>= </span><a href="../../src/include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span> 
    <a href="../../src/include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1347"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1344"><span class='Ref_to_Parameter'>tlist</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN1355"></a>        <a href="../../src/include/nodes/primnodes.h.html#LN1363"><span class='Ref_to_Struct'>TargetEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>tle</span> <span class='Operator'>= </span><a href="../../src/include/nodes/pg_list.h.html#LN108"><span class='Ref_to_Macro'>lfirst_node</span></a><span class='Parentheses'>(</span><a href="../../src/include/nodes/primnodes.h.html#LN1363"><span class='Ref_to_Struct'>TargetEntry</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1347"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN1349"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1348"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>", "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="deparse.c.html#LN145"><span class='Ref_to_Proto'>deparseExpr</span></a><span class='Parentheses'>((</span><a href="../../src/include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN1355"><span class='Ref_To_Local'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN1366"><span class='Ref_to_Member'>expr</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1345"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Operator'>*</span><a href="deparse.c.html#LN1344"><span class='Ref_to_Parameter'>retrieved_attrs</span></a> <span class='Operator'>= </span><a href="../../src/backend/nodes/list.c.html#LN144"><span class='Ref_to_Func'>lappend_int</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="deparse.c.html#LN1344"><span class='Ref_to_Parameter'>retrieved_attrs</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1349"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="deparse.c.html#LN1349"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN1349"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1348"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"NULL"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end deparseExplicitTargetList &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Emit expressions specified in the given relation's reltarget. 
 * 
 * This is used for deparsing the given relation as a subquery. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN1375"></a><span class='Declare_Function'>deparseSubqueryTargetList</span><span class='Parentheses'>(</span><a href="deparse.c.html#LN96"><span class='Ref_to_Struct'>deparse_expr_cxt</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1377"></a>    <a href="../../src/include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><a href="deparse.c.html#LN1375"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="deparse.c.html#LN103"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>; 
</span><a name="LN1378"></a>    <a href="../../src/include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>foreignrel</span> <span class='Operator'>= </span><a href="deparse.c.html#LN1375"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="deparse.c.html#LN99"><span class='Ref_to_Member'>foreignrel</span></a><span class='Delimiter'>; 
</span><a name="LN1379"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>first</span><span class='Delimiter'>; 
</span><a name="LN1380"></a>    <a href="../../src/include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Should only be called in these cases. */ 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="../../src/include/nodes/relation.h.html#LN504"><span class='Ref_to_Macro'>IS_SIMPLE_REL</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1378"><span class='Ref_To_Local'>foreignrel</span></a><span class='Parentheses'>) </span><span class='Operator'>|| </span><a href="../../src/include/nodes/relation.h.html#LN509"><span class='Ref_to_Macro'>IS_JOIN_REL</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1378"><span class='Ref_To_Local'>foreignrel</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="deparse.c.html#LN1379"><span class='Ref_To_Local'>first</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <a href="../../src/include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1380"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1378"><span class='Ref_To_Local'>foreignrel</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/relation.h.html#LN535"><span class='Ref_to_Member'>reltarget</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/relation.h.html#LN882"><span class='Ref_to_Member'>exprs</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN1388"></a>        <a href="../../src/include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>node</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../src/include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../src/include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1380"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="deparse.c.html#LN1379"><span class='Ref_To_Local'>first</span></a><span class='Parentheses'>) 
</span>            <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1377"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>", "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="deparse.c.html#LN1379"><span class='Ref_To_Local'>first</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
        <a href="deparse.c.html#LN145"><span class='Ref_to_Proto'>deparseExpr</span></a><span class='Parentheses'>((</span><a href="../../src/include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN1388"><span class='Ref_To_Local'>node</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1375"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* Don't generate bad syntax if no expressions */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN1379"><span class='Ref_To_Local'>first</span></a><span class='Parentheses'>) 
</span>        <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1377"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"NULL"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end deparseSubqueryTargetList &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Construct FROM clause for given relation 
 * 
 * The function constructs ... JOIN ... ON ... for join relation. For a base 
 * relation it just returns schema-qualified tablename, with the appropriate 
 * alias if so requested. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN1410"></a><span class='Declare_Function'>deparseFromExprForRel</span><span class='Parentheses'>(</span><a href="../../src/include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a> <span class='Declare_Parameter'>buf</span><span class='Delimiter'>, </span><a href="../../src/include/nodes/relation.h.html#LN150"><span class='Ref_to_Struct'>PlannerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>root</span><span class='Delimiter'>, </span><a href="../../src/include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>foreignrel</span><span class='Delimiter'>, 
</span><a name="LN1411"></a>                      <span class='Keyword'>bool </span><span class='Declare_Parameter'>use_alias</span><span class='Delimiter'>, </span><a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>params_list</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1413"></a>    <a href="postgres_fdw.h.html#LN29"><span class='Ref_to_Struct'>PgFdwRelationInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>fpinfo</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="postgres_fdw.h.html#LN29"><span class='Ref_to_Struct'>PgFdwRelationInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN1410"><span class='Ref_to_Parameter'>foreignrel</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/relation.h.html#LN576"><span class='Ref_to_Member'>fdw_private</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../src/include/nodes/relation.h.html#LN509"><span class='Ref_to_Macro'>IS_JOIN_REL</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1410"><span class='Ref_to_Parameter'>foreignrel</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN1417"></a>        <a href="../../src/include/lib/stringinfo.h.html#LN34"><span class='Ref_to_Struct'>StringInfoData</span></a> <span class='Declare_Local'>join_sql_o</span><span class='Delimiter'>; 
</span><a name="LN1418"></a>        <a href="../../src/include/lib/stringinfo.h.html#LN34"><span class='Ref_to_Struct'>StringInfoData</span></a> <span class='Declare_Local'>join_sql_i</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Deparse outer relation */ 
</span>        <a href="../../src/backend/lib/stringinfo.c.html#LN44"><span class='Ref_to_Func'>initStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="deparse.c.html#LN1417"><span class='Ref_To_Local'>join_sql_o</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="deparse.c.html#LN172"><span class='Ref_to_Proto'>deparseRangeTblRef</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="deparse.c.html#LN1417"><span class='Ref_To_Local'>join_sql_o</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1410"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1413"><span class='Ref_To_Local'>fpinfo</span></a><span class='Operator'>-&GT;</span><a href="postgres_fdw.h.html#LN88"><span class='Ref_to_Member'>outerrel</span></a><span class='Delimiter'>, 
</span>                           <a href="deparse.c.html#LN1413"><span class='Ref_To_Local'>fpinfo</span></a><span class='Operator'>-&GT;</span><a href="postgres_fdw.h.html#LN98"><span class='Ref_to_Member'>make_outerrel_subquery</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1411"><span class='Ref_to_Parameter'>params_list</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Deparse inner relation */ 
</span>        <a href="../../src/backend/lib/stringinfo.c.html#LN44"><span class='Ref_to_Func'>initStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="deparse.c.html#LN1418"><span class='Ref_To_Local'>join_sql_i</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="deparse.c.html#LN172"><span class='Ref_to_Proto'>deparseRangeTblRef</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="deparse.c.html#LN1418"><span class='Ref_To_Local'>join_sql_i</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1410"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1413"><span class='Ref_To_Local'>fpinfo</span></a><span class='Operator'>-&GT;</span><a href="postgres_fdw.h.html#LN89"><span class='Ref_to_Member'>innerrel</span></a><span class='Delimiter'>, 
</span>                           <a href="deparse.c.html#LN1413"><span class='Ref_To_Local'>fpinfo</span></a><span class='Operator'>-&GT;</span><a href="postgres_fdw.h.html#LN100"><span class='Ref_to_Member'>make_innerrel_subquery</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1411"><span class='Ref_to_Parameter'>params_list</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * For a join relation FROM clause entry is deparsed as 
         * 
         * ((outer relation) &LT;join type&GT; (inner relation) ON (joinclauses)) 
         */ 
</span>        <a href="../../src/bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1410"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"(%s %s JOIN %s ON "</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN1417"><span class='Ref_To_Local'>join_sql_o</span></a><span class='Operator'>.</span><a href="../../src/include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                       <a href="postgres_fdw.h.html#LN182"><span class='Ref_to_Proto'>get_jointype_name</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1413"><span class='Ref_To_Local'>fpinfo</span></a><span class='Operator'>-&GT;</span><a href="postgres_fdw.h.html#LN90"><span class='Ref_to_Member'>jointype</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN1418"><span class='Ref_To_Local'>join_sql_i</span></a><span class='Operator'>.</span><a href="../../src/include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Append join clause; (TRUE) if no join clause */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN1413"><span class='Ref_To_Local'>fpinfo</span></a><span class='Operator'>-&GT;</span><a href="postgres_fdw.h.html#LN92"><span class='Ref_to_Member'>joinclauses</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN1441"></a>            <a href="deparse.c.html#LN96"><span class='Ref_to_Struct'>deparse_expr_cxt</span></a> <span class='Declare_Local'>context</span><span class='Delimiter'>; 
</span> 
            <a href="deparse.c.html#LN1441"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="deparse.c.html#LN103"><span class='Ref_to_Member'>buf</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN1410"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>; 
</span>            <a href="deparse.c.html#LN1441"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="deparse.c.html#LN99"><span class='Ref_to_Member'>foreignrel</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN1410"><span class='Ref_to_Parameter'>foreignrel</span></a><span class='Delimiter'>; 
</span>            <a href="deparse.c.html#LN1441"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="deparse.c.html#LN100"><span class='Ref_to_Member'>scanrel</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN1410"><span class='Ref_to_Parameter'>foreignrel</span></a><span class='Delimiter'>; 
</span>            <a href="deparse.c.html#LN1441"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="deparse.c.html#LN98"><span class='Ref_to_Member'>root</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN1410"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>; 
</span>            <a href="deparse.c.html#LN1441"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="deparse.c.html#LN104"><span class='Ref_to_Member'>params_list</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN1411"><span class='Ref_to_Parameter'>params_list</span></a><span class='Delimiter'>; 
</span> 
            <a href="../../src/bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1410"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"("</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="deparse.c.html#LN168"><span class='Ref_to_Proto'>appendConditions</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1413"><span class='Ref_To_Local'>fpinfo</span></a><span class='Operator'>-&GT;</span><a href="postgres_fdw.h.html#LN92"><span class='Ref_to_Member'>joinclauses</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="deparse.c.html#LN1441"><span class='Ref_To_Local'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../src/bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1410"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>")"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
            <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1410"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"(TRUE)"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* End the FROM clause entry. */ 
</span>        <a href="../../src/bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1410"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>")"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if IS_JOIN_REL(foreignre... &raquo; </span> 
    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span><a name="LN1461"></a>        <a href="../../src/include/nodes/parsenodes.h.html#LN932"><span class='Ref_to_Struct'>RangeTblEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>rte</span> <span class='Operator'>= </span><a href="../../src/include/nodes/relation.h.html#LN324"><span class='Ref_to_Macro'>planner_rt_fetch</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1410"><span class='Ref_to_Parameter'>foreignrel</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/relation.h.html#LN552"><span class='Ref_to_Member'>relid</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1410"><span class='Ref_to_Parameter'>root</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Core code already has some lock on each rel being planned, so we 
         * can use NoLock here. 
         */ 
</span><a name="LN1467"></a>        <a href="../../src/include/utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a>    <span class='Declare_Local'>rel</span> <span class='Operator'>= </span><a href="../../src/include/access/heapam.h.html#LN91"><span class='Ref_to_Proto'>heap_open</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1461"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/parsenodes.h.html#LN947"><span class='Ref_to_Member'>relid</span></a><span class='Delimiter'>, </span><a href="../../src/include/storage/lockdefs.h.html#LN33"><span class='Ref_to_Const'>NoLock</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="deparse.c.html#LN144"><span class='Ref_to_Proto'>deparseRelation</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1410"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1467"><span class='Ref_To_Local'>rel</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Add a unique alias to avoid any conflict in relation names due to 
         * pulled up subqueries in the query being built for a pushed down 
         * join. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN1411"><span class='Ref_to_Parameter'>use_alias</span></a><span class='Parentheses'>) 
</span>            <a href="../../src/bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1410"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" %s%d"</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN107"><span class='Ref_to_Const'>REL_ALIAS_PREFIX</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1410"><span class='Ref_to_Parameter'>foreignrel</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/relation.h.html#LN552"><span class='Ref_to_Member'>relid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../src/include/access/heapam.h.html#LN96"><span class='Ref_to_Macro'>heap_close</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1467"><span class='Ref_To_Local'>rel</span></a><span class='Delimiter'>, </span><a href="../../src/include/storage/lockdefs.h.html#LN33"><span class='Ref_to_Const'>NoLock</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
<span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end deparseFromExprForRel &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Append FROM clause entry for the given relation into buf. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN1487"></a><span class='Declare_Function'>deparseRangeTblRef</span><span class='Parentheses'>(</span><a href="../../src/include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a> <span class='Declare_Parameter'>buf</span><span class='Delimiter'>, </span><a href="../../src/include/nodes/relation.h.html#LN150"><span class='Ref_to_Struct'>PlannerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>root</span><span class='Delimiter'>, </span><a href="../../src/include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>foreignrel</span><span class='Delimiter'>, 
</span><a name="LN1488"></a>                   <span class='Keyword'>bool </span><span class='Declare_Parameter'>make_subquery</span><span class='Delimiter'>, </span><a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>params_list</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1490"></a>    <a href="postgres_fdw.h.html#LN29"><span class='Ref_to_Struct'>PgFdwRelationInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>fpinfo</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="postgres_fdw.h.html#LN29"><span class='Ref_to_Struct'>PgFdwRelationInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN1487"><span class='Ref_to_Parameter'>foreignrel</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/relation.h.html#LN576"><span class='Ref_to_Member'>fdw_private</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Should only be called in these cases. */ 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="../../src/include/nodes/relation.h.html#LN504"><span class='Ref_to_Macro'>IS_SIMPLE_REL</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1487"><span class='Ref_to_Parameter'>foreignrel</span></a><span class='Parentheses'>) </span><span class='Operator'>|| </span><a href="../../src/include/nodes/relation.h.html#LN509"><span class='Ref_to_Macro'>IS_JOIN_REL</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1487"><span class='Ref_to_Parameter'>foreignrel</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="deparse.c.html#LN1490"><span class='Ref_To_Local'>fpinfo</span></a><span class='Operator'>-&GT;</span><a href="postgres_fdw.h.html#LN43"><span class='Ref_to_Member'>local_conds</span></a> <span class='Operator'>== </span><a href="../../src/include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* If make_subquery is true, deparse the relation as a subquery. */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN1488"><span class='Ref_to_Parameter'>make_subquery</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN1500"></a>        <a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>retrieved_attrs</span><span class='Delimiter'>; 
</span><a name="LN1501"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>ncols</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Deparse the subquery representing the relation. */ 
</span>        <a href="../../src/backend/replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1487"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'('</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="postgres_fdw.h.html#LN174"><span class='Ref_to_Proto'>deparseSelectStmtForRel</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1487"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1487"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1487"><span class='Ref_to_Parameter'>foreignrel</span></a><span class='Delimiter'>, </span><a href="../../src/include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>, 
</span>                                <a href="deparse.c.html#LN1490"><span class='Ref_To_Local'>fpinfo</span></a><span class='Operator'>-&GT;</span><a href="postgres_fdw.h.html#LN42"><span class='Ref_to_Member'>remote_conds</span></a><span class='Delimiter'>, </span><a href="../../src/include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, 
</span>                                <span class='Operator'>&</span><a href="deparse.c.html#LN1500"><span class='Ref_To_Local'>retrieved_attrs</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1488"><span class='Ref_to_Parameter'>params_list</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../src/backend/replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1487"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Append the relation alias. */ 
</span>        <a href="../../src/bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1487"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" %s%d"</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN111"><span class='Ref_to_Const'>SUBQUERY_REL_ALIAS_PREFIX</span></a><span class='Delimiter'>, 
</span>                         <a href="deparse.c.html#LN1490"><span class='Ref_To_Local'>fpinfo</span></a><span class='Operator'>-&GT;</span><a href="postgres_fdw.h.html#LN109"><span class='Ref_to_Member'>relation_index</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Append the column aliases if needed.  Note that the subquery emits 
         * expressions specified in the relation's reltarget (see 
         * deparseSubqueryTargetList). 
         */ 
</span>        <a href="deparse.c.html#LN1501"><span class='Ref_To_Local'>ncols</span></a> <span class='Operator'>= </span><a href="../../src/include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1487"><span class='Ref_to_Parameter'>foreignrel</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/relation.h.html#LN535"><span class='Ref_to_Member'>reltarget</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/relation.h.html#LN882"><span class='Ref_to_Member'>exprs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN1501"><span class='Ref_To_Local'>ncols</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN1522"></a>            <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
            <a href="../../src/backend/replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1487"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'('</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN1522"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; </span><a href="deparse.c.html#LN1522"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT;= </span><a href="deparse.c.html#LN1501"><span class='Ref_To_Local'>ncols</span></a><span class='Delimiter'>; </span><a href="deparse.c.html#LN1522"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN1522"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&GT; </span><span class='Number'>1</span><span class='Parentheses'>) 
</span>                    <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1487"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>", "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <a href="../../src/bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1487"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"%s%d"</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN112"><span class='Ref_to_Const'>SUBQUERY_COL_ALIAS_PREFIX</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1522"><span class='Ref_To_Local'>i</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <a href="../../src/backend/replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1487"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if make_subquery &raquo; </span> 
    <span class='Control'>else</span> 
        <a href="deparse.c.html#LN169"><span class='Ref_to_Proto'>deparseFromExprForRel</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1487"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1487"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1487"><span class='Ref_to_Parameter'>foreignrel</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN1488"><span class='Ref_to_Parameter'>params_list</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end deparseRangeTblRef &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * deparse remote INSERT statement 
 * 
 * The statement text is appended to buf, and we also create an integer List 
 * of the columns being retrieved by RETURNING (if any), which is returned 
 * to *retrieved_attrs. 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN1547"></a><span class='Declare_Function'>deparseInsertSql</span><span class='Parentheses'>(</span><a href="../../src/include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a> <span class='Declare_Parameter'>buf</span><span class='Delimiter'>, </span><a href="../../src/include/nodes/relation.h.html#LN150"><span class='Ref_to_Struct'>PlannerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>root</span><span class='Delimiter'>, 
</span><a name="LN1548"></a>                 <a href="../../src/include/c.h.html#LN364"><span class='Ref_to_Typedef'>Index</span></a> <span class='Declare_Parameter'>rtindex</span><span class='Delimiter'>, </span><a href="../../src/include/utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a> <span class='Declare_Parameter'>rel</span><span class='Delimiter'>, 
</span><a name="LN1549"></a>                 <a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>targetAttrs</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>doNothing</span><span class='Delimiter'>, 
</span><a name="LN1550"></a>                 <a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>returningList</span><span class='Delimiter'>, </span><a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>retrieved_attrs</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1552"></a>    <a href="../../src/include/access/attnum.h.html#LN20"><span class='Ref_to_Typedef'>AttrNumber</span></a>  <span class='Declare_Local'>pindex</span><span class='Delimiter'>; 
</span><a name="LN1553"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>first</span><span class='Delimiter'>; 
</span><a name="LN1554"></a>    <a href="../../src/include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc</span><span class='Delimiter'>; 
</span> 
    <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1547"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"INSERT INTO "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="deparse.c.html#LN144"><span class='Ref_to_Proto'>deparseRelation</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1547"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1548"><span class='Ref_to_Parameter'>rel</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN1549"><span class='Ref_to_Parameter'>targetAttrs</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../src/backend/replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1547"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'('</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="deparse.c.html#LN1553"><span class='Ref_To_Local'>first</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>        <a href="../../src/include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1554"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1549"><span class='Ref_to_Parameter'>targetAttrs</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN1566"></a>            <span class='Keyword'>int</span>         <span class='Declare_Local'>attnum</span> <span class='Operator'>= </span><a href="../../src/include/nodes/pg_list.h.html#LN106"><span class='Ref_to_Macro'>lfirst_int</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1554"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="deparse.c.html#LN1553"><span class='Ref_To_Local'>first</span></a><span class='Parentheses'>) 
</span>                <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1547"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>", "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="deparse.c.html#LN1553"><span class='Ref_To_Local'>first</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
            <a href="deparse.c.html#LN142"><span class='Ref_to_Proto'>deparseColumnRef</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1547"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1548"><span class='Ref_to_Parameter'>rtindex</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1566"><span class='Ref_To_Local'>attnum</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1547"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1547"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>") VALUES ("</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="deparse.c.html#LN1552"><span class='Ref_To_Local'>pindex</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <a href="deparse.c.html#LN1553"><span class='Ref_To_Local'>first</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>        <a href="../../src/include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1554"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1549"><span class='Ref_to_Parameter'>targetAttrs</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="deparse.c.html#LN1553"><span class='Ref_To_Local'>first</span></a><span class='Parentheses'>) 
</span>                <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1547"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>", "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="deparse.c.html#LN1553"><span class='Ref_To_Local'>first</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
            <a href="../../src/bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1547"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"$%d"</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN1552"><span class='Ref_To_Local'>pindex</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="deparse.c.html#LN1552"><span class='Ref_To_Local'>pindex</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <a href="../../src/backend/replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1547"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if targetAttrs &raquo; </span> 
    <span class='Control'>else</span> 
        <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1547"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" DEFAULT VALUES"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN1549"><span class='Ref_to_Parameter'>doNothing</span></a><span class='Parentheses'>) 
</span>        <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1547"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" ON CONFLICT DO NOTHING"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="deparse.c.html#LN137"><span class='Ref_to_Proto'>deparseReturningList</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1547"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1547"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1548"><span class='Ref_to_Parameter'>rtindex</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1548"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>, 
</span>                       <a href="deparse.c.html#LN1548"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/utils/rel.h.html#LN119"><span class='Ref_to_Member'>trigdesc</span></a> <span class='Operator'>&& </span><a href="deparse.c.html#LN1548"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/utils/rel.h.html#LN119"><span class='Ref_to_Member'>trigdesc</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/utils/reltrigger.h.html#LN55"><span class='Ref_to_Member'>trig_insert_after_row</span></a><span class='Delimiter'>, 
</span>                         <a href="deparse.c.html#LN1550"><span class='Ref_to_Parameter'>returningList</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1550"><span class='Ref_to_Parameter'>retrieved_attrs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end deparseInsertSql &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * deparse remote UPDATE statement 
 * 
 * The statement text is appended to buf, and we also create an integer List 
 * of the columns being retrieved by RETURNING (if any), which is returned 
 * to *retrieved_attrs. 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN1610"></a><span class='Declare_Function'>deparseUpdateSql</span><span class='Parentheses'>(</span><a href="../../src/include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a> <span class='Declare_Parameter'>buf</span><span class='Delimiter'>, </span><a href="../../src/include/nodes/relation.h.html#LN150"><span class='Ref_to_Struct'>PlannerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>root</span><span class='Delimiter'>, 
</span><a name="LN1611"></a>                 <a href="../../src/include/c.h.html#LN364"><span class='Ref_to_Typedef'>Index</span></a> <span class='Declare_Parameter'>rtindex</span><span class='Delimiter'>, </span><a href="../../src/include/utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a> <span class='Declare_Parameter'>rel</span><span class='Delimiter'>, 
</span><a name="LN1612"></a>                 <a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>targetAttrs</span><span class='Delimiter'>, </span><a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>returningList</span><span class='Delimiter'>, 
</span><a name="LN1613"></a>                 <a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>retrieved_attrs</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1615"></a>    <a href="../../src/include/access/attnum.h.html#LN20"><span class='Ref_to_Typedef'>AttrNumber</span></a>  <span class='Declare_Local'>pindex</span><span class='Delimiter'>; 
</span><a name="LN1616"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>first</span><span class='Delimiter'>; 
</span><a name="LN1617"></a>    <a href="../../src/include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc</span><span class='Delimiter'>; 
</span> 
    <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1610"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"UPDATE "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="deparse.c.html#LN144"><span class='Ref_to_Proto'>deparseRelation</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1610"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1611"><span class='Ref_to_Parameter'>rel</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1610"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" SET "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="deparse.c.html#LN1615"><span class='Ref_To_Local'>pindex</span></a> <span class='Operator'>= </span><span class='Number'>2</span><span class='Delimiter'>;</span>                 <span class='Comment_Single_Line'>/* ctid is always the first param */ 
</span>    <a href="deparse.c.html#LN1616"><span class='Ref_To_Local'>first</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <a href="../../src/include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1617"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1612"><span class='Ref_to_Parameter'>targetAttrs</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN1627"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>attnum</span> <span class='Operator'>= </span><a href="../../src/include/nodes/pg_list.h.html#LN106"><span class='Ref_to_Macro'>lfirst_int</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1617"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="deparse.c.html#LN1616"><span class='Ref_To_Local'>first</span></a><span class='Parentheses'>) 
</span>            <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1610"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>", "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="deparse.c.html#LN1616"><span class='Ref_To_Local'>first</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
        <a href="deparse.c.html#LN142"><span class='Ref_to_Proto'>deparseColumnRef</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1610"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1611"><span class='Ref_to_Parameter'>rtindex</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1627"><span class='Ref_To_Local'>attnum</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1610"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../src/bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1610"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" = $%d"</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN1615"><span class='Ref_To_Local'>pindex</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="deparse.c.html#LN1615"><span class='Ref_To_Local'>pindex</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1610"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" WHERE ctid = $1"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="deparse.c.html#LN137"><span class='Ref_to_Proto'>deparseReturningList</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1610"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1610"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1611"><span class='Ref_to_Parameter'>rtindex</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1611"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>, 
</span>                       <a href="deparse.c.html#LN1611"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/utils/rel.h.html#LN119"><span class='Ref_to_Member'>trigdesc</span></a> <span class='Operator'>&& </span><a href="deparse.c.html#LN1611"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/utils/rel.h.html#LN119"><span class='Ref_to_Member'>trigdesc</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/utils/reltrigger.h.html#LN60"><span class='Ref_to_Member'>trig_update_after_row</span></a><span class='Delimiter'>, 
</span>                         <a href="deparse.c.html#LN1612"><span class='Ref_to_Parameter'>returningList</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1613"><span class='Ref_to_Parameter'>retrieved_attrs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end deparseUpdateSql &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * deparse remote UPDATE statement 
 * 
 * The statement text is appended to buf, and we also create an integer List 
 * of the columns being retrieved by RETURNING (if any), which is returned 
 * to *retrieved_attrs. 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN1652"></a><span class='Declare_Function'>deparseDirectUpdateSql</span><span class='Parentheses'>(</span><a href="../../src/include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a> <span class='Declare_Parameter'>buf</span><span class='Delimiter'>, </span><a href="../../src/include/nodes/relation.h.html#LN150"><span class='Ref_to_Struct'>PlannerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>root</span><span class='Delimiter'>, 
</span><a name="LN1653"></a>                       <a href="../../src/include/c.h.html#LN364"><span class='Ref_to_Typedef'>Index</span></a> <span class='Declare_Parameter'>rtindex</span><span class='Delimiter'>, </span><a href="../../src/include/utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a> <span class='Declare_Parameter'>rel</span><span class='Delimiter'>, 
</span><a name="LN1654"></a>                       <a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>targetlist</span><span class='Delimiter'>, 
</span><a name="LN1655"></a>                       <a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>targetAttrs</span><span class='Delimiter'>, 
</span><a name="LN1656"></a>                       <a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>remote_conds</span><span class='Delimiter'>, 
</span><a name="LN1657"></a>                       <a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>params_list</span><span class='Delimiter'>, 
</span><a name="LN1658"></a>                       <a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>returningList</span><span class='Delimiter'>, 
</span><a name="LN1659"></a>                       <a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>retrieved_attrs</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1661"></a>    <a href="../../src/include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>baserel</span> <span class='Operator'>= </span><a href="deparse.c.html#LN1652"><span class='Ref_to_Parameter'>root</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/relation.h.html#LN178"><span class='Ref_to_Member'>simple_rel_array</span></a><span class='Delimiter'>[</span><a href="deparse.c.html#LN1653"><span class='Ref_to_Parameter'>rtindex</span></a><span class='Delimiter'>]; 
</span><a name="LN1662"></a>    <a href="deparse.c.html#LN96"><span class='Ref_to_Struct'>deparse_expr_cxt</span></a> <span class='Declare_Local'>context</span><span class='Delimiter'>; 
</span><a name="LN1663"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>nestlevel</span><span class='Delimiter'>; 
</span><a name="LN1664"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>first</span><span class='Delimiter'>; 
</span><a name="LN1665"></a>    <a href="../../src/include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Set up context struct for recursion */ 
</span>    <a href="deparse.c.html#LN1662"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="deparse.c.html#LN98"><span class='Ref_to_Member'>root</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN1652"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>; 
</span>    <a href="deparse.c.html#LN1662"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="deparse.c.html#LN99"><span class='Ref_to_Member'>foreignrel</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN1661"><span class='Ref_To_Local'>baserel</span></a><span class='Delimiter'>; 
</span>    <a href="deparse.c.html#LN1662"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="deparse.c.html#LN100"><span class='Ref_to_Member'>scanrel</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN1661"><span class='Ref_To_Local'>baserel</span></a><span class='Delimiter'>; 
</span>    <a href="deparse.c.html#LN1662"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="deparse.c.html#LN103"><span class='Ref_to_Member'>buf</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN1652"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>; 
</span>    <a href="deparse.c.html#LN1662"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="deparse.c.html#LN104"><span class='Ref_to_Member'>params_list</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN1657"><span class='Ref_to_Parameter'>params_list</span></a><span class='Delimiter'>; 
</span> 
    <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1652"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"UPDATE "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="deparse.c.html#LN144"><span class='Ref_to_Proto'>deparseRelation</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1652"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1653"><span class='Ref_to_Parameter'>rel</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1652"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" SET "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Make sure any constants in the exprs are printed portably */ 
</span>    <a href="deparse.c.html#LN1663"><span class='Ref_To_Local'>nestlevel</span></a> <span class='Operator'>= </span><a href="postgres_fdw.h.html#LN113"><span class='Ref_to_Proto'>set_transmission_modes</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="deparse.c.html#LN1664"><span class='Ref_To_Local'>first</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <a href="../../src/include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1665"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1655"><span class='Ref_to_Parameter'>targetAttrs</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN1684"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>attnum</span> <span class='Operator'>= </span><a href="../../src/include/nodes/pg_list.h.html#LN106"><span class='Ref_to_Macro'>lfirst_int</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1665"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1685"></a>        <a href="../../src/include/nodes/primnodes.h.html#LN1363"><span class='Ref_to_Struct'>TargetEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>tle</span> <span class='Operator'>= </span><a href="../../src/include/parser/parsetree.h.html#LN69"><span class='Ref_to_Proto'>get_tle_by_resno</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1654"><span class='Ref_to_Parameter'>targetlist</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1684"><span class='Ref_To_Local'>attnum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="deparse.c.html#LN1685"><span class='Ref_To_Local'>tle</span></a><span class='Parentheses'>) 
</span>            <a href="../../src/backend/bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../src/include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"attribute number %d not found in UPDATE targetlist"</span><span class='Delimiter'>, 
</span>                 <a href="deparse.c.html#LN1684"><span class='Ref_To_Local'>attnum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="deparse.c.html#LN1664"><span class='Ref_To_Local'>first</span></a><span class='Parentheses'>) 
</span>            <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1652"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>", "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="deparse.c.html#LN1664"><span class='Ref_To_Local'>first</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
        <a href="deparse.c.html#LN142"><span class='Ref_to_Proto'>deparseColumnRef</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1652"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1653"><span class='Ref_to_Parameter'>rtindex</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1684"><span class='Ref_To_Local'>attnum</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1652"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1652"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" = "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="deparse.c.html#LN145"><span class='Ref_to_Proto'>deparseExpr</span></a><span class='Parentheses'>((</span><a href="../../src/include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN1685"><span class='Ref_To_Local'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN1366"><span class='Ref_to_Member'>expr</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="deparse.c.html#LN1662"><span class='Ref_To_Local'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="postgres_fdw.h.html#LN114"><span class='Ref_to_Proto'>reset_transmission_modes</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1663"><span class='Ref_To_Local'>nestlevel</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN1656"><span class='Ref_to_Parameter'>remote_conds</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../src/bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1652"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" WHERE "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="deparse.c.html#LN168"><span class='Ref_to_Proto'>appendConditions</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1656"><span class='Ref_to_Parameter'>remote_conds</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="deparse.c.html#LN1662"><span class='Ref_To_Local'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="deparse.c.html#LN137"><span class='Ref_to_Proto'>deparseReturningList</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1652"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1652"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1653"><span class='Ref_to_Parameter'>rtindex</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1653"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, 
</span>                         <a href="deparse.c.html#LN1658"><span class='Ref_to_Parameter'>returningList</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1659"><span class='Ref_to_Parameter'>retrieved_attrs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end deparseDirectUpdateSql &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * deparse remote DELETE statement 
 * 
 * The statement text is appended to buf, and we also create an integer List 
 * of the columns being retrieved by RETURNING (if any), which is returned 
 * to *retrieved_attrs. 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN1720"></a><span class='Declare_Function'>deparseDeleteSql</span><span class='Parentheses'>(</span><a href="../../src/include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a> <span class='Declare_Parameter'>buf</span><span class='Delimiter'>, </span><a href="../../src/include/nodes/relation.h.html#LN150"><span class='Ref_to_Struct'>PlannerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>root</span><span class='Delimiter'>, 
</span><a name="LN1721"></a>                 <a href="../../src/include/c.h.html#LN364"><span class='Ref_to_Typedef'>Index</span></a> <span class='Declare_Parameter'>rtindex</span><span class='Delimiter'>, </span><a href="../../src/include/utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a> <span class='Declare_Parameter'>rel</span><span class='Delimiter'>, 
</span><a name="LN1722"></a>                 <a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>returningList</span><span class='Delimiter'>, 
</span><a name="LN1723"></a>                 <a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>retrieved_attrs</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1720"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"DELETE FROM "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="deparse.c.html#LN144"><span class='Ref_to_Proto'>deparseRelation</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1720"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1721"><span class='Ref_to_Parameter'>rel</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1720"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" WHERE ctid = $1"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="deparse.c.html#LN137"><span class='Ref_to_Proto'>deparseReturningList</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1720"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1720"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1721"><span class='Ref_to_Parameter'>rtindex</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1721"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>, 
</span>                       <a href="deparse.c.html#LN1721"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/utils/rel.h.html#LN119"><span class='Ref_to_Member'>trigdesc</span></a> <span class='Operator'>&& </span><a href="deparse.c.html#LN1721"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/utils/rel.h.html#LN119"><span class='Ref_to_Member'>trigdesc</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/utils/reltrigger.h.html#LN65"><span class='Ref_to_Member'>trig_delete_after_row</span></a><span class='Delimiter'>, 
</span>                         <a href="deparse.c.html#LN1722"><span class='Ref_to_Parameter'>returningList</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1723"><span class='Ref_to_Parameter'>retrieved_attrs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * deparse remote DELETE statement 
 * 
 * The statement text is appended to buf, and we also create an integer List 
 * of the columns being retrieved by RETURNING (if any), which is returned 
 * to *retrieved_attrs. 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN1742"></a><span class='Declare_Function'>deparseDirectDeleteSql</span><span class='Parentheses'>(</span><a href="../../src/include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a> <span class='Declare_Parameter'>buf</span><span class='Delimiter'>, </span><a href="../../src/include/nodes/relation.h.html#LN150"><span class='Ref_to_Struct'>PlannerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>root</span><span class='Delimiter'>, 
</span><a name="LN1743"></a>                       <a href="../../src/include/c.h.html#LN364"><span class='Ref_to_Typedef'>Index</span></a> <span class='Declare_Parameter'>rtindex</span><span class='Delimiter'>, </span><a href="../../src/include/utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a> <span class='Declare_Parameter'>rel</span><span class='Delimiter'>, 
</span><a name="LN1744"></a>                       <a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>remote_conds</span><span class='Delimiter'>, 
</span><a name="LN1745"></a>                       <a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>params_list</span><span class='Delimiter'>, 
</span><a name="LN1746"></a>                       <a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>returningList</span><span class='Delimiter'>, 
</span><a name="LN1747"></a>                       <a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>retrieved_attrs</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1749"></a>    <a href="../../src/include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>baserel</span> <span class='Operator'>= </span><a href="deparse.c.html#LN1742"><span class='Ref_to_Parameter'>root</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/relation.h.html#LN178"><span class='Ref_to_Member'>simple_rel_array</span></a><span class='Delimiter'>[</span><a href="deparse.c.html#LN1743"><span class='Ref_to_Parameter'>rtindex</span></a><span class='Delimiter'>]; 
</span><a name="LN1750"></a>    <a href="deparse.c.html#LN96"><span class='Ref_to_Struct'>deparse_expr_cxt</span></a> <span class='Declare_Local'>context</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Set up context struct for recursion */ 
</span>    <a href="deparse.c.html#LN1750"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="deparse.c.html#LN98"><span class='Ref_to_Member'>root</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN1742"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>; 
</span>    <a href="deparse.c.html#LN1750"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="deparse.c.html#LN99"><span class='Ref_to_Member'>foreignrel</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN1749"><span class='Ref_To_Local'>baserel</span></a><span class='Delimiter'>; 
</span>    <a href="deparse.c.html#LN1750"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="deparse.c.html#LN100"><span class='Ref_to_Member'>scanrel</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN1749"><span class='Ref_To_Local'>baserel</span></a><span class='Delimiter'>; 
</span>    <a href="deparse.c.html#LN1750"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="deparse.c.html#LN103"><span class='Ref_to_Member'>buf</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN1742"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>; 
</span>    <a href="deparse.c.html#LN1750"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="deparse.c.html#LN104"><span class='Ref_to_Member'>params_list</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN1745"><span class='Ref_to_Parameter'>params_list</span></a><span class='Delimiter'>; 
</span> 
    <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1742"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"DELETE FROM "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="deparse.c.html#LN144"><span class='Ref_to_Proto'>deparseRelation</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1742"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1743"><span class='Ref_to_Parameter'>rel</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN1744"><span class='Ref_to_Parameter'>remote_conds</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../src/bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1742"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" WHERE "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="deparse.c.html#LN168"><span class='Ref_to_Proto'>appendConditions</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1744"><span class='Ref_to_Parameter'>remote_conds</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="deparse.c.html#LN1750"><span class='Ref_To_Local'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="deparse.c.html#LN137"><span class='Ref_to_Proto'>deparseReturningList</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1742"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1742"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1743"><span class='Ref_to_Parameter'>rtindex</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1743"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, 
</span>                         <a href="deparse.c.html#LN1746"><span class='Ref_to_Parameter'>returningList</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1747"><span class='Ref_to_Parameter'>retrieved_attrs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end deparseDirectDeleteSql &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Add a RETURNING clause, if needed, to an INSERT/UPDATE/DELETE. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN1776"></a><span class='Declare_Function'>deparseReturningList</span><span class='Parentheses'>(</span><a href="../../src/include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a> <span class='Declare_Parameter'>buf</span><span class='Delimiter'>, </span><a href="../../src/include/nodes/relation.h.html#LN150"><span class='Ref_to_Struct'>PlannerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>root</span><span class='Delimiter'>, 
</span><a name="LN1777"></a>                     <a href="../../src/include/c.h.html#LN364"><span class='Ref_to_Typedef'>Index</span></a> <span class='Declare_Parameter'>rtindex</span><span class='Delimiter'>, </span><a href="../../src/include/utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a> <span class='Declare_Parameter'>rel</span><span class='Delimiter'>, 
</span><a name="LN1778"></a>                     <span class='Keyword'>bool </span><span class='Declare_Parameter'>trig_after_row</span><span class='Delimiter'>, 
</span><a name="LN1779"></a>                     <a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>returningList</span><span class='Delimiter'>, 
</span><a name="LN1780"></a>                     <a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>retrieved_attrs</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1782"></a>    <a href="../../src/include/nodes/bitmapset.h.html#LN36"><span class='Ref_to_Struct'>Bitmapset</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>attrs_used</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN1778"><span class='Ref_to_Parameter'>trig_after_row</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* whole-row reference acquires all non-system columns */ 
</span>        <a href="deparse.c.html#LN1782"><span class='Ref_To_Local'>attrs_used</span></a> <span class='Operator'>= 
</span>            <a href="../../src/include/nodes/bitmapset.h.html#LN67"><span class='Ref_to_Proto'>bms_make_singleton</span></a><span class='Parentheses'>(</span><span class='Number'>0</span> <span class='Operator'>- </span><a href="../../src/include/access/sysattr.h.html#LN27"><span class='Ref_to_Const'>FirstLowInvalidHeapAttributeNumber</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN1779"><span class='Ref_to_Parameter'>returningList</span></a> <span class='Operator'>!= </span><a href="../../src/include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * We need the attrs, non-system and system, mentioned in the local 
         * query's RETURNING list. 
         */ 
</span>        <a href="../../src/include/optimizer/var.h.html#LN31"><span class='Ref_to_Proto'>pull_varattnos</span></a><span class='Parentheses'>((</span><a href="../../src/include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN1779"><span class='Ref_to_Parameter'>returningList</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1777"><span class='Ref_to_Parameter'>rtindex</span></a><span class='Delimiter'>, 
</span>                       <span class='Operator'>&</span><a href="deparse.c.html#LN1782"><span class='Ref_To_Local'>attrs_used</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN1782"><span class='Ref_To_Local'>attrs_used</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="deparse.c.html#LN126"><span class='Ref_to_Proto'>deparseTargetList</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1776"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1776"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1777"><span class='Ref_to_Parameter'>rtindex</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1777"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN1782"><span class='Ref_To_Local'>attrs_used</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, 
</span>                          <a href="deparse.c.html#LN1780"><span class='Ref_to_Parameter'>retrieved_attrs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <span class='Operator'>*</span><a href="deparse.c.html#LN1780"><span class='Ref_to_Parameter'>retrieved_attrs</span></a> <span class='Operator'>= </span><a href="../../src/include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end deparseReturningList &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Construct SELECT statement to acquire size in blocks of given relation. 
 * 
 * Note: we use local definition of block size, not remote definition. 
 * This is perhaps debatable. 
 * 
 * Note: pg_relation_size() exists in 8.1 and later. 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN1817"></a><span class='Declare_Function'>deparseAnalyzeSizeSql</span><span class='Parentheses'>(</span><a href="../../src/include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a> <span class='Declare_Parameter'>buf</span><span class='Delimiter'>, </span><a href="../../src/include/utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a> <span class='Declare_Parameter'>rel</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1819"></a>    <a href="../../src/include/lib/stringinfo.h.html#LN34"><span class='Ref_to_Struct'>StringInfoData</span></a> <span class='Declare_Local'>relname</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* We'll need the remote relation name as a literal. */ 
</span>    <a href="../../src/backend/lib/stringinfo.c.html#LN44"><span class='Ref_to_Func'>initStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="deparse.c.html#LN1819"><span class='Ref_To_Local'>relname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="deparse.c.html#LN144"><span class='Ref_to_Proto'>deparseRelation</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="deparse.c.html#LN1819"><span class='Ref_To_Local'>relname</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1817"><span class='Ref_to_Parameter'>rel</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1817"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT pg_catalog.pg_relation_size("</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="postgres_fdw.h.html#LN171"><span class='Ref_to_Proto'>deparseStringLiteral</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1817"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1819"><span class='Ref_To_Local'>relname</span></a><span class='Operator'>.</span><a href="../../src/include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../src/bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1817"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"::pg_catalog.regclass) / %d"</span><span class='Delimiter'>, </span>BLCKSZ<span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Construct SELECT statement to acquire sample rows of given relation. 
 * 
 * SELECT command is appended to buf, and list of columns retrieved 
 * is returned to *retrieved_attrs. 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN1837"></a><span class='Declare_Function'>deparseAnalyzeSql</span><span class='Parentheses'>(</span><a href="../../src/include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a> <span class='Declare_Parameter'>buf</span><span class='Delimiter'>, </span><a href="../../src/include/utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a> <span class='Declare_Parameter'>rel</span><span class='Delimiter'>, </span><a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>retrieved_attrs</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1839"></a>    <a href="../../src/include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>relid</span> <span class='Operator'>= </span><a href="../../src/include/utils/rel.h.html#LN416"><span class='Ref_to_Macro'>RelationGetRelid</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1837"><span class='Ref_to_Parameter'>rel</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1840"></a>    <a href="../../src/include/access/tupdesc.h.html#LN70"><span class='Ref_to_Typedef'>TupleDesc</span></a>   <span class='Declare_Local'>tupdesc</span> <span class='Operator'>= </span><a href="../../src/include/utils/rel.h.html#LN428"><span class='Ref_to_Macro'>RelationGetDescr</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1837"><span class='Ref_to_Parameter'>rel</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1841"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN1842"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>colname</span><span class='Delimiter'>; 
</span><a name="LN1843"></a>    <a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>options</span><span class='Delimiter'>; 
</span><a name="LN1844"></a>    <a href="../../src/include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc</span><span class='Delimiter'>; 
</span><a name="LN1845"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>first</span> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
    <span class='Operator'>*</span><a href="deparse.c.html#LN1837"><span class='Ref_to_Parameter'>retrieved_attrs</span></a> <span class='Operator'>= </span><a href="../../src/include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span> 
    <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1837"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN1841"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="deparse.c.html#LN1841"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="deparse.c.html#LN1840"><span class='Ref_To_Local'>tupdesc</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/access/tupdesc.h.html#LN72"><span class='Ref_to_Member'>natts</span></a><span class='Delimiter'>; </span><a href="deparse.c.html#LN1841"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Ignore dropped columns. */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN1840"><span class='Ref_To_Local'>tupdesc</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="deparse.c.html#LN1841"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attisdropped<span class='Parentheses'>) 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="deparse.c.html#LN1845"><span class='Ref_To_Local'>first</span></a><span class='Parentheses'>) 
</span>            <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1837"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>", "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="deparse.c.html#LN1845"><span class='Ref_To_Local'>first</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Use attribute name or column_name option. */ 
</span>        <a href="deparse.c.html#LN1842"><span class='Ref_To_Local'>colname</span></a> <span class='Operator'>= </span><a href="../../src/include/c.h.html#LN498"><span class='Ref_to_Macro'>NameStr</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1840"><span class='Ref_To_Local'>tupdesc</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="deparse.c.html#LN1841"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attname<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="deparse.c.html#LN1843"><span class='Ref_To_Local'>options</span></a> <span class='Operator'>= </span><a href="../../src/include/foreign/foreign.h.html#LN79"><span class='Ref_to_Proto'>GetForeignColumnOptions</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1839"><span class='Ref_To_Local'>relid</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1841"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../src/include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1844"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1843"><span class='Ref_To_Local'>options</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN1866"></a>            <a href="../../src/include/nodes/parsenodes.h.html#LN715"><span class='Ref_to_Struct'>DefElem</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>def</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../src/include/nodes/parsenodes.h.html#LN715"><span class='Ref_to_Struct'>DefElem</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../src/include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1844"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="deparse.c.html#LN1866"><span class='Ref_To_Local'>def</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/parsenodes.h.html#LN719"><span class='Ref_to_Member'>defname</span></a><span class='Delimiter'>, </span><span class='String'>"column_name"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <span class='Delimiter'>{ 
</span>                <a href="deparse.c.html#LN1842"><span class='Ref_To_Local'>colname</span></a> <span class='Operator'>= </span><a href="../../src/backend/commands/define.c.html#LN47"><span class='Ref_to_Func'>defGetString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1866"><span class='Ref_To_Local'>def</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>} 
</span> 
        <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1837"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><a href="../../src/include/utils/builtins.h.html#LN77"><span class='Ref_to_Proto'>quote_identifier</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1842"><span class='Ref_To_Local'>colname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <span class='Operator'>*</span><a href="deparse.c.html#LN1837"><span class='Ref_to_Parameter'>retrieved_attrs</span></a> <span class='Operator'>= </span><a href="../../src/backend/nodes/list.c.html#LN144"><span class='Ref_to_Func'>lappend_int</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="deparse.c.html#LN1837"><span class='Ref_to_Parameter'>retrieved_attrs</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1841"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;tupdesc-&GT;natts;... &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* Don't generate bad syntax for zero-column relation. */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN1845"><span class='Ref_To_Local'>first</span></a><span class='Parentheses'>) 
</span>        <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1837"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"NULL"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Construct FROM clause 
     */ 
</span>    <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1837"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" FROM "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="deparse.c.html#LN144"><span class='Ref_to_Proto'>deparseRelation</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1837"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1837"><span class='Ref_to_Parameter'>rel</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end deparseAnalyzeSql &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Construct name to use for given column, and emit it into buf. 
 * If it has a column_name FDW option, use that instead of attribute name. 
 * 
 * If qualify_col is true, qualify column name with the alias of relation. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN1898"></a><span class='Declare_Function'>deparseColumnRef</span><span class='Parentheses'>(</span><a href="../../src/include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a> <span class='Declare_Parameter'>buf</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>varno</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>varattno</span><span class='Delimiter'>, </span><a href="../../src/include/nodes/relation.h.html#LN150"><span class='Ref_to_Struct'>PlannerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>root</span><span class='Delimiter'>, 
</span><a name="LN1899"></a>                 <span class='Keyword'>bool </span><span class='Declare_Parameter'>qualify_col</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1901"></a>    <a href="../../src/include/nodes/parsenodes.h.html#LN932"><span class='Ref_to_Struct'>RangeTblEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>rte</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* We support fetching the remote side's CTID and OID. */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN1898"><span class='Ref_to_Parameter'>varattno</span></a> <span class='Operator'>== </span><a href="../../src/include/access/sysattr.h.html#LN20"><span class='Ref_to_Const'>SelfItemPointerAttributeNumber</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN1899"><span class='Ref_to_Parameter'>qualify_col</span></a><span class='Parentheses'>) 
</span>            <a href="deparse.c.html#LN109"><span class='Ref_to_Macro'>ADD_REL_QUALIFIER</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1898"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1898"><span class='Ref_to_Parameter'>varno</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1898"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"ctid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN1898"><span class='Ref_to_Parameter'>varattno</span></a> <span class='Operator'>== </span><a href="../../src/include/access/sysattr.h.html#LN21"><span class='Ref_to_Const'>ObjectIdAttributeNumber</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN1899"><span class='Ref_to_Parameter'>qualify_col</span></a><span class='Parentheses'>) 
</span>            <a href="deparse.c.html#LN109"><span class='Ref_to_Macro'>ADD_REL_QUALIFIER</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1898"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1898"><span class='Ref_to_Parameter'>varno</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1898"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"oid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN1898"><span class='Ref_to_Parameter'>varattno</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * All other system attributes are fetched as 0, except for table OID, 
         * which is fetched as the local table OID.  However, we must be 
         * careful; the table could be beneath an outer join, in which case it 
         * must go to NULL whenever the rest of the row does. 
         */ 
</span><a name="LN1924"></a>        <a href="../../src/include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>fetchval</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN1898"><span class='Ref_to_Parameter'>varattno</span></a> <span class='Operator'>== </span><a href="../../src/include/access/sysattr.h.html#LN26"><span class='Ref_to_Const'>TableOidAttributeNumber</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="deparse.c.html#LN1901"><span class='Ref_To_Local'>rte</span></a> <span class='Operator'>= </span><a href="../../src/include/nodes/relation.h.html#LN324"><span class='Ref_to_Macro'>planner_rt_fetch</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1898"><span class='Ref_to_Parameter'>varno</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1898"><span class='Ref_to_Parameter'>root</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="deparse.c.html#LN1924"><span class='Ref_To_Local'>fetchval</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN1901"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/parsenodes.h.html#LN947"><span class='Ref_to_Member'>relid</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN1899"><span class='Ref_to_Parameter'>qualify_col</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1898"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"CASE WHEN ("</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="deparse.c.html#LN109"><span class='Ref_to_Macro'>ADD_REL_QUALIFIER</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1898"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1898"><span class='Ref_to_Parameter'>varno</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../src/bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1898"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"*)::text IS NOT NULL THEN %u END"</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN1924"><span class='Ref_To_Local'>fetchval</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
            <a href="../../src/bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1898"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"%u"</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN1924"><span class='Ref_To_Local'>fetchval</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if varattno&LT;0 &raquo; </span> 
    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN1898"><span class='Ref_to_Parameter'>varattno</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Whole row reference */ 
</span><a name="LN1944"></a>        <a href="../../src/include/utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a>    <span class='Declare_Local'>rel</span><span class='Delimiter'>; 
</span><a name="LN1945"></a>        <a href="../../src/include/nodes/bitmapset.h.html#LN36"><span class='Ref_to_Struct'>Bitmapset</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>attrs_used</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Required only to be passed down to deparseTargetList(). */ 
</span><a name="LN1948"></a>        <a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>retrieved_attrs</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Get RangeTblEntry from array in PlannerInfo. */ 
</span>        <a href="deparse.c.html#LN1901"><span class='Ref_To_Local'>rte</span></a> <span class='Operator'>= </span><a href="../../src/include/nodes/relation.h.html#LN324"><span class='Ref_to_Macro'>planner_rt_fetch</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1898"><span class='Ref_to_Parameter'>varno</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1898"><span class='Ref_to_Parameter'>root</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * The lock on the relation will be held by upper callers, so it's 
         * fine to open it with no lock here. 
         */ 
</span>        <a href="deparse.c.html#LN1944"><span class='Ref_To_Local'>rel</span></a> <span class='Operator'>= </span><a href="../../src/include/access/heapam.h.html#LN91"><span class='Ref_to_Proto'>heap_open</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1901"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/parsenodes.h.html#LN947"><span class='Ref_to_Member'>relid</span></a><span class='Delimiter'>, </span><a href="../../src/include/storage/lockdefs.h.html#LN33"><span class='Ref_to_Const'>NoLock</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * The local name of the foreign table can not be recognized by the 
         * foreign server and the table it references on foreign server might 
         * have different column ordering or different columns than those 
         * declared locally. Hence we have to deparse whole-row reference as 
         * ROW(columns referenced locally). Construct this by deparsing a 
         * "whole row" attribute. 
         */ 
</span>        <a href="deparse.c.html#LN1945"><span class='Ref_To_Local'>attrs_used</span></a> <span class='Operator'>= </span><a href="../../src/include/nodes/bitmapset.h.html#LN89"><span class='Ref_to_Proto'>bms_add_member</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                                    <span class='Number'>0</span> <span class='Operator'>- </span><a href="../../src/include/access/sysattr.h.html#LN27"><span class='Ref_to_Const'>FirstLowInvalidHeapAttributeNumber</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * In case the whole-row reference is under an outer join then it has 
         * to go NULL whenever the rest of the row goes NULL. Deparsing a join 
         * query would always involve multiple relations, thus qualify_col 
         * would be true. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN1899"><span class='Ref_to_Parameter'>qualify_col</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1898"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"CASE WHEN ("</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="deparse.c.html#LN109"><span class='Ref_to_Macro'>ADD_REL_QUALIFIER</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1898"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1898"><span class='Ref_to_Parameter'>varno</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../src/bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1898"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"*)::text IS NOT NULL THEN "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1898"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"ROW("</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="deparse.c.html#LN126"><span class='Ref_to_Proto'>deparseTargetList</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1898"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1898"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1898"><span class='Ref_to_Parameter'>varno</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1944"><span class='Ref_To_Local'>rel</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN1945"><span class='Ref_To_Local'>attrs_used</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1899"><span class='Ref_to_Parameter'>qualify_col</span></a><span class='Delimiter'>, 
</span>                          <span class='Operator'>&</span><a href="deparse.c.html#LN1948"><span class='Ref_To_Local'>retrieved_attrs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1898"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>")"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Complete the CASE WHEN statement started above. */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN1899"><span class='Ref_to_Parameter'>qualify_col</span></a><span class='Parentheses'>) 
</span>            <a href="../../src/bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1898"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" END"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../src/include/access/heapam.h.html#LN96"><span class='Ref_to_Macro'>heap_close</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1944"><span class='Ref_To_Local'>rel</span></a><span class='Delimiter'>, </span><a href="../../src/include/storage/lockdefs.h.html#LN33"><span class='Ref_to_Const'>NoLock</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../src/include/nodes/bitmapset.h.html#LN68"><span class='Ref_to_Proto'>bms_free</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1945"><span class='Ref_To_Local'>attrs_used</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if varattno==0 &raquo; </span> 
    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span><a name="LN1997"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>colname</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN1998"></a>        <a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>options</span><span class='Delimiter'>; 
</span><a name="LN1999"></a>        <a href="../../src/include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* varno must not be any of OUTER_VAR, INNER_VAR and INDEX_VAR. */ 
</span>        <span class='Debug'>Assert</span><span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../src/include/nodes/primnodes.h.html#LN156"><span class='Ref_to_Macro'>IS_SPECIAL_VARNO</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1898"><span class='Ref_to_Parameter'>varno</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Get RangeTblEntry from array in PlannerInfo. */ 
</span>        <a href="deparse.c.html#LN1901"><span class='Ref_To_Local'>rte</span></a> <span class='Operator'>= </span><a href="../../src/include/nodes/relation.h.html#LN324"><span class='Ref_to_Macro'>planner_rt_fetch</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1898"><span class='Ref_to_Parameter'>varno</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1898"><span class='Ref_to_Parameter'>root</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * If it's a column of a foreign table, and it has the column_name FDW 
         * option, use that value. 
         */ 
</span>        <a href="deparse.c.html#LN1998"><span class='Ref_To_Local'>options</span></a> <span class='Operator'>= </span><a href="../../src/include/foreign/foreign.h.html#LN79"><span class='Ref_to_Proto'>GetForeignColumnOptions</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1901"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/parsenodes.h.html#LN947"><span class='Ref_to_Member'>relid</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1898"><span class='Ref_to_Parameter'>varattno</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../src/include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1999"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1998"><span class='Ref_To_Local'>options</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN2014"></a>            <a href="../../src/include/nodes/parsenodes.h.html#LN715"><span class='Ref_to_Struct'>DefElem</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>def</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../src/include/nodes/parsenodes.h.html#LN715"><span class='Ref_to_Struct'>DefElem</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../src/include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1999"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="deparse.c.html#LN2014"><span class='Ref_To_Local'>def</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/parsenodes.h.html#LN719"><span class='Ref_to_Member'>defname</span></a><span class='Delimiter'>, </span><span class='String'>"column_name"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <span class='Delimiter'>{ 
</span>                <a href="deparse.c.html#LN1997"><span class='Ref_To_Local'>colname</span></a> <span class='Operator'>= </span><a href="../../src/backend/commands/define.c.html#LN47"><span class='Ref_to_Func'>defGetString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2014"><span class='Ref_To_Local'>def</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * If it's a column of a regular table or it doesn't have column_name 
         * FDW option, use attribute name. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN1997"><span class='Ref_To_Local'>colname</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <a href="deparse.c.html#LN1997"><span class='Ref_To_Local'>colname</span></a> <span class='Operator'>= </span><a href="../../src/include/utils/lsyscache.h.html#LN86"><span class='Ref_to_Proto'>get_relid_attribute_name</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1901"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/parsenodes.h.html#LN947"><span class='Ref_to_Member'>relid</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1898"><span class='Ref_to_Parameter'>varattno</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN1899"><span class='Ref_to_Parameter'>qualify_col</span></a><span class='Parentheses'>) 
</span>            <a href="deparse.c.html#LN109"><span class='Ref_to_Macro'>ADD_REL_QUALIFIER</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1898"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN1898"><span class='Ref_to_Parameter'>varno</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1898"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><a href="../../src/include/utils/builtins.h.html#LN77"><span class='Ref_to_Proto'>quote_identifier</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN1997"><span class='Ref_To_Local'>colname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
<span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end deparseColumnRef &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Append remote name of specified foreign table to buf. 
 * Use value of table_name FDW option (if any) instead of relation's name. 
 * Similarly, schema_name FDW option overrides schema name. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN2043"></a><span class='Declare_Function'>deparseRelation</span><span class='Parentheses'>(</span><a href="../../src/include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a> <span class='Declare_Parameter'>buf</span><span class='Delimiter'>, </span><a href="../../src/include/utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a> <span class='Declare_Parameter'>rel</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2045"></a>    <a href="../../src/include/foreign/foreign.h.html#LN63"><span class='Ref_to_Struct'>ForeignTable</span></a> <span class='Operator'>*</span><span class='Declare_Local'>table</span><span class='Delimiter'>; 
</span><a name="LN2046"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>nspname</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN2047"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>relname</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN2048"></a>    <a href="../../src/include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* obtain additional catalog information. */ 
</span>    <a href="deparse.c.html#LN2045"><span class='Ref_To_Local'>table</span></a> <span class='Operator'>= </span><a href="../../src/include/foreign/foreign.h.html#LN77"><span class='Ref_to_Proto'>GetForeignTable</span></a><span class='Parentheses'>(</span><a href="../../src/include/utils/rel.h.html#LN416"><span class='Ref_to_Macro'>RelationGetRelid</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2043"><span class='Ref_to_Parameter'>rel</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Use value of FDW options if any, instead of the name of object itself. 
     */ 
</span>    <a href="../../src/include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2048"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2045"><span class='Ref_To_Local'>table</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/foreign/foreign.h.html#LN67"><span class='Ref_to_Member'>options</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN2058"></a>        <a href="../../src/include/nodes/parsenodes.h.html#LN715"><span class='Ref_to_Struct'>DefElem</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>def</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../src/include/nodes/parsenodes.h.html#LN715"><span class='Ref_to_Struct'>DefElem</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../src/include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2048"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="deparse.c.html#LN2058"><span class='Ref_To_Local'>def</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/parsenodes.h.html#LN719"><span class='Ref_to_Member'>defname</span></a><span class='Delimiter'>, </span><span class='String'>"schema_name"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <a href="deparse.c.html#LN2046"><span class='Ref_To_Local'>nspname</span></a> <span class='Operator'>= </span><a href="../../src/backend/commands/define.c.html#LN47"><span class='Ref_to_Func'>defGetString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2058"><span class='Ref_To_Local'>def</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="deparse.c.html#LN2058"><span class='Ref_To_Local'>def</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/parsenodes.h.html#LN719"><span class='Ref_to_Member'>defname</span></a><span class='Delimiter'>, </span><span class='String'>"table_name"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <a href="deparse.c.html#LN2047"><span class='Ref_To_Local'>relname</span></a> <span class='Operator'>= </span><a href="../../src/backend/commands/define.c.html#LN47"><span class='Ref_to_Func'>defGetString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2058"><span class='Ref_To_Local'>def</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Note: we could skip printing the schema name if it's pg_catalog, but 
     * that doesn't seem worth the trouble. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN2046"><span class='Ref_To_Local'>nspname</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="deparse.c.html#LN2046"><span class='Ref_To_Local'>nspname</span></a> <span class='Operator'>= </span><a href="../../src/include/utils/lsyscache.h.html#LN175"><span class='Ref_to_Proto'>get_namespace_name</span></a><span class='Parentheses'>(</span><a href="../../src/include/utils/rel.h.html#LN443"><span class='Ref_to_Macro'>RelationGetNamespace</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2043"><span class='Ref_to_Parameter'>rel</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN2047"><span class='Ref_To_Local'>relname</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="deparse.c.html#LN2047"><span class='Ref_To_Local'>relname</span></a> <span class='Operator'>= </span><a href="../../src/include/utils/rel.h.html#LN436"><span class='Ref_to_Macro'>RelationGetRelationName</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2043"><span class='Ref_to_Parameter'>rel</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../src/bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2043"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"%s.%s"</span><span class='Delimiter'>, 
</span>                     <a href="../../src/include/utils/builtins.h.html#LN77"><span class='Ref_to_Proto'>quote_identifier</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2046"><span class='Ref_To_Local'>nspname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="../../src/include/utils/builtins.h.html#LN77"><span class='Ref_to_Proto'>quote_identifier</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2047"><span class='Ref_To_Local'>relname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end deparseRelation &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Append a SQL string literal representing "val" to buf. 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN2083"></a><span class='Declare_Function'>deparseStringLiteral</span><span class='Parentheses'>(</span><a href="../../src/include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a> <span class='Declare_Parameter'>buf</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>val</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2085"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>valptr</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Rather than making assumptions about the remote server's value of 
     * standard_conforming_strings, always use E'foo' syntax if there are any 
     * backslashes.  This will fail on remote servers before 8.1, but those 
     * are long out of support. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span>strchr<span class='Parentheses'>(</span><a href="deparse.c.html#LN2083"><span class='Ref_to_Parameter'>val</span></a><span class='Delimiter'>, </span><span class='String'>'\\'</span><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
        <a href="../../src/backend/replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2083"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><a href="../../src/include/c.h.html#LN509"><span class='Ref_to_Const'>ESCAPE_STRING_SYNTAX</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../src/backend/replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2083"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'\''</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN2085"><span class='Ref_To_Local'>valptr</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN2083"><span class='Ref_to_Parameter'>val</span></a><span class='Delimiter'>; </span><span class='Operator'>*</span><a href="deparse.c.html#LN2085"><span class='Ref_To_Local'>valptr</span></a><span class='Delimiter'>; </span><a href="deparse.c.html#LN2085"><span class='Ref_To_Local'>valptr</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN2098"></a>        <span class='Keyword'>char</span>        <span class='Declare_Local'>ch</span> <span class='Operator'>= *</span><a href="deparse.c.html#LN2085"><span class='Ref_To_Local'>valptr</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../src/include/c.h.html#LN506"><span class='Ref_to_Macro'>SQL_STR_DOUBLE</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2098"><span class='Ref_To_Local'>ch</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>))</span> 
            <a href="../../src/backend/replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2083"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2098"><span class='Ref_To_Local'>ch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../src/backend/replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2083"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2098"><span class='Ref_To_Local'>ch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="../../src/backend/replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2083"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'\''</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end deparseStringLiteral &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Deparse given expression into context-&GT;buf. 
 * 
 * This function must support all the same node types that foreign_expr_walker 
 * accepts. 
 * 
 * Note: unlike ruleutils.c, we just use a simple hard-wired parenthesization 
 * scheme: anything more complex than a Var, Const, function call or cast 
 * should be self-parenthesized. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN2118"></a><span class='Declare_Function'>deparseExpr</span><span class='Parentheses'>(</span><a href="../../src/include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN96"><span class='Ref_to_Struct'>deparse_expr_cxt</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN2118"><span class='Ref_to_Parameter'>node</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="../../src/include/nodes/nodes.h.html#LN513"><span class='Ref_to_Macro'>nodeTag</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2118"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>case</span> <a href="../../src/include/nodes/nodes.h.html#LN145"><span class='Ref_to_EnumConst'>T_Var</span></a><span class='Operator'>: 
</span>            <a href="deparse.c.html#LN146"><span class='Ref_to_Proto'>deparseVar</span></a><span class='Parentheses'>((</span><a href="../../src/include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN2118"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2118"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../src/include/nodes/nodes.h.html#LN146"><span class='Ref_to_EnumConst'>T_Const</span></a><span class='Operator'>: 
</span>            <a href="deparse.c.html#LN147"><span class='Ref_to_Proto'>deparseConst</span></a><span class='Parentheses'>((</span><a href="../../src/include/nodes/primnodes.h.html#LN188"><span class='Ref_to_Struct'>Const</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN2118"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2118"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../src/include/nodes/nodes.h.html#LN147"><span class='Ref_to_EnumConst'>T_Param</span></a><span class='Operator'>: 
</span>            <a href="deparse.c.html#LN148"><span class='Ref_to_Proto'>deparseParam</span></a><span class='Parentheses'>((</span><a href="../../src/include/nodes/primnodes.h.html#LN240"><span class='Ref_to_Struct'>Param</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN2118"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2118"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../src/include/nodes/nodes.h.html#LN151"><span class='Ref_to_EnumConst'>T_ArrayRef</span></a><span class='Operator'>: 
</span>            <a href="deparse.c.html#LN149"><span class='Ref_to_Proto'>deparseArrayRef</span></a><span class='Parentheses'>((</span><a href="../../src/include/nodes/primnodes.h.html#LN395"><span class='Ref_to_Struct'>ArrayRef</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN2118"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2118"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../src/include/nodes/nodes.h.html#LN152"><span class='Ref_to_EnumConst'>T_FuncExpr</span></a><span class='Operator'>: 
</span>            <a href="deparse.c.html#LN150"><span class='Ref_to_Proto'>deparseFuncExpr</span></a><span class='Parentheses'>((</span><a href="../../src/include/nodes/primnodes.h.html#LN444"><span class='Ref_to_Struct'>FuncExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN2118"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2118"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../src/include/nodes/nodes.h.html#LN154"><span class='Ref_to_EnumConst'>T_OpExpr</span></a><span class='Operator'>: 
</span>            <a href="deparse.c.html#LN151"><span class='Ref_to_Proto'>deparseOpExpr</span></a><span class='Parentheses'>((</span><a href="../../src/include/nodes/primnodes.h.html#LN491"><span class='Ref_to_Struct'>OpExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN2118"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2118"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../src/include/nodes/nodes.h.html#LN155"><span class='Ref_to_EnumConst'>T_DistinctExpr</span></a><span class='Operator'>: 
</span>            <a href="deparse.c.html#LN153"><span class='Ref_to_Proto'>deparseDistinctExpr</span></a><span class='Parentheses'>((</span><a href="../../src/include/nodes/primnodes.h.html#LN514"><span class='Ref_to_Typedef'>DistinctExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN2118"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2118"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../src/include/nodes/nodes.h.html#LN157"><span class='Ref_to_EnumConst'>T_ScalarArrayOpExpr</span></a><span class='Operator'>: 
</span>            <a href="deparse.c.html#LN154"><span class='Ref_to_Proto'>deparseScalarArrayOpExpr</span></a><span class='Parentheses'>((</span><a href="../../src/include/nodes/primnodes.h.html#LN534"><span class='Ref_to_Struct'>ScalarArrayOpExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN2118"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2118"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../src/include/nodes/nodes.h.html#LN164"><span class='Ref_to_EnumConst'>T_RelabelType</span></a><span class='Operator'>: 
</span>            <a href="deparse.c.html#LN156"><span class='Ref_to_Proto'>deparseRelabelType</span></a><span class='Parentheses'>((</span><a href="../../src/include/nodes/primnodes.h.html#LN786"><span class='Ref_to_Struct'>RelabelType</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN2118"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2118"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../src/include/nodes/nodes.h.html#LN158"><span class='Ref_to_EnumConst'>T_BoolExpr</span></a><span class='Operator'>: 
</span>            <a href="deparse.c.html#LN157"><span class='Ref_to_Proto'>deparseBoolExpr</span></a><span class='Parentheses'>((</span><a href="../../src/include/nodes/primnodes.h.html#LN557"><span class='Ref_to_Struct'>BoolExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN2118"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2118"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../src/include/nodes/nodes.h.html#LN179"><span class='Ref_to_EnumConst'>T_NullTest</span></a><span class='Operator'>: 
</span>            <a href="deparse.c.html#LN158"><span class='Ref_to_Proto'>deparseNullTest</span></a><span class='Parentheses'>((</span><a href="../../src/include/nodes/primnodes.h.html#LN1175"><span class='Ref_to_Struct'>NullTest</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN2118"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2118"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../src/include/nodes/nodes.h.html#LN172"><span class='Ref_to_EnumConst'>T_ArrayExpr</span></a><span class='Operator'>: 
</span>            <a href="deparse.c.html#LN159"><span class='Ref_to_Proto'>deparseArrayExpr</span></a><span class='Parentheses'>((</span><a href="../../src/include/nodes/primnodes.h.html#LN947"><span class='Ref_to_Struct'>ArrayExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN2118"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2118"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../src/include/nodes/nodes.h.html#LN148"><span class='Ref_to_EnumConst'>T_Aggref</span></a><span class='Operator'>: 
</span>            <a href="deparse.c.html#LN175"><span class='Ref_to_Proto'>deparseAggref</span></a><span class='Parentheses'>((</span><a href="../../src/include/nodes/primnodes.h.html#LN290"><span class='Ref_to_Struct'>Aggref</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN2118"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2118"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>default</span><span class='Operator'>: 
</span>            <a href="../../src/backend/bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../src/include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"unsupported expression type for deparse: %d"</span><span class='Delimiter'>, 
</span>                 <span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>) </span><a href="../../src/include/nodes/nodes.h.html#LN513"><span class='Ref_to_Macro'>nodeTag</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2118"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch nodeTag(node) &raquo; </span> 
<span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end deparseExpr &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Deparse given Var node into context-&GT;buf. 
 * 
 * If the Var belongs to the foreign relation, just print its remote name. 
 * Otherwise, it's effectively a Param (and will in fact be a Param at 
 * run time).  Handle it the same way we handle plain Params --- see 
 * deparseParam for comments. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN2180"></a><span class='Declare_Function'>deparseVar</span><span class='Parentheses'>(</span><a href="../../src/include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN96"><span class='Ref_to_Struct'>deparse_expr_cxt</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2182"></a>    <a href="../../src/include/nodes/relation.h.html#LN27"><span class='Ref_to_Typedef'>Relids</span></a>      <span class='Declare_Local'>relids</span> <span class='Operator'>= </span><a href="deparse.c.html#LN2180"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="deparse.c.html#LN100"><span class='Ref_to_Member'>scanrel</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/relation.h.html#LN524"><span class='Ref_to_Member'>relids</span></a><span class='Delimiter'>; 
</span><a name="LN2183"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>relno</span><span class='Delimiter'>; 
</span><a name="LN2184"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>colno</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Qualify columns when multiple relations are involved. */ 
</span><a name="LN2187"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>qualify_col</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../src/include/nodes/bitmapset.h.html#LN81"><span class='Ref_to_Proto'>bms_num_members</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2182"><span class='Ref_To_Local'>relids</span></a><span class='Parentheses'>) </span><span class='Operator'>&GT; </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If the Var belongs to the foreign relation that is deparsed as a 
     * subquery, use the relation and column alias to the Var provided by the 
     * subquery, instead of the remote name. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN186"><span class='Ref_to_Proto'>is_subquery_var</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2180"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2180"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="deparse.c.html#LN100"><span class='Ref_to_Member'>scanrel</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="deparse.c.html#LN2183"><span class='Ref_To_Local'>relno</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="deparse.c.html#LN2184"><span class='Ref_To_Local'>colno</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../src/bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2180"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="deparse.c.html#LN103"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"%s%d.%s%d"</span><span class='Delimiter'>, 
</span>                         <a href="deparse.c.html#LN111"><span class='Ref_to_Const'>SUBQUERY_REL_ALIAS_PREFIX</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2183"><span class='Ref_To_Local'>relno</span></a><span class='Delimiter'>, 
</span>                         <a href="deparse.c.html#LN112"><span class='Ref_to_Const'>SUBQUERY_COL_ALIAS_PREFIX</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2184"><span class='Ref_To_Local'>colno</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../src/include/nodes/bitmapset.h.html#LN75"><span class='Ref_to_Proto'>bms_is_member</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2180"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN165"><span class='Ref_to_Member'>varno</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2182"><span class='Ref_To_Local'>relids</span></a><span class='Parentheses'>) </span><span class='Operator'>&& </span><a href="deparse.c.html#LN2180"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN172"><span class='Ref_to_Member'>varlevelsup</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <a href="deparse.c.html#LN142"><span class='Ref_to_Proto'>deparseColumnRef</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2180"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="deparse.c.html#LN103"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2180"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN165"><span class='Ref_to_Member'>varno</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2180"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN167"><span class='Ref_to_Member'>varattno</span></a><span class='Delimiter'>, 
</span>                         <a href="deparse.c.html#LN2180"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="deparse.c.html#LN98"><span class='Ref_to_Member'>root</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2187"><span class='Ref_To_Local'>qualify_col</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Treat like a Param */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN2180"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="deparse.c.html#LN104"><span class='Ref_to_Member'>params_list</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN2210"></a>            <span class='Keyword'>int</span>         <span class='Declare_Local'>pindex</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN2211"></a>            <a href="../../src/include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* find its index in params_list */ 
</span>            <a href="../../src/include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2211"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><span class='Operator'>*</span><a href="deparse.c.html#LN2180"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="deparse.c.html#LN104"><span class='Ref_to_Member'>params_list</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <a href="deparse.c.html#LN2210"><span class='Ref_To_Local'>pindex</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../src/include/nodes/nodes.h.html#LN626"><span class='Ref_to_Proto'>equal</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2180"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="../../src/include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../src/include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2211"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)))</span> 
                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN2211"><span class='Ref_To_Local'>lc</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* not in list, so add it */ 
</span>                <a href="deparse.c.html#LN2210"><span class='Ref_To_Local'>pindex</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>                <span class='Operator'>*</span><a href="deparse.c.html#LN2180"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="deparse.c.html#LN104"><span class='Ref_to_Member'>params_list</span></a> <span class='Operator'>= </span><a href="../../src/backend/nodes/list.c.html#LN126"><span class='Ref_to_Func'>lappend</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="deparse.c.html#LN2180"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="deparse.c.html#LN104"><span class='Ref_to_Member'>params_list</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2180"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
            <a href="deparse.c.html#LN160"><span class='Ref_to_Proto'>printRemoteParam</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2210"><span class='Ref_To_Local'>pindex</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2180"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN169"><span class='Ref_to_Member'>vartype</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2180"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN170"><span class='Ref_to_Member'>vartypmod</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2180"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if context-&GT;params_list &raquo; </span> 
        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <a href="deparse.c.html#LN162"><span class='Ref_to_Proto'>printRemotePlaceholder</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2180"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN169"><span class='Ref_to_Member'>vartype</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2180"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN170"><span class='Ref_to_Member'>vartypmod</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2180"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
<span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end deparseVar &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Deparse given constant value into context-&GT;buf. 
 * 
 * This function has to be kept in sync with ruleutils.c's get_const_expr. 
 * As for that function, showtype can be -1 to never show "::typename" decoration, 
 * or +1 to always show it, or 0 to show it only if the constant wouldn't be assumed 
 * to be the right type by default. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN2245"></a><span class='Declare_Function'>deparseConst</span><span class='Parentheses'>(</span><a href="../../src/include/nodes/primnodes.h.html#LN188"><span class='Ref_to_Struct'>Const</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN96"><span class='Ref_to_Struct'>deparse_expr_cxt</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>showtype</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2247"></a>    <a href="../../src/include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><a href="deparse.c.html#LN2245"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="deparse.c.html#LN103"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>; 
</span><a name="LN2248"></a>    <a href="../../src/include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>typoutput</span><span class='Delimiter'>; 
</span><a name="LN2249"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>typIsVarlena</span><span class='Delimiter'>; 
</span><a name="LN2250"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>extval</span><span class='Delimiter'>; 
</span><a name="LN2251"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>isfloat</span> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span><a name="LN2252"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>needlabel</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN2245"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN196"><span class='Ref_to_Member'>constisnull</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2247"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"NULL"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN2245"><span class='Ref_to_Parameter'>showtype</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <a href="../../src/bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2247"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"::%s"</span><span class='Delimiter'>, 
</span>                             <a href="deparse.c.html#LN121"><span class='Ref_to_Proto'>deparse_type_name</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2245"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN191"><span class='Ref_to_Member'>consttype</span></a><span class='Delimiter'>, 
</span>                                               <a href="deparse.c.html#LN2245"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN192"><span class='Ref_to_Member'>consttypmod</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../src/include/utils/lsyscache.h.html#LN162"><span class='Ref_to_Proto'>getTypeOutputInfo</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2245"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN191"><span class='Ref_to_Member'>consttype</span></a><span class='Delimiter'>, 
</span>                      <span class='Operator'>&</span><a href="deparse.c.html#LN2248"><span class='Ref_To_Local'>typoutput</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="deparse.c.html#LN2249"><span class='Ref_To_Local'>typIsVarlena</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="deparse.c.html#LN2250"><span class='Ref_To_Local'>extval</span></a> <span class='Operator'>= </span><a href="../../src/include/fmgr.h.html#LN647"><span class='Ref_to_Proto'>OidOutputFunctionCall</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2248"><span class='Ref_To_Local'>typoutput</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2245"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN195"><span class='Ref_to_Member'>constvalue</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN2245"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN191"><span class='Ref_to_Member'>consttype</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>case</span> <a href="../../src/interfaces/ecpg/ecpglib/pg_type.h.html#LN22"><span class='Ref_to_Const'>INT2OID</span></a><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="../../src/interfaces/ecpg/ecpglib/pg_type.h.html#LN24"><span class='Ref_to_Const'>INT4OID</span></a><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="../../src/interfaces/ecpg/ecpglib/pg_type.h.html#LN21"><span class='Ref_to_Const'>INT8OID</span></a><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="../../src/interfaces/ecpg/ecpglib/pg_type.h.html#LN27"><span class='Ref_to_Const'>OIDOID</span></a><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="../../src/interfaces/ecpg/ecpglib/pg_type.h.html#LN38"><span class='Ref_to_Const'>FLOAT4OID</span></a><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="../../src/interfaces/ecpg/ecpglib/pg_type.h.html#LN39"><span class='Ref_to_Const'>FLOAT8OID</span></a><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="../../src/interfaces/ecpg/ecpglib/pg_type.h.html#LN58"><span class='Ref_to_Const'>NUMERICOID</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* 
                 * No need to quote unless it's a special value such as 'NaN'. 
                 * See comments in get_const_expr(). 
                 */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span>strspn<span class='Parentheses'>(</span><a href="deparse.c.html#LN2250"><span class='Ref_To_Local'>extval</span></a><span class='Delimiter'>, </span><span class='String'>"0123456789+-eE."</span><span class='Parentheses'>) </span><span class='Operator'>== </span>strlen<span class='Parentheses'>(</span><a href="deparse.c.html#LN2250"><span class='Ref_To_Local'>extval</span></a><span class='Parentheses'>))</span> 
                <span class='Delimiter'>{ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN2250"><span class='Ref_To_Local'>extval</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='String'>'+'</span> <span class='Operator'>|| </span><a href="deparse.c.html#LN2250"><span class='Ref_To_Local'>extval</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='String'>'-'</span><span class='Parentheses'>) 
</span>                        <a href="../../src/bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2247"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"(%s)"</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN2250"><span class='Ref_To_Local'>extval</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>else</span> 
                        <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2247"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2250"><span class='Ref_To_Local'>extval</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span>strcspn<span class='Parentheses'>(</span><a href="deparse.c.html#LN2250"><span class='Ref_To_Local'>extval</span></a><span class='Delimiter'>, </span><span class='String'>"eE."</span><span class='Parentheses'>) </span><span class='Operator'>!= </span>strlen<span class='Parentheses'>(</span><a href="deparse.c.html#LN2250"><span class='Ref_To_Local'>extval</span></a><span class='Parentheses'>))</span> 
                        <a href="deparse.c.html#LN2251"><span class='Ref_To_Local'>isfloat</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; </span><span class='Comment_Single_Line'>/* it looks like a float */ 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>else</span> 
                    <a href="../../src/bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2247"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"'%s'"</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN2250"><span class='Ref_To_Local'>extval</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../src/include/catalog/pg_type.h.html#LN541"><span class='Ref_to_Const'>BITOID</span></a><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="../../src/interfaces/ecpg/ecpglib/pg_type.h.html#LN57"><span class='Ref_to_Const'>VARBITOID</span></a><span class='Operator'>: 
</span>            <a href="../../src/bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2247"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"B'%s'"</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN2250"><span class='Ref_To_Local'>extval</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../src/interfaces/ecpg/ecpglib/pg_type.h.html#LN17"><span class='Ref_to_Const'>BOOLOID</span></a><span class='Operator'>: 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="deparse.c.html#LN2250"><span class='Ref_To_Local'>extval</span></a><span class='Delimiter'>, </span><span class='String'>"t"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2247"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"true"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
                <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2247"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"false"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>default</span><span class='Operator'>: 
</span>            <a href="postgres_fdw.h.html#LN171"><span class='Ref_to_Proto'>deparseStringLiteral</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2247"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2250"><span class='Ref_To_Local'>extval</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch node-&GT;consttype &raquo; </span> 
 
    <a href="../../src/include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2250"><span class='Ref_To_Local'>extval</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN2245"><span class='Ref_to_Parameter'>showtype</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * For showtype == 0, append ::typename unless the constant will be 
     * implicitly typed as the right type when it is read in. 
     * 
     * XXX this code has to be kept in sync with the behavior of the parser, 
     * especially make_const. 
     */ 
</span>    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN2245"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN191"><span class='Ref_to_Member'>consttype</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>case</span> <a href="../../src/interfaces/ecpg/ecpglib/pg_type.h.html#LN17"><span class='Ref_to_Const'>BOOLOID</span></a><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="../../src/interfaces/ecpg/ecpglib/pg_type.h.html#LN24"><span class='Ref_to_Const'>INT4OID</span></a><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="../../src/interfaces/ecpg/ecpglib/pg_type.h.html#LN43"><span class='Ref_to_Const'>UNKNOWNOID</span></a><span class='Operator'>: 
</span>            <a href="deparse.c.html#LN2252"><span class='Ref_To_Local'>needlabel</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../src/interfaces/ecpg/ecpglib/pg_type.h.html#LN58"><span class='Ref_to_Const'>NUMERICOID</span></a><span class='Operator'>: 
</span>            <a href="deparse.c.html#LN2252"><span class='Ref_To_Local'>needlabel</span></a> <span class='Operator'>= !</span><a href="deparse.c.html#LN2251"><span class='Ref_To_Local'>isfloat</span></a> <span class='Operator'>|| </span><span class='Parentheses'>(</span><a href="deparse.c.html#LN2245"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN192"><span class='Ref_to_Member'>consttypmod</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>default</span><span class='Operator'>: 
</span>            <a href="deparse.c.html#LN2252"><span class='Ref_To_Local'>needlabel</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN2252"><span class='Ref_To_Local'>needlabel</span></a> <span class='Operator'>|| </span><a href="deparse.c.html#LN2245"><span class='Ref_to_Parameter'>showtype</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <a href="../../src/bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2247"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"::%s"</span><span class='Delimiter'>, 
</span>                         <a href="deparse.c.html#LN121"><span class='Ref_to_Proto'>deparse_type_name</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2245"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN191"><span class='Ref_to_Member'>consttype</span></a><span class='Delimiter'>, 
</span>                                           <a href="deparse.c.html#LN2245"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN192"><span class='Ref_to_Member'>consttypmod</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end deparseConst &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Deparse given Param node. 
 * 
 * If we're generating the query "for real", add the Param to 
 * context-&GT;params_list if it's not already present, and then use its index 
 * in that list as the remote parameter number.  During EXPLAIN, there's 
 * no need to identify a parameter number. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN2351"></a><span class='Declare_Function'>deparseParam</span><span class='Parentheses'>(</span><a href="../../src/include/nodes/primnodes.h.html#LN240"><span class='Ref_to_Struct'>Param</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN96"><span class='Ref_to_Struct'>deparse_expr_cxt</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN2351"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="deparse.c.html#LN104"><span class='Ref_to_Member'>params_list</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN2355"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>pindex</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN2356"></a>        <a href="../../src/include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* find its index in params_list */ 
</span>        <a href="../../src/include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2356"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><span class='Operator'>*</span><a href="deparse.c.html#LN2351"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="deparse.c.html#LN104"><span class='Ref_to_Member'>params_list</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="deparse.c.html#LN2355"><span class='Ref_To_Local'>pindex</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../src/include/nodes/nodes.h.html#LN626"><span class='Ref_to_Proto'>equal</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2351"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="../../src/include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../src/include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2356"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)))</span> 
                <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN2356"><span class='Ref_To_Local'>lc</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* not in list, so add it */ 
</span>            <a href="deparse.c.html#LN2355"><span class='Ref_To_Local'>pindex</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>            <span class='Operator'>*</span><a href="deparse.c.html#LN2351"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="deparse.c.html#LN104"><span class='Ref_to_Member'>params_list</span></a> <span class='Operator'>= </span><a href="../../src/backend/nodes/list.c.html#LN126"><span class='Ref_to_Func'>lappend</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="deparse.c.html#LN2351"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="deparse.c.html#LN104"><span class='Ref_to_Member'>params_list</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2351"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <a href="deparse.c.html#LN160"><span class='Ref_to_Proto'>printRemoteParam</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2355"><span class='Ref_To_Local'>pindex</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2351"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN245"><span class='Ref_to_Member'>paramtype</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2351"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN246"><span class='Ref_to_Member'>paramtypmod</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2351"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if context-&GT;params_list &raquo; </span> 
    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="deparse.c.html#LN162"><span class='Ref_to_Proto'>printRemotePlaceholder</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2351"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN245"><span class='Ref_to_Member'>paramtype</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2351"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN246"><span class='Ref_to_Member'>paramtypmod</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2351"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
}</span><span class='Auto_Annotations'> &laquo; end deparseParam &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Deparse an array subscript expression. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN2384"></a><span class='Declare_Function'>deparseArrayRef</span><span class='Parentheses'>(</span><a href="../../src/include/nodes/primnodes.h.html#LN395"><span class='Ref_to_Struct'>ArrayRef</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN96"><span class='Ref_to_Struct'>deparse_expr_cxt</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2386"></a>    <a href="../../src/include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><a href="deparse.c.html#LN2384"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="deparse.c.html#LN103"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>; 
</span><a name="LN2387"></a>    <a href="../../src/include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lowlist_item</span><span class='Delimiter'>; 
</span><a name="LN2388"></a>    <a href="../../src/include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>uplist_item</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Always parenthesize the expression. */ 
</span>    <a href="../../src/backend/replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2386"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'('</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Deparse referenced array expression first.  If that expression includes 
     * a cast, we have to parenthesize to prevent the array subscript from 
     * being taken as typename decoration.  We can avoid that in the typical 
     * case of subscripting a Var, but otherwise do it. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../src/include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2384"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN406"><span class='Ref_to_Member'>refexpr</span></a><span class='Delimiter'>, </span><a href="../../src/include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a><span class='Parentheses'>))</span> 
        <a href="deparse.c.html#LN145"><span class='Ref_to_Proto'>deparseExpr</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2384"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN406"><span class='Ref_to_Member'>refexpr</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2384"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../src/backend/replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2386"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'('</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="deparse.c.html#LN145"><span class='Ref_to_Proto'>deparseExpr</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2384"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN406"><span class='Ref_to_Member'>refexpr</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2384"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../src/backend/replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2386"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* Deparse subscript expressions. */ 
</span>    <a href="deparse.c.html#LN2387"><span class='Ref_To_Local'>lowlist_item</span></a> <span class='Operator'>= </span><a href="../../src/include/nodes/pg_list.h.html#LN75"><span class='Ref_to_Func'>list_head</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2384"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN404"><span class='Ref_to_Member'>reflowerindexpr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* could be NULL */ 
</span>    <a href="../../src/include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2388"><span class='Ref_To_Local'>uplist_item</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2384"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN402"><span class='Ref_to_Member'>refupperindexpr</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../src/backend/replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2386"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'['</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN2387"><span class='Ref_To_Local'>lowlist_item</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="deparse.c.html#LN145"><span class='Ref_to_Proto'>deparseExpr</span></a><span class='Parentheses'>(</span><a href="../../src/include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2387"><span class='Ref_To_Local'>lowlist_item</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN2384"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../src/backend/replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2386"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>':'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="deparse.c.html#LN2387"><span class='Ref_To_Local'>lowlist_item</span></a> <span class='Operator'>= </span><a href="../../src/include/nodes/pg_list.h.html#LN104"><span class='Ref_to_Macro'>lnext</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2387"><span class='Ref_To_Local'>lowlist_item</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <a href="deparse.c.html#LN145"><span class='Ref_to_Proto'>deparseExpr</span></a><span class='Parentheses'>(</span><a href="../../src/include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2388"><span class='Ref_To_Local'>uplist_item</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN2384"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../src/backend/replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2386"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>']'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../src/backend/replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2386"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end deparseArrayRef &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Deparse a function call. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN2430"></a><span class='Declare_Function'>deparseFuncExpr</span><span class='Parentheses'>(</span><a href="../../src/include/nodes/primnodes.h.html#LN444"><span class='Ref_to_Struct'>FuncExpr</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN96"><span class='Ref_to_Struct'>deparse_expr_cxt</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2432"></a>    <a href="../../src/include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><a href="deparse.c.html#LN2430"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="deparse.c.html#LN103"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>; 
</span><a name="LN2433"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>use_variadic</span><span class='Delimiter'>; 
</span><a name="LN2434"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>first</span><span class='Delimiter'>; 
</span><a name="LN2435"></a>    <a href="../../src/include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>arg</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If the function call came from an implicit coercion, then just show the 
     * first argument. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN2430"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN452"><span class='Ref_to_Member'>funcformat</span></a> <span class='Operator'>== </span><a href="../../src/include/nodes/primnodes.h.html#LN438"><span class='Ref_to_EnumConst'>COERCE_IMPLICIT_CAST</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="deparse.c.html#LN145"><span class='Ref_to_Proto'>deparseExpr</span></a><span class='Parentheses'>((</span><a href="../../src/include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../src/include/nodes/pg_list.h.html#LN110"><span class='Ref_to_Macro'>linitial</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2430"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN455"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN2430"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If the function call came from a cast, then show the first argument 
     * plus an explicit cast operation. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN2430"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN452"><span class='Ref_to_Member'>funcformat</span></a> <span class='Operator'>== </span><a href="../../src/include/nodes/primnodes.h.html#LN437"><span class='Ref_to_EnumConst'>COERCE_EXPLICIT_CAST</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN2453"></a>        <a href="../../src/include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>rettype</span> <span class='Operator'>= </span><a href="deparse.c.html#LN2430"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN448"><span class='Ref_to_Member'>funcresulttype</span></a><span class='Delimiter'>; 
</span><a name="LN2454"></a>        <a href="../../src/include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>coercedTypmod</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Get the typmod if this is a length-coercion function */ 
</span>        <span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>) </span><a href="../../src/include/nodes/nodeFuncs.h.html#LN33"><span class='Ref_to_Proto'>exprIsLengthCoercion</span></a><span class='Parentheses'>((</span><a href="../../src/include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN2430"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="deparse.c.html#LN2454"><span class='Ref_To_Local'>coercedTypmod</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="deparse.c.html#LN145"><span class='Ref_to_Proto'>deparseExpr</span></a><span class='Parentheses'>((</span><a href="../../src/include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../src/include/nodes/pg_list.h.html#LN110"><span class='Ref_to_Macro'>linitial</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2430"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN455"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN2430"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../src/bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2432"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"::%s"</span><span class='Delimiter'>, 
</span>                         <a href="deparse.c.html#LN121"><span class='Ref_to_Proto'>deparse_type_name</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2453"><span class='Ref_To_Local'>rettype</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2454"><span class='Ref_To_Local'>coercedTypmod</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* Check if need to print VARIADIC (cf. ruleutils.c) */ 
</span>    <a href="deparse.c.html#LN2433"><span class='Ref_To_Local'>use_variadic</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN2430"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN450"><span class='Ref_to_Member'>funcvariadic</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Normal function: display as proname(args). 
     */ 
</span>    <a href="deparse.c.html#LN179"><span class='Ref_to_Proto'>appendFunctionName</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2430"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN447"><span class='Ref_to_Member'>funcid</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2430"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../src/backend/replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2432"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'('</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* ... and all the arguments */ 
</span>    <a href="deparse.c.html#LN2434"><span class='Ref_To_Local'>first</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <a href="../../src/include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2435"><span class='Ref_To_Local'>arg</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2430"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN455"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="deparse.c.html#LN2434"><span class='Ref_To_Local'>first</span></a><span class='Parentheses'>) 
</span>            <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2432"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>", "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN2433"><span class='Ref_To_Local'>use_variadic</span></a> <span class='Operator'>&& </span><a href="../../src/include/nodes/pg_list.h.html#LN104"><span class='Ref_to_Macro'>lnext</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2435"><span class='Ref_To_Local'>arg</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
            <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2432"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"VARIADIC "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="deparse.c.html#LN145"><span class='Ref_to_Proto'>deparseExpr</span></a><span class='Parentheses'>((</span><a href="../../src/include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../src/include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2435"><span class='Ref_To_Local'>arg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN2430"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="deparse.c.html#LN2434"><span class='Ref_To_Local'>first</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="../../src/backend/replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2432"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end deparseFuncExpr &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Deparse given operator expression.   To avoid problems around 
 * priority of operations, we always parenthesize the arguments. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN2493"></a><span class='Declare_Function'>deparseOpExpr</span><span class='Parentheses'>(</span><a href="../../src/include/nodes/primnodes.h.html#LN491"><span class='Ref_to_Struct'>OpExpr</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN96"><span class='Ref_to_Struct'>deparse_expr_cxt</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2495"></a>    <a href="../../src/include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><a href="deparse.c.html#LN2493"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="deparse.c.html#LN103"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>; 
</span><a name="LN2496"></a>    <a href="../../src/include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tuple</span><span class='Delimiter'>; 
</span><a name="LN2497"></a>    <a href="../../src/include/catalog/pg_operator.h.html#LN56"><span class='Ref_to_Typedef'>Form_pg_operator</span></a> <span class='Declare_Local'>form</span><span class='Delimiter'>; 
</span><a name="LN2498"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>oprkind</span><span class='Delimiter'>; 
</span><a name="LN2499"></a>    <a href="../../src/include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>arg</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Retrieve information about the operator from system catalog. */ 
</span>    <a href="deparse.c.html#LN2496"><span class='Ref_To_Local'>tuple</span></a> <span class='Operator'>= </span><a href="../../src/include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../src/include/utils/syscache.h.html#LN71"><span class='Ref_to_EnumConst'>OPEROID</span></a><span class='Delimiter'>, </span><a href="../../src/include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2493"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN494"><span class='Ref_to_Member'>opno</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../src/include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2496"><span class='Ref_To_Local'>tuple</span></a><span class='Parentheses'>))</span> 
        <a href="../../src/backend/bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../src/include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"cache lookup failed for operator %u"</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN2493"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN494"><span class='Ref_to_Member'>opno</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="deparse.c.html#LN2497"><span class='Ref_To_Local'>form</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../src/include/catalog/pg_operator.h.html#LN56"><span class='Ref_to_Typedef'>Form_pg_operator</span></a><span class='Parentheses'>) </span><a href="../../src/include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2496"><span class='Ref_To_Local'>tuple</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="deparse.c.html#LN2498"><span class='Ref_To_Local'>oprkind</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN2497"><span class='Ref_To_Local'>form</span></a><span class='Operator'>-&GT;</span>oprkind<span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Sanity check. */ 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>((</span><a href="deparse.c.html#LN2498"><span class='Ref_To_Local'>oprkind</span></a> <span class='Operator'>== </span><span class='String'>'r'</span> <span class='Operator'>&& </span><a href="../../src/include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2493"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN500"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>1</span><span class='Parentheses'>)</span> <span class='Operator'>|| 
</span>           <span class='Parentheses'>(</span><a href="deparse.c.html#LN2498"><span class='Ref_To_Local'>oprkind</span></a> <span class='Operator'>== </span><span class='String'>'l'</span> <span class='Operator'>&& </span><a href="../../src/include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2493"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN500"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>1</span><span class='Parentheses'>)</span> <span class='Operator'>|| 
</span>           <span class='Parentheses'>(</span><a href="deparse.c.html#LN2498"><span class='Ref_To_Local'>oprkind</span></a> <span class='Operator'>== </span><span class='String'>'b'</span> <span class='Operator'>&& </span><a href="../../src/include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2493"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN500"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>2</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Always parenthesize the expression. */ 
</span>    <a href="../../src/backend/replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2495"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'('</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Deparse left operand. */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN2498"><span class='Ref_To_Local'>oprkind</span></a> <span class='Operator'>== </span><span class='String'>'r'</span> <span class='Operator'>|| </span><a href="deparse.c.html#LN2498"><span class='Ref_To_Local'>oprkind</span></a> <span class='Operator'>== </span><span class='String'>'b'</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="deparse.c.html#LN2499"><span class='Ref_To_Local'>arg</span></a> <span class='Operator'>= </span><a href="../../src/include/nodes/pg_list.h.html#LN75"><span class='Ref_to_Func'>list_head</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2493"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN500"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="deparse.c.html#LN145"><span class='Ref_to_Proto'>deparseExpr</span></a><span class='Parentheses'>(</span><a href="../../src/include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2499"><span class='Ref_To_Local'>arg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN2493"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../src/backend/replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2495"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>' '</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* Deparse operator name. */ 
</span>    <a href="deparse.c.html#LN152"><span class='Ref_to_Proto'>deparseOperatorName</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2495"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2497"><span class='Ref_To_Local'>form</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Deparse right operand. */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN2498"><span class='Ref_To_Local'>oprkind</span></a> <span class='Operator'>== </span><span class='String'>'l'</span> <span class='Operator'>|| </span><a href="deparse.c.html#LN2498"><span class='Ref_To_Local'>oprkind</span></a> <span class='Operator'>== </span><span class='String'>'b'</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="deparse.c.html#LN2499"><span class='Ref_To_Local'>arg</span></a> <span class='Operator'>= </span><a href="../../src/include/nodes/pg_list.h.html#LN81"><span class='Ref_to_Func'>list_tail</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2493"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN500"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../src/backend/replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2495"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>' '</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="deparse.c.html#LN145"><span class='Ref_to_Proto'>deparseExpr</span></a><span class='Parentheses'>(</span><a href="../../src/include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2499"><span class='Ref_To_Local'>arg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN2493"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../src/backend/replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2495"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../src/include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2496"><span class='Ref_To_Local'>tuple</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end deparseOpExpr &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Print the name of an operator. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN2544"></a><span class='Declare_Function'>deparseOperatorName</span><span class='Parentheses'>(</span><a href="../../src/include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a> <span class='Declare_Parameter'>buf</span><span class='Delimiter'>, </span><a href="../../src/include/catalog/pg_operator.h.html#LN56"><span class='Ref_to_Typedef'>Form_pg_operator</span></a> <span class='Declare_Parameter'>opform</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2546"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>opname</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* opname is not a SQL identifier, so we should not quote it. */ 
</span>    <a href="deparse.c.html#LN2546"><span class='Ref_To_Local'>opname</span></a> <span class='Operator'>= </span><a href="../../src/include/c.h.html#LN498"><span class='Ref_to_Macro'>NameStr</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2544"><span class='Ref_to_Parameter'>opform</span></a><span class='Operator'>-&GT;</span>oprname<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Print schema name only if it's not pg_catalog */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN2544"><span class='Ref_to_Parameter'>opform</span></a><span class='Operator'>-&GT;</span>oprnamespace <span class='Operator'>!= </span><a href="../../src/include/catalog/pg_namespace.h.html#LN70"><span class='Ref_to_Const'>PG_CATALOG_NAMESPACE</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN2554"></a>        <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>opnspname</span><span class='Delimiter'>; 
</span> 
        <a href="deparse.c.html#LN2554"><span class='Ref_To_Local'>opnspname</span></a> <span class='Operator'>= </span><a href="../../src/include/utils/lsyscache.h.html#LN175"><span class='Ref_to_Proto'>get_namespace_name</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2544"><span class='Ref_to_Parameter'>opform</span></a><span class='Operator'>-&GT;</span>oprnamespace<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* Print fully qualified operator name. */ 
</span>        <a href="../../src/bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2544"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"OPERATOR(%s.%s)"</span><span class='Delimiter'>, 
</span>                         <a href="../../src/include/utils/builtins.h.html#LN77"><span class='Ref_to_Proto'>quote_identifier</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2554"><span class='Ref_To_Local'>opnspname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN2546"><span class='Ref_To_Local'>opname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Just print operator name. */ 
</span>        <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2544"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2546"><span class='Ref_To_Local'>opname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
}</span><span class='Auto_Annotations'> &laquo; end deparseOperatorName &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Deparse IS DISTINCT FROM. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN2572"></a><span class='Declare_Function'>deparseDistinctExpr</span><span class='Parentheses'>(</span><a href="../../src/include/nodes/primnodes.h.html#LN514"><span class='Ref_to_Typedef'>DistinctExpr</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN96"><span class='Ref_to_Struct'>deparse_expr_cxt</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2574"></a>    <a href="../../src/include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><a href="deparse.c.html#LN2572"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="deparse.c.html#LN103"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>; 
</span> 
    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="../../src/include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2572"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN500"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../src/backend/replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2574"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'('</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="deparse.c.html#LN145"><span class='Ref_to_Proto'>deparseExpr</span></a><span class='Parentheses'>(</span><a href="../../src/include/nodes/pg_list.h.html#LN110"><span class='Ref_to_Macro'>linitial</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2572"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN500"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN2572"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2574"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" IS DISTINCT FROM "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="deparse.c.html#LN145"><span class='Ref_to_Proto'>deparseExpr</span></a><span class='Parentheses'>(</span><a href="../../src/include/nodes/pg_list.h.html#LN115"><span class='Ref_to_Macro'>lsecond</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2572"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN500"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN2572"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../src/backend/replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2574"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Deparse given ScalarArrayOpExpr expression.  To avoid problems 
 * around priority of operations, we always parenthesize the arguments. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN2590"></a><span class='Declare_Function'>deparseScalarArrayOpExpr</span><span class='Parentheses'>(</span><a href="../../src/include/nodes/primnodes.h.html#LN534"><span class='Ref_to_Struct'>ScalarArrayOpExpr</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN96"><span class='Ref_to_Struct'>deparse_expr_cxt</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2592"></a>    <a href="../../src/include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><a href="deparse.c.html#LN2590"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="deparse.c.html#LN103"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>; 
</span><a name="LN2593"></a>    <a href="../../src/include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tuple</span><span class='Delimiter'>; 
</span><a name="LN2594"></a>    <a href="../../src/include/catalog/pg_operator.h.html#LN56"><span class='Ref_to_Typedef'>Form_pg_operator</span></a> <span class='Declare_Local'>form</span><span class='Delimiter'>; 
</span><a name="LN2595"></a>    <a href="../../src/include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>arg1</span><span class='Delimiter'>; 
</span><a name="LN2596"></a>    <a href="../../src/include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>arg2</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Retrieve information about the operator from system catalog. */ 
</span>    <a href="deparse.c.html#LN2593"><span class='Ref_To_Local'>tuple</span></a> <span class='Operator'>= </span><a href="../../src/include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../src/include/utils/syscache.h.html#LN71"><span class='Ref_to_EnumConst'>OPEROID</span></a><span class='Delimiter'>, </span><a href="../../src/include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2590"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN537"><span class='Ref_to_Member'>opno</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../src/include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2593"><span class='Ref_To_Local'>tuple</span></a><span class='Parentheses'>))</span> 
        <a href="../../src/backend/bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../src/include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"cache lookup failed for operator %u"</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN2590"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN537"><span class='Ref_to_Member'>opno</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="deparse.c.html#LN2594"><span class='Ref_To_Local'>form</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../src/include/catalog/pg_operator.h.html#LN56"><span class='Ref_to_Typedef'>Form_pg_operator</span></a><span class='Parentheses'>) </span><a href="../../src/include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2593"><span class='Ref_To_Local'>tuple</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Sanity check. */ 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="../../src/include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2590"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN541"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Always parenthesize the expression. */ 
</span>    <a href="../../src/backend/replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2592"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'('</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Deparse left operand. */ 
</span>    <a href="deparse.c.html#LN2595"><span class='Ref_To_Local'>arg1</span></a> <span class='Operator'>= </span><a href="../../src/include/nodes/pg_list.h.html#LN110"><span class='Ref_to_Macro'>linitial</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2590"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN541"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="deparse.c.html#LN145"><span class='Ref_to_Proto'>deparseExpr</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2595"><span class='Ref_To_Local'>arg1</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2590"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../src/backend/replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2592"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>' '</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Deparse operator name plus decoration. */ 
</span>    <a href="deparse.c.html#LN152"><span class='Ref_to_Proto'>deparseOperatorName</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2592"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2594"><span class='Ref_To_Local'>form</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../src/bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2592"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" %s ("</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN2590"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN539"><span class='Ref_to_Member'>useOr</span></a> <span class='Operator'>? </span><span class='String'>"ANY"</span> <span class='Operator'>: </span><span class='String'>"ALL"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Deparse right operand. */ 
</span>    <a href="deparse.c.html#LN2596"><span class='Ref_To_Local'>arg2</span></a> <span class='Operator'>= </span><a href="../../src/include/nodes/pg_list.h.html#LN115"><span class='Ref_to_Macro'>lsecond</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2590"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN541"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="deparse.c.html#LN145"><span class='Ref_to_Proto'>deparseExpr</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2596"><span class='Ref_To_Local'>arg2</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2590"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../src/backend/replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2592"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Always parenthesize the expression. */ 
</span>    <a href="../../src/backend/replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2592"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../src/include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2593"><span class='Ref_To_Local'>tuple</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end deparseScalarArrayOpExpr &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Deparse a RelabelType (binary-compatible cast) node. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN2635"></a><span class='Declare_Function'>deparseRelabelType</span><span class='Parentheses'>(</span><a href="../../src/include/nodes/primnodes.h.html#LN786"><span class='Ref_to_Struct'>RelabelType</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN96"><span class='Ref_to_Struct'>deparse_expr_cxt</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <a href="deparse.c.html#LN145"><span class='Ref_to_Proto'>deparseExpr</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2635"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN789"><span class='Ref_to_Member'>arg</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2635"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN2635"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN793"><span class='Ref_to_Member'>relabelformat</span></a> <span class='Operator'>!= </span><a href="../../src/include/nodes/primnodes.h.html#LN438"><span class='Ref_to_EnumConst'>COERCE_IMPLICIT_CAST</span></a><span class='Parentheses'>) 
</span>        <a href="../../src/bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2635"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="deparse.c.html#LN103"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"::%s"</span><span class='Delimiter'>, 
</span>                         <a href="deparse.c.html#LN121"><span class='Ref_to_Proto'>deparse_type_name</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2635"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN790"><span class='Ref_to_Member'>resulttype</span></a><span class='Delimiter'>, 
</span>                                           <a href="deparse.c.html#LN2635"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN791"><span class='Ref_to_Member'>resulttypmod</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Deparse a BoolExpr node. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN2648"></a><span class='Declare_Function'>deparseBoolExpr</span><span class='Parentheses'>(</span><a href="../../src/include/nodes/primnodes.h.html#LN557"><span class='Ref_to_Struct'>BoolExpr</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN96"><span class='Ref_to_Struct'>deparse_expr_cxt</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2650"></a>    <a href="../../src/include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><a href="deparse.c.html#LN2648"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="deparse.c.html#LN103"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>; 
</span><a name="LN2651"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>op</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* keep compiler quiet */ 
</span><a name="LN2652"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>first</span><span class='Delimiter'>; 
</span><a name="LN2653"></a>    <a href="../../src/include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN2648"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN560"><span class='Ref_to_Member'>boolop</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>case</span> <a href="../../src/include/nodes/primnodes.h.html#LN554"><span class='Ref_to_EnumConst'>AND_EXPR</span></a><span class='Operator'>: 
</span>            <a href="deparse.c.html#LN2651"><span class='Ref_To_Local'>op</span></a> <span class='Operator'>= </span><span class='String'>"AND"</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../src/include/nodes/primnodes.h.html#LN554"><span class='Ref_to_EnumConst'>OR_EXPR</span></a><span class='Operator'>: 
</span>            <a href="deparse.c.html#LN2651"><span class='Ref_To_Local'>op</span></a> <span class='Operator'>= </span><span class='String'>"OR"</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../src/include/nodes/primnodes.h.html#LN554"><span class='Ref_to_EnumConst'>NOT_EXPR</span></a><span class='Operator'>: 
</span>            <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2650"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"(NOT "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="deparse.c.html#LN145"><span class='Ref_to_Proto'>deparseExpr</span></a><span class='Parentheses'>(</span><a href="../../src/include/nodes/pg_list.h.html#LN110"><span class='Ref_to_Macro'>linitial</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2648"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN561"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN2648"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../src/backend/replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2650"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../src/backend/replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2650"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'('</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="deparse.c.html#LN2652"><span class='Ref_To_Local'>first</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <a href="../../src/include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2653"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2648"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN561"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="deparse.c.html#LN2652"><span class='Ref_To_Local'>first</span></a><span class='Parentheses'>) 
</span>            <a href="../../src/bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2650"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" %s "</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN2651"><span class='Ref_To_Local'>op</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="deparse.c.html#LN145"><span class='Ref_to_Proto'>deparseExpr</span></a><span class='Parentheses'>((</span><a href="../../src/include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../src/include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2653"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN2648"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="deparse.c.html#LN2652"><span class='Ref_To_Local'>first</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="../../src/backend/replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2650"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end deparseBoolExpr &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Deparse IS [NOT] NULL expression. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN2686"></a><span class='Declare_Function'>deparseNullTest</span><span class='Parentheses'>(</span><a href="../../src/include/nodes/primnodes.h.html#LN1175"><span class='Ref_to_Struct'>NullTest</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN96"><span class='Ref_to_Struct'>deparse_expr_cxt</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2688"></a>    <a href="../../src/include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><a href="deparse.c.html#LN2686"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="deparse.c.html#LN103"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>; 
</span> 
    <a href="../../src/backend/replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2688"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'('</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="deparse.c.html#LN145"><span class='Ref_to_Proto'>deparseExpr</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2686"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN1178"><span class='Ref_to_Member'>arg</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2686"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * For scalar inputs, we prefer to print as IS [NOT] NULL, which is 
     * shorter and traditional.  If it's a rowtype input but we're applying a 
     * scalar test, must print IS [NOT] DISTINCT FROM NULL to be semantically 
     * correct. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN2686"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN1180"><span class='Ref_to_Member'>argisrow</span></a> <span class='Operator'>|| !</span><a href="../../src/include/utils/lsyscache.h.html#LN150"><span class='Ref_to_Proto'>type_is_rowtype</span></a><span class='Parentheses'>(</span><a href="../../src/include/nodes/nodeFuncs.h.html#LN31"><span class='Ref_to_Proto'>exprType</span></a><span class='Parentheses'>((</span><a href="../../src/include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN2686"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN1178"><span class='Ref_to_Member'>arg</span></a><span class='Parentheses'>)))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN2686"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN1179"><span class='Ref_to_Member'>nulltesttype</span></a> <span class='Operator'>== </span><a href="../../src/include/nodes/primnodes.h.html#LN1172"><span class='Ref_to_EnumConst'>IS_NULL</span></a><span class='Parentheses'>) 
</span>            <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2688"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" IS NULL)"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2688"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" IS NOT NULL)"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN2686"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN1179"><span class='Ref_to_Member'>nulltesttype</span></a> <span class='Operator'>== </span><a href="../../src/include/nodes/primnodes.h.html#LN1172"><span class='Ref_to_EnumConst'>IS_NULL</span></a><span class='Parentheses'>) 
</span>            <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2688"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" IS NOT DISTINCT FROM NULL)"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2688"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" IS DISTINCT FROM NULL)"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
}</span><span class='Auto_Annotations'> &laquo; end deparseNullTest &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Deparse ARRAY[...] construct. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN2719"></a><span class='Declare_Function'>deparseArrayExpr</span><span class='Parentheses'>(</span><a href="../../src/include/nodes/primnodes.h.html#LN947"><span class='Ref_to_Struct'>ArrayExpr</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN96"><span class='Ref_to_Struct'>deparse_expr_cxt</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2721"></a>    <a href="../../src/include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><a href="deparse.c.html#LN2719"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="deparse.c.html#LN103"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>; 
</span><a name="LN2722"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>first</span> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span><a name="LN2723"></a>    <a href="../../src/include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc</span><span class='Delimiter'>; 
</span> 
    <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2721"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"ARRAY["</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../src/include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2723"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2719"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN953"><span class='Ref_to_Member'>elements</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="deparse.c.html#LN2722"><span class='Ref_To_Local'>first</span></a><span class='Parentheses'>) 
</span>            <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2721"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>", "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="deparse.c.html#LN145"><span class='Ref_to_Proto'>deparseExpr</span></a><span class='Parentheses'>(</span><a href="../../src/include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2723"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN2719"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="deparse.c.html#LN2722"><span class='Ref_To_Local'>first</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="../../src/backend/replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2721"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>']'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* If the array is empty, we need an explicit cast to the array type. */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN2719"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN953"><span class='Ref_to_Member'>elements</span></a> <span class='Operator'>== </span><a href="../../src/include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Parentheses'>) 
</span>        <a href="../../src/bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2721"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"::%s"</span><span class='Delimiter'>, 
</span>                         <a href="deparse.c.html#LN121"><span class='Ref_to_Proto'>deparse_type_name</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2719"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN950"><span class='Ref_to_Member'>array_typeid</span></a><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end deparseArrayExpr &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Deparse an Aggref node. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN2745"></a><span class='Declare_Function'>deparseAggref</span><span class='Parentheses'>(</span><a href="../../src/include/nodes/primnodes.h.html#LN290"><span class='Ref_to_Struct'>Aggref</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN96"><span class='Ref_to_Struct'>deparse_expr_cxt</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2747"></a>    <a href="../../src/include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><a href="deparse.c.html#LN2745"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="deparse.c.html#LN103"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>; 
</span><a name="LN2748"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>use_variadic</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Only basic, non-split aggregation accepted. */ 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="deparse.c.html#LN2745"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN309"><span class='Ref_to_Member'>aggsplit</span></a> <span class='Operator'>== </span><a href="../../src/include/nodes/nodes.h.html#LN758"><span class='Ref_to_EnumConst'>AGGSPLIT_SIMPLE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Check if need to print VARIADIC (cf. ruleutils.c) */ 
</span>    <a href="deparse.c.html#LN2748"><span class='Ref_To_Local'>use_variadic</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN2745"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN305"><span class='Ref_to_Member'>aggvariadic</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Find aggregate name from aggfnoid which is a pg_proc entry */ 
</span>    <a href="deparse.c.html#LN179"><span class='Ref_to_Proto'>appendFunctionName</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2745"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN293"><span class='Ref_to_Member'>aggfnoid</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2745"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../src/backend/replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2747"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'('</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Add DISTINCT */ 
</span>    <a href="../../src/bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2747"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"%s"</span><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="deparse.c.html#LN2745"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN302"><span class='Ref_to_Member'>aggdistinct</span></a> <span class='Operator'>!= </span><a href="../../src/include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='String'>"DISTINCT "</span> <span class='Operator'>: </span><span class='String'>""</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../src/include/catalog/pg_aggregate.h.html#LN128"><span class='Ref_to_Macro'>AGGKIND_IS_ORDERED_SET</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2745"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN307"><span class='Ref_to_Member'>aggkind</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Add WITHIN GROUP (ORDER BY ..) */ 
</span><a name="LN2766"></a>        <a href="../../src/include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>arg</span><span class='Delimiter'>; 
</span><a name="LN2767"></a>        <span class='Keyword'>bool</span>        <span class='Declare_Local'>first</span> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
        <span class='Debug'>Assert</span><span class='Parentheses'>(</span><span class='Operator'>!</span><a href="deparse.c.html#LN2745"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN305"><span class='Ref_to_Member'>aggvariadic</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="deparse.c.html#LN2745"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN301"><span class='Ref_to_Member'>aggorder</span></a> <span class='Operator'>!= </span><a href="../../src/include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../src/include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2766"><span class='Ref_To_Local'>arg</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2745"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN299"><span class='Ref_to_Member'>aggdirectargs</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="deparse.c.html#LN2767"><span class='Ref_To_Local'>first</span></a><span class='Parentheses'>) 
</span>                <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2747"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>", "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="deparse.c.html#LN2767"><span class='Ref_To_Local'>first</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
            <a href="deparse.c.html#LN145"><span class='Ref_to_Proto'>deparseExpr</span></a><span class='Parentheses'>((</span><a href="../../src/include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../src/include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2766"><span class='Ref_To_Local'>arg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN2745"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2747"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>") WITHIN GROUP (ORDER BY "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="deparse.c.html#LN177"><span class='Ref_to_Proto'>appendAggOrderBy</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2745"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN301"><span class='Ref_to_Member'>aggorder</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2745"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN300"><span class='Ref_to_Member'>args</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2745"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if AGGKIND_IS_ORDERED_SE... &raquo; </span> 
    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* aggstar can be set only in zero-argument aggregates */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN2745"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN304"><span class='Ref_to_Member'>aggstar</span></a><span class='Parentheses'>) 
</span>            <a href="../../src/backend/replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2747"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'*'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span><a name="LN2791"></a>            <a href="../../src/include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>arg</span><span class='Delimiter'>; 
</span><a name="LN2792"></a>            <span class='Keyword'>bool</span>        <span class='Declare_Local'>first</span> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* Add all the arguments */ 
</span>            <a href="../../src/include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2791"><span class='Ref_To_Local'>arg</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2745"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN300"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span><a name="LN2797"></a>                <a href="../../src/include/nodes/primnodes.h.html#LN1363"><span class='Ref_to_Struct'>TargetEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>tle</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../src/include/nodes/primnodes.h.html#LN1363"><span class='Ref_to_Struct'>TargetEntry</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../src/include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2791"><span class='Ref_To_Local'>arg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2798"></a>                <a href="../../src/include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>n</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../src/include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN2797"><span class='Ref_To_Local'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN1366"><span class='Ref_to_Member'>expr</span></a><span class='Delimiter'>; 
</span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN2797"><span class='Ref_To_Local'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN1373"><span class='Ref_to_Member'>resjunk</span></a><span class='Parentheses'>) 
</span>                    <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="deparse.c.html#LN2792"><span class='Ref_To_Local'>first</span></a><span class='Parentheses'>) 
</span>                    <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2747"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>", "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="deparse.c.html#LN2792"><span class='Ref_To_Local'>first</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* Add VARIADIC */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN2748"><span class='Ref_To_Local'>use_variadic</span></a> <span class='Operator'>&& </span><a href="../../src/include/nodes/pg_list.h.html#LN104"><span class='Ref_to_Macro'>lnext</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2791"><span class='Ref_To_Local'>arg</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
                    <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2747"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"VARIADIC "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <a href="deparse.c.html#LN145"><span class='Ref_to_Proto'>deparseExpr</span></a><span class='Parentheses'>((</span><a href="../../src/include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN2798"><span class='Ref_To_Local'>n</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2745"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
 
        <span class='Comment_Multi_Line'>/* Add ORDER BY */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN2745"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN301"><span class='Ref_to_Member'>aggorder</span></a> <span class='Operator'>!= </span><a href="../../src/include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2747"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" ORDER BY "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="deparse.c.html#LN177"><span class='Ref_to_Proto'>appendAggOrderBy</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2745"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN301"><span class='Ref_to_Member'>aggorder</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2745"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN300"><span class='Ref_to_Member'>args</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2745"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* Add FILTER (WHERE ..) */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN2745"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN303"><span class='Ref_to_Member'>aggfilter</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2747"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>") FILTER (WHERE "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="deparse.c.html#LN145"><span class='Ref_to_Proto'>deparseExpr</span></a><span class='Parentheses'>((</span><a href="../../src/include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN2745"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN303"><span class='Ref_to_Member'>aggfilter</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2745"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../src/backend/replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2747"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end deparseAggref &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Append ORDER BY within aggregate function. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN2837"></a><span class='Declare_Function'>appendAggOrderBy</span><span class='Parentheses'>(</span><a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>orderList</span><span class='Delimiter'>, </span><a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>targetList</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN96"><span class='Ref_to_Struct'>deparse_expr_cxt</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2839"></a>    <a href="../../src/include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><a href="deparse.c.html#LN2837"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="deparse.c.html#LN103"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>; 
</span><a name="LN2840"></a>    <a href="../../src/include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc</span><span class='Delimiter'>; 
</span><a name="LN2841"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>first</span> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
    <a href="../../src/include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2840"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2837"><span class='Ref_to_Parameter'>orderList</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN2845"></a>        <a href="../../src/include/nodes/parsenodes.h.html#LN1161"><span class='Ref_to_Struct'>SortGroupClause</span></a> <span class='Operator'>*</span><span class='Declare_Local'>srt</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../src/include/nodes/parsenodes.h.html#LN1161"><span class='Ref_to_Struct'>SortGroupClause</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../src/include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2840"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2846"></a>        <a href="../../src/include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>sortexpr</span><span class='Delimiter'>; 
</span><a name="LN2847"></a>        <a href="../../src/include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>sortcoltype</span><span class='Delimiter'>; 
</span><a name="LN2848"></a>        <a href="../../src/include/utils/typcache.h.html#LN28"><span class='Ref_to_Struct'>TypeCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>typentry</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="deparse.c.html#LN2841"><span class='Ref_To_Local'>first</span></a><span class='Parentheses'>) 
</span>            <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2839"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>", "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="deparse.c.html#LN2841"><span class='Ref_To_Local'>first</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
        <a href="deparse.c.html#LN2846"><span class='Ref_To_Local'>sortexpr</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN180"><span class='Ref_to_Proto'>deparseSortGroupClause</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2845"><span class='Ref_To_Local'>srt</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/parsenodes.h.html#LN1164"><span class='Ref_to_Member'>tleSortGroupRef</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2837"><span class='Ref_to_Parameter'>targetList</span></a><span class='Delimiter'>, 
</span>                                          <a href="deparse.c.html#LN2837"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="deparse.c.html#LN2847"><span class='Ref_To_Local'>sortcoltype</span></a> <span class='Operator'>= </span><a href="../../src/include/nodes/nodeFuncs.h.html#LN31"><span class='Ref_to_Proto'>exprType</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2846"><span class='Ref_To_Local'>sortexpr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* See whether operator is default &LT; or &GT; for datatype */ 
</span>        <a href="deparse.c.html#LN2848"><span class='Ref_To_Local'>typentry</span></a> <span class='Operator'>= </span><a href="../../src/include/utils/typcache.h.html#LN142"><span class='Ref_to_Proto'>lookup_type_cache</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2847"><span class='Ref_To_Local'>sortcoltype</span></a><span class='Delimiter'>, 
</span>                                     <a href="../../src/include/utils/typcache.h.html#LN110"><span class='Ref_to_Const'>TYPECACHE_LT_OPR</span></a> <span class='Operator'>| </span><a href="../../src/include/utils/typcache.h.html#LN111"><span class='Ref_to_Const'>TYPECACHE_GT_OPR</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN2845"><span class='Ref_To_Local'>srt</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/parsenodes.h.html#LN1166"><span class='Ref_to_Member'>sortop</span></a> <span class='Operator'>== </span><a href="deparse.c.html#LN2848"><span class='Ref_To_Local'>typentry</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/utils/typcache.h.html#LN54"><span class='Ref_to_Member'>lt_opr</span></a><span class='Parentheses'>) 
</span>            <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2839"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" ASC"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN2845"><span class='Ref_To_Local'>srt</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/parsenodes.h.html#LN1166"><span class='Ref_to_Member'>sortop</span></a> <span class='Operator'>== </span><a href="deparse.c.html#LN2848"><span class='Ref_To_Local'>typentry</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/utils/typcache.h.html#LN55"><span class='Ref_to_Member'>gt_opr</span></a><span class='Parentheses'>) 
</span>            <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2839"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" DESC"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span><a name="LN2866"></a>            <a href="../../src/include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>opertup</span><span class='Delimiter'>; 
</span><a name="LN2867"></a>            <a href="../../src/include/catalog/pg_operator.h.html#LN56"><span class='Ref_to_Typedef'>Form_pg_operator</span></a> <span class='Declare_Local'>operform</span><span class='Delimiter'>; 
</span> 
            <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2839"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" USING "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* Append operator name. */ 
</span>            <a href="deparse.c.html#LN2866"><span class='Ref_To_Local'>opertup</span></a> <span class='Operator'>= </span><a href="../../src/include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../src/include/utils/syscache.h.html#LN71"><span class='Ref_to_EnumConst'>OPEROID</span></a><span class='Delimiter'>, </span><a href="../../src/include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2845"><span class='Ref_To_Local'>srt</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/parsenodes.h.html#LN1166"><span class='Ref_to_Member'>sortop</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../src/include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2866"><span class='Ref_To_Local'>opertup</span></a><span class='Parentheses'>))</span> 
                <a href="../../src/backend/bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../src/include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"cache lookup failed for operator %u"</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN2845"><span class='Ref_To_Local'>srt</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/parsenodes.h.html#LN1166"><span class='Ref_to_Member'>sortop</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="deparse.c.html#LN2867"><span class='Ref_To_Local'>operform</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../src/include/catalog/pg_operator.h.html#LN56"><span class='Ref_to_Typedef'>Form_pg_operator</span></a><span class='Parentheses'>) </span><a href="../../src/include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2866"><span class='Ref_To_Local'>opertup</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="deparse.c.html#LN152"><span class='Ref_to_Proto'>deparseOperatorName</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2839"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2867"><span class='Ref_To_Local'>operform</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../src/include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2866"><span class='Ref_To_Local'>opertup</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN2845"><span class='Ref_To_Local'>srt</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/parsenodes.h.html#LN1167"><span class='Ref_to_Member'>nulls_first</span></a><span class='Parentheses'>) 
</span>            <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2839"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" NULLS FIRST"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2839"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" NULLS LAST"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
}</span><span class='Auto_Annotations'> &laquo; end appendAggOrderBy &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Print the representation of a parameter to be sent to the remote side. 
 * 
 * Note: we always label the Param's type explicitly rather than relying on 
 * transmitting a numeric type OID in PQexecParams().  This allows us to 
 * avoid assuming that types have the same OIDs on the remote side as they 
 * do locally --- they need only have the same names. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN2896"></a><span class='Declare_Function'>printRemoteParam</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>paramindex</span><span class='Delimiter'>, </span><a href="../../src/include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>paramtype</span><span class='Delimiter'>, </span><a href="../../src/include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a> <span class='Declare_Parameter'>paramtypmod</span><span class='Delimiter'>, 
</span><a name="LN2897"></a>                 <a href="deparse.c.html#LN96"><span class='Ref_to_Struct'>deparse_expr_cxt</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2899"></a>    <a href="../../src/include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><a href="deparse.c.html#LN2897"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="deparse.c.html#LN103"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>; 
</span><a name="LN2900"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>ptypename</span> <span class='Operator'>= </span><a href="deparse.c.html#LN121"><span class='Ref_to_Proto'>deparse_type_name</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2896"><span class='Ref_to_Parameter'>paramtype</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2896"><span class='Ref_to_Parameter'>paramtypmod</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../src/bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2899"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"$%d::%s"</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN2896"><span class='Ref_to_Parameter'>paramindex</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2900"><span class='Ref_To_Local'>ptypename</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Print the representation of a placeholder for a parameter that will be 
 * sent to the remote side at execution time. 
 * 
 * This is used when we're just trying to EXPLAIN the remote query. 
 * We don't have the actual value of the runtime parameter yet, and we don't 
 * want the remote planner to generate a plan that depends on such a value 
 * anyway.  Thus, we can't do something simple like "$1::paramtype". 
 * Instead, we emit "((SELECT null::paramtype)::paramtype)". 
 * In all extant versions of Postgres, the planner will see that as an unknown 
 * constant value, which is what we want.  This might need adjustment if we 
 * ever make the planner flatten scalar subqueries.  Note: the reason for the 
 * apparently useless outer cast is to ensure that the representation as a 
 * whole will be parsed as an a_expr and not a select_with_parens; the latter 
 * would do the wrong thing in the context "x = ANY(...)". 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN2922"></a><span class='Declare_Function'>printRemotePlaceholder</span><span class='Parentheses'>(</span><a href="../../src/include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>paramtype</span><span class='Delimiter'>, </span><a href="../../src/include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a> <span class='Declare_Parameter'>paramtypmod</span><span class='Delimiter'>, 
</span><a name="LN2923"></a>                       <a href="deparse.c.html#LN96"><span class='Ref_to_Struct'>deparse_expr_cxt</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2925"></a>    <a href="../../src/include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><a href="deparse.c.html#LN2923"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="deparse.c.html#LN103"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>; 
</span><a name="LN2926"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>ptypename</span> <span class='Operator'>= </span><a href="deparse.c.html#LN121"><span class='Ref_to_Proto'>deparse_type_name</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2922"><span class='Ref_to_Parameter'>paramtype</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2922"><span class='Ref_to_Parameter'>paramtypmod</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../src/bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2925"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"((SELECT null::%s)::%s)"</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN2926"><span class='Ref_To_Local'>ptypename</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2926"><span class='Ref_To_Local'>ptypename</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Deparse GROUP BY clause. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN2935"></a><span class='Declare_Function'>appendGroupByClause</span><span class='Parentheses'>(</span><a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tlist</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN96"><span class='Ref_to_Struct'>deparse_expr_cxt</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2937"></a>    <a href="../../src/include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><a href="deparse.c.html#LN2935"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="deparse.c.html#LN103"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>; 
</span><a name="LN2938"></a>    <a href="../../src/include/nodes/parsenodes.h.html#LN105"><span class='Ref_to_Struct'>Query</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>query</span> <span class='Operator'>= </span><a href="deparse.c.html#LN2935"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="deparse.c.html#LN98"><span class='Ref_to_Member'>root</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/relation.h.html#LN154"><span class='Ref_to_Member'>parse</span></a><span class='Delimiter'>; 
</span><a name="LN2939"></a>    <a href="../../src/include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc</span><span class='Delimiter'>; 
</span><a name="LN2940"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>first</span> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Nothing to be done, if there's no GROUP BY clause in the query. */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="deparse.c.html#LN2938"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/parsenodes.h.html#LN145"><span class='Ref_to_Member'>groupClause</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <a href="../../src/bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2937"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" GROUP BY "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Queries with grouping sets are not pushed down, so we don't expect 
     * grouping sets here. 
     */ 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><span class='Operator'>!</span><a href="deparse.c.html#LN2938"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/parsenodes.h.html#LN147"><span class='Ref_to_Member'>groupingSets</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../src/include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2939"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2938"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/parsenodes.h.html#LN145"><span class='Ref_to_Member'>groupClause</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN2956"></a>        <a href="../../src/include/nodes/parsenodes.h.html#LN1161"><span class='Ref_to_Struct'>SortGroupClause</span></a> <span class='Operator'>*</span><span class='Declare_Local'>grp</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../src/include/nodes/parsenodes.h.html#LN1161"><span class='Ref_to_Struct'>SortGroupClause</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../src/include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2939"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="deparse.c.html#LN2940"><span class='Ref_To_Local'>first</span></a><span class='Parentheses'>) 
</span>            <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2937"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>", "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="deparse.c.html#LN2940"><span class='Ref_To_Local'>first</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
        <a href="deparse.c.html#LN180"><span class='Ref_to_Proto'>deparseSortGroupClause</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2956"><span class='Ref_To_Local'>grp</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/parsenodes.h.html#LN1164"><span class='Ref_to_Member'>tleSortGroupRef</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2935"><span class='Ref_to_Parameter'>tlist</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2935"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
}</span><span class='Auto_Annotations'> &laquo; end appendGroupByClause &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Deparse ORDER BY clause according to the given pathkeys for given base 
 * relation. From given pathkeys expressions belonging entirely to the given 
 * base relation are obtained and deparsed. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN2972"></a><span class='Declare_Function'>appendOrderByClause</span><span class='Parentheses'>(</span><a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pathkeys</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN96"><span class='Ref_to_Struct'>deparse_expr_cxt</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2974"></a>    <a href="../../src/include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lcell</span><span class='Delimiter'>; 
</span><a name="LN2975"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>nestlevel</span><span class='Delimiter'>; 
</span><a name="LN2976"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>delim</span> <span class='Operator'>= </span><span class='String'>" "</span><span class='Delimiter'>; 
</span><a name="LN2977"></a>    <a href="../../src/include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>baserel</span> <span class='Operator'>= </span><a href="deparse.c.html#LN2972"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="deparse.c.html#LN100"><span class='Ref_to_Member'>scanrel</span></a><span class='Delimiter'>; 
</span><a name="LN2978"></a>    <a href="../../src/include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><a href="deparse.c.html#LN2972"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="deparse.c.html#LN103"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Make sure any constants in the exprs are printed portably */ 
</span>    <a href="deparse.c.html#LN2975"><span class='Ref_To_Local'>nestlevel</span></a> <span class='Operator'>= </span><a href="postgres_fdw.h.html#LN113"><span class='Ref_to_Proto'>set_transmission_modes</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="../../src/bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2978"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" ORDER BY"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../src/include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2974"><span class='Ref_To_Local'>lcell</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2972"><span class='Ref_to_Parameter'>pathkeys</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN2986"></a>        <a href="../../src/include/nodes/relation.h.html#LN845"><span class='Ref_to_Struct'>PathKey</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>pathkey</span> <span class='Operator'>= </span><a href="../../src/include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2974"><span class='Ref_To_Local'>lcell</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2987"></a>        <a href="../../src/include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>em_expr</span><span class='Delimiter'>; 
</span> 
        <a href="deparse.c.html#LN2987"><span class='Ref_To_Local'>em_expr</span></a> <span class='Operator'>= </span><a href="postgres_fdw.h.html#LN172"><span class='Ref_to_Proto'>find_em_expr_for_rel</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2986"><span class='Ref_To_Local'>pathkey</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/relation.h.html#LN849"><span class='Ref_to_Member'>pk_eclass</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2977"><span class='Ref_To_Local'>baserel</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="deparse.c.html#LN2987"><span class='Ref_To_Local'>em_expr</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2978"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2976"><span class='Ref_To_Local'>delim</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="deparse.c.html#LN145"><span class='Ref_to_Proto'>deparseExpr</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2987"><span class='Ref_To_Local'>em_expr</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN2972"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN2986"><span class='Ref_To_Local'>pathkey</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/relation.h.html#LN851"><span class='Ref_to_Member'>pk_strategy</span></a> <span class='Operator'>== </span><a href="../../src/include/access/stratnum.h.html#LN28"><span class='Ref_to_Const'>BTLessStrategyNumber</span></a><span class='Parentheses'>) 
</span>            <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2978"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" ASC"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2978"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" DESC"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN2986"><span class='Ref_To_Local'>pathkey</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/relation.h.html#LN852"><span class='Ref_to_Member'>pk_nulls_first</span></a><span class='Parentheses'>) 
</span>            <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2978"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" NULLS FIRST"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2978"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" NULLS LAST"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="deparse.c.html#LN2976"><span class='Ref_To_Local'>delim</span></a> <span class='Operator'>= </span><span class='String'>", "</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="postgres_fdw.h.html#LN114"><span class='Ref_to_Proto'>reset_transmission_modes</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN2975"><span class='Ref_To_Local'>nestlevel</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end appendOrderByClause &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * appendFunctionName 
 *      Deparses function name from given function oid. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN3014"></a><span class='Declare_Function'>appendFunctionName</span><span class='Parentheses'>(</span><a href="../../src/include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>funcid</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN96"><span class='Ref_to_Struct'>deparse_expr_cxt</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3016"></a>    <a href="../../src/include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><a href="deparse.c.html#LN3014"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="deparse.c.html#LN103"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>; 
</span><a name="LN3017"></a>    <a href="../../src/include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>proctup</span><span class='Delimiter'>; 
</span><a name="LN3018"></a>    <a href="../../src/include/catalog/pg_proc.h.html#LN82"><span class='Ref_to_Typedef'>Form_pg_proc</span></a> <span class='Declare_Local'>procform</span><span class='Delimiter'>; 
</span><a name="LN3019"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>proname</span><span class='Delimiter'>; 
</span> 
    <a href="deparse.c.html#LN3017"><span class='Ref_To_Local'>proctup</span></a> <span class='Operator'>= </span><a href="../../src/include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../src/include/utils/syscache.h.html#LN76"><span class='Ref_to_EnumConst'>PROCOID</span></a><span class='Delimiter'>, </span><a href="../../src/include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN3014"><span class='Ref_to_Parameter'>funcid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../src/include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN3017"><span class='Ref_To_Local'>proctup</span></a><span class='Parentheses'>))</span> 
        <a href="../../src/backend/bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../src/include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"cache lookup failed for function %u"</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN3014"><span class='Ref_to_Parameter'>funcid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="deparse.c.html#LN3018"><span class='Ref_To_Local'>procform</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../src/include/catalog/pg_proc.h.html#LN82"><span class='Ref_to_Typedef'>Form_pg_proc</span></a><span class='Parentheses'>) </span><a href="../../src/include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN3017"><span class='Ref_To_Local'>proctup</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Print schema name only if it's not pg_catalog */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN3018"><span class='Ref_To_Local'>procform</span></a><span class='Operator'>-&GT;</span>pronamespace <span class='Operator'>!= </span><a href="../../src/include/catalog/pg_namespace.h.html#LN70"><span class='Ref_to_Const'>PG_CATALOG_NAMESPACE</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN3029"></a>        <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>schemaname</span><span class='Delimiter'>; 
</span> 
        <a href="deparse.c.html#LN3029"><span class='Ref_To_Local'>schemaname</span></a> <span class='Operator'>= </span><a href="../../src/include/utils/lsyscache.h.html#LN175"><span class='Ref_to_Proto'>get_namespace_name</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN3018"><span class='Ref_To_Local'>procform</span></a><span class='Operator'>-&GT;</span>pronamespace<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../src/bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN3016"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"%s."</span><span class='Delimiter'>, </span><a href="../../src/include/utils/builtins.h.html#LN77"><span class='Ref_to_Proto'>quote_identifier</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN3029"><span class='Ref_To_Local'>schemaname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* Always print the function name */ 
</span>    <a href="deparse.c.html#LN3019"><span class='Ref_To_Local'>proname</span></a> <span class='Operator'>= </span><a href="../../src/include/c.h.html#LN498"><span class='Ref_to_Macro'>NameStr</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN3018"><span class='Ref_To_Local'>procform</span></a><span class='Operator'>-&GT;</span>proname<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../src/bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN3016"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"%s"</span><span class='Delimiter'>, </span><a href="../../src/include/utils/builtins.h.html#LN77"><span class='Ref_to_Proto'>quote_identifier</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN3019"><span class='Ref_To_Local'>proname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../src/include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN3017"><span class='Ref_To_Local'>proctup</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end appendFunctionName &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Appends a sort or group clause. 
 * 
 * Like get_rule_sortgroupclause(), returns the expression tree, so caller 
 * need not find it again. 
 */ 
</span><span class='Keyword'>static </span><a href="../../src/include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>* 
</span><a name="LN3049"></a><span class='Declare_Function'>deparseSortGroupClause</span><span class='Parentheses'>(</span><a href="../../src/include/c.h.html#LN364"><span class='Ref_to_Typedef'>Index</span></a> <span class='Declare_Parameter'>ref</span><span class='Delimiter'>, </span><a href="../../src/include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tlist</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN96"><span class='Ref_to_Struct'>deparse_expr_cxt</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3051"></a>    <a href="../../src/include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><a href="deparse.c.html#LN3049"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="deparse.c.html#LN103"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>; 
</span><a name="LN3052"></a>    <a href="../../src/include/nodes/primnodes.h.html#LN1363"><span class='Ref_to_Struct'>TargetEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>tle</span><span class='Delimiter'>; 
</span><a name="LN3053"></a>    <a href="../../src/include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>expr</span><span class='Delimiter'>; 
</span> 
    <a href="deparse.c.html#LN3052"><span class='Ref_To_Local'>tle</span></a> <span class='Operator'>= </span><a href="../../src/include/optimizer/tlist.h.html#LN35"><span class='Ref_to_Proto'>get_sortgroupref_tle</span></a><span class='Parentheses'>(</span><span class='Keyword'>ref</span><span class='Delimiter'>, </span><a href="deparse.c.html#LN3049"><span class='Ref_to_Parameter'>tlist</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="deparse.c.html#LN3053"><span class='Ref_To_Local'>expr</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN3052"><span class='Ref_To_Local'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN1366"><span class='Ref_to_Member'>expr</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN3053"><span class='Ref_To_Local'>expr</span></a> <span class='Operator'>&& </span><a href="../../src/include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN3053"><span class='Ref_To_Local'>expr</span></a><span class='Delimiter'>, </span><a href="../../src/include/nodes/primnodes.h.html#LN188"><span class='Ref_to_Struct'>Const</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * Force a typecast here so that we don't emit something like "GROUP 
         * BY 2", which will be misconstrued as a column position rather than 
         * a constant. 
         */ 
</span>        <a href="deparse.c.html#LN147"><span class='Ref_to_Proto'>deparseConst</span></a><span class='Parentheses'>((</span><a href="../../src/include/nodes/primnodes.h.html#LN188"><span class='Ref_to_Struct'>Const</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN3053"><span class='Ref_To_Local'>expr</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN3049"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="deparse.c.html#LN3053"><span class='Ref_To_Local'>expr</span></a> <span class='Operator'>|| </span><a href="../../src/include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN3053"><span class='Ref_To_Local'>expr</span></a><span class='Delimiter'>, </span><a href="../../src/include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a><span class='Parentheses'>))</span> 
        <a href="deparse.c.html#LN145"><span class='Ref_to_Proto'>deparseExpr</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN3053"><span class='Ref_To_Local'>expr</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN3049"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Always parenthesize the expression. */ 
</span>        <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN3051"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"("</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="deparse.c.html#LN145"><span class='Ref_to_Proto'>deparseExpr</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN3053"><span class='Ref_To_Local'>expr</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN3049"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../src/bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN3051"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>")"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>return</span> <span class='Parentheses'>(</span><a href="../../src/include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN3053"><span class='Ref_To_Local'>expr</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end deparseSortGroupClause &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* 
 * Returns true if given Var is deparsed as a subquery output column, in 
 * which case, *relno and *colno are set to the IDs for the relation and 
 * column alias to the Var provided by the subquery. 
 */ 
</span><span class='Keyword'>static bool 
</span><a name="LN3087"></a><span class='Declare_Function'>is_subquery_var</span><span class='Parentheses'>(</span><a href="../../src/include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><a href="../../src/include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>foreignrel</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>relno</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>colno</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3089"></a>    <a href="postgres_fdw.h.html#LN29"><span class='Ref_to_Struct'>PgFdwRelationInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>fpinfo</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="postgres_fdw.h.html#LN29"><span class='Ref_to_Struct'>PgFdwRelationInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN3087"><span class='Ref_to_Parameter'>foreignrel</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/relation.h.html#LN576"><span class='Ref_to_Member'>fdw_private</span></a><span class='Delimiter'>; 
</span><a name="LN3090"></a>    <a href="../../src/include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>outerrel</span> <span class='Operator'>= </span><a href="deparse.c.html#LN3089"><span class='Ref_To_Local'>fpinfo</span></a><span class='Operator'>-&GT;</span><a href="postgres_fdw.h.html#LN88"><span class='Ref_to_Member'>outerrel</span></a><span class='Delimiter'>; 
</span><a name="LN3091"></a>    <a href="../../src/include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>innerrel</span> <span class='Operator'>= </span><a href="deparse.c.html#LN3089"><span class='Ref_To_Local'>fpinfo</span></a><span class='Operator'>-&GT;</span><a href="postgres_fdw.h.html#LN89"><span class='Ref_to_Member'>innerrel</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Should only be called in these cases. */ 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="../../src/include/nodes/relation.h.html#LN504"><span class='Ref_to_Macro'>IS_SIMPLE_REL</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN3087"><span class='Ref_to_Parameter'>foreignrel</span></a><span class='Parentheses'>) </span><span class='Operator'>|| </span><a href="../../src/include/nodes/relation.h.html#LN509"><span class='Ref_to_Macro'>IS_JOIN_REL</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN3087"><span class='Ref_to_Parameter'>foreignrel</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If the given relation isn't a join relation, it doesn't have any lower 
     * subqueries, so the Var isn't a subquery output column. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../src/include/nodes/relation.h.html#LN509"><span class='Ref_to_Macro'>IS_JOIN_REL</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN3087"><span class='Ref_to_Parameter'>foreignrel</span></a><span class='Parentheses'>))</span> 
        <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If the Var doesn't belong to any lower subqueries, it isn't a subquery 
     * output column. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../src/include/nodes/bitmapset.h.html#LN75"><span class='Ref_to_Proto'>bms_is_member</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN3087"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN165"><span class='Ref_to_Member'>varno</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN3089"><span class='Ref_To_Local'>fpinfo</span></a><span class='Operator'>-&GT;</span><a href="postgres_fdw.h.html#LN102"><span class='Ref_to_Member'>lower_subquery_rels</span></a><span class='Parentheses'>))</span> 
        <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../src/include/nodes/bitmapset.h.html#LN75"><span class='Ref_to_Proto'>bms_is_member</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN3087"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN165"><span class='Ref_to_Member'>varno</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN3090"><span class='Ref_To_Local'>outerrel</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/relation.h.html#LN524"><span class='Ref_to_Member'>relids</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * If outer relation is deparsed as a subquery, the Var is an output 
         * column of the subquery; get the IDs for the relation/column alias. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN3089"><span class='Ref_To_Local'>fpinfo</span></a><span class='Operator'>-&GT;</span><a href="postgres_fdw.h.html#LN98"><span class='Ref_to_Member'>make_outerrel_subquery</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="deparse.c.html#LN188"><span class='Ref_to_Proto'>get_relation_column_alias_ids</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN3087"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN3090"><span class='Ref_To_Local'>outerrel</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN3087"><span class='Ref_to_Parameter'>relno</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN3087"><span class='Ref_to_Parameter'>colno</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Comment_Multi_Line'>/* Otherwise, recurse into the outer relation. */ 
</span>        <span class='Control'>return</span> <a href="deparse.c.html#LN186"><span class='Ref_to_Proto'>is_subquery_var</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN3087"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN3090"><span class='Ref_To_Local'>outerrel</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN3087"><span class='Ref_to_Parameter'>relno</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN3087"><span class='Ref_to_Parameter'>colno</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="../../src/include/nodes/bitmapset.h.html#LN75"><span class='Ref_to_Proto'>bms_is_member</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN3087"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/primnodes.h.html#LN165"><span class='Ref_to_Member'>varno</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN3091"><span class='Ref_To_Local'>innerrel</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/relation.h.html#LN524"><span class='Ref_to_Member'>relids</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * If inner relation is deparsed as a subquery, the Var is an output 
         * column of the subquery; get the IDs for the relation/column alias. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="deparse.c.html#LN3089"><span class='Ref_To_Local'>fpinfo</span></a><span class='Operator'>-&GT;</span><a href="postgres_fdw.h.html#LN100"><span class='Ref_to_Member'>make_innerrel_subquery</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="deparse.c.html#LN188"><span class='Ref_to_Proto'>get_relation_column_alias_ids</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN3087"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN3091"><span class='Ref_To_Local'>innerrel</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN3087"><span class='Ref_to_Parameter'>relno</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN3087"><span class='Ref_to_Parameter'>colno</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Comment_Multi_Line'>/* Otherwise, recurse into the inner relation. */ 
</span>        <span class='Control'>return</span> <a href="deparse.c.html#LN186"><span class='Ref_to_Proto'>is_subquery_var</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN3087"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN3091"><span class='Ref_To_Local'>innerrel</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN3087"><span class='Ref_to_Parameter'>relno</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN3087"><span class='Ref_to_Parameter'>colno</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
}</span><span class='Auto_Annotations'> &laquo; end is_subquery_var &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Get the IDs for the relation and column alias to given Var belonging to 
 * given relation, which are returned into *relno and *colno. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN3149"></a><span class='Declare_Function'>get_relation_column_alias_ids</span><span class='Parentheses'>(</span><a href="../../src/include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><a href="../../src/include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>foreignrel</span><span class='Delimiter'>, 
</span><a name="LN3150"></a>                              <span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>relno</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>colno</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3152"></a>    <a href="postgres_fdw.h.html#LN29"><span class='Ref_to_Struct'>PgFdwRelationInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>fpinfo</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="postgres_fdw.h.html#LN29"><span class='Ref_to_Struct'>PgFdwRelationInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN3149"><span class='Ref_to_Parameter'>foreignrel</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/relation.h.html#LN576"><span class='Ref_to_Member'>fdw_private</span></a><span class='Delimiter'>; 
</span><a name="LN3153"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN3154"></a>    <a href="../../src/include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Get the relation alias ID */ 
</span>    <span class='Operator'>*</span><a href="deparse.c.html#LN3150"><span class='Ref_to_Parameter'>relno</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN3152"><span class='Ref_To_Local'>fpinfo</span></a><span class='Operator'>-&GT;</span><a href="postgres_fdw.h.html#LN109"><span class='Ref_to_Member'>relation_index</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Get the column alias ID */ 
</span>    <a href="deparse.c.html#LN3153"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <a href="../../src/include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN3154"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="deparse.c.html#LN3149"><span class='Ref_to_Parameter'>foreignrel</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/relation.h.html#LN535"><span class='Ref_to_Member'>reltarget</span></a><span class='Operator'>-&GT;</span><a href="../../src/include/nodes/relation.h.html#LN882"><span class='Ref_to_Member'>exprs</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../src/include/nodes/nodes.h.html#LN626"><span class='Ref_to_Proto'>equal</span></a><span class='Parentheses'>(</span><a href="../../src/include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="deparse.c.html#LN3154"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="../../src/include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="deparse.c.html#LN3149"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Operator'>*</span><a href="deparse.c.html#LN3150"><span class='Ref_to_Parameter'>colno</span></a> <span class='Operator'>= </span><a href="deparse.c.html#LN3153"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>return</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <a href="deparse.c.html#LN3153"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* Shouldn't get here */ 
</span>    <a href="../../src/backend/bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../src/include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"unexpected expression in subquery output"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end get_relation_column_alias_ids &raquo; </span> 
</pre>
<table bgcolor='#c0c0c0' width='100%'><tr><td><a href='../../Contents.html'>Contents</a></td></tr>
</table><hr><p class='blurb' align='center'><a href='http://www.sourceinsight.com'>HTML Created by Source Insight Version 4.00.0084 Built on 2017-02-26</a></p>
</body></html>