<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta name="generator" content="Source Insight Version 4.00.0084 Built on 2017-02-26">
<meta charset='UTF-8' />
<style type='text/css'><!--
TD {background-color: #C0C0C0; font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.blurb {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.filename {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 120%; font-weight: bold; }
.dirname {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 100%; font-weight: bold; margin-top: 2.5em;}
--></style>
<title>src\backend\access\transam\transam.c</title>
<LINK REL=StyleSheet HREF="../../../../C_Cpp_Source_File.css" TYPE='text/css' MEDIA=screen>
</head>
<body bgcolor=#ffffff>
<table bgcolor='#c0c0c0' width='100%'>
<tr><td><p class='filename'><b>src\backend\access\transam\transam.c</b></p></td>
<td align='right'>
Wed Jun 14 08:25:30 2017
</td></tr>
<tr><td><a href='../../../../Contents.html'>Contents</a></td></tr>
</table>
<pre>
<span class='Comment_Multi_Line'>/*------------------------------------------------------------------------- 
 * 
 * transam.c 
 *    postgres transaction (commit) log interface routines 
 * 
 * Portions Copyright (c) 1996-2017, PostgreSQL Global Development Group 
 * Portions Copyright (c) 1994, Regents of the University of California 
 * 
 * 
 * IDENTIFICATION 
 *    src/backend/access/transam/transam.c 
 * 
 * NOTES 
 *    This file contains the high level access-method interface to the 
 *    transaction system. 
 * 
 *------------------------------------------------------------------------- 
 */ 
</span> 
<span class='Keyword'>#include </span><span class='String'>"postgres.h"</span> 
 
<span class='Keyword'>#include </span><span class='String'>"access/clog.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"access/subtrans.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"access/transam.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/snapmgr.h"</span> 
 
<span class='Comment_Multi_Line'>/* 
 * Single-item cache for results of TransactionLogFetch.  It's worth having 
 * such a cache because we frequently find ourselves repeatedly checking the 
 * same XID, for example when scanning a table just after a bulk insert, 
 * update, or delete. 
 */ 
</span><a name="LN32"></a><span class='Keyword'>static </span><a href="../../../include/c.h.html#LN396"><span class='Ref_to_Typedef'>TransactionId</span></a> <span class='Declare_Var'>cachedFetchXid</span> <span class='Operator'>= </span><a href="../../../include/access/transam.h.html#LN30"><span class='Ref_to_Const'>InvalidTransactionId</span></a><span class='Delimiter'>; 
</span><a name="LN33"></a><span class='Keyword'>static </span><a href="../../../include/access/clog.h.html#LN23"><span class='Ref_to_Typedef'>XidStatus</span></a> <span class='Declare_Var'>cachedFetchXidStatus</span><span class='Delimiter'>; 
</span><a name="LN34"></a><span class='Keyword'>static </span><a href="../../../include/access/xlogdefs.h.html#LN20"><span class='Ref_to_Typedef'>XLogRecPtr</span></a> <span class='Declare_Var'>cachedCommitLSN</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* Local functions */ 
</span><a name="LN37"></a><span class='Keyword'>static </span><a href="../../../include/access/clog.h.html#LN23"><span class='Ref_to_Typedef'>XidStatus</span></a> <span class='Declare_Prototype'>TransactionLogFetch</span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN396"><span class='Ref_to_Typedef'>TransactionId</span></a> <span class='Declare_Parameter'>transactionId</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
 
<span class='Comment_Multi_Line'>/* ---------------------------------------------------------------- 
 *      Postgres log access method interface 
 * 
 *      TransactionLogFetch 
 * ---------------------------------------------------------------- 
 */ 
</span> 
<span class='Comment_Multi_Line'>/* 
 * TransactionLogFetch --- fetch commit status of specified transaction id 
 */ 
</span><span class='Keyword'>static </span><a href="../../../include/access/clog.h.html#LN23"><span class='Ref_to_Typedef'>XidStatus</span></a> 
<a name="LN51"></a><span class='Declare_Function'>TransactionLogFetch</span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN396"><span class='Ref_to_Typedef'>TransactionId</span></a> <span class='Declare_Parameter'>transactionId</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN53"></a>    <a href="../../../include/access/clog.h.html#LN23"><span class='Ref_to_Typedef'>XidStatus</span></a>   <span class='Declare_Local'>xidstatus</span><span class='Delimiter'>; 
</span><a name="LN54"></a>    <a href="../../../include/access/xlogdefs.h.html#LN20"><span class='Ref_to_Typedef'>XLogRecPtr</span></a>  <span class='Declare_Local'>xidlsn</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Before going to the commit log manager, check our single item cache to 
     * see if we didn't just check the transaction status a moment ago. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/access/transam.h.html#LN42"><span class='Ref_to_Macro'>TransactionIdEquals</span></a><span class='Parentheses'>(</span><a href="transam.c.html#LN51"><span class='Ref_to_Parameter'>transactionId</span></a><span class='Delimiter'>, </span><a href="transam.c.html#LN32"><span class='Ref_to_Global_Var'>cachedFetchXid</span></a><span class='Parentheses'>))</span> 
        <span class='Control'>return</span> <a href="transam.c.html#LN33"><span class='Ref_to_Global_Var'>cachedFetchXidStatus</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Also, check to see if the transaction ID is a permanent one. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/access/transam.h.html#LN41"><span class='Ref_to_Macro'>TransactionIdIsNormal</span></a><span class='Parentheses'>(</span><a href="transam.c.html#LN51"><span class='Ref_to_Parameter'>transactionId</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/access/transam.h.html#LN42"><span class='Ref_to_Macro'>TransactionIdEquals</span></a><span class='Parentheses'>(</span><a href="transam.c.html#LN51"><span class='Ref_to_Parameter'>transactionId</span></a><span class='Delimiter'>, </span><a href="../../../include/access/transam.h.html#LN31"><span class='Ref_to_Const'>BootstrapTransactionId</span></a><span class='Parentheses'>))</span> 
            <span class='Control'>return</span> <a href="../../../include/access/clog.h.html#LN26"><span class='Ref_to_Const'>TRANSACTION_STATUS_COMMITTED</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/access/transam.h.html#LN42"><span class='Ref_to_Macro'>TransactionIdEquals</span></a><span class='Parentheses'>(</span><a href="transam.c.html#LN51"><span class='Ref_to_Parameter'>transactionId</span></a><span class='Delimiter'>, </span><a href="../../../include/access/transam.h.html#LN32"><span class='Ref_to_Const'>FrozenTransactionId</span></a><span class='Parentheses'>))</span> 
            <span class='Control'>return</span> <a href="../../../include/access/clog.h.html#LN26"><span class='Ref_to_Const'>TRANSACTION_STATUS_COMMITTED</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <a href="../../../include/access/clog.h.html#LN27"><span class='Ref_to_Const'>TRANSACTION_STATUS_ABORTED</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Get the transaction status. 
     */ 
</span>    <a href="transam.c.html#LN53"><span class='Ref_To_Local'>xidstatus</span></a> <span class='Operator'>= </span><a href="../../../include/access/clog.h.html#LN39"><span class='Ref_to_Proto'>TransactionIdGetStatus</span></a><span class='Parentheses'>(</span><a href="transam.c.html#LN51"><span class='Ref_to_Parameter'>transactionId</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="transam.c.html#LN54"><span class='Ref_To_Local'>xidlsn</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Cache it, but DO NOT cache status for unfinished or sub-committed 
     * transactions!  We only cache status that is guaranteed not to change. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="transam.c.html#LN53"><span class='Ref_To_Local'>xidstatus</span></a> <span class='Operator'>!= </span><a href="../../../include/access/clog.h.html#LN25"><span class='Ref_to_Const'>TRANSACTION_STATUS_IN_PROGRESS</span></a> <span class='Operator'>&& 
</span>        <a href="transam.c.html#LN53"><span class='Ref_To_Local'>xidstatus</span></a> <span class='Operator'>!= </span><a href="../../../include/access/clog.h.html#LN28"><span class='Ref_to_Const'>TRANSACTION_STATUS_SUB_COMMITTED</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="transam.c.html#LN32"><span class='Ref_to_Global_Var'>cachedFetchXid</span></a> <span class='Operator'>= </span><a href="transam.c.html#LN51"><span class='Ref_to_Parameter'>transactionId</span></a><span class='Delimiter'>; 
</span>        <a href="transam.c.html#LN33"><span class='Ref_to_Global_Var'>cachedFetchXidStatus</span></a> <span class='Operator'>= </span><a href="transam.c.html#LN53"><span class='Ref_To_Local'>xidstatus</span></a><span class='Delimiter'>; 
</span>        <a href="transam.c.html#LN34"><span class='Ref_to_Global_Var'>cachedCommitLSN</span></a> <span class='Operator'>= </span><a href="transam.c.html#LN54"><span class='Ref_To_Local'>xidlsn</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>return</span> <a href="transam.c.html#LN53"><span class='Ref_To_Local'>xidstatus</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end TransactionLogFetch &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* ---------------------------------------------------------------- 
 *                      Interface functions 
 * 
 *      TransactionIdDidCommit 
 *      TransactionIdDidAbort 
 *      ======== 
 *         these functions test the transaction status of 
 *         a specified transaction id. 
 * 
 *      TransactionIdCommitTree 
 *      TransactionIdAsyncCommitTree 
 *      TransactionIdAbortTree 
 *      ======== 
 *         these functions set the transaction status of the specified 
 *         transaction tree. 
 * 
 * See also TransactionIdIsInProgress, which once was in this module 
 * but now lives in procarray.c. 
 * ---------------------------------------------------------------- 
 */ 
</span> 
<span class='Comment_Multi_Line'>/* 
 * TransactionIdDidCommit 
 *      True iff transaction associated with the identifier did commit. 
 * 
 * Note: 
 *      Assumes transaction identifier is valid and exists in clog. 
 */ 
</span><span class='Keyword'>bool</span>                            <span class='Comment_Single_Line'>/* true if given transaction committed */ 
</span><a name="LN124"></a><span class='Declare_Function'>TransactionIdDidCommit</span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN396"><span class='Ref_to_Typedef'>TransactionId</span></a> <span class='Declare_Parameter'>transactionId</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN126"></a>    <a href="../../../include/access/clog.h.html#LN23"><span class='Ref_to_Typedef'>XidStatus</span></a>   <span class='Declare_Local'>xidstatus</span><span class='Delimiter'>; 
</span> 
    <a href="transam.c.html#LN126"><span class='Ref_To_Local'>xidstatus</span></a> <span class='Operator'>= </span><a href="transam.c.html#LN37"><span class='Ref_to_Proto'>TransactionLogFetch</span></a><span class='Parentheses'>(</span><a href="transam.c.html#LN124"><span class='Ref_to_Parameter'>transactionId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If it's marked committed, it's committed. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="transam.c.html#LN126"><span class='Ref_To_Local'>xidstatus</span></a> <span class='Operator'>== </span><a href="../../../include/access/clog.h.html#LN26"><span class='Ref_to_Const'>TRANSACTION_STATUS_COMMITTED</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If it's marked subcommitted, we have to check the parent recursively. 
     * However, if it's older than TransactionXmin, we can't look at 
     * pg_subtrans; instead assume that the parent crashed without cleaning up 
     * its children. 
     * 
     * Originally we Assert'ed that the result of SubTransGetParent was not 
     * zero. However with the introduction of prepared transactions, there can 
     * be a window just after database startup where we do not have complete 
     * knowledge in pg_subtrans of the transactions after TransactionXmin. 
     * StartupSUBTRANS() has ensured that any missing information will be 
     * zeroed.  Since this case should not happen under normal conditions, it 
     * seems reasonable to emit a WARNING for it. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="transam.c.html#LN126"><span class='Ref_To_Local'>xidstatus</span></a> <span class='Operator'>== </span><a href="../../../include/access/clog.h.html#LN28"><span class='Ref_to_Const'>TRANSACTION_STATUS_SUB_COMMITTED</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN152"></a>        <a href="../../../include/c.h.html#LN396"><span class='Ref_to_Typedef'>TransactionId</span></a> <span class='Declare_Local'>parentXid</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/access/transam.h.html#LN168"><span class='Ref_to_Proto'>TransactionIdPrecedes</span></a><span class='Parentheses'>(</span><a href="transam.c.html#LN124"><span class='Ref_to_Parameter'>transactionId</span></a><span class='Delimiter'>, </span><a href="../../utils/time/snapmgr.c.html#LN163"><span class='Ref_to_Global_Var'>TransactionXmin</span></a><span class='Parentheses'>))</span> 
            <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span>        <a href="transam.c.html#LN152"><span class='Ref_To_Local'>parentXid</span></a> <span class='Operator'>= </span><a href="../../../include/access/subtrans.h.html#LN17"><span class='Ref_to_Proto'>SubTransGetParent</span></a><span class='Parentheses'>(</span><a href="transam.c.html#LN124"><span class='Ref_to_Parameter'>transactionId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/access/transam.h.html#LN40"><span class='Ref_to_Macro'>TransactionIdIsValid</span></a><span class='Parentheses'>(</span><a href="transam.c.html#LN152"><span class='Ref_To_Local'>parentXid</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN39"><span class='Ref_to_Const'>WARNING</span></a><span class='Delimiter'>, </span><span class='String'>"no pg_subtrans entry for subcommitted XID %u"</span><span class='Delimiter'>, 
</span>                 <a href="transam.c.html#LN124"><span class='Ref_to_Parameter'>transactionId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>return</span> <a href="transam.c.html#LN123"><span class='Ref_to_Func'>TransactionIdDidCommit</span></a><span class='Parentheses'>(</span><a href="transam.c.html#LN152"><span class='Ref_To_Local'>parentXid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * It's not committed. 
     */ 
</span>    <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end TransactionIdDidCommit &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * TransactionIdDidAbort 
 *      True iff transaction associated with the identifier did abort. 
 * 
 * Note: 
 *      Assumes transaction identifier is valid and exists in clog. 
 */ 
</span><span class='Keyword'>bool</span>                            <span class='Comment_Single_Line'>/* true if given transaction aborted */ 
</span><a name="LN180"></a><span class='Declare_Function'>TransactionIdDidAbort</span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN396"><span class='Ref_to_Typedef'>TransactionId</span></a> <span class='Declare_Parameter'>transactionId</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN182"></a>    <a href="../../../include/access/clog.h.html#LN23"><span class='Ref_to_Typedef'>XidStatus</span></a>   <span class='Declare_Local'>xidstatus</span><span class='Delimiter'>; 
</span> 
    <a href="transam.c.html#LN182"><span class='Ref_To_Local'>xidstatus</span></a> <span class='Operator'>= </span><a href="transam.c.html#LN37"><span class='Ref_to_Proto'>TransactionLogFetch</span></a><span class='Parentheses'>(</span><a href="transam.c.html#LN180"><span class='Ref_to_Parameter'>transactionId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If it's marked aborted, it's aborted. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="transam.c.html#LN182"><span class='Ref_To_Local'>xidstatus</span></a> <span class='Operator'>== </span><a href="../../../include/access/clog.h.html#LN27"><span class='Ref_to_Const'>TRANSACTION_STATUS_ABORTED</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If it's marked subcommitted, we have to check the parent recursively. 
     * However, if it's older than TransactionXmin, we can't look at 
     * pg_subtrans; instead assume that the parent crashed without cleaning up 
     * its children. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="transam.c.html#LN182"><span class='Ref_To_Local'>xidstatus</span></a> <span class='Operator'>== </span><a href="../../../include/access/clog.h.html#LN28"><span class='Ref_to_Const'>TRANSACTION_STATUS_SUB_COMMITTED</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN200"></a>        <a href="../../../include/c.h.html#LN396"><span class='Ref_to_Typedef'>TransactionId</span></a> <span class='Declare_Local'>parentXid</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/access/transam.h.html#LN168"><span class='Ref_to_Proto'>TransactionIdPrecedes</span></a><span class='Parentheses'>(</span><a href="transam.c.html#LN180"><span class='Ref_to_Parameter'>transactionId</span></a><span class='Delimiter'>, </span><a href="../../utils/time/snapmgr.c.html#LN163"><span class='Ref_to_Global_Var'>TransactionXmin</span></a><span class='Parentheses'>))</span> 
            <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>; 
</span>        <a href="transam.c.html#LN200"><span class='Ref_To_Local'>parentXid</span></a> <span class='Operator'>= </span><a href="../../../include/access/subtrans.h.html#LN17"><span class='Ref_to_Proto'>SubTransGetParent</span></a><span class='Parentheses'>(</span><a href="transam.c.html#LN180"><span class='Ref_to_Parameter'>transactionId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/access/transam.h.html#LN40"><span class='Ref_to_Macro'>TransactionIdIsValid</span></a><span class='Parentheses'>(</span><a href="transam.c.html#LN200"><span class='Ref_To_Local'>parentXid</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* see notes in TransactionIdDidCommit */ 
</span>            <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN39"><span class='Ref_to_Const'>WARNING</span></a><span class='Delimiter'>, </span><span class='String'>"no pg_subtrans entry for subcommitted XID %u"</span><span class='Delimiter'>, 
</span>                 <a href="transam.c.html#LN180"><span class='Ref_to_Parameter'>transactionId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>return</span> <a href="../../../include/access/transam.h.html#LN162"><span class='Ref_to_Proto'>TransactionIdDidAbort</span></a><span class='Parentheses'>(</span><a href="transam.c.html#LN200"><span class='Ref_To_Local'>parentXid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * It's not aborted. 
     */ 
</span>    <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end TransactionIdDidAbort &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * TransactionIdIsKnownCompleted 
 *      True iff transaction associated with the identifier is currently 
 *      known to have either committed or aborted. 
 * 
 * This does NOT look into pg_xact but merely probes our local cache 
 * (and so it's not named TransactionIdDidComplete, which would be the 
 * appropriate name for a function that worked that way).  The intended 
 * use is just to short-circuit TransactionIdIsInProgress calls when doing 
 * repeated tqual.c checks for the same XID.  If this isn't extremely fast 
 * then it will be counterproductive. 
 * 
 * Note: 
 *      Assumes transaction identifier is valid. 
 */ 
</span><span class='Keyword'>bool 
</span><a name="LN237"></a><span class='Declare_Function'>TransactionIdIsKnownCompleted</span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN396"><span class='Ref_to_Typedef'>TransactionId</span></a> <span class='Declare_Parameter'>transactionId</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/access/transam.h.html#LN42"><span class='Ref_to_Macro'>TransactionIdEquals</span></a><span class='Parentheses'>(</span><a href="transam.c.html#LN237"><span class='Ref_to_Parameter'>transactionId</span></a><span class='Delimiter'>, </span><a href="transam.c.html#LN32"><span class='Ref_to_Global_Var'>cachedFetchXid</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* If it's in the cache at all, it must be completed. */ 
</span>        <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * TransactionIdCommitTree 
 *      Marks the given transaction and children as committed 
 * 
 * "xid" is a toplevel transaction commit, and the xids array contains its 
 * committed subtransactions. 
 * 
 * This commit operation is not guaranteed to be atomic, but if not, subxids 
 * are correctly marked subcommit first. 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN259"></a><span class='Declare_Function'>TransactionIdCommitTree</span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN396"><span class='Ref_to_Typedef'>TransactionId</span></a> <span class='Declare_Parameter'>xid</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>nxids</span><span class='Delimiter'>, </span><a href="../../../include/c.h.html#LN396"><span class='Ref_to_Typedef'>TransactionId</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>xids</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <a href="../../../include/access/clog.h.html#LN37"><span class='Ref_to_Proto'>TransactionIdSetTreeStatus</span></a><span class='Parentheses'>(</span><a href="transam.c.html#LN259"><span class='Ref_to_Parameter'>xid</span></a><span class='Delimiter'>, </span><a href="transam.c.html#LN259"><span class='Ref_to_Parameter'>nxids</span></a><span class='Delimiter'>, </span><a href="transam.c.html#LN259"><span class='Ref_to_Parameter'>xids</span></a><span class='Delimiter'>, 
</span>                               <a href="../../../include/access/clog.h.html#LN26"><span class='Ref_to_Const'>TRANSACTION_STATUS_COMMITTED</span></a><span class='Delimiter'>, 
</span>                               <a href="../../../include/access/xlogdefs.h.html#LN27"><span class='Ref_to_Const'>InvalidXLogRecPtr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * TransactionIdAsyncCommitTree 
 *      Same as above, but for async commits.  The commit record LSN is needed. 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN271"></a><span class='Declare_Function'>TransactionIdAsyncCommitTree</span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN396"><span class='Ref_to_Typedef'>TransactionId</span></a> <span class='Declare_Parameter'>xid</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>nxids</span><span class='Delimiter'>, </span><a href="../../../include/c.h.html#LN396"><span class='Ref_to_Typedef'>TransactionId</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>xids</span><span class='Delimiter'>, 
</span><a name="LN272"></a>                             <a href="../../../include/access/xlogdefs.h.html#LN20"><span class='Ref_to_Typedef'>XLogRecPtr</span></a> <span class='Declare_Parameter'>lsn</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <a href="../../../include/access/clog.h.html#LN37"><span class='Ref_to_Proto'>TransactionIdSetTreeStatus</span></a><span class='Parentheses'>(</span><a href="transam.c.html#LN271"><span class='Ref_to_Parameter'>xid</span></a><span class='Delimiter'>, </span><a href="transam.c.html#LN271"><span class='Ref_to_Parameter'>nxids</span></a><span class='Delimiter'>, </span><a href="transam.c.html#LN271"><span class='Ref_to_Parameter'>xids</span></a><span class='Delimiter'>, 
</span>                               <a href="../../../include/access/clog.h.html#LN26"><span class='Ref_to_Const'>TRANSACTION_STATUS_COMMITTED</span></a><span class='Delimiter'>, </span><a href="transam.c.html#LN272"><span class='Ref_to_Parameter'>lsn</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * TransactionIdAbortTree 
 *      Marks the given transaction and children as aborted. 
 * 
 * "xid" is a toplevel transaction commit, and the xids array contains its 
 * committed subtransactions. 
 * 
 * We don't need to worry about the non-atomic behavior, since any onlookers 
 * will consider all the xacts as not-yet-committed anyway. 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN289"></a><span class='Declare_Function'>TransactionIdAbortTree</span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN396"><span class='Ref_to_Typedef'>TransactionId</span></a> <span class='Declare_Parameter'>xid</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>nxids</span><span class='Delimiter'>, </span><a href="../../../include/c.h.html#LN396"><span class='Ref_to_Typedef'>TransactionId</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>xids</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <a href="../../../include/access/clog.h.html#LN37"><span class='Ref_to_Proto'>TransactionIdSetTreeStatus</span></a><span class='Parentheses'>(</span><a href="transam.c.html#LN289"><span class='Ref_to_Parameter'>xid</span></a><span class='Delimiter'>, </span><a href="transam.c.html#LN289"><span class='Ref_to_Parameter'>nxids</span></a><span class='Delimiter'>, </span><a href="transam.c.html#LN289"><span class='Ref_to_Parameter'>xids</span></a><span class='Delimiter'>, 
</span>                               <a href="../../../include/access/clog.h.html#LN27"><span class='Ref_to_Const'>TRANSACTION_STATUS_ABORTED</span></a><span class='Delimiter'>, </span><a href="../../../include/access/xlogdefs.h.html#LN27"><span class='Ref_to_Const'>InvalidXLogRecPtr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * TransactionIdPrecedes --- is id1 logically &LT; id2? 
 */ 
</span><span class='Keyword'>bool 
</span><a name="LN299"></a><span class='Declare_Function'>TransactionIdPrecedes</span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN396"><span class='Ref_to_Typedef'>TransactionId</span></a> <span class='Declare_Parameter'>id1</span><span class='Delimiter'>, </span><a href="../../../include/c.h.html#LN396"><span class='Ref_to_Typedef'>TransactionId</span></a> <span class='Declare_Parameter'>id2</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Comment_Multi_Line'>/* 
     * If either ID is a permanent XID then we can just do unsigned 
     * comparison.  If both are normal, do a modulo-2^32 comparison. 
     */ 
</span><a name="LN305"></a>    <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>diff</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/access/transam.h.html#LN41"><span class='Ref_to_Macro'>TransactionIdIsNormal</span></a><span class='Parentheses'>(</span><a href="transam.c.html#LN299"><span class='Ref_to_Parameter'>id1</span></a><span class='Parentheses'>) </span><span class='Operator'>|| !</span><a href="../../../include/access/transam.h.html#LN41"><span class='Ref_to_Macro'>TransactionIdIsNormal</span></a><span class='Parentheses'>(</span><a href="transam.c.html#LN299"><span class='Ref_to_Parameter'>id2</span></a><span class='Parentheses'>))</span> 
        <span class='Control'>return</span> <span class='Parentheses'>(</span><a href="transam.c.html#LN299"><span class='Ref_to_Parameter'>id1</span></a> <span class='Operator'>&LT; </span><a href="transam.c.html#LN299"><span class='Ref_to_Parameter'>id2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="transam.c.html#LN305"><span class='Ref_To_Local'>diff</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a><span class='Parentheses'>) (</span><a href="transam.c.html#LN299"><span class='Ref_to_Parameter'>id1</span></a> <span class='Operator'>- </span><a href="transam.c.html#LN299"><span class='Ref_to_Parameter'>id2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <span class='Parentheses'>(</span><a href="transam.c.html#LN305"><span class='Ref_To_Local'>diff</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * TransactionIdPrecedesOrEquals --- is id1 logically &LT;= id2? 
 */ 
</span><span class='Keyword'>bool 
</span><a name="LN318"></a><span class='Declare_Function'>TransactionIdPrecedesOrEquals</span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN396"><span class='Ref_to_Typedef'>TransactionId</span></a> <span class='Declare_Parameter'>id1</span><span class='Delimiter'>, </span><a href="../../../include/c.h.html#LN396"><span class='Ref_to_Typedef'>TransactionId</span></a> <span class='Declare_Parameter'>id2</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN320"></a>    <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>diff</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/access/transam.h.html#LN41"><span class='Ref_to_Macro'>TransactionIdIsNormal</span></a><span class='Parentheses'>(</span><a href="transam.c.html#LN318"><span class='Ref_to_Parameter'>id1</span></a><span class='Parentheses'>) </span><span class='Operator'>|| !</span><a href="../../../include/access/transam.h.html#LN41"><span class='Ref_to_Macro'>TransactionIdIsNormal</span></a><span class='Parentheses'>(</span><a href="transam.c.html#LN318"><span class='Ref_to_Parameter'>id2</span></a><span class='Parentheses'>))</span> 
        <span class='Control'>return</span> <span class='Parentheses'>(</span><a href="transam.c.html#LN318"><span class='Ref_to_Parameter'>id1</span></a> <span class='Operator'>&LT;= </span><a href="transam.c.html#LN318"><span class='Ref_to_Parameter'>id2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="transam.c.html#LN320"><span class='Ref_To_Local'>diff</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a><span class='Parentheses'>) (</span><a href="transam.c.html#LN318"><span class='Ref_to_Parameter'>id1</span></a> <span class='Operator'>- </span><a href="transam.c.html#LN318"><span class='Ref_to_Parameter'>id2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <span class='Parentheses'>(</span><a href="transam.c.html#LN320"><span class='Ref_To_Local'>diff</span></a> <span class='Operator'>&LT;= </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * TransactionIdFollows --- is id1 logically &GT; id2? 
 */ 
</span><span class='Keyword'>bool 
</span><a name="LN333"></a><span class='Declare_Function'>TransactionIdFollows</span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN396"><span class='Ref_to_Typedef'>TransactionId</span></a> <span class='Declare_Parameter'>id1</span><span class='Delimiter'>, </span><a href="../../../include/c.h.html#LN396"><span class='Ref_to_Typedef'>TransactionId</span></a> <span class='Declare_Parameter'>id2</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN335"></a>    <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>diff</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/access/transam.h.html#LN41"><span class='Ref_to_Macro'>TransactionIdIsNormal</span></a><span class='Parentheses'>(</span><a href="transam.c.html#LN333"><span class='Ref_to_Parameter'>id1</span></a><span class='Parentheses'>) </span><span class='Operator'>|| !</span><a href="../../../include/access/transam.h.html#LN41"><span class='Ref_to_Macro'>TransactionIdIsNormal</span></a><span class='Parentheses'>(</span><a href="transam.c.html#LN333"><span class='Ref_to_Parameter'>id2</span></a><span class='Parentheses'>))</span> 
        <span class='Control'>return</span> <span class='Parentheses'>(</span><a href="transam.c.html#LN333"><span class='Ref_to_Parameter'>id1</span></a> <span class='Operator'>&GT; </span><a href="transam.c.html#LN333"><span class='Ref_to_Parameter'>id2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="transam.c.html#LN335"><span class='Ref_To_Local'>diff</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a><span class='Parentheses'>) (</span><a href="transam.c.html#LN333"><span class='Ref_to_Parameter'>id1</span></a> <span class='Operator'>- </span><a href="transam.c.html#LN333"><span class='Ref_to_Parameter'>id2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <span class='Parentheses'>(</span><a href="transam.c.html#LN335"><span class='Ref_To_Local'>diff</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * TransactionIdFollowsOrEquals --- is id1 logically &GT;= id2? 
 */ 
</span><span class='Keyword'>bool 
</span><a name="LN348"></a><span class='Declare_Function'>TransactionIdFollowsOrEquals</span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN396"><span class='Ref_to_Typedef'>TransactionId</span></a> <span class='Declare_Parameter'>id1</span><span class='Delimiter'>, </span><a href="../../../include/c.h.html#LN396"><span class='Ref_to_Typedef'>TransactionId</span></a> <span class='Declare_Parameter'>id2</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN350"></a>    <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>diff</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/access/transam.h.html#LN41"><span class='Ref_to_Macro'>TransactionIdIsNormal</span></a><span class='Parentheses'>(</span><a href="transam.c.html#LN348"><span class='Ref_to_Parameter'>id1</span></a><span class='Parentheses'>) </span><span class='Operator'>|| !</span><a href="../../../include/access/transam.h.html#LN41"><span class='Ref_to_Macro'>TransactionIdIsNormal</span></a><span class='Parentheses'>(</span><a href="transam.c.html#LN348"><span class='Ref_to_Parameter'>id2</span></a><span class='Parentheses'>))</span> 
        <span class='Control'>return</span> <span class='Parentheses'>(</span><a href="transam.c.html#LN348"><span class='Ref_to_Parameter'>id1</span></a> <span class='Operator'>&GT;= </span><a href="transam.c.html#LN348"><span class='Ref_to_Parameter'>id2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="transam.c.html#LN350"><span class='Ref_To_Local'>diff</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a><span class='Parentheses'>) (</span><a href="transam.c.html#LN348"><span class='Ref_to_Parameter'>id1</span></a> <span class='Operator'>- </span><a href="transam.c.html#LN348"><span class='Ref_to_Parameter'>id2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <span class='Parentheses'>(</span><a href="transam.c.html#LN350"><span class='Ref_To_Local'>diff</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/* 
 * TransactionIdLatest --- get latest XID among a main xact and its children 
 */ 
</span><a href="../../../include/c.h.html#LN396"><span class='Ref_to_Typedef'>TransactionId</span></a> 
<a name="LN364"></a><span class='Declare_Function'>TransactionIdLatest</span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN396"><span class='Ref_to_Typedef'>TransactionId</span></a> <span class='Declare_Parameter'>mainxid</span><span class='Delimiter'>, 
</span><a name="LN365"></a>                    <span class='Keyword'>int </span><span class='Declare_Parameter'>nxids</span><span class='Delimiter'>, </span><span class='Keyword'>const </span><a href="../../../include/c.h.html#LN396"><span class='Ref_to_Typedef'>TransactionId</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>xids</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN367"></a>    <a href="../../../include/c.h.html#LN396"><span class='Ref_to_Typedef'>TransactionId</span></a> <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * In practice it is highly likely that the xids[] array is sorted, and so 
     * we could save some cycles by just taking the last child XID, but this 
     * probably isn't so performance-critical that it's worth depending on 
     * that assumption.  But just to show we're not totally stupid, scan the 
     * array back-to-front to avoid useless assignments. 
     */ 
</span>    <a href="transam.c.html#LN367"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="transam.c.html#LN364"><span class='Ref_to_Parameter'>mainxid</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>while</span> <span class='Parentheses'>(</span><span class='Operator'>--</span><a href="transam.c.html#LN365"><span class='Ref_to_Parameter'>nxids</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/access/transam.h.html#LN168"><span class='Ref_to_Proto'>TransactionIdPrecedes</span></a><span class='Parentheses'>(</span><a href="transam.c.html#LN367"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>, </span><a href="transam.c.html#LN365"><span class='Ref_to_Parameter'>xids</span></a><span class='Delimiter'>[</span><a href="transam.c.html#LN365"><span class='Ref_to_Parameter'>nxids</span></a><span class='Delimiter'>]</span><span class='Parentheses'>))</span> 
            <a href="transam.c.html#LN367"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="transam.c.html#LN365"><span class='Ref_to_Parameter'>xids</span></a><span class='Delimiter'>[</span><a href="transam.c.html#LN365"><span class='Ref_to_Parameter'>nxids</span></a><span class='Delimiter'>]; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>return</span> <a href="transam.c.html#LN367"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end TransactionIdLatest &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* 
 * TransactionIdGetCommitLSN 
 * 
 * This function returns an LSN that is late enough to be able 
 * to guarantee that if we flush up to the LSN returned then we 
 * will have flushed the transaction's commit record to disk. 
 * 
 * The result is not necessarily the exact LSN of the transaction's 
 * commit record!  For example, for long-past transactions (those whose 
 * clog pages already migrated to disk), we'll return InvalidXLogRecPtr. 
 * Also, because we group transactions on the same clog page to conserve 
 * storage, we might return the LSN of a later transaction that falls into 
 * the same group. 
 */ 
</span><a href="../../../include/access/xlogdefs.h.html#LN20"><span class='Ref_to_Typedef'>XLogRecPtr</span></a> 
<a name="LN401"></a><span class='Declare_Function'>TransactionIdGetCommitLSN</span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN396"><span class='Ref_to_Typedef'>TransactionId</span></a> <span class='Declare_Parameter'>xid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN403"></a>    <a href="../../../include/access/xlogdefs.h.html#LN20"><span class='Ref_to_Typedef'>XLogRecPtr</span></a>  <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Currently, all uses of this function are for xids that were just 
     * reported to be committed by TransactionLogFetch, so we expect that 
     * checking TransactionLogFetch's cache will usually succeed and avoid an 
     * extra trip to shared memory. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/access/transam.h.html#LN42"><span class='Ref_to_Macro'>TransactionIdEquals</span></a><span class='Parentheses'>(</span><a href="transam.c.html#LN401"><span class='Ref_to_Parameter'>xid</span></a><span class='Delimiter'>, </span><a href="transam.c.html#LN32"><span class='Ref_to_Global_Var'>cachedFetchXid</span></a><span class='Parentheses'>))</span> 
        <span class='Control'>return</span> <a href="transam.c.html#LN34"><span class='Ref_to_Global_Var'>cachedCommitLSN</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Special XIDs are always known committed */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/access/transam.h.html#LN41"><span class='Ref_to_Macro'>TransactionIdIsNormal</span></a><span class='Parentheses'>(</span><a href="transam.c.html#LN401"><span class='Ref_to_Parameter'>xid</span></a><span class='Parentheses'>))</span> 
        <span class='Control'>return</span> <a href="../../../include/access/xlogdefs.h.html#LN27"><span class='Ref_to_Const'>InvalidXLogRecPtr</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Get the transaction status. 
     */ 
</span>    <span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>) </span><a href="../../../include/access/clog.h.html#LN39"><span class='Ref_to_Proto'>TransactionIdGetStatus</span></a><span class='Parentheses'>(</span><a href="transam.c.html#LN401"><span class='Ref_to_Parameter'>xid</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="transam.c.html#LN403"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="transam.c.html#LN403"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end TransactionIdGetCommitLSN &raquo; </span> 
</pre>
<table bgcolor='#c0c0c0' width='100%'><tr><td><a href='../../../../Contents.html'>Contents</a></td></tr>
</table><hr><p class='blurb' align='center'><a href='http://www.sourceinsight.com'>HTML Created by Source Insight Version 4.00.0084 Built on 2017-02-26</a></p>
</body></html>