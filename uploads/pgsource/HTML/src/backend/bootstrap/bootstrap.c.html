<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta name="generator" content="Source Insight Version 4.00.0084 Built on 2017-02-26">
<meta charset='UTF-8' />
<style type='text/css'><!--
TD {background-color: #C0C0C0; font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.blurb {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.filename {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 120%; font-weight: bold; }
.dirname {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 100%; font-weight: bold; margin-top: 2.5em;}
--></style>
<title>src\backend\bootstrap\bootstrap.c</title>
<LINK REL=StyleSheet HREF="../../../C_Cpp_Source_File.css" TYPE='text/css' MEDIA=screen>
</head>
<body bgcolor=#ffffff>
<table bgcolor='#c0c0c0' width='100%'>
<tr><td><p class='filename'><b>src\backend\bootstrap\bootstrap.c</b></p></td>
<td align='right'>
Wed Jun 14 08:25:31 2017
</td></tr>
<tr><td><a href='../../../Contents.html'>Contents</a></td></tr>
</table>
<pre>
</span><span class='Comment_Multi_Line'>/*------------------------------------------------------------------------- 
 * 
 * bootstrap.c 
 *    routines to support running postgres in 'bootstrap' mode 
 *  bootstrap mode is used to create the initial template database 
 * 
 * Portions Copyright (c) 1996-2017, PostgreSQL Global Development Group 
 * Portions Copyright (c) 1994, Regents of the University of California 
 * 
 * IDENTIFICATION 
 *    src/backend/bootstrap/bootstrap.c 
 * 
 *------------------------------------------------------------------------- 
 */ 
</span><span class='Keyword'>#include </span><span class='String'>"postgres.h"</span> 
 
<span class='Keyword'>#include </span><span class='String'>&LT;unistd.h&GT;</span> 
<span class='Keyword'>#include </span><span class='String'>&LT;signal.h&GT;</span> 
 
<span class='Keyword'>#include </span><span class='String'>"access/htup_details.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"access/xact.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"bootstrap/bootstrap.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/index.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_collation.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_type.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"libpq/pqsignal.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"miscadmin.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"nodes/makefuncs.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"pg_getopt.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"pgstat.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"postmaster/bgwriter.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"postmaster/startup.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"postmaster/walwriter.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"replication/walreceiver.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"storage/bufmgr.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"storage/bufpage.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"storage/condition_variable.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"storage/ipc.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"storage/proc.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"tcop/tcopprot.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/builtins.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/fmgroids.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/memutils.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/ps_status.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/rel.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/relmapper.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/tqual.h"</span> 
 
<a name="LN48"></a><a href="../../include/c.h.html#LN267"><span class='Ref_to_Typedef'>uint32</span></a>      <span class='Declare_Var'>bootstrap_data_checksum_version</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>;</span>        <span class='Comment_Single_Line'>/* No checksum */ 
</span> 
 
<a name="LN51"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>ALLOC</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>t</span><span class='Delimiter'>, </span><span class='Declare_Parameter'>c</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>    <span class='Parentheses'>((</span><a href="bootstrap.c.html#LN51"><span class='Ref_to_Parameter'>t</span></a> <span class='Operator'>*</span><span class='Parentheses'>)</span> <a href="../../include/utils/palloc.h.html#LN71"><span class='Ref_to_Proto'>MemoryContextAllocZero</span></a><span class='Parentheses'>(</span><a href="../utils/mmgr/mcxt.c.html#LN42"><span class='Ref_to_Global_Var'>TopMemoryContext</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><span class='Keyword'>unsigned</span><span class='Parentheses'>)(</span><a href="bootstrap.c.html#LN51"><span class='Ref_to_Parameter'>c</span></a><span class='Parentheses'>) </span><span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN51"><span class='Ref_to_Parameter'>t</span></a><span class='Parentheses'>)))</span> 
 
<a name="LN54"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>CheckerModeMain</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN55"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>BootstrapModeMain</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN56"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>bootstrap_signals</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN57"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>ShutdownAuxiliaryProcess</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>code</span><span class='Delimiter'>, </span><a href="../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Declare_Parameter'>arg</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN58"></a><span class='Keyword'>static </span><a href="../../include/catalog/pg_attribute.h.html#LN186"><span class='Ref_to_Typedef'>Form_pg_attribute</span></a> <span class='Declare_Prototype'>AllocateAttribute</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN59"></a><span class='Keyword'>static </span><a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>  <span class='Declare_Prototype'>gettype</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>type</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN60"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>cleanup</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* ---------------- 
 *      global variables 
 * ---------------- 
 */ 
</span> 
<a name="LN67"></a><a href="../../include/miscadmin.h.html#LN390"><span class='Ref_to_Typedef'>AuxProcType</span></a> <span class='Declare_Var'>MyAuxProcType</span> <span class='Operator'>= </span><a href="../../include/miscadmin.h.html#LN392"><span class='Ref_to_EnumConst'>NotAnAuxProcess</span></a><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* declared in miscadmin.h */ 
</span> 
<a name="LN69"></a><a href="../../include/utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a>    <span class='Declare_Var'>boot_reldesc</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* current relation descriptor */ 
</span> 
<a name="LN71"></a><a href="../../include/catalog/pg_attribute.h.html#LN186"><span class='Ref_to_Typedef'>Form_pg_attribute</span></a> <span class='Declare_Var'>attrtypes</span><span class='Delimiter'>[</span><a href="../../include/bootstrap/bootstrap.h.html#LN23"><span class='Ref_to_Const'>MAXATTR</span></a><span class='Delimiter'>];</span>   <span class='Comment_Single_Line'>/* points to attribute info */ 
</span><a name="LN72"></a><span class='Keyword'>int</span>         <span class='Declare_Var'>numattr</span><span class='Delimiter'>;</span>            <span class='Comment_Single_Line'>/* number of attributes for cur. rel */ 
</span> 
 
<span class='Comment_Multi_Line'>/* 
 * Basic information associated with each type.  This is used before 
 * pg_type is filled, so it has to cover the datatypes used as column types 
 * in the core "bootstrapped" catalogs. 
 * 
 *      XXX several of these input/output functions do catalog scans 
 *          (e.g., F_REGPROCIN scans pg_proc).  this obviously creates some 
 *          order dependencies in the catalog creation process. 
 */ 
</span><a name="LN84"></a><span class='Control'>struct</span> <span class='Declare_Struct'>typinfo</span> 
<span class='Delimiter'>{ 
</span><a name="LN86"></a>    <span class='Keyword'>char</span>        <span class='Declare_Member'>name</span><span class='Delimiter'>[</span><a href="../../interfaces/ecpg/include/sqlda-native.h.html#LN15"><span class='Ref_to_Const'>NAMEDATALEN</span></a><span class='Delimiter'>]; 
</span><a name="LN87"></a>    <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Member'>oid</span><span class='Delimiter'>; 
</span><a name="LN88"></a>    <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Member'>elem</span><span class='Delimiter'>; 
</span><a name="LN89"></a>    <a href="../../include/c.h.html#LN254"><span class='Ref_to_Typedef'>int16</span></a>       <span class='Declare_Member'>len</span><span class='Delimiter'>; 
</span><a name="LN90"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Member'>byval</span><span class='Delimiter'>; 
</span><a name="LN91"></a>    <span class='Keyword'>char</span>        <span class='Declare_Member'>align</span><span class='Delimiter'>; 
</span><a name="LN92"></a>    <span class='Keyword'>char</span>        <span class='Declare_Member'>storage</span><span class='Delimiter'>; 
</span><a name="LN93"></a>    <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Member'>collation</span><span class='Delimiter'>; 
</span><a name="LN94"></a>    <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Member'>inproc</span><span class='Delimiter'>; 
</span><a name="LN95"></a>    <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Member'>outproc</span><span class='Delimiter'>; 
}; 
</span> 
<a name="LN98"></a><span class='Keyword'>static const </span><span class='Control'>struct</span> <a href="bootstrap.c.html#LN84"><span class='Ref_to_Struct'>typinfo</span></a> <span class='Declare_Var'>TypInfo</span><span class='Delimiter'>[] </span><span class='Operator'>= </span><span class='Delimiter'>{ 
</span>    <span class='Delimiter'>{</span><span class='String'>"bool"</span><span class='Delimiter'>, </span><a href="../../interfaces/ecpg/ecpglib/pg_type.h.html#LN17"><span class='Ref_to_Const'>BOOLOID</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span><span class='String'>'c'</span><span class='Delimiter'>, </span><span class='String'>'p'</span><span class='Delimiter'>, </span><a href="../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>, 
</span>    F_BOOLIN<span class='Delimiter'>, </span>F_BOOLOUT<span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"bytea"</span><span class='Delimiter'>, </span><a href="../../interfaces/ecpg/ecpglib/pg_type.h.html#LN18"><span class='Ref_to_Const'>BYTEAOID</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='String'>'i'</span><span class='Delimiter'>, </span><span class='String'>'x'</span><span class='Delimiter'>, </span><a href="../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>, 
</span>    F_BYTEAIN<span class='Delimiter'>, </span>F_BYTEAOUT<span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"char"</span><span class='Delimiter'>, </span><a href="../../interfaces/ecpg/ecpglib/pg_type.h.html#LN19"><span class='Ref_to_Const'>CHAROID</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span><span class='String'>'c'</span><span class='Delimiter'>, </span><span class='String'>'p'</span><span class='Delimiter'>, </span><a href="../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>, 
</span>    F_CHARIN<span class='Delimiter'>, </span>F_CHAROUT<span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"int2"</span><span class='Delimiter'>, </span><a href="../../interfaces/ecpg/ecpglib/pg_type.h.html#LN22"><span class='Ref_to_Const'>INT2OID</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span><span class='String'>'s'</span><span class='Delimiter'>, </span><span class='String'>'p'</span><span class='Delimiter'>, </span><a href="../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>, 
</span>    F_INT2IN<span class='Delimiter'>, </span>F_INT2OUT<span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"int4"</span><span class='Delimiter'>, </span><a href="../../interfaces/ecpg/ecpglib/pg_type.h.html#LN24"><span class='Ref_to_Const'>INT4OID</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>4</span><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span><span class='String'>'i'</span><span class='Delimiter'>, </span><span class='String'>'p'</span><span class='Delimiter'>, </span><a href="../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>, 
</span>    F_INT4IN<span class='Delimiter'>, </span>F_INT4OUT<span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"float4"</span><span class='Delimiter'>, </span><a href="../../interfaces/ecpg/ecpglib/pg_type.h.html#LN38"><span class='Ref_to_Const'>FLOAT4OID</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>4</span><span class='Delimiter'>, </span>FLOAT4PASSBYVAL<span class='Delimiter'>, </span><span class='String'>'i'</span><span class='Delimiter'>, </span><span class='String'>'p'</span><span class='Delimiter'>, </span><a href="../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>, 
</span>    F_FLOAT4IN<span class='Delimiter'>, </span>F_FLOAT4OUT<span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"name"</span><span class='Delimiter'>, </span><a href="../../interfaces/ecpg/ecpglib/pg_type.h.html#LN20"><span class='Ref_to_Const'>NAMEOID</span></a><span class='Delimiter'>, </span><a href="../../interfaces/ecpg/ecpglib/pg_type.h.html#LN19"><span class='Ref_to_Const'>CHAROID</span></a><span class='Delimiter'>, </span><a href="../../interfaces/ecpg/include/sqlda-native.h.html#LN15"><span class='Ref_to_Const'>NAMEDATALEN</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='String'>'c'</span><span class='Delimiter'>, </span><span class='String'>'p'</span><span class='Delimiter'>, </span><a href="../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>, 
</span>    F_NAMEIN<span class='Delimiter'>, </span>F_NAMEOUT<span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"regclass"</span><span class='Delimiter'>, </span><a href="../../interfaces/ecpg/ecpglib/pg_type.h.html#LN63"><span class='Ref_to_Const'>REGCLASSOID</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>4</span><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span><span class='String'>'i'</span><span class='Delimiter'>, </span><span class='String'>'p'</span><span class='Delimiter'>, </span><a href="../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>, 
</span>    F_REGCLASSIN<span class='Delimiter'>, </span>F_REGCLASSOUT<span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"regproc"</span><span class='Delimiter'>, </span><a href="../../interfaces/ecpg/ecpglib/pg_type.h.html#LN25"><span class='Ref_to_Const'>REGPROCOID</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>4</span><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span><span class='String'>'i'</span><span class='Delimiter'>, </span><span class='String'>'p'</span><span class='Delimiter'>, </span><a href="../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>, 
</span>    F_REGPROCIN<span class='Delimiter'>, </span>F_REGPROCOUT<span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"regtype"</span><span class='Delimiter'>, </span><a href="../../interfaces/ecpg/ecpglib/pg_type.h.html#LN64"><span class='Ref_to_Const'>REGTYPEOID</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>4</span><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span><span class='String'>'i'</span><span class='Delimiter'>, </span><span class='String'>'p'</span><span class='Delimiter'>, </span><a href="../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>, 
</span>    F_REGTYPEIN<span class='Delimiter'>, </span>F_REGTYPEOUT<span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"regrole"</span><span class='Delimiter'>, </span><a href="../../interfaces/ecpg/ecpglib/pg_type.h.html#LN65"><span class='Ref_to_Const'>REGROLEOID</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>4</span><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span><span class='String'>'i'</span><span class='Delimiter'>, </span><span class='String'>'p'</span><span class='Delimiter'>, </span><a href="../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>, 
</span>    F_REGROLEIN<span class='Delimiter'>, </span>F_REGROLEOUT<span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"regnamespace"</span><span class='Delimiter'>, </span><a href="../../interfaces/ecpg/ecpglib/pg_type.h.html#LN66"><span class='Ref_to_Const'>REGNAMESPACEOID</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>4</span><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span><span class='String'>'i'</span><span class='Delimiter'>, </span><span class='String'>'p'</span><span class='Delimiter'>, </span><a href="../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>, 
</span>    F_REGNAMESPACEIN<span class='Delimiter'>, </span>F_REGNAMESPACEOUT<span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"text"</span><span class='Delimiter'>, </span><a href="../../interfaces/ecpg/ecpglib/pg_type.h.html#LN26"><span class='Ref_to_Const'>TEXTOID</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='String'>'i'</span><span class='Delimiter'>, </span><span class='String'>'x'</span><span class='Delimiter'>, </span><a href="../../include/catalog/pg_collation.h.html#LN74"><span class='Ref_to_Const'>DEFAULT_COLLATION_OID</span></a><span class='Delimiter'>, 
</span>    F_TEXTIN<span class='Delimiter'>, </span>F_TEXTOUT<span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"oid"</span><span class='Delimiter'>, </span><a href="../../interfaces/ecpg/ecpglib/pg_type.h.html#LN27"><span class='Ref_to_Const'>OIDOID</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>4</span><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span><span class='String'>'i'</span><span class='Delimiter'>, </span><span class='String'>'p'</span><span class='Delimiter'>, </span><a href="../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>, 
</span>    F_OIDIN<span class='Delimiter'>, </span>F_OIDOUT<span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"tid"</span><span class='Delimiter'>, </span><a href="../../interfaces/ecpg/ecpglib/pg_type.h.html#LN28"><span class='Ref_to_Const'>TIDOID</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>6</span><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='String'>'s'</span><span class='Delimiter'>, </span><span class='String'>'p'</span><span class='Delimiter'>, </span><a href="../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>, 
</span>    F_TIDIN<span class='Delimiter'>, </span>F_TIDOUT<span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"xid"</span><span class='Delimiter'>, </span><a href="../../interfaces/ecpg/ecpglib/pg_type.h.html#LN29"><span class='Ref_to_Const'>XIDOID</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>4</span><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span><span class='String'>'i'</span><span class='Delimiter'>, </span><span class='String'>'p'</span><span class='Delimiter'>, </span><a href="../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>, 
</span>    F_XIDIN<span class='Delimiter'>, </span>F_XIDOUT<span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"cid"</span><span class='Delimiter'>, </span><a href="../../interfaces/ecpg/ecpglib/pg_type.h.html#LN30"><span class='Ref_to_Const'>CIDOID</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>4</span><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span><span class='String'>'i'</span><span class='Delimiter'>, </span><span class='String'>'p'</span><span class='Delimiter'>, </span><a href="../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>, 
</span>    F_CIDIN<span class='Delimiter'>, </span>F_CIDOUT<span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"pg_node_tree"</span><span class='Delimiter'>, </span><a href="../../include/catalog/pg_type.h.html#LN364"><span class='Ref_to_Const'>PGNODETREEOID</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='String'>'i'</span><span class='Delimiter'>, </span><span class='String'>'x'</span><span class='Delimiter'>, </span><a href="../../include/catalog/pg_collation.h.html#LN74"><span class='Ref_to_Const'>DEFAULT_COLLATION_OID</span></a><span class='Delimiter'>, 
</span>    F_PG_NODE_TREE_IN<span class='Delimiter'>, </span>F_PG_NODE_TREE_OUT<span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"int2vector"</span><span class='Delimiter'>, </span><a href="../../interfaces/ecpg/ecpglib/pg_type.h.html#LN23"><span class='Ref_to_Const'>INT2VECTOROID</span></a><span class='Delimiter'>, </span><a href="../../interfaces/ecpg/ecpglib/pg_type.h.html#LN22"><span class='Ref_to_Const'>INT2OID</span></a><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='String'>'i'</span><span class='Delimiter'>, </span><span class='String'>'p'</span><span class='Delimiter'>, </span><a href="../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>, 
</span>    F_INT2VECTORIN<span class='Delimiter'>, </span>F_INT2VECTOROUT<span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"oidvector"</span><span class='Delimiter'>, </span><a href="../../interfaces/ecpg/ecpglib/pg_type.h.html#LN31"><span class='Ref_to_Const'>OIDVECTOROID</span></a><span class='Delimiter'>, </span><a href="../../interfaces/ecpg/ecpglib/pg_type.h.html#LN27"><span class='Ref_to_Const'>OIDOID</span></a><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='String'>'i'</span><span class='Delimiter'>, </span><span class='String'>'p'</span><span class='Delimiter'>, </span><a href="../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>, 
</span>    F_OIDVECTORIN<span class='Delimiter'>, </span>F_OIDVECTOROUT<span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"_int4"</span><span class='Delimiter'>, </span><a href="../../include/catalog/pg_type.h.html#LN466"><span class='Ref_to_Const'>INT4ARRAYOID</span></a><span class='Delimiter'>, </span><a href="../../interfaces/ecpg/ecpglib/pg_type.h.html#LN24"><span class='Ref_to_Const'>INT4OID</span></a><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='String'>'i'</span><span class='Delimiter'>, </span><span class='String'>'x'</span><span class='Delimiter'>, </span><a href="../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>, 
</span>    F_ARRAY_IN<span class='Delimiter'>, </span>F_ARRAY_OUT<span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"_text"</span><span class='Delimiter'>, </span><span class='Number'>1009</span><span class='Delimiter'>, </span><a href="../../interfaces/ecpg/ecpglib/pg_type.h.html#LN26"><span class='Ref_to_Const'>TEXTOID</span></a><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='String'>'i'</span><span class='Delimiter'>, </span><span class='String'>'x'</span><span class='Delimiter'>, </span><a href="../../include/catalog/pg_collation.h.html#LN74"><span class='Ref_to_Const'>DEFAULT_COLLATION_OID</span></a><span class='Delimiter'>, 
</span>    F_ARRAY_IN<span class='Delimiter'>, </span>F_ARRAY_OUT<span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"_oid"</span><span class='Delimiter'>, </span><span class='Number'>1028</span><span class='Delimiter'>, </span><a href="../../interfaces/ecpg/ecpglib/pg_type.h.html#LN27"><span class='Ref_to_Const'>OIDOID</span></a><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='String'>'i'</span><span class='Delimiter'>, </span><span class='String'>'x'</span><span class='Delimiter'>, </span><a href="../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>, 
</span>    F_ARRAY_IN<span class='Delimiter'>, </span>F_ARRAY_OUT<span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"_char"</span><span class='Delimiter'>, </span><span class='Number'>1002</span><span class='Delimiter'>, </span><a href="../../interfaces/ecpg/ecpglib/pg_type.h.html#LN19"><span class='Ref_to_Const'>CHAROID</span></a><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='String'>'i'</span><span class='Delimiter'>, </span><span class='String'>'x'</span><span class='Delimiter'>, </span><a href="../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>, 
</span>    F_ARRAY_IN<span class='Delimiter'>, </span>F_ARRAY_OUT<span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"_aclitem"</span><span class='Delimiter'>, </span><span class='Number'>1034</span><span class='Delimiter'>, </span><a href="../../include/catalog/pg_type.h.html#LN492"><span class='Ref_to_Const'>ACLITEMOID</span></a><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='String'>'i'</span><span class='Delimiter'>, </span><span class='String'>'x'</span><span class='Delimiter'>, </span><a href="../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>, 
</span>    F_ARRAY_IN<span class='Delimiter'>, </span>F_ARRAY_OUT<span class='Delimiter'>} 
}; 
</span> 
<a name="LN151"></a><span class='Keyword'>static const int </span><span class='Declare_Var'>n_types</span> <span class='Operator'>= </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN98"><span class='Ref_to_Global_Var'>TypInfo</span></a><span class='Parentheses'>) </span><span class='Operator'>/ </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="bootstrap.c.html#LN84"><span class='Ref_to_Struct'>typinfo</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<a name="LN153"></a><span class='Control'>struct</span> <span class='Declare_Struct'>typmap</span> 
<span class='Delimiter'>{</span>                               <span class='Comment_Single_Line'>/* a hack */ 
</span><a name="LN155"></a>    <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Member'>am_oid</span><span class='Delimiter'>; 
</span><a name="LN156"></a>    FormData_pg_type <span class='Declare_Member'>am_typ</span><span class='Delimiter'>; 
}; 
</span> 
<a name="LN159"></a><span class='Keyword'>static </span><span class='Control'>struct</span> <a href="bootstrap.c.html#LN153"><span class='Ref_to_Struct'>typmap</span></a> <span class='Operator'>**</span><span class='Declare_Var'>Typ</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN160"></a><span class='Keyword'>static </span><span class='Control'>struct</span> <a href="bootstrap.c.html#LN153"><span class='Ref_to_Struct'>typmap</span></a> <span class='Operator'>*</span><span class='Declare_Var'>Ap</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
<a name="LN162"></a><span class='Keyword'>static </span><a href="../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Declare_Var'>values</span><span class='Delimiter'>[</span><a href="../../include/bootstrap/bootstrap.h.html#LN23"><span class='Ref_to_Const'>MAXATTR</span></a><span class='Delimiter'>];</span>   <span class='Comment_Single_Line'>/* current row's attribute values */ 
</span><a name="LN163"></a><span class='Keyword'>static bool </span><span class='Declare_Var'>Nulls</span><span class='Delimiter'>[</span><a href="../../include/bootstrap/bootstrap.h.html#LN23"><span class='Ref_to_Const'>MAXATTR</span></a><span class='Delimiter'>]; 
</span> 
<a name="LN165"></a><span class='Keyword'>static </span><a href="../../include/utils/palloc.h.html#LN35"><span class='Ref_to_Typedef'>MemoryContext</span></a> <span class='Declare_Var'>nogc</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* special no-gc mem context */ 
</span> 
<span class='Comment_Multi_Line'>/* 
 *  At bootstrap time, we first declare all the indices to be built, and 
 *  then build them.  The IndexList structure stores enough information 
 *  to allow us to build the indices after they've been declared. 
 */ 
</span> 
<a name="LN173"></a><span class='Control'>typedef</span> <span class='Control'>struct</span> <span class='Declare_Struct'>_IndexList</span> 
<span class='Delimiter'>{ 
</span><a name="LN175"></a>    <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Member'>il_heap</span><span class='Delimiter'>; 
</span><a name="LN176"></a>    <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Member'>il_ind</span><span class='Delimiter'>; 
</span><a name="LN177"></a>    <a href="../../include/nodes/execnodes.h.html#LN130"><span class='Ref_to_Struct'>IndexInfo</span></a>  <span class='Operator'>*</span><span class='Declare_Member'>il_info</span><span class='Delimiter'>; 
</span><a name="LN178"></a>    <span class='Control'>struct</span> <a href="bootstrap.c.html#LN173"><span class='Ref_to_Struct'>_IndexList</span></a> <span class='Operator'>*</span><span class='Declare_Member'>il_next</span><span class='Delimiter'>; 
</span><a name="LN179"></a>} <span class='Declare_Typedef'>IndexList</span><span class='Delimiter'>; 
</span> 
<a name="LN181"></a><span class='Keyword'>static </span><a href="bootstrap.c.html#LN173"><span class='Ref_to_Typedef'>IndexList</span></a> <span class='Operator'>*</span><span class='Declare_Var'>ILHead</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
 
<span class='Comment_Multi_Line'>/* 
 *   AuxiliaryProcessMain 
 * 
 *   The main entry point for auxiliary processes, such as the bgwriter, 
 *   walwriter, walreceiver, bootstrapper and the shared memory checker code. 
 * 
 *   This code is here just because of historical reasons. 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN193"></a><span class='Declare_Function'>AuxiliaryProcessMain</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>argc</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>argv</span><span class='Delimiter'>[]</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN195"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>progname</span> <span class='Operator'>= </span><a href="bootstrap.c.html#LN193"><span class='Ref_to_Parameter'>argv</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]; 
</span><a name="LN196"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>flag</span><span class='Delimiter'>; 
</span><a name="LN197"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>userDoption</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Initialize process environment (already done if under postmaster, but 
     * not if standalone). 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../utils/init/globals.c.html#LN100"><span class='Ref_to_Global_Var'>IsUnderPostmaster</span></a><span class='Parentheses'>) 
</span>        <a href="../utils/init/miscinit.c.html#LN217"><span class='Ref_to_Func'>InitStandaloneProcess</span></a><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN193"><span class='Ref_to_Parameter'>argv</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * process command arguments 
     */ 
</span> 
    <span class='Comment_Multi_Line'>/* Set defaults, to be overridden by explicit options below */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../utils/init/globals.c.html#LN100"><span class='Ref_to_Global_Var'>IsUnderPostmaster</span></a><span class='Parentheses'>) 
</span>        <a href="../../include/utils/guc.h.html#LN350"><span class='Ref_to_Proto'>InitializeGUCOptions</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Ignore the initial --boot argument, if present */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="bootstrap.c.html#LN193"><span class='Ref_to_Parameter'>argc</span></a> <span class='Operator'>&GT; </span><span class='Number'>1</span> <span class='Operator'>&& </span>strcmp<span class='Parentheses'>(</span><a href="bootstrap.c.html#LN193"><span class='Ref_to_Parameter'>argv</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>], </span><span class='String'>"--boot"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="bootstrap.c.html#LN193"><span class='Ref_to_Parameter'>argv</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <a href="bootstrap.c.html#LN193"><span class='Ref_to_Parameter'>argc</span></a><span class='Operator'>--</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* If no -x argument, we are a CheckerProcess */ 
</span>    <a href="bootstrap.c.html#LN67"><span class='Ref_to_Global_Var'>MyAuxProcType</span></a> <span class='Operator'>= </span><a href="../../include/miscadmin.h.html#LN393"><span class='Ref_to_EnumConst'>CheckerProcess</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>while</span> <span class='Parentheses'>((</span><a href="bootstrap.c.html#LN196"><span class='Ref_To_Local'>flag</span></a> <span class='Operator'>= </span><a href="../../include/pg_getopt.h.html#LN42"><span class='Ref_to_Proto'>getopt</span></a><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN193"><span class='Ref_to_Parameter'>argc</span></a><span class='Delimiter'>, </span><a href="bootstrap.c.html#LN193"><span class='Ref_to_Parameter'>argv</span></a><span class='Delimiter'>, </span><span class='String'>"B:c:d:D:Fkr:x:-:"</span><span class='Parentheses'>))</span> <span class='Operator'>!= -</span><span class='Number'>1</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="bootstrap.c.html#LN196"><span class='Ref_To_Local'>flag</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>case</span> <span class='String'>'B'</span><span class='Operator'>: 
</span>                <a href="../../include/utils/guc.h.html#LN276"><span class='Ref_to_Proto'>SetConfigOption</span></a><span class='Parentheses'>(</span><span class='String'>"shared_buffers"</span><span class='Delimiter'>, </span><a href="../../port/getopt.c.html#LN52"><span class='Ref_to_Global_Var'>optarg</span></a><span class='Delimiter'>, </span><a href="../../include/utils/guc.h.html#LN70"><span class='Ref_to_EnumConst'>PGC_POSTMASTER</span></a><span class='Delimiter'>, </span><a href="../../include/utils/guc.h.html#LN110"><span class='Ref_to_EnumConst'>PGC_S_ARGV</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <span class='String'>'D'</span><span class='Operator'>: 
</span>                <a href="bootstrap.c.html#LN197"><span class='Ref_To_Local'>userDoption</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN32"><span class='Ref_to_Proto'>pstrdup</span></a><span class='Parentheses'>(</span><a href="../../port/getopt.c.html#LN52"><span class='Ref_to_Global_Var'>optarg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <span class='String'>'d'</span><span class='Operator'>: 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Comment_Multi_Line'>/* Turn on debugging for the bootstrap process. */ 
</span><a name="LN237"></a>                    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>debugstr</span><span class='Delimiter'>; 
</span> 
                    <a href="bootstrap.c.html#LN237"><span class='Ref_To_Local'>debugstr</span></a> <span class='Operator'>= </span><a href="../../common/psprintf.c.html#LN44"><span class='Ref_to_Func'>psprintf</span></a><span class='Parentheses'>(</span><span class='String'>"debug%s"</span><span class='Delimiter'>, </span><a href="../../port/getopt.c.html#LN52"><span class='Ref_to_Global_Var'>optarg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="../../include/utils/guc.h.html#LN276"><span class='Ref_to_Proto'>SetConfigOption</span></a><span class='Parentheses'>(</span><span class='String'>"log_min_messages"</span><span class='Delimiter'>, </span><a href="bootstrap.c.html#LN237"><span class='Ref_To_Local'>debugstr</span></a><span class='Delimiter'>, 
</span>                                    <a href="../../include/utils/guc.h.html#LN70"><span class='Ref_to_EnumConst'>PGC_POSTMASTER</span></a><span class='Delimiter'>, </span><a href="../../include/utils/guc.h.html#LN110"><span class='Ref_to_EnumConst'>PGC_S_ARGV</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="../../include/utils/guc.h.html#LN276"><span class='Ref_to_Proto'>SetConfigOption</span></a><span class='Parentheses'>(</span><span class='String'>"client_min_messages"</span><span class='Delimiter'>, </span><a href="bootstrap.c.html#LN237"><span class='Ref_To_Local'>debugstr</span></a><span class='Delimiter'>, 
</span>                                    <a href="../../include/utils/guc.h.html#LN70"><span class='Ref_to_EnumConst'>PGC_POSTMASTER</span></a><span class='Delimiter'>, </span><a href="../../include/utils/guc.h.html#LN110"><span class='Ref_to_EnumConst'>PGC_S_ARGV</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN237"><span class='Ref_To_Local'>debugstr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <span class='String'>'F'</span><span class='Operator'>: 
</span>                <a href="../../include/utils/guc.h.html#LN276"><span class='Ref_to_Proto'>SetConfigOption</span></a><span class='Parentheses'>(</span><span class='String'>"fsync"</span><span class='Delimiter'>, </span><span class='String'>"false"</span><span class='Delimiter'>, </span><a href="../../include/utils/guc.h.html#LN70"><span class='Ref_to_EnumConst'>PGC_POSTMASTER</span></a><span class='Delimiter'>, </span><a href="../../include/utils/guc.h.html#LN110"><span class='Ref_to_EnumConst'>PGC_S_ARGV</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <span class='String'>'k'</span><span class='Operator'>: 
</span>                <a href="bootstrap.c.html#LN48"><span class='Ref_to_Global_Var'>bootstrap_data_checksum_version</span></a> <span class='Operator'>= </span><a href="../../include/storage/bufpage.h.html#LN196"><span class='Ref_to_Const'>PG_DATA_CHECKSUM_VERSION</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <span class='String'>'r'</span><span class='Operator'>: 
</span>                <a href="../../port/strlcpy.c.html#LN43"><span class='Ref_to_Func'>strlcpy</span></a><span class='Parentheses'>(</span><a href="../utils/init/globals.c.html#LN61"><span class='Ref_to_Global_Var'>OutputFileName</span></a><span class='Delimiter'>, </span><a href="../../port/getopt.c.html#LN52"><span class='Ref_to_Global_Var'>optarg</span></a><span class='Delimiter'>, </span><a href="../../include/pg_config_manual.h.html#LN88"><span class='Ref_to_Const'>MAXPGPATH</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <span class='String'>'x'</span><span class='Operator'>: 
</span>                <a href="bootstrap.c.html#LN67"><span class='Ref_to_Global_Var'>MyAuxProcType</span></a> <span class='Operator'>= </span>atoi<span class='Parentheses'>(</span><a href="../../port/getopt.c.html#LN52"><span class='Ref_to_Global_Var'>optarg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <span class='String'>'c'</span><span class='Operator'>: 
</span>            <span class='Control'>case</span> <span class='String'>'-'</span><span class='Operator'>: 
</span>                <span class='Delimiter'>{ 
</span><a name="LN262"></a>                    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>name</span><span class='Delimiter'>, 
</span><a name="LN263"></a>                               <span class='Operator'>*</span><span class='Declare_Local'>value</span><span class='Delimiter'>; 
</span> 
                    <a href="../../include/utils/guc.h.html#LN357"><span class='Ref_to_Proto'>ParseLongOption</span></a><span class='Parentheses'>(</span><a href="../../port/getopt.c.html#LN52"><span class='Ref_to_Global_Var'>optarg</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="bootstrap.c.html#LN262"><span class='Ref_To_Local'>name</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><span class='Keyword'>value</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><span class='Keyword'>value</span><span class='Parentheses'>) 
</span>                    <span class='Delimiter'>{ 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="bootstrap.c.html#LN196"><span class='Ref_To_Local'>flag</span></a> <span class='Operator'>== </span><span class='String'>'-'</span><span class='Parentheses'>) 
</span>                            <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                                    <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_SYNTAX_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                     <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"--%s requires a value"</span><span class='Delimiter'>, 
</span>                                            <a href="../../port/getopt.c.html#LN52"><span class='Ref_to_Global_Var'>optarg</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                        <span class='Control'>else</span> 
                            <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                                    <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_SYNTAX_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                     <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"-c %s requires a value"</span><span class='Delimiter'>, 
</span>                                            <a href="../../port/getopt.c.html#LN52"><span class='Ref_to_Global_Var'>optarg</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span> 
                    <a href="../../include/utils/guc.h.html#LN276"><span class='Ref_to_Proto'>SetConfigOption</span></a><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN262"><span class='Ref_To_Local'>name</span></a><span class='Delimiter'>, </span><span class='Keyword'>value</span><span class='Delimiter'>, </span><a href="../../include/utils/guc.h.html#LN70"><span class='Ref_to_EnumConst'>PGC_POSTMASTER</span></a><span class='Delimiter'>, </span><a href="../../include/utils/guc.h.html#LN110"><span class='Ref_to_EnumConst'>PGC_S_ARGV</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN262"><span class='Ref_To_Local'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Keyword'>value</span><span class='Parentheses'>) 
</span>                        <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><span class='Keyword'>value</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>            <span class='Control'>default</span><span class='Operator'>: 
</span>                <a href="../../bin/pg_dump/parallel.c.html#LN179"><span class='Ref_to_Macro'>write_stderr</span></a><span class='Parentheses'>(</span><span class='String'>"Try \"%s --help\" for more information.\n"</span><span class='Delimiter'>, 
</span>                             <a href="bootstrap.c.html#LN195"><span class='Ref_To_Local'>progname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="../storage/ipc/ipc.c.html#LN97"><span class='Ref_to_Func'>proc_exit</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch flag &raquo; </span> 
    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end while (flag=getopt(argc,arg... &raquo; </span> 
 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="bootstrap.c.html#LN193"><span class='Ref_to_Parameter'>argc</span></a> <span class='Operator'>!= </span><a href="../../port/getopt.c.html#LN50"><span class='Ref_to_Global_Var'>optind</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../bin/pg_dump/parallel.c.html#LN179"><span class='Ref_to_Macro'>write_stderr</span></a><span class='Parentheses'>(</span><span class='String'>"%s: invalid command-line arguments\n"</span><span class='Delimiter'>, </span><a href="bootstrap.c.html#LN195"><span class='Ref_To_Local'>progname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../storage/ipc/ipc.c.html#LN97"><span class='Ref_to_Func'>proc_exit</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Identify myself via ps 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../utils/init/globals.c.html#LN100"><span class='Ref_to_Global_Var'>IsUnderPostmaster</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN305"></a>        <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>statmsg</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="bootstrap.c.html#LN67"><span class='Ref_to_Global_Var'>MyAuxProcType</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>case</span> <a href="../../include/miscadmin.h.html#LN395"><span class='Ref_to_EnumConst'>StartupProcess</span></a><span class='Operator'>: 
</span>                <a href="bootstrap.c.html#LN305"><span class='Ref_To_Local'>statmsg</span></a> <span class='Operator'>= </span><span class='String'>"startup process"</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="../../include/miscadmin.h.html#LN396"><span class='Ref_to_EnumConst'>BgWriterProcess</span></a><span class='Operator'>: 
</span>                <a href="bootstrap.c.html#LN305"><span class='Ref_To_Local'>statmsg</span></a> <span class='Operator'>= </span><span class='String'>"writer process"</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="../../include/miscadmin.h.html#LN397"><span class='Ref_to_EnumConst'>CheckpointerProcess</span></a><span class='Operator'>: 
</span>                <a href="bootstrap.c.html#LN305"><span class='Ref_To_Local'>statmsg</span></a> <span class='Operator'>= </span><span class='String'>"checkpointer process"</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="../../include/miscadmin.h.html#LN398"><span class='Ref_to_EnumConst'>WalWriterProcess</span></a><span class='Operator'>: 
</span>                <a href="bootstrap.c.html#LN305"><span class='Ref_To_Local'>statmsg</span></a> <span class='Operator'>= </span><span class='String'>"wal writer process"</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="../../include/miscadmin.h.html#LN399"><span class='Ref_to_EnumConst'>WalReceiverProcess</span></a><span class='Operator'>: 
</span>                <a href="bootstrap.c.html#LN305"><span class='Ref_To_Local'>statmsg</span></a> <span class='Operator'>= </span><span class='String'>"wal receiver process"</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>default</span><span class='Operator'>: 
</span>                <a href="bootstrap.c.html#LN305"><span class='Ref_To_Local'>statmsg</span></a> <span class='Operator'>= </span><span class='String'>"??? process"</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch MyAuxProcType &raquo; </span> 
        <a href="../../include/utils/ps_status.h.html#LN18"><span class='Ref_to_Proto'>init_ps_display</span></a><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN305"><span class='Ref_To_Local'>statmsg</span></a><span class='Delimiter'>, </span><span class='String'>""</span><span class='Delimiter'>, </span><span class='String'>""</span><span class='Delimiter'>, </span><span class='String'>""</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if IsUnderPostmaster &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* Acquire configuration parameters, unless inherited from postmaster */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../utils/init/globals.c.html#LN100"><span class='Ref_to_Global_Var'>IsUnderPostmaster</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../include/utils/guc.h.html#LN351"><span class='Ref_to_Proto'>SelectConfigFiles</span></a><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN197"><span class='Ref_To_Local'>userDoption</span></a><span class='Delimiter'>, </span><a href="bootstrap.c.html#LN195"><span class='Ref_To_Local'>progname</span></a><span class='Parentheses'>))</span> 
            <a href="../storage/ipc/ipc.c.html#LN97"><span class='Ref_to_Func'>proc_exit</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* Validate we have been given a reasonable-looking DataDir */ 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="../utils/init/globals.c.html#LN59"><span class='Ref_to_Global_Var'>DataDir</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../include/miscadmin.h.html#LN464"><span class='Ref_to_Proto'>ValidatePgVersion</span></a><span class='Parentheses'>(</span><a href="../utils/init/globals.c.html#LN59"><span class='Ref_to_Global_Var'>DataDir</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Change into DataDir (if under postmaster, should be done already) */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../utils/init/globals.c.html#LN100"><span class='Ref_to_Global_Var'>IsUnderPostmaster</span></a><span class='Parentheses'>) 
</span>        <a href="../utils/init/miscinit.c.html#LN113"><span class='Ref_to_Func'>ChangeToDataDir</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* If standalone, create lockfile for data directory */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../utils/init/globals.c.html#LN100"><span class='Ref_to_Global_Var'>IsUnderPostmaster</span></a><span class='Parentheses'>) 
</span>        <a href="../../include/miscadmin.h.html#LN458"><span class='Ref_to_Proto'>CreateDataDirLockFile</span></a><span class='Parentheses'>(</span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../include/miscadmin.h.html#LN375"><span class='Ref_to_Macro'>SetProcessingMode</span></a><span class='Parentheses'>(</span><a href="../../include/miscadmin.h.html#LN362"><span class='Ref_to_EnumConst'>BootstrapProcessing</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../utils/init/miscinit.c.html#LN72"><span class='Ref_to_Global_Var'>IgnoreSystemIndexes</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Initialize MaxBackends (if under postmaster, was done already) */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../utils/init/globals.c.html#LN100"><span class='Ref_to_Global_Var'>IsUnderPostmaster</span></a><span class='Parentheses'>) 
</span>        <a href="../../include/miscadmin.h.html#LN421"><span class='Ref_to_Proto'>InitializeMaxBackends</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="../../include/miscadmin.h.html#LN424"><span class='Ref_to_Proto'>BaseInit</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * When we are an auxiliary process, we aren't going to do the full 
     * InitPostgres pushups, but there are a couple of things that need to get 
     * lit up even in an auxiliary process. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../utils/init/globals.c.html#LN100"><span class='Ref_to_Global_Var'>IsUnderPostmaster</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * Create a PGPROC so we can use LWLocks.  In the EXEC_BACKEND case, 
         * this was already done by SubPostmasterMain(). 
         */ 
</span><span class='Directive'>#ifndef</span> EXEC_BACKEND 
        <a href="../../include/storage/proc.h.html#LN290"><span class='Ref_to_Proto'>InitAuxiliaryProcess</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
 
        <span class='Comment_Multi_Line'>/* 
         * Assign the ProcSignalSlot for an auxiliary process.  Since it 
         * doesn't have a BackendId, the slot is statically allocated based on 
         * the auxiliary process type (MyAuxProcType).  Backends use slots 
         * indexed in the range from 1 to MaxBackends (inclusive), so we use 
         * MaxBackends + AuxProcType + 1 as the index of the slot for an 
         * auxiliary process. 
         * 
         * This will need rethinking if we ever want more than one of a 
         * particular auxiliary process type. 
         */ 
</span>        <a href="../../include/storage/procsignal.h.html#LN54"><span class='Ref_to_Proto'>ProcSignalInit</span></a><span class='Parentheses'>(</span><a href="../utils/init/globals.c.html#LN126"><span class='Ref_to_Global_Var'>MaxBackends</span></a> <span class='Operator'>+ </span><a href="bootstrap.c.html#LN67"><span class='Ref_to_Global_Var'>MyAuxProcType</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* finish setting up bufmgr.c */ 
</span>        <a href="../../include/storage/bufmgr.h.html#LN183"><span class='Ref_to_Proto'>InitBufferPoolBackend</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Initialize backend status information */ 
</span>        <a href="../../include/pgstat.h.html#LN1165"><span class='Ref_to_Proto'>pgstat_initialize</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>        <a href="../../include/pgstat.h.html#LN1166"><span class='Ref_to_Proto'>pgstat_bestart</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* register a before-shutdown callback for LWLock cleanup */ 
</span>        <a href="../../include/storage/ipc.h.html#LN70"><span class='Ref_to_Proto'>before_shmem_exit</span></a><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN57"><span class='Ref_to_Proto'>ShutdownAuxiliaryProcess</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if IsUnderPostmaster &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* 
     * XLOG operations 
     */ 
</span>    <a href="../../include/miscadmin.h.html#LN375"><span class='Ref_to_Macro'>SetProcessingMode</span></a><span class='Parentheses'>(</span><a href="../../include/miscadmin.h.html#LN364"><span class='Ref_to_EnumConst'>NormalProcessing</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="bootstrap.c.html#LN67"><span class='Ref_to_Global_Var'>MyAuxProcType</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>case</span> <a href="../../include/miscadmin.h.html#LN393"><span class='Ref_to_EnumConst'>CheckerProcess</span></a><span class='Operator'>: 
</span>            <span class='Comment_Multi_Line'>/* don't set signals, they're useless here */ 
</span>            <a href="bootstrap.c.html#LN54"><span class='Ref_to_Proto'>CheckerModeMain</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>            <a href="../storage/ipc/ipc.c.html#LN97"><span class='Ref_to_Func'>proc_exit</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* should never return */ 
</span> 
        <span class='Control'>case</span> <a href="../../include/miscadmin.h.html#LN394"><span class='Ref_to_EnumConst'>BootstrapProcess</span></a><span class='Operator'>: 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * There was a brief instant during which mode was Normal; this is 
             * okay.  We need to be in bootstrap mode during BootStrapXLOG for 
             * the sake of multixact initialization. 
             */ 
</span>            <a href="../../include/miscadmin.h.html#LN375"><span class='Ref_to_Macro'>SetProcessingMode</span></a><span class='Parentheses'>(</span><a href="../../include/miscadmin.h.html#LN362"><span class='Ref_to_EnumConst'>BootstrapProcessing</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="bootstrap.c.html#LN56"><span class='Ref_to_Proto'>bootstrap_signals</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>            <a href="../../include/access/xlog.h.html#LN263"><span class='Ref_to_Proto'>BootStrapXLOG</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>            <a href="bootstrap.c.html#LN55"><span class='Ref_to_Proto'>BootstrapModeMain</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>            <a href="../storage/ipc/ipc.c.html#LN97"><span class='Ref_to_Func'>proc_exit</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* should never return */ 
</span> 
        <span class='Control'>case</span> <a href="../../include/miscadmin.h.html#LN395"><span class='Ref_to_EnumConst'>StartupProcess</span></a><span class='Operator'>: 
</span>            <span class='Comment_Multi_Line'>/* don't set signals, startup process has its own agenda */ 
</span>            <a href="../postmaster/startup.c.html#LN177"><span class='Ref_to_Func'>StartupProcessMain</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>            <a href="../storage/ipc/ipc.c.html#LN97"><span class='Ref_to_Func'>proc_exit</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* should never return */ 
</span> 
        <span class='Control'>case</span> <a href="../../include/miscadmin.h.html#LN396"><span class='Ref_to_EnumConst'>BgWriterProcess</span></a><span class='Operator'>: 
</span>            <span class='Comment_Multi_Line'>/* don't set signals, bgwriter has its own agenda */ 
</span>            <a href="../postmaster/bgwriter.c.html#LN108"><span class='Ref_to_Func'>BackgroundWriterMain</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>            <a href="../storage/ipc/ipc.c.html#LN97"><span class='Ref_to_Func'>proc_exit</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* should never return */ 
</span> 
        <span class='Control'>case</span> <a href="../../include/miscadmin.h.html#LN397"><span class='Ref_to_EnumConst'>CheckpointerProcess</span></a><span class='Operator'>: 
</span>            <span class='Comment_Multi_Line'>/* don't set signals, checkpointer has its own agenda */ 
</span>            <a href="../postmaster/checkpointer.c.html#LN191"><span class='Ref_to_Func'>CheckpointerMain</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>            <a href="../storage/ipc/ipc.c.html#LN97"><span class='Ref_to_Func'>proc_exit</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* should never return */ 
</span> 
        <span class='Control'>case</span> <a href="../../include/miscadmin.h.html#LN398"><span class='Ref_to_EnumConst'>WalWriterProcess</span></a><span class='Operator'>: 
</span>            <span class='Comment_Multi_Line'>/* don't set signals, walwriter has its own agenda */ 
</span>            <a href="../../include/access/xlog.h.html#LN266"><span class='Ref_to_Proto'>InitXLOGAccess</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>            <a href="../postmaster/walwriter.c.html#LN96"><span class='Ref_to_Func'>WalWriterMain</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>            <a href="../storage/ipc/ipc.c.html#LN97"><span class='Ref_to_Func'>proc_exit</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* should never return */ 
</span> 
        <span class='Control'>case</span> <a href="../../include/miscadmin.h.html#LN399"><span class='Ref_to_EnumConst'>WalReceiverProcess</span></a><span class='Operator'>: 
</span>            <span class='Comment_Multi_Line'>/* don't set signals, walreceiver has its own agenda */ 
</span>            <a href="../replication/walreceiver.c.html#LN186"><span class='Ref_to_Func'>WalReceiverMain</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>            <a href="../storage/ipc/ipc.c.html#LN97"><span class='Ref_to_Func'>proc_exit</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* should never return */ 
</span> 
        <span class='Control'>default</span><span class='Operator'>: 
</span>            <a href="bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN52"><span class='Ref_to_Const'>PANIC</span></a><span class='Delimiter'>, </span><span class='String'>"unrecognized process type: %d"</span><span class='Delimiter'>, </span><span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>) </span><a href="bootstrap.c.html#LN67"><span class='Ref_to_Global_Var'>MyAuxProcType</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../storage/ipc/ipc.c.html#LN97"><span class='Ref_to_Func'>proc_exit</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch MyAuxProcType &raquo; </span> 
<span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end AuxiliaryProcessMain &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * In shared memory checker mode, all we really want to do is create shared 
 * memory and semaphores (just to prove we can do it with the current GUC 
 * settings).  Since, in fact, that was already done by BaseInit(), 
 * we have nothing more to do here. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN462"></a><span class='Declare_Function'>CheckerModeMain</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <a href="../storage/ipc/ipc.c.html#LN97"><span class='Ref_to_Func'>proc_exit</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 *   The main entry point for running the backend in bootstrap mode 
 * 
 *   The bootstrap mode is used to initialize the template database. 
 *   The bootstrap backend doesn't speak SQL, but instead expects 
 *   commands in a special bootstrap language. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN475"></a><span class='Declare_Function'>BootstrapModeMain</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN477"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../utils/init/globals.c.html#LN100"><span class='Ref_to_Global_Var'>IsUnderPostmaster</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="../../include/miscadmin.h.html#LN369"><span class='Ref_to_Macro'>IsBootstrapProcessingMode</span></a><span class='Parentheses'>())</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Do backend-like initialization for bootstrap mode 
     */ 
</span>    <a href="../storage/lmgr/proc.c.html#LN285"><span class='Ref_to_Func'>InitProcess</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="../../include/miscadmin.h.html#LN422"><span class='Ref_to_Proto'>InitPostgres</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Initialize stuff for bootstrap-file processing */ 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="bootstrap.c.html#LN477"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="bootstrap.c.html#LN477"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="../../include/bootstrap/bootstrap.h.html#LN23"><span class='Ref_to_Const'>MAXATTR</span></a><span class='Delimiter'>; </span><a href="bootstrap.c.html#LN477"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="bootstrap.c.html#LN71"><span class='Ref_to_Global_Var'>attrtypes</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN477"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>        <a href="bootstrap.c.html#LN163"><span class='Ref_to_Global_Var'>Nulls</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN477"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Process bootstrap input. 
     */ 
</span>    <a href="../../include/access/xact.h.html#LN348"><span class='Ref_to_Proto'>StartTransactionCommand</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="../../include/bootstrap/bootstrap.h.html#LN60"><span class='Ref_to_Proto'>boot_yyparse</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="../../include/access/xact.h.html#LN349"><span class='Ref_to_Proto'>CommitTransactionCommand</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * We should now know about all mapped relations, so it's okay to write 
     * out the initial relation mapping files. 
     */ 
</span>    <a href="../../include/utils/relmapper.h.html#LN55"><span class='Ref_to_Proto'>RelationMapFinishBootstrap</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Clean up and exit */ 
</span>    <a href="../../bin/pg_upgrade/pg_upgrade.c.html#LN53"><span class='Ref_to_Proto'>cleanup</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="../storage/ipc/ipc.c.html#LN97"><span class='Ref_to_Func'>proc_exit</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end BootstrapModeMain &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* ---------------------------------------------------------------- 
 *                      misc functions 
 * ---------------------------------------------------------------- 
 */ 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Set up signal handling for a bootstrap process 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN524"></a><span class='Declare_Function'>bootstrap_signals</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../utils/init/globals.c.html#LN100"><span class='Ref_to_Global_Var'>IsUnderPostmaster</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Set up appropriately for interactive use */ 
</span>    <a href="../../port/pqsignal.c.html#LN38"><span class='Ref_to_Func'>pqsignal</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32.h.html#LN187"><span class='Ref_to_Const'>SIGHUP</span></a><span class='Delimiter'>, </span><a href="../../include/tcop/tcopprot.h.html#LN67"><span class='Ref_to_Proto'>die</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../port/pqsignal.c.html#LN38"><span class='Ref_to_Func'>pqsignal</span></a><span class='Parentheses'>(</span>SIGINT<span class='Delimiter'>, </span><a href="../../include/tcop/tcopprot.h.html#LN67"><span class='Ref_to_Proto'>die</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../port/pqsignal.c.html#LN38"><span class='Ref_to_Func'>pqsignal</span></a><span class='Parentheses'>(</span>SIGTERM<span class='Delimiter'>, </span><a href="../../include/tcop/tcopprot.h.html#LN67"><span class='Ref_to_Proto'>die</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../port/pqsignal.c.html#LN38"><span class='Ref_to_Func'>pqsignal</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32.h.html#LN188"><span class='Ref_to_Const'>SIGQUIT</span></a><span class='Delimiter'>, </span><a href="../../include/tcop/tcopprot.h.html#LN67"><span class='Ref_to_Proto'>die</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Begin shutdown of an auxiliary process.  This is approximately the equivalent 
 * of ShutdownPostgres() in postinit.c.  We can't run transactions in an 
 * auxiliary process, so most of the work of AbortTransaction() is not needed, 
 * but we do need to make sure we've released any LWLocks we are holding. 
 * (This is only critical during an error exit.) 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN543"></a><span class='Declare_Function'>ShutdownAuxiliaryProcess</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>code</span><span class='Delimiter'>, </span><a href="../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Declare_Parameter'>arg</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <a href="../../include/storage/lwlock.h.html#LN150"><span class='Ref_to_Proto'>LWLockReleaseAll</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="../../include/storage/condition_variable.h.html#LN45"><span class='Ref_to_Proto'>ConditionVariableCancelSleep</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="../../include/pgstat.h.html#LN1230"><span class='Ref_to_Func'>pgstat_report_wait_end</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* ---------------------------------------------------------------- 
 *              MANUAL BACKEND INTERACTIVE INTERFACE COMMANDS 
 * ---------------------------------------------------------------- 
 */ 
</span> 
<span class='Comment_Multi_Line'>/* ---------------- 
 *      boot_openrel 
 * ---------------- 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN560"></a><span class='Declare_Function'>boot_openrel</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>relname</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN562"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN563"></a>    <span class='Control'>struct</span> <a href="bootstrap.c.html#LN153"><span class='Ref_to_Struct'>typmap</span></a> <span class='Operator'>**</span><span class='Declare_Local'>app</span><span class='Delimiter'>; 
</span><a name="LN564"></a>    <a href="../../include/utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a>    <span class='Declare_Local'>rel</span><span class='Delimiter'>; 
</span><a name="LN565"></a>    <a href="../../include/access/heapam.h.html#LN99"><span class='Ref_to_Typedef'>HeapScanDesc</span></a> <span class='Declare_Local'>scan</span><span class='Delimiter'>; 
</span><a name="LN566"></a>    <a href="../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tup</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span>strlen<span class='Parentheses'>(</span><a href="bootstrap.c.html#LN560"><span class='Ref_to_Parameter'>relname</span></a><span class='Parentheses'>) </span><span class='Operator'>&GT;= </span><a href="../../interfaces/ecpg/include/sqlda-native.h.html#LN15"><span class='Ref_to_Const'>NAMEDATALEN</span></a><span class='Parentheses'>)</span> 
        <a href="bootstrap.c.html#LN560"><span class='Ref_to_Parameter'>relname</span></a><span class='Delimiter'>[</span><a href="../../interfaces/ecpg/include/sqlda-native.h.html#LN15"><span class='Ref_to_Const'>NAMEDATALEN</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="bootstrap.c.html#LN159"><span class='Ref_to_Global_Var'>Typ</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* We can now load the pg_type data */ 
</span>        <a href="bootstrap.c.html#LN564"><span class='Ref_To_Local'>rel</span></a> <span class='Operator'>= </span><a href="../../include/access/heapam.h.html#LN91"><span class='Ref_to_Proto'>heap_open</span></a><span class='Parentheses'>(</span><a href="../../include/catalog/pg_type.h.html#LN33"><span class='Ref_to_Const'>TypeRelationId</span></a><span class='Delimiter'>, </span><a href="../../include/storage/lockdefs.h.html#LN33"><span class='Ref_to_Const'>NoLock</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="bootstrap.c.html#LN565"><span class='Ref_To_Local'>scan</span></a> <span class='Operator'>= </span><a href="../../include/access/heapam.h.html#LN110"><span class='Ref_to_Proto'>heap_beginscan_catalog</span></a><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN564"><span class='Ref_To_Local'>rel</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="bootstrap.c.html#LN562"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <span class='Control'>while</span> <span class='Parentheses'>((</span><a href="bootstrap.c.html#LN566"><span class='Ref_To_Local'>tup</span></a> <span class='Operator'>= </span><a href="../../include/access/heapam.h.html#LN127"><span class='Ref_to_Proto'>heap_getnext</span></a><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN565"><span class='Ref_To_Local'>scan</span></a><span class='Delimiter'>, </span><a href="../../include/access/sdir.h.html#LN25"><span class='Ref_to_EnumConst'>ForwardScanDirection</span></a><span class='Parentheses'>))</span> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
            <span class='Operator'>++</span><a href="bootstrap.c.html#LN562"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>; 
</span>        <a href="../../include/access/heapam.h.html#LN126"><span class='Ref_to_Proto'>heap_endscan</span></a><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN565"><span class='Ref_To_Local'>scan</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="bootstrap.c.html#LN563"><span class='Ref_To_Local'>app</span></a> <span class='Operator'>= </span><a href="bootstrap.c.html#LN159"><span class='Ref_to_Global_Var'>Typ</span></a> <span class='Operator'>= </span><a href="../../common/unicode_norm.c.html#LN24"><span class='Ref_to_Macro'>ALLOC</span></a><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="bootstrap.c.html#LN153"><span class='Ref_to_Struct'>typmap</span></a> <span class='Operator'>*</span><span class='Delimiter'>, </span><a href="bootstrap.c.html#LN562"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="bootstrap.c.html#LN562"><span class='Ref_To_Local'>i</span></a><span class='Operator'>-- &GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <span class='Operator'>*</span><a href="bootstrap.c.html#LN563"><span class='Ref_To_Local'>app</span></a><span class='Operator'>++ = </span><a href="../../common/unicode_norm.c.html#LN24"><span class='Ref_to_Macro'>ALLOC</span></a><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="bootstrap.c.html#LN153"><span class='Ref_to_Struct'>typmap</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Operator'>*</span><a href="bootstrap.c.html#LN563"><span class='Ref_To_Local'>app</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>        <a href="bootstrap.c.html#LN565"><span class='Ref_To_Local'>scan</span></a> <span class='Operator'>= </span><a href="../../include/access/heapam.h.html#LN110"><span class='Ref_to_Proto'>heap_beginscan_catalog</span></a><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN564"><span class='Ref_To_Local'>rel</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="bootstrap.c.html#LN563"><span class='Ref_To_Local'>app</span></a> <span class='Operator'>= </span><a href="bootstrap.c.html#LN159"><span class='Ref_to_Global_Var'>Typ</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>while</span> <span class='Parentheses'>((</span><a href="bootstrap.c.html#LN566"><span class='Ref_To_Local'>tup</span></a> <span class='Operator'>= </span><a href="../../include/access/heapam.h.html#LN127"><span class='Ref_to_Proto'>heap_getnext</span></a><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN565"><span class='Ref_To_Local'>scan</span></a><span class='Delimiter'>, </span><a href="../../include/access/sdir.h.html#LN25"><span class='Ref_to_EnumConst'>ForwardScanDirection</span></a><span class='Parentheses'>))</span> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="bootstrap.c.html#LN563"><span class='Ref_To_Local'>app</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>am_oid <span class='Operator'>= </span><a href="../../include/access/htup_details.h.html#LN694"><span class='Ref_to_Macro'>HeapTupleGetOid</span></a><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN566"><span class='Ref_To_Local'>tup</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            memcpy<span class='Parentheses'>((</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>)</span> <span class='Operator'>&</span><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="bootstrap.c.html#LN563"><span class='Ref_To_Local'>app</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>am_typ<span class='Delimiter'>, 
</span>                   <span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>)</span> <a href="../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN566"><span class='Ref_To_Local'>tup</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                   <span class='Keyword'>sizeof</span><span class='Parentheses'>((</span><span class='Operator'>*</span><a href="bootstrap.c.html#LN563"><span class='Ref_To_Local'>app</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>am_typ<span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="bootstrap.c.html#LN563"><span class='Ref_To_Local'>app</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <a href="../../include/access/heapam.h.html#LN126"><span class='Ref_to_Proto'>heap_endscan</span></a><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN565"><span class='Ref_To_Local'>scan</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../include/access/heapam.h.html#LN96"><span class='Ref_to_Macro'>heap_close</span></a><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN564"><span class='Ref_To_Local'>rel</span></a><span class='Delimiter'>, </span><a href="../../include/storage/lockdefs.h.html#LN33"><span class='Ref_to_Const'>NoLock</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if Typ==NULL &raquo; </span> 
 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="bootstrap.c.html#LN69"><span class='Ref_to_Global_Var'>boot_reldesc</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="../../include/bootstrap/bootstrap.h.html#LN38"><span class='Ref_to_Proto'>closerel</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN21"><span class='Ref_to_Const'>DEBUG4</span></a><span class='Delimiter'>, </span><span class='String'>"open relation %s, attrsize %d"</span><span class='Delimiter'>, 
</span>         <a href="bootstrap.c.html#LN560"><span class='Ref_to_Parameter'>relname</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>) </span><a href="../../include/catalog/pg_attribute.h.html#LN178"><span class='Ref_to_Const'>ATTRIBUTE_FIXED_PART_SIZE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="bootstrap.c.html#LN69"><span class='Ref_to_Global_Var'>boot_reldesc</span></a> <span class='Operator'>= </span><a href="../../include/access/heapam.h.html#LN92"><span class='Ref_to_Proto'>heap_openrv</span></a><span class='Parentheses'>(</span><a href="../../include/nodes/makefuncs.h.html#LN68"><span class='Ref_to_Proto'>makeRangeVar</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="bootstrap.c.html#LN560"><span class='Ref_to_Parameter'>relname</span></a><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="../../include/storage/lockdefs.h.html#LN33"><span class='Ref_to_Const'>NoLock</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="bootstrap.c.html#LN72"><span class='Ref_to_Global_Var'>numattr</span></a> <span class='Operator'>= </span><a href="bootstrap.c.html#LN69"><span class='Ref_to_Global_Var'>boot_reldesc</span></a><span class='Operator'>-&GT;</span><a href="../../include/utils/rel.h.html#LN113"><span class='Ref_to_Member'>rd_rel</span></a><span class='Operator'>-&GT;</span>relnatts<span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="bootstrap.c.html#LN562"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="bootstrap.c.html#LN562"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="bootstrap.c.html#LN72"><span class='Ref_to_Global_Var'>numattr</span></a><span class='Delimiter'>; </span><a href="bootstrap.c.html#LN562"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="bootstrap.c.html#LN71"><span class='Ref_to_Global_Var'>attrtypes</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN562"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <a href="bootstrap.c.html#LN71"><span class='Ref_to_Global_Var'>attrtypes</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN562"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="bootstrap.c.html#LN58"><span class='Ref_to_Proto'>AllocateAttribute</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>        <a href="../../include/c.h.html#LN1057"><span class='Ref_to_Macro'>memmove</span></a><span class='Parentheses'>((</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="bootstrap.c.html#LN71"><span class='Ref_to_Global_Var'>attrtypes</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN562"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>], 
</span>                <span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="bootstrap.c.html#LN69"><span class='Ref_to_Global_Var'>boot_reldesc</span></a><span class='Operator'>-&GT;</span><a href="../../include/utils/rel.h.html#LN114"><span class='Ref_to_Member'>rd_att</span></a><span class='Operator'>-&GT;</span><a href="../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN562"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>], 
</span>                <a href="../../include/catalog/pg_attribute.h.html#LN178"><span class='Ref_to_Const'>ATTRIBUTE_FIXED_PART_SIZE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Delimiter'>{ 
</span><a name="LN615"></a>            <a href="../../include/catalog/pg_attribute.h.html#LN186"><span class='Ref_to_Typedef'>Form_pg_attribute</span></a> <span class='Declare_Local'>at</span> <span class='Operator'>= </span><a href="bootstrap.c.html#LN71"><span class='Ref_to_Global_Var'>attrtypes</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN562"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span> 
            <a href="bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN21"><span class='Ref_to_Const'>DEBUG4</span></a><span class='Delimiter'>, </span><span class='String'>"create attribute %d name %s len %d num %d type %u"</span><span class='Delimiter'>, 
</span>                 <a href="bootstrap.c.html#LN562"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="../../include/c.h.html#LN498"><span class='Ref_to_Macro'>NameStr</span></a><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN615"><span class='Ref_To_Local'>at</span></a><span class='Operator'>-&GT;</span>attname<span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="bootstrap.c.html#LN615"><span class='Ref_To_Local'>at</span></a><span class='Operator'>-&GT;</span>attlen<span class='Delimiter'>, </span><a href="bootstrap.c.html#LN615"><span class='Ref_To_Local'>at</span></a><span class='Operator'>-&GT;</span>attnum<span class='Delimiter'>, 
</span>                 <a href="bootstrap.c.html#LN615"><span class='Ref_To_Local'>at</span></a><span class='Operator'>-&GT;</span>atttypid<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
}</span><span class='Auto_Annotations'> &laquo; end boot_openrel &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* ---------------- 
 *      closerel 
 * ---------------- 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN629"></a><span class='Declare_Function'>closerel</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>name</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="bootstrap.c.html#LN629"><span class='Ref_to_Parameter'>name</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="bootstrap.c.html#LN69"><span class='Ref_to_Global_Var'>boot_reldesc</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="../../include/utils/rel.h.html#LN436"><span class='Ref_to_Macro'>RelationGetRelationName</span></a><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN69"><span class='Ref_to_Global_Var'>boot_reldesc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="bootstrap.c.html#LN629"><span class='Ref_to_Parameter'>name</span></a><span class='Parentheses'>)</span> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                <a href="bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"close of %s when %s was expected"</span><span class='Delimiter'>, 
</span>                     <a href="bootstrap.c.html#LN629"><span class='Ref_to_Parameter'>name</span></a><span class='Delimiter'>, </span><a href="../../include/utils/rel.h.html#LN436"><span class='Ref_to_Macro'>RelationGetRelationName</span></a><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN69"><span class='Ref_to_Global_Var'>boot_reldesc</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
            <a href="bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"close of %s before any relation was opened"</span><span class='Delimiter'>, 
</span>                 <a href="bootstrap.c.html#LN629"><span class='Ref_to_Parameter'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="bootstrap.c.html#LN69"><span class='Ref_to_Global_Var'>boot_reldesc</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"no open relation to close"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN21"><span class='Ref_to_Const'>DEBUG4</span></a><span class='Delimiter'>, </span><span class='String'>"close relation %s"</span><span class='Delimiter'>, 
</span>             <a href="../../include/utils/rel.h.html#LN436"><span class='Ref_to_Macro'>RelationGetRelationName</span></a><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN69"><span class='Ref_to_Global_Var'>boot_reldesc</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="../../include/access/heapam.h.html#LN96"><span class='Ref_to_Macro'>heap_close</span></a><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN69"><span class='Ref_to_Global_Var'>boot_reldesc</span></a><span class='Delimiter'>, </span><a href="../../include/storage/lockdefs.h.html#LN33"><span class='Ref_to_Const'>NoLock</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="bootstrap.c.html#LN69"><span class='Ref_to_Global_Var'>boot_reldesc</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
}</span><span class='Auto_Annotations'> &laquo; end closerel &raquo; </span> 
 
 
 
<span class='Comment_Multi_Line'>/* ---------------- 
 * DEFINEATTR() 
 * 
 * define a &LT;field,type&GT; pair 
 * if there are n fields in a relation to be created, this routine 
 * will be called n times 
 * ---------------- 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN666"></a><span class='Declare_Function'>DefineAttr</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>name</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>type</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>attnum</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>nullness</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN668"></a>    <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>typeoid</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="bootstrap.c.html#LN69"><span class='Ref_to_Global_Var'>boot_reldesc</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN39"><span class='Ref_to_Const'>WARNING</span></a><span class='Delimiter'>, </span><span class='String'>"no open relations allowed with CREATE command"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../include/bootstrap/bootstrap.h.html#LN38"><span class='Ref_to_Proto'>closerel</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="bootstrap.c.html#LN71"><span class='Ref_to_Global_Var'>attrtypes</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN666"><span class='Ref_to_Parameter'>attnum</span></a><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="bootstrap.c.html#LN71"><span class='Ref_to_Global_Var'>attrtypes</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN666"><span class='Ref_to_Parameter'>attnum</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="bootstrap.c.html#LN58"><span class='Ref_to_Proto'>AllocateAttribute</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="../../include/c.h.html#LN856"><span class='Ref_to_Macro'>MemSet</span></a><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN71"><span class='Ref_to_Global_Var'>attrtypes</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN666"><span class='Ref_to_Parameter'>attnum</span></a><span class='Delimiter'>], </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../include/catalog/pg_attribute.h.html#LN178"><span class='Ref_to_Const'>ATTRIBUTE_FIXED_PART_SIZE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../include/utils/builtins.h.html#LN40"><span class='Ref_to_Proto'>namestrcpy</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="bootstrap.c.html#LN71"><span class='Ref_to_Global_Var'>attrtypes</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN666"><span class='Ref_to_Parameter'>attnum</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attname<span class='Delimiter'>, </span><a href="bootstrap.c.html#LN666"><span class='Ref_to_Parameter'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN21"><span class='Ref_to_Const'>DEBUG4</span></a><span class='Delimiter'>, </span><span class='String'>"column %s %s"</span><span class='Delimiter'>, </span><a href="../../include/c.h.html#LN498"><span class='Ref_to_Macro'>NameStr</span></a><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN71"><span class='Ref_to_Global_Var'>attrtypes</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN666"><span class='Ref_to_Parameter'>attnum</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attname<span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="bootstrap.c.html#LN666"><span class='Ref_to_Parameter'>type</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="bootstrap.c.html#LN71"><span class='Ref_to_Global_Var'>attrtypes</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN666"><span class='Ref_to_Parameter'>attnum</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attnum <span class='Operator'>= </span><a href="bootstrap.c.html#LN666"><span class='Ref_to_Parameter'>attnum</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* fillatt */ 
</span> 
    <a href="bootstrap.c.html#LN668"><span class='Ref_To_Local'>typeoid</span></a> <span class='Operator'>= </span><a href="bootstrap.c.html#LN59"><span class='Ref_to_Proto'>gettype</span></a><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN666"><span class='Ref_to_Parameter'>type</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="bootstrap.c.html#LN159"><span class='Ref_to_Global_Var'>Typ</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="bootstrap.c.html#LN71"><span class='Ref_to_Global_Var'>attrtypes</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN666"><span class='Ref_to_Parameter'>attnum</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>atttypid <span class='Operator'>= </span><a href="bootstrap.c.html#LN160"><span class='Ref_to_Global_Var'>Ap</span></a><span class='Operator'>-&GT;</span><a href="bootstrap.c.html#LN155"><span class='Ref_to_Member'>am_oid</span></a><span class='Delimiter'>; 
</span>        <a href="bootstrap.c.html#LN71"><span class='Ref_to_Global_Var'>attrtypes</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN666"><span class='Ref_to_Parameter'>attnum</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attlen <span class='Operator'>= </span><a href="bootstrap.c.html#LN160"><span class='Ref_to_Global_Var'>Ap</span></a><span class='Operator'>-&GT;</span><a href="bootstrap.c.html#LN156"><span class='Ref_to_Member'>am_typ</span></a><span class='Operator'>.</span>typlen<span class='Delimiter'>; 
</span>        <a href="bootstrap.c.html#LN71"><span class='Ref_to_Global_Var'>attrtypes</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN666"><span class='Ref_to_Parameter'>attnum</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attbyval <span class='Operator'>= </span><a href="bootstrap.c.html#LN160"><span class='Ref_to_Global_Var'>Ap</span></a><span class='Operator'>-&GT;</span><a href="bootstrap.c.html#LN156"><span class='Ref_to_Member'>am_typ</span></a><span class='Operator'>.</span>typbyval<span class='Delimiter'>; 
</span>        <a href="bootstrap.c.html#LN71"><span class='Ref_to_Global_Var'>attrtypes</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN666"><span class='Ref_to_Parameter'>attnum</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attstorage <span class='Operator'>= </span><a href="bootstrap.c.html#LN160"><span class='Ref_to_Global_Var'>Ap</span></a><span class='Operator'>-&GT;</span><a href="bootstrap.c.html#LN156"><span class='Ref_to_Member'>am_typ</span></a><span class='Operator'>.</span>typstorage<span class='Delimiter'>; 
</span>        <a href="bootstrap.c.html#LN71"><span class='Ref_to_Global_Var'>attrtypes</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN666"><span class='Ref_to_Parameter'>attnum</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attalign <span class='Operator'>= </span><a href="bootstrap.c.html#LN160"><span class='Ref_to_Global_Var'>Ap</span></a><span class='Operator'>-&GT;</span><a href="bootstrap.c.html#LN156"><span class='Ref_to_Member'>am_typ</span></a><span class='Operator'>.</span>typalign<span class='Delimiter'>; 
</span>        <a href="bootstrap.c.html#LN71"><span class='Ref_to_Global_Var'>attrtypes</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN666"><span class='Ref_to_Parameter'>attnum</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attcollation <span class='Operator'>= </span><a href="bootstrap.c.html#LN160"><span class='Ref_to_Global_Var'>Ap</span></a><span class='Operator'>-&GT;</span><a href="bootstrap.c.html#LN156"><span class='Ref_to_Member'>am_typ</span></a><span class='Operator'>.</span>typcollation<span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* if an array type, assume 1-dimensional attribute */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="bootstrap.c.html#LN160"><span class='Ref_to_Global_Var'>Ap</span></a><span class='Operator'>-&GT;</span><a href="bootstrap.c.html#LN156"><span class='Ref_to_Member'>am_typ</span></a><span class='Operator'>.</span>typelem <span class='Operator'>!= </span><a href="../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a> <span class='Operator'>&& </span><a href="bootstrap.c.html#LN160"><span class='Ref_to_Global_Var'>Ap</span></a><span class='Operator'>-&GT;</span><a href="bootstrap.c.html#LN156"><span class='Ref_to_Member'>am_typ</span></a><span class='Operator'>.</span>typlen <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <a href="bootstrap.c.html#LN71"><span class='Ref_to_Global_Var'>attrtypes</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN666"><span class='Ref_to_Parameter'>attnum</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attndims <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="bootstrap.c.html#LN71"><span class='Ref_to_Global_Var'>attrtypes</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN666"><span class='Ref_to_Parameter'>attnum</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attndims <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="bootstrap.c.html#LN71"><span class='Ref_to_Global_Var'>attrtypes</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN666"><span class='Ref_to_Parameter'>attnum</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>atttypid <span class='Operator'>= </span><a href="bootstrap.c.html#LN98"><span class='Ref_to_Global_Var'>TypInfo</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN668"><span class='Ref_To_Local'>typeoid</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="bootstrap.c.html#LN87"><span class='Ref_to_Member'>oid</span></a><span class='Delimiter'>; 
</span>        <a href="bootstrap.c.html#LN71"><span class='Ref_to_Global_Var'>attrtypes</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN666"><span class='Ref_to_Parameter'>attnum</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attlen <span class='Operator'>= </span><a href="bootstrap.c.html#LN98"><span class='Ref_to_Global_Var'>TypInfo</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN668"><span class='Ref_To_Local'>typeoid</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="bootstrap.c.html#LN89"><span class='Ref_to_Member'>len</span></a><span class='Delimiter'>; 
</span>        <a href="bootstrap.c.html#LN71"><span class='Ref_to_Global_Var'>attrtypes</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN666"><span class='Ref_to_Parameter'>attnum</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attbyval <span class='Operator'>= </span><a href="bootstrap.c.html#LN98"><span class='Ref_to_Global_Var'>TypInfo</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN668"><span class='Ref_To_Local'>typeoid</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="bootstrap.c.html#LN90"><span class='Ref_to_Member'>byval</span></a><span class='Delimiter'>; 
</span>        <a href="bootstrap.c.html#LN71"><span class='Ref_to_Global_Var'>attrtypes</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN666"><span class='Ref_to_Parameter'>attnum</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attstorage <span class='Operator'>= </span><a href="bootstrap.c.html#LN98"><span class='Ref_to_Global_Var'>TypInfo</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN668"><span class='Ref_To_Local'>typeoid</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="bootstrap.c.html#LN92"><span class='Ref_to_Member'>storage</span></a><span class='Delimiter'>; 
</span>        <a href="bootstrap.c.html#LN71"><span class='Ref_to_Global_Var'>attrtypes</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN666"><span class='Ref_to_Parameter'>attnum</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attalign <span class='Operator'>= </span><a href="bootstrap.c.html#LN98"><span class='Ref_to_Global_Var'>TypInfo</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN668"><span class='Ref_To_Local'>typeoid</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="bootstrap.c.html#LN91"><span class='Ref_to_Member'>align</span></a><span class='Delimiter'>; 
</span>        <a href="bootstrap.c.html#LN71"><span class='Ref_to_Global_Var'>attrtypes</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN666"><span class='Ref_to_Parameter'>attnum</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attcollation <span class='Operator'>= </span><a href="bootstrap.c.html#LN98"><span class='Ref_to_Global_Var'>TypInfo</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN668"><span class='Ref_To_Local'>typeoid</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="bootstrap.c.html#LN93"><span class='Ref_to_Member'>collation</span></a><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* if an array type, assume 1-dimensional attribute */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="bootstrap.c.html#LN98"><span class='Ref_to_Global_Var'>TypInfo</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN668"><span class='Ref_To_Local'>typeoid</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="bootstrap.c.html#LN88"><span class='Ref_to_Member'>elem</span></a> <span class='Operator'>!= </span><a href="../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a> <span class='Operator'>&& 
</span>            <a href="bootstrap.c.html#LN71"><span class='Ref_to_Global_Var'>attrtypes</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN666"><span class='Ref_to_Parameter'>attnum</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attlen <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <a href="bootstrap.c.html#LN71"><span class='Ref_to_Global_Var'>attrtypes</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN666"><span class='Ref_to_Parameter'>attnum</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attndims <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="bootstrap.c.html#LN71"><span class='Ref_to_Global_Var'>attrtypes</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN666"><span class='Ref_to_Parameter'>attnum</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attndims <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="bootstrap.c.html#LN71"><span class='Ref_to_Global_Var'>attrtypes</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN666"><span class='Ref_to_Parameter'>attnum</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attstattarget <span class='Operator'>= -</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <a href="bootstrap.c.html#LN71"><span class='Ref_to_Global_Var'>attrtypes</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN666"><span class='Ref_to_Parameter'>attnum</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attcacheoff <span class='Operator'>= -</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <a href="bootstrap.c.html#LN71"><span class='Ref_to_Global_Var'>attrtypes</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN666"><span class='Ref_to_Parameter'>attnum</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>atttypmod <span class='Operator'>= -</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <a href="bootstrap.c.html#LN71"><span class='Ref_to_Global_Var'>attrtypes</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN666"><span class='Ref_to_Parameter'>attnum</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attislocal <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="bootstrap.c.html#LN666"><span class='Ref_to_Parameter'>nullness</span></a> <span class='Operator'>== </span><a href="../../include/bootstrap/bootstrap.h.html#LN27"><span class='Ref_to_Const'>BOOTCOL_NULL_FORCE_NOT_NULL</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="bootstrap.c.html#LN71"><span class='Ref_to_Global_Var'>attrtypes</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN666"><span class='Ref_to_Parameter'>attnum</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attnotnull <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="bootstrap.c.html#LN666"><span class='Ref_to_Parameter'>nullness</span></a> <span class='Operator'>== </span><a href="../../include/bootstrap/bootstrap.h.html#LN26"><span class='Ref_to_Const'>BOOTCOL_NULL_FORCE_NULL</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="bootstrap.c.html#LN71"><span class='Ref_to_Global_Var'>attrtypes</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN666"><span class='Ref_to_Parameter'>attnum</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attnotnull <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN666"><span class='Ref_to_Parameter'>nullness</span></a> <span class='Operator'>== </span><a href="../../include/bootstrap/bootstrap.h.html#LN25"><span class='Ref_to_Const'>BOOTCOL_NULL_AUTO</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Mark as "not null" if type is fixed-width and prior columns are 
         * too.  This corresponds to case where column can be accessed 
         * directly via C struct declaration. 
         * 
         * oidvector and int2vector are also treated as not-nullable, even 
         * though they are no longer fixed-width. 
         */ 
</span><a name="LN741"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>MARKNOTNULL</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>att</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>        <span class='Parentheses'>((</span>att<span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>attlen <span class='Operator'>&GT; </span><span class='Number'>0</span> <span class='Operator'>|| \ 
</span>         <span class='Parentheses'>(</span>att<span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>atttypid <span class='Operator'>== </span><a href="../../interfaces/ecpg/ecpglib/pg_type.h.html#LN31"><span class='Ref_to_Const'>OIDVECTOROID</span></a> <span class='Operator'>|| \ 
</span>         <span class='Parentheses'>(</span>att<span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>atttypid <span class='Operator'>== </span><a href="../../interfaces/ecpg/ecpglib/pg_type.h.html#LN23"><span class='Ref_to_Const'>INT2VECTOROID</span></a><span class='Parentheses'>)</span> 
 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="bootstrap.c.html#LN741"><span class='Ref_to_Macro'>MARKNOTNULL</span></a><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN71"><span class='Ref_to_Global_Var'>attrtypes</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN666"><span class='Ref_to_Parameter'>attnum</span></a><span class='Delimiter'>]</span><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span><a name="LN748"></a>            <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* check earlier attributes */ 
</span>            <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="bootstrap.c.html#LN748"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="bootstrap.c.html#LN748"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="bootstrap.c.html#LN666"><span class='Ref_to_Parameter'>attnum</span></a><span class='Delimiter'>; </span><a href="bootstrap.c.html#LN748"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="bootstrap.c.html#LN71"><span class='Ref_to_Global_Var'>attrtypes</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN748"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attnotnull<span class='Parentheses'>) 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="bootstrap.c.html#LN748"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>== </span><a href="bootstrap.c.html#LN666"><span class='Ref_to_Parameter'>attnum</span></a><span class='Parentheses'>) 
</span>                <a href="bootstrap.c.html#LN71"><span class='Ref_to_Global_Var'>attrtypes</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN666"><span class='Ref_to_Parameter'>attnum</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attnotnull <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
<span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end DefineAttr &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* ---------------- 
 *      InsertOneTuple 
 * 
 * If objectid is not zero, it is a specific OID to assign to the tuple. 
 * Otherwise, an OID will be assigned (if necessary) by heap_insert. 
 * ---------------- 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN771"></a><span class='Declare_Function'>InsertOneTuple</span><span class='Parentheses'>(</span><a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>objectid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN773"></a>    <a href="../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tuple</span><span class='Delimiter'>; 
</span><a name="LN774"></a>    <a href="../../include/access/tupdesc.h.html#LN70"><span class='Ref_to_Typedef'>TupleDesc</span></a>   <span class='Declare_Local'>tupDesc</span><span class='Delimiter'>; 
</span><a name="LN775"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <a href="bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN21"><span class='Ref_to_Const'>DEBUG4</span></a><span class='Delimiter'>, </span><span class='String'>"inserting row oid %u, %d columns"</span><span class='Delimiter'>, </span><a href="bootstrap.c.html#LN771"><span class='Ref_to_Parameter'>objectid</span></a><span class='Delimiter'>, </span><a href="bootstrap.c.html#LN72"><span class='Ref_to_Global_Var'>numattr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="bootstrap.c.html#LN774"><span class='Ref_To_Local'>tupDesc</span></a> <span class='Operator'>= </span><a href="../../include/access/tupdesc.h.html#LN85"><span class='Ref_to_Proto'>CreateTupleDesc</span></a><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN72"><span class='Ref_to_Global_Var'>numattr</span></a><span class='Delimiter'>, 
</span>                              <a href="../../include/utils/rel.h.html#LN410"><span class='Ref_to_Macro'>RelationGetForm</span></a><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN69"><span class='Ref_to_Global_Var'>boot_reldesc</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>relhasoids<span class='Delimiter'>, 
</span>                              <a href="bootstrap.c.html#LN71"><span class='Ref_to_Global_Var'>attrtypes</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="bootstrap.c.html#LN773"><span class='Ref_To_Local'>tuple</span></a> <span class='Operator'>= </span><a href="../access/common/heaptuple.c.html#LN690"><span class='Ref_to_Func'>heap_form_tuple</span></a><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN774"><span class='Ref_To_Local'>tupDesc</span></a><span class='Delimiter'>, </span><a href="bootstrap.c.html#LN162"><span class='Ref_to_Global_Var'>values</span></a><span class='Delimiter'>, </span><a href="bootstrap.c.html#LN163"><span class='Ref_to_Global_Var'>Nulls</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="bootstrap.c.html#LN771"><span class='Ref_to_Parameter'>objectid</span></a> <span class='Operator'>!= </span><span class='Parentheses'>(</span><a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a><span class='Parentheses'>) </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <a href="../../include/access/htup_details.h.html#LN697"><span class='Ref_to_Macro'>HeapTupleSetOid</span></a><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN773"><span class='Ref_To_Local'>tuple</span></a><span class='Delimiter'>, </span><a href="bootstrap.c.html#LN771"><span class='Ref_to_Parameter'>objectid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN774"><span class='Ref_To_Local'>tupDesc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>;</span>             <span class='Comment_Single_Line'>/* just free's tupDesc, not the attrtypes */ 
</span> 
    <a href="../../include/access/heapam.h.html#LN175"><span class='Ref_to_Proto'>simple_heap_insert</span></a><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN69"><span class='Ref_to_Global_Var'>boot_reldesc</span></a><span class='Delimiter'>, </span><a href="bootstrap.c.html#LN773"><span class='Ref_To_Local'>tuple</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../include/access/htup_details.h.html#LN815"><span class='Ref_to_Proto'>heap_freetuple</span></a><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN773"><span class='Ref_To_Local'>tuple</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN21"><span class='Ref_to_Const'>DEBUG4</span></a><span class='Delimiter'>, </span><span class='String'>"row inserted"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Reset null markers for next tuple 
     */ 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="bootstrap.c.html#LN775"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="bootstrap.c.html#LN775"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="bootstrap.c.html#LN72"><span class='Ref_to_Global_Var'>numattr</span></a><span class='Delimiter'>; </span><a href="bootstrap.c.html#LN775"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <a href="bootstrap.c.html#LN163"><span class='Ref_to_Global_Var'>Nulls</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN775"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end InsertOneTuple &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* ---------------- 
 *      InsertOneValue 
 * ---------------- 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN803"></a><span class='Declare_Function'>InsertOneValue</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>value</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>i</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN805"></a>    <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>typoid</span><span class='Delimiter'>; 
</span><a name="LN806"></a>    <a href="../../include/c.h.html#LN254"><span class='Ref_to_Typedef'>int16</span></a>       <span class='Declare_Local'>typlen</span><span class='Delimiter'>; 
</span><a name="LN807"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>typbyval</span><span class='Delimiter'>; 
</span><a name="LN808"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>typalign</span><span class='Delimiter'>; 
</span><a name="LN809"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>typdelim</span><span class='Delimiter'>; 
</span><a name="LN810"></a>    <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>typioparam</span><span class='Delimiter'>; 
</span><a name="LN811"></a>    <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>typinput</span><span class='Delimiter'>; 
</span><a name="LN812"></a>    <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>typoutput</span><span class='Delimiter'>; 
</span> 
    <a href="../../include/c.h.html#LN676"><span class='Ref_to_Macro'>AssertArg</span></a><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN803"><span class='Ref_to_Parameter'>i</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="bootstrap.c.html#LN803"><span class='Ref_to_Parameter'>i</span></a> <span class='Operator'>&LT; </span><a href="../../include/bootstrap/bootstrap.h.html#LN23"><span class='Ref_to_Const'>MAXATTR</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN21"><span class='Ref_to_Const'>DEBUG4</span></a><span class='Delimiter'>, </span><span class='String'>"inserting column %d value \"%s\""</span><span class='Delimiter'>, </span><a href="bootstrap.c.html#LN803"><span class='Ref_to_Parameter'>i</span></a><span class='Delimiter'>, </span><span class='Keyword'>value</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="bootstrap.c.html#LN805"><span class='Ref_To_Local'>typoid</span></a> <span class='Operator'>= </span><a href="bootstrap.c.html#LN69"><span class='Ref_to_Global_Var'>boot_reldesc</span></a><span class='Operator'>-&GT;</span><a href="../../include/utils/rel.h.html#LN114"><span class='Ref_to_Member'>rd_att</span></a><span class='Operator'>-&GT;</span><a href="../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN803"><span class='Ref_to_Parameter'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>atttypid<span class='Delimiter'>; 
</span> 
    <a href="../../include/bootstrap/bootstrap.h.html#LN51"><span class='Ref_to_Proto'>boot_get_type_io_data</span></a><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN805"><span class='Ref_To_Local'>typoid</span></a><span class='Delimiter'>, 
</span>                          <span class='Operator'>&</span><a href="bootstrap.c.html#LN806"><span class='Ref_To_Local'>typlen</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="bootstrap.c.html#LN807"><span class='Ref_To_Local'>typbyval</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="bootstrap.c.html#LN808"><span class='Ref_To_Local'>typalign</span></a><span class='Delimiter'>, 
</span>                          <span class='Operator'>&</span><a href="bootstrap.c.html#LN809"><span class='Ref_To_Local'>typdelim</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="bootstrap.c.html#LN810"><span class='Ref_To_Local'>typioparam</span></a><span class='Delimiter'>, 
</span>                          <span class='Operator'>&</span><a href="bootstrap.c.html#LN811"><span class='Ref_To_Local'>typinput</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="bootstrap.c.html#LN812"><span class='Ref_To_Local'>typoutput</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="bootstrap.c.html#LN162"><span class='Ref_to_Global_Var'>values</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN803"><span class='Ref_to_Parameter'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="../../include/fmgr.h.html#LN644"><span class='Ref_to_Proto'>OidInputFunctionCall</span></a><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN811"><span class='Ref_To_Local'>typinput</span></a><span class='Delimiter'>, </span><span class='Keyword'>value</span><span class='Delimiter'>, </span><a href="bootstrap.c.html#LN810"><span class='Ref_To_Local'>typioparam</span></a><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * We use ereport not elog here so that parameters aren't evaluated unless 
     * the message is going to be printed, which generally it isn't 
     */ 
</span>    <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN21"><span class='Ref_to_Const'>DEBUG4</span></a><span class='Delimiter'>, 
</span>            <span class='Parentheses'>(</span><a href="../utils/error/elog.c.html#LN825"><span class='Ref_to_Func'>errmsg_internal</span></a><span class='Parentheses'>(</span><span class='String'>"inserted -&GT; %s"</span><span class='Delimiter'>, 
</span>                             <a href="../../include/fmgr.h.html#LN647"><span class='Ref_to_Proto'>OidOutputFunctionCall</span></a><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN812"><span class='Ref_To_Local'>typoutput</span></a><span class='Delimiter'>, </span><a href="bootstrap.c.html#LN162"><span class='Ref_to_Global_Var'>values</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN803"><span class='Ref_to_Parameter'>i</span></a><span class='Delimiter'>]</span><span class='Parentheses'>))))</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end InsertOneValue &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* ---------------- 
 *      InsertOneNull 
 * ---------------- 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN841"></a><span class='Declare_Function'>InsertOneNull</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>i</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <a href="bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN21"><span class='Ref_to_Const'>DEBUG4</span></a><span class='Delimiter'>, </span><span class='String'>"inserting column %d NULL"</span><span class='Delimiter'>, </span><a href="bootstrap.c.html#LN841"><span class='Ref_to_Parameter'>i</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN841"><span class='Ref_to_Parameter'>i</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="bootstrap.c.html#LN841"><span class='Ref_to_Parameter'>i</span></a> <span class='Operator'>&LT; </span><a href="../../include/bootstrap/bootstrap.h.html#LN23"><span class='Ref_to_Const'>MAXATTR</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="bootstrap.c.html#LN69"><span class='Ref_to_Global_Var'>boot_reldesc</span></a><span class='Operator'>-&GT;</span><a href="../../include/utils/rel.h.html#LN114"><span class='Ref_to_Member'>rd_att</span></a><span class='Operator'>-&GT;</span><a href="../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN841"><span class='Ref_to_Parameter'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attnotnull<span class='Parentheses'>) 
</span>        <a href="bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>        <span class='String'>"NULL value specified for not-null column \"%s\" of relation \"%s\""</span><span class='Delimiter'>, 
</span>             <a href="../../include/c.h.html#LN498"><span class='Ref_to_Macro'>NameStr</span></a><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN69"><span class='Ref_to_Global_Var'>boot_reldesc</span></a><span class='Operator'>-&GT;</span><a href="../../include/utils/rel.h.html#LN114"><span class='Ref_to_Member'>rd_att</span></a><span class='Operator'>-&GT;</span><a href="../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN841"><span class='Ref_to_Parameter'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attname<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>             <a href="../../include/utils/rel.h.html#LN436"><span class='Ref_to_Macro'>RelationGetRelationName</span></a><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN69"><span class='Ref_to_Global_Var'>boot_reldesc</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="bootstrap.c.html#LN162"><span class='Ref_to_Global_Var'>values</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN841"><span class='Ref_to_Parameter'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="../../include/postgres.h.html#LN561"><span class='Ref_to_Macro'>PointerGetDatum</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="bootstrap.c.html#LN163"><span class='Ref_to_Global_Var'>Nulls</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN841"><span class='Ref_to_Parameter'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* ---------------- 
 *      cleanup 
 * ---------------- 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN859"></a><span class='Declare_Function'>cleanup</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="bootstrap.c.html#LN69"><span class='Ref_to_Global_Var'>boot_reldesc</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="../../include/bootstrap/bootstrap.h.html#LN38"><span class='Ref_to_Proto'>closerel</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* ---------------- 
 *      gettype 
 * 
 * NB: this is really ugly; it will return an integer index into TypInfo[], 
 * and not an OID at all, until the first reference to a type not known in 
 * TypInfo[].  At that point it will read and cache pg_type in the Typ array, 
 * and subsequently return a real OID (and set the global pointer Ap to 
 * point at the found row in Typ).  So caller must check whether Typ is 
 * still NULL to determine what the return value is! 
 * ---------------- 
 */ 
</span><span class='Keyword'>static </span><a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> 
<a name="LN877"></a><span class='Declare_Function'>gettype</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>type</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN879"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN880"></a>    <a href="../../include/utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a>    <span class='Declare_Local'>rel</span><span class='Delimiter'>; 
</span><a name="LN881"></a>    <a href="../../include/access/heapam.h.html#LN99"><span class='Ref_to_Typedef'>HeapScanDesc</span></a> <span class='Declare_Local'>scan</span><span class='Delimiter'>; 
</span><a name="LN882"></a>    <a href="../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tup</span><span class='Delimiter'>; 
</span><a name="LN883"></a>    <span class='Control'>struct</span> <a href="bootstrap.c.html#LN153"><span class='Ref_to_Struct'>typmap</span></a> <span class='Operator'>**</span><span class='Declare_Local'>app</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="bootstrap.c.html#LN159"><span class='Ref_to_Global_Var'>Typ</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="bootstrap.c.html#LN883"><span class='Ref_To_Local'>app</span></a> <span class='Operator'>= </span><a href="bootstrap.c.html#LN159"><span class='Ref_to_Global_Var'>Typ</span></a><span class='Delimiter'>; </span><span class='Operator'>*</span><a href="bootstrap.c.html#LN883"><span class='Ref_To_Local'>app</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; </span><a href="bootstrap.c.html#LN883"><span class='Ref_To_Local'>app</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span>strncmp<span class='Parentheses'>(</span><a href="../../include/c.h.html#LN498"><span class='Ref_to_Macro'>NameStr</span></a><span class='Parentheses'>((</span><span class='Operator'>*</span><a href="bootstrap.c.html#LN883"><span class='Ref_To_Local'>app</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>am_typ<span class='Operator'>.</span>typname<span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="bootstrap.c.html#LN877"><span class='Ref_to_Parameter'>type</span></a><span class='Delimiter'>, </span><a href="../../interfaces/ecpg/include/sqlda-native.h.html#LN15"><span class='Ref_to_Const'>NAMEDATALEN</span></a><span class='Parentheses'>)</span> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <span class='Delimiter'>{ 
</span>                <a href="bootstrap.c.html#LN160"><span class='Ref_to_Global_Var'>Ap</span></a> <span class='Operator'>= *</span><a href="bootstrap.c.html#LN883"><span class='Ref_To_Local'>app</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>return</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="bootstrap.c.html#LN883"><span class='Ref_To_Local'>app</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>am_oid<span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="bootstrap.c.html#LN879"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="bootstrap.c.html#LN879"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="bootstrap.c.html#LN151"><span class='Ref_to_Global_Var'>n_types</span></a><span class='Delimiter'>; </span><a href="bootstrap.c.html#LN879"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span>strncmp<span class='Parentheses'>(</span><a href="bootstrap.c.html#LN877"><span class='Ref_to_Parameter'>type</span></a><span class='Delimiter'>, </span><a href="bootstrap.c.html#LN98"><span class='Ref_to_Global_Var'>TypInfo</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN879"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="bootstrap.c.html#LN86"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><a href="../../interfaces/ecpg/include/sqlda-native.h.html#LN15"><span class='Ref_to_Const'>NAMEDATALEN</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                <span class='Control'>return</span> <a href="bootstrap.c.html#LN879"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <a href="bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN21"><span class='Ref_to_Const'>DEBUG4</span></a><span class='Delimiter'>, </span><span class='String'>"external type: %s"</span><span class='Delimiter'>, </span><a href="bootstrap.c.html#LN877"><span class='Ref_to_Parameter'>type</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="bootstrap.c.html#LN880"><span class='Ref_To_Local'>rel</span></a> <span class='Operator'>= </span><a href="../../include/access/heapam.h.html#LN91"><span class='Ref_to_Proto'>heap_open</span></a><span class='Parentheses'>(</span><a href="../../include/catalog/pg_type.h.html#LN33"><span class='Ref_to_Const'>TypeRelationId</span></a><span class='Delimiter'>, </span><a href="../../include/storage/lockdefs.h.html#LN33"><span class='Ref_to_Const'>NoLock</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="bootstrap.c.html#LN881"><span class='Ref_To_Local'>scan</span></a> <span class='Operator'>= </span><a href="../../include/access/heapam.h.html#LN110"><span class='Ref_to_Proto'>heap_beginscan_catalog</span></a><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN880"><span class='Ref_To_Local'>rel</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="bootstrap.c.html#LN879"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <span class='Control'>while</span> <span class='Parentheses'>((</span><a href="bootstrap.c.html#LN882"><span class='Ref_To_Local'>tup</span></a> <span class='Operator'>= </span><a href="../../include/access/heapam.h.html#LN127"><span class='Ref_to_Proto'>heap_getnext</span></a><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN881"><span class='Ref_To_Local'>scan</span></a><span class='Delimiter'>, </span><a href="../../include/access/sdir.h.html#LN25"><span class='Ref_to_EnumConst'>ForwardScanDirection</span></a><span class='Parentheses'>))</span> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
            <span class='Operator'>++</span><a href="bootstrap.c.html#LN879"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>; 
</span>        <a href="../../include/access/heapam.h.html#LN126"><span class='Ref_to_Proto'>heap_endscan</span></a><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN881"><span class='Ref_To_Local'>scan</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="bootstrap.c.html#LN883"><span class='Ref_To_Local'>app</span></a> <span class='Operator'>= </span><a href="bootstrap.c.html#LN159"><span class='Ref_to_Global_Var'>Typ</span></a> <span class='Operator'>= </span><a href="../../common/unicode_norm.c.html#LN24"><span class='Ref_to_Macro'>ALLOC</span></a><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="bootstrap.c.html#LN153"><span class='Ref_to_Struct'>typmap</span></a> <span class='Operator'>*</span><span class='Delimiter'>, </span><a href="bootstrap.c.html#LN879"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="bootstrap.c.html#LN879"><span class='Ref_To_Local'>i</span></a><span class='Operator'>-- &GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <span class='Operator'>*</span><a href="bootstrap.c.html#LN883"><span class='Ref_To_Local'>app</span></a><span class='Operator'>++ = </span><a href="../../common/unicode_norm.c.html#LN24"><span class='Ref_to_Macro'>ALLOC</span></a><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="bootstrap.c.html#LN153"><span class='Ref_to_Struct'>typmap</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Operator'>*</span><a href="bootstrap.c.html#LN883"><span class='Ref_To_Local'>app</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>        <a href="bootstrap.c.html#LN881"><span class='Ref_To_Local'>scan</span></a> <span class='Operator'>= </span><a href="../../include/access/heapam.h.html#LN110"><span class='Ref_to_Proto'>heap_beginscan_catalog</span></a><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN880"><span class='Ref_To_Local'>rel</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="bootstrap.c.html#LN883"><span class='Ref_To_Local'>app</span></a> <span class='Operator'>= </span><a href="bootstrap.c.html#LN159"><span class='Ref_to_Global_Var'>Typ</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>while</span> <span class='Parentheses'>((</span><a href="bootstrap.c.html#LN882"><span class='Ref_To_Local'>tup</span></a> <span class='Operator'>= </span><a href="../../include/access/heapam.h.html#LN127"><span class='Ref_to_Proto'>heap_getnext</span></a><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN881"><span class='Ref_To_Local'>scan</span></a><span class='Delimiter'>, </span><a href="../../include/access/sdir.h.html#LN25"><span class='Ref_to_EnumConst'>ForwardScanDirection</span></a><span class='Parentheses'>))</span> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="bootstrap.c.html#LN883"><span class='Ref_To_Local'>app</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>am_oid <span class='Operator'>= </span><a href="../../include/access/htup_details.h.html#LN694"><span class='Ref_to_Macro'>HeapTupleGetOid</span></a><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN882"><span class='Ref_To_Local'>tup</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../include/c.h.html#LN1057"><span class='Ref_to_Macro'>memmove</span></a><span class='Parentheses'>((</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>)</span> <span class='Operator'>&</span><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="bootstrap.c.html#LN883"><span class='Ref_To_Local'>app</span></a><span class='Operator'>++</span><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>am_typ<span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>)</span> <a href="../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN882"><span class='Ref_To_Local'>tup</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                    <span class='Keyword'>sizeof</span><span class='Parentheses'>((</span><span class='Operator'>*</span><a href="bootstrap.c.html#LN883"><span class='Ref_To_Local'>app</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>am_typ<span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <a href="../../include/access/heapam.h.html#LN126"><span class='Ref_to_Proto'>heap_endscan</span></a><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN881"><span class='Ref_To_Local'>scan</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../include/access/heapam.h.html#LN96"><span class='Ref_to_Macro'>heap_close</span></a><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN880"><span class='Ref_To_Local'>rel</span></a><span class='Delimiter'>, </span><a href="../../include/storage/lockdefs.h.html#LN33"><span class='Ref_to_Const'>NoLock</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <a href="bootstrap.c.html#LN59"><span class='Ref_to_Proto'>gettype</span></a><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN877"><span class='Ref_to_Parameter'>type</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
    <a href="bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"unrecognized type \"%s\""</span><span class='Delimiter'>, </span><a href="bootstrap.c.html#LN877"><span class='Ref_to_Parameter'>type</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* not reached, here to make compiler happy */ 
</span>    <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end gettype &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* ---------------- 
 *      boot_get_type_io_data 
 * 
 * Obtain type I/O information at bootstrap time.  This intentionally has 
 * almost the same API as lsyscache.c's get_type_io_data, except that 
 * we only support obtaining the typinput and typoutput routines, not 
 * the binary I/O routines.  It is exported so that array_in and array_out 
 * can be made to work during early bootstrap. 
 * ---------------- 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN943"></a><span class='Declare_Function'>boot_get_type_io_data</span><span class='Parentheses'>(</span><a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>typid</span><span class='Delimiter'>, 
</span><a name="LN944"></a>                      <a href="../../include/c.h.html#LN254"><span class='Ref_to_Typedef'>int16</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>typlen</span><span class='Delimiter'>, 
</span><a name="LN945"></a>                      <span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Declare_Parameter'>typbyval</span><span class='Delimiter'>, 
</span><a name="LN946"></a>                      <span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>typalign</span><span class='Delimiter'>, 
</span><a name="LN947"></a>                      <span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>typdelim</span><span class='Delimiter'>, 
</span><a name="LN948"></a>                      <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>typioparam</span><span class='Delimiter'>, 
</span><a name="LN949"></a>                      <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>typinput</span><span class='Delimiter'>, 
</span><a name="LN950"></a>                      <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>typoutput</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="bootstrap.c.html#LN159"><span class='Ref_to_Global_Var'>Typ</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* We have the boot-time contents of pg_type, so use it */ 
</span><a name="LN955"></a>        <span class='Control'>struct</span> <a href="bootstrap.c.html#LN153"><span class='Ref_to_Struct'>typmap</span></a> <span class='Operator'>**</span><span class='Declare_Local'>app</span><span class='Delimiter'>; 
</span><a name="LN956"></a>        <span class='Control'>struct</span> <a href="bootstrap.c.html#LN153"><span class='Ref_to_Struct'>typmap</span></a> <span class='Operator'>*</span><span class='Declare_Local'>ap</span><span class='Delimiter'>; 
</span> 
        <a href="bootstrap.c.html#LN955"><span class='Ref_To_Local'>app</span></a> <span class='Operator'>= </span><a href="bootstrap.c.html#LN159"><span class='Ref_to_Global_Var'>Typ</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>while</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="bootstrap.c.html#LN955"><span class='Ref_To_Local'>app</span></a> <span class='Operator'>&& </span><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="bootstrap.c.html#LN955"><span class='Ref_To_Local'>app</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>am_oid <span class='Operator'>!= </span><a href="bootstrap.c.html#LN943"><span class='Ref_to_Parameter'>typid</span></a><span class='Parentheses'>)</span> 
            <span class='Operator'>++</span><a href="bootstrap.c.html#LN955"><span class='Ref_To_Local'>app</span></a><span class='Delimiter'>; 
</span>        <a href="bootstrap.c.html#LN956"><span class='Ref_To_Local'>ap</span></a> <span class='Operator'>= *</span><a href="bootstrap.c.html#LN955"><span class='Ref_To_Local'>app</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="bootstrap.c.html#LN956"><span class='Ref_To_Local'>ap</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <a href="bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"type OID %u not found in Typ list"</span><span class='Delimiter'>, </span><a href="bootstrap.c.html#LN943"><span class='Ref_to_Parameter'>typid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Operator'>*</span><a href="bootstrap.c.html#LN944"><span class='Ref_to_Parameter'>typlen</span></a> <span class='Operator'>= </span><a href="bootstrap.c.html#LN956"><span class='Ref_To_Local'>ap</span></a><span class='Operator'>-&GT;</span><a href="bootstrap.c.html#LN156"><span class='Ref_to_Member'>am_typ</span></a><span class='Operator'>.</span>typlen<span class='Delimiter'>; 
</span>        <span class='Operator'>*</span><a href="bootstrap.c.html#LN945"><span class='Ref_to_Parameter'>typbyval</span></a> <span class='Operator'>= </span><a href="bootstrap.c.html#LN956"><span class='Ref_To_Local'>ap</span></a><span class='Operator'>-&GT;</span><a href="bootstrap.c.html#LN156"><span class='Ref_to_Member'>am_typ</span></a><span class='Operator'>.</span>typbyval<span class='Delimiter'>; 
</span>        <span class='Operator'>*</span><a href="bootstrap.c.html#LN946"><span class='Ref_to_Parameter'>typalign</span></a> <span class='Operator'>= </span><a href="bootstrap.c.html#LN956"><span class='Ref_To_Local'>ap</span></a><span class='Operator'>-&GT;</span><a href="bootstrap.c.html#LN156"><span class='Ref_to_Member'>am_typ</span></a><span class='Operator'>.</span>typalign<span class='Delimiter'>; 
</span>        <span class='Operator'>*</span><a href="bootstrap.c.html#LN947"><span class='Ref_to_Parameter'>typdelim</span></a> <span class='Operator'>= </span><a href="bootstrap.c.html#LN956"><span class='Ref_To_Local'>ap</span></a><span class='Operator'>-&GT;</span><a href="bootstrap.c.html#LN156"><span class='Ref_to_Member'>am_typ</span></a><span class='Operator'>.</span>typdelim<span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* XXX this logic must match getTypeIOParam() */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN956"><span class='Ref_To_Local'>ap</span></a><span class='Operator'>-&GT;</span><a href="bootstrap.c.html#LN156"><span class='Ref_to_Member'>am_typ</span></a><span class='Operator'>.</span>typelem<span class='Parentheses'>))</span> 
            <span class='Operator'>*</span><a href="bootstrap.c.html#LN948"><span class='Ref_to_Parameter'>typioparam</span></a> <span class='Operator'>= </span><a href="bootstrap.c.html#LN956"><span class='Ref_To_Local'>ap</span></a><span class='Operator'>-&GT;</span><a href="bootstrap.c.html#LN156"><span class='Ref_to_Member'>am_typ</span></a><span class='Operator'>.</span>typelem<span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <span class='Operator'>*</span><a href="bootstrap.c.html#LN948"><span class='Ref_to_Parameter'>typioparam</span></a> <span class='Operator'>= </span><a href="bootstrap.c.html#LN943"><span class='Ref_to_Parameter'>typid</span></a><span class='Delimiter'>; 
</span> 
        <span class='Operator'>*</span><a href="bootstrap.c.html#LN949"><span class='Ref_to_Parameter'>typinput</span></a> <span class='Operator'>= </span><a href="bootstrap.c.html#LN956"><span class='Ref_To_Local'>ap</span></a><span class='Operator'>-&GT;</span><a href="bootstrap.c.html#LN156"><span class='Ref_to_Member'>am_typ</span></a><span class='Operator'>.</span>typinput<span class='Delimiter'>; 
</span>        <span class='Operator'>*</span><a href="bootstrap.c.html#LN950"><span class='Ref_to_Parameter'>typoutput</span></a> <span class='Operator'>= </span><a href="bootstrap.c.html#LN956"><span class='Ref_To_Local'>ap</span></a><span class='Operator'>-&GT;</span><a href="bootstrap.c.html#LN156"><span class='Ref_to_Member'>am_typ</span></a><span class='Operator'>.</span>typoutput<span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if Typ!=NULL &raquo; </span> 
    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* We don't have pg_type yet, so use the hard-wired TypInfo array */ 
</span><a name="LN982"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>typeindex</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="bootstrap.c.html#LN982"><span class='Ref_To_Local'>typeindex</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="bootstrap.c.html#LN982"><span class='Ref_To_Local'>typeindex</span></a> <span class='Operator'>&LT; </span><a href="bootstrap.c.html#LN151"><span class='Ref_to_Global_Var'>n_types</span></a><span class='Delimiter'>; </span><a href="bootstrap.c.html#LN982"><span class='Ref_To_Local'>typeindex</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="bootstrap.c.html#LN98"><span class='Ref_to_Global_Var'>TypInfo</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN982"><span class='Ref_To_Local'>typeindex</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="bootstrap.c.html#LN87"><span class='Ref_to_Member'>oid</span></a> <span class='Operator'>== </span><a href="bootstrap.c.html#LN943"><span class='Ref_to_Parameter'>typid</span></a><span class='Parentheses'>) 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="bootstrap.c.html#LN982"><span class='Ref_To_Local'>typeindex</span></a> <span class='Operator'>&GT;= </span><a href="bootstrap.c.html#LN151"><span class='Ref_to_Global_Var'>n_types</span></a><span class='Parentheses'>) 
</span>            <a href="bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"type OID %u not found in TypInfo"</span><span class='Delimiter'>, </span><a href="bootstrap.c.html#LN943"><span class='Ref_to_Parameter'>typid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Operator'>*</span><a href="bootstrap.c.html#LN944"><span class='Ref_to_Parameter'>typlen</span></a> <span class='Operator'>= </span><a href="bootstrap.c.html#LN98"><span class='Ref_to_Global_Var'>TypInfo</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN982"><span class='Ref_To_Local'>typeindex</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="bootstrap.c.html#LN89"><span class='Ref_to_Member'>len</span></a><span class='Delimiter'>; 
</span>        <span class='Operator'>*</span><a href="bootstrap.c.html#LN945"><span class='Ref_to_Parameter'>typbyval</span></a> <span class='Operator'>= </span><a href="bootstrap.c.html#LN98"><span class='Ref_to_Global_Var'>TypInfo</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN982"><span class='Ref_To_Local'>typeindex</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="bootstrap.c.html#LN90"><span class='Ref_to_Member'>byval</span></a><span class='Delimiter'>; 
</span>        <span class='Operator'>*</span><a href="bootstrap.c.html#LN946"><span class='Ref_to_Parameter'>typalign</span></a> <span class='Operator'>= </span><a href="bootstrap.c.html#LN98"><span class='Ref_to_Global_Var'>TypInfo</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN982"><span class='Ref_To_Local'>typeindex</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="bootstrap.c.html#LN91"><span class='Ref_to_Member'>align</span></a><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* We assume typdelim is ',' for all boot-time types */ 
</span>        <span class='Operator'>*</span><a href="bootstrap.c.html#LN947"><span class='Ref_to_Parameter'>typdelim</span></a> <span class='Operator'>= </span><span class='String'>','</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* XXX this logic must match getTypeIOParam() */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN98"><span class='Ref_to_Global_Var'>TypInfo</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN982"><span class='Ref_To_Local'>typeindex</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="bootstrap.c.html#LN88"><span class='Ref_to_Member'>elem</span></a><span class='Parentheses'>))</span> 
            <span class='Operator'>*</span><a href="bootstrap.c.html#LN948"><span class='Ref_to_Parameter'>typioparam</span></a> <span class='Operator'>= </span><a href="bootstrap.c.html#LN98"><span class='Ref_to_Global_Var'>TypInfo</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN982"><span class='Ref_To_Local'>typeindex</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="bootstrap.c.html#LN88"><span class='Ref_to_Member'>elem</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <span class='Operator'>*</span><a href="bootstrap.c.html#LN948"><span class='Ref_to_Parameter'>typioparam</span></a> <span class='Operator'>= </span><a href="bootstrap.c.html#LN943"><span class='Ref_to_Parameter'>typid</span></a><span class='Delimiter'>; 
</span> 
        <span class='Operator'>*</span><a href="bootstrap.c.html#LN949"><span class='Ref_to_Parameter'>typinput</span></a> <span class='Operator'>= </span><a href="bootstrap.c.html#LN98"><span class='Ref_to_Global_Var'>TypInfo</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN982"><span class='Ref_To_Local'>typeindex</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="bootstrap.c.html#LN94"><span class='Ref_to_Member'>inproc</span></a><span class='Delimiter'>; 
</span>        <span class='Operator'>*</span><a href="bootstrap.c.html#LN950"><span class='Ref_to_Parameter'>typoutput</span></a> <span class='Operator'>= </span><a href="bootstrap.c.html#LN98"><span class='Ref_to_Global_Var'>TypInfo</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN982"><span class='Ref_To_Local'>typeindex</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="bootstrap.c.html#LN95"><span class='Ref_to_Member'>outproc</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
<span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end boot_get_type_io_data &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* ---------------- 
 *      AllocateAttribute 
 * 
 * Note: bootstrap never sets any per-column ACLs, so we only need 
 * ATTRIBUTE_FIXED_PART_SIZE space per attribute. 
 * ---------------- 
 */ 
</span><span class='Keyword'>static </span><a href="../../include/catalog/pg_attribute.h.html#LN186"><span class='Ref_to_Typedef'>Form_pg_attribute</span></a> 
<a name="LN1017"></a><span class='Declare_Function'>AllocateAttribute</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> <span class='Parentheses'>(</span><a href="../../include/catalog/pg_attribute.h.html#LN186"><span class='Ref_to_Typedef'>Form_pg_attribute</span></a><span class='Parentheses'>) 
</span>        <a href="../../include/utils/palloc.h.html#LN71"><span class='Ref_to_Proto'>MemoryContextAllocZero</span></a><span class='Parentheses'>(</span><a href="../utils/mmgr/mcxt.c.html#LN42"><span class='Ref_to_Global_Var'>TopMemoryContext</span></a><span class='Delimiter'>, </span><a href="../../include/catalog/pg_attribute.h.html#LN178"><span class='Ref_to_Const'>ATTRIBUTE_FIXED_PART_SIZE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 *      MapArrayTypeName 
 * 
 * Given a type name, produce the corresponding array type name by prepending 
 * '_' and truncating as needed to fit in NAMEDATALEN-1 bytes.  This is only 
 * used in bootstrap mode, so we can get away with assuming that the input is 
 * ASCII and we don't need multibyte-aware truncation. 
 * 
 * The given string normally ends with '[]' or '[digits]'; we discard that. 
 * 
 * The result is a palloc'd string. 
 */ 
</span><span class='Keyword'>char </span><span class='Operator'>* 
</span><a name="LN1036"></a><span class='Declare_Function'>MapArrayTypeName</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>s</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1038"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>, 
</span><a name="LN1039"></a>                <span class='Declare_Local'>j</span><span class='Delimiter'>; 
</span><a name="LN1040"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>newStr</span><span class='Delimiter'>[</span><a href="../../interfaces/ecpg/include/sqlda-native.h.html#LN15"><span class='Ref_to_Const'>NAMEDATALEN</span></a><span class='Delimiter'>]; 
</span> 
    <a href="bootstrap.c.html#LN1040"><span class='Ref_To_Local'>newStr</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='String'>'_'</span><span class='Delimiter'>; 
</span>    <a href="bootstrap.c.html#LN1039"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="bootstrap.c.html#LN1038"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="bootstrap.c.html#LN1038"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="../../interfaces/ecpg/include/sqlda-native.h.html#LN15"><span class='Ref_to_Const'>NAMEDATALEN</span></a> <span class='Operator'>- </span><span class='Number'>2</span> <span class='Operator'>&& </span><a href="bootstrap.c.html#LN1036"><span class='Ref_to_Parameter'>s</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN1038"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>!= </span><span class='String'>'['</span><span class='Delimiter'>; </span><a href="bootstrap.c.html#LN1038"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Delimiter'>, </span><a href="bootstrap.c.html#LN1039"><span class='Ref_To_Local'>j</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <a href="bootstrap.c.html#LN1040"><span class='Ref_To_Local'>newStr</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN1039"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="bootstrap.c.html#LN1036"><span class='Ref_to_Parameter'>s</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN1038"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span> 
    <a href="bootstrap.c.html#LN1040"><span class='Ref_To_Local'>newStr</span></a><span class='Delimiter'>[</span><a href="bootstrap.c.html#LN1039"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="../../include/common/fe_memutils.h.html#LN32"><span class='Ref_to_Proto'>pstrdup</span></a><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN1040"><span class='Ref_To_Local'>newStr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/* 
 *  index_register() -- record an index that has been set up for building 
 *                      later. 
 * 
 *      At bootstrap time, we define a bunch of indexes on system catalogs. 
 *      We postpone actually building the indexes until just before we're 
 *      finished with initialization, however.  This is because the indexes 
 *      themselves have catalog entries, and those have to be included in the 
 *      indexes on those catalogs.  Doing it in two phases is the simplest 
 *      way of making sure the indexes have the right contents at the end. 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN1065"></a><span class='Declare_Function'>index_register</span><span class='Parentheses'>(</span><a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>heap</span><span class='Delimiter'>, 
</span><a name="LN1066"></a>               <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>ind</span><span class='Delimiter'>, 
</span><a name="LN1067"></a>               <a href="../../include/nodes/execnodes.h.html#LN130"><span class='Ref_to_Struct'>IndexInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>indexInfo</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1069"></a>    <a href="bootstrap.c.html#LN173"><span class='Ref_to_Typedef'>IndexList</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>newind</span><span class='Delimiter'>; 
</span><a name="LN1070"></a>    <a href="../../include/utils/palloc.h.html#LN35"><span class='Ref_to_Typedef'>MemoryContext</span></a> <span class='Declare_Local'>oldcxt</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * XXX mao 10/31/92 -- don't gc index reldescs, associated info at 
     * bootstrap time.  we'll declare the indexes now, but want to create them 
     * later. 
     */ 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="bootstrap.c.html#LN165"><span class='Ref_to_Global_Var'>nogc</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="bootstrap.c.html#LN165"><span class='Ref_to_Global_Var'>nogc</span></a> <span class='Operator'>= </span><a href="../../include/utils/memutils.h.html#LN145"><span class='Ref_to_Proto'>AllocSetContextCreate</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                                     <span class='String'>"BootstrapNoGC"</span><span class='Delimiter'>, 
</span>                                     <a href="../../include/utils/memutils.h.html#LN164"><span class='Ref_to_Const'>ALLOCSET_DEFAULT_SIZES</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="bootstrap.c.html#LN1070"><span class='Ref_To_Local'>oldcxt</span></a> <span class='Operator'>= </span><a href="../../include/utils/palloc.h.html#LN107"><span class='Ref_to_Func'>MemoryContextSwitchTo</span></a><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN165"><span class='Ref_to_Global_Var'>nogc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="bootstrap.c.html#LN1069"><span class='Ref_To_Local'>newind</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN173"><span class='Ref_to_Typedef'>IndexList</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN173"><span class='Ref_to_Typedef'>IndexList</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="bootstrap.c.html#LN1069"><span class='Ref_To_Local'>newind</span></a><span class='Operator'>-&GT;</span><a href="bootstrap.c.html#LN175"><span class='Ref_to_Member'>il_heap</span></a> <span class='Operator'>= </span><a href="bootstrap.c.html#LN1065"><span class='Ref_to_Parameter'>heap</span></a><span class='Delimiter'>; 
</span>    <a href="bootstrap.c.html#LN1069"><span class='Ref_To_Local'>newind</span></a><span class='Operator'>-&GT;</span><a href="bootstrap.c.html#LN176"><span class='Ref_to_Member'>il_ind</span></a> <span class='Operator'>= </span><a href="bootstrap.c.html#LN1066"><span class='Ref_to_Parameter'>ind</span></a><span class='Delimiter'>; 
</span>    <a href="bootstrap.c.html#LN1069"><span class='Ref_To_Local'>newind</span></a><span class='Operator'>-&GT;</span><a href="bootstrap.c.html#LN177"><span class='Ref_to_Member'>il_info</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/execnodes.h.html#LN130"><span class='Ref_to_Struct'>IndexInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/nodes/execnodes.h.html#LN130"><span class='Ref_to_Struct'>IndexInfo</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    memcpy<span class='Parentheses'>(</span><a href="bootstrap.c.html#LN1069"><span class='Ref_To_Local'>newind</span></a><span class='Operator'>-&GT;</span><a href="bootstrap.c.html#LN177"><span class='Ref_to_Member'>il_info</span></a><span class='Delimiter'>, </span><a href="bootstrap.c.html#LN1067"><span class='Ref_to_Parameter'>indexInfo</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/nodes/execnodes.h.html#LN130"><span class='Ref_to_Struct'>IndexInfo</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* expressions will likely be null, but may as well copy it */ 
</span>    <a href="bootstrap.c.html#LN1069"><span class='Ref_To_Local'>newind</span></a><span class='Operator'>-&GT;</span><a href="bootstrap.c.html#LN177"><span class='Ref_to_Member'>il_info</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN135"><span class='Ref_to_Member'>ii_Expressions</span></a> <span class='Operator'>= 
</span>        <a href="../../include/nodes/nodes.h.html#LN618"><span class='Ref_to_Macro'>copyObject</span></a><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN1067"><span class='Ref_to_Parameter'>indexInfo</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN135"><span class='Ref_to_Member'>ii_Expressions</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="bootstrap.c.html#LN1069"><span class='Ref_To_Local'>newind</span></a><span class='Operator'>-&GT;</span><a href="bootstrap.c.html#LN177"><span class='Ref_to_Member'>il_info</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN136"><span class='Ref_to_Member'>ii_ExpressionsState</span></a> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* predicate will likely be null, but may as well copy it */ 
</span>    <a href="bootstrap.c.html#LN1069"><span class='Ref_To_Local'>newind</span></a><span class='Operator'>-&GT;</span><a href="bootstrap.c.html#LN177"><span class='Ref_to_Member'>il_info</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN137"><span class='Ref_to_Member'>ii_Predicate</span></a> <span class='Operator'>= 
</span>        <a href="../../include/nodes/nodes.h.html#LN618"><span class='Ref_to_Macro'>copyObject</span></a><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN1067"><span class='Ref_to_Parameter'>indexInfo</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN137"><span class='Ref_to_Member'>ii_Predicate</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="bootstrap.c.html#LN1069"><span class='Ref_To_Local'>newind</span></a><span class='Operator'>-&GT;</span><a href="bootstrap.c.html#LN177"><span class='Ref_to_Member'>il_info</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN138"><span class='Ref_to_Member'>ii_PredicateState</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* no exclusion constraints at bootstrap time, so no need to copy */ 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN1067"><span class='Ref_to_Parameter'>indexInfo</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN139"><span class='Ref_to_Member'>ii_ExclusionOps</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN1067"><span class='Ref_to_Parameter'>indexInfo</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN140"><span class='Ref_to_Member'>ii_ExclusionProcs</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN1067"><span class='Ref_to_Parameter'>indexInfo</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN141"><span class='Ref_to_Member'>ii_ExclusionStrats</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="bootstrap.c.html#LN1069"><span class='Ref_To_Local'>newind</span></a><span class='Operator'>-&GT;</span><a href="bootstrap.c.html#LN178"><span class='Ref_to_Member'>il_next</span></a> <span class='Operator'>= </span><a href="bootstrap.c.html#LN181"><span class='Ref_to_Global_Var'>ILHead</span></a><span class='Delimiter'>; 
</span>    <a href="bootstrap.c.html#LN181"><span class='Ref_to_Global_Var'>ILHead</span></a> <span class='Operator'>= </span><a href="bootstrap.c.html#LN1069"><span class='Ref_To_Local'>newind</span></a><span class='Delimiter'>; 
</span> 
    <a href="../../include/utils/palloc.h.html#LN107"><span class='Ref_to_Func'>MemoryContextSwitchTo</span></a><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN1070"><span class='Ref_To_Local'>oldcxt</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end index_register &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* 
 * build_indices -- fill in all the indexes registered earlier 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN1115"></a><span class='Declare_Function'>build_indices</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><span class='Delimiter'>; </span><a href="bootstrap.c.html#LN181"><span class='Ref_to_Global_Var'>ILHead</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; </span><a href="bootstrap.c.html#LN181"><span class='Ref_to_Global_Var'>ILHead</span></a> <span class='Operator'>= </span><a href="bootstrap.c.html#LN181"><span class='Ref_to_Global_Var'>ILHead</span></a><span class='Operator'>-&GT;</span><a href="bootstrap.c.html#LN178"><span class='Ref_to_Member'>il_next</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN1119"></a>        <a href="../../include/utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a>    <span class='Declare_Local'>heap</span><span class='Delimiter'>; 
</span><a name="LN1120"></a>        <a href="../../include/utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a>    <span class='Declare_Local'>ind</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* need not bother with locks during bootstrap */ 
</span>        <a href="bootstrap.c.html#LN1119"><span class='Ref_To_Local'>heap</span></a> <span class='Operator'>= </span><a href="../../include/access/heapam.h.html#LN91"><span class='Ref_to_Proto'>heap_open</span></a><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN181"><span class='Ref_to_Global_Var'>ILHead</span></a><span class='Operator'>-&GT;</span><a href="bootstrap.c.html#LN175"><span class='Ref_to_Member'>il_heap</span></a><span class='Delimiter'>, </span><a href="../../include/storage/lockdefs.h.html#LN33"><span class='Ref_to_Const'>NoLock</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="bootstrap.c.html#LN1120"><span class='Ref_To_Local'>ind</span></a> <span class='Operator'>= </span><a href="../../include/access/genam.h.html#LN129"><span class='Ref_to_Proto'>index_open</span></a><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN181"><span class='Ref_to_Global_Var'>ILHead</span></a><span class='Operator'>-&GT;</span><a href="bootstrap.c.html#LN176"><span class='Ref_to_Member'>il_ind</span></a><span class='Delimiter'>, </span><a href="../../include/storage/lockdefs.h.html#LN33"><span class='Ref_to_Const'>NoLock</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../include/catalog/index.h.html#LN91"><span class='Ref_to_Proto'>index_build</span></a><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN1119"><span class='Ref_To_Local'>heap</span></a><span class='Delimiter'>, </span><a href="bootstrap.c.html#LN1120"><span class='Ref_To_Local'>ind</span></a><span class='Delimiter'>, </span><a href="bootstrap.c.html#LN181"><span class='Ref_to_Global_Var'>ILHead</span></a><span class='Operator'>-&GT;</span><a href="bootstrap.c.html#LN177"><span class='Ref_to_Member'>il_info</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../include/access/genam.h.html#LN130"><span class='Ref_to_Proto'>index_close</span></a><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN1120"><span class='Ref_To_Local'>ind</span></a><span class='Delimiter'>, </span><a href="../../include/storage/lockdefs.h.html#LN33"><span class='Ref_to_Const'>NoLock</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../include/access/heapam.h.html#LN96"><span class='Ref_to_Macro'>heap_close</span></a><span class='Parentheses'>(</span><a href="bootstrap.c.html#LN1119"><span class='Ref_To_Local'>heap</span></a><span class='Delimiter'>, </span><a href="../../include/storage/lockdefs.h.html#LN33"><span class='Ref_to_Const'>NoLock</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
} 
</span></pre>
<table bgcolor='#c0c0c0' width='100%'><tr><td><a href='../../../Contents.html'>Contents</a></td></tr>
</table><hr><p class='blurb' align='center'><a href='http://www.sourceinsight.com'>HTML Created by Source Insight Version 4.00.0084 Built on 2017-02-26</a></p>
</body></html>