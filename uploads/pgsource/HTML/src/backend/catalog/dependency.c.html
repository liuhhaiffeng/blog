<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta name="generator" content="Source Insight Version 4.00.0084 Built on 2017-02-26">
<meta charset='UTF-8' />
<style type='text/css'><!--
TD {background-color: #C0C0C0; font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.blurb {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.filename {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 120%; font-weight: bold; }
.dirname {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 100%; font-weight: bold; margin-top: 2.5em;}
--></style>
<title>src\backend\catalog\dependency.c</title>
<LINK REL=StyleSheet HREF="../../../C_Cpp_Source_File.css" TYPE='text/css' MEDIA=screen>
</head>
<body bgcolor=#ffffff>
<table bgcolor='#c0c0c0' width='100%'>
<tr><td><p class='filename'><b>src\backend\catalog\dependency.c</b></p></td>
<td align='right'>
Wed Jun 14 08:25:31 2017
</td></tr>
<tr><td><a href='../../../Contents.html'>Contents</a></td></tr>
</table>
<pre>
</span><span class='Comment_Multi_Line'>/*------------------------------------------------------------------------- 
 * 
 * dependency.c 
 *    Routines to support inter-object dependencies. 
 * 
 * 
 * Portions Copyright (c) 1996-2017, PostgreSQL Global Development Group 
 * Portions Copyright (c) 1994, Regents of the University of California 
 * 
 * IDENTIFICATION 
 *    src/backend/catalog/dependency.c 
 * 
 *------------------------------------------------------------------------- 
 */ 
</span><span class='Keyword'>#include </span><span class='String'>"postgres.h"</span> 
 
<span class='Keyword'>#include </span><span class='String'>"access/htup_details.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"access/xact.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/dependency.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/heap.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/index.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/objectaccess.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_am.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_amop.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_amproc.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_attrdef.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_authid.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_cast.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_collation.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_collation_fn.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_constraint.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_constraint_fn.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_conversion.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_conversion_fn.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_database.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_default_acl.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_depend.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_event_trigger.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_extension.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_foreign_data_wrapper.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_foreign_server.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_init_privs.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_language.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_largeobject.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_namespace.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_opclass.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_operator.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_opfamily.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_policy.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_proc.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_publication.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_publication_rel.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_rewrite.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_statistic_ext.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_subscription.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_tablespace.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_transform.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_trigger.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_ts_config.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_ts_dict.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_ts_parser.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_ts_template.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_type.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_user_mapping.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"commands/comment.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"commands/defrem.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"commands/event_trigger.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"commands/extension.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"commands/policy.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"commands/proclang.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"commands/publicationcmds.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"commands/schemacmds.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"commands/seclabel.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"commands/sequence.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"commands/trigger.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"commands/typecmds.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"nodes/nodeFuncs.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"parser/parsetree.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"rewrite/rewriteRemove.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"storage/lmgr.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/fmgroids.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/guc.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/lsyscache.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/syscache.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/tqual.h"</span> 
 
 
<span class='Comment_Multi_Line'>/* 
 * Deletion processing requires additional state for each ObjectAddress that 
 * it's planning to delete.  For simplicity and code-sharing we make the 
 * ObjectAddresses code support arrays with or without this extra state. 
 */ 
</span><span class='Control'>typedef</span> <span class='Control'>struct</span> 
<span class='Delimiter'>{ 
</span><a name="LN94"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>flags</span><span class='Delimiter'>;</span>          <span class='Comment_Single_Line'>/* bitmask, see bit definitions below */ 
</span><a name="LN95"></a>    <a href="../../include/catalog/objectaddress.h.html#LN23"><span class='Ref_to_Struct'>ObjectAddress</span></a> <span class='Declare_Member'>dependee</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* object whose deletion forced this one */ 
</span><a name="LN96"></a><span class='Delimiter'>} </span><span class='Declare_Typedef'>ObjectAddressExtra</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* ObjectAddressExtra flag bits */ 
</span><a name="LN99"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>DEPFLAG_ORIGINAL</span>    <span class='Number'>0x0001</span>      <span class='Comment_Single_Line'>/* an original deletion target */ 
</span><a name="LN100"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>DEPFLAG_NORMAL</span>      <span class='Number'>0x0002</span>      <span class='Comment_Single_Line'>/* reached via normal dependency */ 
</span><a name="LN101"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>DEPFLAG_AUTO</span>        <span class='Number'>0x0004</span>      <span class='Comment_Single_Line'>/* reached via auto dependency */ 
</span><a name="LN102"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>DEPFLAG_INTERNAL</span>    <span class='Number'>0x0008</span>      <span class='Comment_Single_Line'>/* reached via internal dependency */ 
</span><a name="LN103"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>DEPFLAG_EXTENSION</span>   <span class='Number'>0x0010</span>      <span class='Comment_Single_Line'>/* reached via extension dependency */ 
</span><a name="LN104"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>DEPFLAG_REVERSE</span>     <span class='Number'>0x0020</span>      <span class='Comment_Single_Line'>/* reverse internal/extension link */ 
</span> 
 
<span class='Comment_Multi_Line'>/* expansible list of ObjectAddresses */ 
</span><a name="LN108"></a><span class='Control'>struct</span> <span class='Declare_Struct'>ObjectAddresses</span> 
<span class='Delimiter'>{ 
</span><a name="LN110"></a>    <a href="../../include/catalog/objectaddress.h.html#LN23"><span class='Ref_to_Struct'>ObjectAddress</span></a> <span class='Operator'>*</span><span class='Declare_Member'>refs</span><span class='Delimiter'>;</span>        <span class='Comment_Single_Line'>/* =&GT; palloc'd array */ 
</span><a name="LN111"></a>    <a href="dependency.c.html#LN92"><span class='Ref_to_Typedef'>ObjectAddressExtra</span></a> <span class='Operator'>*</span><span class='Declare_Member'>extras</span><span class='Delimiter'>; </span><span class='Comment_Single_Line'>/* =&GT; palloc'd array, or NULL if not used */ 
</span><a name="LN112"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>numrefs</span><span class='Delimiter'>;</span>        <span class='Comment_Single_Line'>/* current number of references */ 
</span><a name="LN113"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>maxrefs</span><span class='Delimiter'>;</span>        <span class='Comment_Single_Line'>/* current size of palloc'd array(s) */ 
</span><span class='Delimiter'>}; 
</span> 
<span class='Comment_Multi_Line'>/* typedef ObjectAddresses appears in dependency.h */ 
</span> 
<span class='Comment_Multi_Line'>/* threaded list of ObjectAddresses, for recursion detection */ 
</span><a name="LN119"></a><span class='Control'>typedef</span> <span class='Control'>struct</span> <span class='Declare_Struct'>ObjectAddressStack</span> 
<span class='Delimiter'>{ 
</span><a name="LN121"></a>    <span class='Keyword'>const </span><a href="../../include/catalog/objectaddress.h.html#LN23"><span class='Ref_to_Struct'>ObjectAddress</span></a> <span class='Operator'>*</span><span class='Declare_Member'>object</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* object being visited */ 
</span><a name="LN122"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>flags</span><span class='Delimiter'>;</span>          <span class='Comment_Single_Line'>/* its current flag bits */ 
</span><a name="LN123"></a>    <span class='Control'>struct</span> <a href="dependency.c.html#LN119"><span class='Ref_to_Struct'>ObjectAddressStack</span></a> <span class='Operator'>*</span><span class='Declare_Member'>next</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* next outer stack level */ 
</span><a name="LN124"></a><span class='Delimiter'>} </span><span class='Declare_Typedef'>ObjectAddressStack</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* for find_expr_references_walker */ 
</span><span class='Control'>typedef</span> <span class='Control'>struct</span> 
<span class='Delimiter'>{ 
</span><a name="LN129"></a>    <a href="dependency.c.html#LN108"><span class='Ref_to_Struct'>ObjectAddresses</span></a> <span class='Operator'>*</span><span class='Declare_Member'>addrs</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* addresses being accumulated */ 
</span><a name="LN130"></a>    <a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Member'>rtables</span><span class='Delimiter'>;</span>        <span class='Comment_Single_Line'>/* list of rangetables to resolve Vars */ 
</span><a name="LN131"></a><span class='Delimiter'>} </span><span class='Declare_Typedef'>find_expr_references_context</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* 
 * This constant table maps ObjectClasses to the corresponding catalog OIDs. 
 * See also getObjectClass(). 
 */ 
</span><a name="LN137"></a><span class='Keyword'>static const </span><a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Var'>object_classes</span><span class='Delimiter'>[] </span><span class='Operator'>= </span><span class='Delimiter'>{ 
</span>    <a href="../../include/catalog/pg_class.h.html#LN28"><span class='Ref_to_Const'>RelationRelationId</span></a><span class='Delimiter'>,</span>         <span class='Comment_Single_Line'>/* OCLASS_CLASS */ 
</span>    <a href="../../include/catalog/pg_proc.h.html#LN32"><span class='Ref_to_Const'>ProcedureRelationId</span></a><span class='Delimiter'>,</span>        <span class='Comment_Single_Line'>/* OCLASS_PROC */ 
</span>    <a href="../../include/catalog/pg_type.h.html#LN33"><span class='Ref_to_Const'>TypeRelationId</span></a><span class='Delimiter'>,</span>             <span class='Comment_Single_Line'>/* OCLASS_TYPE */ 
</span>    <a href="../../include/catalog/pg_cast.h.html#LN30"><span class='Ref_to_Const'>CastRelationId</span></a><span class='Delimiter'>,</span>             <span class='Comment_Single_Line'>/* OCLASS_CAST */ 
</span>    <a href="../../include/catalog/pg_collation.h.html#LN29"><span class='Ref_to_Const'>CollationRelationId</span></a><span class='Delimiter'>,</span>        <span class='Comment_Single_Line'>/* OCLASS_COLLATION */ 
</span>    <a href="../../include/catalog/pg_constraint.h.html#LN28"><span class='Ref_to_Const'>ConstraintRelationId</span></a><span class='Delimiter'>,</span>       <span class='Comment_Single_Line'>/* OCLASS_CONSTRAINT */ 
</span>    <a href="../../include/catalog/pg_conversion.h.html#LN37"><span class='Ref_to_Const'>ConversionRelationId</span></a><span class='Delimiter'>,</span>       <span class='Comment_Single_Line'>/* OCLASS_CONVERSION */ 
</span>    <a href="../../include/catalog/pg_attrdef.h.html#LN28"><span class='Ref_to_Const'>AttrDefaultRelationId</span></a><span class='Delimiter'>,</span>      <span class='Comment_Single_Line'>/* OCLASS_DEFAULT */ 
</span>    <a href="../../include/catalog/pg_language.h.html#LN28"><span class='Ref_to_Const'>LanguageRelationId</span></a><span class='Delimiter'>,</span>         <span class='Comment_Single_Line'>/* OCLASS_LANGUAGE */ 
</span>    <a href="../../include/catalog/pg_largeobject.h.html#LN28"><span class='Ref_to_Const'>LargeObjectRelationId</span></a><span class='Delimiter'>,</span>      <span class='Comment_Single_Line'>/* OCLASS_LARGEOBJECT */ 
</span>    <a href="../../include/catalog/pg_operator.h.html#LN31"><span class='Ref_to_Const'>OperatorRelationId</span></a><span class='Delimiter'>,</span>         <span class='Comment_Single_Line'>/* OCLASS_OPERATOR */ 
</span>    <a href="../../include/catalog/pg_opclass.h.html#LN48"><span class='Ref_to_Const'>OperatorClassRelationId</span></a><span class='Delimiter'>,</span>    <span class='Comment_Single_Line'>/* OCLASS_OPCLASS */ 
</span>    <a href="../../include/catalog/pg_opfamily.h.html#LN28"><span class='Ref_to_Const'>OperatorFamilyRelationId</span></a><span class='Delimiter'>,</span>   <span class='Comment_Single_Line'>/* OCLASS_OPFAMILY */ 
</span>    <a href="../../include/catalog/pg_am.h.html#LN31"><span class='Ref_to_Const'>AccessMethodRelationId</span></a><span class='Delimiter'>,</span>     <span class='Comment_Single_Line'>/* OCLASS_AM */ 
</span>    <a href="../../include/catalog/pg_amop.h.html#LN53"><span class='Ref_to_Const'>AccessMethodOperatorRelationId</span></a><span class='Delimiter'>,</span>     <span class='Comment_Single_Line'>/* OCLASS_AMOP */ 
</span>    <a href="../../include/catalog/pg_amproc.h.html#LN42"><span class='Ref_to_Const'>AccessMethodProcedureRelationId</span></a><span class='Delimiter'>,</span>    <span class='Comment_Single_Line'>/* OCLASS_AMPROC */ 
</span>    <a href="../../include/catalog/pg_rewrite.h.html#LN31"><span class='Ref_to_Const'>RewriteRelationId</span></a><span class='Delimiter'>,</span>          <span class='Comment_Single_Line'>/* OCLASS_REWRITE */ 
</span>    <a href="../../include/catalog/pg_trigger.h.html#LN33"><span class='Ref_to_Const'>TriggerRelationId</span></a><span class='Delimiter'>,</span>          <span class='Comment_Single_Line'>/* OCLASS_TRIGGER */ 
</span>    <a href="../../include/catalog/pg_namespace.h.html#LN33"><span class='Ref_to_Const'>NamespaceRelationId</span></a><span class='Delimiter'>,</span>        <span class='Comment_Single_Line'>/* OCLASS_SCHEMA */ 
</span>    <a href="../../include/catalog/pg_statistic_ext.h.html#LN28"><span class='Ref_to_Const'>StatisticExtRelationId</span></a><span class='Delimiter'>,</span>     <span class='Comment_Single_Line'>/* OCLASS_STATISTIC_EXT */ 
</span>    <a href="../../include/catalog/pg_ts_parser.h.html#LN30"><span class='Ref_to_Const'>TSParserRelationId</span></a><span class='Delimiter'>,</span>         <span class='Comment_Single_Line'>/* OCLASS_TSPARSER */ 
</span>    <a href="../../include/catalog/pg_ts_dict.h.html#LN30"><span class='Ref_to_Const'>TSDictionaryRelationId</span></a><span class='Delimiter'>,</span>     <span class='Comment_Single_Line'>/* OCLASS_TSDICT */ 
</span>    <a href="../../include/catalog/pg_ts_template.h.html#LN30"><span class='Ref_to_Const'>TSTemplateRelationId</span></a><span class='Delimiter'>,</span>       <span class='Comment_Single_Line'>/* OCLASS_TSTEMPLATE */ 
</span>    <a href="../../include/catalog/pg_ts_config.h.html#LN30"><span class='Ref_to_Const'>TSConfigRelationId</span></a><span class='Delimiter'>,</span>         <span class='Comment_Single_Line'>/* OCLASS_TSCONFIG */ 
</span>    <a href="../../include/catalog/pg_authid.h.html#LN41"><span class='Ref_to_Const'>AuthIdRelationId</span></a><span class='Delimiter'>,</span>           <span class='Comment_Single_Line'>/* OCLASS_ROLE */ 
</span>    <a href="../../include/catalog/pg_database.h.html#LN28"><span class='Ref_to_Const'>DatabaseRelationId</span></a><span class='Delimiter'>,</span>         <span class='Comment_Single_Line'>/* OCLASS_DATABASE */ 
</span>    <a href="../../include/catalog/pg_tablespace.h.html#LN28"><span class='Ref_to_Const'>TableSpaceRelationId</span></a><span class='Delimiter'>,</span>       <span class='Comment_Single_Line'>/* OCLASS_TBLSPACE */ 
</span>    <a href="../../include/catalog/pg_foreign_data_wrapper.h.html#LN28"><span class='Ref_to_Const'>ForeignDataWrapperRelationId</span></a><span class='Delimiter'>,</span>       <span class='Comment_Single_Line'>/* OCLASS_FDW */ 
</span>    <a href="../../include/catalog/pg_foreign_server.h.html#LN26"><span class='Ref_to_Const'>ForeignServerRelationId</span></a><span class='Delimiter'>,</span>    <span class='Comment_Single_Line'>/* OCLASS_FOREIGN_SERVER */ 
</span>    <a href="../../include/catalog/pg_user_mapping.h.html#LN26"><span class='Ref_to_Const'>UserMappingRelationId</span></a><span class='Delimiter'>,</span>      <span class='Comment_Single_Line'>/* OCLASS_USER_MAPPING */ 
</span>    <a href="../../include/catalog/pg_default_acl.h.html#LN27"><span class='Ref_to_Const'>DefaultAclRelationId</span></a><span class='Delimiter'>,</span>       <span class='Comment_Single_Line'>/* OCLASS_DEFACL */ 
</span>    <a href="../../include/catalog/pg_extension.h.html#LN28"><span class='Ref_to_Const'>ExtensionRelationId</span></a><span class='Delimiter'>,</span>        <span class='Comment_Single_Line'>/* OCLASS_EXTENSION */ 
</span>    <a href="../../include/catalog/pg_event_trigger.h.html#LN28"><span class='Ref_to_Const'>EventTriggerRelationId</span></a><span class='Delimiter'>,</span>     <span class='Comment_Single_Line'>/* OCLASS_EVENT_TRIGGER */ 
</span>    <a href="../../include/catalog/pg_policy.h.html#LN18"><span class='Ref_to_Const'>PolicyRelationId</span></a><span class='Delimiter'>,</span>           <span class='Comment_Single_Line'>/* OCLASS_POLICY */ 
</span>    <a href="../../include/catalog/pg_publication.h.html#LN28"><span class='Ref_to_Const'>PublicationRelationId</span></a><span class='Delimiter'>,</span>      <span class='Comment_Single_Line'>/* OCLASS_PUBLICATION */ 
</span>    <a href="../../include/catalog/pg_publication_rel.h.html#LN27"><span class='Ref_to_Const'>PublicationRelRelationId</span></a><span class='Delimiter'>,</span>   <span class='Comment_Single_Line'>/* OCLASS_PUBLICATION_REL */ 
</span>    <a href="../../include/catalog/pg_subscription.h.html#LN21"><span class='Ref_to_Const'>SubscriptionRelationId</span></a><span class='Delimiter'>,</span>     <span class='Comment_Single_Line'>/* OCLASS_SUBSCRIPTION */ 
</span>    <a href="../../include/catalog/pg_transform.h.html#LN24"><span class='Ref_to_Const'>TransformRelationId</span></a>         <span class='Comment_Single_Line'>/* OCLASS_TRANSFORM */ 
</span><span class='Delimiter'>}; 
</span> 
 
<a name="LN179"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>findDependentObjects</span><span class='Parentheses'>(</span><span class='Keyword'>const </span><a href="../../include/catalog/objectaddress.h.html#LN23"><span class='Ref_to_Struct'>ObjectAddress</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>object</span><span class='Delimiter'>, 
</span><a name="LN180"></a>                     <span class='Keyword'>int </span><span class='Declare_Parameter'>objflags</span><span class='Delimiter'>, 
</span><a name="LN181"></a>                     <span class='Keyword'>int </span><span class='Declare_Parameter'>flags</span><span class='Delimiter'>, 
</span><a name="LN182"></a>                     <a href="dependency.c.html#LN119"><span class='Ref_to_Struct'>ObjectAddressStack</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>stack</span><span class='Delimiter'>, 
</span><a name="LN183"></a>                     <a href="dependency.c.html#LN108"><span class='Ref_to_Struct'>ObjectAddresses</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>targetObjects</span><span class='Delimiter'>, 
</span><a name="LN184"></a>                     <span class='Keyword'>const </span><a href="dependency.c.html#LN108"><span class='Ref_to_Struct'>ObjectAddresses</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pendingObjects</span><span class='Delimiter'>, 
</span><a name="LN185"></a>                     <a href="../../include/utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>depRel</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN186"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>reportDependentObjects</span><span class='Parentheses'>(</span><span class='Keyword'>const </span><a href="dependency.c.html#LN108"><span class='Ref_to_Struct'>ObjectAddresses</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>targetObjects</span><span class='Delimiter'>, 
</span><a name="LN187"></a>                       <a href="../../include/nodes/parsenodes.h.html#LN1652"><span class='Ref_to_Enum'>DropBehavior</span></a> <span class='Declare_Parameter'>behavior</span><span class='Delimiter'>, 
</span><a name="LN188"></a>                       <span class='Keyword'>int </span><span class='Declare_Parameter'>flags</span><span class='Delimiter'>, 
</span><a name="LN189"></a>                       <span class='Keyword'>const </span><a href="../../include/catalog/objectaddress.h.html#LN23"><span class='Ref_to_Struct'>ObjectAddress</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>origObject</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN190"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>deleteOneObject</span><span class='Parentheses'>(</span><span class='Keyword'>const </span><a href="../../include/catalog/objectaddress.h.html#LN23"><span class='Ref_to_Struct'>ObjectAddress</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>object</span><span class='Delimiter'>, 
</span><a name="LN191"></a>                <a href="../../include/utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>depRel</span><span class='Delimiter'>, </span><a href="../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a> <span class='Declare_Parameter'>flags</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN192"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>doDeletion</span><span class='Parentheses'>(</span><span class='Keyword'>const </span><a href="../../include/catalog/objectaddress.h.html#LN23"><span class='Ref_to_Struct'>ObjectAddress</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>object</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>flags</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN193"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>AcquireDeletionLock</span><span class='Parentheses'>(</span><span class='Keyword'>const </span><a href="../../include/catalog/objectaddress.h.html#LN23"><span class='Ref_to_Struct'>ObjectAddress</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>object</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>flags</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN194"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>ReleaseDeletionLock</span><span class='Parentheses'>(</span><span class='Keyword'>const </span><a href="../../include/catalog/objectaddress.h.html#LN23"><span class='Ref_to_Struct'>ObjectAddress</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>object</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN195"></a><span class='Keyword'>static bool </span><span class='Declare_Prototype'>find_expr_references_walker</span><span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, 
</span><a name="LN196"></a>                            <a href="dependency.c.html#LN127"><span class='Ref_to_Typedef'>find_expr_references_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN197"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>eliminate_duplicate_dependencies</span><span class='Parentheses'>(</span><a href="dependency.c.html#LN108"><span class='Ref_to_Struct'>ObjectAddresses</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>addrs</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN198"></a><span class='Keyword'>static int</span>  <span class='Declare_Prototype'>object_address_comparator</span><span class='Parentheses'>(</span><span class='Keyword'>const void </span><span class='Operator'>*</span><span class='Declare_Parameter'>a</span><span class='Delimiter'>, </span><span class='Keyword'>const void </span><span class='Operator'>*</span><span class='Declare_Parameter'>b</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN199"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>add_object_address</span><span class='Parentheses'>(</span><a href="../../include/catalog/dependency.h.html#LN128"><span class='Ref_to_Enum'>ObjectClass</span></a> <span class='Declare_Parameter'>oclass</span><span class='Delimiter'>, </span><a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>objectId</span><span class='Delimiter'>, </span><a href="../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a> <span class='Declare_Parameter'>subId</span><span class='Delimiter'>, 
</span><a name="LN200"></a>                   <a href="dependency.c.html#LN108"><span class='Ref_to_Struct'>ObjectAddresses</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>addrs</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN201"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>add_exact_object_address_extra</span><span class='Parentheses'>(</span><span class='Keyword'>const </span><a href="../../include/catalog/objectaddress.h.html#LN23"><span class='Ref_to_Struct'>ObjectAddress</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>object</span><span class='Delimiter'>, 
</span><a name="LN202"></a>                               <span class='Keyword'>const </span><a href="dependency.c.html#LN92"><span class='Ref_to_Typedef'>ObjectAddressExtra</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>extra</span><span class='Delimiter'>, 
</span><a name="LN203"></a>                               <a href="dependency.c.html#LN108"><span class='Ref_to_Struct'>ObjectAddresses</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>addrs</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN204"></a><span class='Keyword'>static bool </span><span class='Declare_Prototype'>object_address_present_add_flags</span><span class='Parentheses'>(</span><span class='Keyword'>const </span><a href="../../include/catalog/objectaddress.h.html#LN23"><span class='Ref_to_Struct'>ObjectAddress</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>object</span><span class='Delimiter'>, 
</span><a name="LN205"></a>                                 <span class='Keyword'>int </span><span class='Declare_Parameter'>flags</span><span class='Delimiter'>, 
</span><a name="LN206"></a>                                 <a href="dependency.c.html#LN108"><span class='Ref_to_Struct'>ObjectAddresses</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>addrs</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN207"></a><span class='Keyword'>static bool </span><span class='Declare_Prototype'>stack_address_present_add_flags</span><span class='Parentheses'>(</span><span class='Keyword'>const </span><a href="../../include/catalog/objectaddress.h.html#LN23"><span class='Ref_to_Struct'>ObjectAddress</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>object</span><span class='Delimiter'>, 
</span><a name="LN208"></a>                                <span class='Keyword'>int </span><span class='Declare_Parameter'>flags</span><span class='Delimiter'>, 
</span><a name="LN209"></a>                                <a href="dependency.c.html#LN119"><span class='Ref_to_Struct'>ObjectAddressStack</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>stack</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN210"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>DeleteInitPrivs</span><span class='Parentheses'>(</span><span class='Keyword'>const </span><a href="../../include/catalog/objectaddress.h.html#LN23"><span class='Ref_to_Struct'>ObjectAddress</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>object</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
 
<span class='Comment_Multi_Line'>/* 
 * Go through the objects given running the final actions on them, and execute 
 * the actual deletion. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN218"></a><span class='Declare_Function'>deleteObjectsInList</span><span class='Parentheses'>(</span><a href="dependency.c.html#LN108"><span class='Ref_to_Struct'>ObjectAddresses</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>targetObjects</span><span class='Delimiter'>, </span><a href="../../include/utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>depRel</span><span class='Delimiter'>, 
</span><a name="LN219"></a>                    <span class='Keyword'>int </span><span class='Declare_Parameter'>flags</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN221"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Keep track of objects for event triggers, if necessary. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/commands/event_trigger.h.html#LN60"><span class='Ref_to_Proto'>trackDroppedObjectsNeeded</span></a><span class='Parentheses'>() </span><span class='Operator'>&& !</span><span class='Parentheses'>(</span><a href="dependency.c.html#LN219"><span class='Ref_to_Parameter'>flags</span></a> <span class='Operator'>& </span><a href="../../include/catalog/dependency.h.html#LN173"><span class='Ref_to_Const'>PERFORM_DELETION_INTERNAL</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN221"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="dependency.c.html#LN221"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="dependency.c.html#LN218"><span class='Ref_to_Parameter'>targetObjects</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN112"><span class='Ref_to_Member'>numrefs</span></a><span class='Delimiter'>; </span><a href="dependency.c.html#LN221"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN230"></a>            <span class='Keyword'>const </span><a href="../../include/catalog/objectaddress.h.html#LN23"><span class='Ref_to_Struct'>ObjectAddress</span></a> <span class='Operator'>*</span><span class='Declare_Local'>thisobj</span> <span class='Operator'>= &</span><a href="dependency.c.html#LN218"><span class='Ref_to_Parameter'>targetObjects</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN110"><span class='Ref_to_Member'>refs</span></a><span class='Delimiter'>[</span><a href="dependency.c.html#LN221"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span><a name="LN231"></a>            <span class='Keyword'>const </span><a href="dependency.c.html#LN92"><span class='Ref_to_Typedef'>ObjectAddressExtra</span></a> <span class='Operator'>*</span><span class='Declare_Local'>extra</span> <span class='Operator'>= &</span><a href="dependency.c.html#LN218"><span class='Ref_to_Parameter'>targetObjects</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN111"><span class='Ref_to_Member'>extras</span></a><span class='Delimiter'>[</span><a href="dependency.c.html#LN221"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span><a name="LN232"></a>            <span class='Keyword'>bool</span>        <span class='Declare_Local'>original</span> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span><a name="LN233"></a>            <span class='Keyword'>bool</span>        <span class='Declare_Local'>normal</span> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN231"><span class='Ref_To_Local'>extra</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN94"><span class='Ref_to_Member'>flags</span></a> <span class='Operator'>& </span><a href="dependency.c.html#LN99"><span class='Ref_to_Const'>DEPFLAG_ORIGINAL</span></a><span class='Parentheses'>) 
</span>                <a href="dependency.c.html#LN232"><span class='Ref_To_Local'>original</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN231"><span class='Ref_To_Local'>extra</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN94"><span class='Ref_to_Member'>flags</span></a> <span class='Operator'>& </span><a href="dependency.c.html#LN100"><span class='Ref_to_Const'>DEPFLAG_NORMAL</span></a><span class='Parentheses'>) 
</span>                <a href="dependency.c.html#LN233"><span class='Ref_To_Local'>normal</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN231"><span class='Ref_To_Local'>extra</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN94"><span class='Ref_to_Member'>flags</span></a> <span class='Operator'>& </span><a href="dependency.c.html#LN104"><span class='Ref_to_Const'>DEPFLAG_REVERSE</span></a><span class='Parentheses'>) 
</span>                <a href="dependency.c.html#LN233"><span class='Ref_To_Local'>normal</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/commands/event_trigger.h.html#LN51"><span class='Ref_to_Proto'>EventTriggerSupportsObjectClass</span></a><span class='Parentheses'>(</span><a href="../../include/catalog/dependency.h.html#LN198"><span class='Ref_to_Proto'>getObjectClass</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN230"><span class='Ref_To_Local'>thisobj</span></a><span class='Parentheses'>)))</span> 
            <span class='Delimiter'>{ 
</span>                <a href="../../include/commands/event_trigger.h.html#LN61"><span class='Ref_to_Proto'>EventTriggerSQLDropAddObject</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN230"><span class='Ref_To_Local'>thisobj</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN232"><span class='Ref_To_Local'>original</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN233"><span class='Ref_To_Local'>normal</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if trackDroppedObjectsNe... &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* 
     * Delete all the objects in the proper order, except that if told to, we 
     * should skip the original object(s). 
     */ 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN221"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="dependency.c.html#LN221"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="dependency.c.html#LN218"><span class='Ref_to_Parameter'>targetObjects</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN112"><span class='Ref_to_Member'>numrefs</span></a><span class='Delimiter'>; </span><a href="dependency.c.html#LN221"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN255"></a>        <a href="../../include/catalog/objectaddress.h.html#LN23"><span class='Ref_to_Struct'>ObjectAddress</span></a> <span class='Operator'>*</span><span class='Declare_Local'>thisobj</span> <span class='Operator'>= </span><a href="dependency.c.html#LN218"><span class='Ref_to_Parameter'>targetObjects</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN110"><span class='Ref_to_Member'>refs</span></a> <span class='Operator'>+ </span><a href="dependency.c.html#LN221"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>; 
</span><a name="LN256"></a>        <a href="dependency.c.html#LN92"><span class='Ref_to_Typedef'>ObjectAddressExtra</span></a> <span class='Operator'>*</span><span class='Declare_Local'>thisextra</span> <span class='Operator'>= </span><a href="dependency.c.html#LN218"><span class='Ref_to_Parameter'>targetObjects</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN111"><span class='Ref_to_Member'>extras</span></a> <span class='Operator'>+ </span><a href="dependency.c.html#LN221"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="dependency.c.html#LN219"><span class='Ref_to_Parameter'>flags</span></a> <span class='Operator'>& </span><a href="../../include/catalog/dependency.h.html#LN176"><span class='Ref_to_Const'>PERFORM_DELETION_SKIP_ORIGINAL</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>            <span class='Parentheses'>(</span><a href="dependency.c.html#LN256"><span class='Ref_To_Local'>thisextra</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN94"><span class='Ref_to_Member'>flags</span></a> <span class='Operator'>& </span><a href="dependency.c.html#LN99"><span class='Ref_to_Const'>DEPFLAG_ORIGINAL</span></a><span class='Parentheses'>))</span> 
            <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
        <a href="dependency.c.html#LN190"><span class='Ref_to_Proto'>deleteOneObject</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN255"><span class='Ref_To_Local'>thisobj</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN218"><span class='Ref_to_Parameter'>depRel</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN219"><span class='Ref_to_Parameter'>flags</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
}</span><span class='Auto_Annotations'> &laquo; end deleteObjectsInList &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * performDeletion: attempt to drop the specified object.  If CASCADE 
 * behavior is specified, also drop any dependent objects (recursively). 
 * If RESTRICT behavior is specified, error out if there are any dependent 
 * objects, except for those that should be implicitly dropped anyway 
 * according to the dependency type. 
 * 
 * This is the outer control routine for all forms of DROP that drop objects 
 * that can participate in dependencies.  Note that performMultipleDeletions 
 * is a variant on the same theme; if you change anything here you'll likely 
 * need to fix that too. 
 * 
 * Bits in the flags argument can include: 
 * 
 * PERFORM_DELETION_INTERNAL: indicates that the drop operation is not the 
 * direct result of a user-initiated action.  For example, when a temporary 
 * schema is cleaned out so that a new backend can use it, or when a column 
 * default is dropped as an intermediate step while adding a new one, that's 
 * an internal operation.  On the other hand, when we drop something because 
 * the user issued a DROP statement against it, that's not internal. Currently 
 * this suppresses calling event triggers and making some permissions checks. 
 * 
 * PERFORM_DELETION_CONCURRENTLY: perform the drop concurrently.  This does 
 * not currently work for anything except dropping indexes; don't set it for 
 * other object types or you may get strange results. 
 * 
 * PERFORM_DELETION_QUIETLY: reduce message level from NOTICE to DEBUG2. 
 * 
 * PERFORM_DELETION_SKIP_ORIGINAL: do not delete the specified object(s), 
 * but only what depends on it/them. 
 * 
 * PERFORM_DELETION_SKIP_EXTENSIONS: do not delete extensions, even when 
 * deleting objects that are part of an extension.  This should generally 
 * be used only when dropping temporary objects. 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN302"></a><span class='Declare_Function'>performDeletion</span><span class='Parentheses'>(</span><span class='Keyword'>const </span><a href="../../include/catalog/objectaddress.h.html#LN23"><span class='Ref_to_Struct'>ObjectAddress</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>object</span><span class='Delimiter'>, 
</span><a name="LN303"></a>                <a href="../../include/nodes/parsenodes.h.html#LN1652"><span class='Ref_to_Enum'>DropBehavior</span></a> <span class='Declare_Parameter'>behavior</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>flags</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN305"></a>    <a href="../../include/utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a>    <span class='Declare_Local'>depRel</span><span class='Delimiter'>; 
</span><a name="LN306"></a>    <a href="dependency.c.html#LN108"><span class='Ref_to_Struct'>ObjectAddresses</span></a> <span class='Operator'>*</span><span class='Declare_Local'>targetObjects</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * We save some cycles by opening pg_depend just once and passing the 
     * Relation pointer down to all the recursive deletion steps. 
     */ 
</span>    <a href="dependency.c.html#LN305"><span class='Ref_To_Local'>depRel</span></a> <span class='Operator'>= </span><a href="../../include/access/heapam.h.html#LN91"><span class='Ref_to_Proto'>heap_open</span></a><span class='Parentheses'>(</span><a href="../../include/catalog/pg_depend.h.html#LN28"><span class='Ref_to_Const'>DependRelationId</span></a><span class='Delimiter'>, </span><a href="../../include/storage/lockdefs.h.html#LN37"><span class='Ref_to_Const'>RowExclusiveLock</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Acquire deletion lock on the target object.  (Ideally the caller has 
     * done this already, but many places are sloppy about it.) 
     */ 
</span>    <a href="dependency.c.html#LN193"><span class='Ref_to_Proto'>AcquireDeletionLock</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN302"><span class='Ref_to_Parameter'>object</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Construct a list of objects to delete (ie, the given object plus 
     * everything directly or indirectly dependent on it). 
     */ 
</span>    <a href="dependency.c.html#LN306"><span class='Ref_To_Local'>targetObjects</span></a> <span class='Operator'>= </span><a href="../../include/catalog/dependency.h.html#LN200"><span class='Ref_to_Proto'>new_object_addresses</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="dependency.c.html#LN179"><span class='Ref_to_Proto'>findDependentObjects</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN302"><span class='Ref_to_Parameter'>object</span></a><span class='Delimiter'>, 
</span>                         <a href="dependency.c.html#LN99"><span class='Ref_to_Const'>DEPFLAG_ORIGINAL</span></a><span class='Delimiter'>, 
</span>                         <a href="dependency.c.html#LN303"><span class='Ref_to_Parameter'>flags</span></a><span class='Delimiter'>, 
</span>                         <span class='Null_Value'>NULL</span><span class='Delimiter'>,</span>  <span class='Comment_Single_Line'>/* empty stack */ 
</span>                         <a href="dependency.c.html#LN306"><span class='Ref_To_Local'>targetObjects</span></a><span class='Delimiter'>, 
</span>                         <span class='Null_Value'>NULL</span><span class='Delimiter'>,</span>  <span class='Comment_Single_Line'>/* no pendingObjects */ 
</span>                         <span class='Operator'>&</span><a href="dependency.c.html#LN305"><span class='Ref_To_Local'>depRel</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Check if deletion is allowed, and report about cascaded deletes. 
     */ 
</span>    <a href="dependency.c.html#LN186"><span class='Ref_to_Proto'>reportDependentObjects</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN306"><span class='Ref_To_Local'>targetObjects</span></a><span class='Delimiter'>, 
</span>                           <a href="dependency.c.html#LN303"><span class='Ref_to_Parameter'>behavior</span></a><span class='Delimiter'>, 
</span>                           <a href="dependency.c.html#LN303"><span class='Ref_to_Parameter'>flags</span></a><span class='Delimiter'>, 
</span>                           <a href="dependency.c.html#LN302"><span class='Ref_to_Parameter'>object</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* do the deed */ 
</span>    <a href="dependency.c.html#LN217"><span class='Ref_to_Func'>deleteObjectsInList</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN306"><span class='Ref_To_Local'>targetObjects</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="dependency.c.html#LN305"><span class='Ref_To_Local'>depRel</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN303"><span class='Ref_to_Parameter'>flags</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* And clean up */ 
</span>    <a href="../../include/catalog/dependency.h.html#LN212"><span class='Ref_to_Proto'>free_object_addresses</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN306"><span class='Ref_To_Local'>targetObjects</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../include/access/heapam.h.html#LN96"><span class='Ref_to_Macro'>heap_close</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN305"><span class='Ref_To_Local'>depRel</span></a><span class='Delimiter'>, </span><a href="../../include/storage/lockdefs.h.html#LN37"><span class='Ref_to_Const'>RowExclusiveLock</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end performDeletion &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * performMultipleDeletions: Similar to performDeletion, but act on multiple 
 * objects at once. 
 * 
 * The main difference from issuing multiple performDeletion calls is that the 
 * list of objects that would be implicitly dropped, for each object to be 
 * dropped, is the union of the implicit-object list for all objects.  This 
 * makes each check be more relaxed. 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN361"></a><span class='Declare_Function'>performMultipleDeletions</span><span class='Parentheses'>(</span><span class='Keyword'>const </span><a href="dependency.c.html#LN108"><span class='Ref_to_Struct'>ObjectAddresses</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>objects</span><span class='Delimiter'>, 
</span><a name="LN362"></a>                         <a href="../../include/nodes/parsenodes.h.html#LN1652"><span class='Ref_to_Enum'>DropBehavior</span></a> <span class='Declare_Parameter'>behavior</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>flags</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN364"></a>    <a href="../../include/utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a>    <span class='Declare_Local'>depRel</span><span class='Delimiter'>; 
</span><a name="LN365"></a>    <a href="dependency.c.html#LN108"><span class='Ref_to_Struct'>ObjectAddresses</span></a> <span class='Operator'>*</span><span class='Declare_Local'>targetObjects</span><span class='Delimiter'>; 
</span><a name="LN366"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* No work if no objects... */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN361"><span class='Ref_to_Parameter'>objects</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN112"><span class='Ref_to_Member'>numrefs</span></a> <span class='Operator'>&LT;= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * We save some cycles by opening pg_depend just once and passing the 
     * Relation pointer down to all the recursive deletion steps. 
     */ 
</span>    <a href="dependency.c.html#LN364"><span class='Ref_To_Local'>depRel</span></a> <span class='Operator'>= </span><a href="../../include/access/heapam.h.html#LN91"><span class='Ref_to_Proto'>heap_open</span></a><span class='Parentheses'>(</span><a href="../../include/catalog/pg_depend.h.html#LN28"><span class='Ref_to_Const'>DependRelationId</span></a><span class='Delimiter'>, </span><a href="../../include/storage/lockdefs.h.html#LN37"><span class='Ref_to_Const'>RowExclusiveLock</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Construct a list of objects to delete (ie, the given objects plus 
     * everything directly or indirectly dependent on them).  Note that 
     * because we pass the whole objects list as pendingObjects context, we 
     * won't get a failure from trying to delete an object that is internally 
     * dependent on another one in the list; we'll just skip that object and 
     * delete it when we reach its owner. 
     */ 
</span>    <a href="dependency.c.html#LN365"><span class='Ref_To_Local'>targetObjects</span></a> <span class='Operator'>= </span><a href="../../include/catalog/dependency.h.html#LN200"><span class='Ref_to_Proto'>new_object_addresses</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN366"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="dependency.c.html#LN366"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="dependency.c.html#LN361"><span class='Ref_to_Parameter'>objects</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN112"><span class='Ref_to_Member'>numrefs</span></a><span class='Delimiter'>; </span><a href="dependency.c.html#LN366"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN390"></a>        <span class='Keyword'>const </span><a href="../../include/catalog/objectaddress.h.html#LN23"><span class='Ref_to_Struct'>ObjectAddress</span></a> <span class='Operator'>*</span><span class='Declare_Local'>thisobj</span> <span class='Operator'>= </span><a href="dependency.c.html#LN361"><span class='Ref_to_Parameter'>objects</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN110"><span class='Ref_to_Member'>refs</span></a> <span class='Operator'>+ </span><a href="dependency.c.html#LN366"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Acquire deletion lock on each target object.  (Ideally the caller 
         * has done this already, but many places are sloppy about it.) 
         */ 
</span>        <a href="dependency.c.html#LN193"><span class='Ref_to_Proto'>AcquireDeletionLock</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN390"><span class='Ref_To_Local'>thisobj</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN362"><span class='Ref_to_Parameter'>flags</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="dependency.c.html#LN179"><span class='Ref_to_Proto'>findDependentObjects</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN390"><span class='Ref_To_Local'>thisobj</span></a><span class='Delimiter'>, 
</span>                             <a href="dependency.c.html#LN99"><span class='Ref_to_Const'>DEPFLAG_ORIGINAL</span></a><span class='Delimiter'>, 
</span>                             <a href="dependency.c.html#LN362"><span class='Ref_to_Parameter'>flags</span></a><span class='Delimiter'>, 
</span>                             <span class='Null_Value'>NULL</span><span class='Delimiter'>,</span>      <span class='Comment_Single_Line'>/* empty stack */ 
</span>                             <a href="dependency.c.html#LN365"><span class='Ref_To_Local'>targetObjects</span></a><span class='Delimiter'>, 
</span>                             <a href="dependency.c.html#LN361"><span class='Ref_to_Parameter'>objects</span></a><span class='Delimiter'>, 
</span>                             <span class='Operator'>&</span><a href="dependency.c.html#LN364"><span class='Ref_To_Local'>depRel</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Check if deletion is allowed, and report about cascaded deletes. 
     * 
     * If there's exactly one object being deleted, report it the same way as 
     * in performDeletion(), else we have to be vaguer. 
     */ 
</span>    <a href="dependency.c.html#LN186"><span class='Ref_to_Proto'>reportDependentObjects</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN365"><span class='Ref_To_Local'>targetObjects</span></a><span class='Delimiter'>, 
</span>                           <a href="dependency.c.html#LN362"><span class='Ref_to_Parameter'>behavior</span></a><span class='Delimiter'>, 
</span>                           <a href="dependency.c.html#LN362"><span class='Ref_to_Parameter'>flags</span></a><span class='Delimiter'>, 
</span>                           <span class='Parentheses'>(</span><a href="dependency.c.html#LN361"><span class='Ref_to_Parameter'>objects</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN112"><span class='Ref_to_Member'>numrefs</span></a> <span class='Operator'>== </span><span class='Number'>1</span> <span class='Operator'>? </span><a href="dependency.c.html#LN361"><span class='Ref_to_Parameter'>objects</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN110"><span class='Ref_to_Member'>refs</span></a> <span class='Operator'>: </span><span class='Null_Value'>NULL</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* do the deed */ 
</span>    <a href="dependency.c.html#LN217"><span class='Ref_to_Func'>deleteObjectsInList</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN365"><span class='Ref_To_Local'>targetObjects</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="dependency.c.html#LN364"><span class='Ref_To_Local'>depRel</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN362"><span class='Ref_to_Parameter'>flags</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* And clean up */ 
</span>    <a href="../../include/catalog/dependency.h.html#LN212"><span class='Ref_to_Proto'>free_object_addresses</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN365"><span class='Ref_To_Local'>targetObjects</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../include/access/heapam.h.html#LN96"><span class='Ref_to_Macro'>heap_close</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN364"><span class='Ref_To_Local'>depRel</span></a><span class='Delimiter'>, </span><a href="../../include/storage/lockdefs.h.html#LN37"><span class='Ref_to_Const'>RowExclusiveLock</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end performMultipleDeletions &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * findDependentObjects - find all objects that depend on 'object' 
 * 
 * For every object that depends on the starting object, acquire a deletion 
 * lock on the object, add it to targetObjects (if not already there), 
 * and recursively find objects that depend on it.  An object's dependencies 
 * will be placed into targetObjects before the object itself; this means 
 * that the finished list's order represents a safe deletion order. 
 * 
 * The caller must already have a deletion lock on 'object' itself, 
 * but must not have added it to targetObjects.  (Note: there are corner 
 * cases where we won't add the object either, and will also release the 
 * caller-taken lock.  This is a bit ugly, but the API is set up this way 
 * to allow easy rechecking of an object's liveness after we lock it.  See 
 * notes within the function.) 
 * 
 * When dropping a whole object (subId = 0), we find dependencies for 
 * its sub-objects too. 
 * 
 *  object: the object to add to targetObjects and find dependencies on 
 *  objflags: flags to be ORed into the object's targetObjects entry 
 *  flags: PERFORM_DELETION_xxx flags for the deletion operation as a whole 
 *  stack: list of objects being visited in current recursion; topmost item 
 *          is the object that we recursed from (NULL for external callers) 
 *  targetObjects: list of objects that are scheduled to be deleted 
 *  pendingObjects: list of other objects slated for destruction, but 
 *          not necessarily in targetObjects yet (can be NULL if none) 
 *  *depRel: already opened pg_depend relation 
 * 
 * Note: objflags describes the reason for visiting this particular object 
 * at this time, and is not passed down when recursing.  The flags argument 
 * is passed down, since it describes what we're doing overall. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN461"></a><span class='Declare_Function'>findDependentObjects</span><span class='Parentheses'>(</span><span class='Keyword'>const </span><a href="../../include/catalog/objectaddress.h.html#LN23"><span class='Ref_to_Struct'>ObjectAddress</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>object</span><span class='Delimiter'>, 
</span><a name="LN462"></a>                     <span class='Keyword'>int </span><span class='Declare_Parameter'>objflags</span><span class='Delimiter'>, 
</span><a name="LN463"></a>                     <span class='Keyword'>int </span><span class='Declare_Parameter'>flags</span><span class='Delimiter'>, 
</span><a name="LN464"></a>                     <a href="dependency.c.html#LN119"><span class='Ref_to_Struct'>ObjectAddressStack</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>stack</span><span class='Delimiter'>, 
</span><a name="LN465"></a>                     <a href="dependency.c.html#LN108"><span class='Ref_to_Struct'>ObjectAddresses</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>targetObjects</span><span class='Delimiter'>, 
</span><a name="LN466"></a>                     <span class='Keyword'>const </span><a href="dependency.c.html#LN108"><span class='Ref_to_Struct'>ObjectAddresses</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pendingObjects</span><span class='Delimiter'>, 
</span><a name="LN467"></a>                     <a href="../../include/utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>depRel</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN469"></a>    <a href="../../include/access/skey.h.html#LN63"><span class='Ref_to_Struct'>ScanKeyData</span></a> <span class='Declare_Local'>key</span><span class='Delimiter'>[</span><span class='Number'>3</span><span class='Delimiter'>]; 
</span><a name="LN470"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>nkeys</span><span class='Delimiter'>; 
</span><a name="LN471"></a>    <a href="../../include/access/genam.h.html#LN86"><span class='Ref_to_Typedef'>SysScanDesc</span></a> <span class='Declare_Local'>scan</span><span class='Delimiter'>; 
</span><a name="LN472"></a>    <a href="../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tup</span><span class='Delimiter'>; 
</span><a name="LN473"></a>    <a href="../../include/catalog/objectaddress.h.html#LN23"><span class='Ref_to_Struct'>ObjectAddress</span></a> <span class='Declare_Local'>otherObject</span><span class='Delimiter'>; 
</span><a name="LN474"></a>    <a href="dependency.c.html#LN119"><span class='Ref_to_Struct'>ObjectAddressStack</span></a> <span class='Declare_Local'>mystack</span><span class='Delimiter'>; 
</span><a name="LN475"></a>    <a href="dependency.c.html#LN92"><span class='Ref_to_Typedef'>ObjectAddressExtra</span></a> <span class='Declare_Local'>extra</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If the target object is already being visited in an outer recursion 
     * level, just report the current objflags back to that level and exit. 
     * This is needed to avoid infinite recursion in the face of circular 
     * dependencies. 
     * 
     * The stack check alone would result in dependency loops being broken at 
     * an arbitrary point, ie, the first member object of the loop to be 
     * visited is the last one to be deleted.  This is obviously unworkable. 
     * However, the check for internal dependency below guarantees that we 
     * will not break a loop at an internal dependency: if we enter the loop 
     * at an "owned" object we will switch and start at the "owning" object 
     * instead.  We could probably hack something up to avoid breaking at an 
     * auto dependency, too, if we had to.  However there are no known cases 
     * where that would be necessary. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN207"><span class='Ref_to_Proto'>stack_address_present_add_flags</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN461"><span class='Ref_to_Parameter'>object</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN462"><span class='Ref_to_Parameter'>objflags</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN464"><span class='Ref_to_Parameter'>stack</span></a><span class='Parentheses'>))</span> 
        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * It's also possible that the target object has already been completely 
     * processed and put into targetObjects.  If so, again we just add the 
     * specified objflags to its entry and return. 
     * 
     * (Note: in these early-exit cases we could release the caller-taken 
     * lock, since the object is presumably now locked multiple times; but it 
     * seems not worth the cycles.) 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN204"><span class='Ref_to_Proto'>object_address_present_add_flags</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN461"><span class='Ref_to_Parameter'>object</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN462"><span class='Ref_to_Parameter'>objflags</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN465"><span class='Ref_to_Parameter'>targetObjects</span></a><span class='Parentheses'>))</span> 
        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * The target object might be internally dependent on some other object 
     * (its "owner"), and/or be a member of an extension (also considered its 
     * owner).  If so, and if we aren't recursing from the owning object, we 
     * have to transform this deletion request into a deletion request of the 
     * owning object.  (We'll eventually recurse back to this object, but the 
     * owning object has to be visited first so it will be deleted after.) The 
     * way to find out about this is to scan the pg_depend entries that show 
     * what this object depends on. 
     */ 
</span>    <a href="../access/common/scankey.c.html#LN74"><span class='Ref_to_Func'>ScanKeyInit</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="dependency.c.html#LN469"><span class='Ref_To_Local'>key</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>], 
</span>                <a href="../../include/catalog/pg_depend.h.html#LN67"><span class='Ref_to_Const'>Anum_pg_depend_classid</span></a><span class='Delimiter'>, 
</span>                <a href="../../include/access/stratnum.h.html#LN30"><span class='Ref_to_Const'>BTEqualStrategyNumber</span></a><span class='Delimiter'>, </span>F_OIDEQ<span class='Delimiter'>, 
</span>                <a href="../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN461"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN25"><span class='Ref_to_Member'>classId</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../access/common/scankey.c.html#LN74"><span class='Ref_to_Func'>ScanKeyInit</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="dependency.c.html#LN469"><span class='Ref_To_Local'>key</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>], 
</span>                <a href="../../include/catalog/pg_depend.h.html#LN68"><span class='Ref_to_Const'>Anum_pg_depend_objid</span></a><span class='Delimiter'>, 
</span>                <a href="../../include/access/stratnum.h.html#LN30"><span class='Ref_to_Const'>BTEqualStrategyNumber</span></a><span class='Delimiter'>, </span>F_OIDEQ<span class='Delimiter'>, 
</span>                <a href="../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN461"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN461"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN27"><span class='Ref_to_Member'>objectSubId</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../access/common/scankey.c.html#LN74"><span class='Ref_to_Func'>ScanKeyInit</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="dependency.c.html#LN469"><span class='Ref_To_Local'>key</span></a><span class='Delimiter'>[</span><span class='Number'>2</span><span class='Delimiter'>], 
</span>                    <a href="../../include/catalog/pg_depend.h.html#LN69"><span class='Ref_to_Const'>Anum_pg_depend_objsubid</span></a><span class='Delimiter'>, 
</span>                    <a href="../../include/access/stratnum.h.html#LN30"><span class='Ref_to_Const'>BTEqualStrategyNumber</span></a><span class='Delimiter'>, </span>F_INT4EQ<span class='Delimiter'>, 
</span>                    <a href="../../include/postgres.h.html#LN484"><span class='Ref_to_Macro'>Int32GetDatum</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN461"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN27"><span class='Ref_to_Member'>objectSubId</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="dependency.c.html#LN470"><span class='Ref_To_Local'>nkeys</span></a> <span class='Operator'>= </span><span class='Number'>3</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
        <a href="dependency.c.html#LN470"><span class='Ref_To_Local'>nkeys</span></a> <span class='Operator'>= </span><span class='Number'>2</span><span class='Delimiter'>; 
</span> 
    <a href="dependency.c.html#LN471"><span class='Ref_To_Local'>scan</span></a> <span class='Operator'>= </span><a href="../../include/access/genam.h.html#LN189"><span class='Ref_to_Proto'>systable_beginscan</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="dependency.c.html#LN467"><span class='Ref_to_Parameter'>depRel</span></a><span class='Delimiter'>, </span><a href="../../include/catalog/indexing.h.html#LN144"><span class='Ref_to_Const'>DependDependerIndexId</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, 
</span>                              <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="dependency.c.html#LN470"><span class='Ref_To_Local'>nkeys</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN469"><span class='Ref_To_Local'>key</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN472"><span class='Ref_To_Local'>tup</span></a> <span class='Operator'>= </span><a href="../../include/access/genam.h.html#LN194"><span class='Ref_to_Proto'>systable_getnext</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN471"><span class='Ref_To_Local'>scan</span></a><span class='Parentheses'>)))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN542"></a>        <a href="../../include/catalog/pg_depend.h.html#LN60"><span class='Ref_to_Typedef'>Form_pg_depend</span></a> <span class='Declare_Local'>foundDep</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/catalog/pg_depend.h.html#LN60"><span class='Ref_to_Typedef'>Form_pg_depend</span></a><span class='Parentheses'>) </span><a href="../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN472"><span class='Ref_To_Local'>tup</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="dependency.c.html#LN473"><span class='Ref_To_Local'>otherObject</span></a><span class='Operator'>.</span><a href="../../include/catalog/objectaddress.h.html#LN25"><span class='Ref_to_Member'>classId</span></a> <span class='Operator'>= </span><a href="dependency.c.html#LN542"><span class='Ref_To_Local'>foundDep</span></a><span class='Operator'>-&GT;</span>refclassid<span class='Delimiter'>; 
</span>        <a href="dependency.c.html#LN473"><span class='Ref_To_Local'>otherObject</span></a><span class='Operator'>.</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a> <span class='Operator'>= </span><a href="dependency.c.html#LN542"><span class='Ref_To_Local'>foundDep</span></a><span class='Operator'>-&GT;</span>refobjid<span class='Delimiter'>; 
</span>        <a href="dependency.c.html#LN473"><span class='Ref_To_Local'>otherObject</span></a><span class='Operator'>.</span><a href="../../include/catalog/objectaddress.h.html#LN27"><span class='Ref_to_Member'>objectSubId</span></a> <span class='Operator'>= </span><a href="dependency.c.html#LN542"><span class='Ref_To_Local'>foundDep</span></a><span class='Operator'>-&GT;</span>refobjsubid<span class='Delimiter'>; 
</span> 
        <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN542"><span class='Ref_To_Local'>foundDep</span></a><span class='Operator'>-&GT;</span>deptype<span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>case</span> <a href="../../include/catalog/dependency.h.html#LN74"><span class='Ref_to_EnumConst'>DEPENDENCY_NORMAL</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="../../include/catalog/dependency.h.html#LN75"><span class='Ref_to_EnumConst'>DEPENDENCY_AUTO</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="../../include/catalog/dependency.h.html#LN78"><span class='Ref_to_EnumConst'>DEPENDENCY_AUTO_EXTENSION</span></a><span class='Operator'>: 
</span>                <span class='Comment_Multi_Line'>/* no problem */ 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>case</span> <a href="../../include/catalog/dependency.h.html#LN77"><span class='Ref_to_EnumConst'>DEPENDENCY_EXTENSION</span></a><span class='Operator'>: 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * If told to, ignore EXTENSION dependencies altogether.  This 
                 * flag is normally used to prevent dropping extensions during 
                 * temporary-object cleanup, even if a temp object was created 
                 * during an extension script. 
                 */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN463"><span class='Ref_to_Parameter'>flags</span></a> <span class='Operator'>& </span><a href="../../include/catalog/dependency.h.html#LN177"><span class='Ref_to_Const'>PERFORM_DELETION_SKIP_EXTENSIONS</span></a><span class='Parentheses'>) 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * If the other object is the extension currently being 
                 * created/altered, ignore this dependency and continue with 
                 * the deletion.  This allows dropping of an extension's 
                 * objects within the extension's scripts, as well as corner 
                 * cases such as dropping a transient object created within 
                 * such a script. 
                 */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../commands/extension.c.html#LN66"><span class='Ref_to_Global_Var'>creating_extension</span></a> <span class='Operator'>&& 
</span>                    <a href="dependency.c.html#LN473"><span class='Ref_To_Local'>otherObject</span></a><span class='Operator'>.</span><a href="../../include/catalog/objectaddress.h.html#LN25"><span class='Ref_to_Member'>classId</span></a> <span class='Operator'>== </span><a href="../../include/catalog/pg_extension.h.html#LN28"><span class='Ref_to_Const'>ExtensionRelationId</span></a> <span class='Operator'>&& 
</span>                    <a href="dependency.c.html#LN473"><span class='Ref_To_Local'>otherObject</span></a><span class='Operator'>.</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a> <span class='Operator'>== </span><a href="../commands/extension.c.html#LN67"><span class='Ref_to_Global_Var'>CurrentExtensionObject</span></a><span class='Parentheses'>) 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* Otherwise, treat this like an internal dependency */ 
</span>                <span class='Comment_Multi_Line'>/* FALL THRU */ 
</span> 
            <span class='Control'>case</span> <a href="../../include/catalog/dependency.h.html#LN76"><span class='Ref_to_EnumConst'>DEPENDENCY_INTERNAL</span></a><span class='Operator'>: 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * This object is part of the internal implementation of 
                 * another object, or is part of the extension that is the 
                 * other object.  We have three cases: 
                 * 
                 * 1. At the outermost recursion level, disallow the DROP. (We 
                 * just ereport here, rather than proceeding, since no other 
                 * dependencies are likely to be interesting.)  However, if 
                 * the owning object is listed in pendingObjects, just release 
                 * the caller's lock and return; we'll eventually complete the 
                 * DROP when we reach that entry in the pending list. 
                 */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN464"><span class='Ref_to_Parameter'>stack</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span><a name="LN599"></a>                    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>otherObjDesc</span><span class='Delimiter'>; 
</span> 
                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN466"><span class='Ref_to_Parameter'>pendingObjects</span></a> <span class='Operator'>&& 
</span>                        <a href="../../include/catalog/dependency.h.html#LN205"><span class='Ref_to_Proto'>object_address_present</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="dependency.c.html#LN473"><span class='Ref_To_Local'>otherObject</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN466"><span class='Ref_to_Parameter'>pendingObjects</span></a><span class='Parentheses'>))</span> 
                    <span class='Delimiter'>{ 
</span>                        <a href="../../include/access/genam.h.html#LN196"><span class='Ref_to_Proto'>systable_endscan</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN471"><span class='Ref_To_Local'>scan</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Comment_Multi_Line'>/* need to release caller's lock; see notes below */ 
</span>                        <a href="dependency.c.html#LN194"><span class='Ref_to_Proto'>ReleaseDeletionLock</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN461"><span class='Ref_to_Parameter'>object</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>return</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                    <a href="dependency.c.html#LN599"><span class='Ref_To_Local'>otherObjDesc</span></a> <span class='Operator'>= </span><a href="../../include/catalog/objectaddress.h.html#LN70"><span class='Ref_to_Proto'>getObjectDescription</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="dependency.c.html#LN473"><span class='Ref_To_Local'>otherObject</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                            <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_DEPENDENT_OBJECTS_STILL_EXIST<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                             <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"cannot drop %s because %s requires it"</span><span class='Delimiter'>, 
</span>                                    <a href="../../include/catalog/objectaddress.h.html#LN70"><span class='Ref_to_Proto'>getObjectDescription</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN461"><span class='Ref_to_Parameter'>object</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                    <a href="dependency.c.html#LN599"><span class='Ref_To_Local'>otherObjDesc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                             <a href="../utils/error/elog.c.html#LN985"><span class='Ref_to_Func'>errhint</span></a><span class='Parentheses'>(</span><span class='String'>"You can drop %s instead."</span><span class='Delimiter'>, 
</span>                                     <a href="dependency.c.html#LN599"><span class='Ref_To_Local'>otherObjDesc</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if stack==NULL &raquo; </span> 
 
                <span class='Comment_Multi_Line'>/* 
                 * 2. When recursing from the other end of this dependency, 
                 * it's okay to continue with the deletion.  This holds when 
                 * recursing from a whole object that includes the nominal 
                 * other end as a component, too.  Since there can be more 
                 * than one "owning" object, we have to allow matches that are 
                 * more than one level down in the stack. 
                 */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN207"><span class='Ref_to_Proto'>stack_address_present_add_flags</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="dependency.c.html#LN473"><span class='Ref_To_Local'>otherObject</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="dependency.c.html#LN464"><span class='Ref_to_Parameter'>stack</span></a><span class='Parentheses'>))</span> 
                    <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * 3. Not all the owning objects have been visited, so 
                 * transform this deletion request into a delete of this 
                 * owning object. 
                 * 
                 * First, release caller's lock on this object and get 
                 * deletion lock on the owning object.  (We must release 
                 * caller's lock to avoid deadlock against a concurrent 
                 * deletion of the owning object.) 
                 */ 
</span>                <a href="dependency.c.html#LN194"><span class='Ref_to_Proto'>ReleaseDeletionLock</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN461"><span class='Ref_to_Parameter'>object</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="dependency.c.html#LN193"><span class='Ref_to_Proto'>AcquireDeletionLock</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="dependency.c.html#LN473"><span class='Ref_To_Local'>otherObject</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * The owning object might have been deleted while we waited 
                 * to lock it; if so, neither it nor the current object are 
                 * interesting anymore.  We test this by checking the 
                 * pg_depend entry (see notes below). 
                 */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../include/access/genam.h.html#LN195"><span class='Ref_to_Proto'>systable_recheck_tuple</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN471"><span class='Ref_To_Local'>scan</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN472"><span class='Ref_To_Local'>tup</span></a><span class='Parentheses'>))</span> 
                <span class='Delimiter'>{ 
</span>                    <a href="../../include/access/genam.h.html#LN196"><span class='Ref_to_Proto'>systable_endscan</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN471"><span class='Ref_To_Local'>scan</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="dependency.c.html#LN194"><span class='Ref_to_Proto'>ReleaseDeletionLock</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="dependency.c.html#LN473"><span class='Ref_To_Local'>otherObject</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>return</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * Okay, recurse to the owning object instead of proceeding. 
                 * 
                 * We do not need to stack the current object; we want the 
                 * traversal order to be as if the original reference had 
                 * linked to the owning object instead of this one. 
                 * 
                 * The dependency type is a "reverse" dependency: we need to 
                 * delete the owning object if this one is to be deleted, but 
                 * this linkage is never a reason for an automatic deletion. 
                 */ 
</span>                <a href="dependency.c.html#LN179"><span class='Ref_to_Proto'>findDependentObjects</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="dependency.c.html#LN473"><span class='Ref_To_Local'>otherObject</span></a><span class='Delimiter'>, 
</span>                                     <a href="dependency.c.html#LN104"><span class='Ref_to_Const'>DEPFLAG_REVERSE</span></a><span class='Delimiter'>, 
</span>                                     <a href="dependency.c.html#LN463"><span class='Ref_to_Parameter'>flags</span></a><span class='Delimiter'>, 
</span>                                     <a href="dependency.c.html#LN464"><span class='Ref_to_Parameter'>stack</span></a><span class='Delimiter'>, 
</span>                                     <a href="dependency.c.html#LN465"><span class='Ref_to_Parameter'>targetObjects</span></a><span class='Delimiter'>, 
</span>                                     <a href="dependency.c.html#LN466"><span class='Ref_to_Parameter'>pendingObjects</span></a><span class='Delimiter'>, 
</span>                                     <a href="dependency.c.html#LN467"><span class='Ref_to_Parameter'>depRel</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Comment_Multi_Line'>/* And we're done here. */ 
</span>                <a href="../../include/access/genam.h.html#LN196"><span class='Ref_to_Proto'>systable_endscan</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN471"><span class='Ref_To_Local'>scan</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>return</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="../../include/catalog/dependency.h.html#LN79"><span class='Ref_to_EnumConst'>DEPENDENCY_PIN</span></a><span class='Operator'>: 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * Should not happen; PIN dependencies should have zeroes in 
                 * the depender fields... 
                 */ 
</span>                <a href="../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"incorrect use of PIN dependency with %s"</span><span class='Delimiter'>, 
</span>                     <a href="../../include/catalog/objectaddress.h.html#LN70"><span class='Ref_to_Proto'>getObjectDescription</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN461"><span class='Ref_to_Parameter'>object</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>default</span><span class='Operator'>: 
</span>                <a href="../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"unrecognized dependency type '%c' for %s"</span><span class='Delimiter'>, 
</span>                     <a href="dependency.c.html#LN542"><span class='Ref_To_Local'>foundDep</span></a><span class='Operator'>-&GT;</span>deptype<span class='Delimiter'>, </span><a href="../../include/catalog/objectaddress.h.html#LN70"><span class='Ref_to_Proto'>getObjectDescription</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN461"><span class='Ref_to_Parameter'>object</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch foundDep-&GT;deptype &raquo; </span> 
    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end while HeapTupleIsValid(tup=... &raquo; </span> 
 
    <a href="../../include/access/genam.h.html#LN196"><span class='Ref_to_Proto'>systable_endscan</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN471"><span class='Ref_To_Local'>scan</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Now recurse to any dependent objects.  We must visit them first since 
     * they have to be deleted before the current object. 
     */ 
</span>    <a href="dependency.c.html#LN474"><span class='Ref_To_Local'>mystack</span></a><span class='Operator'>.</span><a href="dependency.c.html#LN121"><span class='Ref_to_Member'>object</span></a> <span class='Operator'>= </span><a href="dependency.c.html#LN461"><span class='Ref_to_Parameter'>object</span></a><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* set up a new stack level */ 
</span>    <a href="dependency.c.html#LN474"><span class='Ref_To_Local'>mystack</span></a><span class='Operator'>.</span><a href="dependency.c.html#LN122"><span class='Ref_to_Member'>flags</span></a> <span class='Operator'>= </span><a href="dependency.c.html#LN462"><span class='Ref_to_Parameter'>objflags</span></a><span class='Delimiter'>; 
</span>    <a href="dependency.c.html#LN474"><span class='Ref_To_Local'>mystack</span></a><span class='Operator'>.</span><a href="dependency.c.html#LN123"><span class='Ref_to_Member'>next</span></a> <span class='Operator'>= </span><a href="dependency.c.html#LN464"><span class='Ref_to_Parameter'>stack</span></a><span class='Delimiter'>; 
</span> 
    <a href="../access/common/scankey.c.html#LN74"><span class='Ref_to_Func'>ScanKeyInit</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="dependency.c.html#LN469"><span class='Ref_To_Local'>key</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>], 
</span>                <a href="../../include/catalog/pg_depend.h.html#LN70"><span class='Ref_to_Const'>Anum_pg_depend_refclassid</span></a><span class='Delimiter'>, 
</span>                <a href="../../include/access/stratnum.h.html#LN30"><span class='Ref_to_Const'>BTEqualStrategyNumber</span></a><span class='Delimiter'>, </span>F_OIDEQ<span class='Delimiter'>, 
</span>                <a href="../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN461"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN25"><span class='Ref_to_Member'>classId</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../access/common/scankey.c.html#LN74"><span class='Ref_to_Func'>ScanKeyInit</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="dependency.c.html#LN469"><span class='Ref_To_Local'>key</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>], 
</span>                <a href="../../include/catalog/pg_depend.h.html#LN71"><span class='Ref_to_Const'>Anum_pg_depend_refobjid</span></a><span class='Delimiter'>, 
</span>                <a href="../../include/access/stratnum.h.html#LN30"><span class='Ref_to_Const'>BTEqualStrategyNumber</span></a><span class='Delimiter'>, </span>F_OIDEQ<span class='Delimiter'>, 
</span>                <a href="../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN461"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN461"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN27"><span class='Ref_to_Member'>objectSubId</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../access/common/scankey.c.html#LN74"><span class='Ref_to_Func'>ScanKeyInit</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="dependency.c.html#LN469"><span class='Ref_To_Local'>key</span></a><span class='Delimiter'>[</span><span class='Number'>2</span><span class='Delimiter'>], 
</span>                    <a href="../../include/catalog/pg_depend.h.html#LN72"><span class='Ref_to_Const'>Anum_pg_depend_refobjsubid</span></a><span class='Delimiter'>, 
</span>                    <a href="../../include/access/stratnum.h.html#LN30"><span class='Ref_to_Const'>BTEqualStrategyNumber</span></a><span class='Delimiter'>, </span>F_INT4EQ<span class='Delimiter'>, 
</span>                    <a href="../../include/postgres.h.html#LN484"><span class='Ref_to_Macro'>Int32GetDatum</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN461"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN27"><span class='Ref_to_Member'>objectSubId</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="dependency.c.html#LN470"><span class='Ref_To_Local'>nkeys</span></a> <span class='Operator'>= </span><span class='Number'>3</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
        <a href="dependency.c.html#LN470"><span class='Ref_To_Local'>nkeys</span></a> <span class='Operator'>= </span><span class='Number'>2</span><span class='Delimiter'>; 
</span> 
    <a href="dependency.c.html#LN471"><span class='Ref_To_Local'>scan</span></a> <span class='Operator'>= </span><a href="../../include/access/genam.h.html#LN189"><span class='Ref_to_Proto'>systable_beginscan</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="dependency.c.html#LN467"><span class='Ref_to_Parameter'>depRel</span></a><span class='Delimiter'>, </span><a href="../../include/catalog/indexing.h.html#LN146"><span class='Ref_to_Const'>DependReferenceIndexId</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, 
</span>                              <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="dependency.c.html#LN470"><span class='Ref_To_Local'>nkeys</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN469"><span class='Ref_To_Local'>key</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN472"><span class='Ref_To_Local'>tup</span></a> <span class='Operator'>= </span><a href="../../include/access/genam.h.html#LN194"><span class='Ref_to_Proto'>systable_getnext</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN471"><span class='Ref_To_Local'>scan</span></a><span class='Parentheses'>)))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN727"></a>        <a href="../../include/catalog/pg_depend.h.html#LN60"><span class='Ref_to_Typedef'>Form_pg_depend</span></a> <span class='Declare_Local'>foundDep</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/catalog/pg_depend.h.html#LN60"><span class='Ref_to_Typedef'>Form_pg_depend</span></a><span class='Parentheses'>) </span><a href="../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN472"><span class='Ref_To_Local'>tup</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN728"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>subflags</span><span class='Delimiter'>; 
</span> 
        <a href="dependency.c.html#LN473"><span class='Ref_To_Local'>otherObject</span></a><span class='Operator'>.</span><a href="../../include/catalog/objectaddress.h.html#LN25"><span class='Ref_to_Member'>classId</span></a> <span class='Operator'>= </span><a href="dependency.c.html#LN727"><span class='Ref_To_Local'>foundDep</span></a><span class='Operator'>-&GT;</span>classid<span class='Delimiter'>; 
</span>        <a href="dependency.c.html#LN473"><span class='Ref_To_Local'>otherObject</span></a><span class='Operator'>.</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a> <span class='Operator'>= </span><a href="dependency.c.html#LN727"><span class='Ref_To_Local'>foundDep</span></a><span class='Operator'>-&GT;</span>objid<span class='Delimiter'>; 
</span>        <a href="dependency.c.html#LN473"><span class='Ref_To_Local'>otherObject</span></a><span class='Operator'>.</span><a href="../../include/catalog/objectaddress.h.html#LN27"><span class='Ref_to_Member'>objectSubId</span></a> <span class='Operator'>= </span><a href="dependency.c.html#LN727"><span class='Ref_To_Local'>foundDep</span></a><span class='Operator'>-&GT;</span>objsubid<span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Must lock the dependent object before recursing to it. 
         */ 
</span>        <a href="dependency.c.html#LN193"><span class='Ref_to_Proto'>AcquireDeletionLock</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="dependency.c.html#LN473"><span class='Ref_To_Local'>otherObject</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * The dependent object might have been deleted while we waited to 
         * lock it; if so, we don't need to do anything more with it. We can 
         * test this cheaply and independently of the object's type by seeing 
         * if the pg_depend tuple we are looking at is still live. (If the 
         * object got deleted, the tuple would have been deleted too.) 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../include/access/genam.h.html#LN195"><span class='Ref_to_Proto'>systable_recheck_tuple</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN471"><span class='Ref_To_Local'>scan</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN472"><span class='Ref_To_Local'>tup</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* release the now-useless lock */ 
</span>            <a href="dependency.c.html#LN194"><span class='Ref_to_Proto'>ReleaseDeletionLock</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="dependency.c.html#LN473"><span class='Ref_To_Local'>otherObject</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Comment_Multi_Line'>/* and continue scanning for dependencies */ 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Comment_Multi_Line'>/* Recurse, passing objflags indicating the dependency type */ 
</span>        <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN727"><span class='Ref_To_Local'>foundDep</span></a><span class='Operator'>-&GT;</span>deptype<span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>case</span> <a href="../../include/catalog/dependency.h.html#LN74"><span class='Ref_to_EnumConst'>DEPENDENCY_NORMAL</span></a><span class='Operator'>: 
</span>                <a href="dependency.c.html#LN728"><span class='Ref_To_Local'>subflags</span></a> <span class='Operator'>= </span><a href="dependency.c.html#LN100"><span class='Ref_to_Const'>DEPFLAG_NORMAL</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="../../include/catalog/dependency.h.html#LN75"><span class='Ref_to_EnumConst'>DEPENDENCY_AUTO</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="../../include/catalog/dependency.h.html#LN78"><span class='Ref_to_EnumConst'>DEPENDENCY_AUTO_EXTENSION</span></a><span class='Operator'>: 
</span>                <a href="dependency.c.html#LN728"><span class='Ref_To_Local'>subflags</span></a> <span class='Operator'>= </span><a href="dependency.c.html#LN101"><span class='Ref_to_Const'>DEPFLAG_AUTO</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="../../include/catalog/dependency.h.html#LN76"><span class='Ref_to_EnumConst'>DEPENDENCY_INTERNAL</span></a><span class='Operator'>: 
</span>                <a href="dependency.c.html#LN728"><span class='Ref_To_Local'>subflags</span></a> <span class='Operator'>= </span><a href="dependency.c.html#LN102"><span class='Ref_to_Const'>DEPFLAG_INTERNAL</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="../../include/catalog/dependency.h.html#LN77"><span class='Ref_to_EnumConst'>DEPENDENCY_EXTENSION</span></a><span class='Operator'>: 
</span>                <a href="dependency.c.html#LN728"><span class='Ref_To_Local'>subflags</span></a> <span class='Operator'>= </span><a href="dependency.c.html#LN103"><span class='Ref_to_Const'>DEPFLAG_EXTENSION</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="../../include/catalog/dependency.h.html#LN79"><span class='Ref_to_EnumConst'>DEPENDENCY_PIN</span></a><span class='Operator'>: 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * For a PIN dependency we just ereport immediately; there 
                 * won't be any others to report. 
                 */ 
</span>                <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_DEPENDENT_OBJECTS_STILL_EXIST<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"cannot drop %s because it is required by the database system"</span><span class='Delimiter'>, 
</span>                                <a href="../../include/catalog/objectaddress.h.html#LN70"><span class='Ref_to_Proto'>getObjectDescription</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN461"><span class='Ref_to_Parameter'>object</span></a><span class='Parentheses'>))))</span><span class='Delimiter'>; 
</span>                <a href="dependency.c.html#LN728"><span class='Ref_To_Local'>subflags</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>;</span>   <span class='Comment_Single_Line'>/* keep compiler quiet */ 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>default</span><span class='Operator'>: 
</span>                <a href="../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"unrecognized dependency type '%c' for %s"</span><span class='Delimiter'>, 
</span>                     <a href="dependency.c.html#LN727"><span class='Ref_To_Local'>foundDep</span></a><span class='Operator'>-&GT;</span>deptype<span class='Delimiter'>, </span><a href="../../include/catalog/objectaddress.h.html#LN70"><span class='Ref_to_Proto'>getObjectDescription</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN461"><span class='Ref_to_Parameter'>object</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="dependency.c.html#LN728"><span class='Ref_To_Local'>subflags</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>;</span>   <span class='Comment_Single_Line'>/* keep compiler quiet */ 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch foundDep-&GT;deptype &raquo; </span> 
 
        <a href="dependency.c.html#LN179"><span class='Ref_to_Proto'>findDependentObjects</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="dependency.c.html#LN473"><span class='Ref_To_Local'>otherObject</span></a><span class='Delimiter'>, 
</span>                             <a href="dependency.c.html#LN728"><span class='Ref_To_Local'>subflags</span></a><span class='Delimiter'>, 
</span>                             <a href="dependency.c.html#LN463"><span class='Ref_to_Parameter'>flags</span></a><span class='Delimiter'>, 
</span>                             <span class='Operator'>&</span><a href="dependency.c.html#LN474"><span class='Ref_To_Local'>mystack</span></a><span class='Delimiter'>, 
</span>                             <a href="dependency.c.html#LN465"><span class='Ref_to_Parameter'>targetObjects</span></a><span class='Delimiter'>, 
</span>                             <a href="dependency.c.html#LN466"><span class='Ref_to_Parameter'>pendingObjects</span></a><span class='Delimiter'>, 
</span>                             <a href="dependency.c.html#LN467"><span class='Ref_to_Parameter'>depRel</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end while HeapTupleIsValid(tup=... &raquo; </span> 
 
    <a href="../../include/access/genam.h.html#LN196"><span class='Ref_to_Proto'>systable_endscan</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN471"><span class='Ref_To_Local'>scan</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Finally, we can add the target object to targetObjects.  Be careful to 
     * include any flags that were passed back down to us from inner recursion 
     * levels. 
     */ 
</span>    <a href="dependency.c.html#LN475"><span class='Ref_To_Local'>extra</span></a><span class='Operator'>.</span><a href="dependency.c.html#LN94"><span class='Ref_to_Member'>flags</span></a> <span class='Operator'>= </span><a href="dependency.c.html#LN474"><span class='Ref_To_Local'>mystack</span></a><span class='Operator'>.</span><a href="dependency.c.html#LN122"><span class='Ref_to_Member'>flags</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN464"><span class='Ref_to_Parameter'>stack</span></a><span class='Parentheses'>) 
</span>        <a href="dependency.c.html#LN475"><span class='Ref_To_Local'>extra</span></a><span class='Operator'>.</span><a href="dependency.c.html#LN95"><span class='Ref_to_Member'>dependee</span></a> <span class='Operator'>= *</span><a href="dependency.c.html#LN464"><span class='Ref_to_Parameter'>stack</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN121"><span class='Ref_to_Member'>object</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        memset<span class='Parentheses'>(</span><span class='Operator'>&</span><a href="dependency.c.html#LN475"><span class='Ref_To_Local'>extra</span></a><span class='Operator'>.</span><a href="dependency.c.html#LN95"><span class='Ref_to_Member'>dependee</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="dependency.c.html#LN475"><span class='Ref_To_Local'>extra</span></a><span class='Operator'>.</span><a href="dependency.c.html#LN95"><span class='Ref_to_Member'>dependee</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="dependency.c.html#LN201"><span class='Ref_to_Proto'>add_exact_object_address_extra</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN461"><span class='Ref_to_Parameter'>object</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="dependency.c.html#LN475"><span class='Ref_To_Local'>extra</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN465"><span class='Ref_to_Parameter'>targetObjects</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end findDependentObjects &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * reportDependentObjects - report about dependencies, and fail if RESTRICT 
 * 
 * Tell the user about dependent objects that we are going to delete 
 * (or would need to delete, but are prevented by RESTRICT mode); 
 * then error out if there are any and it's not CASCADE mode. 
 * 
 *  targetObjects: list of objects that are scheduled to be deleted 
 *  behavior: RESTRICT or CASCADE 
 *  flags: other flags for the deletion operation 
 *  origObject: base object of deletion, or NULL if not available 
 *      (the latter case occurs in DROP OWNED) 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN827"></a><span class='Declare_Function'>reportDependentObjects</span><span class='Parentheses'>(</span><span class='Keyword'>const </span><a href="dependency.c.html#LN108"><span class='Ref_to_Struct'>ObjectAddresses</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>targetObjects</span><span class='Delimiter'>, 
</span><a name="LN828"></a>                       <a href="../../include/nodes/parsenodes.h.html#LN1652"><span class='Ref_to_Enum'>DropBehavior</span></a> <span class='Declare_Parameter'>behavior</span><span class='Delimiter'>, 
</span><a name="LN829"></a>                       <span class='Keyword'>int </span><span class='Declare_Parameter'>flags</span><span class='Delimiter'>, 
</span><a name="LN830"></a>                       <span class='Keyword'>const </span><a href="../../include/catalog/objectaddress.h.html#LN23"><span class='Ref_to_Struct'>ObjectAddress</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>origObject</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN832"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>msglevel</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="dependency.c.html#LN829"><span class='Ref_to_Parameter'>flags</span></a> <span class='Operator'>& </span><a href="../../include/catalog/dependency.h.html#LN175"><span class='Ref_to_Const'>PERFORM_DELETION_QUIETLY</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><a href="../../include/utils/elog.h.html#LN23"><span class='Ref_to_Const'>DEBUG2</span></a> <span class='Operator'>: </span><a href="../../include/utils/elog.h.html#LN36"><span class='Ref_to_Const'>NOTICE</span></a><span class='Delimiter'>; 
</span><a name="LN833"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>ok</span> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span><a name="LN834"></a>    <a href="../../include/lib/stringinfo.h.html#LN34"><span class='Ref_to_Struct'>StringInfoData</span></a> <span class='Declare_Local'>clientdetail</span><span class='Delimiter'>; 
</span><a name="LN835"></a>    <a href="../../include/lib/stringinfo.h.html#LN34"><span class='Ref_to_Struct'>StringInfoData</span></a> <span class='Declare_Local'>logdetail</span><span class='Delimiter'>; 
</span><a name="LN836"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>numReportedClient</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN837"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>numNotReportedClient</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN838"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If no error is to be thrown, and the msglevel is too low to be shown to 
     * either client or server log, there's no need to do any of the work. 
     * 
     * Note: this code doesn't know all there is to be known about elog 
     * levels, but it works for NOTICE and DEBUG2, which are the only values 
     * msglevel can currently have.  We also assume we are running in a normal 
     * operating environment. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN828"><span class='Ref_to_Parameter'>behavior</span></a> <span class='Operator'>== </span><a href="../../include/nodes/parsenodes.h.html#LN1655"><span class='Ref_to_EnumConst'>DROP_CASCADE</span></a> <span class='Operator'>&& 
</span>        <a href="dependency.c.html#LN832"><span class='Ref_To_Local'>msglevel</span></a> <span class='Operator'>&LT; </span><a href="../utils/misc/guc.c.html#LN451"><span class='Ref_to_Global_Var'>client_min_messages</span></a> <span class='Operator'>&& 
</span>        <span class='Parentheses'>(</span><a href="dependency.c.html#LN832"><span class='Ref_To_Local'>msglevel</span></a> <span class='Operator'>&LT; </span><a href="../utils/misc/guc.c.html#LN450"><span class='Ref_to_Global_Var'>log_min_messages</span></a> <span class='Operator'>|| </span><a href="../utils/misc/guc.c.html#LN450"><span class='Ref_to_Global_Var'>log_min_messages</span></a> <span class='Operator'>== </span><a href="../../include/utils/elog.h.html#LN25"><span class='Ref_to_Const'>LOG</span></a><span class='Parentheses'>))</span> 
        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * We limit the number of dependencies reported to the client to 
     * MAX_REPORTED_DEPS, since client software may not deal well with 
     * enormous error strings.  The server log always gets a full report. 
     */ 
</span><a name="LN859"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>MAX_REPORTED_DEPS</span> <span class='Number'>100</span> 
 
    <a href="../lib/stringinfo.c.html#LN44"><span class='Ref_to_Func'>initStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="dependency.c.html#LN834"><span class='Ref_To_Local'>clientdetail</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../lib/stringinfo.c.html#LN44"><span class='Ref_to_Func'>initStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="dependency.c.html#LN835"><span class='Ref_To_Local'>logdetail</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * We process the list back to front (ie, in dependency order not deletion 
     * order), since this makes for a more understandable display. 
     */ 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN838"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><a href="dependency.c.html#LN827"><span class='Ref_to_Parameter'>targetObjects</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN112"><span class='Ref_to_Member'>numrefs</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>; </span><a href="dependency.c.html#LN838"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="dependency.c.html#LN838"><span class='Ref_To_Local'>i</span></a><span class='Operator'>--</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN870"></a>        <span class='Keyword'>const </span><a href="../../include/catalog/objectaddress.h.html#LN23"><span class='Ref_to_Struct'>ObjectAddress</span></a> <span class='Operator'>*</span><span class='Declare_Local'>obj</span> <span class='Operator'>= &</span><a href="dependency.c.html#LN827"><span class='Ref_to_Parameter'>targetObjects</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN110"><span class='Ref_to_Member'>refs</span></a><span class='Delimiter'>[</span><a href="dependency.c.html#LN838"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span><a name="LN871"></a>        <span class='Keyword'>const </span><a href="dependency.c.html#LN92"><span class='Ref_to_Typedef'>ObjectAddressExtra</span></a> <span class='Operator'>*</span><span class='Declare_Local'>extra</span> <span class='Operator'>= &</span><a href="dependency.c.html#LN827"><span class='Ref_to_Parameter'>targetObjects</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN111"><span class='Ref_to_Member'>extras</span></a><span class='Delimiter'>[</span><a href="dependency.c.html#LN838"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span><a name="LN872"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>objDesc</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Ignore the original deletion target(s) */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN871"><span class='Ref_To_Local'>extra</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN94"><span class='Ref_to_Member'>flags</span></a> <span class='Operator'>& </span><a href="dependency.c.html#LN99"><span class='Ref_to_Const'>DEPFLAG_ORIGINAL</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
        <a href="dependency.c.html#LN872"><span class='Ref_To_Local'>objDesc</span></a> <span class='Operator'>= </span><a href="../../include/catalog/objectaddress.h.html#LN70"><span class='Ref_to_Proto'>getObjectDescription</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN870"><span class='Ref_To_Local'>obj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * If, at any stage of the recursive search, we reached the object via 
         * an AUTO, INTERNAL, or EXTENSION dependency, then it's okay to 
         * delete it even in RESTRICT mode. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN871"><span class='Ref_To_Local'>extra</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN94"><span class='Ref_to_Member'>flags</span></a> <span class='Operator'>& </span><span class='Parentheses'>(</span><a href="dependency.c.html#LN101"><span class='Ref_to_Const'>DEPFLAG_AUTO</span></a> <span class='Operator'>| 
</span>                            <a href="dependency.c.html#LN102"><span class='Ref_to_Const'>DEPFLAG_INTERNAL</span></a> <span class='Operator'>| 
</span>                            <a href="dependency.c.html#LN103"><span class='Ref_to_Const'>DEPFLAG_EXTENSION</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * auto-cascades are reported at DEBUG2, not msglevel.  We don't 
             * try to combine them with the regular message because the 
             * results are too confusing when client_min_messages and 
             * log_min_messages are different. 
             */ 
</span>            <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN23"><span class='Ref_to_Const'>DEBUG2</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"drop auto-cascades to %s"</span><span class='Delimiter'>, 
</span>                            <a href="dependency.c.html#LN872"><span class='Ref_To_Local'>objDesc</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN828"><span class='Ref_to_Parameter'>behavior</span></a> <span class='Operator'>== </span><a href="../../include/nodes/parsenodes.h.html#LN1654"><span class='Ref_to_EnumConst'>DROP_RESTRICT</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN901"></a>            <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>otherDesc</span> <span class='Operator'>= </span><a href="../../include/catalog/objectaddress.h.html#LN70"><span class='Ref_to_Proto'>getObjectDescription</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="dependency.c.html#LN871"><span class='Ref_To_Local'>extra</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN95"><span class='Ref_to_Member'>dependee</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN836"><span class='Ref_To_Local'>numReportedClient</span></a> <span class='Operator'>&LT; </span><a href="dependency.c.html#LN859"><span class='Ref_to_Const'>MAX_REPORTED_DEPS</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* separate entries with a newline */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN834"><span class='Ref_To_Local'>clientdetail</span></a><span class='Operator'>.</span><a href="../../include/lib/stringinfo.h.html#LN37"><span class='Ref_to_Member'>len</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                    <a href="../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="dependency.c.html#LN834"><span class='Ref_To_Local'>clientdetail</span></a><span class='Delimiter'>, </span><span class='String'>'\n'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="dependency.c.html#LN834"><span class='Ref_To_Local'>clientdetail</span></a><span class='Delimiter'>, </span>_<span class='Parentheses'>(</span><span class='String'>"%s depends on %s"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                 <a href="dependency.c.html#LN872"><span class='Ref_To_Local'>objDesc</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN901"><span class='Ref_To_Local'>otherDesc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="dependency.c.html#LN836"><span class='Ref_To_Local'>numReportedClient</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> 
                <a href="dependency.c.html#LN837"><span class='Ref_To_Local'>numNotReportedClient</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>            <span class='Comment_Multi_Line'>/* separate entries with a newline */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN835"><span class='Ref_To_Local'>logdetail</span></a><span class='Operator'>.</span><a href="../../include/lib/stringinfo.h.html#LN37"><span class='Ref_to_Member'>len</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                <a href="../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="dependency.c.html#LN835"><span class='Ref_To_Local'>logdetail</span></a><span class='Delimiter'>, </span><span class='String'>'\n'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="dependency.c.html#LN835"><span class='Ref_To_Local'>logdetail</span></a><span class='Delimiter'>, </span>_<span class='Parentheses'>(</span><span class='String'>"%s depends on %s"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                             <a href="dependency.c.html#LN872"><span class='Ref_To_Local'>objDesc</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN901"><span class='Ref_To_Local'>otherDesc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN901"><span class='Ref_To_Local'>otherDesc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="dependency.c.html#LN833"><span class='Ref_To_Local'>ok</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if behavior==DROP_RESTRI... &raquo; </span> 
        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN836"><span class='Ref_To_Local'>numReportedClient</span></a> <span class='Operator'>&LT; </span><a href="dependency.c.html#LN859"><span class='Ref_to_Const'>MAX_REPORTED_DEPS</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* separate entries with a newline */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN834"><span class='Ref_To_Local'>clientdetail</span></a><span class='Operator'>.</span><a href="../../include/lib/stringinfo.h.html#LN37"><span class='Ref_to_Member'>len</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                    <a href="../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="dependency.c.html#LN834"><span class='Ref_To_Local'>clientdetail</span></a><span class='Delimiter'>, </span><span class='String'>'\n'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="dependency.c.html#LN834"><span class='Ref_To_Local'>clientdetail</span></a><span class='Delimiter'>, </span>_<span class='Parentheses'>(</span><span class='String'>"drop cascades to %s"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                 <a href="dependency.c.html#LN872"><span class='Ref_To_Local'>objDesc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="dependency.c.html#LN836"><span class='Ref_To_Local'>numReportedClient</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> 
                <a href="dependency.c.html#LN837"><span class='Ref_To_Local'>numNotReportedClient</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>            <span class='Comment_Multi_Line'>/* separate entries with a newline */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN835"><span class='Ref_To_Local'>logdetail</span></a><span class='Operator'>.</span><a href="../../include/lib/stringinfo.h.html#LN37"><span class='Ref_to_Member'>len</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                <a href="../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="dependency.c.html#LN835"><span class='Ref_To_Local'>logdetail</span></a><span class='Delimiter'>, </span><span class='String'>'\n'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="dependency.c.html#LN835"><span class='Ref_To_Local'>logdetail</span></a><span class='Delimiter'>, </span>_<span class='Parentheses'>(</span><span class='String'>"drop cascades to %s"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                             <a href="dependency.c.html#LN872"><span class='Ref_To_Local'>objDesc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <a href="../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN872"><span class='Ref_To_Local'>objDesc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=targetObjects-&GT;numr... &raquo; </span> 
 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN837"><span class='Ref_To_Local'>numNotReportedClient</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <a href="../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="dependency.c.html#LN834"><span class='Ref_To_Local'>clientdetail</span></a><span class='Delimiter'>, </span><a href="../../include/c.h.html#LN126"><span class='Ref_to_Macro'>ngettext</span></a><span class='Parentheses'>(</span><span class='String'>"\nand %d other object "</span> 
                                                 <span class='String'>"(see server log for list)"</span><span class='Delimiter'>, 
</span>                                                 <span class='String'>"\nand %d other objects "</span> 
                                                 <span class='String'>"(see server log for list)"</span><span class='Delimiter'>, 
</span>                                                 <a href="dependency.c.html#LN837"><span class='Ref_To_Local'>numNotReportedClient</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="dependency.c.html#LN837"><span class='Ref_To_Local'>numNotReportedClient</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="dependency.c.html#LN833"><span class='Ref_To_Local'>ok</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN830"><span class='Ref_to_Parameter'>origObject</span></a><span class='Parentheses'>) 
</span>            <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_DEPENDENT_OBJECTS_STILL_EXIST<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                  <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"cannot drop %s because other objects depend on it"</span><span class='Delimiter'>, 
</span>                         <a href="../../include/catalog/objectaddress.h.html#LN70"><span class='Ref_to_Proto'>getObjectDescription</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN830"><span class='Ref_to_Parameter'>origObject</span></a><span class='Parentheses'>))</span><span class='Delimiter'>, 
</span>                     <a href="../utils/error/elog.c.html#LN871"><span class='Ref_to_Func'>errdetail</span></a><span class='Parentheses'>(</span><span class='String'>"%s"</span><span class='Delimiter'>, </span><a href="dependency.c.html#LN834"><span class='Ref_To_Local'>clientdetail</span></a><span class='Operator'>.</span><a href="../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../utils/error/elog.c.html#LN919"><span class='Ref_to_Func'>errdetail_log</span></a><span class='Parentheses'>(</span><span class='String'>"%s"</span><span class='Delimiter'>, </span><a href="dependency.c.html#LN835"><span class='Ref_To_Local'>logdetail</span></a><span class='Operator'>.</span><a href="../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../utils/error/elog.c.html#LN985"><span class='Ref_to_Func'>errhint</span></a><span class='Parentheses'>(</span><span class='String'>"Use DROP ... CASCADE to drop the dependent objects too."</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_DEPENDENT_OBJECTS_STILL_EXIST<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"cannot drop desired object(s) because other objects depend on them"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../utils/error/elog.c.html#LN871"><span class='Ref_to_Func'>errdetail</span></a><span class='Parentheses'>(</span><span class='String'>"%s"</span><span class='Delimiter'>, </span><a href="dependency.c.html#LN834"><span class='Ref_To_Local'>clientdetail</span></a><span class='Operator'>.</span><a href="../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../utils/error/elog.c.html#LN919"><span class='Ref_to_Func'>errdetail_log</span></a><span class='Parentheses'>(</span><span class='String'>"%s"</span><span class='Delimiter'>, </span><a href="dependency.c.html#LN835"><span class='Ref_To_Local'>logdetail</span></a><span class='Operator'>.</span><a href="../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../utils/error/elog.c.html#LN985"><span class='Ref_to_Func'>errhint</span></a><span class='Parentheses'>(</span><span class='String'>"Use DROP ... CASCADE to drop the dependent objects too."</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN836"><span class='Ref_To_Local'>numReportedClient</span></a> <span class='Operator'>&GT; </span><span class='Number'>1</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN832"><span class='Ref_To_Local'>msglevel</span></a><span class='Delimiter'>, 
</span>        <span class='Comment_Multi_Line'>/* translator: %d always has a value larger than 1 */ 
</span>                <span class='Parentheses'>(</span><a href="../utils/error/elog.c.html#LN848"><span class='Ref_to_Func'>errmsg_plural</span></a><span class='Parentheses'>(</span><span class='String'>"drop cascades to %d other object"</span><span class='Delimiter'>, 
</span>                               <span class='String'>"drop cascades to %d other objects"</span><span class='Delimiter'>, 
</span>                               <a href="dependency.c.html#LN836"><span class='Ref_To_Local'>numReportedClient</span></a> <span class='Operator'>+ </span><a href="dependency.c.html#LN837"><span class='Ref_To_Local'>numNotReportedClient</span></a><span class='Delimiter'>, 
</span>                               <a href="dependency.c.html#LN836"><span class='Ref_To_Local'>numReportedClient</span></a> <span class='Operator'>+ </span><a href="dependency.c.html#LN837"><span class='Ref_To_Local'>numNotReportedClient</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../utils/error/elog.c.html#LN871"><span class='Ref_to_Func'>errdetail</span></a><span class='Parentheses'>(</span><span class='String'>"%s"</span><span class='Delimiter'>, </span><a href="dependency.c.html#LN834"><span class='Ref_To_Local'>clientdetail</span></a><span class='Operator'>.</span><a href="../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../utils/error/elog.c.html#LN919"><span class='Ref_to_Func'>errdetail_log</span></a><span class='Parentheses'>(</span><span class='String'>"%s"</span><span class='Delimiter'>, </span><a href="dependency.c.html#LN835"><span class='Ref_To_Local'>logdetail</span></a><span class='Operator'>.</span><a href="../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN836"><span class='Ref_To_Local'>numReportedClient</span></a> <span class='Operator'>== </span><span class='Number'>1</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* we just use the single item as-is */ 
</span>        <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN832"><span class='Ref_To_Local'>msglevel</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../utils/error/elog.c.html#LN825"><span class='Ref_to_Func'>errmsg_internal</span></a><span class='Parentheses'>(</span><span class='String'>"%s"</span><span class='Delimiter'>, </span><a href="dependency.c.html#LN834"><span class='Ref_To_Local'>clientdetail</span></a><span class='Operator'>.</span><a href="../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN834"><span class='Ref_To_Local'>clientdetail</span></a><span class='Operator'>.</span><a href="../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN835"><span class='Ref_To_Local'>logdetail</span></a><span class='Operator'>.</span><a href="../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end reportDependentObjects &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * deleteOneObject: delete a single object for performDeletion. 
 * 
 * *depRel is the already-open pg_depend relation. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN999"></a><span class='Declare_Function'>deleteOneObject</span><span class='Parentheses'>(</span><span class='Keyword'>const </span><a href="../../include/catalog/objectaddress.h.html#LN23"><span class='Ref_to_Struct'>ObjectAddress</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>object</span><span class='Delimiter'>, </span><a href="../../include/utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>depRel</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>flags</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1001"></a>    <a href="../../include/access/skey.h.html#LN63"><span class='Ref_to_Struct'>ScanKeyData</span></a> <span class='Declare_Local'>key</span><span class='Delimiter'>[</span><span class='Number'>3</span><span class='Delimiter'>]; 
</span><a name="LN1002"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>nkeys</span><span class='Delimiter'>; 
</span><a name="LN1003"></a>    <a href="../../include/access/genam.h.html#LN86"><span class='Ref_to_Typedef'>SysScanDesc</span></a> <span class='Declare_Local'>scan</span><span class='Delimiter'>; 
</span><a name="LN1004"></a>    <a href="../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tup</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* DROP hook of the objects being removed */ 
</span>    <a href="../../include/catalog/objectaccess.h.html#LN155"><span class='Ref_to_Macro'>InvokeObjectDropHookArg</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN999"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN25"><span class='Ref_to_Member'>classId</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN999"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a><span class='Delimiter'>, 
</span>                            <a href="dependency.c.html#LN999"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN27"><span class='Ref_to_Member'>objectSubId</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN999"><span class='Ref_to_Parameter'>flags</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Close depRel if we are doing a drop concurrently.  The object deletion 
     * subroutine will commit the current transaction, so we can't keep the 
     * relation open across doDeletion(). 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN999"><span class='Ref_to_Parameter'>flags</span></a> <span class='Operator'>& </span><a href="../../include/catalog/dependency.h.html#LN174"><span class='Ref_to_Const'>PERFORM_DELETION_CONCURRENTLY</span></a><span class='Parentheses'>) 
</span>        <a href="../../include/access/heapam.h.html#LN96"><span class='Ref_to_Macro'>heap_close</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="dependency.c.html#LN999"><span class='Ref_to_Parameter'>depRel</span></a><span class='Delimiter'>, </span><a href="../../include/storage/lockdefs.h.html#LN37"><span class='Ref_to_Const'>RowExclusiveLock</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Delete the object itself, in an object-type-dependent way. 
     * 
     * We used to do this after removing the outgoing dependency links, but it 
     * seems just as reasonable to do it beforehand.  In the concurrent case 
     * we *must* do it in this order, because we can't make any transactional 
     * updates before calling doDeletion() --- they'd get committed right 
     * away, which is not cool if the deletion then fails. 
     */ 
</span>    <a href="dependency.c.html#LN192"><span class='Ref_to_Proto'>doDeletion</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN999"><span class='Ref_to_Parameter'>object</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN999"><span class='Ref_to_Parameter'>flags</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Reopen depRel if we closed it above 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN999"><span class='Ref_to_Parameter'>flags</span></a> <span class='Operator'>& </span><a href="../../include/catalog/dependency.h.html#LN174"><span class='Ref_to_Const'>PERFORM_DELETION_CONCURRENTLY</span></a><span class='Parentheses'>) 
</span>        <span class='Operator'>*</span><a href="dependency.c.html#LN999"><span class='Ref_to_Parameter'>depRel</span></a> <span class='Operator'>= </span><a href="../../include/access/heapam.h.html#LN91"><span class='Ref_to_Proto'>heap_open</span></a><span class='Parentheses'>(</span><a href="../../include/catalog/pg_depend.h.html#LN28"><span class='Ref_to_Const'>DependRelationId</span></a><span class='Delimiter'>, </span><a href="../../include/storage/lockdefs.h.html#LN37"><span class='Ref_to_Const'>RowExclusiveLock</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Now remove any pg_depend records that link from this object to others. 
     * (Any records linking to this object should be gone already.) 
     * 
     * When dropping a whole object (subId = 0), remove all pg_depend records 
     * for its sub-objects too. 
     */ 
</span>    <a href="../access/common/scankey.c.html#LN74"><span class='Ref_to_Func'>ScanKeyInit</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="dependency.c.html#LN1001"><span class='Ref_To_Local'>key</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>], 
</span>                <a href="../../include/catalog/pg_depend.h.html#LN67"><span class='Ref_to_Const'>Anum_pg_depend_classid</span></a><span class='Delimiter'>, 
</span>                <a href="../../include/access/stratnum.h.html#LN30"><span class='Ref_to_Const'>BTEqualStrategyNumber</span></a><span class='Delimiter'>, </span>F_OIDEQ<span class='Delimiter'>, 
</span>                <a href="../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN999"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN25"><span class='Ref_to_Member'>classId</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../access/common/scankey.c.html#LN74"><span class='Ref_to_Func'>ScanKeyInit</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="dependency.c.html#LN1001"><span class='Ref_To_Local'>key</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>], 
</span>                <a href="../../include/catalog/pg_depend.h.html#LN68"><span class='Ref_to_Const'>Anum_pg_depend_objid</span></a><span class='Delimiter'>, 
</span>                <a href="../../include/access/stratnum.h.html#LN30"><span class='Ref_to_Const'>BTEqualStrategyNumber</span></a><span class='Delimiter'>, </span>F_OIDEQ<span class='Delimiter'>, 
</span>                <a href="../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN999"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN999"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN27"><span class='Ref_to_Member'>objectSubId</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../access/common/scankey.c.html#LN74"><span class='Ref_to_Func'>ScanKeyInit</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="dependency.c.html#LN1001"><span class='Ref_To_Local'>key</span></a><span class='Delimiter'>[</span><span class='Number'>2</span><span class='Delimiter'>], 
</span>                    <a href="../../include/catalog/pg_depend.h.html#LN69"><span class='Ref_to_Const'>Anum_pg_depend_objsubid</span></a><span class='Delimiter'>, 
</span>                    <a href="../../include/access/stratnum.h.html#LN30"><span class='Ref_to_Const'>BTEqualStrategyNumber</span></a><span class='Delimiter'>, </span>F_INT4EQ<span class='Delimiter'>, 
</span>                    <a href="../../include/postgres.h.html#LN484"><span class='Ref_to_Macro'>Int32GetDatum</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN999"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN27"><span class='Ref_to_Member'>objectSubId</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="dependency.c.html#LN1002"><span class='Ref_To_Local'>nkeys</span></a> <span class='Operator'>= </span><span class='Number'>3</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
        <a href="dependency.c.html#LN1002"><span class='Ref_To_Local'>nkeys</span></a> <span class='Operator'>= </span><span class='Number'>2</span><span class='Delimiter'>; 
</span> 
    <a href="dependency.c.html#LN1003"><span class='Ref_To_Local'>scan</span></a> <span class='Operator'>= </span><a href="../../include/access/genam.h.html#LN189"><span class='Ref_to_Proto'>systable_beginscan</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="dependency.c.html#LN999"><span class='Ref_to_Parameter'>depRel</span></a><span class='Delimiter'>, </span><a href="../../include/catalog/indexing.h.html#LN144"><span class='Ref_to_Const'>DependDependerIndexId</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, 
</span>                              <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="dependency.c.html#LN1002"><span class='Ref_To_Local'>nkeys</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN1001"><span class='Ref_To_Local'>key</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1004"><span class='Ref_To_Local'>tup</span></a> <span class='Operator'>= </span><a href="../../include/access/genam.h.html#LN194"><span class='Ref_to_Proto'>systable_getnext</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1003"><span class='Ref_To_Local'>scan</span></a><span class='Parentheses'>)))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../include/catalog/indexing.h.html#LN40"><span class='Ref_to_Proto'>CatalogTupleDelete</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="dependency.c.html#LN999"><span class='Ref_to_Parameter'>depRel</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="dependency.c.html#LN1004"><span class='Ref_To_Local'>tup</span></a><span class='Operator'>-&GT;</span><a href="../../include/access/htup.h.html#LN64"><span class='Ref_to_Member'>t_self</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../include/access/genam.h.html#LN196"><span class='Ref_to_Proto'>systable_endscan</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1003"><span class='Ref_To_Local'>scan</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Delete shared dependency references related to this object.  Again, if 
     * subId = 0, remove records for sub-objects too. 
     */ 
</span>    <a href="../../include/catalog/dependency.h.html#LN254"><span class='Ref_to_Proto'>deleteSharedDependencyRecordsFor</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN999"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN25"><span class='Ref_to_Member'>classId</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN999"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a><span class='Delimiter'>, 
</span>                                     <a href="dependency.c.html#LN999"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN27"><span class='Ref_to_Member'>objectSubId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
 
    <span class='Comment_Multi_Line'>/* 
     * Delete any comments, security labels, or initial privileges associated 
     * with this object.  (This is a convenient place to do these things, 
     * rather than having every object type know to do it.) 
     */ 
</span>    <a href="../../include/commands/comment.h.html#LN34"><span class='Ref_to_Proto'>DeleteComments</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN999"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN999"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN25"><span class='Ref_to_Member'>classId</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN999"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN27"><span class='Ref_to_Member'>objectSubId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../include/commands/seclabel.h.html#LN20"><span class='Ref_to_Proto'>DeleteSecurityLabel</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN999"><span class='Ref_to_Parameter'>object</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="dependency.c.html#LN210"><span class='Ref_to_Proto'>DeleteInitPrivs</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN999"><span class='Ref_to_Parameter'>object</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * CommandCounterIncrement here to ensure that preceding changes are all 
     * visible to the next deletion step. 
     */ 
</span>    <a href="../../include/access/xact.h.html#LN346"><span class='Ref_to_Proto'>CommandCounterIncrement</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * And we're done! 
     */ 
</span><span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end deleteOneObject &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * doDeletion: actually delete a single object 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN1103"></a><span class='Declare_Function'>doDeletion</span><span class='Parentheses'>(</span><span class='Keyword'>const </span><a href="../../include/catalog/objectaddress.h.html#LN23"><span class='Ref_to_Struct'>ObjectAddress</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>object</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>flags</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="../../include/catalog/dependency.h.html#LN198"><span class='Ref_to_Proto'>getObjectClass</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1103"><span class='Ref_to_Parameter'>object</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>case</span> <a href="../../include/catalog/dependency.h.html#LN130"><span class='Ref_to_EnumConst'>OCLASS_CLASS</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN1109"></a>                <span class='Keyword'>char</span>        <span class='Declare_Local'>relKind</span> <span class='Operator'>= </span><a href="../../include/utils/lsyscache.h.html#LN127"><span class='Ref_to_Proto'>get_rel_relkind</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1103"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN1109"><span class='Ref_To_Local'>relKind</span></a> <span class='Operator'>== </span><a href="../../include/catalog/pg_class.h.html#LN160"><span class='Ref_to_Const'>RELKIND_INDEX</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span><a name="LN1113"></a>                    <span class='Keyword'>bool</span>        <span class='Declare_Local'>concurrent</span> <span class='Operator'>= </span><span class='Parentheses'>((</span><a href="dependency.c.html#LN1103"><span class='Ref_to_Parameter'>flags</span></a> <span class='Operator'>& </span><a href="../../include/catalog/dependency.h.html#LN174"><span class='Ref_to_Const'>PERFORM_DELETION_CONCURRENTLY</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="dependency.c.html#LN1103"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN27"><span class='Ref_to_Member'>objectSubId</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="../../include/catalog/index.h.html#LN79"><span class='Ref_to_Proto'>index_drop</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1103"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN1113"><span class='Ref_To_Local'>concurrent</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>else</span> 
                <span class='Delimiter'>{ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN1103"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN27"><span class='Ref_to_Member'>objectSubId</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                        <a href="../../include/catalog/heap.h.html#LN116"><span class='Ref_to_Proto'>RemoveAttributeById</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1103"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a><span class='Delimiter'>, 
</span>                                            <a href="dependency.c.html#LN1103"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN27"><span class='Ref_to_Member'>objectSubId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>else</span> 
                        <a href="../../include/catalog/heap.h.html#LN77"><span class='Ref_to_Proto'>heap_drop_with_catalog</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1103"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * for a sequence, in addition to dropping the heap, also 
                 * delete pg_sequence tuple 
                 */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN1109"><span class='Ref_To_Local'>relKind</span></a> <span class='Operator'>== </span><a href="../../include/catalog/pg_class.h.html#LN161"><span class='Ref_to_Const'>RELKIND_SEQUENCE</span></a><span class='Parentheses'>) 
</span>                    <a href="../../include/commands/sequence.h.html#LN59"><span class='Ref_to_Proto'>DeleteSequenceTuple</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1103"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/dependency.h.html#LN131"><span class='Ref_to_EnumConst'>OCLASS_PROC</span></a><span class='Operator'>: 
</span>            <a href="../../include/commands/defrem.h.html#LN50"><span class='Ref_to_Proto'>RemoveFunctionById</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1103"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/dependency.h.html#LN132"><span class='Ref_to_EnumConst'>OCLASS_TYPE</span></a><span class='Operator'>: 
</span>            <a href="../../include/commands/typecmds.h.html#LN24"><span class='Ref_to_Proto'>RemoveTypeById</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1103"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/dependency.h.html#LN133"><span class='Ref_to_EnumConst'>OCLASS_CAST</span></a><span class='Operator'>: 
</span>            <a href="../../include/commands/defrem.h.html#LN55"><span class='Ref_to_Proto'>DropCastById</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1103"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/dependency.h.html#LN134"><span class='Ref_to_EnumConst'>OCLASS_COLLATION</span></a><span class='Operator'>: 
</span>            <a href="../../include/catalog/pg_collation_fn.h.html#LN23"><span class='Ref_to_Proto'>RemoveCollationById</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1103"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/dependency.h.html#LN135"><span class='Ref_to_EnumConst'>OCLASS_CONSTRAINT</span></a><span class='Operator'>: 
</span>            <a href="../../include/catalog/pg_constraint_fn.h.html#LN58"><span class='Ref_to_Proto'>RemoveConstraintById</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1103"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/dependency.h.html#LN136"><span class='Ref_to_EnumConst'>OCLASS_CONVERSION</span></a><span class='Operator'>: 
</span>            <a href="../../include/catalog/pg_conversion_fn.h.html#LN23"><span class='Ref_to_Proto'>RemoveConversionById</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1103"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/dependency.h.html#LN137"><span class='Ref_to_EnumConst'>OCLASS_DEFAULT</span></a><span class='Operator'>: 
</span>            <a href="../../include/catalog/heap.h.html#LN119"><span class='Ref_to_Proto'>RemoveAttrDefaultById</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1103"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/dependency.h.html#LN138"><span class='Ref_to_EnumConst'>OCLASS_LANGUAGE</span></a><span class='Operator'>: 
</span>            <a href="../../include/commands/proclang.h.html#LN18"><span class='Ref_to_Proto'>DropProceduralLanguageById</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1103"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/dependency.h.html#LN139"><span class='Ref_to_EnumConst'>OCLASS_LARGEOBJECT</span></a><span class='Operator'>: 
</span>            <a href="../../include/catalog/pg_largeobject.h.html#LN56"><span class='Ref_to_Proto'>LargeObjectDrop</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1103"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/dependency.h.html#LN140"><span class='Ref_to_EnumConst'>OCLASS_OPERATOR</span></a><span class='Operator'>: 
</span>            <a href="../../include/commands/defrem.h.html#LN77"><span class='Ref_to_Proto'>RemoveOperatorById</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1103"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/dependency.h.html#LN141"><span class='Ref_to_EnumConst'>OCLASS_OPCLASS</span></a><span class='Operator'>: 
</span>            <a href="../../include/commands/defrem.h.html#LN95"><span class='Ref_to_Proto'>RemoveOpClassById</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1103"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/dependency.h.html#LN142"><span class='Ref_to_EnumConst'>OCLASS_OPFAMILY</span></a><span class='Operator'>: 
</span>            <a href="../../include/commands/defrem.h.html#LN96"><span class='Ref_to_Proto'>RemoveOpFamilyById</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1103"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/dependency.h.html#LN143"><span class='Ref_to_EnumConst'>OCLASS_AM</span></a><span class='Operator'>: 
</span>            <a href="../commands/amcmds.c.html#LN113"><span class='Ref_to_Func'>RemoveAccessMethodById</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1103"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/dependency.h.html#LN144"><span class='Ref_to_EnumConst'>OCLASS_AMOP</span></a><span class='Operator'>: 
</span>            <a href="../../include/commands/defrem.h.html#LN97"><span class='Ref_to_Proto'>RemoveAmOpEntryById</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1103"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/dependency.h.html#LN145"><span class='Ref_to_EnumConst'>OCLASS_AMPROC</span></a><span class='Operator'>: 
</span>            <a href="../../include/commands/defrem.h.html#LN98"><span class='Ref_to_Proto'>RemoveAmProcEntryById</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1103"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/dependency.h.html#LN146"><span class='Ref_to_EnumConst'>OCLASS_REWRITE</span></a><span class='Operator'>: 
</span>            <a href="../../include/rewrite/rewriteRemove.h.html#LN18"><span class='Ref_to_Proto'>RemoveRewriteRuleById</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1103"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/dependency.h.html#LN147"><span class='Ref_to_EnumConst'>OCLASS_TRIGGER</span></a><span class='Operator'>: 
</span>            <a href="../../include/commands/trigger.h.html#LN117"><span class='Ref_to_Proto'>RemoveTriggerById</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1103"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/dependency.h.html#LN148"><span class='Ref_to_EnumConst'>OCLASS_SCHEMA</span></a><span class='Operator'>: 
</span>            <a href="../../include/commands/schemacmds.h.html#LN24"><span class='Ref_to_Proto'>RemoveSchemaById</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1103"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/dependency.h.html#LN149"><span class='Ref_to_EnumConst'>OCLASS_STATISTIC_EXT</span></a><span class='Operator'>: 
</span>            <a href="../../include/commands/defrem.h.html#LN82"><span class='Ref_to_Proto'>RemoveStatisticsById</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1103"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/dependency.h.html#LN150"><span class='Ref_to_EnumConst'>OCLASS_TSPARSER</span></a><span class='Operator'>: 
</span>            <a href="../../include/commands/defrem.h.html#LN108"><span class='Ref_to_Proto'>RemoveTSParserById</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1103"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/dependency.h.html#LN151"><span class='Ref_to_EnumConst'>OCLASS_TSDICT</span></a><span class='Operator'>: 
</span>            <a href="../../include/commands/defrem.h.html#LN111"><span class='Ref_to_Proto'>RemoveTSDictionaryById</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1103"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/dependency.h.html#LN152"><span class='Ref_to_EnumConst'>OCLASS_TSTEMPLATE</span></a><span class='Operator'>: 
</span>            <a href="../../include/commands/defrem.h.html#LN115"><span class='Ref_to_Proto'>RemoveTSTemplateById</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1103"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/dependency.h.html#LN153"><span class='Ref_to_EnumConst'>OCLASS_TSCONFIG</span></a><span class='Operator'>: 
</span>            <a href="../../include/commands/defrem.h.html#LN119"><span class='Ref_to_Proto'>RemoveTSConfigurationById</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1103"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * OCLASS_ROLE, OCLASS_DATABASE, OCLASS_TBLSPACE intentionally not 
             * handled here 
             */ 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/dependency.h.html#LN157"><span class='Ref_to_EnumConst'>OCLASS_FDW</span></a><span class='Operator'>: 
</span>            <a href="../../include/commands/defrem.h.html#LN132"><span class='Ref_to_Proto'>RemoveForeignDataWrapperById</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1103"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/dependency.h.html#LN158"><span class='Ref_to_EnumConst'>OCLASS_FOREIGN_SERVER</span></a><span class='Operator'>: 
</span>            <a href="../../include/commands/defrem.h.html#LN135"><span class='Ref_to_Proto'>RemoveForeignServerById</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1103"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/dependency.h.html#LN159"><span class='Ref_to_EnumConst'>OCLASS_USER_MAPPING</span></a><span class='Operator'>: 
</span>            <a href="../../include/commands/defrem.h.html#LN139"><span class='Ref_to_Proto'>RemoveUserMappingById</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1103"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/dependency.h.html#LN160"><span class='Ref_to_EnumConst'>OCLASS_DEFACL</span></a><span class='Operator'>: 
</span>            <a href="../../include/utils/acl.h.html#LN254"><span class='Ref_to_Proto'>RemoveDefaultACLById</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1103"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/dependency.h.html#LN161"><span class='Ref_to_EnumConst'>OCLASS_EXTENSION</span></a><span class='Operator'>: 
</span>            <a href="../../include/commands/extension.h.html#LN35"><span class='Ref_to_Proto'>RemoveExtensionById</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1103"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/dependency.h.html#LN162"><span class='Ref_to_EnumConst'>OCLASS_EVENT_TRIGGER</span></a><span class='Operator'>: 
</span>            <a href="../../include/commands/event_trigger.h.html#LN43"><span class='Ref_to_Proto'>RemoveEventTriggerById</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1103"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/dependency.h.html#LN163"><span class='Ref_to_EnumConst'>OCLASS_POLICY</span></a><span class='Operator'>: 
</span>            <a href="../../include/commands/policy.h.html#LN23"><span class='Ref_to_Proto'>RemovePolicyById</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1103"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/dependency.h.html#LN164"><span class='Ref_to_EnumConst'>OCLASS_PUBLICATION</span></a><span class='Operator'>: 
</span>            <a href="../../include/commands/publicationcmds.h.html#LN22"><span class='Ref_to_Proto'>RemovePublicationById</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1103"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/dependency.h.html#LN165"><span class='Ref_to_EnumConst'>OCLASS_PUBLICATION_REL</span></a><span class='Operator'>: 
</span>            <a href="../../include/commands/publicationcmds.h.html#LN23"><span class='Ref_to_Proto'>RemovePublicationRelById</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1103"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/dependency.h.html#LN167"><span class='Ref_to_EnumConst'>OCLASS_TRANSFORM</span></a><span class='Operator'>: 
</span>            <a href="../../include/commands/defrem.h.html#LN57"><span class='Ref_to_Proto'>DropTransformById</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1103"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * These global object types are not supported here. 
             */ 
</span>        <span class='Control'>case</span> <a href="../../include/catalog/dependency.h.html#LN154"><span class='Ref_to_EnumConst'>OCLASS_ROLE</span></a><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="../../include/catalog/dependency.h.html#LN155"><span class='Ref_to_EnumConst'>OCLASS_DATABASE</span></a><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="../../include/catalog/dependency.h.html#LN156"><span class='Ref_to_EnumConst'>OCLASS_TBLSPACE</span></a><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="../../include/catalog/dependency.h.html#LN166"><span class='Ref_to_EnumConst'>OCLASS_SUBSCRIPTION</span></a><span class='Operator'>: 
</span>            <a href="../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"global objects cannot be deleted by doDeletion"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * There's intentionally no default: case here; we want the 
             * compiler to warn if a new OCLASS hasn't been handled above. 
             */ 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch getObjectClass(object... &raquo; </span> 
<span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end doDeletion &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * AcquireDeletionLock - acquire a suitable lock for deleting an object 
 * 
 * We use LockRelation for relations, LockDatabaseObject for everything 
 * else.  Note that dependency.c is not concerned with deleting any kind of 
 * shared-across-databases object, so we have no need for LockSharedObject. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN1298"></a><span class='Declare_Function'>AcquireDeletionLock</span><span class='Parentheses'>(</span><span class='Keyword'>const </span><a href="../../include/catalog/objectaddress.h.html#LN23"><span class='Ref_to_Struct'>ObjectAddress</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>object</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>flags</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN1298"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN25"><span class='Ref_to_Member'>classId</span></a> <span class='Operator'>== </span><a href="../../include/catalog/pg_class.h.html#LN28"><span class='Ref_to_Const'>RelationRelationId</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * In DROP INDEX CONCURRENTLY, take only ShareUpdateExclusiveLock on 
         * the index for the moment.  index_drop() will promote the lock once 
         * it's safe to do so.  In all other cases we need full exclusive 
         * lock. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN1298"><span class='Ref_to_Parameter'>flags</span></a> <span class='Operator'>& </span><a href="../../include/catalog/dependency.h.html#LN174"><span class='Ref_to_Const'>PERFORM_DELETION_CONCURRENTLY</span></a><span class='Parentheses'>) 
</span>            <a href="../../include/storage/lmgr.h.html#LN39"><span class='Ref_to_Proto'>LockRelationOid</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1298"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a><span class='Delimiter'>, </span><a href="../../include/storage/lockdefs.h.html#LN38"><span class='Ref_to_Const'>ShareUpdateExclusiveLock</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="../../include/storage/lmgr.h.html#LN39"><span class='Ref_to_Proto'>LockRelationOid</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1298"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a><span class='Delimiter'>, </span><a href="../../include/storage/lockdefs.h.html#LN45"><span class='Ref_to_Const'>AccessExclusiveLock</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* assume we should lock the whole object not a sub-object */ 
</span>        <a href="../../include/storage/lmgr.h.html#LN87"><span class='Ref_to_Proto'>LockDatabaseObject</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1298"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN25"><span class='Ref_to_Member'>classId</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN1298"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                           <a href="../../include/storage/lockdefs.h.html#LN45"><span class='Ref_to_Const'>AccessExclusiveLock</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
}</span><span class='Auto_Annotations'> &laquo; end AcquireDeletionLock &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * ReleaseDeletionLock - release an object deletion lock 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN1325"></a><span class='Declare_Function'>ReleaseDeletionLock</span><span class='Parentheses'>(</span><span class='Keyword'>const </span><a href="../../include/catalog/objectaddress.h.html#LN23"><span class='Ref_to_Struct'>ObjectAddress</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>object</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN1325"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN25"><span class='Ref_to_Member'>classId</span></a> <span class='Operator'>== </span><a href="../../include/catalog/pg_class.h.html#LN28"><span class='Ref_to_Const'>RelationRelationId</span></a><span class='Parentheses'>) 
</span>        <a href="../../include/storage/lmgr.h.html#LN42"><span class='Ref_to_Proto'>UnlockRelationOid</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1325"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a><span class='Delimiter'>, </span><a href="../../include/storage/lockdefs.h.html#LN45"><span class='Ref_to_Const'>AccessExclusiveLock</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <span class='Comment_Multi_Line'>/* assume we should lock the whole object not a sub-object */ 
</span>        <a href="../../include/storage/lmgr.h.html#LN89"><span class='Ref_to_Proto'>UnlockDatabaseObject</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1325"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN25"><span class='Ref_to_Member'>classId</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN1325"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                             <a href="../../include/storage/lockdefs.h.html#LN45"><span class='Ref_to_Const'>AccessExclusiveLock</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * recordDependencyOnExpr - find expression dependencies 
 * 
 * This is used to find the dependencies of rules, constraint expressions, 
 * etc. 
 * 
 * Given an expression or query in node-tree form, find all the objects 
 * it refers to (tables, columns, operators, functions, etc).  Record 
 * a dependency of the specified type from the given depender object 
 * to each object mentioned in the expression. 
 * 
 * rtable is the rangetable to be used to interpret Vars with varlevelsup=0. 
 * It can be NIL if no such variables are expected. 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN1350"></a><span class='Declare_Function'>recordDependencyOnExpr</span><span class='Parentheses'>(</span><span class='Keyword'>const </span><a href="../../include/catalog/objectaddress.h.html#LN23"><span class='Ref_to_Struct'>ObjectAddress</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>depender</span><span class='Delimiter'>, 
</span><a name="LN1351"></a>                       <a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>expr</span><span class='Delimiter'>, </span><a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rtable</span><span class='Delimiter'>, 
</span><a name="LN1352"></a>                       <a href="../../include/catalog/dependency.h.html#LN72"><span class='Ref_to_Enum'>DependencyType</span></a> <span class='Declare_Parameter'>behavior</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1354"></a>    <a href="dependency.c.html#LN127"><span class='Ref_to_Typedef'>find_expr_references_context</span></a> <span class='Declare_Local'>context</span><span class='Delimiter'>; 
</span> 
    <a href="dependency.c.html#LN1354"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="dependency.c.html#LN129"><span class='Ref_to_Member'>addrs</span></a> <span class='Operator'>= </span><a href="../../include/catalog/dependency.h.html#LN200"><span class='Ref_to_Proto'>new_object_addresses</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Set up interpretation for Vars at varlevelsup = 0 */ 
</span>    <a href="dependency.c.html#LN1354"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="dependency.c.html#LN130"><span class='Ref_to_Member'>rtables</span></a> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN138"><span class='Ref_to_Macro'>list_make1</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1351"><span class='Ref_to_Parameter'>rtable</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Scan the expression tree for referenceable objects */ 
</span>    <a href="dependency.c.html#LN195"><span class='Ref_to_Proto'>find_expr_references_walker</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1351"><span class='Ref_to_Parameter'>expr</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="dependency.c.html#LN1354"><span class='Ref_To_Local'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Remove any duplicates */ 
</span>    <a href="dependency.c.html#LN197"><span class='Ref_to_Proto'>eliminate_duplicate_dependencies</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1354"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="dependency.c.html#LN129"><span class='Ref_to_Member'>addrs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* And record 'em */ 
</span>    <a href="pg_depend.c.html#LN54"><span class='Ref_to_Func'>recordMultipleDependencies</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1350"><span class='Ref_to_Parameter'>depender</span></a><span class='Delimiter'>, 
</span>                               <a href="dependency.c.html#LN1354"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="dependency.c.html#LN129"><span class='Ref_to_Member'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN110"><span class='Ref_to_Member'>refs</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN1354"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="dependency.c.html#LN129"><span class='Ref_to_Member'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN112"><span class='Ref_to_Member'>numrefs</span></a><span class='Delimiter'>, 
</span>                               <a href="dependency.c.html#LN1352"><span class='Ref_to_Parameter'>behavior</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../include/catalog/dependency.h.html#LN212"><span class='Ref_to_Proto'>free_object_addresses</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1354"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="dependency.c.html#LN129"><span class='Ref_to_Member'>addrs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end recordDependencyOnExpr &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * recordDependencyOnSingleRelExpr - find expression dependencies 
 * 
 * As above, but only one relation is expected to be referenced (with 
 * varno = 1 and varlevelsup = 0).  Pass the relation OID instead of a 
 * range table.  An additional frammish is that dependencies on that 
 * relation (or its component columns) will be marked with 'self_behavior', 
 * whereas 'behavior' is used for everything else. 
 * 
 * NOTE: the caller should ensure that a whole-table dependency on the 
 * specified relation is created separately, if one is needed.  In particular, 
 * a whole-row Var "relation.*" will not cause this routine to emit any 
 * dependency item.  This is appropriate behavior for subexpressions of an 
 * ordinary query, so other cases need to cope as necessary. 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN1391"></a><span class='Declare_Function'>recordDependencyOnSingleRelExpr</span><span class='Parentheses'>(</span><span class='Keyword'>const </span><a href="../../include/catalog/objectaddress.h.html#LN23"><span class='Ref_to_Struct'>ObjectAddress</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>depender</span><span class='Delimiter'>, 
</span><a name="LN1392"></a>                                <a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>expr</span><span class='Delimiter'>, </span><a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>relId</span><span class='Delimiter'>, 
</span><a name="LN1393"></a>                                <a href="../../include/catalog/dependency.h.html#LN72"><span class='Ref_to_Enum'>DependencyType</span></a> <span class='Declare_Parameter'>behavior</span><span class='Delimiter'>, 
</span><a name="LN1394"></a>                                <a href="../../include/catalog/dependency.h.html#LN72"><span class='Ref_to_Enum'>DependencyType</span></a> <span class='Declare_Parameter'>self_behavior</span><span class='Delimiter'>, 
</span><a name="LN1395"></a>                                <span class='Keyword'>bool </span><span class='Declare_Parameter'>ignore_self</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1397"></a>    <a href="dependency.c.html#LN127"><span class='Ref_to_Typedef'>find_expr_references_context</span></a> <span class='Declare_Local'>context</span><span class='Delimiter'>; 
</span><a name="LN1398"></a>    <a href="../../include/nodes/parsenodes.h.html#LN932"><span class='Ref_to_Struct'>RangeTblEntry</span></a> <span class='Declare_Local'>rte</span><span class='Delimiter'>; 
</span> 
    <a href="dependency.c.html#LN1397"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="dependency.c.html#LN129"><span class='Ref_to_Member'>addrs</span></a> <span class='Operator'>= </span><a href="../../include/catalog/dependency.h.html#LN200"><span class='Ref_to_Proto'>new_object_addresses</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* We gin up a rather bogus rangetable list to handle Vars */ 
</span>    <a href="../../include/c.h.html#LN856"><span class='Ref_to_Macro'>MemSet</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="dependency.c.html#LN1398"><span class='Ref_To_Local'>rte</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="dependency.c.html#LN1398"><span class='Ref_To_Local'>rte</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="dependency.c.html#LN1398"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>.</span><a href="../../include/nodes/parsenodes.h.html#LN934"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>= </span><a href="../../include/nodes/nodes.h.html#LN444"><span class='Ref_to_EnumConst'>T_RangeTblEntry</span></a><span class='Delimiter'>; 
</span>    <a href="dependency.c.html#LN1398"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>.</span><a href="../../include/nodes/parsenodes.h.html#LN936"><span class='Ref_to_Member'>rtekind</span></a> <span class='Operator'>= </span><a href="../../include/nodes/parsenodes.h.html#LN922"><span class='Ref_to_EnumConst'>RTE_RELATION</span></a><span class='Delimiter'>; 
</span>    <a href="dependency.c.html#LN1398"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>.</span><a href="../../include/nodes/parsenodes.h.html#LN947"><span class='Ref_to_Member'>relid</span></a> <span class='Operator'>= </span><a href="dependency.c.html#LN1392"><span class='Ref_to_Parameter'>relId</span></a><span class='Delimiter'>; 
</span>    <a href="dependency.c.html#LN1398"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>.</span><a href="../../include/nodes/parsenodes.h.html#LN948"><span class='Ref_to_Member'>relkind</span></a> <span class='Operator'>= </span><a href="../../include/catalog/pg_class.h.html#LN159"><span class='Ref_to_Const'>RELKIND_RELATION</span></a><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* no need for exactness here */ 
</span> 
    <a href="dependency.c.html#LN1397"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="dependency.c.html#LN130"><span class='Ref_to_Member'>rtables</span></a> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN138"><span class='Ref_to_Macro'>list_make1</span></a><span class='Parentheses'>(</span><a href="../../include/nodes/pg_list.h.html#LN138"><span class='Ref_to_Macro'>list_make1</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="dependency.c.html#LN1398"><span class='Ref_To_Local'>rte</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Scan the expression tree for referenceable objects */ 
</span>    <a href="dependency.c.html#LN195"><span class='Ref_to_Proto'>find_expr_references_walker</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1392"><span class='Ref_to_Parameter'>expr</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="dependency.c.html#LN1397"><span class='Ref_To_Local'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Remove any duplicates */ 
</span>    <a href="dependency.c.html#LN197"><span class='Ref_to_Proto'>eliminate_duplicate_dependencies</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1397"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="dependency.c.html#LN129"><span class='Ref_to_Member'>addrs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Separate self-dependencies if necessary */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN1393"><span class='Ref_to_Parameter'>behavior</span></a> <span class='Operator'>!= </span><a href="dependency.c.html#LN1394"><span class='Ref_to_Parameter'>self_behavior</span></a> <span class='Operator'>&& </span><a href="dependency.c.html#LN1397"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="dependency.c.html#LN129"><span class='Ref_to_Member'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN112"><span class='Ref_to_Member'>numrefs</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN1420"></a>        <a href="dependency.c.html#LN108"><span class='Ref_to_Struct'>ObjectAddresses</span></a> <span class='Operator'>*</span><span class='Declare_Local'>self_addrs</span><span class='Delimiter'>; 
</span><a name="LN1421"></a>        <a href="../../include/catalog/objectaddress.h.html#LN23"><span class='Ref_to_Struct'>ObjectAddress</span></a> <span class='Operator'>*</span><span class='Declare_Local'>outobj</span><span class='Delimiter'>; 
</span><a name="LN1422"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>oldref</span><span class='Delimiter'>, 
</span><a name="LN1423"></a>                    <span class='Declare_Local'>outrefs</span><span class='Delimiter'>; 
</span> 
        <a href="dependency.c.html#LN1420"><span class='Ref_To_Local'>self_addrs</span></a> <span class='Operator'>= </span><a href="../../include/catalog/dependency.h.html#LN200"><span class='Ref_to_Proto'>new_object_addresses</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
        <a href="dependency.c.html#LN1421"><span class='Ref_To_Local'>outobj</span></a> <span class='Operator'>= </span><a href="dependency.c.html#LN1397"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="dependency.c.html#LN129"><span class='Ref_to_Member'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN110"><span class='Ref_to_Member'>refs</span></a><span class='Delimiter'>; 
</span>        <a href="dependency.c.html#LN1423"><span class='Ref_To_Local'>outrefs</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN1422"><span class='Ref_To_Local'>oldref</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="dependency.c.html#LN1422"><span class='Ref_To_Local'>oldref</span></a> <span class='Operator'>&LT; </span><a href="dependency.c.html#LN1397"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="dependency.c.html#LN129"><span class='Ref_to_Member'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN112"><span class='Ref_to_Member'>numrefs</span></a><span class='Delimiter'>; </span><a href="dependency.c.html#LN1422"><span class='Ref_To_Local'>oldref</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN1431"></a>            <a href="../../include/catalog/objectaddress.h.html#LN23"><span class='Ref_to_Struct'>ObjectAddress</span></a> <span class='Operator'>*</span><span class='Declare_Local'>thisobj</span> <span class='Operator'>= </span><a href="dependency.c.html#LN1397"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="dependency.c.html#LN129"><span class='Ref_to_Member'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN110"><span class='Ref_to_Member'>refs</span></a> <span class='Operator'>+ </span><a href="dependency.c.html#LN1422"><span class='Ref_To_Local'>oldref</span></a><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN1431"><span class='Ref_To_Local'>thisobj</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN25"><span class='Ref_to_Member'>classId</span></a> <span class='Operator'>== </span><a href="../../include/catalog/pg_class.h.html#LN28"><span class='Ref_to_Const'>RelationRelationId</span></a> <span class='Operator'>&& 
</span>                <a href="dependency.c.html#LN1431"><span class='Ref_To_Local'>thisobj</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a> <span class='Operator'>== </span><a href="dependency.c.html#LN1392"><span class='Ref_to_Parameter'>relId</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* Move this ref into self_addrs */ 
</span>                <a href="../../include/catalog/dependency.h.html#LN202"><span class='Ref_to_Proto'>add_exact_object_address</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1431"><span class='Ref_To_Local'>thisobj</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN1420"><span class='Ref_To_Local'>self_addrs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* Keep it in context.addrs */ 
</span>                <span class='Operator'>*</span><a href="dependency.c.html#LN1421"><span class='Ref_To_Local'>outobj</span></a> <span class='Operator'>= *</span><a href="dependency.c.html#LN1431"><span class='Ref_To_Local'>thisobj</span></a><span class='Delimiter'>; 
</span>                <a href="dependency.c.html#LN1421"><span class='Ref_To_Local'>outobj</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>                <a href="dependency.c.html#LN1423"><span class='Ref_To_Local'>outrefs</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>} 
</span>        <a href="dependency.c.html#LN1397"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="dependency.c.html#LN129"><span class='Ref_to_Member'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN112"><span class='Ref_to_Member'>numrefs</span></a> <span class='Operator'>= </span><a href="dependency.c.html#LN1423"><span class='Ref_To_Local'>outrefs</span></a><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Record the self-dependencies */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="dependency.c.html#LN1395"><span class='Ref_to_Parameter'>ignore_self</span></a><span class='Parentheses'>) 
</span>            <a href="pg_depend.c.html#LN54"><span class='Ref_to_Func'>recordMultipleDependencies</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1391"><span class='Ref_to_Parameter'>depender</span></a><span class='Delimiter'>, 
</span>                                       <a href="dependency.c.html#LN1420"><span class='Ref_To_Local'>self_addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN110"><span class='Ref_to_Member'>refs</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN1420"><span class='Ref_To_Local'>self_addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN112"><span class='Ref_to_Member'>numrefs</span></a><span class='Delimiter'>, 
</span>                                       <a href="dependency.c.html#LN1394"><span class='Ref_to_Parameter'>self_behavior</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../include/catalog/dependency.h.html#LN212"><span class='Ref_to_Proto'>free_object_addresses</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1420"><span class='Ref_To_Local'>self_addrs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if behavior!=self_behavi... &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* Record the external dependencies */ 
</span>    <a href="pg_depend.c.html#LN54"><span class='Ref_to_Func'>recordMultipleDependencies</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1391"><span class='Ref_to_Parameter'>depender</span></a><span class='Delimiter'>, 
</span>                               <a href="dependency.c.html#LN1397"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="dependency.c.html#LN129"><span class='Ref_to_Member'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN110"><span class='Ref_to_Member'>refs</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN1397"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="dependency.c.html#LN129"><span class='Ref_to_Member'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN112"><span class='Ref_to_Member'>numrefs</span></a><span class='Delimiter'>, 
</span>                               <a href="dependency.c.html#LN1393"><span class='Ref_to_Parameter'>behavior</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../include/catalog/dependency.h.html#LN212"><span class='Ref_to_Proto'>free_object_addresses</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1397"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="dependency.c.html#LN129"><span class='Ref_to_Member'>addrs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end recordDependencyOnSingleRelExpr &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Recursively search an expression tree for object references. 
 * 
 * Note: we avoid creating references to columns of tables that participate 
 * in an SQL JOIN construct, but are not actually used anywhere in the query. 
 * To do so, we do not scan the joinaliasvars list of a join RTE while 
 * scanning the query rangetable, but instead scan each individual entry 
 * of the alias list when we find a reference to it. 
 * 
 * Note: in many cases we do not need to create dependencies on the datatypes 
 * involved in an expression, because we'll have an indirect dependency via 
 * some other object.  For instance Var nodes depend on a column which depends 
 * on the datatype, and OpExpr nodes depend on the operator which depends on 
 * the datatype.  However we do need a type dependency if there is no such 
 * indirect dependency, as for example in Const and CoerceToDomain nodes. 
 * 
 * Similarly, we don't need to create dependencies on collations except where 
 * the collation is being freshly introduced to the expression. 
 */ 
</span><span class='Keyword'>static bool 
</span><a name="LN1486"></a><span class='Declare_Function'>find_expr_references_walker</span><span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, 
</span><a name="LN1487"></a>                            <a href="dependency.c.html#LN127"><span class='Ref_to_Typedef'>find_expr_references_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN1486"><span class='Ref_to_Parameter'>node</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1486"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN1493"></a>        <a href="../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>var</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="dependency.c.html#LN1486"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span><a name="LN1494"></a>        <a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>rtable</span><span class='Delimiter'>; 
</span><a name="LN1495"></a>        <a href="../../include/nodes/parsenodes.h.html#LN932"><span class='Ref_to_Struct'>RangeTblEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>rte</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Find matching rtable entry, or complain if not found */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN1493"><span class='Ref_To_Local'>var</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN172"><span class='Ref_to_Member'>varlevelsup</span></a> <span class='Operator'>&GT;= </span><a href="../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1487"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN130"><span class='Ref_to_Member'>rtables</span></a><span class='Parentheses'>))</span> 
            <a href="../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"invalid varlevelsup %d"</span><span class='Delimiter'>, </span><a href="dependency.c.html#LN1493"><span class='Ref_To_Local'>var</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN172"><span class='Ref_to_Member'>varlevelsup</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="dependency.c.html#LN1494"><span class='Ref_To_Local'>rtable</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/nodes/pg_list.h.html#LN223"><span class='Ref_to_Proto'>list_nth</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1487"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN130"><span class='Ref_to_Member'>rtables</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN1493"><span class='Ref_To_Local'>var</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN172"><span class='Ref_to_Member'>varlevelsup</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN1493"><span class='Ref_To_Local'>var</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN165"><span class='Ref_to_Member'>varno</span></a> <span class='Operator'>&LT;= </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="dependency.c.html#LN1493"><span class='Ref_To_Local'>var</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN165"><span class='Ref_to_Member'>varno</span></a> <span class='Operator'>&GT; </span><a href="../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1494"><span class='Ref_To_Local'>rtable</span></a><span class='Parentheses'>))</span> 
            <a href="../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"invalid varno %d"</span><span class='Delimiter'>, </span><a href="dependency.c.html#LN1493"><span class='Ref_To_Local'>var</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN165"><span class='Ref_to_Member'>varno</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="dependency.c.html#LN1495"><span class='Ref_To_Local'>rte</span></a> <span class='Operator'>= </span><a href="../../include/parser/parsetree.h.html#LN30"><span class='Ref_to_Macro'>rt_fetch</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1493"><span class='Ref_To_Local'>var</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN165"><span class='Ref_to_Member'>varno</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN1494"><span class='Ref_To_Local'>rtable</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * A whole-row Var references no specific columns, so adds no new 
         * dependency.  (We assume that there is a whole-table dependency 
         * arising from each underlying rangetable entry.  While we could 
         * record such a dependency when finding a whole-row Var that 
         * references a relation directly, it's quite unclear how to extend 
         * that to whole-row Vars for JOINs, so it seems better to leave the 
         * responsibility with the range table.  Note that this poses some 
         * risks for identifying dependencies of stand-alone expressions: 
         * whole-table references may need to be created separately.) 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN1493"><span class='Ref_To_Local'>var</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN167"><span class='Ref_to_Member'>varattno</span></a> <span class='Operator'>== </span><a href="../../include/access/attnum.h.html#LN22"><span class='Ref_to_Const'>InvalidAttrNumber</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN1495"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN936"><span class='Ref_to_Member'>rtekind</span></a> <span class='Operator'>== </span><a href="../../include/nodes/parsenodes.h.html#LN922"><span class='Ref_to_EnumConst'>RTE_RELATION</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* If it's a plain relation, reference this column */ 
</span>            <a href="dependency.c.html#LN199"><span class='Ref_to_Proto'>add_object_address</span></a><span class='Parentheses'>(</span><a href="../../include/catalog/dependency.h.html#LN130"><span class='Ref_to_EnumConst'>OCLASS_CLASS</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN1495"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN947"><span class='Ref_to_Member'>relid</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN1493"><span class='Ref_To_Local'>var</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN167"><span class='Ref_to_Member'>varattno</span></a><span class='Delimiter'>, 
</span>                               <a href="dependency.c.html#LN1487"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN129"><span class='Ref_to_Member'>addrs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN1495"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN936"><span class='Ref_to_Member'>rtekind</span></a> <span class='Operator'>== </span><a href="../../include/nodes/parsenodes.h.html#LN924"><span class='Ref_to_EnumConst'>RTE_JOIN</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* Scan join output column to add references to join inputs */ 
</span><a name="LN1527"></a>            <a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>save_rtables</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* We must make the context appropriate for join's level */ 
</span>            <a href="dependency.c.html#LN1527"><span class='Ref_To_Local'>save_rtables</span></a> <span class='Operator'>= </span><a href="dependency.c.html#LN1487"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN130"><span class='Ref_to_Member'>rtables</span></a><span class='Delimiter'>; 
</span>            <a href="dependency.c.html#LN1487"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN130"><span class='Ref_to_Member'>rtables</span></a> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN269"><span class='Ref_to_Proto'>list_copy_tail</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1487"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN130"><span class='Ref_to_Member'>rtables</span></a><span class='Delimiter'>, 
</span>                                              <a href="dependency.c.html#LN1493"><span class='Ref_To_Local'>var</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN172"><span class='Ref_to_Member'>varlevelsup</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN1493"><span class='Ref_To_Local'>var</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN167"><span class='Ref_to_Member'>varattno</span></a> <span class='Operator'>&LT;= </span><span class='Number'>0</span> <span class='Operator'>|| 
</span>                <a href="dependency.c.html#LN1493"><span class='Ref_To_Local'>var</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN167"><span class='Ref_to_Member'>varattno</span></a> <span class='Operator'>&GT; </span><a href="../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1495"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN975"><span class='Ref_to_Member'>joinaliasvars</span></a><span class='Parentheses'>))</span> 
                <a href="../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"invalid varattno %d"</span><span class='Delimiter'>, </span><a href="dependency.c.html#LN1493"><span class='Ref_To_Local'>var</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN167"><span class='Ref_to_Member'>varattno</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="dependency.c.html#LN195"><span class='Ref_to_Proto'>find_expr_references_walker</span></a><span class='Parentheses'>((</span><a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/nodes/pg_list.h.html#LN223"><span class='Ref_to_Proto'>list_nth</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1495"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN975"><span class='Ref_to_Member'>joinaliasvars</span></a><span class='Delimiter'>, 
</span>                                                          <a href="dependency.c.html#LN1493"><span class='Ref_To_Local'>var</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN167"><span class='Ref_to_Member'>varattno</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                        <a href="dependency.c.html#LN1487"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../include/nodes/pg_list.h.html#LN265"><span class='Ref_to_Proto'>list_free</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1487"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN130"><span class='Ref_to_Member'>rtables</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="dependency.c.html#LN1487"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN130"><span class='Ref_to_Member'>rtables</span></a> <span class='Operator'>= </span><a href="dependency.c.html#LN1527"><span class='Ref_To_Local'>save_rtables</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if IsA(node,Var) &raquo; </span> 
    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1486"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/primnodes.h.html#LN188"><span class='Ref_to_Struct'>Const</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN1546"></a>        <a href="../../include/nodes/primnodes.h.html#LN188"><span class='Ref_to_Struct'>Const</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>con</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN188"><span class='Ref_to_Struct'>Const</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="dependency.c.html#LN1486"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span><a name="LN1547"></a>        <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>objoid</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* A constant must depend on the constant's datatype */ 
</span>        <a href="dependency.c.html#LN199"><span class='Ref_to_Proto'>add_object_address</span></a><span class='Parentheses'>(</span><a href="../../include/catalog/dependency.h.html#LN132"><span class='Ref_to_EnumConst'>OCLASS_TYPE</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN1546"><span class='Ref_To_Local'>con</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN191"><span class='Ref_to_Member'>consttype</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                           <a href="dependency.c.html#LN1487"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN129"><span class='Ref_to_Member'>addrs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * We must also depend on the constant's collation: it could be 
         * different from the datatype's, if a CollateExpr was const-folded to 
         * a simple constant.  However we can save work in the most common 
         * case where the collation is "default", since we know that's pinned. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1546"><span class='Ref_To_Local'>con</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN193"><span class='Ref_to_Member'>constcollid</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>            <a href="dependency.c.html#LN1546"><span class='Ref_To_Local'>con</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN193"><span class='Ref_to_Member'>constcollid</span></a> <span class='Operator'>!= </span><a href="../../include/catalog/pg_collation.h.html#LN74"><span class='Ref_to_Const'>DEFAULT_COLLATION_OID</span></a><span class='Parentheses'>)</span> 
            <a href="dependency.c.html#LN199"><span class='Ref_to_Proto'>add_object_address</span></a><span class='Parentheses'>(</span><a href="../../include/catalog/dependency.h.html#LN134"><span class='Ref_to_EnumConst'>OCLASS_COLLATION</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN1546"><span class='Ref_To_Local'>con</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN193"><span class='Ref_to_Member'>constcollid</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                               <a href="dependency.c.html#LN1487"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN129"><span class='Ref_to_Member'>addrs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * If it's a regclass or similar literal referring to an existing 
         * object, add a reference to that object.  (Currently, only the 
         * regclass and regconfig cases have any likely use, but we may as 
         * well handle all the OID-alias datatypes consistently.) 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="dependency.c.html#LN1546"><span class='Ref_To_Local'>con</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN196"><span class='Ref_to_Member'>constisnull</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN1546"><span class='Ref_To_Local'>con</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN191"><span class='Ref_to_Member'>consttype</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Control'>case</span> <a href="../../interfaces/ecpg/ecpglib/pg_type.h.html#LN25"><span class='Ref_to_Const'>REGPROCOID</span></a><span class='Operator'>: 
</span>                <span class='Control'>case</span> <a href="../../interfaces/ecpg/ecpglib/pg_type.h.html#LN60"><span class='Ref_to_Const'>REGPROCEDUREOID</span></a><span class='Operator'>: 
</span>                    <a href="dependency.c.html#LN1547"><span class='Ref_To_Local'>objoid</span></a> <span class='Operator'>= </span><a href="../../include/postgres.h.html#LN505"><span class='Ref_to_Macro'>DatumGetObjectId</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1546"><span class='Ref_To_Local'>con</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN195"><span class='Ref_to_Member'>constvalue</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/utils/syscache.h.html#LN173"><span class='Ref_to_Macro'>SearchSysCacheExists1</span></a><span class='Parentheses'>(</span><a href="../../include/utils/syscache.h.html#LN76"><span class='Ref_to_EnumConst'>PROCOID</span></a><span class='Delimiter'>, 
</span>                                              <a href="../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1547"><span class='Ref_To_Local'>objoid</span></a><span class='Parentheses'>)))</span> 
                        <a href="dependency.c.html#LN199"><span class='Ref_to_Proto'>add_object_address</span></a><span class='Parentheses'>(</span><a href="../../include/catalog/dependency.h.html#LN131"><span class='Ref_to_EnumConst'>OCLASS_PROC</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN1547"><span class='Ref_To_Local'>objoid</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                                           <a href="dependency.c.html#LN1487"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN129"><span class='Ref_to_Member'>addrs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Control'>case</span> <a href="../../interfaces/ecpg/ecpglib/pg_type.h.html#LN61"><span class='Ref_to_Const'>REGOPEROID</span></a><span class='Operator'>: 
</span>                <span class='Control'>case</span> <a href="../../interfaces/ecpg/ecpglib/pg_type.h.html#LN62"><span class='Ref_to_Const'>REGOPERATOROID</span></a><span class='Operator'>: 
</span>                    <a href="dependency.c.html#LN1547"><span class='Ref_To_Local'>objoid</span></a> <span class='Operator'>= </span><a href="../../include/postgres.h.html#LN505"><span class='Ref_to_Macro'>DatumGetObjectId</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1546"><span class='Ref_To_Local'>con</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN195"><span class='Ref_to_Member'>constvalue</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/utils/syscache.h.html#LN173"><span class='Ref_to_Macro'>SearchSysCacheExists1</span></a><span class='Parentheses'>(</span><a href="../../include/utils/syscache.h.html#LN71"><span class='Ref_to_EnumConst'>OPEROID</span></a><span class='Delimiter'>, 
</span>                                              <a href="../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1547"><span class='Ref_To_Local'>objoid</span></a><span class='Parentheses'>)))</span> 
                        <a href="dependency.c.html#LN199"><span class='Ref_to_Proto'>add_object_address</span></a><span class='Parentheses'>(</span><a href="../../include/catalog/dependency.h.html#LN140"><span class='Ref_to_EnumConst'>OCLASS_OPERATOR</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN1547"><span class='Ref_To_Local'>objoid</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                                           <a href="dependency.c.html#LN1487"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN129"><span class='Ref_to_Member'>addrs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Control'>case</span> <a href="../../interfaces/ecpg/ecpglib/pg_type.h.html#LN63"><span class='Ref_to_Const'>REGCLASSOID</span></a><span class='Operator'>: 
</span>                    <a href="dependency.c.html#LN1547"><span class='Ref_To_Local'>objoid</span></a> <span class='Operator'>= </span><a href="../../include/postgres.h.html#LN505"><span class='Ref_to_Macro'>DatumGetObjectId</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1546"><span class='Ref_To_Local'>con</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN195"><span class='Ref_to_Member'>constvalue</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/utils/syscache.h.html#LN173"><span class='Ref_to_Macro'>SearchSysCacheExists1</span></a><span class='Parentheses'>(</span><a href="../../include/utils/syscache.h.html#LN83"><span class='Ref_to_EnumConst'>RELOID</span></a><span class='Delimiter'>, 
</span>                                              <a href="../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1547"><span class='Ref_To_Local'>objoid</span></a><span class='Parentheses'>)))</span> 
                        <a href="dependency.c.html#LN199"><span class='Ref_to_Proto'>add_object_address</span></a><span class='Parentheses'>(</span><a href="../../include/catalog/dependency.h.html#LN130"><span class='Ref_to_EnumConst'>OCLASS_CLASS</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN1547"><span class='Ref_To_Local'>objoid</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                                           <a href="dependency.c.html#LN1487"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN129"><span class='Ref_to_Member'>addrs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Control'>case</span> <a href="../../interfaces/ecpg/ecpglib/pg_type.h.html#LN64"><span class='Ref_to_Const'>REGTYPEOID</span></a><span class='Operator'>: 
</span>                    <a href="dependency.c.html#LN1547"><span class='Ref_To_Local'>objoid</span></a> <span class='Operator'>= </span><a href="../../include/postgres.h.html#LN505"><span class='Ref_to_Macro'>DatumGetObjectId</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1546"><span class='Ref_To_Local'>con</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN195"><span class='Ref_to_Member'>constvalue</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/utils/syscache.h.html#LN173"><span class='Ref_to_Macro'>SearchSysCacheExists1</span></a><span class='Parentheses'>(</span><a href="../../include/utils/syscache.h.html#LN107"><span class='Ref_to_EnumConst'>TYPEOID</span></a><span class='Delimiter'>, 
</span>                                              <a href="../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1547"><span class='Ref_To_Local'>objoid</span></a><span class='Parentheses'>)))</span> 
                        <a href="dependency.c.html#LN199"><span class='Ref_to_Proto'>add_object_address</span></a><span class='Parentheses'>(</span><a href="../../include/catalog/dependency.h.html#LN132"><span class='Ref_to_EnumConst'>OCLASS_TYPE</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN1547"><span class='Ref_To_Local'>objoid</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                                           <a href="dependency.c.html#LN1487"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN129"><span class='Ref_to_Member'>addrs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Control'>case</span> <a href="../../interfaces/ecpg/ecpglib/pg_type.h.html#LN73"><span class='Ref_to_Const'>REGCONFIGOID</span></a><span class='Operator'>: 
</span>                    <a href="dependency.c.html#LN1547"><span class='Ref_To_Local'>objoid</span></a> <span class='Operator'>= </span><a href="../../include/postgres.h.html#LN505"><span class='Ref_to_Macro'>DatumGetObjectId</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1546"><span class='Ref_To_Local'>con</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN195"><span class='Ref_to_Member'>constvalue</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/utils/syscache.h.html#LN173"><span class='Ref_to_Macro'>SearchSysCacheExists1</span></a><span class='Parentheses'>(</span><a href="../../include/utils/syscache.h.html#LN99"><span class='Ref_to_EnumConst'>TSCONFIGOID</span></a><span class='Delimiter'>, 
</span>                                              <a href="../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1547"><span class='Ref_To_Local'>objoid</span></a><span class='Parentheses'>)))</span> 
                        <a href="dependency.c.html#LN199"><span class='Ref_to_Proto'>add_object_address</span></a><span class='Parentheses'>(</span><a href="../../include/catalog/dependency.h.html#LN153"><span class='Ref_to_EnumConst'>OCLASS_TSCONFIG</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN1547"><span class='Ref_To_Local'>objoid</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                                           <a href="dependency.c.html#LN1487"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN129"><span class='Ref_to_Member'>addrs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Control'>case</span> <a href="../../interfaces/ecpg/ecpglib/pg_type.h.html#LN74"><span class='Ref_to_Const'>REGDICTIONARYOID</span></a><span class='Operator'>: 
</span>                    <a href="dependency.c.html#LN1547"><span class='Ref_To_Local'>objoid</span></a> <span class='Operator'>= </span><a href="../../include/postgres.h.html#LN505"><span class='Ref_to_Macro'>DatumGetObjectId</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1546"><span class='Ref_To_Local'>con</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN195"><span class='Ref_to_Member'>constvalue</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/utils/syscache.h.html#LN173"><span class='Ref_to_Macro'>SearchSysCacheExists1</span></a><span class='Parentheses'>(</span><a href="../../include/utils/syscache.h.html#LN101"><span class='Ref_to_EnumConst'>TSDICTOID</span></a><span class='Delimiter'>, 
</span>                                              <a href="../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1547"><span class='Ref_To_Local'>objoid</span></a><span class='Parentheses'>)))</span> 
                        <a href="dependency.c.html#LN199"><span class='Ref_to_Proto'>add_object_address</span></a><span class='Parentheses'>(</span><a href="../../include/catalog/dependency.h.html#LN151"><span class='Ref_to_EnumConst'>OCLASS_TSDICT</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN1547"><span class='Ref_To_Local'>objoid</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                                           <a href="dependency.c.html#LN1487"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN129"><span class='Ref_to_Member'>addrs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>case</span> <a href="../../interfaces/ecpg/ecpglib/pg_type.h.html#LN66"><span class='Ref_to_Const'>REGNAMESPACEOID</span></a><span class='Operator'>: 
</span>                    <a href="dependency.c.html#LN1547"><span class='Ref_To_Local'>objoid</span></a> <span class='Operator'>= </span><a href="../../include/postgres.h.html#LN505"><span class='Ref_to_Macro'>DatumGetObjectId</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1546"><span class='Ref_To_Local'>con</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN195"><span class='Ref_to_Member'>constvalue</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/utils/syscache.h.html#LN173"><span class='Ref_to_Macro'>SearchSysCacheExists1</span></a><span class='Parentheses'>(</span><a href="../../include/utils/syscache.h.html#LN69"><span class='Ref_to_EnumConst'>NAMESPACEOID</span></a><span class='Delimiter'>, 
</span>                                              <a href="../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1547"><span class='Ref_To_Local'>objoid</span></a><span class='Parentheses'>)))</span> 
                        <a href="dependency.c.html#LN199"><span class='Ref_to_Proto'>add_object_address</span></a><span class='Parentheses'>(</span><a href="../../include/catalog/dependency.h.html#LN148"><span class='Ref_to_EnumConst'>OCLASS_SCHEMA</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN1547"><span class='Ref_To_Local'>objoid</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                                           <a href="dependency.c.html#LN1487"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN129"><span class='Ref_to_Member'>addrs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
                    <span class='Comment_Multi_Line'>/* 
                     * Dependencies for regrole should be shared among all 
                     * databases, so explicitly inhibit to have dependencies. 
                     */ 
</span>                <span class='Control'>case</span> <a href="../../interfaces/ecpg/ecpglib/pg_type.h.html#LN65"><span class='Ref_to_Const'>REGROLEOID</span></a><span class='Operator'>: 
</span>                    <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                            <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_FEATURE_NOT_SUPPORTED<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                        <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"constant of the type %s cannot be used here"</span><span class='Delimiter'>, 
</span>                               <span class='String'>"regrole"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch con-&GT;consttype &raquo; </span> 
        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if !con-&GT;constisnull &raquo; </span> 
        <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if IsA(node,Const) &raquo; </span> 
    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1486"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/primnodes.h.html#LN240"><span class='Ref_to_Struct'>Param</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN1643"></a>        <a href="../../include/nodes/primnodes.h.html#LN240"><span class='Ref_to_Struct'>Param</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>param</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN240"><span class='Ref_to_Struct'>Param</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="dependency.c.html#LN1486"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* A parameter must depend on the parameter's datatype */ 
</span>        <a href="dependency.c.html#LN199"><span class='Ref_to_Proto'>add_object_address</span></a><span class='Parentheses'>(</span><a href="../../include/catalog/dependency.h.html#LN132"><span class='Ref_to_EnumConst'>OCLASS_TYPE</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN1643"><span class='Ref_To_Local'>param</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN245"><span class='Ref_to_Member'>paramtype</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                           <a href="dependency.c.html#LN1487"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN129"><span class='Ref_to_Member'>addrs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* and its collation, just as for Consts */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1643"><span class='Ref_To_Local'>param</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN247"><span class='Ref_to_Member'>paramcollid</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>            <a href="dependency.c.html#LN1643"><span class='Ref_To_Local'>param</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN247"><span class='Ref_to_Member'>paramcollid</span></a> <span class='Operator'>!= </span><a href="../../include/catalog/pg_collation.h.html#LN74"><span class='Ref_to_Const'>DEFAULT_COLLATION_OID</span></a><span class='Parentheses'>)</span> 
            <a href="dependency.c.html#LN199"><span class='Ref_to_Proto'>add_object_address</span></a><span class='Parentheses'>(</span><a href="../../include/catalog/dependency.h.html#LN134"><span class='Ref_to_EnumConst'>OCLASS_COLLATION</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN1643"><span class='Ref_To_Local'>param</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN247"><span class='Ref_to_Member'>paramcollid</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                               <a href="dependency.c.html#LN1487"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN129"><span class='Ref_to_Member'>addrs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1486"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/primnodes.h.html#LN444"><span class='Ref_to_Struct'>FuncExpr</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN1656"></a>        <a href="../../include/nodes/primnodes.h.html#LN444"><span class='Ref_to_Struct'>FuncExpr</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>funcexpr</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN444"><span class='Ref_to_Struct'>FuncExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="dependency.c.html#LN1486"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span> 
        <a href="dependency.c.html#LN199"><span class='Ref_to_Proto'>add_object_address</span></a><span class='Parentheses'>(</span><a href="../../include/catalog/dependency.h.html#LN131"><span class='Ref_to_EnumConst'>OCLASS_PROC</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN1656"><span class='Ref_To_Local'>funcexpr</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN447"><span class='Ref_to_Member'>funcid</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                           <a href="dependency.c.html#LN1487"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN129"><span class='Ref_to_Member'>addrs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* fall through to examine arguments */ 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1486"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/primnodes.h.html#LN491"><span class='Ref_to_Struct'>OpExpr</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN1664"></a>        <a href="../../include/nodes/primnodes.h.html#LN491"><span class='Ref_to_Struct'>OpExpr</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>opexpr</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN491"><span class='Ref_to_Struct'>OpExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="dependency.c.html#LN1486"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span> 
        <a href="dependency.c.html#LN199"><span class='Ref_to_Proto'>add_object_address</span></a><span class='Parentheses'>(</span><a href="../../include/catalog/dependency.h.html#LN140"><span class='Ref_to_EnumConst'>OCLASS_OPERATOR</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN1664"><span class='Ref_To_Local'>opexpr</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN494"><span class='Ref_to_Member'>opno</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                           <a href="dependency.c.html#LN1487"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN129"><span class='Ref_to_Member'>addrs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* fall through to examine arguments */ 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1486"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/primnodes.h.html#LN514"><span class='Ref_to_Typedef'>DistinctExpr</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN1672"></a>        <a href="../../include/nodes/primnodes.h.html#LN514"><span class='Ref_to_Typedef'>DistinctExpr</span></a> <span class='Operator'>*</span><span class='Declare_Local'>distinctexpr</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN514"><span class='Ref_to_Typedef'>DistinctExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="dependency.c.html#LN1486"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span> 
        <a href="dependency.c.html#LN199"><span class='Ref_to_Proto'>add_object_address</span></a><span class='Parentheses'>(</span><a href="../../include/catalog/dependency.h.html#LN140"><span class='Ref_to_EnumConst'>OCLASS_OPERATOR</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN1672"><span class='Ref_To_Local'>distinctexpr</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN494"><span class='Ref_to_Member'>opno</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                           <a href="dependency.c.html#LN1487"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN129"><span class='Ref_to_Member'>addrs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* fall through to examine arguments */ 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1486"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/primnodes.h.html#LN522"><span class='Ref_to_Typedef'>NullIfExpr</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN1680"></a>        <a href="../../include/nodes/primnodes.h.html#LN522"><span class='Ref_to_Typedef'>NullIfExpr</span></a> <span class='Operator'>*</span><span class='Declare_Local'>nullifexpr</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN522"><span class='Ref_to_Typedef'>NullIfExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="dependency.c.html#LN1486"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span> 
        <a href="dependency.c.html#LN199"><span class='Ref_to_Proto'>add_object_address</span></a><span class='Parentheses'>(</span><a href="../../include/catalog/dependency.h.html#LN140"><span class='Ref_to_EnumConst'>OCLASS_OPERATOR</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN1680"><span class='Ref_To_Local'>nullifexpr</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN494"><span class='Ref_to_Member'>opno</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                           <a href="dependency.c.html#LN1487"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN129"><span class='Ref_to_Member'>addrs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* fall through to examine arguments */ 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1486"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/primnodes.h.html#LN534"><span class='Ref_to_Struct'>ScalarArrayOpExpr</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN1688"></a>        <a href="../../include/nodes/primnodes.h.html#LN534"><span class='Ref_to_Struct'>ScalarArrayOpExpr</span></a> <span class='Operator'>*</span><span class='Declare_Local'>opexpr</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN534"><span class='Ref_to_Struct'>ScalarArrayOpExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="dependency.c.html#LN1486"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span> 
        <a href="dependency.c.html#LN199"><span class='Ref_to_Proto'>add_object_address</span></a><span class='Parentheses'>(</span><a href="../../include/catalog/dependency.h.html#LN140"><span class='Ref_to_EnumConst'>OCLASS_OPERATOR</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN1688"><span class='Ref_To_Local'>opexpr</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN537"><span class='Ref_to_Member'>opno</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                           <a href="dependency.c.html#LN1487"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN129"><span class='Ref_to_Member'>addrs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* fall through to examine arguments */ 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1486"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/primnodes.h.html#LN290"><span class='Ref_to_Struct'>Aggref</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN1696"></a>        <a href="../../include/nodes/primnodes.h.html#LN290"><span class='Ref_to_Struct'>Aggref</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>aggref</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN290"><span class='Ref_to_Struct'>Aggref</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="dependency.c.html#LN1486"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span> 
        <a href="dependency.c.html#LN199"><span class='Ref_to_Proto'>add_object_address</span></a><span class='Parentheses'>(</span><a href="../../include/catalog/dependency.h.html#LN131"><span class='Ref_to_EnumConst'>OCLASS_PROC</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN1696"><span class='Ref_To_Local'>aggref</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN293"><span class='Ref_to_Member'>aggfnoid</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                           <a href="dependency.c.html#LN1487"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN129"><span class='Ref_to_Member'>addrs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* fall through to examine arguments */ 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1486"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/primnodes.h.html#LN351"><span class='Ref_to_Struct'>WindowFunc</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN1704"></a>        <a href="../../include/nodes/primnodes.h.html#LN351"><span class='Ref_to_Struct'>WindowFunc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>wfunc</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN351"><span class='Ref_to_Struct'>WindowFunc</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="dependency.c.html#LN1486"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span> 
        <a href="dependency.c.html#LN199"><span class='Ref_to_Proto'>add_object_address</span></a><span class='Parentheses'>(</span><a href="../../include/catalog/dependency.h.html#LN131"><span class='Ref_to_EnumConst'>OCLASS_PROC</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN1704"><span class='Ref_To_Local'>wfunc</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN354"><span class='Ref_to_Member'>winfnoid</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                           <a href="dependency.c.html#LN1487"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN129"><span class='Ref_to_Member'>addrs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* fall through to examine arguments */ 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1486"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/primnodes.h.html#LN678"><span class='Ref_to_Struct'>SubPlan</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Extra work needed here if we ever need this case */ 
</span>        <a href="../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"already-planned subqueries not supported"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1486"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/primnodes.h.html#LN786"><span class='Ref_to_Struct'>RelabelType</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN1717"></a>        <a href="../../include/nodes/primnodes.h.html#LN786"><span class='Ref_to_Struct'>RelabelType</span></a> <span class='Operator'>*</span><span class='Declare_Local'>relab</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN786"><span class='Ref_to_Struct'>RelabelType</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="dependency.c.html#LN1486"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* since there is no function dependency, need to depend on type */ 
</span>        <a href="dependency.c.html#LN199"><span class='Ref_to_Proto'>add_object_address</span></a><span class='Parentheses'>(</span><a href="../../include/catalog/dependency.h.html#LN132"><span class='Ref_to_EnumConst'>OCLASS_TYPE</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN1717"><span class='Ref_To_Local'>relab</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN790"><span class='Ref_to_Member'>resulttype</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                           <a href="dependency.c.html#LN1487"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN129"><span class='Ref_to_Member'>addrs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* the collation might not be referenced anywhere else, either */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1717"><span class='Ref_To_Local'>relab</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN792"><span class='Ref_to_Member'>resultcollid</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>            <a href="dependency.c.html#LN1717"><span class='Ref_To_Local'>relab</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN792"><span class='Ref_to_Member'>resultcollid</span></a> <span class='Operator'>!= </span><a href="../../include/catalog/pg_collation.h.html#LN74"><span class='Ref_to_Const'>DEFAULT_COLLATION_OID</span></a><span class='Parentheses'>)</span> 
            <a href="dependency.c.html#LN199"><span class='Ref_to_Proto'>add_object_address</span></a><span class='Parentheses'>(</span><a href="../../include/catalog/dependency.h.html#LN134"><span class='Ref_to_EnumConst'>OCLASS_COLLATION</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN1717"><span class='Ref_To_Local'>relab</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN792"><span class='Ref_to_Member'>resultcollid</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                               <a href="dependency.c.html#LN1487"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN129"><span class='Ref_to_Member'>addrs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1486"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/primnodes.h.html#LN806"><span class='Ref_to_Struct'>CoerceViaIO</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN1730"></a>        <a href="../../include/nodes/primnodes.h.html#LN806"><span class='Ref_to_Struct'>CoerceViaIO</span></a> <span class='Operator'>*</span><span class='Declare_Local'>iocoerce</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN806"><span class='Ref_to_Struct'>CoerceViaIO</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="dependency.c.html#LN1486"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* since there is no exposed function, need to depend on type */ 
</span>        <a href="dependency.c.html#LN199"><span class='Ref_to_Proto'>add_object_address</span></a><span class='Parentheses'>(</span><a href="../../include/catalog/dependency.h.html#LN132"><span class='Ref_to_EnumConst'>OCLASS_TYPE</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN1730"><span class='Ref_To_Local'>iocoerce</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN810"><span class='Ref_to_Member'>resulttype</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                           <a href="dependency.c.html#LN1487"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN129"><span class='Ref_to_Member'>addrs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1486"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/primnodes.h.html#LN829"><span class='Ref_to_Struct'>ArrayCoerceExpr</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN1738"></a>        <a href="../../include/nodes/primnodes.h.html#LN829"><span class='Ref_to_Struct'>ArrayCoerceExpr</span></a> <span class='Operator'>*</span><span class='Declare_Local'>acoerce</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN829"><span class='Ref_to_Struct'>ArrayCoerceExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="dependency.c.html#LN1486"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1738"><span class='Ref_To_Local'>acoerce</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN833"><span class='Ref_to_Member'>elemfuncid</span></a><span class='Parentheses'>))</span> 
            <a href="dependency.c.html#LN199"><span class='Ref_to_Proto'>add_object_address</span></a><span class='Parentheses'>(</span><a href="../../include/catalog/dependency.h.html#LN131"><span class='Ref_to_EnumConst'>OCLASS_PROC</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN1738"><span class='Ref_To_Local'>acoerce</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN833"><span class='Ref_to_Member'>elemfuncid</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                               <a href="dependency.c.html#LN1487"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN129"><span class='Ref_to_Member'>addrs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="dependency.c.html#LN199"><span class='Ref_to_Proto'>add_object_address</span></a><span class='Parentheses'>(</span><a href="../../include/catalog/dependency.h.html#LN132"><span class='Ref_to_EnumConst'>OCLASS_TYPE</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN1738"><span class='Ref_To_Local'>acoerce</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN834"><span class='Ref_to_Member'>resulttype</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                           <a href="dependency.c.html#LN1487"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN129"><span class='Ref_to_Member'>addrs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* fall through to examine arguments */ 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1486"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/primnodes.h.html#LN854"><span class='Ref_to_Struct'>ConvertRowtypeExpr</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN1749"></a>        <a href="../../include/nodes/primnodes.h.html#LN854"><span class='Ref_to_Struct'>ConvertRowtypeExpr</span></a> <span class='Operator'>*</span><span class='Declare_Local'>cvt</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN854"><span class='Ref_to_Struct'>ConvertRowtypeExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="dependency.c.html#LN1486"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* since there is no function dependency, need to depend on type */ 
</span>        <a href="dependency.c.html#LN199"><span class='Ref_to_Proto'>add_object_address</span></a><span class='Parentheses'>(</span><a href="../../include/catalog/dependency.h.html#LN132"><span class='Ref_to_EnumConst'>OCLASS_TYPE</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN1749"><span class='Ref_To_Local'>cvt</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN858"><span class='Ref_to_Member'>resulttype</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                           <a href="dependency.c.html#LN1487"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN129"><span class='Ref_to_Member'>addrs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1486"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/primnodes.h.html#LN871"><span class='Ref_to_Struct'>CollateExpr</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN1757"></a>        <a href="../../include/nodes/primnodes.h.html#LN871"><span class='Ref_to_Struct'>CollateExpr</span></a> <span class='Operator'>*</span><span class='Declare_Local'>coll</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN871"><span class='Ref_to_Struct'>CollateExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="dependency.c.html#LN1486"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span> 
        <a href="dependency.c.html#LN199"><span class='Ref_to_Proto'>add_object_address</span></a><span class='Parentheses'>(</span><a href="../../include/catalog/dependency.h.html#LN134"><span class='Ref_to_EnumConst'>OCLASS_COLLATION</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN1757"><span class='Ref_To_Local'>coll</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN875"><span class='Ref_to_Member'>collOid</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                           <a href="dependency.c.html#LN1487"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN129"><span class='Ref_to_Member'>addrs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1486"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/primnodes.h.html#LN981"><span class='Ref_to_Struct'>RowExpr</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN1764"></a>        <a href="../../include/nodes/primnodes.h.html#LN981"><span class='Ref_to_Struct'>RowExpr</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>rowexpr</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN981"><span class='Ref_to_Struct'>RowExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="dependency.c.html#LN1486"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span> 
        <a href="dependency.c.html#LN199"><span class='Ref_to_Proto'>add_object_address</span></a><span class='Parentheses'>(</span><a href="../../include/catalog/dependency.h.html#LN132"><span class='Ref_to_EnumConst'>OCLASS_TYPE</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN1764"><span class='Ref_To_Local'>rowexpr</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN985"><span class='Ref_to_Member'>row_typeid</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                           <a href="dependency.c.html#LN1487"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN129"><span class='Ref_to_Member'>addrs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1486"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/primnodes.h.html#LN1026"><span class='Ref_to_Struct'>RowCompareExpr</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN1771"></a>        <a href="../../include/nodes/primnodes.h.html#LN1026"><span class='Ref_to_Struct'>RowCompareExpr</span></a> <span class='Operator'>*</span><span class='Declare_Local'>rcexpr</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN1026"><span class='Ref_to_Struct'>RowCompareExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="dependency.c.html#LN1486"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span><a name="LN1772"></a>        <a href="../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>l</span><span class='Delimiter'>; 
</span> 
        <a href="../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1772"><span class='Ref_To_Local'>l</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN1771"><span class='Ref_To_Local'>rcexpr</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1030"><span class='Ref_to_Member'>opnos</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="dependency.c.html#LN199"><span class='Ref_to_Proto'>add_object_address</span></a><span class='Parentheses'>(</span><a href="../../include/catalog/dependency.h.html#LN140"><span class='Ref_to_EnumConst'>OCLASS_OPERATOR</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/pg_list.h.html#LN107"><span class='Ref_to_Macro'>lfirst_oid</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1772"><span class='Ref_To_Local'>l</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                               <a href="dependency.c.html#LN1487"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN129"><span class='Ref_to_Member'>addrs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <a href="../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1772"><span class='Ref_To_Local'>l</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN1771"><span class='Ref_To_Local'>rcexpr</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1031"><span class='Ref_to_Member'>opfamilies</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="dependency.c.html#LN199"><span class='Ref_to_Proto'>add_object_address</span></a><span class='Parentheses'>(</span><a href="../../include/catalog/dependency.h.html#LN142"><span class='Ref_to_EnumConst'>OCLASS_OPFAMILY</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/pg_list.h.html#LN107"><span class='Ref_to_Macro'>lfirst_oid</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1772"><span class='Ref_To_Local'>l</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                               <a href="dependency.c.html#LN1487"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN129"><span class='Ref_to_Member'>addrs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Comment_Multi_Line'>/* fall through to examine arguments */ 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1486"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/primnodes.h.html#LN1215"><span class='Ref_to_Struct'>CoerceToDomain</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN1788"></a>        <a href="../../include/nodes/primnodes.h.html#LN1215"><span class='Ref_to_Struct'>CoerceToDomain</span></a> <span class='Operator'>*</span><span class='Declare_Local'>cd</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN1215"><span class='Ref_to_Struct'>CoerceToDomain</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="dependency.c.html#LN1486"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span> 
        <a href="dependency.c.html#LN199"><span class='Ref_to_Proto'>add_object_address</span></a><span class='Parentheses'>(</span><a href="../../include/catalog/dependency.h.html#LN132"><span class='Ref_to_EnumConst'>OCLASS_TYPE</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN1788"><span class='Ref_To_Local'>cd</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1219"><span class='Ref_to_Member'>resulttype</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                           <a href="dependency.c.html#LN1487"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN129"><span class='Ref_to_Member'>addrs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1486"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/primnodes.h.html#LN1482"><span class='Ref_to_Struct'>OnConflictExpr</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN1795"></a>        <a href="../../include/nodes/primnodes.h.html#LN1482"><span class='Ref_to_Struct'>OnConflictExpr</span></a> <span class='Operator'>*</span><span class='Declare_Local'>onconflict</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN1482"><span class='Ref_to_Struct'>OnConflictExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="dependency.c.html#LN1486"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1795"><span class='Ref_To_Local'>onconflict</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1491"><span class='Ref_to_Member'>constraint</span></a><span class='Parentheses'>))</span> 
            <a href="dependency.c.html#LN199"><span class='Ref_to_Proto'>add_object_address</span></a><span class='Parentheses'>(</span><a href="../../include/catalog/dependency.h.html#LN135"><span class='Ref_to_EnumConst'>OCLASS_CONSTRAINT</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN1795"><span class='Ref_To_Local'>onconflict</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1491"><span class='Ref_to_Member'>constraint</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                               <a href="dependency.c.html#LN1487"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN129"><span class='Ref_to_Member'>addrs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* fall through to examine arguments */ 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1486"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/parsenodes.h.html#LN1161"><span class='Ref_to_Struct'>SortGroupClause</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN1804"></a>        <a href="../../include/nodes/parsenodes.h.html#LN1161"><span class='Ref_to_Struct'>SortGroupClause</span></a> <span class='Operator'>*</span><span class='Declare_Local'>sgc</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/parsenodes.h.html#LN1161"><span class='Ref_to_Struct'>SortGroupClause</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="dependency.c.html#LN1486"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span> 
        <a href="dependency.c.html#LN199"><span class='Ref_to_Proto'>add_object_address</span></a><span class='Parentheses'>(</span><a href="../../include/catalog/dependency.h.html#LN140"><span class='Ref_to_EnumConst'>OCLASS_OPERATOR</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN1804"><span class='Ref_To_Local'>sgc</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN1165"><span class='Ref_to_Member'>eqop</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                           <a href="dependency.c.html#LN1487"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN129"><span class='Ref_to_Member'>addrs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1804"><span class='Ref_To_Local'>sgc</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN1166"><span class='Ref_to_Member'>sortop</span></a><span class='Parentheses'>))</span> 
            <a href="dependency.c.html#LN199"><span class='Ref_to_Proto'>add_object_address</span></a><span class='Parentheses'>(</span><a href="../../include/catalog/dependency.h.html#LN140"><span class='Ref_to_EnumConst'>OCLASS_OPERATOR</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN1804"><span class='Ref_To_Local'>sgc</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN1166"><span class='Ref_to_Member'>sortop</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                               <a href="dependency.c.html#LN1487"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN129"><span class='Ref_to_Member'>addrs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1486"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/parsenodes.h.html#LN105"><span class='Ref_to_Struct'>Query</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Recurse into RTE subquery or not-yet-planned sublink subquery */ 
</span><a name="LN1816"></a>        <a href="../../include/nodes/parsenodes.h.html#LN105"><span class='Ref_to_Struct'>Query</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>query</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/parsenodes.h.html#LN105"><span class='Ref_to_Struct'>Query</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="dependency.c.html#LN1486"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span><a name="LN1817"></a>        <a href="../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc</span><span class='Delimiter'>; 
</span><a name="LN1818"></a>        <span class='Keyword'>bool</span>        <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Add whole-relation refs for each plain relation mentioned in the 
         * subquery's rtable. 
         * 
         * Note: query_tree_walker takes care of recursing into RTE_FUNCTION 
         * RTEs, subqueries, etc, so no need to do that here.  But keep it 
         * from looking at join alias lists. 
         * 
         * Note: we don't need to worry about collations mentioned in 
         * RTE_VALUES or RTE_CTE RTEs, because those must just duplicate 
         * collations referenced in other parts of the Query.  We do have to 
         * worry about collations mentioned in RTE_FUNCTION, but we take care 
         * of those when we recurse to the RangeTblFunction node(s). 
         */ 
</span>        <a href="../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1817"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN1816"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN134"><span class='Ref_to_Member'>rtable</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN1836"></a>            <a href="../../include/nodes/parsenodes.h.html#LN932"><span class='Ref_to_Struct'>RangeTblEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>rte</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/parsenodes.h.html#LN932"><span class='Ref_to_Struct'>RangeTblEntry</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1817"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN1836"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN936"><span class='Ref_to_Member'>rtekind</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Control'>case</span> <a href="../../include/nodes/parsenodes.h.html#LN922"><span class='Ref_to_EnumConst'>RTE_RELATION</span></a><span class='Operator'>: 
</span>                    <a href="dependency.c.html#LN199"><span class='Ref_to_Proto'>add_object_address</span></a><span class='Parentheses'>(</span><a href="../../include/catalog/dependency.h.html#LN130"><span class='Ref_to_EnumConst'>OCLASS_CLASS</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN1836"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN947"><span class='Ref_to_Member'>relid</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                                       <a href="dependency.c.html#LN1487"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN129"><span class='Ref_to_Member'>addrs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Control'>default</span><span class='Operator'>: 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * If the query is an INSERT or UPDATE, we should create a dependency 
         * on each target column, to prevent the specific target column from 
         * being dropped.  Although we will visit the TargetEntry nodes again 
         * during query_tree_walker, we won't have enough context to do this 
         * conveniently, so do it here. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN1816"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN109"><span class='Ref_to_Member'>commandType</span></a> <span class='Operator'>== </span><a href="../../include/nodes/nodes.h.html#LN652"><span class='Ref_to_EnumConst'>CMD_INSERT</span></a> <span class='Operator'>|| 
</span>            <a href="dependency.c.html#LN1816"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN109"><span class='Ref_to_Member'>commandType</span></a> <span class='Operator'>== </span><a href="../../include/nodes/nodes.h.html#LN651"><span class='Ref_to_EnumConst'>CMD_UPDATE</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN1859"></a>            <a href="../../include/nodes/parsenodes.h.html#LN932"><span class='Ref_to_Struct'>RangeTblEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>rte</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN1816"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN119"><span class='Ref_to_Member'>resultRelation</span></a> <span class='Operator'>&LT;= </span><span class='Number'>0</span> <span class='Operator'>|| 
</span>                <a href="dependency.c.html#LN1816"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN119"><span class='Ref_to_Member'>resultRelation</span></a> <span class='Operator'>&GT; </span><a href="../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1816"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN134"><span class='Ref_to_Member'>rtable</span></a><span class='Parentheses'>))</span> 
                <a href="../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"invalid resultRelation %d"</span><span class='Delimiter'>, 
</span>                     <a href="dependency.c.html#LN1816"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN119"><span class='Ref_to_Member'>resultRelation</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="dependency.c.html#LN1859"><span class='Ref_To_Local'>rte</span></a> <span class='Operator'>= </span><a href="../../include/parser/parsetree.h.html#LN30"><span class='Ref_to_Macro'>rt_fetch</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1816"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN119"><span class='Ref_to_Member'>resultRelation</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN1816"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN134"><span class='Ref_to_Member'>rtable</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN1859"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN936"><span class='Ref_to_Member'>rtekind</span></a> <span class='Operator'>== </span><a href="../../include/nodes/parsenodes.h.html#LN922"><span class='Ref_to_EnumConst'>RTE_RELATION</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <a href="../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1817"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN1816"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN137"><span class='Ref_to_Member'>targetList</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span><a name="LN1870"></a>                    <a href="../../include/nodes/primnodes.h.html#LN1363"><span class='Ref_to_Struct'>TargetEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>tle</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN1363"><span class='Ref_to_Struct'>TargetEntry</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1817"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN1870"><span class='Ref_To_Local'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1373"><span class='Ref_to_Member'>resjunk</span></a><span class='Parentheses'>) 
</span>                        <span class='Control'>continue</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* ignore junk tlist items */ 
</span>                    <a href="dependency.c.html#LN199"><span class='Ref_to_Proto'>add_object_address</span></a><span class='Parentheses'>(</span><a href="../../include/catalog/dependency.h.html#LN130"><span class='Ref_to_EnumConst'>OCLASS_CLASS</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN1859"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN947"><span class='Ref_to_Member'>relid</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN1870"><span class='Ref_To_Local'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1367"><span class='Ref_to_Member'>resno</span></a><span class='Delimiter'>, 
</span>                                       <a href="dependency.c.html#LN1487"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN129"><span class='Ref_to_Member'>addrs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if query-&GT;commandType==C... &raquo; </span> 
 
        <span class='Comment_Multi_Line'>/* 
         * Add dependencies on constraints listed in query's constraintDeps 
         */ 
</span>        <a href="../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1817"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN1816"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN165"><span class='Ref_to_Member'>constraintDeps</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="dependency.c.html#LN199"><span class='Ref_to_Proto'>add_object_address</span></a><span class='Parentheses'>(</span><a href="../../include/catalog/dependency.h.html#LN135"><span class='Ref_to_EnumConst'>OCLASS_CONSTRAINT</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/pg_list.h.html#LN107"><span class='Ref_to_Macro'>lfirst_oid</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1817"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                               <a href="dependency.c.html#LN1487"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN129"><span class='Ref_to_Member'>addrs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Comment_Multi_Line'>/* query_tree_walker ignores ORDER BY etc, but we need those opers */ 
</span>        <a href="dependency.c.html#LN195"><span class='Ref_to_Proto'>find_expr_references_walker</span></a><span class='Parentheses'>((</span><a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="dependency.c.html#LN1816"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN155"><span class='Ref_to_Member'>sortClause</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN1487"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="dependency.c.html#LN195"><span class='Ref_to_Proto'>find_expr_references_walker</span></a><span class='Parentheses'>((</span><a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="dependency.c.html#LN1816"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN145"><span class='Ref_to_Member'>groupClause</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN1487"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="dependency.c.html#LN195"><span class='Ref_to_Proto'>find_expr_references_walker</span></a><span class='Parentheses'>((</span><a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="dependency.c.html#LN1816"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN151"><span class='Ref_to_Member'>windowClause</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN1487"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="dependency.c.html#LN195"><span class='Ref_to_Proto'>find_expr_references_walker</span></a><span class='Parentheses'>((</span><a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="dependency.c.html#LN1816"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN153"><span class='Ref_to_Member'>distinctClause</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN1487"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Examine substructure of query */ 
</span>        <a href="dependency.c.html#LN1487"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN130"><span class='Ref_to_Member'>rtables</span></a> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN215"><span class='Ref_to_Proto'>lcons</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1816"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN134"><span class='Ref_to_Member'>rtable</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN1487"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN130"><span class='Ref_to_Member'>rtables</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="dependency.c.html#LN1818"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../include/nodes/nodeFuncs.h.html#LN57"><span class='Ref_to_Proto'>query_tree_walker</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1816"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                                   <a href="dependency.c.html#LN195"><span class='Ref_to_Proto'>find_expr_references_walker</span></a><span class='Delimiter'>, 
</span>                                   <span class='Parentheses'>(</span><span class='Keyword'>void </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="dependency.c.html#LN1487"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, 
</span>                                   <a href="../../include/nodes/nodeFuncs.h.html#LN22"><span class='Ref_to_Const'>QTW_IGNORE_JOINALIASES</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="dependency.c.html#LN1487"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN130"><span class='Ref_to_Member'>rtables</span></a> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN237"><span class='Ref_to_Proto'>list_delete_first</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1487"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN130"><span class='Ref_to_Member'>rtables</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <a href="dependency.c.html#LN1818"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if IsA(node,Query) &raquo; </span> 
    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1486"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/parsenodes.h.html#LN1545"><span class='Ref_to_Struct'>SetOperationStmt</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN1906"></a>        <a href="../../include/nodes/parsenodes.h.html#LN1545"><span class='Ref_to_Struct'>SetOperationStmt</span></a> <span class='Operator'>*</span><span class='Declare_Local'>setop</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/parsenodes.h.html#LN1545"><span class='Ref_to_Struct'>SetOperationStmt</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="dependency.c.html#LN1486"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* we need to look at the groupClauses for operator references */ 
</span>        <a href="dependency.c.html#LN195"><span class='Ref_to_Proto'>find_expr_references_walker</span></a><span class='Parentheses'>((</span><a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="dependency.c.html#LN1906"><span class='Ref_To_Local'>setop</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN1558"><span class='Ref_to_Member'>groupClauses</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN1487"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* fall through to examine child nodes */ 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1486"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/parsenodes.h.html#LN1051"><span class='Ref_to_Struct'>RangeTblFunction</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN1914"></a>        <a href="../../include/nodes/parsenodes.h.html#LN1051"><span class='Ref_to_Struct'>RangeTblFunction</span></a> <span class='Operator'>*</span><span class='Declare_Local'>rtfunc</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/parsenodes.h.html#LN1051"><span class='Ref_to_Struct'>RangeTblFunction</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="dependency.c.html#LN1486"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span><a name="LN1915"></a>        <a href="../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>ct</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Add refs for any datatypes and collations used in a column 
         * definition list for a RECORD function.  (For other cases, it should 
         * be enough to depend on the function itself.) 
         */ 
</span>        <a href="../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1915"><span class='Ref_To_Local'>ct</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN1914"><span class='Ref_To_Local'>rtfunc</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN1059"><span class='Ref_to_Member'>funccoltypes</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="dependency.c.html#LN199"><span class='Ref_to_Proto'>add_object_address</span></a><span class='Parentheses'>(</span><a href="../../include/catalog/dependency.h.html#LN132"><span class='Ref_to_EnumConst'>OCLASS_TYPE</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/pg_list.h.html#LN107"><span class='Ref_to_Macro'>lfirst_oid</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1915"><span class='Ref_To_Local'>ct</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                               <a href="dependency.c.html#LN1487"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN129"><span class='Ref_to_Member'>addrs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <a href="../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1915"><span class='Ref_To_Local'>ct</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN1914"><span class='Ref_To_Local'>rtfunc</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN1061"><span class='Ref_to_Member'>funccolcollations</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN1929"></a>            <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>collid</span> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN107"><span class='Ref_to_Macro'>lfirst_oid</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1915"><span class='Ref_To_Local'>ct</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1929"><span class='Ref_To_Local'>collid</span></a><span class='Parentheses'>) </span><span class='Operator'>&& </span><a href="dependency.c.html#LN1929"><span class='Ref_To_Local'>collid</span></a> <span class='Operator'>!= </span><a href="../../include/catalog/pg_collation.h.html#LN74"><span class='Ref_to_Const'>DEFAULT_COLLATION_OID</span></a><span class='Parentheses'>)</span> 
                <a href="dependency.c.html#LN199"><span class='Ref_to_Proto'>add_object_address</span></a><span class='Parentheses'>(</span><a href="../../include/catalog/dependency.h.html#LN134"><span class='Ref_to_EnumConst'>OCLASS_COLLATION</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN1929"><span class='Ref_To_Local'>collid</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                                   <a href="dependency.c.html#LN1487"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN129"><span class='Ref_to_Member'>addrs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if IsA(node,RangeTblFunc... &raquo; </span> 
    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1486"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/parsenodes.h.html#LN1071"><span class='Ref_to_Struct'>TableSampleClause</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN1938"></a>        <a href="../../include/nodes/parsenodes.h.html#LN1071"><span class='Ref_to_Struct'>TableSampleClause</span></a> <span class='Operator'>*</span><span class='Declare_Local'>tsc</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/parsenodes.h.html#LN1071"><span class='Ref_to_Struct'>TableSampleClause</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="dependency.c.html#LN1486"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span> 
        <a href="dependency.c.html#LN199"><span class='Ref_to_Proto'>add_object_address</span></a><span class='Parentheses'>(</span><a href="../../include/catalog/dependency.h.html#LN131"><span class='Ref_to_EnumConst'>OCLASS_PROC</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN1938"><span class='Ref_To_Local'>tsc</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN1074"><span class='Ref_to_Member'>tsmhandler</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                           <a href="dependency.c.html#LN1487"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN129"><span class='Ref_to_Member'>addrs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* fall through to examine arguments */ 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1486"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/primnodes.h.html#LN1302"><span class='Ref_to_Struct'>NextValueExpr</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN1946"></a>        <a href="../../include/nodes/primnodes.h.html#LN1302"><span class='Ref_to_Struct'>NextValueExpr</span></a> <span class='Operator'>*</span><span class='Declare_Local'>nve</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN1302"><span class='Ref_to_Struct'>NextValueExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="dependency.c.html#LN1486"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span> 
        <a href="dependency.c.html#LN199"><span class='Ref_to_Proto'>add_object_address</span></a><span class='Parentheses'>(</span><a href="../../include/catalog/dependency.h.html#LN130"><span class='Ref_to_EnumConst'>OCLASS_CLASS</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN1946"><span class='Ref_To_Local'>nve</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1305"><span class='Ref_to_Member'>seqid</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                           <a href="dependency.c.html#LN1487"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN129"><span class='Ref_to_Member'>addrs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>return</span> <a href="../../include/nodes/nodeFuncs.h.html#LN52"><span class='Ref_to_Proto'>expression_tree_walker</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN1486"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN195"><span class='Ref_to_Proto'>find_expr_references_walker</span></a><span class='Delimiter'>, 
</span>                                  <span class='Parentheses'>(</span><span class='Keyword'>void </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="dependency.c.html#LN1487"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end find_expr_references_walker &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Given an array of dependency references, eliminate any duplicates. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN1960"></a><span class='Declare_Function'>eliminate_duplicate_dependencies</span><span class='Parentheses'>(</span><a href="dependency.c.html#LN108"><span class='Ref_to_Struct'>ObjectAddresses</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>addrs</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1962"></a>    <a href="../../include/catalog/objectaddress.h.html#LN23"><span class='Ref_to_Struct'>ObjectAddress</span></a> <span class='Operator'>*</span><span class='Declare_Local'>priorobj</span><span class='Delimiter'>; 
</span><a name="LN1963"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>oldref</span><span class='Delimiter'>, 
</span><a name="LN1964"></a>                <span class='Declare_Local'>newrefs</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * We can't sort if the array has "extra" data, because there's no way to 
     * keep it in sync.  Fortunately that combination of features is not 
     * needed. 
     */ 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><span class='Operator'>!</span><a href="dependency.c.html#LN1960"><span class='Ref_to_Parameter'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN111"><span class='Ref_to_Member'>extras</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN1960"><span class='Ref_to_Parameter'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN112"><span class='Ref_to_Member'>numrefs</span></a> <span class='Operator'>&LT;= </span><span class='Number'>1</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>;</span>                 <span class='Comment_Single_Line'>/* nothing to do */ 
</span> 
    <span class='Comment_Multi_Line'>/* Sort the refs so that duplicates are adjacent */ 
</span>    <a href="../../include/port.h.html#LN439"><span class='Ref_to_Macro'>qsort</span></a><span class='Parentheses'>((</span><span class='Keyword'>void </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="dependency.c.html#LN1960"><span class='Ref_to_Parameter'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN110"><span class='Ref_to_Member'>refs</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN1960"><span class='Ref_to_Parameter'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN112"><span class='Ref_to_Member'>numrefs</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/catalog/objectaddress.h.html#LN23"><span class='Ref_to_Struct'>ObjectAddress</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>          <a href="dependency.c.html#LN198"><span class='Ref_to_Proto'>object_address_comparator</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Remove dups */ 
</span>    <a href="dependency.c.html#LN1962"><span class='Ref_To_Local'>priorobj</span></a> <span class='Operator'>= </span><a href="dependency.c.html#LN1960"><span class='Ref_to_Parameter'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN110"><span class='Ref_to_Member'>refs</span></a><span class='Delimiter'>; 
</span>    <a href="dependency.c.html#LN1964"><span class='Ref_To_Local'>newrefs</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN1963"><span class='Ref_To_Local'>oldref</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; </span><a href="dependency.c.html#LN1963"><span class='Ref_To_Local'>oldref</span></a> <span class='Operator'>&LT; </span><a href="dependency.c.html#LN1960"><span class='Ref_to_Parameter'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN112"><span class='Ref_to_Member'>numrefs</span></a><span class='Delimiter'>; </span><a href="dependency.c.html#LN1963"><span class='Ref_To_Local'>oldref</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN1985"></a>        <a href="../../include/catalog/objectaddress.h.html#LN23"><span class='Ref_to_Struct'>ObjectAddress</span></a> <span class='Operator'>*</span><span class='Declare_Local'>thisobj</span> <span class='Operator'>= </span><a href="dependency.c.html#LN1960"><span class='Ref_to_Parameter'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN110"><span class='Ref_to_Member'>refs</span></a> <span class='Operator'>+ </span><a href="dependency.c.html#LN1963"><span class='Ref_To_Local'>oldref</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN1962"><span class='Ref_To_Local'>priorobj</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN25"><span class='Ref_to_Member'>classId</span></a> <span class='Operator'>== </span><a href="dependency.c.html#LN1985"><span class='Ref_To_Local'>thisobj</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN25"><span class='Ref_to_Member'>classId</span></a> <span class='Operator'>&& 
</span>            <a href="dependency.c.html#LN1962"><span class='Ref_To_Local'>priorobj</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a> <span class='Operator'>== </span><a href="dependency.c.html#LN1985"><span class='Ref_To_Local'>thisobj</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN1962"><span class='Ref_To_Local'>priorobj</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN27"><span class='Ref_to_Member'>objectSubId</span></a> <span class='Operator'>== </span><a href="dependency.c.html#LN1985"><span class='Ref_To_Local'>thisobj</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN27"><span class='Ref_to_Member'>objectSubId</span></a><span class='Parentheses'>) 
</span>                <span class='Control'>continue</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* identical, so drop thisobj */ 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * If we have a whole-object reference and a reference to a part 
             * of the same object, we don't need the whole-object reference 
             * (for example, we don't need to reference both table foo and 
             * column foo.bar).  The whole-object reference will always appear 
             * first in the sorted list. 
             */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN1962"><span class='Ref_To_Local'>priorobj</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN27"><span class='Ref_to_Member'>objectSubId</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* replace whole ref with partial */ 
</span>                <a href="dependency.c.html#LN1962"><span class='Ref_To_Local'>priorobj</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN27"><span class='Ref_to_Member'>objectSubId</span></a> <span class='Operator'>= </span><a href="dependency.c.html#LN1985"><span class='Ref_To_Local'>thisobj</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN27"><span class='Ref_to_Member'>objectSubId</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>continue</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if priorobj-&GT;classId==th... &raquo; </span> 
        <span class='Comment_Multi_Line'>/* Not identical, so add thisobj to output set */ 
</span>        <a href="dependency.c.html#LN1962"><span class='Ref_To_Local'>priorobj</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <span class='Operator'>*</span><a href="dependency.c.html#LN1962"><span class='Ref_To_Local'>priorobj</span></a> <span class='Operator'>= *</span><a href="dependency.c.html#LN1985"><span class='Ref_To_Local'>thisobj</span></a><span class='Delimiter'>; 
</span>        <a href="dependency.c.html#LN1964"><span class='Ref_To_Local'>newrefs</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for oldref=1;oldref&LT;addrs... &raquo; </span> 
 
    <a href="dependency.c.html#LN1960"><span class='Ref_to_Parameter'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN112"><span class='Ref_to_Member'>numrefs</span></a> <span class='Operator'>= </span><a href="dependency.c.html#LN1964"><span class='Ref_To_Local'>newrefs</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end eliminate_duplicate_dependencies &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * qsort comparator for ObjectAddress items 
 */ 
</span><span class='Keyword'>static int 
</span><a name="LN2020"></a><span class='Declare_Function'>object_address_comparator</span><span class='Parentheses'>(</span><span class='Keyword'>const void </span><span class='Operator'>*</span><span class='Declare_Parameter'>a</span><span class='Delimiter'>, </span><span class='Keyword'>const void </span><span class='Operator'>*</span><span class='Declare_Parameter'>b</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2022"></a>    <span class='Keyword'>const </span><a href="../../include/catalog/objectaddress.h.html#LN23"><span class='Ref_to_Struct'>ObjectAddress</span></a> <span class='Operator'>*</span><span class='Declare_Local'>obja</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>const </span><a href="../../include/catalog/objectaddress.h.html#LN23"><span class='Ref_to_Struct'>ObjectAddress</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="dependency.c.html#LN2020"><span class='Ref_to_Parameter'>a</span></a><span class='Delimiter'>; 
</span><a name="LN2023"></a>    <span class='Keyword'>const </span><a href="../../include/catalog/objectaddress.h.html#LN23"><span class='Ref_to_Struct'>ObjectAddress</span></a> <span class='Operator'>*</span><span class='Declare_Local'>objb</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>const </span><a href="../../include/catalog/objectaddress.h.html#LN23"><span class='Ref_to_Struct'>ObjectAddress</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="dependency.c.html#LN2020"><span class='Ref_to_Parameter'>b</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN2022"><span class='Ref_To_Local'>obja</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN25"><span class='Ref_to_Member'>classId</span></a> <span class='Operator'>&LT; </span><a href="dependency.c.html#LN2023"><span class='Ref_To_Local'>objb</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN25"><span class='Ref_to_Member'>classId</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN2022"><span class='Ref_To_Local'>obja</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN25"><span class='Ref_to_Member'>classId</span></a> <span class='Operator'>&GT; </span><a href="dependency.c.html#LN2023"><span class='Ref_To_Local'>objb</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN25"><span class='Ref_to_Member'>classId</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN2022"><span class='Ref_To_Local'>obja</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a> <span class='Operator'>&LT; </span><a href="dependency.c.html#LN2023"><span class='Ref_To_Local'>objb</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN2022"><span class='Ref_To_Local'>obja</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a> <span class='Operator'>&GT; </span><a href="dependency.c.html#LN2023"><span class='Ref_To_Local'>objb</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Number'>1</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * We sort the subId as an unsigned int so that 0 will come first. See 
     * logic in eliminate_duplicate_dependencies. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>((</span><span class='Keyword'>unsigned int</span><span class='Parentheses'>) </span><a href="dependency.c.html#LN2022"><span class='Ref_To_Local'>obja</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN27"><span class='Ref_to_Member'>objectSubId</span></a> <span class='Operator'>&LT; </span><span class='Parentheses'>(</span><span class='Keyword'>unsigned int</span><span class='Parentheses'>) </span><a href="dependency.c.html#LN2023"><span class='Ref_To_Local'>objb</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN27"><span class='Ref_to_Member'>objectSubId</span></a><span class='Parentheses'>)</span> 
        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>((</span><span class='Keyword'>unsigned int</span><span class='Parentheses'>) </span><a href="dependency.c.html#LN2022"><span class='Ref_To_Local'>obja</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN27"><span class='Ref_to_Member'>objectSubId</span></a> <span class='Operator'>&GT; </span><span class='Parentheses'>(</span><span class='Keyword'>unsigned int</span><span class='Parentheses'>) </span><a href="dependency.c.html#LN2023"><span class='Ref_To_Local'>objb</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN27"><span class='Ref_to_Member'>objectSubId</span></a><span class='Parentheses'>)</span> 
        <span class='Control'>return</span> <span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end object_address_comparator &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Routines for handling an expansible array of ObjectAddress items. 
 * 
 * new_object_addresses: create a new ObjectAddresses array. 
 */ 
</span><a href="dependency.c.html#LN108"><span class='Ref_to_Struct'>ObjectAddresses</span></a> <span class='Operator'>* 
</span><a name="LN2051"></a><span class='Declare_Function'>new_object_addresses</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2053"></a>    <a href="dependency.c.html#LN108"><span class='Ref_to_Struct'>ObjectAddresses</span></a> <span class='Operator'>*</span><span class='Declare_Local'>addrs</span><span class='Delimiter'>; 
</span> 
    <a href="dependency.c.html#LN2053"><span class='Ref_To_Local'>addrs</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="dependency.c.html#LN108"><span class='Ref_to_Struct'>ObjectAddresses</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="dependency.c.html#LN2053"><span class='Ref_To_Local'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN112"><span class='Ref_to_Member'>numrefs</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="dependency.c.html#LN2053"><span class='Ref_To_Local'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN113"><span class='Ref_to_Member'>maxrefs</span></a> <span class='Operator'>= </span><span class='Number'>32</span><span class='Delimiter'>; 
</span>    <a href="dependency.c.html#LN2053"><span class='Ref_To_Local'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN110"><span class='Ref_to_Member'>refs</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/catalog/objectaddress.h.html#LN23"><span class='Ref_to_Struct'>ObjectAddress</span></a> <span class='Operator'>*</span><span class='Parentheses'>) 
</span>        <a href="../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN2053"><span class='Ref_To_Local'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN113"><span class='Ref_to_Member'>maxrefs</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/catalog/objectaddress.h.html#LN23"><span class='Ref_to_Struct'>ObjectAddress</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="dependency.c.html#LN2053"><span class='Ref_To_Local'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN111"><span class='Ref_to_Member'>extras</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* until/unless needed */ 
</span> 
    <span class='Control'>return</span> <a href="dependency.c.html#LN2053"><span class='Ref_To_Local'>addrs</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Add an entry to an ObjectAddresses array. 
 * 
 * It is convenient to specify the class by ObjectClass rather than directly 
 * by catalog OID. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN2073"></a><span class='Declare_Function'>add_object_address</span><span class='Parentheses'>(</span><a href="../../include/catalog/dependency.h.html#LN128"><span class='Ref_to_Enum'>ObjectClass</span></a> <span class='Declare_Parameter'>oclass</span><span class='Delimiter'>, </span><a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>objectId</span><span class='Delimiter'>, </span><a href="../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a> <span class='Declare_Parameter'>subId</span><span class='Delimiter'>, 
</span><a name="LN2074"></a>                   <a href="dependency.c.html#LN108"><span class='Ref_to_Struct'>ObjectAddresses</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>addrs</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2076"></a>    <a href="../../include/catalog/objectaddress.h.html#LN23"><span class='Ref_to_Struct'>ObjectAddress</span></a> <span class='Operator'>*</span><span class='Declare_Local'>item</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Make sure object_classes is kept up to date with the ObjectClass enum. 
     */ 
</span>    <a href="../../include/c.h.html#LN751"><span class='Ref_to_Macro'>StaticAssertStmt</span></a><span class='Parentheses'>(</span><a href="../../include/c.h.html#LN561"><span class='Ref_to_Macro'>lengthof</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN137"><span class='Ref_to_Global_Var'>object_classes</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><a href="../../include/catalog/dependency.h.html#LN170"><span class='Ref_to_Const'>LAST_OCLASS</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>, 
</span>                     <span class='String'>"object_classes[] must cover all ObjectClasses"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* enlarge array if needed */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN2074"><span class='Ref_to_Parameter'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN112"><span class='Ref_to_Member'>numrefs</span></a> <span class='Operator'>&GT;= </span><a href="dependency.c.html#LN2074"><span class='Ref_to_Parameter'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN113"><span class='Ref_to_Member'>maxrefs</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="dependency.c.html#LN2074"><span class='Ref_to_Parameter'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN113"><span class='Ref_to_Member'>maxrefs</span></a> <span class='Operator'>*= </span><span class='Number'>2</span><span class='Delimiter'>; 
</span>        <a href="dependency.c.html#LN2074"><span class='Ref_to_Parameter'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN110"><span class='Ref_to_Member'>refs</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/catalog/objectaddress.h.html#LN23"><span class='Ref_to_Struct'>ObjectAddress</span></a> <span class='Operator'>*</span><span class='Parentheses'>) 
</span>            <a href="../../include/common/fe_memutils.h.html#LN36"><span class='Ref_to_Proto'>repalloc</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN2074"><span class='Ref_to_Parameter'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN110"><span class='Ref_to_Member'>refs</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN2074"><span class='Ref_to_Parameter'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN113"><span class='Ref_to_Member'>maxrefs</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/catalog/objectaddress.h.html#LN23"><span class='Ref_to_Struct'>ObjectAddress</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Debug'>Assert</span><span class='Parentheses'>(</span><span class='Operator'>!</span><a href="dependency.c.html#LN2074"><span class='Ref_to_Parameter'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN111"><span class='Ref_to_Member'>extras</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Comment_Multi_Line'>/* record this item */ 
</span>    <a href="dependency.c.html#LN2076"><span class='Ref_To_Local'>item</span></a> <span class='Operator'>= </span><a href="dependency.c.html#LN2074"><span class='Ref_to_Parameter'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN110"><span class='Ref_to_Member'>refs</span></a> <span class='Operator'>+ </span><a href="dependency.c.html#LN2074"><span class='Ref_to_Parameter'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN112"><span class='Ref_to_Member'>numrefs</span></a><span class='Delimiter'>; 
</span>    <a href="dependency.c.html#LN2076"><span class='Ref_To_Local'>item</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN25"><span class='Ref_to_Member'>classId</span></a> <span class='Operator'>= </span><a href="dependency.c.html#LN137"><span class='Ref_to_Global_Var'>object_classes</span></a><span class='Delimiter'>[</span><a href="dependency.c.html#LN2073"><span class='Ref_to_Parameter'>oclass</span></a><span class='Delimiter'>]; 
</span>    <a href="dependency.c.html#LN2076"><span class='Ref_To_Local'>item</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a> <span class='Operator'>= </span><a href="dependency.c.html#LN2073"><span class='Ref_to_Parameter'>objectId</span></a><span class='Delimiter'>; 
</span>    <a href="dependency.c.html#LN2076"><span class='Ref_To_Local'>item</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN27"><span class='Ref_to_Member'>objectSubId</span></a> <span class='Operator'>= </span><a href="dependency.c.html#LN2073"><span class='Ref_to_Parameter'>subId</span></a><span class='Delimiter'>; 
</span>    <a href="dependency.c.html#LN2074"><span class='Ref_to_Parameter'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN112"><span class='Ref_to_Member'>numrefs</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end add_object_address &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Add an entry to an ObjectAddresses array. 
 * 
 * As above, but specify entry exactly. 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN2106"></a><span class='Declare_Function'>add_exact_object_address</span><span class='Parentheses'>(</span><span class='Keyword'>const </span><a href="../../include/catalog/objectaddress.h.html#LN23"><span class='Ref_to_Struct'>ObjectAddress</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>object</span><span class='Delimiter'>, 
</span><a name="LN2107"></a>                         <a href="dependency.c.html#LN108"><span class='Ref_to_Struct'>ObjectAddresses</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>addrs</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2109"></a>    <a href="../../include/catalog/objectaddress.h.html#LN23"><span class='Ref_to_Struct'>ObjectAddress</span></a> <span class='Operator'>*</span><span class='Declare_Local'>item</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* enlarge array if needed */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN2107"><span class='Ref_to_Parameter'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN112"><span class='Ref_to_Member'>numrefs</span></a> <span class='Operator'>&GT;= </span><a href="dependency.c.html#LN2107"><span class='Ref_to_Parameter'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN113"><span class='Ref_to_Member'>maxrefs</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="dependency.c.html#LN2107"><span class='Ref_to_Parameter'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN113"><span class='Ref_to_Member'>maxrefs</span></a> <span class='Operator'>*= </span><span class='Number'>2</span><span class='Delimiter'>; 
</span>        <a href="dependency.c.html#LN2107"><span class='Ref_to_Parameter'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN110"><span class='Ref_to_Member'>refs</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/catalog/objectaddress.h.html#LN23"><span class='Ref_to_Struct'>ObjectAddress</span></a> <span class='Operator'>*</span><span class='Parentheses'>) 
</span>            <a href="../../include/common/fe_memutils.h.html#LN36"><span class='Ref_to_Proto'>repalloc</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN2107"><span class='Ref_to_Parameter'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN110"><span class='Ref_to_Member'>refs</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN2107"><span class='Ref_to_Parameter'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN113"><span class='Ref_to_Member'>maxrefs</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/catalog/objectaddress.h.html#LN23"><span class='Ref_to_Struct'>ObjectAddress</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Debug'>Assert</span><span class='Parentheses'>(</span><span class='Operator'>!</span><a href="dependency.c.html#LN2107"><span class='Ref_to_Parameter'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN111"><span class='Ref_to_Member'>extras</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Comment_Multi_Line'>/* record this item */ 
</span>    <a href="dependency.c.html#LN2109"><span class='Ref_To_Local'>item</span></a> <span class='Operator'>= </span><a href="dependency.c.html#LN2107"><span class='Ref_to_Parameter'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN110"><span class='Ref_to_Member'>refs</span></a> <span class='Operator'>+ </span><a href="dependency.c.html#LN2107"><span class='Ref_to_Parameter'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN112"><span class='Ref_to_Member'>numrefs</span></a><span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="dependency.c.html#LN2109"><span class='Ref_To_Local'>item</span></a> <span class='Operator'>= *</span><a href="dependency.c.html#LN2106"><span class='Ref_to_Parameter'>object</span></a><span class='Delimiter'>; 
</span>    <a href="dependency.c.html#LN2107"><span class='Ref_to_Parameter'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN112"><span class='Ref_to_Member'>numrefs</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Add an entry to an ObjectAddresses array. 
 * 
 * As above, but specify entry exactly and provide some "extra" data too. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN2131"></a><span class='Declare_Function'>add_exact_object_address_extra</span><span class='Parentheses'>(</span><span class='Keyword'>const </span><a href="../../include/catalog/objectaddress.h.html#LN23"><span class='Ref_to_Struct'>ObjectAddress</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>object</span><span class='Delimiter'>, 
</span><a name="LN2132"></a>                               <span class='Keyword'>const </span><a href="dependency.c.html#LN92"><span class='Ref_to_Typedef'>ObjectAddressExtra</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>extra</span><span class='Delimiter'>, 
</span><a name="LN2133"></a>                               <a href="dependency.c.html#LN108"><span class='Ref_to_Struct'>ObjectAddresses</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>addrs</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2135"></a>    <a href="../../include/catalog/objectaddress.h.html#LN23"><span class='Ref_to_Struct'>ObjectAddress</span></a> <span class='Operator'>*</span><span class='Declare_Local'>item</span><span class='Delimiter'>; 
</span><a name="LN2136"></a>    <a href="dependency.c.html#LN92"><span class='Ref_to_Typedef'>ObjectAddressExtra</span></a> <span class='Operator'>*</span><span class='Declare_Local'>itemextra</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* allocate extra space if first time */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="dependency.c.html#LN2133"><span class='Ref_to_Parameter'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN111"><span class='Ref_to_Member'>extras</span></a><span class='Parentheses'>) 
</span>        <a href="dependency.c.html#LN2133"><span class='Ref_to_Parameter'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN111"><span class='Ref_to_Member'>extras</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="dependency.c.html#LN92"><span class='Ref_to_Typedef'>ObjectAddressExtra</span></a> <span class='Operator'>*</span><span class='Parentheses'>) 
</span>            <a href="../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN2133"><span class='Ref_to_Parameter'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN113"><span class='Ref_to_Member'>maxrefs</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="dependency.c.html#LN92"><span class='Ref_to_Typedef'>ObjectAddressExtra</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* enlarge array if needed */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN2133"><span class='Ref_to_Parameter'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN112"><span class='Ref_to_Member'>numrefs</span></a> <span class='Operator'>&GT;= </span><a href="dependency.c.html#LN2133"><span class='Ref_to_Parameter'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN113"><span class='Ref_to_Member'>maxrefs</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="dependency.c.html#LN2133"><span class='Ref_to_Parameter'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN113"><span class='Ref_to_Member'>maxrefs</span></a> <span class='Operator'>*= </span><span class='Number'>2</span><span class='Delimiter'>; 
</span>        <a href="dependency.c.html#LN2133"><span class='Ref_to_Parameter'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN110"><span class='Ref_to_Member'>refs</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/catalog/objectaddress.h.html#LN23"><span class='Ref_to_Struct'>ObjectAddress</span></a> <span class='Operator'>*</span><span class='Parentheses'>) 
</span>            <a href="../../include/common/fe_memutils.h.html#LN36"><span class='Ref_to_Proto'>repalloc</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN2133"><span class='Ref_to_Parameter'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN110"><span class='Ref_to_Member'>refs</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN2133"><span class='Ref_to_Parameter'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN113"><span class='Ref_to_Member'>maxrefs</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/catalog/objectaddress.h.html#LN23"><span class='Ref_to_Struct'>ObjectAddress</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="dependency.c.html#LN2133"><span class='Ref_to_Parameter'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN111"><span class='Ref_to_Member'>extras</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="dependency.c.html#LN92"><span class='Ref_to_Typedef'>ObjectAddressExtra</span></a> <span class='Operator'>*</span><span class='Parentheses'>) 
</span>            <a href="../../include/common/fe_memutils.h.html#LN36"><span class='Ref_to_Proto'>repalloc</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN2133"><span class='Ref_to_Parameter'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN111"><span class='Ref_to_Member'>extras</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN2133"><span class='Ref_to_Parameter'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN113"><span class='Ref_to_Member'>maxrefs</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="dependency.c.html#LN92"><span class='Ref_to_Typedef'>ObjectAddressExtra</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Comment_Multi_Line'>/* record this item */ 
</span>    <a href="dependency.c.html#LN2135"><span class='Ref_To_Local'>item</span></a> <span class='Operator'>= </span><a href="dependency.c.html#LN2133"><span class='Ref_to_Parameter'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN110"><span class='Ref_to_Member'>refs</span></a> <span class='Operator'>+ </span><a href="dependency.c.html#LN2133"><span class='Ref_to_Parameter'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN112"><span class='Ref_to_Member'>numrefs</span></a><span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="dependency.c.html#LN2135"><span class='Ref_To_Local'>item</span></a> <span class='Operator'>= *</span><a href="dependency.c.html#LN2131"><span class='Ref_to_Parameter'>object</span></a><span class='Delimiter'>; 
</span>    <a href="dependency.c.html#LN2136"><span class='Ref_To_Local'>itemextra</span></a> <span class='Operator'>= </span><a href="dependency.c.html#LN2133"><span class='Ref_to_Parameter'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN111"><span class='Ref_to_Member'>extras</span></a> <span class='Operator'>+ </span><a href="dependency.c.html#LN2133"><span class='Ref_to_Parameter'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN112"><span class='Ref_to_Member'>numrefs</span></a><span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="dependency.c.html#LN2136"><span class='Ref_To_Local'>itemextra</span></a> <span class='Operator'>= *</span><a href="dependency.c.html#LN2132"><span class='Ref_to_Parameter'>extra</span></a><span class='Delimiter'>; 
</span>    <a href="dependency.c.html#LN2133"><span class='Ref_to_Parameter'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN112"><span class='Ref_to_Member'>numrefs</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end add_exact_object_address_extra &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Test whether an object is present in an ObjectAddresses array. 
 * 
 * We return "true" if object is a subobject of something in the array, too. 
 */ 
</span><span class='Keyword'>bool 
</span><a name="LN2166"></a><span class='Declare_Function'>object_address_present</span><span class='Parentheses'>(</span><span class='Keyword'>const </span><a href="../../include/catalog/objectaddress.h.html#LN23"><span class='Ref_to_Struct'>ObjectAddress</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>object</span><span class='Delimiter'>, 
</span><a name="LN2167"></a>                       <span class='Keyword'>const </span><a href="dependency.c.html#LN108"><span class='Ref_to_Struct'>ObjectAddresses</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>addrs</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2169"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN2169"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><a href="dependency.c.html#LN2167"><span class='Ref_to_Parameter'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN112"><span class='Ref_to_Member'>numrefs</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>; </span><a href="dependency.c.html#LN2169"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="dependency.c.html#LN2169"><span class='Ref_To_Local'>i</span></a><span class='Operator'>--</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN2173"></a>        <span class='Keyword'>const </span><a href="../../include/catalog/objectaddress.h.html#LN23"><span class='Ref_to_Struct'>ObjectAddress</span></a> <span class='Operator'>*</span><span class='Declare_Local'>thisobj</span> <span class='Operator'>= </span><a href="dependency.c.html#LN2167"><span class='Ref_to_Parameter'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN110"><span class='Ref_to_Member'>refs</span></a> <span class='Operator'>+ </span><a href="dependency.c.html#LN2169"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN2166"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN25"><span class='Ref_to_Member'>classId</span></a> <span class='Operator'>== </span><a href="dependency.c.html#LN2173"><span class='Ref_To_Local'>thisobj</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN25"><span class='Ref_to_Member'>classId</span></a> <span class='Operator'>&& 
</span>            <a href="dependency.c.html#LN2166"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a> <span class='Operator'>== </span><a href="dependency.c.html#LN2173"><span class='Ref_To_Local'>thisobj</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN2166"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN27"><span class='Ref_to_Member'>objectSubId</span></a> <span class='Operator'>== </span><a href="dependency.c.html#LN2173"><span class='Ref_To_Local'>thisobj</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN27"><span class='Ref_to_Member'>objectSubId</span></a> <span class='Operator'>|| 
</span>                <a href="dependency.c.html#LN2173"><span class='Ref_To_Local'>thisobj</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN27"><span class='Ref_to_Member'>objectSubId</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end object_address_present &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * As above, except that if the object is present then also OR the given 
 * flags into its associated extra data (which must exist). 
 */ 
</span><span class='Keyword'>static bool 
</span><a name="LN2192"></a><span class='Declare_Function'>object_address_present_add_flags</span><span class='Parentheses'>(</span><span class='Keyword'>const </span><a href="../../include/catalog/objectaddress.h.html#LN23"><span class='Ref_to_Struct'>ObjectAddress</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>object</span><span class='Delimiter'>, 
</span><a name="LN2193"></a>                                 <span class='Keyword'>int </span><span class='Declare_Parameter'>flags</span><span class='Delimiter'>, 
</span><a name="LN2194"></a>                                 <a href="dependency.c.html#LN108"><span class='Ref_to_Struct'>ObjectAddresses</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>addrs</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2196"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>result</span> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span><a name="LN2197"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN2197"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><a href="dependency.c.html#LN2194"><span class='Ref_to_Parameter'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN112"><span class='Ref_to_Member'>numrefs</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>; </span><a href="dependency.c.html#LN2197"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="dependency.c.html#LN2197"><span class='Ref_To_Local'>i</span></a><span class='Operator'>--</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN2201"></a>        <a href="../../include/catalog/objectaddress.h.html#LN23"><span class='Ref_to_Struct'>ObjectAddress</span></a> <span class='Operator'>*</span><span class='Declare_Local'>thisobj</span> <span class='Operator'>= </span><a href="dependency.c.html#LN2194"><span class='Ref_to_Parameter'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN110"><span class='Ref_to_Member'>refs</span></a> <span class='Operator'>+ </span><a href="dependency.c.html#LN2197"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN2192"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN25"><span class='Ref_to_Member'>classId</span></a> <span class='Operator'>== </span><a href="dependency.c.html#LN2201"><span class='Ref_To_Local'>thisobj</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN25"><span class='Ref_to_Member'>classId</span></a> <span class='Operator'>&& 
</span>            <a href="dependency.c.html#LN2192"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a> <span class='Operator'>== </span><a href="dependency.c.html#LN2201"><span class='Ref_To_Local'>thisobj</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN2192"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN27"><span class='Ref_to_Member'>objectSubId</span></a> <span class='Operator'>== </span><a href="dependency.c.html#LN2201"><span class='Ref_To_Local'>thisobj</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN27"><span class='Ref_to_Member'>objectSubId</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span><a name="LN2208"></a>                <a href="dependency.c.html#LN92"><span class='Ref_to_Typedef'>ObjectAddressExtra</span></a> <span class='Operator'>*</span><span class='Declare_Local'>thisextra</span> <span class='Operator'>= </span><a href="dependency.c.html#LN2194"><span class='Ref_to_Parameter'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN111"><span class='Ref_to_Member'>extras</span></a> <span class='Operator'>+ </span><a href="dependency.c.html#LN2197"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>; 
</span> 
                <a href="dependency.c.html#LN2208"><span class='Ref_To_Local'>thisextra</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN94"><span class='Ref_to_Member'>flags</span></a> <span class='Operator'>|= </span><a href="dependency.c.html#LN2193"><span class='Ref_to_Parameter'>flags</span></a><span class='Delimiter'>; 
</span>                <a href="dependency.c.html#LN2196"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN2201"><span class='Ref_To_Local'>thisobj</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN27"><span class='Ref_to_Member'>objectSubId</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* 
                 * We get here if we find a need to delete a column after 
                 * having already decided to drop its whole table.  Obviously 
                 * we no longer need to drop the subobject, so report that we 
                 * found the subobject in the array.  But don't plaster its 
                 * flags on the whole object. 
                 */ 
</span>                <a href="dependency.c.html#LN2196"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN2192"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN27"><span class='Ref_to_Member'>objectSubId</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* 
                 * We get here if we find a need to delete a whole table after 
                 * having already decided to drop one of its columns.  We 
                 * can't report that the whole object is in the array, but we 
                 * should mark the subobject with the whole object's flags. 
                 * 
                 * It might seem attractive to physically delete the column's 
                 * array entry, or at least mark it as no longer needing 
                 * separate deletion.  But that could lead to, e.g., dropping 
                 * the column's datatype before we drop the table, which does 
                 * not seem like a good idea.  This is a very rare situation 
                 * in practice, so we just take the hit of doing a separate 
                 * DROP COLUMN action even though we know we're gonna delete 
                 * the table later. 
                 * 
                 * Because there could be other subobjects of this object in 
                 * the array, this case means we always have to loop through 
                 * the whole array; we cannot exit early on a match. 
                 */ 
</span><a name="LN2245"></a>                <a href="dependency.c.html#LN92"><span class='Ref_to_Typedef'>ObjectAddressExtra</span></a> <span class='Operator'>*</span><span class='Declare_Local'>thisextra</span> <span class='Operator'>= </span><a href="dependency.c.html#LN2194"><span class='Ref_to_Parameter'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN111"><span class='Ref_to_Member'>extras</span></a> <span class='Operator'>+ </span><a href="dependency.c.html#LN2197"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>; 
</span> 
                <a href="dependency.c.html#LN2245"><span class='Ref_To_Local'>thisextra</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN94"><span class='Ref_to_Member'>flags</span></a> <span class='Operator'>|= </span><a href="dependency.c.html#LN2193"><span class='Ref_to_Parameter'>flags</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if object-&GT;objectSubId==... &raquo; </span> 
        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if object-&GT;classId==this... &raquo; </span> 
    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=addrs-&GT;numrefs-1;i&GT;... &raquo; </span> 
 
    <span class='Control'>return</span> <a href="dependency.c.html#LN2196"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end object_address_present_add_flags &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Similar to above, except we search an ObjectAddressStack. 
 */ 
</span><span class='Keyword'>static bool 
</span><a name="LN2259"></a><span class='Declare_Function'>stack_address_present_add_flags</span><span class='Parentheses'>(</span><span class='Keyword'>const </span><a href="../../include/catalog/objectaddress.h.html#LN23"><span class='Ref_to_Struct'>ObjectAddress</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>object</span><span class='Delimiter'>, 
</span><a name="LN2260"></a>                                <span class='Keyword'>int </span><span class='Declare_Parameter'>flags</span><span class='Delimiter'>, 
</span><a name="LN2261"></a>                                <a href="dependency.c.html#LN119"><span class='Ref_to_Struct'>ObjectAddressStack</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>stack</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2263"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>result</span> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span><a name="LN2264"></a>    <a href="dependency.c.html#LN119"><span class='Ref_to_Struct'>ObjectAddressStack</span></a> <span class='Operator'>*</span><span class='Declare_Local'>stackptr</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN2264"><span class='Ref_To_Local'>stackptr</span></a> <span class='Operator'>= </span><a href="dependency.c.html#LN2261"><span class='Ref_to_Parameter'>stack</span></a><span class='Delimiter'>; </span><a href="dependency.c.html#LN2264"><span class='Ref_To_Local'>stackptr</span></a><span class='Delimiter'>; </span><a href="dependency.c.html#LN2264"><span class='Ref_To_Local'>stackptr</span></a> <span class='Operator'>= </span><a href="dependency.c.html#LN2264"><span class='Ref_To_Local'>stackptr</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN123"><span class='Ref_to_Member'>next</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN2268"></a>        <span class='Keyword'>const </span><a href="../../include/catalog/objectaddress.h.html#LN23"><span class='Ref_to_Struct'>ObjectAddress</span></a> <span class='Operator'>*</span><span class='Declare_Local'>thisobj</span> <span class='Operator'>= </span><a href="dependency.c.html#LN2264"><span class='Ref_To_Local'>stackptr</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN121"><span class='Ref_to_Member'>object</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN2259"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN25"><span class='Ref_to_Member'>classId</span></a> <span class='Operator'>== </span><a href="dependency.c.html#LN2268"><span class='Ref_To_Local'>thisobj</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN25"><span class='Ref_to_Member'>classId</span></a> <span class='Operator'>&& 
</span>            <a href="dependency.c.html#LN2259"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a> <span class='Operator'>== </span><a href="dependency.c.html#LN2268"><span class='Ref_To_Local'>thisobj</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN2259"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN27"><span class='Ref_to_Member'>objectSubId</span></a> <span class='Operator'>== </span><a href="dependency.c.html#LN2268"><span class='Ref_To_Local'>thisobj</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN27"><span class='Ref_to_Member'>objectSubId</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <a href="dependency.c.html#LN2264"><span class='Ref_To_Local'>stackptr</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN122"><span class='Ref_to_Member'>flags</span></a> <span class='Operator'>|= </span><a href="dependency.c.html#LN2260"><span class='Ref_to_Parameter'>flags</span></a><span class='Delimiter'>; 
</span>                <a href="dependency.c.html#LN2263"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN2268"><span class='Ref_To_Local'>thisobj</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN27"><span class='Ref_to_Member'>objectSubId</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* 
                 * We're visiting a column with whole table already on stack. 
                 * As in object_address_present_add_flags(), we can skip 
                 * further processing of the subobject, but we don't want to 
                 * propagate flags for the subobject to the whole object. 
                 */ 
</span>                <a href="dependency.c.html#LN2263"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN2259"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN27"><span class='Ref_to_Member'>objectSubId</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* 
                 * We're visiting a table with column already on stack.  As in 
                 * object_address_present_add_flags(), we should propagate 
                 * flags for the whole object to each of its subobjects. 
                 */ 
</span>                <a href="dependency.c.html#LN2264"><span class='Ref_To_Local'>stackptr</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN122"><span class='Ref_to_Member'>flags</span></a> <span class='Operator'>|= </span><a href="dependency.c.html#LN2260"><span class='Ref_to_Parameter'>flags</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if object-&GT;classId==this... &raquo; </span> 
    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for stackptr=stack;stackp... &raquo; </span> 
 
    <span class='Control'>return</span> <a href="dependency.c.html#LN2263"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end stack_address_present_add_flags &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Record multiple dependencies from an ObjectAddresses array, after first 
 * removing any duplicates. 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN2308"></a><span class='Declare_Function'>record_object_address_dependencies</span><span class='Parentheses'>(</span><span class='Keyword'>const </span><a href="../../include/catalog/objectaddress.h.html#LN23"><span class='Ref_to_Struct'>ObjectAddress</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>depender</span><span class='Delimiter'>, 
</span><a name="LN2309"></a>                                   <a href="dependency.c.html#LN108"><span class='Ref_to_Struct'>ObjectAddresses</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>referenced</span><span class='Delimiter'>, 
</span><a name="LN2310"></a>                                   <a href="../../include/catalog/dependency.h.html#LN72"><span class='Ref_to_Enum'>DependencyType</span></a> <span class='Declare_Parameter'>behavior</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <a href="dependency.c.html#LN197"><span class='Ref_to_Proto'>eliminate_duplicate_dependencies</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN2309"><span class='Ref_to_Parameter'>referenced</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_depend.c.html#LN54"><span class='Ref_to_Func'>recordMultipleDependencies</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN2308"><span class='Ref_to_Parameter'>depender</span></a><span class='Delimiter'>, 
</span>                               <a href="dependency.c.html#LN2309"><span class='Ref_to_Parameter'>referenced</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN110"><span class='Ref_to_Member'>refs</span></a><span class='Delimiter'>, </span><a href="dependency.c.html#LN2309"><span class='Ref_to_Parameter'>referenced</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN112"><span class='Ref_to_Member'>numrefs</span></a><span class='Delimiter'>, 
</span>                               <a href="dependency.c.html#LN2310"><span class='Ref_to_Parameter'>behavior</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Clean up when done with an ObjectAddresses array. 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN2322"></a><span class='Declare_Function'>free_object_addresses</span><span class='Parentheses'>(</span><a href="dependency.c.html#LN108"><span class='Ref_to_Struct'>ObjectAddresses</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>addrs</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <a href="../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN2322"><span class='Ref_to_Parameter'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN110"><span class='Ref_to_Member'>refs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN2322"><span class='Ref_to_Parameter'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN111"><span class='Ref_to_Member'>extras</span></a><span class='Parentheses'>) 
</span>        <a href="../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN2322"><span class='Ref_to_Parameter'>addrs</span></a><span class='Operator'>-&GT;</span><a href="dependency.c.html#LN111"><span class='Ref_to_Member'>extras</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN2322"><span class='Ref_to_Parameter'>addrs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Determine the class of a given object identified by objectAddress. 
 * 
 * This function is essentially the reverse mapping for the object_classes[] 
 * table.  We implement it as a function because the OIDs aren't consecutive. 
 */ 
</span><a href="../../include/catalog/dependency.h.html#LN128"><span class='Ref_to_Enum'>ObjectClass</span></a> 
<a name="LN2337"></a><span class='Declare_Function'>getObjectClass</span><span class='Parentheses'>(</span><span class='Keyword'>const </span><a href="../../include/catalog/objectaddress.h.html#LN23"><span class='Ref_to_Struct'>ObjectAddress</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>object</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Comment_Multi_Line'>/* only pg_class entries can have nonzero objectSubId */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN2337"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN25"><span class='Ref_to_Member'>classId</span></a> <span class='Operator'>!= </span><a href="../../include/catalog/pg_class.h.html#LN28"><span class='Ref_to_Const'>RelationRelationId</span></a> <span class='Operator'>&& 
</span>        <a href="dependency.c.html#LN2337"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN27"><span class='Ref_to_Member'>objectSubId</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <a href="../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"invalid non-zero objectSubId for object class %u"</span><span class='Delimiter'>, 
</span>             <a href="dependency.c.html#LN2337"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN25"><span class='Ref_to_Member'>classId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="dependency.c.html#LN2337"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN25"><span class='Ref_to_Member'>classId</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>case</span> <a href="../../include/catalog/pg_class.h.html#LN28"><span class='Ref_to_Const'>RelationRelationId</span></a><span class='Operator'>: 
</span>            <span class='Comment_Multi_Line'>/* caller must check objectSubId */ 
</span>            <span class='Control'>return</span> <a href="../../include/catalog/dependency.h.html#LN130"><span class='Ref_to_EnumConst'>OCLASS_CLASS</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/pg_proc.h.html#LN32"><span class='Ref_to_Const'>ProcedureRelationId</span></a><span class='Operator'>: 
</span>            <span class='Control'>return</span> <a href="../../include/catalog/dependency.h.html#LN131"><span class='Ref_to_EnumConst'>OCLASS_PROC</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/pg_type.h.html#LN33"><span class='Ref_to_Const'>TypeRelationId</span></a><span class='Operator'>: 
</span>            <span class='Control'>return</span> <a href="../../include/catalog/dependency.h.html#LN132"><span class='Ref_to_EnumConst'>OCLASS_TYPE</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/pg_cast.h.html#LN30"><span class='Ref_to_Const'>CastRelationId</span></a><span class='Operator'>: 
</span>            <span class='Control'>return</span> <a href="../../include/catalog/dependency.h.html#LN133"><span class='Ref_to_EnumConst'>OCLASS_CAST</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/pg_collation.h.html#LN29"><span class='Ref_to_Const'>CollationRelationId</span></a><span class='Operator'>: 
</span>            <span class='Control'>return</span> <a href="../../include/catalog/dependency.h.html#LN134"><span class='Ref_to_EnumConst'>OCLASS_COLLATION</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/pg_constraint.h.html#LN28"><span class='Ref_to_Const'>ConstraintRelationId</span></a><span class='Operator'>: 
</span>            <span class='Control'>return</span> <a href="../../include/catalog/dependency.h.html#LN135"><span class='Ref_to_EnumConst'>OCLASS_CONSTRAINT</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/pg_conversion.h.html#LN37"><span class='Ref_to_Const'>ConversionRelationId</span></a><span class='Operator'>: 
</span>            <span class='Control'>return</span> <a href="../../include/catalog/dependency.h.html#LN136"><span class='Ref_to_EnumConst'>OCLASS_CONVERSION</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/pg_attrdef.h.html#LN28"><span class='Ref_to_Const'>AttrDefaultRelationId</span></a><span class='Operator'>: 
</span>            <span class='Control'>return</span> <a href="../../include/catalog/dependency.h.html#LN137"><span class='Ref_to_EnumConst'>OCLASS_DEFAULT</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/pg_language.h.html#LN28"><span class='Ref_to_Const'>LanguageRelationId</span></a><span class='Operator'>: 
</span>            <span class='Control'>return</span> <a href="../../include/catalog/dependency.h.html#LN138"><span class='Ref_to_EnumConst'>OCLASS_LANGUAGE</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/pg_largeobject.h.html#LN28"><span class='Ref_to_Const'>LargeObjectRelationId</span></a><span class='Operator'>: 
</span>            <span class='Control'>return</span> <a href="../../include/catalog/dependency.h.html#LN139"><span class='Ref_to_EnumConst'>OCLASS_LARGEOBJECT</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/pg_operator.h.html#LN31"><span class='Ref_to_Const'>OperatorRelationId</span></a><span class='Operator'>: 
</span>            <span class='Control'>return</span> <a href="../../include/catalog/dependency.h.html#LN140"><span class='Ref_to_EnumConst'>OCLASS_OPERATOR</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/pg_opclass.h.html#LN48"><span class='Ref_to_Const'>OperatorClassRelationId</span></a><span class='Operator'>: 
</span>            <span class='Control'>return</span> <a href="../../include/catalog/dependency.h.html#LN141"><span class='Ref_to_EnumConst'>OCLASS_OPCLASS</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/pg_opfamily.h.html#LN28"><span class='Ref_to_Const'>OperatorFamilyRelationId</span></a><span class='Operator'>: 
</span>            <span class='Control'>return</span> <a href="../../include/catalog/dependency.h.html#LN142"><span class='Ref_to_EnumConst'>OCLASS_OPFAMILY</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/pg_am.h.html#LN31"><span class='Ref_to_Const'>AccessMethodRelationId</span></a><span class='Operator'>: 
</span>            <span class='Control'>return</span> <a href="../../include/catalog/dependency.h.html#LN143"><span class='Ref_to_EnumConst'>OCLASS_AM</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/pg_amop.h.html#LN53"><span class='Ref_to_Const'>AccessMethodOperatorRelationId</span></a><span class='Operator'>: 
</span>            <span class='Control'>return</span> <a href="../../include/catalog/dependency.h.html#LN144"><span class='Ref_to_EnumConst'>OCLASS_AMOP</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/pg_amproc.h.html#LN42"><span class='Ref_to_Const'>AccessMethodProcedureRelationId</span></a><span class='Operator'>: 
</span>            <span class='Control'>return</span> <a href="../../include/catalog/dependency.h.html#LN145"><span class='Ref_to_EnumConst'>OCLASS_AMPROC</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/pg_rewrite.h.html#LN31"><span class='Ref_to_Const'>RewriteRelationId</span></a><span class='Operator'>: 
</span>            <span class='Control'>return</span> <a href="../../include/catalog/dependency.h.html#LN146"><span class='Ref_to_EnumConst'>OCLASS_REWRITE</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/pg_trigger.h.html#LN33"><span class='Ref_to_Const'>TriggerRelationId</span></a><span class='Operator'>: 
</span>            <span class='Control'>return</span> <a href="../../include/catalog/dependency.h.html#LN147"><span class='Ref_to_EnumConst'>OCLASS_TRIGGER</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/pg_namespace.h.html#LN33"><span class='Ref_to_Const'>NamespaceRelationId</span></a><span class='Operator'>: 
</span>            <span class='Control'>return</span> <a href="../../include/catalog/dependency.h.html#LN148"><span class='Ref_to_EnumConst'>OCLASS_SCHEMA</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/pg_statistic_ext.h.html#LN28"><span class='Ref_to_Const'>StatisticExtRelationId</span></a><span class='Operator'>: 
</span>            <span class='Control'>return</span> <a href="../../include/catalog/dependency.h.html#LN149"><span class='Ref_to_EnumConst'>OCLASS_STATISTIC_EXT</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/pg_ts_parser.h.html#LN30"><span class='Ref_to_Const'>TSParserRelationId</span></a><span class='Operator'>: 
</span>            <span class='Control'>return</span> <a href="../../include/catalog/dependency.h.html#LN150"><span class='Ref_to_EnumConst'>OCLASS_TSPARSER</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/pg_ts_dict.h.html#LN30"><span class='Ref_to_Const'>TSDictionaryRelationId</span></a><span class='Operator'>: 
</span>            <span class='Control'>return</span> <a href="../../include/catalog/dependency.h.html#LN151"><span class='Ref_to_EnumConst'>OCLASS_TSDICT</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/pg_ts_template.h.html#LN30"><span class='Ref_to_Const'>TSTemplateRelationId</span></a><span class='Operator'>: 
</span>            <span class='Control'>return</span> <a href="../../include/catalog/dependency.h.html#LN152"><span class='Ref_to_EnumConst'>OCLASS_TSTEMPLATE</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/pg_ts_config.h.html#LN30"><span class='Ref_to_Const'>TSConfigRelationId</span></a><span class='Operator'>: 
</span>            <span class='Control'>return</span> <a href="../../include/catalog/dependency.h.html#LN153"><span class='Ref_to_EnumConst'>OCLASS_TSCONFIG</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/pg_authid.h.html#LN41"><span class='Ref_to_Const'>AuthIdRelationId</span></a><span class='Operator'>: 
</span>            <span class='Control'>return</span> <a href="../../include/catalog/dependency.h.html#LN154"><span class='Ref_to_EnumConst'>OCLASS_ROLE</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/pg_database.h.html#LN28"><span class='Ref_to_Const'>DatabaseRelationId</span></a><span class='Operator'>: 
</span>            <span class='Control'>return</span> <a href="../../include/catalog/dependency.h.html#LN155"><span class='Ref_to_EnumConst'>OCLASS_DATABASE</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/pg_tablespace.h.html#LN28"><span class='Ref_to_Const'>TableSpaceRelationId</span></a><span class='Operator'>: 
</span>            <span class='Control'>return</span> <a href="../../include/catalog/dependency.h.html#LN156"><span class='Ref_to_EnumConst'>OCLASS_TBLSPACE</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/pg_foreign_data_wrapper.h.html#LN28"><span class='Ref_to_Const'>ForeignDataWrapperRelationId</span></a><span class='Operator'>: 
</span>            <span class='Control'>return</span> <a href="../../include/catalog/dependency.h.html#LN157"><span class='Ref_to_EnumConst'>OCLASS_FDW</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/pg_foreign_server.h.html#LN26"><span class='Ref_to_Const'>ForeignServerRelationId</span></a><span class='Operator'>: 
</span>            <span class='Control'>return</span> <a href="../../include/catalog/dependency.h.html#LN158"><span class='Ref_to_EnumConst'>OCLASS_FOREIGN_SERVER</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/pg_user_mapping.h.html#LN26"><span class='Ref_to_Const'>UserMappingRelationId</span></a><span class='Operator'>: 
</span>            <span class='Control'>return</span> <a href="../../include/catalog/dependency.h.html#LN159"><span class='Ref_to_EnumConst'>OCLASS_USER_MAPPING</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/pg_default_acl.h.html#LN27"><span class='Ref_to_Const'>DefaultAclRelationId</span></a><span class='Operator'>: 
</span>            <span class='Control'>return</span> <a href="../../include/catalog/dependency.h.html#LN160"><span class='Ref_to_EnumConst'>OCLASS_DEFACL</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/pg_extension.h.html#LN28"><span class='Ref_to_Const'>ExtensionRelationId</span></a><span class='Operator'>: 
</span>            <span class='Control'>return</span> <a href="../../include/catalog/dependency.h.html#LN161"><span class='Ref_to_EnumConst'>OCLASS_EXTENSION</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/pg_event_trigger.h.html#LN28"><span class='Ref_to_Const'>EventTriggerRelationId</span></a><span class='Operator'>: 
</span>            <span class='Control'>return</span> <a href="../../include/catalog/dependency.h.html#LN162"><span class='Ref_to_EnumConst'>OCLASS_EVENT_TRIGGER</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/pg_policy.h.html#LN18"><span class='Ref_to_Const'>PolicyRelationId</span></a><span class='Operator'>: 
</span>            <span class='Control'>return</span> <a href="../../include/catalog/dependency.h.html#LN163"><span class='Ref_to_EnumConst'>OCLASS_POLICY</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/pg_publication.h.html#LN28"><span class='Ref_to_Const'>PublicationRelationId</span></a><span class='Operator'>: 
</span>            <span class='Control'>return</span> <a href="../../include/catalog/dependency.h.html#LN164"><span class='Ref_to_EnumConst'>OCLASS_PUBLICATION</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/pg_publication_rel.h.html#LN27"><span class='Ref_to_Const'>PublicationRelRelationId</span></a><span class='Operator'>: 
</span>            <span class='Control'>return</span> <a href="../../include/catalog/dependency.h.html#LN165"><span class='Ref_to_EnumConst'>OCLASS_PUBLICATION_REL</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/pg_subscription.h.html#LN21"><span class='Ref_to_Const'>SubscriptionRelationId</span></a><span class='Operator'>: 
</span>            <span class='Control'>return</span> <a href="../../include/catalog/dependency.h.html#LN166"><span class='Ref_to_EnumConst'>OCLASS_SUBSCRIPTION</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../include/catalog/pg_transform.h.html#LN24"><span class='Ref_to_Const'>TransformRelationId</span></a><span class='Operator'>: 
</span>            <span class='Control'>return</span> <a href="../../include/catalog/dependency.h.html#LN167"><span class='Ref_to_EnumConst'>OCLASS_TRANSFORM</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch object-&GT;classId &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* shouldn't get here */ 
</span>    <a href="../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"unrecognized object class: %u"</span><span class='Delimiter'>, </span><a href="dependency.c.html#LN2337"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN25"><span class='Ref_to_Member'>classId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="../../include/catalog/dependency.h.html#LN130"><span class='Ref_to_EnumConst'>OCLASS_CLASS</span></a><span class='Delimiter'>;</span>        <span class='Comment_Single_Line'>/* keep compiler quiet */ 
</span><span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end getObjectClass &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * delete initial ACL for extension objects 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN2472"></a><span class='Declare_Function'>DeleteInitPrivs</span><span class='Parentheses'>(</span><span class='Keyword'>const </span><a href="../../include/catalog/objectaddress.h.html#LN23"><span class='Ref_to_Struct'>ObjectAddress</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>object</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2474"></a>    <a href="../../include/utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a>    <span class='Declare_Local'>relation</span><span class='Delimiter'>; 
</span><a name="LN2475"></a>    <a href="../../include/access/skey.h.html#LN63"><span class='Ref_to_Struct'>ScanKeyData</span></a> <span class='Declare_Local'>key</span><span class='Delimiter'>[</span><span class='Number'>3</span><span class='Delimiter'>]; 
</span><a name="LN2476"></a>    <a href="../../include/access/genam.h.html#LN86"><span class='Ref_to_Typedef'>SysScanDesc</span></a> <span class='Declare_Local'>scan</span><span class='Delimiter'>; 
</span><a name="LN2477"></a>    <a href="../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>oldtuple</span><span class='Delimiter'>; 
</span> 
    <a href="dependency.c.html#LN2474"><span class='Ref_To_Local'>relation</span></a> <span class='Operator'>= </span><a href="../../include/access/heapam.h.html#LN91"><span class='Ref_to_Proto'>heap_open</span></a><span class='Parentheses'>(</span><a href="../../include/catalog/pg_init_privs.h.html#LN41"><span class='Ref_to_Const'>InitPrivsRelationId</span></a><span class='Delimiter'>, </span><a href="../../include/storage/lockdefs.h.html#LN37"><span class='Ref_to_Const'>RowExclusiveLock</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../access/common/scankey.c.html#LN74"><span class='Ref_to_Func'>ScanKeyInit</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="dependency.c.html#LN2475"><span class='Ref_To_Local'>key</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>], 
</span>                <a href="../../include/catalog/pg_init_privs.h.html#LN68"><span class='Ref_to_Const'>Anum_pg_init_privs_objoid</span></a><span class='Delimiter'>, 
</span>                <a href="../../include/access/stratnum.h.html#LN30"><span class='Ref_to_Const'>BTEqualStrategyNumber</span></a><span class='Delimiter'>, </span>F_OIDEQ<span class='Delimiter'>, 
</span>                <a href="../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN2472"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN26"><span class='Ref_to_Member'>objectId</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../access/common/scankey.c.html#LN74"><span class='Ref_to_Func'>ScanKeyInit</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="dependency.c.html#LN2475"><span class='Ref_To_Local'>key</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>], 
</span>                <a href="../../include/catalog/pg_init_privs.h.html#LN69"><span class='Ref_to_Const'>Anum_pg_init_privs_classoid</span></a><span class='Delimiter'>, 
</span>                <a href="../../include/access/stratnum.h.html#LN30"><span class='Ref_to_Const'>BTEqualStrategyNumber</span></a><span class='Delimiter'>, </span>F_OIDEQ<span class='Delimiter'>, 
</span>                <a href="../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN2472"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN25"><span class='Ref_to_Member'>classId</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../access/common/scankey.c.html#LN74"><span class='Ref_to_Func'>ScanKeyInit</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="dependency.c.html#LN2475"><span class='Ref_To_Local'>key</span></a><span class='Delimiter'>[</span><span class='Number'>2</span><span class='Delimiter'>], 
</span>                <a href="../../include/catalog/pg_init_privs.h.html#LN70"><span class='Ref_to_Const'>Anum_pg_init_privs_objsubid</span></a><span class='Delimiter'>, 
</span>                <a href="../../include/access/stratnum.h.html#LN30"><span class='Ref_to_Const'>BTEqualStrategyNumber</span></a><span class='Delimiter'>, </span>F_INT4EQ<span class='Delimiter'>, 
</span>                <a href="../../include/postgres.h.html#LN484"><span class='Ref_to_Macro'>Int32GetDatum</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN2472"><span class='Ref_to_Parameter'>object</span></a><span class='Operator'>-&GT;</span><a href="../../include/catalog/objectaddress.h.html#LN27"><span class='Ref_to_Member'>objectSubId</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="dependency.c.html#LN2476"><span class='Ref_To_Local'>scan</span></a> <span class='Operator'>= </span><a href="../../include/access/genam.h.html#LN189"><span class='Ref_to_Proto'>systable_beginscan</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN2474"><span class='Ref_To_Local'>relation</span></a><span class='Delimiter'>, </span><a href="../../include/catalog/indexing.h.html#LN171"><span class='Ref_to_Const'>InitPrivsObjIndexId</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, 
</span>                              <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>3</span><span class='Delimiter'>, </span><a href="dependency.c.html#LN2475"><span class='Ref_To_Local'>key</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN2477"><span class='Ref_To_Local'>oldtuple</span></a> <span class='Operator'>= </span><a href="../../include/access/genam.h.html#LN194"><span class='Ref_to_Proto'>systable_getnext</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN2476"><span class='Ref_To_Local'>scan</span></a><span class='Parentheses'>)))</span> 
        <a href="../../include/catalog/indexing.h.html#LN40"><span class='Ref_to_Proto'>CatalogTupleDelete</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN2474"><span class='Ref_To_Local'>relation</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="dependency.c.html#LN2477"><span class='Ref_To_Local'>oldtuple</span></a><span class='Operator'>-&GT;</span><a href="../../include/access/htup.h.html#LN64"><span class='Ref_to_Member'>t_self</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../include/access/genam.h.html#LN196"><span class='Ref_to_Proto'>systable_endscan</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN2476"><span class='Ref_To_Local'>scan</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../include/access/heapam.h.html#LN96"><span class='Ref_to_Macro'>heap_close</span></a><span class='Parentheses'>(</span><a href="dependency.c.html#LN2474"><span class='Ref_To_Local'>relation</span></a><span class='Delimiter'>, </span><a href="../../include/storage/lockdefs.h.html#LN37"><span class='Ref_to_Const'>RowExclusiveLock</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end DeleteInitPrivs &raquo; </span> 
</pre>
<table bgcolor='#c0c0c0' width='100%'><tr><td><a href='../../../Contents.html'>Contents</a></td></tr>
</table><hr><p class='blurb' align='center'><a href='http://www.sourceinsight.com'>HTML Created by Source Insight Version 4.00.0084 Built on 2017-02-26</a></p>
</body></html>