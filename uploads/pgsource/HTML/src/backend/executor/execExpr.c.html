<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta name="generator" content="Source Insight Version 4.00.0084 Built on 2017-02-26">
<meta charset='UTF-8' />
<style type='text/css'><!--
TD {background-color: #C0C0C0; font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.blurb {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.filename {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 120%; font-weight: bold; }
.dirname {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 100%; font-weight: bold; margin-top: 2.5em;}
--></style>
<title>src\backend\executor\execExpr.c</title>
<LINK REL=StyleSheet HREF="../../../C_Cpp_Source_File.css" TYPE='text/css' MEDIA=screen>
</head>
<body bgcolor=#ffffff>
<table bgcolor='#c0c0c0' width='100%'>
<tr><td><p class='filename'><b>src\backend\executor\execExpr.c</b></p></td>
<td align='right'>
Wed Jun 14 08:25:38 2017
</td></tr>
<tr><td><a href='../../../Contents.html'>Contents</a></td></tr>
</table>
<pre>
<span class='Comment_Multi_Line'>/*------------------------------------------------------------------------- 
 * 
 * execExpr.c 
 *    Expression evaluation infrastructure. 
 * 
 *  During executor startup, we compile each expression tree (which has 
 *  previously been processed by the parser and planner) into an ExprState, 
 *  using ExecInitExpr() et al.  This converts the tree into a flat array 
 *  of ExprEvalSteps, which may be thought of as instructions in a program. 
 *  At runtime, we'll execute steps, starting with the first, until we reach 
 *  an EEOP_DONE opcode. 
 * 
 *  This file contains the "compilation" logic.  It is independent of the 
 *  specific execution technology we use (switch statement, computed goto, 
 *  JIT compilation, etc). 
 * 
 *  See src/backend/executor/README for some background, specifically the 
 *  "Expression Trees and ExprState nodes", "Expression Initialization", 
 *  and "Expression Evaluation" sections. 
 * 
 * 
 * Portions Copyright (c) 1996-2017, PostgreSQL Global Development Group 
 * Portions Copyright (c) 1994, Regents of the University of California 
 * 
 * 
 * IDENTIFICATION 
 *    src/backend/executor/execExpr.c 
 * 
 *------------------------------------------------------------------------- 
 */ 
</span><span class='Keyword'>#include </span><span class='String'>"postgres.h"</span> 
 
<span class='Keyword'>#include </span><span class='String'>"access/nbtree.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/objectaccess.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_type.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"executor/execExpr.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"executor/nodeSubplan.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"funcapi.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"miscadmin.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"nodes/makefuncs.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"nodes/nodeFuncs.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"optimizer/clauses.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"optimizer/planner.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"pgstat.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/builtins.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/lsyscache.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/typcache.h"</span> 
 
 
<a name="LN49"></a><span class='Control'>typedef</span> <span class='Control'>struct</span> <span class='Declare_Struct'>LastAttnumInfo</span> 
<span class='Delimiter'>{ 
</span><a name="LN51"></a>    <a href="../../include/access/attnum.h.html#LN20"><span class='Ref_to_Typedef'>AttrNumber</span></a>  <span class='Declare_Member'>last_inner</span><span class='Delimiter'>; 
</span><a name="LN52"></a>    <a href="../../include/access/attnum.h.html#LN20"><span class='Ref_to_Typedef'>AttrNumber</span></a>  <span class='Declare_Member'>last_outer</span><span class='Delimiter'>; 
</span><a name="LN53"></a>    <a href="../../include/access/attnum.h.html#LN20"><span class='Ref_to_Typedef'>AttrNumber</span></a>  <span class='Declare_Member'>last_scan</span><span class='Delimiter'>; 
</span><a name="LN54"></a>} <span class='Declare_Typedef'>LastAttnumInfo</span><span class='Delimiter'>; 
</span> 
<a name="LN56"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>ExecReadyExpr</span><span class='Parentheses'>(</span><a href="../../include/nodes/execnodes.h.html#LN52"><span class='Ref_to_Struct'>ExprState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>state</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN57"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>ExecInitExprRec</span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><a href="../../include/nodes/execnodes.h.html#LN808"><span class='Ref_to_Struct'>PlanState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>parent</span><span class='Delimiter'>, </span><a href="../../include/nodes/execnodes.h.html#LN52"><span class='Ref_to_Struct'>ExprState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>state</span><span class='Delimiter'>, 
</span><a name="LN58"></a>                <a href="../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>resv</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Declare_Parameter'>resnull</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN59"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>ExprEvalPushStep</span><span class='Parentheses'>(</span><a href="../../include/nodes/execnodes.h.html#LN52"><span class='Ref_to_Struct'>ExprState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>es</span><span class='Delimiter'>, </span><span class='Keyword'>const </span><a href="../../include/executor/execExpr.h.html#LN219"><span class='Ref_to_Struct'>ExprEvalStep</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>s</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN60"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>ExecInitFunc</span><span class='Parentheses'>(</span><a href="../../include/executor/execExpr.h.html#LN219"><span class='Ref_to_Struct'>ExprEvalStep</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>scratch</span><span class='Delimiter'>, </span><a href="../../include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>args</span><span class='Delimiter'>, 
</span><a name="LN61"></a>             <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>funcid</span><span class='Delimiter'>, </span><a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>inputcollid</span><span class='Delimiter'>, </span><a href="../../include/nodes/execnodes.h.html#LN808"><span class='Ref_to_Struct'>PlanState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>parent</span><span class='Delimiter'>, 
</span><a name="LN62"></a>             <a href="../../include/nodes/execnodes.h.html#LN52"><span class='Ref_to_Struct'>ExprState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>state</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN63"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>ExecInitExprSlots</span><span class='Parentheses'>(</span><a href="../../include/nodes/execnodes.h.html#LN52"><span class='Ref_to_Struct'>ExprState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>state</span><span class='Delimiter'>, </span><a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN64"></a><span class='Keyword'>static bool </span><span class='Declare_Prototype'>get_last_attnums_walker</span><span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><a href="execExpr.c.html#LN49"><span class='Ref_to_Struct'>LastAttnumInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>info</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN65"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>ExecInitWholeRowVar</span><span class='Parentheses'>(</span><a href="../../include/executor/execExpr.h.html#LN219"><span class='Ref_to_Struct'>ExprEvalStep</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>scratch</span><span class='Delimiter'>, </span><a href="../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>variable</span><span class='Delimiter'>, 
</span><a name="LN66"></a>                    <a href="../../include/nodes/execnodes.h.html#LN808"><span class='Ref_to_Struct'>PlanState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>parent</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN67"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>ExecInitArrayRef</span><span class='Parentheses'>(</span><a href="../../include/executor/execExpr.h.html#LN219"><span class='Ref_to_Struct'>ExprEvalStep</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>scratch</span><span class='Delimiter'>, </span><a href="../../include/nodes/primnodes.h.html#LN395"><span class='Ref_to_Struct'>ArrayRef</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>aref</span><span class='Delimiter'>, 
</span><a name="LN68"></a>                 <a href="../../include/nodes/execnodes.h.html#LN808"><span class='Ref_to_Struct'>PlanState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>parent</span><span class='Delimiter'>, </span><a href="../../include/nodes/execnodes.h.html#LN52"><span class='Ref_to_Struct'>ExprState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>state</span><span class='Delimiter'>, 
</span><a name="LN69"></a>                 <a href="../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>resv</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Declare_Parameter'>resnull</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN70"></a><span class='Keyword'>static bool </span><span class='Declare_Prototype'>isAssignmentIndirectionExpr</span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>expr</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN71"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>ExecInitCoerceToDomain</span><span class='Parentheses'>(</span><a href="../../include/executor/execExpr.h.html#LN219"><span class='Ref_to_Struct'>ExprEvalStep</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>scratch</span><span class='Delimiter'>, </span><a href="../../include/nodes/primnodes.h.html#LN1215"><span class='Ref_to_Struct'>CoerceToDomain</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>ctest</span><span class='Delimiter'>, 
</span><a name="LN72"></a>                       <a href="../../include/nodes/execnodes.h.html#LN808"><span class='Ref_to_Struct'>PlanState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>parent</span><span class='Delimiter'>, </span><a href="../../include/nodes/execnodes.h.html#LN52"><span class='Ref_to_Struct'>ExprState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>state</span><span class='Delimiter'>, 
</span><a name="LN73"></a>                       <a href="../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>resv</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Declare_Parameter'>resnull</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
 
<span class='Comment_Multi_Line'>/* 
 * ExecInitExpr: prepare an expression tree for execution 
 * 
 * This function builds and returns an ExprState implementing the given 
 * Expr node tree.  The return ExprState can then be handed to ExecEvalExpr 
 * for execution.  Because the Expr tree itself is read-only as far as 
 * ExecInitExpr and ExecEvalExpr are concerned, several different executions 
 * of the same plan tree can occur concurrently.  (But note that an ExprState 
 * does mutate at runtime, so it can't be re-used concurrently.) 
 * 
 * This must be called in a memory context that will last as long as repeated 
 * executions of the expression are needed.  Typically the context will be 
 * the same as the per-query context of the associated ExprContext. 
 * 
 * Any Aggref, WindowFunc, or SubPlan nodes found in the tree are added to 
 * the lists of such nodes held by the parent PlanState (or more accurately, 
 * the AggrefExprState etc. nodes created for them are added). 
 * 
 * Note: there is no ExecEndExpr function; we assume that any resource 
 * cleanup needed will be handled by just releasing the memory context 
 * in which the state tree is built.  Functions that require additional 
 * cleanup work can register a shutdown callback in the ExprContext. 
 * 
 *  'node' is the root of the expression tree to compile. 
 *  'parent' is the PlanState node that owns the expression. 
 * 
 * 'parent' may be NULL if we are preparing an expression that is not 
 * associated with a plan tree.  (If so, it can't have aggs or subplans.) 
 * Such cases should usually come through ExecPrepareExpr, not directly here. 
 * 
 * Also, if 'node' is NULL, we just return NULL.  This is convenient for some 
 * callers that may or may not have an expression that needs to be compiled. 
 * Note that a NULL ExprState pointer *cannot* be handed to ExecEvalExpr, 
 * although ExecQual and ExecCheck will accept one (and treat it as "true"). 
 */ 
</span><a href="../../include/nodes/execnodes.h.html#LN52"><span class='Ref_to_Struct'>ExprState</span></a> <span class='Operator'>* 
</span><a name="LN112"></a><span class='Declare_Function'>ExecInitExpr</span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><a href="../../include/nodes/execnodes.h.html#LN808"><span class='Ref_to_Struct'>PlanState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>parent</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN114"></a>    <a href="../../include/nodes/execnodes.h.html#LN52"><span class='Ref_to_Struct'>ExprState</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>state</span><span class='Delimiter'>; 
</span><a name="LN115"></a>    <a href="../../include/executor/execExpr.h.html#LN219"><span class='Ref_to_Struct'>ExprEvalStep</span></a> <span class='Declare_Local'>scratch</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Special case: NULL expression produces a NULL ExprState pointer */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN112"><span class='Ref_to_Parameter'>node</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Initialize ExprState with empty step list */ 
</span>    <a href="execExpr.c.html#LN114"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>= </span><a href="../../include/nodes/nodes.h.html#LN556"><span class='Ref_to_Macro'>makeNode</span></a><span class='Parentheses'>(</span><a href="../../include/nodes/execnodes.h.html#LN52"><span class='Ref_to_Struct'>ExprState</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="execExpr.c.html#LN114"><span class='Ref_To_Local'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN82"><span class='Ref_to_Member'>expr</span></a> <span class='Operator'>= </span><a href="execExpr.c.html#LN112"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Insert EEOP_*_FETCHSOME steps as needed */ 
</span>    <a href="execExpr.c.html#LN63"><span class='Ref_to_Proto'>ExecInitExprSlots</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN114"><span class='Ref_To_Local'>state</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN112"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Compile the expression proper */ 
</span>    <a href="execExpr.c.html#LN57"><span class='Ref_to_Proto'>ExecInitExprRec</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN112"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN112"><span class='Ref_to_Parameter'>parent</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN114"><span class='Ref_To_Local'>state</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="execExpr.c.html#LN114"><span class='Ref_To_Local'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN63"><span class='Ref_to_Member'>resvalue</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="execExpr.c.html#LN114"><span class='Ref_To_Local'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN62"><span class='Ref_to_Member'>resnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Finally, append a DONE step */ 
</span>    <a href="execExpr.c.html#LN115"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN39"><span class='Ref_to_EnumConst'>EEOP_DONE</span></a><span class='Delimiter'>; 
</span>    <a href="execExpr.c.html#LN59"><span class='Ref_to_Proto'>ExprEvalPushStep</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN114"><span class='Ref_To_Local'>state</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="execExpr.c.html#LN115"><span class='Ref_To_Local'>scratch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="execExpr.c.html#LN56"><span class='Ref_to_Proto'>ExecReadyExpr</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN114"><span class='Ref_To_Local'>state</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="execExpr.c.html#LN114"><span class='Ref_To_Local'>state</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end ExecInitExpr &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * ExecInitQual: prepare a qual for execution by ExecQual 
 * 
 * Prepares for the evaluation of a conjunctive boolean expression (qual list 
 * with implicit AND semantics) that returns true if none of the 
 * subexpressions are false. 
 * 
 * We must return true if the list is empty.  Since that's a very common case, 
 * we optimize it a bit further by translating to a NULL ExprState pointer 
 * rather than setting up an ExprState that computes constant TRUE.  (Some 
 * especially hot-spot callers of ExecQual detect this and avoid calling 
 * ExecQual at all.) 
 * 
 * If any of the subexpressions yield NULL, then the result of the conjunction 
 * is false.  This makes ExecQual primarily useful for evaluating WHERE 
 * clauses, since SQL specifies that tuples with null WHERE results do not 
 * get selected. 
 */ 
</span><a href="../../include/nodes/execnodes.h.html#LN52"><span class='Ref_to_Struct'>ExprState</span></a> <span class='Operator'>* 
</span><a name="LN159"></a><span class='Declare_Function'>ExecInitQual</span><span class='Parentheses'>(</span><a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>qual</span><span class='Delimiter'>, </span><a href="../../include/nodes/execnodes.h.html#LN808"><span class='Ref_to_Struct'>PlanState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>parent</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN161"></a>    <a href="../../include/nodes/execnodes.h.html#LN52"><span class='Ref_to_Struct'>ExprState</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>state</span><span class='Delimiter'>; 
</span><a name="LN162"></a>    <a href="../../include/executor/execExpr.h.html#LN219"><span class='Ref_to_Struct'>ExprEvalStep</span></a> <span class='Declare_Local'>scratch</span><span class='Delimiter'>; 
</span><a name="LN163"></a>    <a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>adjust_jumps</span> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span><a name="LN164"></a>    <a href="../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* short-circuit (here and in ExecQual) for empty restriction list */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN159"><span class='Ref_to_Parameter'>qual</span></a> <span class='Operator'>== </span><a href="../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN159"><span class='Ref_to_Parameter'>qual</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="execExpr.c.html#LN161"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>= </span><a href="../../include/nodes/nodes.h.html#LN556"><span class='Ref_to_Macro'>makeNode</span></a><span class='Parentheses'>(</span><a href="../../include/nodes/execnodes.h.html#LN52"><span class='Ref_to_Struct'>ExprState</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="execExpr.c.html#LN161"><span class='Ref_To_Local'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN82"><span class='Ref_to_Member'>expr</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN159"><span class='Ref_to_Parameter'>qual</span></a><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* mark expression as to be used with ExecQual() */ 
</span>    <a href="execExpr.c.html#LN161"><span class='Ref_To_Local'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN56"><span class='Ref_to_Member'>flags</span></a> <span class='Operator'>= </span><a href="../../include/nodes/execnodes.h.html#LN50"><span class='Ref_to_Const'>EEO_FLAG_IS_QUAL</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Insert EEOP_*_FETCHSOME steps as needed */ 
</span>    <a href="execExpr.c.html#LN63"><span class='Ref_to_Proto'>ExecInitExprSlots</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN161"><span class='Ref_To_Local'>state</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN159"><span class='Ref_to_Parameter'>qual</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * ExecQual() needs to return false for an expression returning NULL. That 
     * allows us to short-circuit the evaluation the first time a NULL is 
     * encountered.  As qual evaluation is a hot-path this warrants using a 
     * special opcode for qual evaluation that's simpler than BOOL_AND (which 
     * has more complex NULL handling). 
     */ 
</span>    <a href="execExpr.c.html#LN162"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN106"><span class='Ref_to_EnumConst'>EEOP_QUAL</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * We can use ExprState's resvalue/resnull as target for each qual expr. 
     */ 
</span>    <a href="execExpr.c.html#LN162"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN229"><span class='Ref_to_Member'>resvalue</span></a> <span class='Operator'>= &</span><a href="execExpr.c.html#LN161"><span class='Ref_To_Local'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN63"><span class='Ref_to_Member'>resvalue</span></a><span class='Delimiter'>; 
</span>    <a href="execExpr.c.html#LN162"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN230"><span class='Ref_to_Member'>resnull</span></a> <span class='Operator'>= &</span><a href="execExpr.c.html#LN161"><span class='Ref_To_Local'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN62"><span class='Ref_to_Member'>resnull</span></a><span class='Delimiter'>; 
</span> 
    <a href="../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN164"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN159"><span class='Ref_to_Parameter'>qual</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN197"></a>        <a href="../../include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>node</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN164"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* first evaluate expression */ 
</span>        <a href="execExpr.c.html#LN57"><span class='Ref_to_Proto'>ExecInitExprRec</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN197"><span class='Ref_To_Local'>node</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN159"><span class='Ref_to_Parameter'>parent</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN161"><span class='Ref_To_Local'>state</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="execExpr.c.html#LN161"><span class='Ref_To_Local'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN63"><span class='Ref_to_Member'>resvalue</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="execExpr.c.html#LN161"><span class='Ref_To_Local'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN62"><span class='Ref_to_Member'>resnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* then emit EEOP_QUAL to detect if it's false (or null) */ 
</span>        <a href="execExpr.c.html#LN162"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>qualexpr<span class='Operator'>.</span>jumpdone <span class='Operator'>= -</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <a href="execExpr.c.html#LN59"><span class='Ref_to_Proto'>ExprEvalPushStep</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN161"><span class='Ref_To_Local'>state</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="execExpr.c.html#LN162"><span class='Ref_To_Local'>scratch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="execExpr.c.html#LN163"><span class='Ref_To_Local'>adjust_jumps</span></a> <span class='Operator'>= </span><a href="../nodes/list.c.html#LN144"><span class='Ref_to_Func'>lappend_int</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN163"><span class='Ref_To_Local'>adjust_jumps</span></a><span class='Delimiter'>, 
</span>                                   <a href="execExpr.c.html#LN161"><span class='Ref_To_Local'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN88"><span class='Ref_to_Member'>steps_len</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* adjust jump targets */ 
</span>    <a href="../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN164"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN163"><span class='Ref_To_Local'>adjust_jumps</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN212"></a>        <a href="../../include/executor/execExpr.h.html#LN219"><span class='Ref_to_Struct'>ExprEvalStep</span></a> <span class='Operator'>*</span><span class='Declare_Local'>as</span> <span class='Operator'>= &</span><a href="execExpr.c.html#LN161"><span class='Ref_To_Local'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN73"><span class='Ref_to_Member'>steps</span></a><span class='Delimiter'>[</span><a href="../../include/nodes/pg_list.h.html#LN106"><span class='Ref_to_Macro'>lfirst_int</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN164"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>]; 
</span> 
        <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="execExpr.c.html#LN212"><span class='Ref_To_Local'>as</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>== </span><a href="../../include/executor/execExpr.h.html#LN106"><span class='Ref_to_EnumConst'>EEOP_QUAL</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="execExpr.c.html#LN212"><span class='Ref_To_Local'>as</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>qualexpr<span class='Operator'>.</span>jumpdone <span class='Operator'>== -</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="execExpr.c.html#LN212"><span class='Ref_To_Local'>as</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>qualexpr<span class='Operator'>.</span>jumpdone <span class='Operator'>= </span><a href="execExpr.c.html#LN161"><span class='Ref_To_Local'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN88"><span class='Ref_to_Member'>steps_len</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * At the end, we don't need to do anything more.  The last qual expr must 
     * have yielded TRUE, and since its result is stored in the desired output 
     * location, we're done. 
     */ 
</span>    <a href="execExpr.c.html#LN162"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN39"><span class='Ref_to_EnumConst'>EEOP_DONE</span></a><span class='Delimiter'>; 
</span>    <a href="execExpr.c.html#LN59"><span class='Ref_to_Proto'>ExprEvalPushStep</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN161"><span class='Ref_To_Local'>state</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="execExpr.c.html#LN162"><span class='Ref_To_Local'>scratch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="execExpr.c.html#LN56"><span class='Ref_to_Proto'>ExecReadyExpr</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN161"><span class='Ref_To_Local'>state</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="execExpr.c.html#LN161"><span class='Ref_To_Local'>state</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end ExecInitQual &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * ExecInitCheck: prepare a check constraint for execution by ExecCheck 
 * 
 * This is much like ExecInitQual/ExecQual, except that a null result from 
 * the conjunction is treated as TRUE.  This behavior is appropriate for 
 * evaluating CHECK constraints, since SQL specifies that NULL constraint 
 * conditions are not failures. 
 * 
 * Note that like ExecInitQual, this expects input in implicit-AND format. 
 * Users of ExecCheck that have expressions in normal explicit-AND format 
 * can just apply ExecInitExpr to produce suitable input for ExecCheck. 
 */ 
</span><a href="../../include/nodes/execnodes.h.html#LN52"><span class='Ref_to_Struct'>ExprState</span></a> <span class='Operator'>* 
</span><a name="LN245"></a><span class='Declare_Function'>ExecInitCheck</span><span class='Parentheses'>(</span><a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>qual</span><span class='Delimiter'>, </span><a href="../../include/nodes/execnodes.h.html#LN808"><span class='Ref_to_Struct'>PlanState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>parent</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Comment_Multi_Line'>/* short-circuit (here and in ExecCheck) for empty restriction list */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN245"><span class='Ref_to_Parameter'>qual</span></a> <span class='Operator'>== </span><a href="../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN245"><span class='Ref_to_Parameter'>qual</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Just convert the implicit-AND list to an explicit AND (if there's more 
     * than one entry), and compile normally.  Unlike ExecQual, we can't 
     * short-circuit on NULL results, so the regular AND behavior is needed. 
     */ 
</span>    <span class='Control'>return</span> <a href="execExpr.c.html#LN111"><span class='Ref_to_Func'>ExecInitExpr</span></a><span class='Parentheses'>(</span><a href="../../include/optimizer/clauses.h.html#LN45"><span class='Ref_to_Proto'>make_ands_explicit</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN245"><span class='Ref_to_Parameter'>qual</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="execExpr.c.html#LN245"><span class='Ref_to_Parameter'>parent</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Call ExecInitExpr() on a list of expressions, return a list of ExprStates. 
 */ 
</span><a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>* 
</span><a name="LN265"></a><span class='Declare_Function'>ExecInitExprList</span><span class='Parentheses'>(</span><a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>nodes</span><span class='Delimiter'>, </span><a href="../../include/nodes/execnodes.h.html#LN808"><span class='Ref_to_Struct'>PlanState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>parent</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN267"></a>    <a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>result</span> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span><a name="LN268"></a>    <a href="../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc</span><span class='Delimiter'>; 
</span> 
    <a href="../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN268"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN265"><span class='Ref_to_Parameter'>nodes</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN272"></a>        <a href="../../include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>e</span> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN268"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="execExpr.c.html#LN267"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../nodes/list.c.html#LN126"><span class='Ref_to_Func'>lappend</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN267"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN111"><span class='Ref_to_Func'>ExecInitExpr</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN272"><span class='Ref_To_Local'>e</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN265"><span class='Ref_to_Parameter'>parent</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>return</span> <a href="execExpr.c.html#LN267"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 *      ExecBuildProjectionInfo 
 * 
 * Build a ProjectionInfo node for evaluating the given tlist in the given 
 * econtext, and storing the result into the tuple slot.  (Caller must have 
 * ensured that tuple slot has a descriptor matching the tlist!) 
 * 
 * inputDesc can be NULL, but if it is not, we check to see whether simple 
 * Vars in the tlist match the descriptor.  It is important to provide 
 * inputDesc for relation-scan plan nodes, as a cross check that the relation 
 * hasn't been changed since the plan was made.  At higher levels of a plan, 
 * there is no need to recheck. 
 * 
 * This is implemented by internally building an ExprState that performs the 
 * whole projection in one go. 
 * 
 * Caution: before PG v10, the targetList was a list of ExprStates; now it 
 * should be the planner-created targetlist, since we do the compilation here. 
 */ 
</span><a href="../../include/nodes/execnodes.h.html#LN291"><span class='Ref_to_Struct'>ProjectionInfo</span></a> <span class='Operator'>* 
</span><a name="LN300"></a><span class='Declare_Function'>ExecBuildProjectionInfo</span><span class='Parentheses'>(</span><a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>targetList</span><span class='Delimiter'>, 
</span><a name="LN301"></a>                        <a href="../../include/nodes/execnodes.h.html#LN191"><span class='Ref_to_Struct'>ExprContext</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>econtext</span><span class='Delimiter'>, 
</span><a name="LN302"></a>                        <a href="../../include/executor/tuptable.h.html#LN112"><span class='Ref_to_Struct'>TupleTableSlot</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>slot</span><span class='Delimiter'>, 
</span><a name="LN303"></a>                        <a href="../../include/nodes/execnodes.h.html#LN808"><span class='Ref_to_Struct'>PlanState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>parent</span><span class='Delimiter'>, 
</span><a name="LN304"></a>                        <a href="../../include/access/tupdesc.h.html#LN70"><span class='Ref_to_Typedef'>TupleDesc</span></a> <span class='Declare_Parameter'>inputDesc</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN306"></a>    <a href="../../include/nodes/execnodes.h.html#LN291"><span class='Ref_to_Struct'>ProjectionInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>projInfo</span> <span class='Operator'>= </span><a href="../../include/nodes/nodes.h.html#LN556"><span class='Ref_to_Macro'>makeNode</span></a><span class='Parentheses'>(</span><a href="../../include/nodes/execnodes.h.html#LN291"><span class='Ref_to_Struct'>ProjectionInfo</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN307"></a>    <a href="../../include/nodes/execnodes.h.html#LN52"><span class='Ref_to_Struct'>ExprState</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>state</span><span class='Delimiter'>; 
</span><a name="LN308"></a>    <a href="../../include/executor/execExpr.h.html#LN219"><span class='Ref_to_Struct'>ExprEvalStep</span></a> <span class='Declare_Local'>scratch</span><span class='Delimiter'>; 
</span><a name="LN309"></a>    <a href="../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc</span><span class='Delimiter'>; 
</span> 
    <a href="execExpr.c.html#LN306"><span class='Ref_To_Local'>projInfo</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN297"><span class='Ref_to_Member'>pi_exprContext</span></a> <span class='Operator'>= </span><a href="execExpr.c.html#LN301"><span class='Ref_to_Parameter'>econtext</span></a><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* We embed ExprState into ProjectionInfo instead of doing extra palloc */ 
</span>    <a href="execExpr.c.html#LN306"><span class='Ref_To_Local'>projInfo</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN295"><span class='Ref_to_Member'>pi_state</span></a><span class='Operator'>.</span><a href="../../include/nodes/execnodes.h.html#LN54"><span class='Ref_to_Member'>tag</span></a><span class='Operator'>.</span><a href="../../../contrib/ltree/ltxtquery_io.c.html#LN28"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>= </span><a href="../../include/nodes/nodes.h.html#LN203"><span class='Ref_to_EnumConst'>T_ExprState</span></a><span class='Delimiter'>; 
</span>    <a href="execExpr.c.html#LN307"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>= &</span><a href="execExpr.c.html#LN306"><span class='Ref_To_Local'>projInfo</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN295"><span class='Ref_to_Member'>pi_state</span></a><span class='Delimiter'>; 
</span>    <a href="execExpr.c.html#LN307"><span class='Ref_To_Local'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN82"><span class='Ref_to_Member'>expr</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN300"><span class='Ref_to_Parameter'>targetList</span></a><span class='Delimiter'>; 
</span>    <a href="execExpr.c.html#LN307"><span class='Ref_To_Local'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN68"><span class='Ref_to_Member'>resultslot</span></a> <span class='Operator'>= </span><a href="execExpr.c.html#LN302"><span class='Ref_to_Parameter'>slot</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Insert EEOP_*_FETCHSOME steps as needed */ 
</span>    <a href="execExpr.c.html#LN63"><span class='Ref_to_Proto'>ExecInitExprSlots</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN307"><span class='Ref_To_Local'>state</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN300"><span class='Ref_to_Parameter'>targetList</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Now compile each tlist column */ 
</span>    <a href="../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN309"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN300"><span class='Ref_to_Parameter'>targetList</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN324"></a>        <a href="../../include/nodes/primnodes.h.html#LN1363"><span class='Ref_to_Struct'>TargetEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>tle</span> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN108"><span class='Ref_to_Macro'>lfirst_node</span></a><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN1363"><span class='Ref_to_Struct'>TargetEntry</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN309"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN325"></a>        <a href="../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>variable</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN326"></a>        <a href="../../include/access/attnum.h.html#LN20"><span class='Ref_to_Typedef'>AttrNumber</span></a>  <span class='Declare_Local'>attnum</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN327"></a>        <span class='Keyword'>bool</span>        <span class='Declare_Local'>isSafeVar</span> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * If tlist expression is a safe non-system Var, use the fast-path 
         * ASSIGN_*_VAR opcodes.  "Safe" means that we don't need to apply 
         * CheckVarSlotCompatibility() during plan startup.  If a source slot 
         * was provided, we make the equivalent tests here; if a slot was not 
         * provided, we assume that no check is needed because we're dealing 
         * with a non-relation-scan-level expression. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN324"><span class='Ref_To_Local'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1366"><span class='Ref_to_Member'>expr</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL </span><span class='Operator'>&& 
</span>            <a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN324"><span class='Ref_To_Local'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1366"><span class='Ref_to_Member'>expr</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a><span class='Parentheses'>)</span> <span class='Operator'>&& 
</span>            <span class='Parentheses'>((</span><a href="../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN324"><span class='Ref_To_Local'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1366"><span class='Ref_to_Member'>expr</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>varattno <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* Non-system Var, but how safe is it? */ 
</span>            <a href="execExpr.c.html#LN325"><span class='Ref_To_Local'>variable</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN324"><span class='Ref_To_Local'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1366"><span class='Ref_to_Member'>expr</span></a><span class='Delimiter'>; 
</span>            <a href="execExpr.c.html#LN326"><span class='Ref_To_Local'>attnum</span></a> <span class='Operator'>= </span><a href="execExpr.c.html#LN325"><span class='Ref_To_Local'>variable</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN167"><span class='Ref_to_Member'>varattno</span></a><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN304"><span class='Ref_to_Parameter'>inputDesc</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>                <a href="execExpr.c.html#LN327"><span class='Ref_To_Local'>isSafeVar</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* can't check, just assume OK */ 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN326"><span class='Ref_To_Local'>attnum</span></a> <span class='Operator'>&LT;= </span><a href="execExpr.c.html#LN304"><span class='Ref_to_Parameter'>inputDesc</span></a><span class='Operator'>-&GT;</span><a href="../../include/access/tupdesc.h.html#LN72"><span class='Ref_to_Member'>natts</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span><a name="LN349"></a>                <a href="../../include/catalog/pg_attribute.h.html#LN186"><span class='Ref_to_Typedef'>Form_pg_attribute</span></a> <span class='Declare_Local'>attr</span> <span class='Operator'>= </span><a href="execExpr.c.html#LN304"><span class='Ref_to_Parameter'>inputDesc</span></a><span class='Operator'>-&GT;</span><a href="../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="execExpr.c.html#LN326"><span class='Ref_To_Local'>attnum</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>]; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * If user attribute is dropped or has a type mismatch, don't 
                 * use ASSIGN_*_VAR.  Instead let the normal expression 
                 * machinery handle it (which'll possibly error out). 
                 */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="execExpr.c.html#LN349"><span class='Ref_To_Local'>attr</span></a><span class='Operator'>-&GT;</span>attisdropped <span class='Operator'>&& </span><a href="execExpr.c.html#LN325"><span class='Ref_To_Local'>variable</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN169"><span class='Ref_to_Member'>vartype</span></a> <span class='Operator'>== </span><a href="execExpr.c.html#LN349"><span class='Ref_To_Local'>attr</span></a><span class='Operator'>-&GT;</span>atttypid<span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <a href="execExpr.c.html#LN327"><span class='Ref_To_Local'>isSafeVar</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if tle-&GT;expr!=NULL&&IsA(... &raquo; </span> 
 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN327"><span class='Ref_To_Local'>isSafeVar</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* Fast-path: just generate an EEOP_ASSIGN_*_VAR step */ 
</span>            <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN325"><span class='Ref_To_Local'>variable</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN165"><span class='Ref_to_Member'>varno</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Control'>case</span> <a href="../../include/nodes/primnodes.h.html#LN152"><span class='Ref_to_Const'>INNER_VAR</span></a><span class='Operator'>: 
</span>                    <span class='Comment_Multi_Line'>/* get the tuple from the inner node */ 
</span>                    <a href="execExpr.c.html#LN308"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN65"><span class='Ref_to_EnumConst'>EEOP_ASSIGN_INNER_VAR</span></a><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>case</span> <a href="../../include/nodes/primnodes.h.html#LN153"><span class='Ref_to_Const'>OUTER_VAR</span></a><span class='Operator'>: 
</span>                    <span class='Comment_Multi_Line'>/* get the tuple from the outer node */ 
</span>                    <a href="execExpr.c.html#LN308"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN66"><span class='Ref_to_EnumConst'>EEOP_ASSIGN_OUTER_VAR</span></a><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
                    <span class='Comment_Multi_Line'>/* INDEX_VAR is handled by default case */ 
</span> 
                <span class='Control'>default</span><span class='Operator'>: 
</span>                    <span class='Comment_Multi_Line'>/* get the tuple from the relation being scanned */ 
</span>                    <a href="execExpr.c.html#LN308"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN67"><span class='Ref_to_EnumConst'>EEOP_ASSIGN_SCAN_VAR</span></a><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
            <a href="execExpr.c.html#LN308"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>assign_var<span class='Operator'>.</span>attnum <span class='Operator'>= </span><a href="execExpr.c.html#LN326"><span class='Ref_To_Local'>attnum</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>            <a href="execExpr.c.html#LN308"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>assign_var<span class='Operator'>.</span>resultnum <span class='Operator'>= </span><a href="execExpr.c.html#LN324"><span class='Ref_To_Local'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1367"><span class='Ref_to_Member'>resno</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>            <a href="execExpr.c.html#LN59"><span class='Ref_to_Proto'>ExprEvalPushStep</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN307"><span class='Ref_To_Local'>state</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="execExpr.c.html#LN308"><span class='Ref_To_Local'>scratch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if isSafeVar &raquo; </span> 
        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * Otherwise, compile the column expression normally. 
             * 
             * We can't tell the expression to evaluate directly into the 
             * result slot, as the result slot (and the exprstate for that 
             * matter) can change between executions.  We instead evaluate 
             * into the ExprState's resvalue/resnull and then move. 
             */ 
</span>            <a href="execExpr.c.html#LN57"><span class='Ref_to_Proto'>ExecInitExprRec</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN324"><span class='Ref_To_Local'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1366"><span class='Ref_to_Member'>expr</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN303"><span class='Ref_to_Parameter'>parent</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN307"><span class='Ref_To_Local'>state</span></a><span class='Delimiter'>, 
</span>                            <span class='Operator'>&</span><a href="execExpr.c.html#LN307"><span class='Ref_To_Local'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN63"><span class='Ref_to_Member'>resvalue</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="execExpr.c.html#LN307"><span class='Ref_To_Local'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN62"><span class='Ref_to_Member'>resnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * Column might be referenced multiple times in upper nodes, so 
             * force value to R/O - but only if it could be an expanded datum. 
             */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/utils/lsyscache.h.html#LN133"><span class='Ref_to_Proto'>get_typlen</span></a><span class='Parentheses'>(</span><a href="../../include/nodes/nodeFuncs.h.html#LN31"><span class='Ref_to_Proto'>exprType</span></a><span class='Parentheses'>((</span><a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN324"><span class='Ref_To_Local'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1366"><span class='Ref_to_Member'>expr</span></a><span class='Parentheses'>))</span> <span class='Operator'>== -</span><span class='Number'>1</span><span class='Parentheses'>)</span> 
                <a href="execExpr.c.html#LN308"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN72"><span class='Ref_to_EnumConst'>EEOP_ASSIGN_TMP_MAKE_RO</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
                <a href="execExpr.c.html#LN308"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN70"><span class='Ref_to_EnumConst'>EEOP_ASSIGN_TMP</span></a><span class='Delimiter'>; 
</span>            <a href="execExpr.c.html#LN308"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>assign_tmp<span class='Operator'>.</span>resultnum <span class='Operator'>= </span><a href="execExpr.c.html#LN324"><span class='Ref_To_Local'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1367"><span class='Ref_to_Member'>resno</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>            <a href="execExpr.c.html#LN59"><span class='Ref_to_Proto'>ExprEvalPushStep</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN307"><span class='Ref_To_Local'>state</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="execExpr.c.html#LN308"><span class='Ref_To_Local'>scratch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
    <span class='Delimiter'>} 
</span> 
    <a href="execExpr.c.html#LN308"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN39"><span class='Ref_to_EnumConst'>EEOP_DONE</span></a><span class='Delimiter'>; 
</span>    <a href="execExpr.c.html#LN59"><span class='Ref_to_Proto'>ExprEvalPushStep</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN307"><span class='Ref_To_Local'>state</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="execExpr.c.html#LN308"><span class='Ref_To_Local'>scratch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="execExpr.c.html#LN56"><span class='Ref_to_Proto'>ExecReadyExpr</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN307"><span class='Ref_To_Local'>state</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="execExpr.c.html#LN306"><span class='Ref_To_Local'>projInfo</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end ExecBuildProjectionInfo &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * ExecPrepareExpr --- initialize for expression execution outside a normal 
 * Plan tree context. 
 * 
 * This differs from ExecInitExpr in that we don't assume the caller is 
 * already running in the EState's per-query context.  Also, we run the 
 * passed expression tree through expression_planner() to prepare it for 
 * execution.  (In ordinary Plan trees the regular planning process will have 
 * made the appropriate transformations on expressions, but for standalone 
 * expressions this won't have happened.) 
 */ 
</span><a href="../../include/nodes/execnodes.h.html#LN52"><span class='Ref_to_Struct'>ExprState</span></a> <span class='Operator'>* 
</span><a name="LN436"></a><span class='Declare_Function'>ExecPrepareExpr</span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><a href="../../include/nodes/execnodes.h.html#LN402"><span class='Ref_to_Struct'>EState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>estate</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN438"></a>    <a href="../../include/nodes/execnodes.h.html#LN52"><span class='Ref_to_Struct'>ExprState</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span><a name="LN439"></a>    <a href="../../include/utils/palloc.h.html#LN35"><span class='Ref_to_Typedef'>MemoryContext</span></a> <span class='Declare_Local'>oldcontext</span><span class='Delimiter'>; 
</span> 
    <a href="execExpr.c.html#LN439"><span class='Ref_To_Local'>oldcontext</span></a> <span class='Operator'>= </span><a href="../../include/utils/palloc.h.html#LN107"><span class='Ref_to_Func'>MemoryContextSwitchTo</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN436"><span class='Ref_to_Parameter'>estate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN447"><span class='Ref_to_Member'>es_query_cxt</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="execExpr.c.html#LN436"><span class='Ref_to_Parameter'>node</span></a> <span class='Operator'>= </span><a href="../../include/optimizer/planner.h.html#LN53"><span class='Ref_to_Proto'>expression_planner</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN436"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="execExpr.c.html#LN438"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="execExpr.c.html#LN111"><span class='Ref_to_Func'>ExecInitExpr</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN436"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../include/utils/palloc.h.html#LN107"><span class='Ref_to_Func'>MemoryContextSwitchTo</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN439"><span class='Ref_To_Local'>oldcontext</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="execExpr.c.html#LN438"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * ExecPrepareQual --- initialize for qual execution outside a normal 
 * Plan tree context. 
 * 
 * This differs from ExecInitQual in that we don't assume the caller is 
 * already running in the EState's per-query context.  Also, we run the 
 * passed expression tree through expression_planner() to prepare it for 
 * execution.  (In ordinary Plan trees the regular planning process will have 
 * made the appropriate transformations on expressions, but for standalone 
 * expressions this won't have happened.) 
 */ 
</span><a href="../../include/nodes/execnodes.h.html#LN52"><span class='Ref_to_Struct'>ExprState</span></a> <span class='Operator'>* 
</span><a name="LN464"></a><span class='Declare_Function'>ExecPrepareQual</span><span class='Parentheses'>(</span><a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>qual</span><span class='Delimiter'>, </span><a href="../../include/nodes/execnodes.h.html#LN402"><span class='Ref_to_Struct'>EState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>estate</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN466"></a>    <a href="../../include/nodes/execnodes.h.html#LN52"><span class='Ref_to_Struct'>ExprState</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span><a name="LN467"></a>    <a href="../../include/utils/palloc.h.html#LN35"><span class='Ref_to_Typedef'>MemoryContext</span></a> <span class='Declare_Local'>oldcontext</span><span class='Delimiter'>; 
</span> 
    <a href="execExpr.c.html#LN467"><span class='Ref_To_Local'>oldcontext</span></a> <span class='Operator'>= </span><a href="../../include/utils/palloc.h.html#LN107"><span class='Ref_to_Func'>MemoryContextSwitchTo</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN464"><span class='Ref_to_Parameter'>estate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN447"><span class='Ref_to_Member'>es_query_cxt</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="execExpr.c.html#LN464"><span class='Ref_to_Parameter'>qual</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/optimizer/planner.h.html#LN53"><span class='Ref_to_Proto'>expression_planner</span></a><span class='Parentheses'>((</span><a href="../../include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN464"><span class='Ref_to_Parameter'>qual</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="execExpr.c.html#LN466"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="execExpr.c.html#LN158"><span class='Ref_to_Func'>ExecInitQual</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN464"><span class='Ref_to_Parameter'>qual</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../include/utils/palloc.h.html#LN107"><span class='Ref_to_Func'>MemoryContextSwitchTo</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN467"><span class='Ref_To_Local'>oldcontext</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="execExpr.c.html#LN466"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * ExecPrepareCheck -- initialize check constraint for execution outside a 
 * normal Plan tree context. 
 * 
 * See ExecPrepareExpr() and ExecInitCheck() for details. 
 */ 
</span><a href="../../include/nodes/execnodes.h.html#LN52"><span class='Ref_to_Struct'>ExprState</span></a> <span class='Operator'>* 
</span><a name="LN487"></a><span class='Declare_Function'>ExecPrepareCheck</span><span class='Parentheses'>(</span><a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>qual</span><span class='Delimiter'>, </span><a href="../../include/nodes/execnodes.h.html#LN402"><span class='Ref_to_Struct'>EState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>estate</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN489"></a>    <a href="../../include/nodes/execnodes.h.html#LN52"><span class='Ref_to_Struct'>ExprState</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span><a name="LN490"></a>    <a href="../../include/utils/palloc.h.html#LN35"><span class='Ref_to_Typedef'>MemoryContext</span></a> <span class='Declare_Local'>oldcontext</span><span class='Delimiter'>; 
</span> 
    <a href="execExpr.c.html#LN490"><span class='Ref_To_Local'>oldcontext</span></a> <span class='Operator'>= </span><a href="../../include/utils/palloc.h.html#LN107"><span class='Ref_to_Func'>MemoryContextSwitchTo</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN487"><span class='Ref_to_Parameter'>estate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN447"><span class='Ref_to_Member'>es_query_cxt</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="execExpr.c.html#LN487"><span class='Ref_to_Parameter'>qual</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/optimizer/planner.h.html#LN53"><span class='Ref_to_Proto'>expression_planner</span></a><span class='Parentheses'>((</span><a href="../../include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN487"><span class='Ref_to_Parameter'>qual</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="execExpr.c.html#LN489"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../include/executor/executor.h.html#LN239"><span class='Ref_to_Proto'>ExecInitCheck</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN487"><span class='Ref_to_Parameter'>qual</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../include/utils/palloc.h.html#LN107"><span class='Ref_to_Func'>MemoryContextSwitchTo</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN490"><span class='Ref_To_Local'>oldcontext</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="execExpr.c.html#LN489"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Call ExecPrepareExpr() on each member of a list of Exprs, and return 
 * a list of ExprStates. 
 * 
 * See ExecPrepareExpr() for details. 
 */ 
</span><a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>* 
</span><a name="LN510"></a><span class='Declare_Function'>ExecPrepareExprList</span><span class='Parentheses'>(</span><a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>nodes</span><span class='Delimiter'>, </span><a href="../../include/nodes/execnodes.h.html#LN402"><span class='Ref_to_Struct'>EState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>estate</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN512"></a>    <a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>result</span> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span><a name="LN513"></a>    <a href="../../include/utils/palloc.h.html#LN35"><span class='Ref_to_Typedef'>MemoryContext</span></a> <span class='Declare_Local'>oldcontext</span><span class='Delimiter'>; 
</span><a name="LN514"></a>    <a href="../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Ensure that the list cell nodes are in the right context too */ 
</span>    <a href="execExpr.c.html#LN513"><span class='Ref_To_Local'>oldcontext</span></a> <span class='Operator'>= </span><a href="../../include/utils/palloc.h.html#LN107"><span class='Ref_to_Func'>MemoryContextSwitchTo</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN510"><span class='Ref_to_Parameter'>estate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN447"><span class='Ref_to_Member'>es_query_cxt</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN514"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN510"><span class='Ref_to_Parameter'>nodes</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN521"></a>        <a href="../../include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>e</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN514"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="execExpr.c.html#LN512"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../nodes/list.c.html#LN126"><span class='Ref_to_Func'>lappend</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN512"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>, </span><a href="../../include/executor/executor.h.html#LN246"><span class='Ref_to_Proto'>ExecPrepareExpr</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN521"><span class='Ref_To_Local'>e</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN510"><span class='Ref_to_Parameter'>estate</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../include/utils/palloc.h.html#LN107"><span class='Ref_to_Func'>MemoryContextSwitchTo</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN513"><span class='Ref_To_Local'>oldcontext</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="execExpr.c.html#LN512"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end ExecPrepareExprList &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * ExecCheck - evaluate a check constraint 
 * 
 * For check constraints, a null result is taken as TRUE, ie the constraint 
 * passes. 
 * 
 * The check constraint may have been prepared with ExecInitCheck 
 * (possibly via ExecPrepareCheck) if the caller had it in implicit-AND 
 * format, but a regular boolean expression prepared with ExecInitExpr or 
 * ExecPrepareExpr works too. 
 */ 
</span><span class='Keyword'>bool 
</span><a name="LN543"></a><span class='Declare_Function'>ExecCheck</span><span class='Parentheses'>(</span><a href="../../include/nodes/execnodes.h.html#LN52"><span class='Ref_to_Struct'>ExprState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>state</span><span class='Delimiter'>, </span><a href="../../include/nodes/execnodes.h.html#LN191"><span class='Ref_to_Struct'>ExprContext</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>econtext</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN545"></a>    <a href="../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>       <span class='Declare_Local'>ret</span><span class='Delimiter'>; 
</span><a name="LN546"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>isnull</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* short-circuit (here and in ExecInitCheck) for empty restriction list */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN543"><span class='Ref_to_Parameter'>state</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* verify that expression was not compiled using ExecInitQual */ 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><span class='Operator'>!</span><span class='Parentheses'>(</span><a href="execExpr.c.html#LN543"><span class='Ref_to_Parameter'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN56"><span class='Ref_to_Member'>flags</span></a> <span class='Operator'>& </span><a href="../../include/nodes/execnodes.h.html#LN50"><span class='Ref_to_Const'>EEO_FLAG_IS_QUAL</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="execExpr.c.html#LN545"><span class='Ref_To_Local'>ret</span></a> <span class='Operator'>= </span><a href="../../include/executor/executor.h.html#LN279"><span class='Ref_to_Func'>ExecEvalExprSwitchContext</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN543"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN543"><span class='Ref_to_Parameter'>econtext</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="execExpr.c.html#LN546"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN546"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="../../include/postgres.h.html#LN398"><span class='Ref_to_Macro'>DatumGetBool</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN545"><span class='Ref_To_Local'>ret</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end ExecCheck &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Prepare a compiled expression for execution.  This has to be called for 
 * every ExprState before it can be executed. 
 * 
 * NB: While this currently only calls ExecReadyInterpretedExpr(), 
 * this will likely get extended to further expression evaluation methods. 
 * Therefore this should be used instead of directly calling 
 * ExecReadyInterpretedExpr(). 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN573"></a><span class='Declare_Function'>ExecReadyExpr</span><span class='Parentheses'>(</span><a href="../../include/nodes/execnodes.h.html#LN52"><span class='Ref_to_Struct'>ExprState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>state</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <a href="execExprInterp.c.html#LN156"><span class='Ref_to_Func'>ExecReadyInterpretedExpr</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN573"><span class='Ref_to_Parameter'>state</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Append the steps necessary for the evaluation of node to ExprState-&GT;steps, 
 * possibly recursing into sub-expressions of node. 
 * 
 * node - expression to evaluate 
 * parent - parent executor node (or NULL if a standalone expression) 
 * state - ExprState to whose -&GT;steps to append the necessary operations 
 * resv / resnull - where to store the result of the node into 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN588"></a><span class='Declare_Function'>ExecInitExprRec</span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><a href="../../include/nodes/execnodes.h.html#LN808"><span class='Ref_to_Struct'>PlanState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>parent</span><span class='Delimiter'>, </span><a href="../../include/nodes/execnodes.h.html#LN52"><span class='Ref_to_Struct'>ExprState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>state</span><span class='Delimiter'>, 
</span><a name="LN589"></a>                <a href="../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>resv</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Declare_Parameter'>resnull</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN591"></a>    <a href="../../include/executor/execExpr.h.html#LN219"><span class='Ref_to_Struct'>ExprEvalStep</span></a> <span class='Declare_Local'>scratch</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Guard against stack overflow due to overly complex expressions */ 
</span>    <a href="../../include/miscadmin.h.html#LN275"><span class='Ref_to_Proto'>check_stack_depth</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Step's output location is always what the caller gave us */ 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="execExpr.c.html#LN589"><span class='Ref_to_Parameter'>resv</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL </span><span class='Operator'>&& </span><a href="execExpr.c.html#LN589"><span class='Ref_to_Parameter'>resnull</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN229"><span class='Ref_to_Member'>resvalue</span></a> <span class='Operator'>= </span><a href="execExpr.c.html#LN589"><span class='Ref_to_Parameter'>resv</span></a><span class='Delimiter'>; 
</span>    <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN230"><span class='Ref_to_Member'>resnull</span></a> <span class='Operator'>= </span><a href="execExpr.c.html#LN589"><span class='Ref_to_Parameter'>resnull</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* cases should be ordered as they are in enum NodeTag */ 
</span>    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN513"><span class='Ref_to_Macro'>nodeTag</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>case</span> <a href="../../include/nodes/nodes.h.html#LN145"><span class='Ref_to_EnumConst'>T_Var</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN606"></a>                <a href="../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>variable</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN606"><span class='Ref_To_Local'>variable</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN167"><span class='Ref_to_Member'>varattno</span></a> <span class='Operator'>== </span><a href="../../include/access/attnum.h.html#LN22"><span class='Ref_to_Const'>InvalidAttrNumber</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Comment_Multi_Line'>/* whole-row Var */ 
</span>                    <a href="execExpr.c.html#LN65"><span class='Ref_to_Proto'>ExecInitWholeRowVar</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN606"><span class='Ref_To_Local'>variable</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>parent</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN606"><span class='Ref_To_Local'>variable</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN167"><span class='Ref_to_Member'>varattno</span></a> <span class='Operator'>&LT;= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Comment_Multi_Line'>/* system column */ 
</span>                    <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>var<span class='Operator'>.</span>attnum <span class='Operator'>= </span><a href="execExpr.c.html#LN606"><span class='Ref_To_Local'>variable</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN167"><span class='Ref_to_Member'>varattno</span></a><span class='Delimiter'>; 
</span>                    <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>var<span class='Operator'>.</span>vartype <span class='Operator'>= </span><a href="execExpr.c.html#LN606"><span class='Ref_To_Local'>variable</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN169"><span class='Ref_to_Member'>vartype</span></a><span class='Delimiter'>; 
</span>                    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN606"><span class='Ref_To_Local'>variable</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN165"><span class='Ref_to_Member'>varno</span></a><span class='Parentheses'>) 
</span>                    <span class='Delimiter'>{ 
</span>                        <span class='Control'>case</span> <a href="../../include/nodes/primnodes.h.html#LN152"><span class='Ref_to_Const'>INNER_VAR</span></a><span class='Operator'>: 
</span>                            <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN56"><span class='Ref_to_EnumConst'>EEOP_INNER_SYSVAR</span></a><span class='Delimiter'>; 
</span>                            <span class='Control'>break</span><span class='Delimiter'>; 
</span>                        <span class='Control'>case</span> <a href="../../include/nodes/primnodes.h.html#LN153"><span class='Ref_to_Const'>OUTER_VAR</span></a><span class='Operator'>: 
</span>                            <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN57"><span class='Ref_to_EnumConst'>EEOP_OUTER_SYSVAR</span></a><span class='Delimiter'>; 
</span>                            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
                            <span class='Comment_Multi_Line'>/* INDEX_VAR is handled by default case */ 
</span> 
                        <span class='Control'>default</span><span class='Operator'>: 
</span>                            <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN58"><span class='Ref_to_EnumConst'>EEOP_SCAN_SYSVAR</span></a><span class='Delimiter'>; 
</span>                            <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if variable-&GT;varattno&LT;=0 &raquo; </span> 
                <span class='Control'>else</span> 
                <span class='Delimiter'>{ 
</span>                    <span class='Comment_Multi_Line'>/* regular user column */ 
</span>                    <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>var<span class='Operator'>.</span>attnum <span class='Operator'>= </span><a href="execExpr.c.html#LN606"><span class='Ref_To_Local'>variable</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN167"><span class='Ref_to_Member'>varattno</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>                    <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>var<span class='Operator'>.</span>vartype <span class='Operator'>= </span><a href="execExpr.c.html#LN606"><span class='Ref_To_Local'>variable</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN169"><span class='Ref_to_Member'>vartype</span></a><span class='Delimiter'>; 
</span>                    <span class='Comment_Multi_Line'>/* select EEOP_*_FIRST opcode to force one-time checks */ 
</span>                    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN606"><span class='Ref_To_Local'>variable</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN165"><span class='Ref_to_Member'>varno</span></a><span class='Parentheses'>) 
</span>                    <span class='Delimiter'>{ 
</span>                        <span class='Control'>case</span> <a href="../../include/nodes/primnodes.h.html#LN152"><span class='Ref_to_Const'>INNER_VAR</span></a><span class='Operator'>: 
</span>                            <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN48"><span class='Ref_to_EnumConst'>EEOP_INNER_VAR_FIRST</span></a><span class='Delimiter'>; 
</span>                            <span class='Control'>break</span><span class='Delimiter'>; 
</span>                        <span class='Control'>case</span> <a href="../../include/nodes/primnodes.h.html#LN153"><span class='Ref_to_Const'>OUTER_VAR</span></a><span class='Operator'>: 
</span>                            <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN50"><span class='Ref_to_EnumConst'>EEOP_OUTER_VAR_FIRST</span></a><span class='Delimiter'>; 
</span>                            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
                            <span class='Comment_Multi_Line'>/* INDEX_VAR is handled by default case */ 
</span> 
                        <span class='Control'>default</span><span class='Operator'>: 
</span>                            <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN52"><span class='Ref_to_EnumConst'>EEOP_SCAN_VAR_FIRST</span></a><span class='Delimiter'>; 
</span>                            <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
 
                <a href="execExpr.c.html#LN59"><span class='Ref_to_Proto'>ExprEvalPushStep</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
        <span class='Control'>case</span> <a href="../../include/nodes/nodes.h.html#LN146"><span class='Ref_to_EnumConst'>T_Const</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN663"></a>                <a href="../../include/nodes/primnodes.h.html#LN188"><span class='Ref_to_Struct'>Const</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>con</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN188"><span class='Ref_to_Struct'>Const</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span> 
                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN75"><span class='Ref_to_EnumConst'>EEOP_CONST</span></a><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>constval<span class='Operator'>.</span><span class='Keyword'>value </span><span class='Operator'>= </span><a href="execExpr.c.html#LN663"><span class='Ref_To_Local'>con</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN195"><span class='Ref_to_Member'>constvalue</span></a><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>constval<span class='Operator'>.</span>isnull <span class='Operator'>= </span><a href="execExpr.c.html#LN663"><span class='Ref_To_Local'>con</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN196"><span class='Ref_to_Member'>constisnull</span></a><span class='Delimiter'>; 
</span> 
                <a href="execExpr.c.html#LN59"><span class='Ref_to_Proto'>ExprEvalPushStep</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
        <span class='Control'>case</span> <a href="../../include/nodes/nodes.h.html#LN147"><span class='Ref_to_EnumConst'>T_Param</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN675"></a>                <a href="../../include/nodes/primnodes.h.html#LN240"><span class='Ref_to_Struct'>Param</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>param</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN240"><span class='Ref_to_Struct'>Param</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span> 
                <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN675"><span class='Ref_To_Local'>param</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN243"><span class='Ref_to_Member'>paramkind</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Control'>case</span> <a href="../../include/nodes/primnodes.h.html#LN235"><span class='Ref_to_EnumConst'>PARAM_EXEC</span></a><span class='Operator'>: 
</span>                        <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN131"><span class='Ref_to_EnumConst'>EEOP_PARAM_EXEC</span></a><span class='Delimiter'>; 
</span>                        <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>param<span class='Operator'>.</span>paramid <span class='Operator'>= </span><a href="execExpr.c.html#LN675"><span class='Ref_To_Local'>param</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN244"><span class='Ref_to_Member'>paramid</span></a><span class='Delimiter'>; 
</span>                        <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>param<span class='Operator'>.</span>paramtype <span class='Operator'>= </span><a href="execExpr.c.html#LN675"><span class='Ref_To_Local'>param</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN245"><span class='Ref_to_Member'>paramtype</span></a><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>case</span> <a href="../../include/nodes/primnodes.h.html#LN234"><span class='Ref_to_EnumConst'>PARAM_EXTERN</span></a><span class='Operator'>: 
</span>                        <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN132"><span class='Ref_to_EnumConst'>EEOP_PARAM_EXTERN</span></a><span class='Delimiter'>; 
</span>                        <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>param<span class='Operator'>.</span>paramid <span class='Operator'>= </span><a href="execExpr.c.html#LN675"><span class='Ref_To_Local'>param</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN244"><span class='Ref_to_Member'>paramid</span></a><span class='Delimiter'>; 
</span>                        <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>param<span class='Operator'>.</span>paramtype <span class='Operator'>= </span><a href="execExpr.c.html#LN675"><span class='Ref_To_Local'>param</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN245"><span class='Ref_to_Member'>paramtype</span></a><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>default</span><span class='Operator'>: 
</span>                        <a href="../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"unrecognized paramkind: %d"</span><span class='Delimiter'>, 
</span>                             <span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN675"><span class='Ref_To_Local'>param</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN243"><span class='Ref_to_Member'>paramkind</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span> 
                <a href="execExpr.c.html#LN59"><span class='Ref_to_Proto'>ExprEvalPushStep</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
        <span class='Control'>case</span> <a href="../../include/nodes/nodes.h.html#LN148"><span class='Ref_to_EnumConst'>T_Aggref</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN701"></a>                <a href="../../include/nodes/primnodes.h.html#LN290"><span class='Ref_to_Struct'>Aggref</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>aggref</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN290"><span class='Ref_to_Struct'>Aggref</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span><a name="LN702"></a>                <a href="../../include/nodes/execnodes.h.html#LN630"><span class='Ref_to_Struct'>AggrefExprState</span></a> <span class='Operator'>*</span><span class='Declare_Local'>astate</span> <span class='Operator'>= </span><a href="../../include/nodes/nodes.h.html#LN556"><span class='Ref_to_Macro'>makeNode</span></a><span class='Parentheses'>(</span><a href="../../include/nodes/execnodes.h.html#LN630"><span class='Ref_to_Struct'>AggrefExprState</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN208"><span class='Ref_to_EnumConst'>EEOP_AGGREF</span></a><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>aggref<span class='Operator'>.</span>astate <span class='Operator'>= </span><a href="execExpr.c.html#LN702"><span class='Ref_To_Local'>astate</span></a><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN702"><span class='Ref_To_Local'>astate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN633"><span class='Ref_to_Member'>aggref</span></a> <span class='Operator'>= </span><a href="execExpr.c.html#LN701"><span class='Ref_To_Local'>aggref</span></a><span class='Delimiter'>; 
</span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>parent</span></a> <span class='Operator'>&& </span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>parent</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/execnodes.h.html#LN1739"><span class='Ref_to_Struct'>AggState</span></a><span class='Parentheses'>))</span> 
                <span class='Delimiter'>{ 
</span><a name="LN710"></a>                    <a href="../../include/nodes/execnodes.h.html#LN1739"><span class='Ref_to_Struct'>AggState</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>aggstate</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/execnodes.h.html#LN1739"><span class='Ref_to_Struct'>AggState</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>parent</span></a><span class='Delimiter'>; 
</span> 
                    <a href="execExpr.c.html#LN710"><span class='Ref_To_Local'>aggstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN1742"><span class='Ref_to_Member'>aggs</span></a> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN215"><span class='Ref_to_Proto'>lcons</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN702"><span class='Ref_To_Local'>astate</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN710"><span class='Ref_To_Local'>aggstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN1742"><span class='Ref_to_Member'>aggs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="execExpr.c.html#LN710"><span class='Ref_To_Local'>aggstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN1743"><span class='Ref_to_Member'>numaggs</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>else</span> 
                <span class='Delimiter'>{ 
</span>                    <span class='Comment_Multi_Line'>/* planner messed up */ 
</span>                    <a href="../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"Aggref found in non-Agg plan node"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span> 
                <a href="execExpr.c.html#LN59"><span class='Ref_to_Proto'>ExprEvalPushStep</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
        <span class='Control'>case</span> <a href="../../include/nodes/nodes.h.html#LN149"><span class='Ref_to_EnumConst'>T_GroupingFunc</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN727"></a>                <a href="../../include/nodes/primnodes.h.html#LN337"><span class='Ref_to_Struct'>GroupingFunc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>grp_node</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN337"><span class='Ref_to_Struct'>GroupingFunc</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span><a name="LN728"></a>                <a href="../../include/nodes/plannodes.h.html#LN781"><span class='Ref_to_Struct'>Agg</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>agg</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>parent</span></a> <span class='Operator'>|| !</span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>parent</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/execnodes.h.html#LN1739"><span class='Ref_to_Struct'>AggState</span></a><span class='Parentheses'>) </span><span class='Operator'>|| 
</span>                    <span class='Operator'>!</span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>parent</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN812"><span class='Ref_to_Member'>plan</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/plannodes.h.html#LN781"><span class='Ref_to_Struct'>Agg</span></a><span class='Parentheses'>))</span> 
                    <a href="../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"GroupingFunc found in non-Agg plan node"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN209"><span class='Ref_to_EnumConst'>EEOP_GROUPING_FUNC</span></a><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>grouping_func<span class='Operator'>.</span>parent <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/execnodes.h.html#LN1739"><span class='Ref_to_Struct'>AggState</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>parent</span></a><span class='Delimiter'>; 
</span> 
                <a href="execExpr.c.html#LN728"><span class='Ref_To_Local'>agg</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/plannodes.h.html#LN781"><span class='Ref_to_Struct'>Agg</span></a> <span class='Operator'>*</span><span class='Parentheses'>) (</span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>parent</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN812"><span class='Ref_to_Member'>plan</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN728"><span class='Ref_To_Local'>agg</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/plannodes.h.html#LN792"><span class='Ref_to_Member'>groupingSets</span></a><span class='Parentheses'>) 
</span>                    <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>grouping_func<span class='Operator'>.</span>clauses <span class='Operator'>= </span><a href="execExpr.c.html#LN727"><span class='Ref_To_Local'>grp_node</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN343"><span class='Ref_to_Member'>cols</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>else</span> 
                    <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>grouping_func<span class='Operator'>.</span>clauses <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span> 
                <a href="execExpr.c.html#LN59"><span class='Ref_to_Proto'>ExprEvalPushStep</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
        <span class='Control'>case</span> <a href="../../include/nodes/nodes.h.html#LN150"><span class='Ref_to_EnumConst'>T_WindowFunc</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN750"></a>                <a href="../../include/nodes/primnodes.h.html#LN351"><span class='Ref_to_Struct'>WindowFunc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>wfunc</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN351"><span class='Ref_to_Struct'>WindowFunc</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span><a name="LN751"></a>                <a href="../../include/nodes/execnodes.h.html#LN641"><span class='Ref_to_Struct'>WindowFuncExprState</span></a> <span class='Operator'>*</span><span class='Declare_Local'>wfstate</span> <span class='Operator'>= </span><a href="../../include/nodes/nodes.h.html#LN556"><span class='Ref_to_Macro'>makeNode</span></a><span class='Parentheses'>(</span><a href="../../include/nodes/execnodes.h.html#LN641"><span class='Ref_to_Struct'>WindowFuncExprState</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <a href="execExpr.c.html#LN751"><span class='Ref_To_Local'>wfstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN644"><span class='Ref_to_Member'>wfunc</span></a> <span class='Operator'>= </span><a href="execExpr.c.html#LN750"><span class='Ref_To_Local'>wfunc</span></a><span class='Delimiter'>; 
</span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>parent</span></a> <span class='Operator'>&& </span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>parent</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/execnodes.h.html#LN1792"><span class='Ref_to_Struct'>WindowAggState</span></a><span class='Parentheses'>))</span> 
                <span class='Delimiter'>{ 
</span><a name="LN757"></a>                    <a href="../../include/nodes/execnodes.h.html#LN1792"><span class='Ref_to_Struct'>WindowAggState</span></a> <span class='Operator'>*</span><span class='Declare_Local'>winstate</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/execnodes.h.html#LN1792"><span class='Ref_to_Struct'>WindowAggState</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>parent</span></a><span class='Delimiter'>; 
</span><a name="LN758"></a>                    <span class='Keyword'>int</span>         <span class='Declare_Local'>nfuncs</span><span class='Delimiter'>; 
</span> 
                    <a href="execExpr.c.html#LN757"><span class='Ref_To_Local'>winstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN1797"><span class='Ref_to_Member'>funcs</span></a> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN215"><span class='Ref_to_Proto'>lcons</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN751"><span class='Ref_To_Local'>wfstate</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN757"><span class='Ref_To_Local'>winstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN1797"><span class='Ref_to_Member'>funcs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="execExpr.c.html#LN758"><span class='Ref_To_Local'>nfuncs</span></a> <span class='Operator'>= ++</span><a href="execExpr.c.html#LN757"><span class='Ref_To_Local'>winstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN1798"><span class='Ref_to_Member'>numfuncs</span></a><span class='Delimiter'>; 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN750"><span class='Ref_To_Local'>wfunc</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN362"><span class='Ref_to_Member'>winagg</span></a><span class='Parentheses'>) 
</span>                        <a href="execExpr.c.html#LN757"><span class='Ref_To_Local'>winstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN1799"><span class='Ref_to_Member'>numaggs</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span> 
                    <span class='Comment_Multi_Line'>/* for now initialize agg using old style expressions */ 
</span>                    <a href="execExpr.c.html#LN751"><span class='Ref_To_Local'>wfstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN645"><span class='Ref_to_Member'>args</span></a> <span class='Operator'>= </span><a href="../../include/executor/executor.h.html#LN240"><span class='Ref_to_Proto'>ExecInitExprList</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN750"><span class='Ref_To_Local'>wfunc</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN358"><span class='Ref_to_Member'>args</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>parent</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="execExpr.c.html#LN751"><span class='Ref_To_Local'>wfstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN646"><span class='Ref_to_Member'>aggfilter</span></a> <span class='Operator'>= </span><a href="execExpr.c.html#LN111"><span class='Ref_to_Func'>ExecInitExpr</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN750"><span class='Ref_To_Local'>wfunc</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN359"><span class='Ref_to_Member'>aggfilter</span></a><span class='Delimiter'>, 
</span>                                                      <a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>parent</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <span class='Comment_Multi_Line'>/* 
                     * Complain if the windowfunc's arguments contain any 
                     * windowfuncs; nested window functions are semantically 
                     * nonsensical.  (This should have been caught earlier, 
                     * but we defend against it here anyway.) 
                     */ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN758"><span class='Ref_To_Local'>nfuncs</span></a> <span class='Operator'>!= </span><a href="execExpr.c.html#LN757"><span class='Ref_To_Local'>winstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN1798"><span class='Ref_to_Member'>numfuncs</span></a><span class='Parentheses'>) 
</span>                        <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                                <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_WINDOWING_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                          <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"window function calls cannot be nested"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if parent&&IsA(parent,Wi... &raquo; </span> 
                <span class='Control'>else</span> 
                <span class='Delimiter'>{ 
</span>                    <span class='Comment_Multi_Line'>/* planner messed up */ 
</span>                    <a href="../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"WindowFunc found in non-WindowAgg plan node"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span> 
                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN210"><span class='Ref_to_EnumConst'>EEOP_WINDOW_FUNC</span></a><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>window_func<span class='Operator'>.</span>wfstate <span class='Operator'>= </span><a href="execExpr.c.html#LN751"><span class='Ref_To_Local'>wfstate</span></a><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN59"><span class='Ref_to_Proto'>ExprEvalPushStep</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
        <span class='Control'>case</span> <a href="../../include/nodes/nodes.h.html#LN151"><span class='Ref_to_EnumConst'>T_ArrayRef</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN795"></a>                <a href="../../include/nodes/primnodes.h.html#LN395"><span class='Ref_to_Struct'>ArrayRef</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>aref</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN395"><span class='Ref_to_Struct'>ArrayRef</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span> 
                <a href="execExpr.c.html#LN67"><span class='Ref_to_Proto'>ExecInitArrayRef</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN795"><span class='Ref_To_Local'>aref</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>parent</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN589"><span class='Ref_to_Parameter'>resv</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN589"><span class='Ref_to_Parameter'>resnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
        <span class='Control'>case</span> <a href="../../include/nodes/nodes.h.html#LN152"><span class='Ref_to_EnumConst'>T_FuncExpr</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN803"></a>                <a href="../../include/nodes/primnodes.h.html#LN444"><span class='Ref_to_Struct'>FuncExpr</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>func</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN444"><span class='Ref_to_Struct'>FuncExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span> 
                <a href="execExpr.c.html#LN60"><span class='Ref_to_Proto'>ExecInitFunc</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, 
</span>                             <a href="execExpr.c.html#LN803"><span class='Ref_To_Local'>func</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN455"><span class='Ref_to_Member'>args</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN803"><span class='Ref_To_Local'>func</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN447"><span class='Ref_to_Member'>funcid</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN803"><span class='Ref_To_Local'>func</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN454"><span class='Ref_to_Member'>inputcollid</span></a><span class='Delimiter'>, 
</span>                             <a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>parent</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN59"><span class='Ref_to_Proto'>ExprEvalPushStep</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
        <span class='Control'>case</span> <a href="../../include/nodes/nodes.h.html#LN154"><span class='Ref_to_EnumConst'>T_OpExpr</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN814"></a>                <a href="../../include/nodes/primnodes.h.html#LN491"><span class='Ref_to_Struct'>OpExpr</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>op</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN491"><span class='Ref_to_Struct'>OpExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span> 
                <a href="execExpr.c.html#LN60"><span class='Ref_to_Proto'>ExecInitFunc</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, 
</span>                             <a href="execExpr.c.html#LN814"><span class='Ref_To_Local'>op</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN500"><span class='Ref_to_Member'>args</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN814"><span class='Ref_To_Local'>op</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN495"><span class='Ref_to_Member'>opfuncid</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN814"><span class='Ref_To_Local'>op</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN499"><span class='Ref_to_Member'>inputcollid</span></a><span class='Delimiter'>, 
</span>                             <a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>parent</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN59"><span class='Ref_to_Proto'>ExprEvalPushStep</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
        <span class='Control'>case</span> <a href="../../include/nodes/nodes.h.html#LN155"><span class='Ref_to_EnumConst'>T_DistinctExpr</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN825"></a>                <a href="../../include/nodes/primnodes.h.html#LN514"><span class='Ref_to_Typedef'>DistinctExpr</span></a> <span class='Operator'>*</span><span class='Declare_Local'>op</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN514"><span class='Ref_to_Typedef'>DistinctExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span> 
                <a href="execExpr.c.html#LN60"><span class='Ref_to_Proto'>ExecInitFunc</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, 
</span>                             <a href="execExpr.c.html#LN825"><span class='Ref_To_Local'>op</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN500"><span class='Ref_to_Member'>args</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN825"><span class='Ref_To_Local'>op</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN495"><span class='Ref_to_Member'>opfuncid</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN825"><span class='Ref_To_Local'>op</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN499"><span class='Ref_to_Member'>inputcollid</span></a><span class='Delimiter'>, 
</span>                             <a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>parent</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * Change opcode of call instruction to EEOP_DISTINCT. 
                 * 
                 * XXX: historically we've not called the function usage 
                 * pgstat infrastructure - that seems inconsistent given that 
                 * we do so for normal function *and* operator evaluation.  If 
                 * we decided to do that here, we'd probably want separate 
                 * opcodes for FUSAGE or not. 
                 */ 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN142"><span class='Ref_to_EnumConst'>EEOP_DISTINCT</span></a><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN59"><span class='Ref_to_Proto'>ExprEvalPushStep</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
        <span class='Control'>case</span> <a href="../../include/nodes/nodes.h.html#LN156"><span class='Ref_to_EnumConst'>T_NullIfExpr</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN847"></a>                <a href="../../include/nodes/primnodes.h.html#LN522"><span class='Ref_to_Typedef'>NullIfExpr</span></a> <span class='Operator'>*</span><span class='Declare_Local'>op</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN522"><span class='Ref_to_Typedef'>NullIfExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span> 
                <a href="execExpr.c.html#LN60"><span class='Ref_to_Proto'>ExecInitFunc</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, 
</span>                             <a href="execExpr.c.html#LN847"><span class='Ref_To_Local'>op</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN500"><span class='Ref_to_Member'>args</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN847"><span class='Ref_To_Local'>op</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN495"><span class='Ref_to_Member'>opfuncid</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN847"><span class='Ref_To_Local'>op</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN499"><span class='Ref_to_Member'>inputcollid</span></a><span class='Delimiter'>, 
</span>                             <a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>parent</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * Change opcode of call instruction to EEOP_NULLIF. 
                 * 
                 * XXX: historically we've not called the function usage 
                 * pgstat infrastructure - that seems inconsistent given that 
                 * we do so for normal function *and* operator evaluation.  If 
                 * we decided to do that here, we'd probably want separate 
                 * opcodes for FUSAGE or not. 
                 */ 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN143"><span class='Ref_to_EnumConst'>EEOP_NULLIF</span></a><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN59"><span class='Ref_to_Proto'>ExprEvalPushStep</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
        <span class='Control'>case</span> <a href="../../include/nodes/nodes.h.html#LN157"><span class='Ref_to_EnumConst'>T_ScalarArrayOpExpr</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN869"></a>                <a href="../../include/nodes/primnodes.h.html#LN534"><span class='Ref_to_Struct'>ScalarArrayOpExpr</span></a> <span class='Operator'>*</span><span class='Declare_Local'>opexpr</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN534"><span class='Ref_to_Struct'>ScalarArrayOpExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span><a name="LN870"></a>                <a href="../../include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>scalararg</span><span class='Delimiter'>; 
</span><a name="LN871"></a>                <a href="../../include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>arrayarg</span><span class='Delimiter'>; 
</span><a name="LN872"></a>                <a href="../../include/fmgr.h.html#LN55"><span class='Ref_to_Struct'>FmgrInfo</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>finfo</span><span class='Delimiter'>; 
</span><a name="LN873"></a>                <a href="../../include/fmgr.h.html#LN37"><span class='Ref_to_Typedef'>FunctionCallInfo</span></a> <span class='Declare_Local'>fcinfo</span><span class='Delimiter'>; 
</span><a name="LN874"></a>                <a href="../../include/utils/acl.h.html#LN169"><span class='Ref_to_Typedef'>AclResult</span></a>   <span class='Declare_Local'>aclresult</span><span class='Delimiter'>; 
</span> 
                <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN869"><span class='Ref_To_Local'>opexpr</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN541"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN870"><span class='Ref_To_Local'>scalararg</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/nodes/pg_list.h.html#LN110"><span class='Ref_to_Macro'>linitial</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN869"><span class='Ref_To_Local'>opexpr</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN541"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN871"><span class='Ref_To_Local'>arrayarg</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/nodes/pg_list.h.html#LN115"><span class='Ref_to_Macro'>lsecond</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN869"><span class='Ref_To_Local'>opexpr</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN541"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* Check permission to call function */ 
</span>                <a href="execExpr.c.html#LN874"><span class='Ref_To_Local'>aclresult</span></a> <span class='Operator'>= </span><a href="../../include/utils/acl.h.html#LN285"><span class='Ref_to_Proto'>pg_proc_aclcheck</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN869"><span class='Ref_To_Local'>opexpr</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN538"><span class='Ref_to_Member'>opfuncid</span></a><span class='Delimiter'>, 
</span>                                             <a href="../utils/init/miscinit.c.html#LN281"><span class='Ref_to_Func'>GetUserId</span></a><span class='Parentheses'>()</span><span class='Delimiter'>, 
</span>                                             <a href="../../include/nodes/parsenodes.h.html#LN78"><span class='Ref_to_Const'>ACL_EXECUTE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN874"><span class='Ref_To_Local'>aclresult</span></a> <span class='Operator'>!= </span><a href="../../include/utils/acl.h.html#LN171"><span class='Ref_to_EnumConst'>ACLCHECK_OK</span></a><span class='Parentheses'>) 
</span>                    <a href="../../include/utils/acl.h.html#LN295"><span class='Ref_to_Proto'>aclcheck_error</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN874"><span class='Ref_To_Local'>aclresult</span></a><span class='Delimiter'>, </span><a href="../../include/utils/acl.h.html#LN184"><span class='Ref_to_EnumConst'>ACL_KIND_PROC</span></a><span class='Delimiter'>, 
</span>                                   <a href="../../include/utils/lsyscache.h.html#LN110"><span class='Ref_to_Proto'>get_func_name</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN869"><span class='Ref_To_Local'>opexpr</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN538"><span class='Ref_to_Member'>opfuncid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="../../include/catalog/objectaccess.h.html#LN178"><span class='Ref_to_Macro'>InvokeFunctionExecuteHook</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN869"><span class='Ref_To_Local'>opexpr</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN538"><span class='Ref_to_Member'>opfuncid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* Set up the primary fmgr lookup information */ 
</span>                <a href="execExpr.c.html#LN872"><span class='Ref_To_Local'>finfo</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/fmgr.h.html#LN55"><span class='Ref_to_Struct'>FmgrInfo</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN873"><span class='Ref_To_Local'>fcinfo</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/fmgr.h.html#LN76"><span class='Ref_to_Struct'>FunctionCallInfoData</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="../../include/fmgr.h.html#LN92"><span class='Ref_to_Proto'>fmgr_info</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN869"><span class='Ref_To_Local'>opexpr</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN538"><span class='Ref_to_Member'>opfuncid</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN872"><span class='Ref_To_Local'>finfo</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="../../include/fmgr.h.html#LN103"><span class='Ref_to_Macro'>fmgr_info_set_expr</span></a><span class='Parentheses'>((</span><a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN872"><span class='Ref_To_Local'>finfo</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="../../include/fmgr.h.html#LN119"><span class='Ref_to_Macro'>InitFunctionCallInfoData</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="execExpr.c.html#LN873"><span class='Ref_To_Local'>fcinfo</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN872"><span class='Ref_To_Local'>finfo</span></a><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, 
</span>                                         <a href="execExpr.c.html#LN869"><span class='Ref_To_Local'>opexpr</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN540"><span class='Ref_to_Member'>inputcollid</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* Evaluate scalar directly into left function argument */ 
</span>                <a href="execExpr.c.html#LN57"><span class='Ref_to_Proto'>ExecInitExprRec</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN870"><span class='Ref_To_Local'>scalararg</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>parent</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, 
</span>                                <span class='Operator'>&</span><a href="execExpr.c.html#LN873"><span class='Ref_To_Local'>fcinfo</span></a><span class='Operator'>-&GT;</span><a href="../../include/fmgr.h.html#LN84"><span class='Ref_to_Member'>arg</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>], </span><span class='Operator'>&</span><a href="execExpr.c.html#LN873"><span class='Ref_To_Local'>fcinfo</span></a><span class='Operator'>-&GT;</span><a href="../../include/fmgr.h.html#LN85"><span class='Ref_to_Member'>argnull</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * Evaluate array argument into our return value.  There's no 
                 * danger in that, because the return value is guaranteed to 
                 * be overwritten by EEOP_SCALARARRAYOP, and will not be 
                 * passed to any other expression. 
                 */ 
</span>                <a href="execExpr.c.html#LN57"><span class='Ref_to_Proto'>ExecInitExprRec</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN871"><span class='Ref_To_Local'>arrayarg</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>parent</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN589"><span class='Ref_to_Parameter'>resv</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN589"><span class='Ref_to_Parameter'>resnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* And perform the operation */ 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN206"><span class='Ref_to_EnumConst'>EEOP_SCALARARRAYOP</span></a><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>scalararrayop<span class='Operator'>.</span>element_type <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>scalararrayop<span class='Operator'>.</span>useOr <span class='Operator'>= </span><a href="execExpr.c.html#LN869"><span class='Ref_To_Local'>opexpr</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN539"><span class='Ref_to_Member'>useOr</span></a><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>scalararrayop<span class='Operator'>.</span>finfo <span class='Operator'>= </span><a href="execExpr.c.html#LN872"><span class='Ref_To_Local'>finfo</span></a><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>scalararrayop<span class='Operator'>.</span>fcinfo_data <span class='Operator'>= </span><a href="execExpr.c.html#LN873"><span class='Ref_To_Local'>fcinfo</span></a><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>scalararrayop<span class='Operator'>.</span>fn_addr <span class='Operator'>= </span><a href="execExpr.c.html#LN872"><span class='Ref_To_Local'>finfo</span></a><span class='Operator'>-&GT;</span><a href="../../include/fmgr.h.html#LN57"><span class='Ref_to_Member'>fn_addr</span></a><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN59"><span class='Ref_to_Proto'>ExprEvalPushStep</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
        <span class='Control'>case</span> <a href="../../include/nodes/nodes.h.html#LN158"><span class='Ref_to_EnumConst'>T_BoolExpr</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN922"></a>                <a href="../../include/nodes/primnodes.h.html#LN557"><span class='Ref_to_Struct'>BoolExpr</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>boolexpr</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN557"><span class='Ref_to_Struct'>BoolExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span><a name="LN923"></a>                <span class='Keyword'>int</span>         <span class='Declare_Local'>nargs</span> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN922"><span class='Ref_To_Local'>boolexpr</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN561"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN924"></a>                <a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>adjust_jumps</span> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span><a name="LN925"></a>                <span class='Keyword'>int</span>         <span class='Declare_Local'>off</span><span class='Delimiter'>; 
</span><a name="LN926"></a>                <a href="../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* allocate scratch memory used by all steps of AND/OR */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN922"><span class='Ref_To_Local'>boolexpr</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN560"><span class='Ref_to_Member'>boolop</span></a> <span class='Operator'>!= </span><a href="../../include/nodes/primnodes.h.html#LN554"><span class='Ref_to_EnumConst'>NOT_EXPR</span></a><span class='Parentheses'>) 
</span>                    <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>boolexpr<span class='Operator'>.</span>anynull <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>bool</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * For each argument evaluate the argument itself, then 
                 * perform the bool operation's appropriate handling. 
                 * 
                 * We can evaluate each argument into our result area, since 
                 * the short-circuiting logic means we only need to remember 
                 * previous NULL values. 
                 * 
                 * AND/OR is split into separate STEP_FIRST (one) / STEP (zero 
                 * or more) / STEP_LAST (one) steps, as each of those has to 
                 * perform different work.  The FIRST/LAST split is valid 
                 * because AND/OR have at least two arguments. 
                 */ 
</span>                <a href="execExpr.c.html#LN925"><span class='Ref_To_Local'>off</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>                <a href="../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN926"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN922"><span class='Ref_To_Local'>boolexpr</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN561"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span><a name="LN948"></a>                    <a href="../../include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>arg</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN926"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <span class='Comment_Multi_Line'>/* Evaluate argument into our output variable */ 
</span>                    <a href="execExpr.c.html#LN57"><span class='Ref_to_Proto'>ExecInitExprRec</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN948"><span class='Ref_To_Local'>arg</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>parent</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN589"><span class='Ref_to_Parameter'>resv</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN589"><span class='Ref_to_Parameter'>resnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <span class='Comment_Multi_Line'>/* Perform the appropriate step type */ 
</span>                    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN922"><span class='Ref_To_Local'>boolexpr</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN560"><span class='Ref_to_Member'>boolop</span></a><span class='Parentheses'>) 
</span>                    <span class='Delimiter'>{ 
</span>                        <span class='Control'>case</span> <a href="../../include/nodes/primnodes.h.html#LN554"><span class='Ref_to_EnumConst'>AND_EXPR</span></a><span class='Operator'>: 
</span>                            <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="execExpr.c.html#LN923"><span class='Ref_To_Local'>nargs</span></a> <span class='Operator'>&GT;= </span><span class='Number'>2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN925"><span class='Ref_To_Local'>off</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN93"><span class='Ref_to_EnumConst'>EEOP_BOOL_AND_STEP_FIRST</span></a><span class='Delimiter'>; 
</span>                            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN925"><span class='Ref_To_Local'>off</span></a> <span class='Operator'>+ </span><span class='Number'>1</span> <span class='Operator'>== </span><a href="execExpr.c.html#LN923"><span class='Ref_To_Local'>nargs</span></a><span class='Parentheses'>) 
</span>                                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN95"><span class='Ref_to_EnumConst'>EEOP_BOOL_AND_STEP_LAST</span></a><span class='Delimiter'>; 
</span>                            <span class='Control'>else</span> 
                                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN94"><span class='Ref_to_EnumConst'>EEOP_BOOL_AND_STEP</span></a><span class='Delimiter'>; 
</span>                            <span class='Control'>break</span><span class='Delimiter'>; 
</span>                        <span class='Control'>case</span> <a href="../../include/nodes/primnodes.h.html#LN554"><span class='Ref_to_EnumConst'>OR_EXPR</span></a><span class='Operator'>: 
</span>                            <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="execExpr.c.html#LN923"><span class='Ref_To_Local'>nargs</span></a> <span class='Operator'>&GT;= </span><span class='Number'>2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN925"><span class='Ref_To_Local'>off</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN98"><span class='Ref_to_EnumConst'>EEOP_BOOL_OR_STEP_FIRST</span></a><span class='Delimiter'>; 
</span>                            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN925"><span class='Ref_To_Local'>off</span></a> <span class='Operator'>+ </span><span class='Number'>1</span> <span class='Operator'>== </span><a href="execExpr.c.html#LN923"><span class='Ref_To_Local'>nargs</span></a><span class='Parentheses'>) 
</span>                                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN100"><span class='Ref_to_EnumConst'>EEOP_BOOL_OR_STEP_LAST</span></a><span class='Delimiter'>; 
</span>                            <span class='Control'>else</span> 
                                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN99"><span class='Ref_to_EnumConst'>EEOP_BOOL_OR_STEP</span></a><span class='Delimiter'>; 
</span>                            <span class='Control'>break</span><span class='Delimiter'>; 
</span>                        <span class='Control'>case</span> <a href="../../include/nodes/primnodes.h.html#LN554"><span class='Ref_to_EnumConst'>NOT_EXPR</span></a><span class='Operator'>: 
</span>                            <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="execExpr.c.html#LN923"><span class='Ref_To_Local'>nargs</span></a> <span class='Operator'>== </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                            <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN103"><span class='Ref_to_EnumConst'>EEOP_BOOL_NOT_STEP</span></a><span class='Delimiter'>; 
</span>                            <span class='Control'>break</span><span class='Delimiter'>; 
</span>                        <span class='Control'>default</span><span class='Operator'>: 
</span>                            <a href="../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"unrecognized boolop: %d"</span><span class='Delimiter'>, 
</span>                                 <span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN922"><span class='Ref_To_Local'>boolexpr</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN560"><span class='Ref_to_Member'>boolop</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                            <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch boolexpr-&GT;boolop &raquo; </span> 
 
                    <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>boolexpr<span class='Operator'>.</span>jumpdone <span class='Operator'>= -</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>                    <a href="execExpr.c.html#LN59"><span class='Ref_to_Proto'>ExprEvalPushStep</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="execExpr.c.html#LN924"><span class='Ref_To_Local'>adjust_jumps</span></a> <span class='Operator'>= </span><a href="../nodes/list.c.html#LN144"><span class='Ref_to_Func'>lappend_int</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN924"><span class='Ref_To_Local'>adjust_jumps</span></a><span class='Delimiter'>, 
</span>                                               <a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN88"><span class='Ref_to_Member'>steps_len</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="execExpr.c.html#LN925"><span class='Ref_To_Local'>off</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span> 
                <span class='Comment_Multi_Line'>/* adjust jump targets */ 
</span>                <a href="../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN926"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN924"><span class='Ref_To_Local'>adjust_jumps</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span><a name="LN997"></a>                    <a href="../../include/executor/execExpr.h.html#LN219"><span class='Ref_to_Struct'>ExprEvalStep</span></a> <span class='Operator'>*</span><span class='Declare_Local'>as</span> <span class='Operator'>= &</span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN73"><span class='Ref_to_Member'>steps</span></a><span class='Delimiter'>[</span><a href="../../include/nodes/pg_list.h.html#LN106"><span class='Ref_to_Macro'>lfirst_int</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN926"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>]; 
</span> 
                    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="execExpr.c.html#LN997"><span class='Ref_To_Local'>as</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>boolexpr<span class='Operator'>.</span>jumpdone <span class='Operator'>== -</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="execExpr.c.html#LN997"><span class='Ref_To_Local'>as</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>boolexpr<span class='Operator'>.</span>jumpdone <span class='Operator'>= </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN88"><span class='Ref_to_Member'>steps_len</span></a><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span> 
                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
        <span class='Control'>case</span> <a href="../../include/nodes/nodes.h.html#LN160"><span class='Ref_to_EnumConst'>T_SubPlan</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN1008"></a>                <a href="../../include/nodes/primnodes.h.html#LN678"><span class='Ref_to_Struct'>SubPlan</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>subplan</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN678"><span class='Ref_to_Struct'>SubPlan</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span><a name="LN1009"></a>                <a href="../../include/nodes/execnodes.h.html#LN731"><span class='Ref_to_Struct'>SubPlanState</span></a> <span class='Operator'>*</span><span class='Declare_Local'>sstate</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>parent</span></a><span class='Parentheses'>) 
</span>                    <a href="../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"SubPlan found with no parent plan"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <a href="execExpr.c.html#LN1009"><span class='Ref_To_Local'>sstate</span></a> <span class='Operator'>= </span><a href="../../include/executor/nodeSubplan.h.html#LN18"><span class='Ref_to_Proto'>ExecInitSubPlan</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1008"><span class='Ref_To_Local'>subplan</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>parent</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* add SubPlanState nodes to parent-&GT;subPlan */ 
</span>                <a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>parent</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN831"><span class='Ref_to_Member'>subPlan</span></a> <span class='Operator'>= </span><a href="../nodes/list.c.html#LN126"><span class='Ref_to_Func'>lappend</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>parent</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN831"><span class='Ref_to_Member'>subPlan</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN1009"><span class='Ref_To_Local'>sstate</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN211"><span class='Ref_to_EnumConst'>EEOP_SUBPLAN</span></a><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>subplan<span class='Operator'>.</span>sstate <span class='Operator'>= </span><a href="execExpr.c.html#LN1009"><span class='Ref_To_Local'>sstate</span></a><span class='Delimiter'>; 
</span> 
                <a href="execExpr.c.html#LN59"><span class='Ref_to_Proto'>ExprEvalPushStep</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
        <span class='Control'>case</span> <a href="../../include/nodes/nodes.h.html#LN161"><span class='Ref_to_EnumConst'>T_AlternativeSubPlan</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN1028"></a>                <a href="../../include/nodes/primnodes.h.html#LN722"><span class='Ref_to_Struct'>AlternativeSubPlan</span></a> <span class='Operator'>*</span><span class='Declare_Local'>asplan</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN722"><span class='Ref_to_Struct'>AlternativeSubPlan</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span><a name="LN1029"></a>                <a href="../../include/nodes/execnodes.h.html#LN762"><span class='Ref_to_Struct'>AlternativeSubPlanState</span></a> <span class='Operator'>*</span><span class='Declare_Local'>asstate</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>parent</span></a><span class='Parentheses'>) 
</span>                    <a href="../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"AlternativeSubPlan found with no parent plan"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <a href="execExpr.c.html#LN1029"><span class='Ref_To_Local'>asstate</span></a> <span class='Operator'>= </span><a href="../../include/executor/nodeSubplan.h.html#LN20"><span class='Ref_to_Proto'>ExecInitAlternativeSubPlan</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1028"><span class='Ref_To_Local'>asplan</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>parent</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN212"><span class='Ref_to_EnumConst'>EEOP_ALTERNATIVE_SUBPLAN</span></a><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>alternative_subplan<span class='Operator'>.</span>asstate <span class='Operator'>= </span><a href="execExpr.c.html#LN1029"><span class='Ref_To_Local'>asstate</span></a><span class='Delimiter'>; 
</span> 
                <a href="execExpr.c.html#LN59"><span class='Ref_to_Proto'>ExprEvalPushStep</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
        <span class='Control'>case</span> <a href="../../include/nodes/nodes.h.html#LN162"><span class='Ref_to_EnumConst'>T_FieldSelect</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN1045"></a>                <a href="../../include/nodes/primnodes.h.html#LN737"><span class='Ref_to_Struct'>FieldSelect</span></a> <span class='Operator'>*</span><span class='Declare_Local'>fselect</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN737"><span class='Ref_to_Struct'>FieldSelect</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* evaluate row/record argument into result area */ 
</span>                <a href="execExpr.c.html#LN57"><span class='Ref_to_Proto'>ExecInitExprRec</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1045"><span class='Ref_To_Local'>fselect</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN740"><span class='Ref_to_Member'>arg</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>parent</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN589"><span class='Ref_to_Parameter'>resv</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN589"><span class='Ref_to_Parameter'>resnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* and extract field */ 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN164"><span class='Ref_to_EnumConst'>EEOP_FIELDSELECT</span></a><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>fieldselect<span class='Operator'>.</span>fieldnum <span class='Operator'>= </span><a href="execExpr.c.html#LN1045"><span class='Ref_To_Local'>fselect</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN741"><span class='Ref_to_Member'>fieldnum</span></a><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>fieldselect<span class='Operator'>.</span>resulttype <span class='Operator'>= </span><a href="execExpr.c.html#LN1045"><span class='Ref_To_Local'>fselect</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN742"><span class='Ref_to_Member'>resulttype</span></a><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>fieldselect<span class='Operator'>.</span>argdesc <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
                <a href="execExpr.c.html#LN59"><span class='Ref_to_Proto'>ExprEvalPushStep</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
        <span class='Control'>case</span> <a href="../../include/nodes/nodes.h.html#LN163"><span class='Ref_to_EnumConst'>T_FieldStore</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN1062"></a>                <a href="../../include/nodes/primnodes.h.html#LN763"><span class='Ref_to_Struct'>FieldStore</span></a> <span class='Operator'>*</span><span class='Declare_Local'>fstore</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN763"><span class='Ref_to_Struct'>FieldStore</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span><a name="LN1063"></a>                <a href="../../include/access/tupdesc.h.html#LN70"><span class='Ref_to_Typedef'>TupleDesc</span></a>   <span class='Declare_Local'>tupDesc</span><span class='Delimiter'>; 
</span><a name="LN1064"></a>                <a href="../../include/access/tupdesc.h.html#LN70"><span class='Ref_to_Typedef'>TupleDesc</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>descp</span><span class='Delimiter'>; 
</span><a name="LN1065"></a>                <a href="../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>values</span><span class='Delimiter'>; 
</span><a name="LN1066"></a>                <span class='Keyword'>bool</span>       <span class='Operator'>*</span><span class='Declare_Local'>nulls</span><span class='Delimiter'>; 
</span><a name="LN1067"></a>                <span class='Keyword'>int</span>         <span class='Declare_Local'>ncolumns</span><span class='Delimiter'>; 
</span><a name="LN1068"></a>                <a href="../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>l1</span><span class='Delimiter'>, 
</span><a name="LN1069"></a>                           <span class='Operator'>*</span><span class='Declare_Local'>l2</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* find out the number of columns in the composite type */ 
</span>                <a href="execExpr.c.html#LN1063"><span class='Ref_To_Local'>tupDesc</span></a> <span class='Operator'>= </span><a href="../../include/utils/typcache.h.html#LN151"><span class='Ref_to_Proto'>lookup_rowtype_tupdesc</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1062"><span class='Ref_To_Local'>fstore</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN769"><span class='Ref_to_Member'>resulttype</span></a><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN1067"><span class='Ref_To_Local'>ncolumns</span></a> <span class='Operator'>= </span><a href="execExpr.c.html#LN1063"><span class='Ref_To_Local'>tupDesc</span></a><span class='Operator'>-&GT;</span><a href="../../include/access/tupdesc.h.html#LN72"><span class='Ref_to_Member'>natts</span></a><span class='Delimiter'>; 
</span>                <a href="../../include/access/tupdesc.h.html#LN98"><span class='Ref_to_Proto'>DecrTupleDescRefCount</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1063"><span class='Ref_To_Local'>tupDesc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* create workspace for column values */ 
</span>                <a href="execExpr.c.html#LN1065"><span class='Ref_To_Local'>values</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="execExpr.c.html#LN1067"><span class='Ref_To_Local'>ncolumns</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN1066"><span class='Ref_To_Local'>nulls</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>bool</span><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="execExpr.c.html#LN1067"><span class='Ref_To_Local'>ncolumns</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* create workspace for runtime tupdesc cache */ 
</span>                <a href="execExpr.c.html#LN1064"><span class='Ref_To_Local'>descp</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/access/tupdesc.h.html#LN70"><span class='Ref_to_Typedef'>TupleDesc</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/access/tupdesc.h.html#LN70"><span class='Ref_to_Typedef'>TupleDesc</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <span class='Operator'>*</span><a href="execExpr.c.html#LN1064"><span class='Ref_To_Local'>descp</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* emit code to evaluate the composite input value */ 
</span>                <a href="execExpr.c.html#LN57"><span class='Ref_to_Proto'>ExecInitExprRec</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1062"><span class='Ref_To_Local'>fstore</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN766"><span class='Ref_to_Member'>arg</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>parent</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN589"><span class='Ref_to_Parameter'>resv</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN589"><span class='Ref_to_Parameter'>resnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* next, deform the input tuple into our workspace */ 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN170"><span class='Ref_to_EnumConst'>EEOP_FIELDSTORE_DEFORM</span></a><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>fieldstore<span class='Operator'>.</span>fstore <span class='Operator'>= </span><a href="execExpr.c.html#LN1062"><span class='Ref_To_Local'>fstore</span></a><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>fieldstore<span class='Operator'>.</span>argdesc <span class='Operator'>= </span><a href="execExpr.c.html#LN1064"><span class='Ref_To_Local'>descp</span></a><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>fieldstore<span class='Operator'>.</span>values <span class='Operator'>= </span><a href="execExpr.c.html#LN1065"><span class='Ref_To_Local'>values</span></a><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>fieldstore<span class='Operator'>.</span>nulls <span class='Operator'>= </span><a href="execExpr.c.html#LN1066"><span class='Ref_To_Local'>nulls</span></a><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>fieldstore<span class='Operator'>.</span>ncolumns <span class='Operator'>= </span><a href="execExpr.c.html#LN1067"><span class='Ref_To_Local'>ncolumns</span></a><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN59"><span class='Ref_to_Proto'>ExprEvalPushStep</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* evaluate new field values, store in workspace columns */ 
</span>                <a href="../../include/nodes/pg_list.h.html#LN179"><span class='Ref_to_Macro'>forboth</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1068"><span class='Ref_To_Local'>l1</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN1062"><span class='Ref_To_Local'>fstore</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN767"><span class='Ref_to_Member'>newvals</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN1069"><span class='Ref_To_Local'>l2</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN1062"><span class='Ref_To_Local'>fstore</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN768"><span class='Ref_to_Member'>fieldnums</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span><a name="LN1099"></a>                    <a href="../../include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>e</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1068"><span class='Ref_To_Local'>l1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1100"></a>                    <a href="../../include/access/attnum.h.html#LN20"><span class='Ref_to_Typedef'>AttrNumber</span></a>  <span class='Declare_Local'>fieldnum</span> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN106"><span class='Ref_to_Macro'>lfirst_int</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1069"><span class='Ref_To_Local'>l2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1101"></a>                    <a href="../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>save_innermost_caseval</span><span class='Delimiter'>; 
</span><a name="LN1102"></a>                    <span class='Keyword'>bool</span>       <span class='Operator'>*</span><span class='Declare_Local'>save_innermost_casenull</span><span class='Delimiter'>; 
</span> 
                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN1100"><span class='Ref_To_Local'>fieldnum</span></a> <span class='Operator'>&LT;= </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="execExpr.c.html#LN1100"><span class='Ref_To_Local'>fieldnum</span></a> <span class='Operator'>&GT; </span><a href="execExpr.c.html#LN1067"><span class='Ref_To_Local'>ncolumns</span></a><span class='Parentheses'>) 
</span>                        <a href="../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"field number %d is out of range in FieldStore"</span><span class='Delimiter'>, 
</span>                             <a href="execExpr.c.html#LN1100"><span class='Ref_To_Local'>fieldnum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <span class='Comment_Multi_Line'>/* 
                     * Use the CaseTestExpr mechanism to pass down the old 
                     * value of the field being replaced; this is needed in 
                     * case the newval is itself a FieldStore or ArrayRef that 
                     * has to obtain and modify the old value.  It's safe to 
                     * reuse the CASE mechanism because there cannot be a CASE 
                     * between here and where the value would be needed, and a 
                     * field assignment can't be within a CASE either.  (So 
                     * saving and restoring innermost_caseval is just 
                     * paranoia, but let's do it anyway.) 
                     */ 
</span>                    <a href="execExpr.c.html#LN1101"><span class='Ref_To_Local'>save_innermost_caseval</span></a> <span class='Operator'>= </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN91"><span class='Ref_to_Member'>innermost_caseval</span></a><span class='Delimiter'>; 
</span>                    <a href="execExpr.c.html#LN1102"><span class='Ref_To_Local'>save_innermost_casenull</span></a> <span class='Operator'>= </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN92"><span class='Ref_to_Member'>innermost_casenull</span></a><span class='Delimiter'>; 
</span>                    <a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN91"><span class='Ref_to_Member'>innermost_caseval</span></a> <span class='Operator'>= &</span><a href="execExpr.c.html#LN1065"><span class='Ref_To_Local'>values</span></a><span class='Delimiter'>[</span><a href="execExpr.c.html#LN1100"><span class='Ref_To_Local'>fieldnum</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>]; 
</span>                    <a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN92"><span class='Ref_to_Member'>innermost_casenull</span></a> <span class='Operator'>= &</span><a href="execExpr.c.html#LN1066"><span class='Ref_To_Local'>nulls</span></a><span class='Delimiter'>[</span><a href="execExpr.c.html#LN1100"><span class='Ref_To_Local'>fieldnum</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>]; 
</span> 
                    <a href="execExpr.c.html#LN57"><span class='Ref_to_Proto'>ExecInitExprRec</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1099"><span class='Ref_To_Local'>e</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>parent</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, 
</span>                                    <span class='Operator'>&</span><a href="execExpr.c.html#LN1065"><span class='Ref_To_Local'>values</span></a><span class='Delimiter'>[</span><a href="execExpr.c.html#LN1100"><span class='Ref_To_Local'>fieldnum</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>], 
</span>                                    <span class='Operator'>&</span><a href="execExpr.c.html#LN1066"><span class='Ref_To_Local'>nulls</span></a><span class='Delimiter'>[</span><a href="execExpr.c.html#LN1100"><span class='Ref_To_Local'>fieldnum</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN91"><span class='Ref_to_Member'>innermost_caseval</span></a> <span class='Operator'>= </span><a href="execExpr.c.html#LN1101"><span class='Ref_To_Local'>save_innermost_caseval</span></a><span class='Delimiter'>; 
</span>                    <a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN92"><span class='Ref_to_Member'>innermost_casenull</span></a> <span class='Operator'>= </span><a href="execExpr.c.html#LN1102"><span class='Ref_To_Local'>save_innermost_casenull</span></a><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span> 
                <span class='Comment_Multi_Line'>/* finally, form result tuple */ 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN177"><span class='Ref_to_EnumConst'>EEOP_FIELDSTORE_FORM</span></a><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>fieldstore<span class='Operator'>.</span>fstore <span class='Operator'>= </span><a href="execExpr.c.html#LN1062"><span class='Ref_To_Local'>fstore</span></a><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>fieldstore<span class='Operator'>.</span>argdesc <span class='Operator'>= </span><a href="execExpr.c.html#LN1064"><span class='Ref_To_Local'>descp</span></a><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>fieldstore<span class='Operator'>.</span>values <span class='Operator'>= </span><a href="execExpr.c.html#LN1065"><span class='Ref_To_Local'>values</span></a><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>fieldstore<span class='Operator'>.</span>nulls <span class='Operator'>= </span><a href="execExpr.c.html#LN1066"><span class='Ref_To_Local'>nulls</span></a><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>fieldstore<span class='Operator'>.</span>ncolumns <span class='Operator'>= </span><a href="execExpr.c.html#LN1067"><span class='Ref_To_Local'>ncolumns</span></a><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN59"><span class='Ref_to_Proto'>ExprEvalPushStep</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
        <span class='Control'>case</span> <a href="../../include/nodes/nodes.h.html#LN164"><span class='Ref_to_EnumConst'>T_RelabelType</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* relabel doesn't need to do anything at runtime */ 
</span><a name="LN1146"></a>                <a href="../../include/nodes/primnodes.h.html#LN786"><span class='Ref_to_Struct'>RelabelType</span></a> <span class='Operator'>*</span><span class='Declare_Local'>relabel</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN786"><span class='Ref_to_Struct'>RelabelType</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span> 
                <a href="execExpr.c.html#LN57"><span class='Ref_to_Proto'>ExecInitExprRec</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1146"><span class='Ref_To_Local'>relabel</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN789"><span class='Ref_to_Member'>arg</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>parent</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN589"><span class='Ref_to_Parameter'>resv</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN589"><span class='Ref_to_Parameter'>resnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
        <span class='Control'>case</span> <a href="../../include/nodes/nodes.h.html#LN165"><span class='Ref_to_EnumConst'>T_CoerceViaIO</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN1154"></a>                <a href="../../include/nodes/primnodes.h.html#LN806"><span class='Ref_to_Struct'>CoerceViaIO</span></a> <span class='Operator'>*</span><span class='Declare_Local'>iocoerce</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN806"><span class='Ref_to_Struct'>CoerceViaIO</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span><a name="LN1155"></a>                <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>iofunc</span><span class='Delimiter'>; 
</span><a name="LN1156"></a>                <span class='Keyword'>bool</span>        <span class='Declare_Local'>typisvarlena</span><span class='Delimiter'>; 
</span><a name="LN1157"></a>                <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>typioparam</span><span class='Delimiter'>; 
</span><a name="LN1158"></a>                <a href="../../include/fmgr.h.html#LN37"><span class='Ref_to_Typedef'>FunctionCallInfo</span></a> <span class='Declare_Local'>fcinfo_in</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* evaluate argument into step's result area */ 
</span>                <a href="execExpr.c.html#LN57"><span class='Ref_to_Proto'>ExecInitExprRec</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1154"><span class='Ref_To_Local'>iocoerce</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN809"><span class='Ref_to_Member'>arg</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>parent</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN589"><span class='Ref_to_Parameter'>resv</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN589"><span class='Ref_to_Parameter'>resnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * Prepare both output and input function calls, to be 
                 * evaluated inside a single evaluation step for speed - this 
                 * can be a very common operation. 
                 * 
                 * We don't check permissions here as a type's input/output 
                 * function are assumed to be executable by everyone. 
                 */ 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN141"><span class='Ref_to_EnumConst'>EEOP_IOCOERCE</span></a><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* lookup the source type's output function */ 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>iocoerce<span class='Operator'>.</span>finfo_out <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/fmgr.h.html#LN55"><span class='Ref_to_Struct'>FmgrInfo</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>iocoerce<span class='Operator'>.</span>fcinfo_data_out <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/fmgr.h.html#LN76"><span class='Ref_to_Struct'>FunctionCallInfoData</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
                <a href="../../include/utils/lsyscache.h.html#LN162"><span class='Ref_to_Proto'>getTypeOutputInfo</span></a><span class='Parentheses'>(</span><a href="../../include/nodes/nodeFuncs.h.html#LN31"><span class='Ref_to_Proto'>exprType</span></a><span class='Parentheses'>((</span><a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN1154"><span class='Ref_To_Local'>iocoerce</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN809"><span class='Ref_to_Member'>arg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                  <span class='Operator'>&</span><a href="execExpr.c.html#LN1155"><span class='Ref_To_Local'>iofunc</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="execExpr.c.html#LN1156"><span class='Ref_To_Local'>typisvarlena</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="../../include/fmgr.h.html#LN92"><span class='Ref_to_Proto'>fmgr_info</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1155"><span class='Ref_To_Local'>iofunc</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>iocoerce<span class='Operator'>.</span>finfo_out<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="../../include/fmgr.h.html#LN103"><span class='Ref_to_Macro'>fmgr_info_set_expr</span></a><span class='Parentheses'>((</span><a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>iocoerce<span class='Operator'>.</span>finfo_out<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="../../include/fmgr.h.html#LN119"><span class='Ref_to_Macro'>InitFunctionCallInfoData</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>iocoerce<span class='Operator'>.</span>fcinfo_data_out<span class='Delimiter'>, 
</span>                                         <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>iocoerce<span class='Operator'>.</span>finfo_out<span class='Delimiter'>, 
</span>                                         <span class='Number'>1</span><span class='Delimiter'>, </span><a href="../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* lookup the result type's input function */ 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>iocoerce<span class='Operator'>.</span>finfo_in <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/fmgr.h.html#LN55"><span class='Ref_to_Struct'>FmgrInfo</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>iocoerce<span class='Operator'>.</span>fcinfo_data_in <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/fmgr.h.html#LN76"><span class='Ref_to_Struct'>FunctionCallInfoData</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
                <a href="../../include/utils/lsyscache.h.html#LN161"><span class='Ref_to_Proto'>getTypeInputInfo</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1154"><span class='Ref_To_Local'>iocoerce</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN810"><span class='Ref_to_Member'>resulttype</span></a><span class='Delimiter'>, 
</span>                                 <span class='Operator'>&</span><a href="execExpr.c.html#LN1155"><span class='Ref_To_Local'>iofunc</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="execExpr.c.html#LN1157"><span class='Ref_To_Local'>typioparam</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="../../include/fmgr.h.html#LN92"><span class='Ref_to_Proto'>fmgr_info</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1155"><span class='Ref_To_Local'>iofunc</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>iocoerce<span class='Operator'>.</span>finfo_in<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="../../include/fmgr.h.html#LN103"><span class='Ref_to_Macro'>fmgr_info_set_expr</span></a><span class='Parentheses'>((</span><a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>iocoerce<span class='Operator'>.</span>finfo_in<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="../../include/fmgr.h.html#LN119"><span class='Ref_to_Macro'>InitFunctionCallInfoData</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>iocoerce<span class='Operator'>.</span>fcinfo_data_in<span class='Delimiter'>, 
</span>                                         <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>iocoerce<span class='Operator'>.</span>finfo_in<span class='Delimiter'>, 
</span>                                         <span class='Number'>3</span><span class='Delimiter'>, </span><a href="../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * We can preload the second and third arguments for the input 
                 * function, since they're constants. 
                 */ 
</span>                <a href="execExpr.c.html#LN1158"><span class='Ref_To_Local'>fcinfo_in</span></a> <span class='Operator'>= </span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>iocoerce<span class='Operator'>.</span>fcinfo_data_in<span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN1158"><span class='Ref_To_Local'>fcinfo_in</span></a><span class='Operator'>-&GT;</span><a href="../../include/fmgr.h.html#LN84"><span class='Ref_to_Member'>arg</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1157"><span class='Ref_To_Local'>typioparam</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN1158"><span class='Ref_To_Local'>fcinfo_in</span></a><span class='Operator'>-&GT;</span><a href="../../include/fmgr.h.html#LN85"><span class='Ref_to_Member'>argnull</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN1158"><span class='Ref_To_Local'>fcinfo_in</span></a><span class='Operator'>-&GT;</span><a href="../../include/fmgr.h.html#LN84"><span class='Ref_to_Member'>arg</span></a><span class='Delimiter'>[</span><span class='Number'>2</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="../../include/postgres.h.html#LN484"><span class='Ref_to_Macro'>Int32GetDatum</span></a><span class='Parentheses'>(</span><span class='Operator'>-</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN1158"><span class='Ref_To_Local'>fcinfo_in</span></a><span class='Operator'>-&GT;</span><a href="../../include/fmgr.h.html#LN85"><span class='Ref_to_Member'>argnull</span></a><span class='Delimiter'>[</span><span class='Number'>2</span><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
                <a href="execExpr.c.html#LN59"><span class='Ref_to_Proto'>ExprEvalPushStep</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
        <span class='Control'>case</span> <a href="../../include/nodes/nodes.h.html#LN166"><span class='Ref_to_EnumConst'>T_ArrayCoerceExpr</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN1213"></a>                <a href="../../include/nodes/primnodes.h.html#LN829"><span class='Ref_to_Struct'>ArrayCoerceExpr</span></a> <span class='Operator'>*</span><span class='Declare_Local'>acoerce</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN829"><span class='Ref_to_Struct'>ArrayCoerceExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span><a name="LN1214"></a>                <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>resultelemtype</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* evaluate argument into step's result area */ 
</span>                <a href="execExpr.c.html#LN57"><span class='Ref_to_Proto'>ExecInitExprRec</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1213"><span class='Ref_To_Local'>acoerce</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN832"><span class='Ref_to_Member'>arg</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>parent</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN589"><span class='Ref_to_Parameter'>resv</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN589"><span class='Ref_to_Parameter'>resnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <a href="execExpr.c.html#LN1214"><span class='Ref_To_Local'>resultelemtype</span></a> <span class='Operator'>= </span><a href="../../include/utils/lsyscache.h.html#LN157"><span class='Ref_to_Proto'>get_element_type</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1213"><span class='Ref_To_Local'>acoerce</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN834"><span class='Ref_to_Member'>resulttype</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1214"><span class='Ref_To_Local'>resultelemtype</span></a><span class='Parentheses'>))</span> 
                    <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                            <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INVALID_PARAMETER_VALUE<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                             <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"target type is not an array"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                <span class='Comment_Multi_Line'>/* Arrays over domains aren't supported yet */ 
</span>                <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="../../include/utils/lsyscache.h.html#LN168"><span class='Ref_to_Proto'>getBaseType</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1214"><span class='Ref_To_Local'>resultelemtype</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><a href="execExpr.c.html#LN1214"><span class='Ref_To_Local'>resultelemtype</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN148"><span class='Ref_to_EnumConst'>EEOP_ARRAYCOERCE</span></a><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>arraycoerce<span class='Operator'>.</span>coerceexpr <span class='Operator'>= </span><a href="execExpr.c.html#LN1213"><span class='Ref_To_Local'>acoerce</span></a><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>arraycoerce<span class='Operator'>.</span>resultelemtype <span class='Operator'>= </span><a href="execExpr.c.html#LN1214"><span class='Ref_To_Local'>resultelemtype</span></a><span class='Delimiter'>; 
</span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1213"><span class='Ref_To_Local'>acoerce</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN833"><span class='Ref_to_Member'>elemfuncid</span></a><span class='Parentheses'>))</span> 
                <span class='Delimiter'>{ 
</span><a name="LN1233"></a>                    <a href="../../include/utils/acl.h.html#LN169"><span class='Ref_to_Typedef'>AclResult</span></a>   <span class='Declare_Local'>aclresult</span><span class='Delimiter'>; 
</span> 
                    <span class='Comment_Multi_Line'>/* Check permission to call function */ 
</span>                    <a href="execExpr.c.html#LN1233"><span class='Ref_To_Local'>aclresult</span></a> <span class='Operator'>= </span><a href="../../include/utils/acl.h.html#LN285"><span class='Ref_to_Proto'>pg_proc_aclcheck</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1213"><span class='Ref_To_Local'>acoerce</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN833"><span class='Ref_to_Member'>elemfuncid</span></a><span class='Delimiter'>, 
</span>                                                 <a href="../utils/init/miscinit.c.html#LN281"><span class='Ref_to_Func'>GetUserId</span></a><span class='Parentheses'>()</span><span class='Delimiter'>, 
</span>                                                 <a href="../../include/nodes/parsenodes.h.html#LN78"><span class='Ref_to_Const'>ACL_EXECUTE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN1233"><span class='Ref_To_Local'>aclresult</span></a> <span class='Operator'>!= </span><a href="../../include/utils/acl.h.html#LN171"><span class='Ref_to_EnumConst'>ACLCHECK_OK</span></a><span class='Parentheses'>) 
</span>                        <a href="../../include/utils/acl.h.html#LN295"><span class='Ref_to_Proto'>aclcheck_error</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1233"><span class='Ref_To_Local'>aclresult</span></a><span class='Delimiter'>, </span><a href="../../include/utils/acl.h.html#LN184"><span class='Ref_to_EnumConst'>ACL_KIND_PROC</span></a><span class='Delimiter'>, 
</span>                                       <a href="../../include/utils/lsyscache.h.html#LN110"><span class='Ref_to_Proto'>get_func_name</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1213"><span class='Ref_To_Local'>acoerce</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN833"><span class='Ref_to_Member'>elemfuncid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                    <a href="../../include/catalog/objectaccess.h.html#LN178"><span class='Ref_to_Macro'>InvokeFunctionExecuteHook</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1213"><span class='Ref_To_Local'>acoerce</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN833"><span class='Ref_to_Member'>elemfuncid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <span class='Comment_Multi_Line'>/* Set up the primary fmgr lookup information */ 
</span>                    <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>arraycoerce<span class='Operator'>.</span>elemfunc <span class='Operator'>= 
</span>                        <span class='Parentheses'>(</span><a href="../../include/fmgr.h.html#LN55"><span class='Ref_to_Struct'>FmgrInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/fmgr.h.html#LN55"><span class='Ref_to_Struct'>FmgrInfo</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                    <a href="../../include/fmgr.h.html#LN92"><span class='Ref_to_Proto'>fmgr_info</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1213"><span class='Ref_To_Local'>acoerce</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN833"><span class='Ref_to_Member'>elemfuncid</span></a><span class='Delimiter'>, 
</span>                              <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>arraycoerce<span class='Operator'>.</span>elemfunc<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="../../include/fmgr.h.html#LN103"><span class='Ref_to_Macro'>fmgr_info_set_expr</span></a><span class='Parentheses'>((</span><a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN1213"><span class='Ref_To_Local'>acoerce</span></a><span class='Delimiter'>, 
</span>                                       <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>arraycoerce<span class='Operator'>.</span>elemfunc<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <span class='Comment_Multi_Line'>/* Set up workspace for array_map */ 
</span>                    <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>arraycoerce<span class='Operator'>.</span>amstate <span class='Operator'>= 
</span>                        <span class='Parentheses'>(</span><a href="../../include/utils/array.h.html#LN231"><span class='Ref_to_Struct'>ArrayMapState</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/utils/array.h.html#LN231"><span class='Ref_to_Struct'>ArrayMapState</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if OidIsValid(acoerce-&GT;e... &raquo; </span> 
                <span class='Control'>else</span> 
                <span class='Delimiter'>{ 
</span>                    <span class='Comment_Multi_Line'>/* Don't need workspace if there's no conversion func */ 
</span>                    <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>arraycoerce<span class='Operator'>.</span>elemfunc <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>                    <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>arraycoerce<span class='Operator'>.</span>amstate <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span> 
                <a href="execExpr.c.html#LN59"><span class='Ref_to_Proto'>ExprEvalPushStep</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
        <span class='Control'>case</span> <a href="../../include/nodes/nodes.h.html#LN167"><span class='Ref_to_EnumConst'>T_ConvertRowtypeExpr</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN1269"></a>                <a href="../../include/nodes/primnodes.h.html#LN854"><span class='Ref_to_Struct'>ConvertRowtypeExpr</span></a> <span class='Operator'>*</span><span class='Declare_Local'>convert</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN854"><span class='Ref_to_Struct'>ConvertRowtypeExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* evaluate argument into step's result area */ 
</span>                <a href="execExpr.c.html#LN57"><span class='Ref_to_Proto'>ExecInitExprRec</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1269"><span class='Ref_To_Local'>convert</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN857"><span class='Ref_to_Member'>arg</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>parent</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN589"><span class='Ref_to_Parameter'>resv</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN589"><span class='Ref_to_Parameter'>resnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* and push conversion step */ 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN205"><span class='Ref_to_EnumConst'>EEOP_CONVERT_ROWTYPE</span></a><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>convert_rowtype<span class='Operator'>.</span>convert <span class='Operator'>= </span><a href="execExpr.c.html#LN1269"><span class='Ref_To_Local'>convert</span></a><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>convert_rowtype<span class='Operator'>.</span>indesc <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>convert_rowtype<span class='Operator'>.</span>outdesc <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>convert_rowtype<span class='Operator'>.</span>map <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>convert_rowtype<span class='Operator'>.</span>initialized <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
                <a href="execExpr.c.html#LN59"><span class='Ref_to_Proto'>ExprEvalPushStep</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
            <span class='Comment_Multi_Line'>/* note that CaseWhen expressions are handled within this block */ 
</span>        <span class='Control'>case</span> <a href="../../include/nodes/nodes.h.html#LN169"><span class='Ref_to_EnumConst'>T_CaseExpr</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN1289"></a>                <a href="../../include/nodes/primnodes.h.html#LN901"><span class='Ref_to_Struct'>CaseExpr</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>caseExpr</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN901"><span class='Ref_to_Struct'>CaseExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span><a name="LN1290"></a>                <a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>adjust_jumps</span> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span><a name="LN1291"></a>                <a href="../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>caseval</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN1292"></a>                <span class='Keyword'>bool</span>       <span class='Operator'>*</span><span class='Declare_Local'>casenull</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN1293"></a>                <a href="../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * If there's a test expression, we have to evaluate it and 
                 * save the value where the CaseTestExpr placeholders can find 
                 * it. 
                 */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN1289"><span class='Ref_To_Local'>caseExpr</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN906"><span class='Ref_to_Member'>arg</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Comment_Multi_Line'>/* Evaluate testexpr into caseval/casenull workspace */ 
</span>                    <a href="execExpr.c.html#LN1291"><span class='Ref_To_Local'>caseval</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                    <a href="execExpr.c.html#LN1292"><span class='Ref_To_Local'>casenull</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>bool</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
                    <a href="execExpr.c.html#LN57"><span class='Ref_to_Proto'>ExecInitExprRec</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1289"><span class='Ref_To_Local'>caseExpr</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN906"><span class='Ref_to_Member'>arg</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>parent</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, 
</span>                                    <a href="execExpr.c.html#LN1291"><span class='Ref_To_Local'>caseval</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN1292"><span class='Ref_To_Local'>casenull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <span class='Comment_Multi_Line'>/* 
                     * Since value might be read multiple times, force to R/O 
                     * - but only if it could be an expanded datum. 
                     */ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/utils/lsyscache.h.html#LN133"><span class='Ref_to_Proto'>get_typlen</span></a><span class='Parentheses'>(</span><a href="../../include/nodes/nodeFuncs.h.html#LN31"><span class='Ref_to_Proto'>exprType</span></a><span class='Parentheses'>((</span><a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN1289"><span class='Ref_To_Local'>caseExpr</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN906"><span class='Ref_to_Member'>arg</span></a><span class='Parentheses'>))</span> <span class='Operator'>== -</span><span class='Number'>1</span><span class='Parentheses'>)</span> 
                    <span class='Delimiter'>{ 
</span>                        <span class='Comment_Multi_Line'>/* change caseval in-place */ 
</span>                        <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN138"><span class='Ref_to_EnumConst'>EEOP_MAKE_READONLY</span></a><span class='Delimiter'>; 
</span>                        <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN229"><span class='Ref_to_Member'>resvalue</span></a> <span class='Operator'>= </span><a href="execExpr.c.html#LN1291"><span class='Ref_To_Local'>caseval</span></a><span class='Delimiter'>; 
</span>                        <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN230"><span class='Ref_to_Member'>resnull</span></a> <span class='Operator'>= </span><a href="execExpr.c.html#LN1292"><span class='Ref_To_Local'>casenull</span></a><span class='Delimiter'>; 
</span>                        <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>make_readonly<span class='Operator'>.</span><span class='Keyword'>value </span><span class='Operator'>= </span><a href="execExpr.c.html#LN1291"><span class='Ref_To_Local'>caseval</span></a><span class='Delimiter'>; 
</span>                        <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>make_readonly<span class='Operator'>.</span>isnull <span class='Operator'>= </span><a href="execExpr.c.html#LN1292"><span class='Ref_To_Local'>casenull</span></a><span class='Delimiter'>; 
</span>                        <a href="execExpr.c.html#LN59"><span class='Ref_to_Proto'>ExprEvalPushStep</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Comment_Multi_Line'>/* restore normal settings of scratch fields */ 
</span>                        <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN229"><span class='Ref_to_Member'>resvalue</span></a> <span class='Operator'>= </span><a href="execExpr.c.html#LN589"><span class='Ref_to_Parameter'>resv</span></a><span class='Delimiter'>; 
</span>                        <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN230"><span class='Ref_to_Member'>resnull</span></a> <span class='Operator'>= </span><a href="execExpr.c.html#LN589"><span class='Ref_to_Parameter'>resnull</span></a><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if caseExpr-&GT;arg!=NULL &raquo; </span> 
 
                <span class='Comment_Multi_Line'>/* 
                 * Prepare to evaluate each of the WHEN clauses in turn; as 
                 * soon as one is true we return the value of the 
                 * corresponding THEN clause.  If none are true then we return 
                 * the value of the ELSE clause, or NULL if there is none. 
                 */ 
</span>                <a href="../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1293"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN1289"><span class='Ref_To_Local'>caseExpr</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN907"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span><a name="LN1336"></a>                    <a href="../../include/nodes/primnodes.h.html#LN915"><span class='Ref_to_Struct'>CaseWhen</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>when</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN915"><span class='Ref_to_Struct'>CaseWhen</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1293"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1337"></a>                    <a href="../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>save_innermost_caseval</span><span class='Delimiter'>; 
</span><a name="LN1338"></a>                    <span class='Keyword'>bool</span>       <span class='Operator'>*</span><span class='Declare_Local'>save_innermost_casenull</span><span class='Delimiter'>; 
</span><a name="LN1339"></a>                    <span class='Keyword'>int</span>         <span class='Declare_Local'>whenstep</span><span class='Delimiter'>; 
</span> 
                    <span class='Comment_Multi_Line'>/* 
                     * Make testexpr result available to CaseTestExpr nodes 
                     * within the condition.  We must save and restore prior 
                     * setting of innermost_caseval fields, in case this node 
                     * is itself within a larger CASE. 
                     * 
                     * If there's no test expression, we don't actually need 
                     * to save and restore these fields; but it's less code to 
                     * just do so unconditionally. 
                     */ 
</span>                    <a href="execExpr.c.html#LN1337"><span class='Ref_To_Local'>save_innermost_caseval</span></a> <span class='Operator'>= </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN91"><span class='Ref_to_Member'>innermost_caseval</span></a><span class='Delimiter'>; 
</span>                    <a href="execExpr.c.html#LN1338"><span class='Ref_To_Local'>save_innermost_casenull</span></a> <span class='Operator'>= </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN92"><span class='Ref_to_Member'>innermost_casenull</span></a><span class='Delimiter'>; 
</span>                    <a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN91"><span class='Ref_to_Member'>innermost_caseval</span></a> <span class='Operator'>= </span><a href="execExpr.c.html#LN1291"><span class='Ref_To_Local'>caseval</span></a><span class='Delimiter'>; 
</span>                    <a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN92"><span class='Ref_to_Member'>innermost_casenull</span></a> <span class='Operator'>= </span><a href="execExpr.c.html#LN1292"><span class='Ref_To_Local'>casenull</span></a><span class='Delimiter'>; 
</span> 
                    <span class='Comment_Multi_Line'>/* evaluate condition into CASE's result variables */ 
</span>                    <a href="execExpr.c.html#LN57"><span class='Ref_to_Proto'>ExecInitExprRec</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1336"><span class='Ref_To_Local'>when</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN918"><span class='Ref_to_Member'>expr</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>parent</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN589"><span class='Ref_to_Parameter'>resv</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN589"><span class='Ref_to_Parameter'>resnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN91"><span class='Ref_to_Member'>innermost_caseval</span></a> <span class='Operator'>= </span><a href="execExpr.c.html#LN1337"><span class='Ref_To_Local'>save_innermost_caseval</span></a><span class='Delimiter'>; 
</span>                    <a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN92"><span class='Ref_to_Member'>innermost_casenull</span></a> <span class='Operator'>= </span><a href="execExpr.c.html#LN1338"><span class='Ref_To_Local'>save_innermost_casenull</span></a><span class='Delimiter'>; 
</span> 
                    <span class='Comment_Multi_Line'>/* If WHEN result isn't true, jump to next CASE arm */ 
</span>                    <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN114"><span class='Ref_to_EnumConst'>EEOP_JUMP_IF_NOT_TRUE</span></a><span class='Delimiter'>; 
</span>                    <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>jump<span class='Operator'>.</span>jumpdone <span class='Operator'>= -</span><span class='Number'>1</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* computed later */ 
</span>                    <a href="execExpr.c.html#LN59"><span class='Ref_to_Proto'>ExprEvalPushStep</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="execExpr.c.html#LN1339"><span class='Ref_To_Local'>whenstep</span></a> <span class='Operator'>= </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN88"><span class='Ref_to_Member'>steps_len</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>; 
</span> 
                    <span class='Comment_Multi_Line'>/* 
                     * If WHEN result is true, evaluate THEN result, storing 
                     * it into the CASE's result variables. 
                     */ 
</span>                    <a href="execExpr.c.html#LN57"><span class='Ref_to_Proto'>ExecInitExprRec</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1336"><span class='Ref_To_Local'>when</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN919"><span class='Ref_to_Member'>result</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>parent</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN589"><span class='Ref_to_Parameter'>resv</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN589"><span class='Ref_to_Parameter'>resnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <span class='Comment_Multi_Line'>/* Emit JUMP step to jump to end of CASE's code */ 
</span>                    <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN109"><span class='Ref_to_EnumConst'>EEOP_JUMP</span></a><span class='Delimiter'>; 
</span>                    <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>jump<span class='Operator'>.</span>jumpdone <span class='Operator'>= -</span><span class='Number'>1</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* computed later */ 
</span>                    <a href="execExpr.c.html#LN59"><span class='Ref_to_Proto'>ExprEvalPushStep</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <span class='Comment_Multi_Line'>/* 
                     * Don't know address for that jump yet, compute once the 
                     * whole CASE expression is built. 
                     */ 
</span>                    <a href="execExpr.c.html#LN1290"><span class='Ref_To_Local'>adjust_jumps</span></a> <span class='Operator'>= </span><a href="../nodes/list.c.html#LN144"><span class='Ref_to_Func'>lappend_int</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1290"><span class='Ref_To_Local'>adjust_jumps</span></a><span class='Delimiter'>, 
</span>                                               <a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN88"><span class='Ref_to_Member'>steps_len</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <span class='Comment_Multi_Line'>/* 
                     * But we can set WHEN test's jump target now, to make it 
                     * jump to the next WHEN subexpression or the ELSE. 
                     */ 
</span>                    <a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN73"><span class='Ref_to_Member'>steps</span></a><span class='Delimiter'>[</span><a href="execExpr.c.html#LN1339"><span class='Ref_To_Local'>whenstep</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>jump<span class='Operator'>.</span>jumpdone <span class='Operator'>= </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN88"><span class='Ref_to_Member'>steps_len</span></a><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span> 
                <span class='Comment_Multi_Line'>/* transformCaseExpr always adds a default */ 
</span>                <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1289"><span class='Ref_To_Local'>caseExpr</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN908"><span class='Ref_to_Member'>defresult</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* evaluate ELSE expr into CASE's result variables */ 
</span>                <a href="execExpr.c.html#LN57"><span class='Ref_to_Proto'>ExecInitExprRec</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1289"><span class='Ref_To_Local'>caseExpr</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN908"><span class='Ref_to_Member'>defresult</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>parent</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, 
</span>                                <a href="execExpr.c.html#LN589"><span class='Ref_to_Parameter'>resv</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN589"><span class='Ref_to_Parameter'>resnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* adjust jump targets */ 
</span>                <a href="../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1293"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN1290"><span class='Ref_To_Local'>adjust_jumps</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span><a name="LN1403"></a>                    <a href="../../include/executor/execExpr.h.html#LN219"><span class='Ref_to_Struct'>ExprEvalStep</span></a> <span class='Operator'>*</span><span class='Declare_Local'>as</span> <span class='Operator'>= &</span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN73"><span class='Ref_to_Member'>steps</span></a><span class='Delimiter'>[</span><a href="../../include/nodes/pg_list.h.html#LN106"><span class='Ref_to_Macro'>lfirst_int</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1293"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>]; 
</span> 
                    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1403"><span class='Ref_To_Local'>as</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>== </span><a href="../../include/executor/execExpr.h.html#LN109"><span class='Ref_to_EnumConst'>EEOP_JUMP</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1403"><span class='Ref_To_Local'>as</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>jump<span class='Operator'>.</span>jumpdone <span class='Operator'>== -</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="execExpr.c.html#LN1403"><span class='Ref_To_Local'>as</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>jump<span class='Operator'>.</span>jumpdone <span class='Operator'>= </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN88"><span class='Ref_to_Member'>steps_len</span></a><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span> 
                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
        <span class='Control'>case</span> <a href="../../include/nodes/nodes.h.html#LN171"><span class='Ref_to_EnumConst'>T_CaseTestExpr</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* 
                 * Read from location identified by innermost_caseval.  Note 
                 * that innermost_caseval could be NULL, if this node isn't 
                 * actually within a CASE structure; some parts of the system 
                 * abuse CaseTestExpr to cause a read of a value externally 
                 * supplied in econtext-&GT;caseValue_datum.  We'll take care of 
                 * that scenario at runtime. 
                 */ 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN135"><span class='Ref_to_EnumConst'>EEOP_CASE_TESTVAL</span></a><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>casetest<span class='Operator'>.</span><span class='Keyword'>value </span><span class='Operator'>= </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN91"><span class='Ref_to_Member'>innermost_caseval</span></a><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>casetest<span class='Operator'>.</span>isnull <span class='Operator'>= </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN92"><span class='Ref_to_Member'>innermost_casenull</span></a><span class='Delimiter'>; 
</span> 
                <a href="execExpr.c.html#LN59"><span class='Ref_to_Proto'>ExprEvalPushStep</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
        <span class='Control'>case</span> <a href="../../include/nodes/nodes.h.html#LN172"><span class='Ref_to_EnumConst'>T_ArrayExpr</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN1433"></a>                <a href="../../include/nodes/primnodes.h.html#LN947"><span class='Ref_to_Struct'>ArrayExpr</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>arrayexpr</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN947"><span class='Ref_to_Struct'>ArrayExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span><a name="LN1434"></a>                <span class='Keyword'>int</span>         <span class='Declare_Local'>nelems</span> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1433"><span class='Ref_To_Local'>arrayexpr</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN953"><span class='Ref_to_Member'>elements</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1435"></a>                <a href="../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc</span><span class='Delimiter'>; 
</span><a name="LN1436"></a>                <span class='Keyword'>int</span>         <span class='Declare_Local'>elemoff</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * Evaluate by computing each element, and then forming the 
                 * array.  Elements are computed into scratch arrays 
                 * associated with the ARRAYEXPR step. 
                 */ 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN147"><span class='Ref_to_EnumConst'>EEOP_ARRAYEXPR</span></a><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>arrayexpr<span class='Operator'>.</span>elemvalues <span class='Operator'>= 
</span>                    <span class='Parentheses'>(</span><a href="../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="execExpr.c.html#LN1434"><span class='Ref_To_Local'>nelems</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>arrayexpr<span class='Operator'>.</span>elemnulls <span class='Operator'>= 
</span>                    <span class='Parentheses'>(</span><span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>bool</span><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="execExpr.c.html#LN1434"><span class='Ref_To_Local'>nelems</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>arrayexpr<span class='Operator'>.</span>nelems <span class='Operator'>= </span><a href="execExpr.c.html#LN1434"><span class='Ref_To_Local'>nelems</span></a><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* fill remaining fields of step */ 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>arrayexpr<span class='Operator'>.</span>multidims <span class='Operator'>= </span><a href="execExpr.c.html#LN1433"><span class='Ref_To_Local'>arrayexpr</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN954"><span class='Ref_to_Member'>multidims</span></a><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>arrayexpr<span class='Operator'>.</span>elemtype <span class='Operator'>= </span><a href="execExpr.c.html#LN1433"><span class='Ref_To_Local'>arrayexpr</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN952"><span class='Ref_to_Member'>element_typeid</span></a><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* do one-time catalog lookup for type info */ 
</span>                <a href="../../include/utils/lsyscache.h.html#LN136"><span class='Ref_to_Proto'>get_typlenbyvalalign</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1433"><span class='Ref_To_Local'>arrayexpr</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN952"><span class='Ref_to_Member'>element_typeid</span></a><span class='Delimiter'>, 
</span>                                     <span class='Operator'>&</span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>arrayexpr<span class='Operator'>.</span>elemlength<span class='Delimiter'>, 
</span>                                     <span class='Operator'>&</span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>arrayexpr<span class='Operator'>.</span>elembyval<span class='Delimiter'>, 
</span>                                     <span class='Operator'>&</span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>arrayexpr<span class='Operator'>.</span>elemalign<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* prepare to evaluate all arguments */ 
</span>                <a href="execExpr.c.html#LN1436"><span class='Ref_To_Local'>elemoff</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>                <a href="../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1435"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN1433"><span class='Ref_To_Local'>arrayexpr</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN953"><span class='Ref_to_Member'>elements</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span><a name="LN1464"></a>                    <a href="../../include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>e</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1435"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <a href="execExpr.c.html#LN57"><span class='Ref_to_Proto'>ExecInitExprRec</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1464"><span class='Ref_To_Local'>e</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>parent</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, 
</span>                                    <span class='Operator'>&</span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>arrayexpr<span class='Operator'>.</span>elemvalues<span class='Delimiter'>[</span><a href="execExpr.c.html#LN1436"><span class='Ref_To_Local'>elemoff</span></a><span class='Delimiter'>], 
</span>                                    <span class='Operator'>&</span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>arrayexpr<span class='Operator'>.</span>elemnulls<span class='Delimiter'>[</span><a href="execExpr.c.html#LN1436"><span class='Ref_To_Local'>elemoff</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="execExpr.c.html#LN1436"><span class='Ref_To_Local'>elemoff</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span> 
                <span class='Comment_Multi_Line'>/* and then collect all into an array */ 
</span>                <a href="execExpr.c.html#LN59"><span class='Ref_to_Proto'>ExprEvalPushStep</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
        <span class='Control'>case</span> <a href="../../include/nodes/nodes.h.html#LN173"><span class='Ref_to_EnumConst'>T_RowExpr</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN1479"></a>                <a href="../../include/nodes/primnodes.h.html#LN981"><span class='Ref_to_Struct'>RowExpr</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>rowexpr</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN981"><span class='Ref_to_Struct'>RowExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span><a name="LN1480"></a>                <span class='Keyword'>int</span>         <span class='Declare_Local'>nelems</span> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1479"><span class='Ref_To_Local'>rowexpr</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN984"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1481"></a>                <a href="../../include/access/tupdesc.h.html#LN70"><span class='Ref_to_Typedef'>TupleDesc</span></a>   <span class='Declare_Local'>tupdesc</span><span class='Delimiter'>; 
</span><a name="LN1482"></a>                <a href="../../include/catalog/pg_attribute.h.html#LN186"><span class='Ref_to_Typedef'>Form_pg_attribute</span></a> <span class='Operator'>*</span><span class='Declare_Local'>attrs</span><span class='Delimiter'>; 
</span><a name="LN1483"></a>                <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN1484"></a>                <a href="../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>l</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* Build tupdesc to describe result tuples */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN1479"><span class='Ref_To_Local'>rowexpr</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN985"><span class='Ref_to_Member'>row_typeid</span></a> <span class='Operator'>== </span><a href="../../include/catalog/pg_type.h.html#LN679"><span class='Ref_to_Const'>RECORDOID</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Comment_Multi_Line'>/* generic record, use types of given expressions */ 
</span>                    <a href="execExpr.c.html#LN1481"><span class='Ref_To_Local'>tupdesc</span></a> <span class='Operator'>= </span><a href="../../include/executor/executor.h.html#LN407"><span class='Ref_to_Proto'>ExecTypeFromExprList</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1479"><span class='Ref_To_Local'>rowexpr</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN984"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>else</span> 
                <span class='Delimiter'>{ 
</span>                    <span class='Comment_Multi_Line'>/* it's been cast to a named type, use that */ 
</span>                    <a href="execExpr.c.html#LN1481"><span class='Ref_To_Local'>tupdesc</span></a> <span class='Operator'>= </span><a href="../../include/utils/typcache.h.html#LN156"><span class='Ref_to_Proto'>lookup_rowtype_tupdesc_copy</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1479"><span class='Ref_To_Local'>rowexpr</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN985"><span class='Ref_to_Member'>row_typeid</span></a><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Comment_Multi_Line'>/* In either case, adopt RowExpr's column aliases */ 
</span>                <a href="../../include/executor/executor.h.html#LN408"><span class='Ref_to_Proto'>ExecTypeSetColNames</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1481"><span class='Ref_To_Local'>tupdesc</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN1479"><span class='Ref_To_Local'>rowexpr</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN997"><span class='Ref_to_Member'>colnames</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Comment_Multi_Line'>/* Bless the tupdesc in case it's now of type RECORD */ 
</span>                <a href="../../include/funcapi.h.html#LN229"><span class='Ref_to_Proto'>BlessTupleDesc</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1481"><span class='Ref_To_Local'>tupdesc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * In the named-type case, the tupdesc could have more columns 
                 * than are in the args list, since the type might have had 
                 * columns added since the ROW() was parsed.  We want those 
                 * extra columns to go to nulls, so we make sure that the 
                 * workspace arrays are large enough and then initialize any 
                 * extra columns to read as NULLs. 
                 */ 
</span>                <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1480"><span class='Ref_To_Local'>nelems</span></a> <span class='Operator'>&LT;= </span><a href="execExpr.c.html#LN1481"><span class='Ref_To_Local'>tupdesc</span></a><span class='Operator'>-&GT;</span><a href="../../include/access/tupdesc.h.html#LN72"><span class='Ref_to_Member'>natts</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN1480"><span class='Ref_To_Local'>nelems</span></a> <span class='Operator'>= </span><a href="../../interfaces/ecpg/pgtypeslib/numeric.c.html#LN10"><span class='Ref_to_Macro'>Max</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1480"><span class='Ref_To_Local'>nelems</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN1481"><span class='Ref_To_Local'>tupdesc</span></a><span class='Operator'>-&GT;</span><a href="../../include/access/tupdesc.h.html#LN72"><span class='Ref_to_Member'>natts</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * Evaluate by first building datums for each field, and then 
                 * a final step forming the composite datum. 
                 */ 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN149"><span class='Ref_to_EnumConst'>EEOP_ROW</span></a><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>row<span class='Operator'>.</span>tupdesc <span class='Operator'>= </span><a href="execExpr.c.html#LN1481"><span class='Ref_To_Local'>tupdesc</span></a><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* space for the individual field datums */ 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>row<span class='Operator'>.</span>elemvalues <span class='Operator'>= 
</span>                    <span class='Parentheses'>(</span><a href="../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="execExpr.c.html#LN1480"><span class='Ref_To_Local'>nelems</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>row<span class='Operator'>.</span>elemnulls <span class='Operator'>= 
</span>                    <span class='Parentheses'>(</span><span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>bool</span><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="execExpr.c.html#LN1480"><span class='Ref_To_Local'>nelems</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Comment_Multi_Line'>/* as explained above, make sure any extra columns are null */ 
</span>                memset<span class='Parentheses'>(</span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>row<span class='Operator'>.</span>elemnulls<span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>bool</span><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="execExpr.c.html#LN1480"><span class='Ref_To_Local'>nelems</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* Set up evaluation, skipping any deleted columns */ 
</span>                <a href="execExpr.c.html#LN1482"><span class='Ref_To_Local'>attrs</span></a> <span class='Operator'>= </span><a href="execExpr.c.html#LN1481"><span class='Ref_To_Local'>tupdesc</span></a><span class='Operator'>-&GT;</span><a href="../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN1483"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>                <a href="../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1484"><span class='Ref_To_Local'>l</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN1479"><span class='Ref_To_Local'>rowexpr</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN984"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span><a name="LN1533"></a>                    <a href="../../include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>e</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1484"><span class='Ref_To_Local'>l</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="execExpr.c.html#LN1482"><span class='Ref_To_Local'>attrs</span></a><span class='Delimiter'>[</span><a href="execExpr.c.html#LN1483"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attisdropped<span class='Parentheses'>) 
</span>                    <span class='Delimiter'>{ 
</span>                        <span class='Comment_Multi_Line'>/* 
                         * Guard against ALTER COLUMN TYPE on rowtype since 
                         * the RowExpr was created.  XXX should we check 
                         * typmod too?  Not sure we can be sure it'll be the 
                         * same. 
                         */ 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/nodes/nodeFuncs.h.html#LN31"><span class='Ref_to_Proto'>exprType</span></a><span class='Parentheses'>((</span><a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN1533"><span class='Ref_To_Local'>e</span></a><span class='Parentheses'>)</span> <span class='Operator'>!= </span><a href="execExpr.c.html#LN1482"><span class='Ref_To_Local'>attrs</span></a><span class='Delimiter'>[</span><a href="execExpr.c.html#LN1483"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>atttypid<span class='Parentheses'>)</span> 
                            <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                                    <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_DATATYPE_MISMATCH<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                     <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"ROW() column has type %s instead of type %s"</span><span class='Delimiter'>, 
</span>                                        <a href="../utils/adt/format_type.c.html#LN92"><span class='Ref_to_Func'>format_type_be</span></a><span class='Parentheses'>(</span><a href="../../include/nodes/nodeFuncs.h.html#LN31"><span class='Ref_to_Proto'>exprType</span></a><span class='Parentheses'>((</span><a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN1533"><span class='Ref_To_Local'>e</span></a><span class='Parentheses'>))</span><span class='Delimiter'>, 
</span>                                       <a href="../utils/adt/format_type.c.html#LN92"><span class='Ref_to_Func'>format_type_be</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1482"><span class='Ref_To_Local'>attrs</span></a><span class='Delimiter'>[</span><a href="execExpr.c.html#LN1483"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>atttypid<span class='Parentheses'>))))</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                    <span class='Control'>else</span> 
                    <span class='Delimiter'>{ 
</span>                        <span class='Comment_Multi_Line'>/* 
                         * Ignore original expression and insert a NULL. We 
                         * don't really care what type of NULL it is, so 
                         * always make an int4 NULL. 
                         */ 
</span>                        <a href="execExpr.c.html#LN1533"><span class='Ref_To_Local'>e</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/nodes/makefuncs.h.html#LN57"><span class='Ref_to_Proto'>makeNullConst</span></a><span class='Parentheses'>(</span><a href="../../interfaces/ecpg/ecpglib/pg_type.h.html#LN24"><span class='Ref_to_Const'>INT4OID</span></a><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span> 
                    <span class='Comment_Multi_Line'>/* Evaluate column expr into appropriate workspace slot */ 
</span>                    <a href="execExpr.c.html#LN57"><span class='Ref_to_Proto'>ExecInitExprRec</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1533"><span class='Ref_To_Local'>e</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>parent</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, 
</span>                                    <span class='Operator'>&</span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>row<span class='Operator'>.</span>elemvalues<span class='Delimiter'>[</span><a href="execExpr.c.html#LN1483"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>], 
</span>                                    <span class='Operator'>&</span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>row<span class='Operator'>.</span>elemnulls<span class='Delimiter'>[</span><a href="execExpr.c.html#LN1483"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="execExpr.c.html#LN1483"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span> 
                <span class='Comment_Multi_Line'>/* And finally build the row value */ 
</span>                <a href="execExpr.c.html#LN59"><span class='Ref_to_Proto'>ExprEvalPushStep</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
        <span class='Control'>case</span> <a href="../../include/nodes/nodes.h.html#LN174"><span class='Ref_to_EnumConst'>T_RowCompareExpr</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN1574"></a>                <a href="../../include/nodes/primnodes.h.html#LN1026"><span class='Ref_to_Struct'>RowCompareExpr</span></a> <span class='Operator'>*</span><span class='Declare_Local'>rcexpr</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN1026"><span class='Ref_to_Struct'>RowCompareExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span><a name="LN1575"></a>                <span class='Keyword'>int</span>         <span class='Declare_Local'>nopers</span> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1574"><span class='Ref_To_Local'>rcexpr</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1030"><span class='Ref_to_Member'>opnos</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1576"></a>                <a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>adjust_jumps</span> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span><a name="LN1577"></a>                <a href="../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>l_left_expr</span><span class='Delimiter'>, 
</span><a name="LN1578"></a>                           <span class='Operator'>*</span><span class='Declare_Local'>l_right_expr</span><span class='Delimiter'>, 
</span><a name="LN1579"></a>                           <span class='Operator'>*</span><span class='Declare_Local'>l_opno</span><span class='Delimiter'>, 
</span><a name="LN1580"></a>                           <span class='Operator'>*</span><span class='Declare_Local'>l_opfamily</span><span class='Delimiter'>, 
</span><a name="LN1581"></a>                           <span class='Operator'>*</span><span class='Declare_Local'>l_inputcollid</span><span class='Delimiter'>; 
</span><a name="LN1582"></a>                <a href="../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc</span><span class='Delimiter'>; 
</span><a name="LN1583"></a>                <span class='Keyword'>int</span>         <span class='Declare_Local'>off</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * Iterate over each field, prepare comparisons.  To handle 
                 * NULL results, prepare jumps to after the expression.  If a 
                 * comparison yields a != 0 result, jump to the final step. 
                 */ 
</span>                <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1574"><span class='Ref_To_Local'>rcexpr</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1033"><span class='Ref_to_Member'>largs</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><a href="execExpr.c.html#LN1575"><span class='Ref_To_Local'>nopers</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1574"><span class='Ref_To_Local'>rcexpr</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1034"><span class='Ref_to_Member'>rargs</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><a href="execExpr.c.html#LN1575"><span class='Ref_To_Local'>nopers</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1574"><span class='Ref_To_Local'>rcexpr</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1031"><span class='Ref_to_Member'>opfamilies</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><a href="execExpr.c.html#LN1575"><span class='Ref_To_Local'>nopers</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1574"><span class='Ref_To_Local'>rcexpr</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1032"><span class='Ref_to_Member'>inputcollids</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><a href="execExpr.c.html#LN1575"><span class='Ref_To_Local'>nopers</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <a href="execExpr.c.html#LN1583"><span class='Ref_To_Local'>off</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>                <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN1583"><span class='Ref_To_Local'>off</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                     <a href="execExpr.c.html#LN1577"><span class='Ref_To_Local'>l_left_expr</span></a> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN75"><span class='Ref_to_Func'>list_head</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1574"><span class='Ref_To_Local'>rcexpr</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1033"><span class='Ref_to_Member'>largs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="execExpr.c.html#LN1578"><span class='Ref_To_Local'>l_right_expr</span></a> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN75"><span class='Ref_to_Func'>list_head</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1574"><span class='Ref_To_Local'>rcexpr</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1034"><span class='Ref_to_Member'>rargs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="execExpr.c.html#LN1579"><span class='Ref_To_Local'>l_opno</span></a> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN75"><span class='Ref_to_Func'>list_head</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1574"><span class='Ref_To_Local'>rcexpr</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1030"><span class='Ref_to_Member'>opnos</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="execExpr.c.html#LN1580"><span class='Ref_To_Local'>l_opfamily</span></a> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN75"><span class='Ref_to_Func'>list_head</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1574"><span class='Ref_To_Local'>rcexpr</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1031"><span class='Ref_to_Member'>opfamilies</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="execExpr.c.html#LN1581"><span class='Ref_To_Local'>l_inputcollid</span></a> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN75"><span class='Ref_to_Func'>list_head</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1574"><span class='Ref_To_Local'>rcexpr</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1032"><span class='Ref_to_Member'>inputcollids</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                     <a href="execExpr.c.html#LN1583"><span class='Ref_To_Local'>off</span></a> <span class='Operator'>&LT; </span><a href="execExpr.c.html#LN1575"><span class='Ref_To_Local'>nopers</span></a><span class='Delimiter'>; 
</span>                     <a href="execExpr.c.html#LN1583"><span class='Ref_To_Local'>off</span></a><span class='Operator'>++</span><span class='Delimiter'>, 
</span>                     <a href="execExpr.c.html#LN1577"><span class='Ref_To_Local'>l_left_expr</span></a> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN104"><span class='Ref_to_Macro'>lnext</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1577"><span class='Ref_To_Local'>l_left_expr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="execExpr.c.html#LN1578"><span class='Ref_To_Local'>l_right_expr</span></a> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN104"><span class='Ref_to_Macro'>lnext</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1578"><span class='Ref_To_Local'>l_right_expr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="execExpr.c.html#LN1579"><span class='Ref_To_Local'>l_opno</span></a> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN104"><span class='Ref_to_Macro'>lnext</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1579"><span class='Ref_To_Local'>l_opno</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="execExpr.c.html#LN1580"><span class='Ref_To_Local'>l_opfamily</span></a> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN104"><span class='Ref_to_Macro'>lnext</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1580"><span class='Ref_To_Local'>l_opfamily</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="execExpr.c.html#LN1581"><span class='Ref_To_Local'>l_inputcollid</span></a> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN104"><span class='Ref_to_Macro'>lnext</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1581"><span class='Ref_To_Local'>l_inputcollid</span></a><span class='Parentheses'>))</span> 
                <span class='Delimiter'>{ 
</span><a name="LN1610"></a>                    <a href="../../include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>left_expr</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1577"><span class='Ref_To_Local'>l_left_expr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1611"></a>                    <a href="../../include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>right_expr</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1578"><span class='Ref_To_Local'>l_right_expr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1612"></a>                    <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>opno</span> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN107"><span class='Ref_to_Macro'>lfirst_oid</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1579"><span class='Ref_To_Local'>l_opno</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1613"></a>                    <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>opfamily</span> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN107"><span class='Ref_to_Macro'>lfirst_oid</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1580"><span class='Ref_To_Local'>l_opfamily</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1614"></a>                    <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>inputcollid</span> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN107"><span class='Ref_to_Macro'>lfirst_oid</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1581"><span class='Ref_To_Local'>l_inputcollid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1615"></a>                    <span class='Keyword'>int</span>         <span class='Declare_Local'>strategy</span><span class='Delimiter'>; 
</span><a name="LN1616"></a>                    <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>lefttype</span><span class='Delimiter'>; 
</span><a name="LN1617"></a>                    <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>righttype</span><span class='Delimiter'>; 
</span><a name="LN1618"></a>                    <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>proc</span><span class='Delimiter'>; 
</span><a name="LN1619"></a>                    <a href="../../include/fmgr.h.html#LN55"><span class='Ref_to_Struct'>FmgrInfo</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>finfo</span><span class='Delimiter'>; 
</span><a name="LN1620"></a>                    <a href="../../include/fmgr.h.html#LN37"><span class='Ref_to_Typedef'>FunctionCallInfo</span></a> <span class='Declare_Local'>fcinfo</span><span class='Delimiter'>; 
</span> 
                    <a href="../../include/utils/lsyscache.h.html#LN66"><span class='Ref_to_Proto'>get_op_opfamily_properties</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1612"><span class='Ref_To_Local'>opno</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN1613"><span class='Ref_To_Local'>opfamily</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, 
</span>                                               <span class='Operator'>&</span><a href="execExpr.c.html#LN1615"><span class='Ref_To_Local'>strategy</span></a><span class='Delimiter'>, 
</span>                                               <span class='Operator'>&</span><a href="execExpr.c.html#LN1616"><span class='Ref_To_Local'>lefttype</span></a><span class='Delimiter'>, 
</span>                                               <span class='Operator'>&</span><a href="execExpr.c.html#LN1617"><span class='Ref_To_Local'>righttype</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="execExpr.c.html#LN1618"><span class='Ref_To_Local'>proc</span></a> <span class='Operator'>= </span><a href="../../include/utils/lsyscache.h.html#LN83"><span class='Ref_to_Proto'>get_opfamily_proc</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1613"><span class='Ref_To_Local'>opfamily</span></a><span class='Delimiter'>, 
</span>                                             <a href="execExpr.c.html#LN1616"><span class='Ref_To_Local'>lefttype</span></a><span class='Delimiter'>, 
</span>                                             <a href="execExpr.c.html#LN1617"><span class='Ref_To_Local'>righttype</span></a><span class='Delimiter'>, 
</span>                                             <a href="../../include/access/nbtree.h.html#LN228"><span class='Ref_to_Const'>BTORDER_PROC</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <span class='Comment_Multi_Line'>/* Set up the primary fmgr lookup information */ 
</span>                    <a href="execExpr.c.html#LN1619"><span class='Ref_To_Local'>finfo</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/fmgr.h.html#LN55"><span class='Ref_to_Struct'>FmgrInfo</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                    <a href="execExpr.c.html#LN1620"><span class='Ref_To_Local'>fcinfo</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/fmgr.h.html#LN76"><span class='Ref_to_Struct'>FunctionCallInfoData</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                    <a href="../../include/fmgr.h.html#LN92"><span class='Ref_to_Proto'>fmgr_info</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1618"><span class='Ref_To_Local'>proc</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN1619"><span class='Ref_To_Local'>finfo</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="../../include/fmgr.h.html#LN103"><span class='Ref_to_Macro'>fmgr_info_set_expr</span></a><span class='Parentheses'>((</span><a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN1619"><span class='Ref_To_Local'>finfo</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="../../include/fmgr.h.html#LN119"><span class='Ref_to_Macro'>InitFunctionCallInfoData</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="execExpr.c.html#LN1620"><span class='Ref_To_Local'>fcinfo</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN1619"><span class='Ref_To_Local'>finfo</span></a><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, 
</span>                                             <a href="execExpr.c.html#LN1614"><span class='Ref_To_Local'>inputcollid</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <span class='Comment_Multi_Line'>/* 
                     * If we enforced permissions checks on index support 
                     * functions, we'd need to make a check here.  But the 
                     * index support machinery doesn't do that, and thus 
                     * neither does this code. 
                     */ 
</span> 
                    <span class='Comment_Multi_Line'>/* evaluate left and right args directly into fcinfo */ 
</span>                    <a href="execExpr.c.html#LN57"><span class='Ref_to_Proto'>ExecInitExprRec</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1610"><span class='Ref_To_Local'>left_expr</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>parent</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, 
</span>                                    <span class='Operator'>&</span><a href="execExpr.c.html#LN1620"><span class='Ref_To_Local'>fcinfo</span></a><span class='Operator'>-&GT;</span><a href="../../include/fmgr.h.html#LN84"><span class='Ref_to_Member'>arg</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>], </span><span class='Operator'>&</span><a href="execExpr.c.html#LN1620"><span class='Ref_To_Local'>fcinfo</span></a><span class='Operator'>-&GT;</span><a href="../../include/fmgr.h.html#LN85"><span class='Ref_to_Member'>argnull</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="execExpr.c.html#LN57"><span class='Ref_to_Proto'>ExecInitExprRec</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1611"><span class='Ref_To_Local'>right_expr</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>parent</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, 
</span>                                    <span class='Operator'>&</span><a href="execExpr.c.html#LN1620"><span class='Ref_To_Local'>fcinfo</span></a><span class='Operator'>-&GT;</span><a href="../../include/fmgr.h.html#LN84"><span class='Ref_to_Member'>arg</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>], </span><span class='Operator'>&</span><a href="execExpr.c.html#LN1620"><span class='Ref_To_Local'>fcinfo</span></a><span class='Operator'>-&GT;</span><a href="../../include/fmgr.h.html#LN85"><span class='Ref_to_Member'>argnull</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN155"><span class='Ref_to_EnumConst'>EEOP_ROWCOMPARE_STEP</span></a><span class='Delimiter'>; 
</span>                    <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>rowcompare_step<span class='Operator'>.</span>finfo <span class='Operator'>= </span><a href="execExpr.c.html#LN1619"><span class='Ref_To_Local'>finfo</span></a><span class='Delimiter'>; 
</span>                    <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>rowcompare_step<span class='Operator'>.</span>fcinfo_data <span class='Operator'>= </span><a href="execExpr.c.html#LN1620"><span class='Ref_To_Local'>fcinfo</span></a><span class='Delimiter'>; 
</span>                    <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>rowcompare_step<span class='Operator'>.</span>fn_addr <span class='Operator'>= </span><a href="execExpr.c.html#LN1619"><span class='Ref_To_Local'>finfo</span></a><span class='Operator'>-&GT;</span><a href="../../include/fmgr.h.html#LN57"><span class='Ref_to_Member'>fn_addr</span></a><span class='Delimiter'>; 
</span>                    <span class='Comment_Multi_Line'>/* jump targets filled below */ 
</span>                    <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>rowcompare_step<span class='Operator'>.</span>jumpnull <span class='Operator'>= -</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>                    <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>rowcompare_step<span class='Operator'>.</span>jumpdone <span class='Operator'>= -</span><span class='Number'>1</span><span class='Delimiter'>; 
</span> 
                    <a href="execExpr.c.html#LN59"><span class='Ref_to_Proto'>ExprEvalPushStep</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="execExpr.c.html#LN1576"><span class='Ref_To_Local'>adjust_jumps</span></a> <span class='Operator'>= </span><a href="../nodes/list.c.html#LN144"><span class='Ref_to_Func'>lappend_int</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1576"><span class='Ref_To_Local'>adjust_jumps</span></a><span class='Delimiter'>, 
</span>                                               <a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN88"><span class='Ref_to_Member'>steps_len</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for off=0,l_left_expr=lis... &raquo; </span> 
 
                <span class='Comment_Multi_Line'>/* 
                 * We could have a zero-column rowtype, in which case the rows 
                 * necessarily compare equal. 
                 */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN1575"><span class='Ref_To_Local'>nopers</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN75"><span class='Ref_to_EnumConst'>EEOP_CONST</span></a><span class='Delimiter'>; 
</span>                    <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>constval<span class='Operator'>.</span><span class='Keyword'>value </span><span class='Operator'>= </span><a href="../../include/postgres.h.html#LN484"><span class='Ref_to_Macro'>Int32GetDatum</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>constval<span class='Operator'>.</span>isnull <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>                    <a href="execExpr.c.html#LN59"><span class='Ref_to_Proto'>ExprEvalPushStep</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span> 
                <span class='Comment_Multi_Line'>/* Finally, examine the last comparison result */ 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN158"><span class='Ref_to_EnumConst'>EEOP_ROWCOMPARE_FINAL</span></a><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>rowcompare_final<span class='Operator'>.</span>rctype <span class='Operator'>= </span><a href="execExpr.c.html#LN1574"><span class='Ref_To_Local'>rcexpr</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1029"><span class='Ref_to_Member'>rctype</span></a><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN59"><span class='Ref_to_Proto'>ExprEvalPushStep</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* adjust jump targetss */ 
</span>                <a href="../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1582"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN1576"><span class='Ref_To_Local'>adjust_jumps</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span><a name="LN1685"></a>                    <a href="../../include/executor/execExpr.h.html#LN219"><span class='Ref_to_Struct'>ExprEvalStep</span></a> <span class='Operator'>*</span><span class='Declare_Local'>as</span> <span class='Operator'>= &</span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN73"><span class='Ref_to_Member'>steps</span></a><span class='Delimiter'>[</span><a href="../../include/nodes/pg_list.h.html#LN106"><span class='Ref_to_Macro'>lfirst_int</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1582"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>]; 
</span> 
                    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1685"><span class='Ref_To_Local'>as</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>== </span><a href="../../include/executor/execExpr.h.html#LN155"><span class='Ref_to_EnumConst'>EEOP_ROWCOMPARE_STEP</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1685"><span class='Ref_To_Local'>as</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>rowcompare_step<span class='Operator'>.</span>jumpdone <span class='Operator'>== -</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1685"><span class='Ref_To_Local'>as</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>rowcompare_step<span class='Operator'>.</span>jumpnull <span class='Operator'>== -</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <span class='Comment_Multi_Line'>/* jump to comparison evaluation */ 
</span>                    <a href="execExpr.c.html#LN1685"><span class='Ref_To_Local'>as</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>rowcompare_step<span class='Operator'>.</span>jumpdone <span class='Operator'>= </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN88"><span class='Ref_to_Member'>steps_len</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>                    <span class='Comment_Multi_Line'>/* jump to the following expression */ 
</span>                    <a href="execExpr.c.html#LN1685"><span class='Ref_To_Local'>as</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>rowcompare_step<span class='Operator'>.</span>jumpnull <span class='Operator'>= </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN88"><span class='Ref_to_Member'>steps_len</span></a><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span> 
                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
        <span class='Control'>case</span> <a href="../../include/nodes/nodes.h.html#LN175"><span class='Ref_to_EnumConst'>T_CoalesceExpr</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN1702"></a>                <a href="../../include/nodes/primnodes.h.html#LN1040"><span class='Ref_to_Struct'>CoalesceExpr</span></a> <span class='Operator'>*</span><span class='Declare_Local'>coalesce</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN1040"><span class='Ref_to_Struct'>CoalesceExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span><a name="LN1703"></a>                <a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>adjust_jumps</span> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span><a name="LN1704"></a>                <a href="../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* We assume there's at least one arg */ 
</span>                <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1702"><span class='Ref_To_Local'>coalesce</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1045"><span class='Ref_to_Member'>args</span></a> <span class='Operator'>!= </span><a href="../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * Prepare evaluation of all coalesced arguments, after each 
                 * one push a step that short-circuits if not null. 
                 */ 
</span>                <a href="../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1704"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN1702"><span class='Ref_To_Local'>coalesce</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1045"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span><a name="LN1715"></a>                    <a href="../../include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>e</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1704"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <span class='Comment_Multi_Line'>/* evaluate argument, directly into result datum */ 
</span>                    <a href="execExpr.c.html#LN57"><span class='Ref_to_Proto'>ExecInitExprRec</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1715"><span class='Ref_To_Local'>e</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>parent</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN589"><span class='Ref_to_Parameter'>resv</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN589"><span class='Ref_to_Parameter'>resnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <span class='Comment_Multi_Line'>/* if it's not null, skip to end of COALESCE expr */ 
</span>                    <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN113"><span class='Ref_to_EnumConst'>EEOP_JUMP_IF_NOT_NULL</span></a><span class='Delimiter'>; 
</span>                    <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>jump<span class='Operator'>.</span>jumpdone <span class='Operator'>= -</span><span class='Number'>1</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* adjust later */ 
</span>                    <a href="execExpr.c.html#LN59"><span class='Ref_to_Proto'>ExprEvalPushStep</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <a href="execExpr.c.html#LN1703"><span class='Ref_To_Local'>adjust_jumps</span></a> <span class='Operator'>= </span><a href="../nodes/list.c.html#LN144"><span class='Ref_to_Func'>lappend_int</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1703"><span class='Ref_To_Local'>adjust_jumps</span></a><span class='Delimiter'>, 
</span>                                               <a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN88"><span class='Ref_to_Member'>steps_len</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * No need to add a constant NULL return - we only can get to 
                 * the end of the expression if a NULL already is being 
                 * returned. 
                 */ 
</span> 
                <span class='Comment_Multi_Line'>/* adjust jump targets */ 
</span>                <a href="../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1704"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN1703"><span class='Ref_To_Local'>adjust_jumps</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span><a name="LN1738"></a>                    <a href="../../include/executor/execExpr.h.html#LN219"><span class='Ref_to_Struct'>ExprEvalStep</span></a> <span class='Operator'>*</span><span class='Declare_Local'>as</span> <span class='Operator'>= &</span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN73"><span class='Ref_to_Member'>steps</span></a><span class='Delimiter'>[</span><a href="../../include/nodes/pg_list.h.html#LN106"><span class='Ref_to_Macro'>lfirst_int</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1704"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>]; 
</span> 
                    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1738"><span class='Ref_To_Local'>as</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>== </span><a href="../../include/executor/execExpr.h.html#LN113"><span class='Ref_to_EnumConst'>EEOP_JUMP_IF_NOT_NULL</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1738"><span class='Ref_To_Local'>as</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>jump<span class='Operator'>.</span>jumpdone <span class='Operator'>== -</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="execExpr.c.html#LN1738"><span class='Ref_To_Local'>as</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>jump<span class='Operator'>.</span>jumpdone <span class='Operator'>= </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN88"><span class='Ref_to_Member'>steps_len</span></a><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span> 
                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
        <span class='Control'>case</span> <a href="../../include/nodes/nodes.h.html#LN176"><span class='Ref_to_EnumConst'>T_MinMaxExpr</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN1750"></a>                <a href="../../include/nodes/primnodes.h.html#LN1058"><span class='Ref_to_Struct'>MinMaxExpr</span></a> <span class='Operator'>*</span><span class='Declare_Local'>minmaxexpr</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN1058"><span class='Ref_to_Struct'>MinMaxExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span><a name="LN1751"></a>                <span class='Keyword'>int</span>         <span class='Declare_Local'>nelems</span> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1750"><span class='Ref_To_Local'>minmaxexpr</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1065"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1752"></a>                <a href="../../include/utils/typcache.h.html#LN28"><span class='Ref_to_Struct'>TypeCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>typentry</span><span class='Delimiter'>; 
</span><a name="LN1753"></a>                <a href="../../include/fmgr.h.html#LN55"><span class='Ref_to_Struct'>FmgrInfo</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>finfo</span><span class='Delimiter'>; 
</span><a name="LN1754"></a>                <a href="../../include/fmgr.h.html#LN37"><span class='Ref_to_Typedef'>FunctionCallInfo</span></a> <span class='Declare_Local'>fcinfo</span><span class='Delimiter'>; 
</span><a name="LN1755"></a>                <a href="../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc</span><span class='Delimiter'>; 
</span><a name="LN1756"></a>                <span class='Keyword'>int</span>         <span class='Declare_Local'>off</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* Look up the btree comparison function for the datatype */ 
</span>                <a href="execExpr.c.html#LN1752"><span class='Ref_To_Local'>typentry</span></a> <span class='Operator'>= </span><a href="../../include/utils/typcache.h.html#LN142"><span class='Ref_to_Proto'>lookup_type_cache</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1750"><span class='Ref_To_Local'>minmaxexpr</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1061"><span class='Ref_to_Member'>minmaxtype</span></a><span class='Delimiter'>, 
</span>                                             <a href="../../include/utils/typcache.h.html#LN112"><span class='Ref_to_Const'>TYPECACHE_CMP_PROC</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1752"><span class='Ref_To_Local'>typentry</span></a><span class='Operator'>-&GT;</span><a href="../../include/utils/typcache.h.html#LN56"><span class='Ref_to_Member'>cmp_proc</span></a><span class='Parentheses'>))</span> 
                    <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                            <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_UNDEFINED_FUNCTION<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                             <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"could not identify a comparison function for type %s"</span><span class='Delimiter'>, 
</span>                                    <a href="../utils/adt/format_type.c.html#LN92"><span class='Ref_to_Func'>format_type_be</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1750"><span class='Ref_To_Local'>minmaxexpr</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1061"><span class='Ref_to_Member'>minmaxtype</span></a><span class='Parentheses'>))))</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * If we enforced permissions checks on index support 
                 * functions, we'd need to make a check here.  But the index 
                 * support machinery doesn't do that, and thus neither does 
                 * this code. 
                 */ 
</span> 
                <span class='Comment_Multi_Line'>/* Perform function lookup */ 
</span>                <a href="execExpr.c.html#LN1753"><span class='Ref_To_Local'>finfo</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/fmgr.h.html#LN55"><span class='Ref_to_Struct'>FmgrInfo</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN1754"><span class='Ref_To_Local'>fcinfo</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/fmgr.h.html#LN76"><span class='Ref_to_Struct'>FunctionCallInfoData</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="../../include/fmgr.h.html#LN92"><span class='Ref_to_Proto'>fmgr_info</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1752"><span class='Ref_To_Local'>typentry</span></a><span class='Operator'>-&GT;</span><a href="../../include/utils/typcache.h.html#LN56"><span class='Ref_to_Member'>cmp_proc</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN1753"><span class='Ref_To_Local'>finfo</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="../../include/fmgr.h.html#LN103"><span class='Ref_to_Macro'>fmgr_info_set_expr</span></a><span class='Parentheses'>((</span><a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN1753"><span class='Ref_To_Local'>finfo</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="../../include/fmgr.h.html#LN119"><span class='Ref_to_Macro'>InitFunctionCallInfoData</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="execExpr.c.html#LN1754"><span class='Ref_To_Local'>fcinfo</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN1753"><span class='Ref_To_Local'>finfo</span></a><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, 
</span>                                         <a href="execExpr.c.html#LN1750"><span class='Ref_To_Local'>minmaxexpr</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1063"><span class='Ref_to_Member'>inputcollid</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN161"><span class='Ref_to_EnumConst'>EEOP_MINMAX</span></a><span class='Delimiter'>; 
</span>                <span class='Comment_Multi_Line'>/* allocate space to store arguments */ 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>minmax<span class='Operator'>.</span>values <span class='Operator'>= 
</span>                    <span class='Parentheses'>(</span><a href="../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="execExpr.c.html#LN1751"><span class='Ref_To_Local'>nelems</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>minmax<span class='Operator'>.</span>nulls <span class='Operator'>= 
</span>                    <span class='Parentheses'>(</span><span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>bool</span><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="execExpr.c.html#LN1751"><span class='Ref_To_Local'>nelems</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>minmax<span class='Operator'>.</span>nelems <span class='Operator'>= </span><a href="execExpr.c.html#LN1751"><span class='Ref_To_Local'>nelems</span></a><span class='Delimiter'>; 
</span> 
                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>minmax<span class='Operator'>.</span>op <span class='Operator'>= </span><a href="execExpr.c.html#LN1750"><span class='Ref_To_Local'>minmaxexpr</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1064"><span class='Ref_to_Member'>op</span></a><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>minmax<span class='Operator'>.</span>finfo <span class='Operator'>= </span><a href="execExpr.c.html#LN1753"><span class='Ref_To_Local'>finfo</span></a><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>minmax<span class='Operator'>.</span>fcinfo_data <span class='Operator'>= </span><a href="execExpr.c.html#LN1754"><span class='Ref_To_Local'>fcinfo</span></a><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* evaluate expressions into minmax-&GT;values/nulls */ 
</span>                <a href="execExpr.c.html#LN1756"><span class='Ref_To_Local'>off</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>                <a href="../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1755"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN1750"><span class='Ref_To_Local'>minmaxexpr</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1065"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span><a name="LN1798"></a>                    <a href="../../include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>e</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1755"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <a href="execExpr.c.html#LN57"><span class='Ref_to_Proto'>ExecInitExprRec</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1798"><span class='Ref_To_Local'>e</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>parent</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, 
</span>                                    <span class='Operator'>&</span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>minmax<span class='Operator'>.</span>values<span class='Delimiter'>[</span><a href="execExpr.c.html#LN1756"><span class='Ref_To_Local'>off</span></a><span class='Delimiter'>], 
</span>                                    <span class='Operator'>&</span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>minmax<span class='Operator'>.</span>nulls<span class='Delimiter'>[</span><a href="execExpr.c.html#LN1756"><span class='Ref_To_Local'>off</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="execExpr.c.html#LN1756"><span class='Ref_To_Local'>off</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span> 
                <span class='Comment_Multi_Line'>/* and push the final comparison */ 
</span>                <a href="execExpr.c.html#LN59"><span class='Ref_to_Proto'>ExprEvalPushStep</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
        <span class='Control'>case</span> <a href="../../include/nodes/nodes.h.html#LN177"><span class='Ref_to_EnumConst'>T_SQLValueFunction</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN1813"></a>                <a href="../../include/nodes/primnodes.h.html#LN1099"><span class='Ref_to_Struct'>SQLValueFunction</span></a> <span class='Operator'>*</span><span class='Declare_Local'>svf</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN1099"><span class='Ref_to_Struct'>SQLValueFunction</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span> 
                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN144"><span class='Ref_to_EnumConst'>EEOP_SQLVALUEFUNCTION</span></a><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>sqlvaluefunction<span class='Operator'>.</span>svf <span class='Operator'>= </span><a href="execExpr.c.html#LN1813"><span class='Ref_To_Local'>svf</span></a><span class='Delimiter'>; 
</span> 
                <a href="execExpr.c.html#LN59"><span class='Ref_to_Proto'>ExprEvalPushStep</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
        <span class='Control'>case</span> <a href="../../include/nodes/nodes.h.html#LN178"><span class='Ref_to_EnumConst'>T_XmlExpr</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN1824"></a>                <a href="../../include/nodes/primnodes.h.html#LN1137"><span class='Ref_to_Struct'>XmlExpr</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>xexpr</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN1137"><span class='Ref_to_Struct'>XmlExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span><a name="LN1825"></a>                <span class='Keyword'>int</span>         <span class='Declare_Local'>nnamed</span> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1824"><span class='Ref_To_Local'>xexpr</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1142"><span class='Ref_to_Member'>named_args</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1826"></a>                <span class='Keyword'>int</span>         <span class='Declare_Local'>nargs</span> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1824"><span class='Ref_To_Local'>xexpr</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1144"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1827"></a>                <span class='Keyword'>int</span>         <span class='Declare_Local'>off</span><span class='Delimiter'>; 
</span><a name="LN1828"></a>                <a href="../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>arg</span><span class='Delimiter'>; 
</span> 
                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN207"><span class='Ref_to_EnumConst'>EEOP_XMLEXPR</span></a><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>xmlexpr<span class='Operator'>.</span>xexpr <span class='Operator'>= </span><a href="execExpr.c.html#LN1824"><span class='Ref_To_Local'>xexpr</span></a><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* allocate space for storing all the arguments */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN1825"><span class='Ref_To_Local'>nnamed</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>xmlexpr<span class='Operator'>.</span>named_argvalue <span class='Operator'>= 
</span>                        <span class='Parentheses'>(</span><a href="../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="execExpr.c.html#LN1825"><span class='Ref_To_Local'>nnamed</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>xmlexpr<span class='Operator'>.</span>named_argnull <span class='Operator'>= 
</span>                        <span class='Parentheses'>(</span><span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>bool</span><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="execExpr.c.html#LN1825"><span class='Ref_To_Local'>nnamed</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>else</span> 
                <span class='Delimiter'>{ 
</span>                    <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>xmlexpr<span class='Operator'>.</span>named_argvalue <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>                    <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>xmlexpr<span class='Operator'>.</span>named_argnull <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN1826"><span class='Ref_To_Local'>nargs</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>xmlexpr<span class='Operator'>.</span>argvalue <span class='Operator'>= 
</span>                        <span class='Parentheses'>(</span><a href="../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="execExpr.c.html#LN1826"><span class='Ref_To_Local'>nargs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>xmlexpr<span class='Operator'>.</span>argnull <span class='Operator'>= 
</span>                        <span class='Parentheses'>(</span><span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>bool</span><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="execExpr.c.html#LN1826"><span class='Ref_To_Local'>nargs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>else</span> 
                <span class='Delimiter'>{ 
</span>                    <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>xmlexpr<span class='Operator'>.</span>argvalue <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>                    <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>xmlexpr<span class='Operator'>.</span>argnull <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span> 
                <span class='Comment_Multi_Line'>/* prepare argument execution */ 
</span>                <a href="execExpr.c.html#LN1827"><span class='Ref_To_Local'>off</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>                <a href="../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1828"><span class='Ref_To_Local'>arg</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN1824"><span class='Ref_To_Local'>xexpr</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1142"><span class='Ref_to_Member'>named_args</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span><a name="LN1864"></a>                    <a href="../../include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>e</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1828"><span class='Ref_To_Local'>arg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <a href="execExpr.c.html#LN57"><span class='Ref_to_Proto'>ExecInitExprRec</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1864"><span class='Ref_To_Local'>e</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>parent</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, 
</span>                                    <span class='Operator'>&</span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>xmlexpr<span class='Operator'>.</span>named_argvalue<span class='Delimiter'>[</span><a href="execExpr.c.html#LN1827"><span class='Ref_To_Local'>off</span></a><span class='Delimiter'>], 
</span>                                    <span class='Operator'>&</span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>xmlexpr<span class='Operator'>.</span>named_argnull<span class='Delimiter'>[</span><a href="execExpr.c.html#LN1827"><span class='Ref_To_Local'>off</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="execExpr.c.html#LN1827"><span class='Ref_To_Local'>off</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span> 
                <a href="execExpr.c.html#LN1827"><span class='Ref_To_Local'>off</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>                <a href="../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1828"><span class='Ref_To_Local'>arg</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN1824"><span class='Ref_To_Local'>xexpr</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1144"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span><a name="LN1875"></a>                    <a href="../../include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>e</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1828"><span class='Ref_To_Local'>arg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <a href="execExpr.c.html#LN57"><span class='Ref_to_Proto'>ExecInitExprRec</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1875"><span class='Ref_To_Local'>e</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>parent</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, 
</span>                                    <span class='Operator'>&</span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>xmlexpr<span class='Operator'>.</span>argvalue<span class='Delimiter'>[</span><a href="execExpr.c.html#LN1827"><span class='Ref_To_Local'>off</span></a><span class='Delimiter'>], 
</span>                                    <span class='Operator'>&</span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>xmlexpr<span class='Operator'>.</span>argnull<span class='Delimiter'>[</span><a href="execExpr.c.html#LN1827"><span class='Ref_To_Local'>off</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="execExpr.c.html#LN1827"><span class='Ref_To_Local'>off</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span> 
                <span class='Comment_Multi_Line'>/* and evaluate the actual XML expression */ 
</span>                <a href="execExpr.c.html#LN59"><span class='Ref_to_Proto'>ExprEvalPushStep</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
        <span class='Control'>case</span> <a href="../../include/nodes/nodes.h.html#LN179"><span class='Ref_to_EnumConst'>T_NullTest</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN1890"></a>                <a href="../../include/nodes/primnodes.h.html#LN1175"><span class='Ref_to_Struct'>NullTest</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>ntest</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN1175"><span class='Ref_to_Struct'>NullTest</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN1890"><span class='Ref_To_Local'>ntest</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1179"><span class='Ref_to_Member'>nulltesttype</span></a> <span class='Operator'>== </span><a href="../../include/nodes/primnodes.h.html#LN1172"><span class='Ref_to_EnumConst'>IS_NULL</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN1890"><span class='Ref_To_Local'>ntest</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1180"><span class='Ref_to_Member'>argisrow</span></a><span class='Parentheses'>) 
</span>                        <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN121"><span class='Ref_to_EnumConst'>EEOP_NULLTEST_ROWISNULL</span></a><span class='Delimiter'>; 
</span>                    <span class='Control'>else</span> 
                        <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN117"><span class='Ref_to_EnumConst'>EEOP_NULLTEST_ISNULL</span></a><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN1890"><span class='Ref_To_Local'>ntest</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1179"><span class='Ref_to_Member'>nulltesttype</span></a> <span class='Operator'>== </span><a href="../../include/nodes/primnodes.h.html#LN1172"><span class='Ref_to_EnumConst'>IS_NOT_NULL</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN1890"><span class='Ref_To_Local'>ntest</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1180"><span class='Ref_to_Member'>argisrow</span></a><span class='Parentheses'>) 
</span>                        <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN122"><span class='Ref_to_EnumConst'>EEOP_NULLTEST_ROWISNOTNULL</span></a><span class='Delimiter'>; 
</span>                    <span class='Control'>else</span> 
                        <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN118"><span class='Ref_to_EnumConst'>EEOP_NULLTEST_ISNOTNULL</span></a><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>else</span> 
                <span class='Delimiter'>{ 
</span>                    <a href="../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"unrecognized nulltesttype: %d"</span><span class='Delimiter'>, 
</span>                         <span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN1890"><span class='Ref_To_Local'>ntest</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1179"><span class='Ref_to_Member'>nulltesttype</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Comment_Multi_Line'>/* initialize cache in case it's a row test */ 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>nulltest_row<span class='Operator'>.</span>argdesc <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* first evaluate argument into result variable */ 
</span>                <a href="execExpr.c.html#LN57"><span class='Ref_to_Proto'>ExecInitExprRec</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1890"><span class='Ref_To_Local'>ntest</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1178"><span class='Ref_to_Member'>arg</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>parent</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, 
</span>                                <a href="execExpr.c.html#LN589"><span class='Ref_to_Parameter'>resv</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN589"><span class='Ref_to_Parameter'>resnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* then push the test of that argument */ 
</span>                <a href="execExpr.c.html#LN59"><span class='Ref_to_Proto'>ExprEvalPushStep</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
        <span class='Control'>case</span> <a href="../../include/nodes/nodes.h.html#LN180"><span class='Ref_to_EnumConst'>T_BooleanTest</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN1925"></a>                <a href="../../include/nodes/primnodes.h.html#LN1198"><span class='Ref_to_Struct'>BooleanTest</span></a> <span class='Operator'>*</span><span class='Declare_Local'>btest</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN1198"><span class='Ref_to_Struct'>BooleanTest</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * Evaluate argument, directly into result datum.  That's ok, 
                 * because resv/resnull is definitely not used anywhere else, 
                 * and will get overwritten by the below EEOP_BOOLTEST_IS_* 
                 * step. 
                 */ 
</span>                <a href="execExpr.c.html#LN57"><span class='Ref_to_Proto'>ExecInitExprRec</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN1925"><span class='Ref_To_Local'>btest</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1201"><span class='Ref_to_Member'>arg</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>parent</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN589"><span class='Ref_to_Parameter'>resv</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN589"><span class='Ref_to_Parameter'>resnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN1925"><span class='Ref_To_Local'>btest</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1202"><span class='Ref_to_Member'>booltesttype</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Control'>case</span> <a href="../../include/nodes/primnodes.h.html#LN1195"><span class='Ref_to_EnumConst'>IS_TRUE</span></a><span class='Operator'>: 
</span>                        <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN125"><span class='Ref_to_EnumConst'>EEOP_BOOLTEST_IS_TRUE</span></a><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>case</span> <a href="../../include/nodes/primnodes.h.html#LN1195"><span class='Ref_to_EnumConst'>IS_NOT_TRUE</span></a><span class='Operator'>: 
</span>                        <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN126"><span class='Ref_to_EnumConst'>EEOP_BOOLTEST_IS_NOT_TRUE</span></a><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>case</span> <a href="../../include/nodes/primnodes.h.html#LN1195"><span class='Ref_to_EnumConst'>IS_FALSE</span></a><span class='Operator'>: 
</span>                        <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN127"><span class='Ref_to_EnumConst'>EEOP_BOOLTEST_IS_FALSE</span></a><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>case</span> <a href="../../include/nodes/primnodes.h.html#LN1195"><span class='Ref_to_EnumConst'>IS_NOT_FALSE</span></a><span class='Operator'>: 
</span>                        <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN128"><span class='Ref_to_EnumConst'>EEOP_BOOLTEST_IS_NOT_FALSE</span></a><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>case</span> <a href="../../include/nodes/primnodes.h.html#LN1195"><span class='Ref_to_EnumConst'>IS_UNKNOWN</span></a><span class='Operator'>: 
</span>                        <span class='Comment_Multi_Line'>/* Same as scalar IS NULL test */ 
</span>                        <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN117"><span class='Ref_to_EnumConst'>EEOP_NULLTEST_ISNULL</span></a><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>case</span> <a href="../../include/nodes/primnodes.h.html#LN1195"><span class='Ref_to_EnumConst'>IS_NOT_UNKNOWN</span></a><span class='Operator'>: 
</span>                        <span class='Comment_Multi_Line'>/* Same as scalar IS NOT NULL test */ 
</span>                        <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN118"><span class='Ref_to_EnumConst'>EEOP_NULLTEST_ISNOTNULL</span></a><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>default</span><span class='Operator'>: 
</span>                        <a href="../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"unrecognized booltesttype: %d"</span><span class='Delimiter'>, 
</span>                             <span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN1925"><span class='Ref_To_Local'>btest</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1202"><span class='Ref_to_Member'>booltesttype</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch btest-&GT;booltesttype &raquo; </span> 
 
                <a href="execExpr.c.html#LN59"><span class='Ref_to_Proto'>ExprEvalPushStep</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
        <span class='Control'>case</span> <a href="../../include/nodes/nodes.h.html#LN181"><span class='Ref_to_EnumConst'>T_CoerceToDomain</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN1968"></a>                <a href="../../include/nodes/primnodes.h.html#LN1215"><span class='Ref_to_Struct'>CoerceToDomain</span></a> <span class='Operator'>*</span><span class='Declare_Local'>ctest</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN1215"><span class='Ref_to_Struct'>CoerceToDomain</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span> 
                <a href="execExpr.c.html#LN71"><span class='Ref_to_Proto'>ExecInitCoerceToDomain</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN1968"><span class='Ref_To_Local'>ctest</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>parent</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, 
</span>                                       <a href="execExpr.c.html#LN589"><span class='Ref_to_Parameter'>resv</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN589"><span class='Ref_to_Parameter'>resnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
        <span class='Control'>case</span> <a href="../../include/nodes/nodes.h.html#LN182"><span class='Ref_to_EnumConst'>T_CoerceToDomainValue</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* 
                 * Read from location identified by innermost_domainval.  Note 
                 * that innermost_domainval could be NULL, if we're compiling 
                 * a standalone domain check rather than one embedded in a 
                 * larger expression.  In that case we must read from 
                 * econtext-&GT;domainValue_datum.  We'll take care of that 
                 * scenario at runtime. 
                 */ 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN196"><span class='Ref_to_EnumConst'>EEOP_DOMAIN_TESTVAL</span></a><span class='Delimiter'>; 
</span>                <span class='Comment_Multi_Line'>/* we share instruction union variant with case testval */ 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>casetest<span class='Operator'>.</span><span class='Keyword'>value </span><span class='Operator'>= </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN94"><span class='Ref_to_Member'>innermost_domainval</span></a><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>casetest<span class='Operator'>.</span>isnull <span class='Operator'>= </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN95"><span class='Ref_to_Member'>innermost_domainnull</span></a><span class='Delimiter'>; 
</span> 
                <a href="execExpr.c.html#LN59"><span class='Ref_to_Proto'>ExprEvalPushStep</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
        <span class='Control'>case</span> <a href="../../include/nodes/nodes.h.html#LN184"><span class='Ref_to_EnumConst'>T_CurrentOfExpr</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN145"><span class='Ref_to_EnumConst'>EEOP_CURRENTOFEXPR</span></a><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN59"><span class='Ref_to_Proto'>ExprEvalPushStep</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
        <span class='Control'>case</span> <a href="../../include/nodes/nodes.h.html#LN192"><span class='Ref_to_EnumConst'>T_NextValueExpr</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN2003"></a>                <a href="../../include/nodes/primnodes.h.html#LN1302"><span class='Ref_to_Struct'>NextValueExpr</span></a> <span class='Operator'>*</span><span class='Declare_Local'>nve</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN1302"><span class='Ref_to_Struct'>NextValueExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span> 
                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN146"><span class='Ref_to_EnumConst'>EEOP_NEXTVALUEEXPR</span></a><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>nextvalueexpr<span class='Operator'>.</span>seqid <span class='Operator'>= </span><a href="execExpr.c.html#LN2003"><span class='Ref_To_Local'>nve</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1305"><span class='Ref_to_Member'>seqid</span></a><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>nextvalueexpr<span class='Operator'>.</span>seqtypid <span class='Operator'>= </span><a href="execExpr.c.html#LN2003"><span class='Ref_To_Local'>nve</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1306"><span class='Ref_to_Member'>typeId</span></a><span class='Delimiter'>; 
</span> 
                <a href="execExpr.c.html#LN59"><span class='Ref_to_Proto'>ExprEvalPushStep</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="execExpr.c.html#LN591"><span class='Ref_To_Local'>scratch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
        <span class='Control'>default</span><span class='Operator'>: 
</span>            <a href="../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"unrecognized node type: %d"</span><span class='Delimiter'>, 
</span>                 <span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>) </span><a href="../../include/nodes/nodes.h.html#LN513"><span class='Ref_to_Macro'>nodeTag</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN588"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch nodeTag(node) &raquo; </span> 
<span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end ExecInitExprRec &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Add another expression evaluation step to ExprState-&GT;steps. 
 * 
 * Note that this potentially re-allocates es-&GT;steps, therefore no pointer 
 * into that array may be used while the expression is still being built. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN2027"></a><span class='Declare_Function'>ExprEvalPushStep</span><span class='Parentheses'>(</span><a href="../../include/nodes/execnodes.h.html#LN52"><span class='Ref_to_Struct'>ExprState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>es</span><span class='Delimiter'>, </span><span class='Keyword'>const </span><a href="../../include/executor/execExpr.h.html#LN219"><span class='Ref_to_Struct'>ExprEvalStep</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>s</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN2027"><span class='Ref_to_Parameter'>es</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN89"><span class='Ref_to_Member'>steps_alloc</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="execExpr.c.html#LN2027"><span class='Ref_to_Parameter'>es</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN89"><span class='Ref_to_Member'>steps_alloc</span></a> <span class='Operator'>= </span><span class='Number'>16</span><span class='Delimiter'>; 
</span>        <a href="execExpr.c.html#LN2027"><span class='Ref_to_Parameter'>es</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN73"><span class='Ref_to_Member'>steps</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/executor/execExpr.h.html#LN219"><span class='Ref_to_Struct'>ExprEvalStep</span></a><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="execExpr.c.html#LN2027"><span class='Ref_to_Parameter'>es</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN89"><span class='Ref_to_Member'>steps_alloc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN2027"><span class='Ref_to_Parameter'>es</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN89"><span class='Ref_to_Member'>steps_alloc</span></a> <span class='Operator'>== </span><a href="execExpr.c.html#LN2027"><span class='Ref_to_Parameter'>es</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN88"><span class='Ref_to_Member'>steps_len</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="execExpr.c.html#LN2027"><span class='Ref_to_Parameter'>es</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN89"><span class='Ref_to_Member'>steps_alloc</span></a> <span class='Operator'>*= </span><span class='Number'>2</span><span class='Delimiter'>; 
</span>        <a href="execExpr.c.html#LN2027"><span class='Ref_to_Parameter'>es</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN73"><span class='Ref_to_Member'>steps</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN36"><span class='Ref_to_Proto'>repalloc</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2027"><span class='Ref_to_Parameter'>es</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN73"><span class='Ref_to_Member'>steps</span></a><span class='Delimiter'>, 
</span>                             <span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/executor/execExpr.h.html#LN219"><span class='Ref_to_Struct'>ExprEvalStep</span></a><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="execExpr.c.html#LN2027"><span class='Ref_to_Parameter'>es</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN89"><span class='Ref_to_Member'>steps_alloc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    memcpy<span class='Parentheses'>(</span><span class='Operator'>&</span><a href="execExpr.c.html#LN2027"><span class='Ref_to_Parameter'>es</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN73"><span class='Ref_to_Member'>steps</span></a><span class='Delimiter'>[</span><a href="execExpr.c.html#LN2027"><span class='Ref_to_Parameter'>es</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN88"><span class='Ref_to_Member'>steps_len</span></a><span class='Operator'>++</span><span class='Delimiter'>], </span><a href="execExpr.c.html#LN2027"><span class='Ref_to_Parameter'>s</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/executor/execExpr.h.html#LN219"><span class='Ref_to_Struct'>ExprEvalStep</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Perform setup necessary for the evaluation of a function-like expression, 
 * appending argument evaluation steps to the steps list in *state, and 
 * setting up *scratch so it is ready to be pushed. 
 * 
 * *scratch is not pushed here, so that callers may override the opcode, 
 * which is useful for function-like cases like DISTINCT. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN2053"></a><span class='Declare_Function'>ExecInitFunc</span><span class='Parentheses'>(</span><a href="../../include/executor/execExpr.h.html#LN219"><span class='Ref_to_Struct'>ExprEvalStep</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>scratch</span><span class='Delimiter'>, </span><a href="../../include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>args</span><span class='Delimiter'>, </span><a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>funcid</span><span class='Delimiter'>, 
</span><a name="LN2054"></a>             <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>inputcollid</span><span class='Delimiter'>, </span><a href="../../include/nodes/execnodes.h.html#LN808"><span class='Ref_to_Struct'>PlanState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>parent</span><span class='Delimiter'>, </span><a href="../../include/nodes/execnodes.h.html#LN52"><span class='Ref_to_Struct'>ExprState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>state</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2056"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>nargs</span> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2053"><span class='Ref_to_Parameter'>args</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2057"></a>    <a href="../../include/utils/acl.h.html#LN169"><span class='Ref_to_Typedef'>AclResult</span></a>   <span class='Declare_Local'>aclresult</span><span class='Delimiter'>; 
</span><a name="LN2058"></a>    <a href="../../include/fmgr.h.html#LN55"><span class='Ref_to_Struct'>FmgrInfo</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>flinfo</span><span class='Delimiter'>; 
</span><a name="LN2059"></a>    <a href="../../include/fmgr.h.html#LN37"><span class='Ref_to_Typedef'>FunctionCallInfo</span></a> <span class='Declare_Local'>fcinfo</span><span class='Delimiter'>; 
</span><a name="LN2060"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>argno</span><span class='Delimiter'>; 
</span><a name="LN2061"></a>    <a href="../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Check permission to call function */ 
</span>    <a href="execExpr.c.html#LN2057"><span class='Ref_To_Local'>aclresult</span></a> <span class='Operator'>= </span><a href="../../include/utils/acl.h.html#LN285"><span class='Ref_to_Proto'>pg_proc_aclcheck</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2053"><span class='Ref_to_Parameter'>funcid</span></a><span class='Delimiter'>, </span><a href="../utils/init/miscinit.c.html#LN281"><span class='Ref_to_Func'>GetUserId</span></a><span class='Parentheses'>()</span><span class='Delimiter'>, </span><a href="../../include/nodes/parsenodes.h.html#LN78"><span class='Ref_to_Const'>ACL_EXECUTE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN2057"><span class='Ref_To_Local'>aclresult</span></a> <span class='Operator'>!= </span><a href="../../include/utils/acl.h.html#LN171"><span class='Ref_to_EnumConst'>ACLCHECK_OK</span></a><span class='Parentheses'>) 
</span>        <a href="../../include/utils/acl.h.html#LN295"><span class='Ref_to_Proto'>aclcheck_error</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2057"><span class='Ref_To_Local'>aclresult</span></a><span class='Delimiter'>, </span><a href="../../include/utils/acl.h.html#LN184"><span class='Ref_to_EnumConst'>ACL_KIND_PROC</span></a><span class='Delimiter'>, </span><a href="../../include/utils/lsyscache.h.html#LN110"><span class='Ref_to_Proto'>get_func_name</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2053"><span class='Ref_to_Parameter'>funcid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../include/catalog/objectaccess.h.html#LN178"><span class='Ref_to_Macro'>InvokeFunctionExecuteHook</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2053"><span class='Ref_to_Parameter'>funcid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Safety check on nargs.  Under normal circumstances this should never 
     * fail, as parser should check sooner.  But possibly it might fail if 
     * server has been compiled with FUNC_MAX_ARGS smaller than some functions 
     * declared in pg_proc? 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN2056"><span class='Ref_To_Local'>nargs</span></a> <span class='Operator'>&GT; </span><a href="../../include/pg_config_manual.h.html#LN36"><span class='Ref_to_Const'>FUNC_MAX_ARGS</span></a><span class='Parentheses'>) 
</span>        <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_TOO_MANY_ARGUMENTS<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>             <a href="../utils/error/elog.c.html#LN848"><span class='Ref_to_Func'>errmsg_plural</span></a><span class='Parentheses'>(</span><span class='String'>"cannot pass more than %d argument to a function"</span><span class='Delimiter'>, 
</span>                           <span class='String'>"cannot pass more than %d arguments to a function"</span><span class='Delimiter'>, 
</span>                           <a href="../../include/pg_config_manual.h.html#LN36"><span class='Ref_to_Const'>FUNC_MAX_ARGS</span></a><span class='Delimiter'>, 
</span>                           <a href="../../include/pg_config_manual.h.html#LN36"><span class='Ref_to_Const'>FUNC_MAX_ARGS</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Allocate function lookup data and parameter workspace for this call */ 
</span>    <a href="execExpr.c.html#LN2053"><span class='Ref_to_Parameter'>scratch</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>func<span class='Operator'>.</span>finfo <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/fmgr.h.html#LN55"><span class='Ref_to_Struct'>FmgrInfo</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="execExpr.c.html#LN2053"><span class='Ref_to_Parameter'>scratch</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>func<span class='Operator'>.</span>fcinfo_data <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/fmgr.h.html#LN76"><span class='Ref_to_Struct'>FunctionCallInfoData</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="execExpr.c.html#LN2058"><span class='Ref_To_Local'>flinfo</span></a> <span class='Operator'>= </span><a href="execExpr.c.html#LN2053"><span class='Ref_to_Parameter'>scratch</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>func<span class='Operator'>.</span>finfo<span class='Delimiter'>; 
</span>    <a href="execExpr.c.html#LN2059"><span class='Ref_To_Local'>fcinfo</span></a> <span class='Operator'>= </span><a href="execExpr.c.html#LN2053"><span class='Ref_to_Parameter'>scratch</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>func<span class='Operator'>.</span>fcinfo_data<span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Set up the primary fmgr lookup information */ 
</span>    <a href="../../include/fmgr.h.html#LN92"><span class='Ref_to_Proto'>fmgr_info</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2053"><span class='Ref_to_Parameter'>funcid</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN2058"><span class='Ref_To_Local'>flinfo</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../include/fmgr.h.html#LN103"><span class='Ref_to_Macro'>fmgr_info_set_expr</span></a><span class='Parentheses'>((</span><a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN2053"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN2058"><span class='Ref_To_Local'>flinfo</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Initialize function call parameter structure too */ 
</span>    <a href="../../include/fmgr.h.html#LN119"><span class='Ref_to_Macro'>InitFunctionCallInfoData</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="execExpr.c.html#LN2059"><span class='Ref_To_Local'>fcinfo</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN2058"><span class='Ref_To_Local'>flinfo</span></a><span class='Delimiter'>, 
</span>                             <a href="execExpr.c.html#LN2056"><span class='Ref_To_Local'>nargs</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN2054"><span class='Ref_to_Parameter'>inputcollid</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Keep extra copies of this info to save an indirection at runtime */ 
</span>    <a href="execExpr.c.html#LN2053"><span class='Ref_to_Parameter'>scratch</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>func<span class='Operator'>.</span>fn_addr <span class='Operator'>= </span><a href="execExpr.c.html#LN2058"><span class='Ref_To_Local'>flinfo</span></a><span class='Operator'>-&GT;</span><a href="../../include/fmgr.h.html#LN57"><span class='Ref_to_Member'>fn_addr</span></a><span class='Delimiter'>; 
</span>    <a href="execExpr.c.html#LN2053"><span class='Ref_to_Parameter'>scratch</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>func<span class='Operator'>.</span>nargs <span class='Operator'>= </span><a href="execExpr.c.html#LN2056"><span class='Ref_To_Local'>nargs</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* We only support non-set functions here */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN2058"><span class='Ref_To_Local'>flinfo</span></a><span class='Operator'>-&GT;</span><a href="../../include/fmgr.h.html#LN61"><span class='Ref_to_Member'>fn_retset</span></a><span class='Parentheses'>) 
</span>        <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_FEATURE_NOT_SUPPORTED<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"set-valued function called in context that cannot accept a set"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="execExpr.c.html#LN2054"><span class='Ref_to_Parameter'>parent</span></a> <span class='Operator'>? </span><a href="../../include/executor/executor.h.html#LN485"><span class='Ref_to_Proto'>executor_errposition</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2054"><span class='Ref_to_Parameter'>parent</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN814"><span class='Ref_to_Member'>state</span></a><span class='Delimiter'>, 
</span>                                          <a href="../../include/nodes/nodeFuncs.h.html#LN43"><span class='Ref_to_Proto'>exprLocation</span></a><span class='Parentheses'>((</span><a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN2053"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>))</span> <span class='Operator'>: </span><span class='Number'>0</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Build code to evaluate arguments directly into the fcinfo struct */ 
</span>    <a href="execExpr.c.html#LN2060"><span class='Ref_To_Local'>argno</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2061"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN2053"><span class='Ref_to_Parameter'>args</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN2113"></a>        <a href="../../include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>arg</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2061"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2113"><span class='Ref_To_Local'>arg</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/primnodes.h.html#LN188"><span class='Ref_to_Struct'>Const</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * Don't evaluate const arguments every round; especially 
             * interesting for constants in comparisons. 
             */ 
</span><a name="LN2121"></a>            <a href="../../include/nodes/primnodes.h.html#LN188"><span class='Ref_to_Struct'>Const</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>con</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN188"><span class='Ref_to_Struct'>Const</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN2113"><span class='Ref_To_Local'>arg</span></a><span class='Delimiter'>; 
</span> 
            <a href="execExpr.c.html#LN2059"><span class='Ref_To_Local'>fcinfo</span></a><span class='Operator'>-&GT;</span><a href="../../include/fmgr.h.html#LN84"><span class='Ref_to_Member'>arg</span></a><span class='Delimiter'>[</span><a href="execExpr.c.html#LN2060"><span class='Ref_To_Local'>argno</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="execExpr.c.html#LN2121"><span class='Ref_To_Local'>con</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN195"><span class='Ref_to_Member'>constvalue</span></a><span class='Delimiter'>; 
</span>            <a href="execExpr.c.html#LN2059"><span class='Ref_To_Local'>fcinfo</span></a><span class='Operator'>-&GT;</span><a href="../../include/fmgr.h.html#LN85"><span class='Ref_to_Member'>argnull</span></a><span class='Delimiter'>[</span><a href="execExpr.c.html#LN2060"><span class='Ref_To_Local'>argno</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="execExpr.c.html#LN2121"><span class='Ref_To_Local'>con</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN196"><span class='Ref_to_Member'>constisnull</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <a href="execExpr.c.html#LN57"><span class='Ref_to_Proto'>ExecInitExprRec</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2113"><span class='Ref_To_Local'>arg</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN2054"><span class='Ref_to_Parameter'>parent</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN2054"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, 
</span>                            <span class='Operator'>&</span><a href="execExpr.c.html#LN2059"><span class='Ref_To_Local'>fcinfo</span></a><span class='Operator'>-&GT;</span><a href="../../include/fmgr.h.html#LN84"><span class='Ref_to_Member'>arg</span></a><span class='Delimiter'>[</span><a href="execExpr.c.html#LN2060"><span class='Ref_To_Local'>argno</span></a><span class='Delimiter'>], </span><span class='Operator'>&</span><a href="execExpr.c.html#LN2059"><span class='Ref_To_Local'>fcinfo</span></a><span class='Operator'>-&GT;</span><a href="../../include/fmgr.h.html#LN85"><span class='Ref_to_Member'>argnull</span></a><span class='Delimiter'>[</span><a href="execExpr.c.html#LN2060"><span class='Ref_To_Local'>argno</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <a href="execExpr.c.html#LN2060"><span class='Ref_To_Local'>argno</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* Insert appropriate opcode depending on strictness and stats level */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../postmaster/pgstat.c.html#LN126"><span class='Ref_to_Global_Var'>pgstat_track_functions</span></a> <span class='Operator'>&LT;= </span><a href="execExpr.c.html#LN2058"><span class='Ref_To_Local'>flinfo</span></a><span class='Operator'>-&GT;</span><a href="../../include/fmgr.h.html#LN62"><span class='Ref_to_Member'>fn_stats</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN2058"><span class='Ref_To_Local'>flinfo</span></a><span class='Operator'>-&GT;</span><a href="../../include/fmgr.h.html#LN60"><span class='Ref_to_Member'>fn_strict</span></a> <span class='Operator'>&& </span><a href="execExpr.c.html#LN2056"><span class='Ref_To_Local'>nargs</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <a href="execExpr.c.html#LN2053"><span class='Ref_to_Parameter'>scratch</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN83"><span class='Ref_to_EnumConst'>EEOP_FUNCEXPR_STRICT</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="execExpr.c.html#LN2053"><span class='Ref_to_Parameter'>scratch</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN82"><span class='Ref_to_EnumConst'>EEOP_FUNCEXPR</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN2058"><span class='Ref_To_Local'>flinfo</span></a><span class='Operator'>-&GT;</span><a href="../../include/fmgr.h.html#LN60"><span class='Ref_to_Member'>fn_strict</span></a> <span class='Operator'>&& </span><a href="execExpr.c.html#LN2056"><span class='Ref_To_Local'>nargs</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <a href="execExpr.c.html#LN2053"><span class='Ref_to_Parameter'>scratch</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN85"><span class='Ref_to_EnumConst'>EEOP_FUNCEXPR_STRICT_FUSAGE</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="execExpr.c.html#LN2053"><span class='Ref_to_Parameter'>scratch</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN84"><span class='Ref_to_EnumConst'>EEOP_FUNCEXPR_FUSAGE</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
}</span><span class='Auto_Annotations'> &laquo; end ExecInitFunc &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Add expression steps deforming the ExprState's inner/outer/scan slots 
 * as much as required by the expression. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN2156"></a><span class='Declare_Function'>ExecInitExprSlots</span><span class='Parentheses'>(</span><a href="../../include/nodes/execnodes.h.html#LN52"><span class='Ref_to_Struct'>ExprState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>state</span><span class='Delimiter'>, </span><a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2158"></a>    <a href="execExpr.c.html#LN49"><span class='Ref_to_Struct'>LastAttnumInfo</span></a> <span class='Declare_Local'>info</span> <span class='Operator'>= </span><span class='Delimiter'>{</span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>}; 
</span><a name="LN2159"></a>    <a href="../../include/executor/execExpr.h.html#LN219"><span class='Ref_to_Struct'>ExprEvalStep</span></a> <span class='Declare_Local'>scratch</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Figure out which attributes we're going to need. 
     */ 
</span>    <a href="execExpr.c.html#LN64"><span class='Ref_to_Proto'>get_last_attnums_walker</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2156"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="execExpr.c.html#LN2158"><span class='Ref_To_Local'>info</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Emit steps as needed */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN2158"><span class='Ref_To_Local'>info</span></a><span class='Operator'>.</span><a href="execExpr.c.html#LN51"><span class='Ref_to_Member'>last_inner</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="execExpr.c.html#LN2159"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN42"><span class='Ref_to_EnumConst'>EEOP_INNER_FETCHSOME</span></a><span class='Delimiter'>; 
</span>        <a href="execExpr.c.html#LN2159"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>fetch<span class='Operator'>.</span>last_var <span class='Operator'>= </span><a href="execExpr.c.html#LN2158"><span class='Ref_To_Local'>info</span></a><span class='Operator'>.</span><a href="execExpr.c.html#LN51"><span class='Ref_to_Member'>last_inner</span></a><span class='Delimiter'>; 
</span>        <a href="execExpr.c.html#LN59"><span class='Ref_to_Proto'>ExprEvalPushStep</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2156"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="execExpr.c.html#LN2159"><span class='Ref_To_Local'>scratch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN2158"><span class='Ref_To_Local'>info</span></a><span class='Operator'>.</span><a href="execExpr.c.html#LN52"><span class='Ref_to_Member'>last_outer</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="execExpr.c.html#LN2159"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN43"><span class='Ref_to_EnumConst'>EEOP_OUTER_FETCHSOME</span></a><span class='Delimiter'>; 
</span>        <a href="execExpr.c.html#LN2159"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>fetch<span class='Operator'>.</span>last_var <span class='Operator'>= </span><a href="execExpr.c.html#LN2158"><span class='Ref_To_Local'>info</span></a><span class='Operator'>.</span><a href="execExpr.c.html#LN52"><span class='Ref_to_Member'>last_outer</span></a><span class='Delimiter'>; 
</span>        <a href="execExpr.c.html#LN59"><span class='Ref_to_Proto'>ExprEvalPushStep</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2156"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="execExpr.c.html#LN2159"><span class='Ref_To_Local'>scratch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN2158"><span class='Ref_To_Local'>info</span></a><span class='Operator'>.</span><a href="execExpr.c.html#LN53"><span class='Ref_to_Member'>last_scan</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="execExpr.c.html#LN2159"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN44"><span class='Ref_to_EnumConst'>EEOP_SCAN_FETCHSOME</span></a><span class='Delimiter'>; 
</span>        <a href="execExpr.c.html#LN2159"><span class='Ref_To_Local'>scratch</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>fetch<span class='Operator'>.</span>last_var <span class='Operator'>= </span><a href="execExpr.c.html#LN2158"><span class='Ref_To_Local'>info</span></a><span class='Operator'>.</span><a href="execExpr.c.html#LN53"><span class='Ref_to_Member'>last_scan</span></a><span class='Delimiter'>; 
</span>        <a href="execExpr.c.html#LN59"><span class='Ref_to_Proto'>ExprEvalPushStep</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2156"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="execExpr.c.html#LN2159"><span class='Ref_To_Local'>scratch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
}</span><span class='Auto_Annotations'> &laquo; end ExecInitExprSlots &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * get_last_attnums_walker: expression walker for ExecInitExprSlots 
 */ 
</span><span class='Keyword'>static bool 
</span><a name="LN2191"></a><span class='Declare_Function'>get_last_attnums_walker</span><span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><a href="execExpr.c.html#LN49"><span class='Ref_to_Struct'>LastAttnumInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>info</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN2191"><span class='Ref_to_Parameter'>node</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2191"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN2197"></a>        <a href="../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>variable</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN2191"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span><a name="LN2198"></a>        <a href="../../include/access/attnum.h.html#LN20"><span class='Ref_to_Typedef'>AttrNumber</span></a>  <span class='Declare_Local'>attnum</span> <span class='Operator'>= </span><a href="execExpr.c.html#LN2197"><span class='Ref_To_Local'>variable</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN167"><span class='Ref_to_Member'>varattno</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN2197"><span class='Ref_To_Local'>variable</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN165"><span class='Ref_to_Member'>varno</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>case</span> <a href="../../include/nodes/primnodes.h.html#LN152"><span class='Ref_to_Const'>INNER_VAR</span></a><span class='Operator'>: 
</span>                <a href="execExpr.c.html#LN2191"><span class='Ref_to_Parameter'>info</span></a><span class='Operator'>-&GT;</span><a href="execExpr.c.html#LN51"><span class='Ref_to_Member'>last_inner</span></a> <span class='Operator'>= </span><a href="../../interfaces/ecpg/pgtypeslib/numeric.c.html#LN10"><span class='Ref_to_Macro'>Max</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2191"><span class='Ref_to_Parameter'>info</span></a><span class='Operator'>-&GT;</span><a href="execExpr.c.html#LN51"><span class='Ref_to_Member'>last_inner</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN2198"><span class='Ref_To_Local'>attnum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>case</span> <a href="../../include/nodes/primnodes.h.html#LN153"><span class='Ref_to_Const'>OUTER_VAR</span></a><span class='Operator'>: 
</span>                <a href="execExpr.c.html#LN2191"><span class='Ref_to_Parameter'>info</span></a><span class='Operator'>-&GT;</span><a href="execExpr.c.html#LN52"><span class='Ref_to_Member'>last_outer</span></a> <span class='Operator'>= </span><a href="../../interfaces/ecpg/pgtypeslib/numeric.c.html#LN10"><span class='Ref_to_Macro'>Max</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2191"><span class='Ref_to_Parameter'>info</span></a><span class='Operator'>-&GT;</span><a href="execExpr.c.html#LN52"><span class='Ref_to_Member'>last_outer</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN2198"><span class='Ref_To_Local'>attnum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* INDEX_VAR is handled by default case */ 
</span> 
            <span class='Control'>default</span><span class='Operator'>: 
</span>                <a href="execExpr.c.html#LN2191"><span class='Ref_to_Parameter'>info</span></a><span class='Operator'>-&GT;</span><a href="execExpr.c.html#LN53"><span class='Ref_to_Member'>last_scan</span></a> <span class='Operator'>= </span><a href="../../interfaces/ecpg/pgtypeslib/numeric.c.html#LN10"><span class='Ref_to_Macro'>Max</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2191"><span class='Ref_to_Parameter'>info</span></a><span class='Operator'>-&GT;</span><a href="execExpr.c.html#LN53"><span class='Ref_to_Member'>last_scan</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN2198"><span class='Ref_To_Local'>attnum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if IsA(node,Var) &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* 
     * Don't examine the arguments or filters of Aggrefs or WindowFuncs, 
     * because those do not represent expressions to be evaluated within the 
     * calling expression's econtext.  GroupingFunc arguments are never 
     * evaluated at all. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2191"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/primnodes.h.html#LN290"><span class='Ref_to_Struct'>Aggref</span></a><span class='Parentheses'>))</span> 
        <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2191"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/primnodes.h.html#LN351"><span class='Ref_to_Struct'>WindowFunc</span></a><span class='Parentheses'>))</span> 
        <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2191"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/primnodes.h.html#LN337"><span class='Ref_to_Struct'>GroupingFunc</span></a><span class='Parentheses'>))</span> 
        <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="../../include/nodes/nodeFuncs.h.html#LN52"><span class='Ref_to_Proto'>expression_tree_walker</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2191"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN64"><span class='Ref_to_Proto'>get_last_attnums_walker</span></a><span class='Delimiter'>, 
</span>                                  <span class='Parentheses'>(</span><span class='Keyword'>void </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN2191"><span class='Ref_to_Parameter'>info</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end get_last_attnums_walker &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Prepare step for the evaluation of a whole-row variable. 
 * The caller still has to push the step. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN2240"></a><span class='Declare_Function'>ExecInitWholeRowVar</span><span class='Parentheses'>(</span><a href="../../include/executor/execExpr.h.html#LN219"><span class='Ref_to_Struct'>ExprEvalStep</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>scratch</span><span class='Delimiter'>, </span><a href="../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>variable</span><span class='Delimiter'>, </span><a href="../../include/nodes/execnodes.h.html#LN808"><span class='Ref_to_Struct'>PlanState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>parent</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Comment_Multi_Line'>/* fill in all but the target */ 
</span>    <a href="execExpr.c.html#LN2240"><span class='Ref_to_Parameter'>scratch</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN61"><span class='Ref_to_EnumConst'>EEOP_WHOLEROW</span></a><span class='Delimiter'>; 
</span>    <a href="execExpr.c.html#LN2240"><span class='Ref_to_Parameter'>scratch</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>wholerow<span class='Operator'>.</span>var <span class='Operator'>= </span><a href="execExpr.c.html#LN2240"><span class='Ref_to_Parameter'>variable</span></a><span class='Delimiter'>; 
</span>    <a href="execExpr.c.html#LN2240"><span class='Ref_to_Parameter'>scratch</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>wholerow<span class='Operator'>.</span>first <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <a href="execExpr.c.html#LN2240"><span class='Ref_to_Parameter'>scratch</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>wholerow<span class='Operator'>.</span>slow <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="execExpr.c.html#LN2240"><span class='Ref_to_Parameter'>scratch</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>wholerow<span class='Operator'>.</span>tupdesc <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; </span><span class='Comment_Single_Line'>/* filled at runtime */ 
</span>    <a href="execExpr.c.html#LN2240"><span class='Ref_to_Parameter'>scratch</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>wholerow<span class='Operator'>.</span>junkFilter <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If the input tuple came from a subquery, it might contain "resjunk" 
     * columns (such as GROUP BY or ORDER BY columns), which we don't want to 
     * keep in the whole-row result.  We can get rid of such columns by 
     * passing the tuple through a JunkFilter --- but to make one, we have to 
     * lay our hands on the subquery's targetlist.  Fortunately, there are not 
     * very many cases where this can happen, and we can identify all of them 
     * by examining our parent PlanState.  We assume this is not an issue in 
     * standalone expressions that don't have parent plans.  (Whole-row Vars 
     * can occur in such expressions, but they will always be referencing 
     * table rows.) 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN2240"><span class='Ref_to_Parameter'>parent</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN2264"></a>        <a href="../../include/nodes/execnodes.h.html#LN808"><span class='Ref_to_Struct'>PlanState</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>subplan</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN513"><span class='Ref_to_Macro'>nodeTag</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2240"><span class='Ref_to_Parameter'>parent</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Control'>case</span> <a href="../../include/nodes/nodes.h.html#LN112"><span class='Ref_to_EnumConst'>T_SubqueryScanState</span></a><span class='Operator'>: 
</span>                <a href="execExpr.c.html#LN2264"><span class='Ref_To_Local'>subplan</span></a> <span class='Operator'>= </span><span class='Parentheses'>((</span><a href="../../include/nodes/execnodes.h.html#LN1350"><span class='Ref_to_Struct'>SubqueryScanState</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN2240"><span class='Ref_to_Parameter'>parent</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>subplan<span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="../../include/nodes/nodes.h.html#LN116"><span class='Ref_to_EnumConst'>T_CteScanState</span></a><span class='Operator'>: 
</span>                <a href="execExpr.c.html#LN2264"><span class='Ref_To_Local'>subplan</span></a> <span class='Operator'>= </span><span class='Parentheses'>((</span><a href="../../include/nodes/execnodes.h.html#LN1448"><span class='Ref_to_Struct'>CteScanState</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN2240"><span class='Ref_to_Parameter'>parent</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>cteplanstate<span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>default</span><span class='Operator'>: 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN2264"><span class='Ref_To_Local'>subplan</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN2280"></a>            <span class='Keyword'>bool</span>        <span class='Declare_Local'>junk_filter_needed</span> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span><a name="LN2281"></a>            <a href="../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>tlist</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* Detect whether subplan tlist actually has any junk columns */ 
</span>            <a href="../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2281"><span class='Ref_To_Local'>tlist</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN2264"><span class='Ref_To_Local'>subplan</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN812"><span class='Ref_to_Member'>plan</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/plannodes.h.html#LN143"><span class='Ref_to_Member'>targetlist</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span><a name="LN2286"></a>                <a href="../../include/nodes/primnodes.h.html#LN1363"><span class='Ref_to_Struct'>TargetEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>tle</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN1363"><span class='Ref_to_Struct'>TargetEntry</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2281"><span class='Ref_To_Local'>tlist</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN2286"><span class='Ref_To_Local'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1373"><span class='Ref_to_Member'>resjunk</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <a href="execExpr.c.html#LN2280"><span class='Ref_To_Local'>junk_filter_needed</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>            <span class='Delimiter'>} 
</span> 
            <span class='Comment_Multi_Line'>/* If so, build the junkfilter now */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN2280"><span class='Ref_To_Local'>junk_filter_needed</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <a href="execExpr.c.html#LN2240"><span class='Ref_to_Parameter'>scratch</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>wholerow<span class='Operator'>.</span>junkFilter <span class='Operator'>= 
</span>                    <a href="execJunk.c.html#LN59"><span class='Ref_to_Func'>ExecInitJunkFilter</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2264"><span class='Ref_To_Local'>subplan</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN812"><span class='Ref_to_Member'>plan</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/plannodes.h.html#LN143"><span class='Ref_to_Member'>targetlist</span></a><span class='Delimiter'>, 
</span>                                       <a href="execUtils.c.html#LN467"><span class='Ref_to_Func'>ExecGetResultType</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2264"><span class='Ref_To_Local'>subplan</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span><a href="../../include/access/tupdesc.h.html#LN78"><span class='Ref_to_Member'>tdhasoid</span></a><span class='Delimiter'>, 
</span>                                       <a href="../../include/executor/executor.h.html#LN402"><span class='Ref_to_Proto'>ExecInitExtraTupleSlot</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2240"><span class='Ref_to_Parameter'>parent</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN814"><span class='Ref_to_Member'>state</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if subplan &raquo; </span> 
    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if parent &raquo; </span> 
<span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end ExecInitWholeRowVar &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Prepare evaluation of an ArrayRef expression. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN2311"></a><span class='Declare_Function'>ExecInitArrayRef</span><span class='Parentheses'>(</span><a href="../../include/executor/execExpr.h.html#LN219"><span class='Ref_to_Struct'>ExprEvalStep</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>scratch</span><span class='Delimiter'>, </span><a href="../../include/nodes/primnodes.h.html#LN395"><span class='Ref_to_Struct'>ArrayRef</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>aref</span><span class='Delimiter'>, </span><a href="../../include/nodes/execnodes.h.html#LN808"><span class='Ref_to_Struct'>PlanState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>parent</span><span class='Delimiter'>, 
</span><a name="LN2312"></a>                 <a href="../../include/nodes/execnodes.h.html#LN52"><span class='Ref_to_Struct'>ExprState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>state</span><span class='Delimiter'>, </span><a href="../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>resv</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Declare_Parameter'>resnull</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2314"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>isAssignment</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2311"><span class='Ref_to_Parameter'>aref</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN408"><span class='Ref_to_Member'>refassgnexpr</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2315"></a>    <a href="../../include/executor/execExpr.h.html#LN567"><span class='Ref_to_Struct'>ArrayRefState</span></a> <span class='Operator'>*</span><span class='Declare_Local'>arefstate</span> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/executor/execExpr.h.html#LN567"><span class='Ref_to_Struct'>ArrayRefState</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span><a name="LN2316"></a>    <a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>adjust_jumps</span> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span><a name="LN2317"></a>    <a href="../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc</span><span class='Delimiter'>; 
</span><a name="LN2318"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Fill constant fields of ArrayRefState */ 
</span>    <a href="execExpr.c.html#LN2315"><span class='Ref_To_Local'>arefstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN569"><span class='Ref_to_Member'>isassignment</span></a> <span class='Operator'>= </span><a href="execExpr.c.html#LN2314"><span class='Ref_To_Local'>isAssignment</span></a><span class='Delimiter'>; 
</span>    <a href="execExpr.c.html#LN2315"><span class='Ref_To_Local'>arefstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN571"><span class='Ref_to_Member'>refelemtype</span></a> <span class='Operator'>= </span><a href="execExpr.c.html#LN2311"><span class='Ref_to_Parameter'>aref</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN399"><span class='Ref_to_Member'>refelemtype</span></a><span class='Delimiter'>; 
</span>    <a href="execExpr.c.html#LN2315"><span class='Ref_To_Local'>arefstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN572"><span class='Ref_to_Member'>refattrlength</span></a> <span class='Operator'>= </span><a href="../../include/utils/lsyscache.h.html#LN133"><span class='Ref_to_Proto'>get_typlen</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2311"><span class='Ref_to_Parameter'>aref</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN398"><span class='Ref_to_Member'>refarraytype</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../include/utils/lsyscache.h.html#LN136"><span class='Ref_to_Proto'>get_typlenbyvalalign</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2311"><span class='Ref_to_Parameter'>aref</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN399"><span class='Ref_to_Member'>refelemtype</span></a><span class='Delimiter'>, 
</span>                         <span class='Operator'>&</span><a href="execExpr.c.html#LN2315"><span class='Ref_To_Local'>arefstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN573"><span class='Ref_to_Member'>refelemlength</span></a><span class='Delimiter'>, 
</span>                         <span class='Operator'>&</span><a href="execExpr.c.html#LN2315"><span class='Ref_To_Local'>arefstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN574"><span class='Ref_to_Member'>refelembyval</span></a><span class='Delimiter'>, 
</span>                         <span class='Operator'>&</span><a href="execExpr.c.html#LN2315"><span class='Ref_To_Local'>arefstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN575"><span class='Ref_to_Member'>refelemalign</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Evaluate array input.  It's safe to do so into resv/resnull, because we 
     * won't use that as target for any of the other subexpressions, and it'll 
     * be overwritten by the final EEOP_ARRAYREF_FETCH/ASSIGN step, which is 
     * pushed last. 
     */ 
</span>    <a href="execExpr.c.html#LN57"><span class='Ref_to_Proto'>ExecInitExprRec</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2311"><span class='Ref_to_Parameter'>aref</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN406"><span class='Ref_to_Member'>refexpr</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN2311"><span class='Ref_to_Parameter'>parent</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN2312"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN2312"><span class='Ref_to_Parameter'>resv</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN2312"><span class='Ref_to_Parameter'>resnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If refexpr yields NULL, and it's a fetch, then result is NULL.  We can 
     * implement this with just JUMP_IF_NULL, since we evaluated the array 
     * into the desired target location. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="execExpr.c.html#LN2314"><span class='Ref_To_Local'>isAssignment</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="execExpr.c.html#LN2311"><span class='Ref_to_Parameter'>scratch</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN112"><span class='Ref_to_EnumConst'>EEOP_JUMP_IF_NULL</span></a><span class='Delimiter'>; 
</span>        <a href="execExpr.c.html#LN2311"><span class='Ref_to_Parameter'>scratch</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>jump<span class='Operator'>.</span>jumpdone <span class='Operator'>= -</span><span class='Number'>1</span><span class='Delimiter'>;</span>  <span class='Comment_Single_Line'>/* adjust later */ 
</span>        <a href="execExpr.c.html#LN59"><span class='Ref_to_Proto'>ExprEvalPushStep</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2312"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN2311"><span class='Ref_to_Parameter'>scratch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="execExpr.c.html#LN2316"><span class='Ref_To_Local'>adjust_jumps</span></a> <span class='Operator'>= </span><a href="../nodes/list.c.html#LN144"><span class='Ref_to_Func'>lappend_int</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2316"><span class='Ref_To_Local'>adjust_jumps</span></a><span class='Delimiter'>, 
</span>                                   <a href="execExpr.c.html#LN2312"><span class='Ref_to_Parameter'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN88"><span class='Ref_to_Member'>steps_len</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* Verify subscript list lengths are within limit */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2311"><span class='Ref_to_Parameter'>aref</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN402"><span class='Ref_to_Member'>refupperindexpr</span></a><span class='Parentheses'>) </span><span class='Operator'>&GT; </span><a href="../../include/c.h.html#LN418"><span class='Ref_to_Const'>MAXDIM</span></a><span class='Parentheses'>)</span> 
        <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_PROGRAM_LIMIT_EXCEEDED<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"number of array dimensions (%d) exceeds the maximum allowed (%d)"</span><span class='Delimiter'>, 
</span>                        <a href="../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2311"><span class='Ref_to_Parameter'>aref</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN402"><span class='Ref_to_Member'>refupperindexpr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="../../include/c.h.html#LN418"><span class='Ref_to_Const'>MAXDIM</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2311"><span class='Ref_to_Parameter'>aref</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN404"><span class='Ref_to_Member'>reflowerindexpr</span></a><span class='Parentheses'>) </span><span class='Operator'>&GT; </span><a href="../../include/c.h.html#LN418"><span class='Ref_to_Const'>MAXDIM</span></a><span class='Parentheses'>)</span> 
        <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_PROGRAM_LIMIT_EXCEEDED<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"number of array dimensions (%d) exceeds the maximum allowed (%d)"</span><span class='Delimiter'>, 
</span>                        <a href="../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2311"><span class='Ref_to_Parameter'>aref</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN404"><span class='Ref_to_Member'>reflowerindexpr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="../../include/c.h.html#LN418"><span class='Ref_to_Const'>MAXDIM</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Evaluate upper subscripts */ 
</span>    <a href="execExpr.c.html#LN2318"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2317"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN2311"><span class='Ref_to_Parameter'>aref</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN402"><span class='Ref_to_Member'>refupperindexpr</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN2368"></a>        <a href="../../include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>e</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2317"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* When slicing, individual subscript bounds can be omitted */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="execExpr.c.html#LN2368"><span class='Ref_To_Local'>e</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="execExpr.c.html#LN2315"><span class='Ref_To_Local'>arefstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN580"><span class='Ref_to_Member'>upperprovided</span></a><span class='Delimiter'>[</span><a href="execExpr.c.html#LN2318"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>            <a href="execExpr.c.html#LN2318"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <a href="execExpr.c.html#LN2315"><span class='Ref_To_Local'>arefstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN580"><span class='Ref_to_Member'>upperprovided</span></a><span class='Delimiter'>[</span><a href="execExpr.c.html#LN2318"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Each subscript is evaluated into subscriptvalue/subscriptnull */ 
</span>        <a href="execExpr.c.html#LN57"><span class='Ref_to_Proto'>ExecInitExprRec</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2368"><span class='Ref_To_Local'>e</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN2311"><span class='Ref_to_Parameter'>parent</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN2312"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, 
</span>                      <span class='Operator'>&</span><a href="execExpr.c.html#LN2315"><span class='Ref_To_Local'>arefstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN589"><span class='Ref_to_Member'>subscriptvalue</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="execExpr.c.html#LN2315"><span class='Ref_To_Local'>arefstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN590"><span class='Ref_to_Member'>subscriptnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* ... and then ARRAYREF_SUBSCRIPT saves it into step's workspace */ 
</span>        <a href="execExpr.c.html#LN2311"><span class='Ref_to_Parameter'>scratch</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN180"><span class='Ref_to_EnumConst'>EEOP_ARRAYREF_SUBSCRIPT</span></a><span class='Delimiter'>; 
</span>        <a href="execExpr.c.html#LN2311"><span class='Ref_to_Parameter'>scratch</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>arrayref_subscript<span class='Operator'>.</span>state <span class='Operator'>= </span><a href="execExpr.c.html#LN2315"><span class='Ref_To_Local'>arefstate</span></a><span class='Delimiter'>; 
</span>        <a href="execExpr.c.html#LN2311"><span class='Ref_to_Parameter'>scratch</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>arrayref_subscript<span class='Operator'>.</span>off <span class='Operator'>= </span><a href="execExpr.c.html#LN2318"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>; 
</span>        <a href="execExpr.c.html#LN2311"><span class='Ref_to_Parameter'>scratch</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>arrayref_subscript<span class='Operator'>.</span>isupper <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>        <a href="execExpr.c.html#LN2311"><span class='Ref_to_Parameter'>scratch</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>arrayref_subscript<span class='Operator'>.</span>jumpdone <span class='Operator'>= -</span><span class='Number'>1</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* adjust later */ 
</span>        <a href="execExpr.c.html#LN59"><span class='Ref_to_Proto'>ExprEvalPushStep</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2312"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN2311"><span class='Ref_to_Parameter'>scratch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="execExpr.c.html#LN2316"><span class='Ref_To_Local'>adjust_jumps</span></a> <span class='Operator'>= </span><a href="../nodes/list.c.html#LN144"><span class='Ref_to_Func'>lappend_int</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2316"><span class='Ref_To_Local'>adjust_jumps</span></a><span class='Delimiter'>, 
</span>                                   <a href="execExpr.c.html#LN2312"><span class='Ref_to_Parameter'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN88"><span class='Ref_to_Member'>steps_len</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="execExpr.c.html#LN2318"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="execExpr.c.html#LN2315"><span class='Ref_To_Local'>arefstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN579"><span class='Ref_to_Member'>numupper</span></a> <span class='Operator'>= </span><a href="execExpr.c.html#LN2318"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Evaluate lower subscripts similarly */ 
</span>    <a href="execExpr.c.html#LN2318"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2317"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN2311"><span class='Ref_to_Parameter'>aref</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN404"><span class='Ref_to_Member'>reflowerindexpr</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN2401"></a>        <a href="../../include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>e</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2317"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* When slicing, individual subscript bounds can be omitted */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="execExpr.c.html#LN2401"><span class='Ref_To_Local'>e</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="execExpr.c.html#LN2315"><span class='Ref_To_Local'>arefstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN585"><span class='Ref_to_Member'>lowerprovided</span></a><span class='Delimiter'>[</span><a href="execExpr.c.html#LN2318"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>            <a href="execExpr.c.html#LN2318"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <a href="execExpr.c.html#LN2315"><span class='Ref_To_Local'>arefstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN585"><span class='Ref_to_Member'>lowerprovided</span></a><span class='Delimiter'>[</span><a href="execExpr.c.html#LN2318"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Each subscript is evaluated into subscriptvalue/subscriptnull */ 
</span>        <a href="execExpr.c.html#LN57"><span class='Ref_to_Proto'>ExecInitExprRec</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2401"><span class='Ref_To_Local'>e</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN2311"><span class='Ref_to_Parameter'>parent</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN2312"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, 
</span>                      <span class='Operator'>&</span><a href="execExpr.c.html#LN2315"><span class='Ref_To_Local'>arefstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN589"><span class='Ref_to_Member'>subscriptvalue</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="execExpr.c.html#LN2315"><span class='Ref_To_Local'>arefstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN590"><span class='Ref_to_Member'>subscriptnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* ... and then ARRAYREF_SUBSCRIPT saves it into step's workspace */ 
</span>        <a href="execExpr.c.html#LN2311"><span class='Ref_to_Parameter'>scratch</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN180"><span class='Ref_to_EnumConst'>EEOP_ARRAYREF_SUBSCRIPT</span></a><span class='Delimiter'>; 
</span>        <a href="execExpr.c.html#LN2311"><span class='Ref_to_Parameter'>scratch</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>arrayref_subscript<span class='Operator'>.</span>state <span class='Operator'>= </span><a href="execExpr.c.html#LN2315"><span class='Ref_To_Local'>arefstate</span></a><span class='Delimiter'>; 
</span>        <a href="execExpr.c.html#LN2311"><span class='Ref_to_Parameter'>scratch</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>arrayref_subscript<span class='Operator'>.</span>off <span class='Operator'>= </span><a href="execExpr.c.html#LN2318"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>; 
</span>        <a href="execExpr.c.html#LN2311"><span class='Ref_to_Parameter'>scratch</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>arrayref_subscript<span class='Operator'>.</span>isupper <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>        <a href="execExpr.c.html#LN2311"><span class='Ref_to_Parameter'>scratch</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>arrayref_subscript<span class='Operator'>.</span>jumpdone <span class='Operator'>= -</span><span class='Number'>1</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* adjust later */ 
</span>        <a href="execExpr.c.html#LN59"><span class='Ref_to_Proto'>ExprEvalPushStep</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2312"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN2311"><span class='Ref_to_Parameter'>scratch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="execExpr.c.html#LN2316"><span class='Ref_To_Local'>adjust_jumps</span></a> <span class='Operator'>= </span><a href="../nodes/list.c.html#LN144"><span class='Ref_to_Func'>lappend_int</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2316"><span class='Ref_To_Local'>adjust_jumps</span></a><span class='Delimiter'>, 
</span>                                   <a href="execExpr.c.html#LN2312"><span class='Ref_to_Parameter'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN88"><span class='Ref_to_Member'>steps_len</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="execExpr.c.html#LN2318"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="execExpr.c.html#LN2315"><span class='Ref_To_Local'>arefstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN584"><span class='Ref_to_Member'>numlower</span></a> <span class='Operator'>= </span><a href="execExpr.c.html#LN2318"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Should be impossible if parser is sane, but check anyway: */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN2315"><span class='Ref_To_Local'>arefstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN584"><span class='Ref_to_Member'>numlower</span></a> <span class='Operator'>!= </span><span class='Number'>0</span> <span class='Operator'>&& 
</span>        <a href="execExpr.c.html#LN2315"><span class='Ref_To_Local'>arefstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN579"><span class='Ref_to_Member'>numupper</span></a> <span class='Operator'>!= </span><a href="execExpr.c.html#LN2315"><span class='Ref_To_Local'>arefstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN584"><span class='Ref_to_Member'>numlower</span></a><span class='Parentheses'>) 
</span>        <a href="../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"upper and lower index lists are not same length"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN2314"><span class='Ref_To_Local'>isAssignment</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN2437"></a>        <a href="../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>save_innermost_caseval</span><span class='Delimiter'>; 
</span><a name="LN2438"></a>        <span class='Keyword'>bool</span>       <span class='Operator'>*</span><span class='Declare_Local'>save_innermost_casenull</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * We might have a nested-assignment situation, in which the 
         * refassgnexpr is itself a FieldStore or ArrayRef that needs to 
         * obtain and modify the previous value of the array element or slice 
         * being replaced.  If so, we have to extract that value from the 
         * array and pass it down via the CaseTextExpr mechanism.  It's safe 
         * to reuse the CASE mechanism because there cannot be a CASE between 
         * here and where the value would be needed, and an array assignment 
         * can't be within a CASE either.  (So saving and restoring 
         * innermost_caseval is just paranoia, but let's do it anyway.) 
         * 
         * Since fetching the old element might be a nontrivial expense, do it 
         * only if the argument appears to actually need it. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN70"><span class='Ref_to_Proto'>isAssignmentIndirectionExpr</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2311"><span class='Ref_to_Parameter'>aref</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN408"><span class='Ref_to_Member'>refassgnexpr</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <a href="execExpr.c.html#LN2311"><span class='Ref_to_Parameter'>scratch</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN187"><span class='Ref_to_EnumConst'>EEOP_ARRAYREF_OLD</span></a><span class='Delimiter'>; 
</span>            <a href="execExpr.c.html#LN2311"><span class='Ref_to_Parameter'>scratch</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>arrayref<span class='Operator'>.</span>state <span class='Operator'>= </span><a href="execExpr.c.html#LN2315"><span class='Ref_To_Local'>arefstate</span></a><span class='Delimiter'>; 
</span>            <a href="execExpr.c.html#LN59"><span class='Ref_to_Proto'>ExprEvalPushStep</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2312"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN2311"><span class='Ref_to_Parameter'>scratch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Comment_Multi_Line'>/* ARRAYREF_OLD puts extracted value into prevvalue/prevnull */ 
</span>        <a href="execExpr.c.html#LN2437"><span class='Ref_To_Local'>save_innermost_caseval</span></a> <span class='Operator'>= </span><a href="execExpr.c.html#LN2312"><span class='Ref_to_Parameter'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN91"><span class='Ref_to_Member'>innermost_caseval</span></a><span class='Delimiter'>; 
</span>        <a href="execExpr.c.html#LN2438"><span class='Ref_To_Local'>save_innermost_casenull</span></a> <span class='Operator'>= </span><a href="execExpr.c.html#LN2312"><span class='Ref_to_Parameter'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN92"><span class='Ref_to_Member'>innermost_casenull</span></a><span class='Delimiter'>; 
</span>        <a href="execExpr.c.html#LN2312"><span class='Ref_to_Parameter'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN91"><span class='Ref_to_Member'>innermost_caseval</span></a> <span class='Operator'>= &</span><a href="execExpr.c.html#LN2315"><span class='Ref_To_Local'>arefstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN597"><span class='Ref_to_Member'>prevvalue</span></a><span class='Delimiter'>; 
</span>        <a href="execExpr.c.html#LN2312"><span class='Ref_to_Parameter'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN92"><span class='Ref_to_Member'>innermost_casenull</span></a> <span class='Operator'>= &</span><a href="execExpr.c.html#LN2315"><span class='Ref_To_Local'>arefstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN598"><span class='Ref_to_Member'>prevnull</span></a><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* evaluate replacement value into replacevalue/replacenull */ 
</span>        <a href="execExpr.c.html#LN57"><span class='Ref_to_Proto'>ExecInitExprRec</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2311"><span class='Ref_to_Parameter'>aref</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN408"><span class='Ref_to_Member'>refassgnexpr</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN2311"><span class='Ref_to_Parameter'>parent</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN2312"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, 
</span>                        <span class='Operator'>&</span><a href="execExpr.c.html#LN2315"><span class='Ref_To_Local'>arefstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN593"><span class='Ref_to_Member'>replacevalue</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="execExpr.c.html#LN2315"><span class='Ref_To_Local'>arefstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN594"><span class='Ref_to_Member'>replacenull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="execExpr.c.html#LN2312"><span class='Ref_to_Parameter'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN91"><span class='Ref_to_Member'>innermost_caseval</span></a> <span class='Operator'>= </span><a href="execExpr.c.html#LN2437"><span class='Ref_To_Local'>save_innermost_caseval</span></a><span class='Delimiter'>; 
</span>        <a href="execExpr.c.html#LN2312"><span class='Ref_to_Parameter'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN92"><span class='Ref_to_Member'>innermost_casenull</span></a> <span class='Operator'>= </span><a href="execExpr.c.html#LN2438"><span class='Ref_To_Local'>save_innermost_casenull</span></a><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* and perform the assignment */ 
</span>        <a href="execExpr.c.html#LN2311"><span class='Ref_to_Parameter'>scratch</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN190"><span class='Ref_to_EnumConst'>EEOP_ARRAYREF_ASSIGN</span></a><span class='Delimiter'>; 
</span>        <a href="execExpr.c.html#LN2311"><span class='Ref_to_Parameter'>scratch</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>arrayref<span class='Operator'>.</span>state <span class='Operator'>= </span><a href="execExpr.c.html#LN2315"><span class='Ref_To_Local'>arefstate</span></a><span class='Delimiter'>; 
</span>        <a href="execExpr.c.html#LN59"><span class='Ref_to_Proto'>ExprEvalPushStep</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2312"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN2311"><span class='Ref_to_Parameter'>scratch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if isAssignment &raquo; </span> 
    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* array fetch is much simpler */ 
</span>        <a href="execExpr.c.html#LN2311"><span class='Ref_to_Parameter'>scratch</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN193"><span class='Ref_to_EnumConst'>EEOP_ARRAYREF_FETCH</span></a><span class='Delimiter'>; 
</span>        <a href="execExpr.c.html#LN2311"><span class='Ref_to_Parameter'>scratch</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>arrayref<span class='Operator'>.</span>state <span class='Operator'>= </span><a href="execExpr.c.html#LN2315"><span class='Ref_To_Local'>arefstate</span></a><span class='Delimiter'>; 
</span>        <a href="execExpr.c.html#LN59"><span class='Ref_to_Proto'>ExprEvalPushStep</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2312"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN2311"><span class='Ref_to_Parameter'>scratch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* adjust jump targets */ 
</span>    <a href="../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2317"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN2316"><span class='Ref_To_Local'>adjust_jumps</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN2490"></a>        <a href="../../include/executor/execExpr.h.html#LN219"><span class='Ref_to_Struct'>ExprEvalStep</span></a> <span class='Operator'>*</span><span class='Declare_Local'>as</span> <span class='Operator'>= &</span><a href="execExpr.c.html#LN2312"><span class='Ref_to_Parameter'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN73"><span class='Ref_to_Member'>steps</span></a><span class='Delimiter'>[</span><a href="../../include/nodes/pg_list.h.html#LN106"><span class='Ref_to_Macro'>lfirst_int</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2317"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>]; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN2490"><span class='Ref_To_Local'>as</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>== </span><a href="../../include/executor/execExpr.h.html#LN180"><span class='Ref_to_EnumConst'>EEOP_ARRAYREF_SUBSCRIPT</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2490"><span class='Ref_To_Local'>as</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>arrayref_subscript<span class='Operator'>.</span>jumpdone <span class='Operator'>== -</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="execExpr.c.html#LN2490"><span class='Ref_To_Local'>as</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>arrayref_subscript<span class='Operator'>.</span>jumpdone <span class='Operator'>= </span><a href="execExpr.c.html#LN2312"><span class='Ref_to_Parameter'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN88"><span class='Ref_to_Member'>steps_len</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2490"><span class='Ref_To_Local'>as</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>== </span><a href="../../include/executor/execExpr.h.html#LN112"><span class='Ref_to_EnumConst'>EEOP_JUMP_IF_NULL</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2490"><span class='Ref_To_Local'>as</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>jump<span class='Operator'>.</span>jumpdone <span class='Operator'>== -</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="execExpr.c.html#LN2490"><span class='Ref_To_Local'>as</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>jump<span class='Operator'>.</span>jumpdone <span class='Operator'>= </span><a href="execExpr.c.html#LN2312"><span class='Ref_to_Parameter'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN88"><span class='Ref_to_Member'>steps_len</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
}</span><span class='Auto_Annotations'> &laquo; end ExecInitArrayRef &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Helper for preparing ArrayRef expressions for evaluation: is expr a nested 
 * FieldStore or ArrayRef that might need the old element value passed down? 
 * 
 * (We could use this in FieldStore too, but in that case passing the old 
 * value is so cheap there's no need.) 
 */ 
</span><span class='Keyword'>static bool 
</span><a name="LN2514"></a><span class='Declare_Function'>isAssignmentIndirectionExpr</span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>expr</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN2514"><span class='Ref_to_Parameter'>expr</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>;</span>           <span class='Comment_Single_Line'>/* just paranoia */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2514"><span class='Ref_to_Parameter'>expr</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/primnodes.h.html#LN763"><span class='Ref_to_Struct'>FieldStore</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN2520"></a>        <a href="../../include/nodes/primnodes.h.html#LN763"><span class='Ref_to_Struct'>FieldStore</span></a> <span class='Operator'>*</span><span class='Declare_Local'>fstore</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN763"><span class='Ref_to_Struct'>FieldStore</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN2514"><span class='Ref_to_Parameter'>expr</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN2520"><span class='Ref_To_Local'>fstore</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN766"><span class='Ref_to_Member'>arg</span></a> <span class='Operator'>&& </span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2520"><span class='Ref_To_Local'>fstore</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN766"><span class='Ref_to_Member'>arg</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/primnodes.h.html#LN931"><span class='Ref_to_Struct'>CaseTestExpr</span></a><span class='Parentheses'>))</span> 
            <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2514"><span class='Ref_to_Parameter'>expr</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/primnodes.h.html#LN395"><span class='Ref_to_Struct'>ArrayRef</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN2527"></a>        <a href="../../include/nodes/primnodes.h.html#LN395"><span class='Ref_to_Struct'>ArrayRef</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>arrayRef</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN395"><span class='Ref_to_Struct'>ArrayRef</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN2514"><span class='Ref_to_Parameter'>expr</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN2527"><span class='Ref_To_Local'>arrayRef</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN406"><span class='Ref_to_Member'>refexpr</span></a> <span class='Operator'>&& </span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2527"><span class='Ref_To_Local'>arrayRef</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN406"><span class='Ref_to_Member'>refexpr</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/primnodes.h.html#LN931"><span class='Ref_to_Struct'>CaseTestExpr</span></a><span class='Parentheses'>))</span> 
            <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end isAssignmentIndirectionExpr &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Prepare evaluation of a CoerceToDomain expression. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN2539"></a><span class='Declare_Function'>ExecInitCoerceToDomain</span><span class='Parentheses'>(</span><a href="../../include/executor/execExpr.h.html#LN219"><span class='Ref_to_Struct'>ExprEvalStep</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>scratch</span><span class='Delimiter'>, </span><a href="../../include/nodes/primnodes.h.html#LN1215"><span class='Ref_to_Struct'>CoerceToDomain</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>ctest</span><span class='Delimiter'>, 
</span><a name="LN2540"></a>                       <a href="../../include/nodes/execnodes.h.html#LN808"><span class='Ref_to_Struct'>PlanState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>parent</span><span class='Delimiter'>, </span><a href="../../include/nodes/execnodes.h.html#LN52"><span class='Ref_to_Struct'>ExprState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>state</span><span class='Delimiter'>, 
</span><a name="LN2541"></a>                       <a href="../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>resv</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Declare_Parameter'>resnull</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2543"></a>    <a href="../../include/executor/execExpr.h.html#LN219"><span class='Ref_to_Struct'>ExprEvalStep</span></a> <span class='Declare_Local'>scratch2</span><span class='Delimiter'>; 
</span><a name="LN2544"></a>    <a href="../../include/utils/typcache.h.html#LN129"><span class='Ref_to_Struct'>DomainConstraintRef</span></a> <span class='Operator'>*</span><span class='Declare_Local'>constraint_ref</span><span class='Delimiter'>; 
</span><a name="LN2545"></a>    <a href="../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>domainval</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN2546"></a>    <span class='Keyword'>bool</span>       <span class='Operator'>*</span><span class='Declare_Local'>domainnull</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN2547"></a>    <a href="../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>save_innermost_domainval</span><span class='Delimiter'>; 
</span><a name="LN2548"></a>    <span class='Keyword'>bool</span>       <span class='Operator'>*</span><span class='Declare_Local'>save_innermost_domainnull</span><span class='Delimiter'>; 
</span><a name="LN2549"></a>    <a href="../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>l</span><span class='Delimiter'>; 
</span> 
    <a href="execExpr.c.html#LN2539"><span class='Ref_to_Parameter'>scratch</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>domaincheck<span class='Operator'>.</span>resulttype <span class='Operator'>= </span><a href="execExpr.c.html#LN2539"><span class='Ref_to_Parameter'>ctest</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1219"><span class='Ref_to_Member'>resulttype</span></a><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* we'll allocate workspace only if needed */ 
</span>    <a href="execExpr.c.html#LN2539"><span class='Ref_to_Parameter'>scratch</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>domaincheck<span class='Operator'>.</span>checkvalue <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="execExpr.c.html#LN2539"><span class='Ref_to_Parameter'>scratch</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>domaincheck<span class='Operator'>.</span>checknull <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Evaluate argument - it's fine to directly store it into resv/resnull, 
     * if there's constraint failures there'll be errors, otherwise it's what 
     * needs to be returned. 
     */ 
</span>    <a href="execExpr.c.html#LN57"><span class='Ref_to_Proto'>ExecInitExprRec</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2539"><span class='Ref_to_Parameter'>ctest</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1218"><span class='Ref_to_Member'>arg</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN2540"><span class='Ref_to_Parameter'>parent</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN2540"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN2541"><span class='Ref_to_Parameter'>resv</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN2541"><span class='Ref_to_Parameter'>resnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Note: if the argument is of varlena type, it could be a R/W expanded 
     * object.  We want to return the R/W pointer as the final result, but we 
     * have to pass a R/O pointer as the value to be tested by any functions 
     * in check expressions.  We don't bother to emit a MAKE_READONLY step 
     * unless there's actually at least one check expression, though.  Until 
     * we've tested that, domainval/domainnull are NULL. 
     */ 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Collect the constraints associated with the domain. 
     * 
     * Note: before PG v10 we'd recheck the set of constraints during each 
     * evaluation of the expression.  Now we bake them into the ExprState 
     * during executor initialization.  That means we don't need typcache.c to 
     * provide compiled exprs. 
     */ 
</span>    <a href="execExpr.c.html#LN2544"><span class='Ref_To_Local'>constraint_ref</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/utils/typcache.h.html#LN129"><span class='Ref_to_Struct'>DomainConstraintRef</span></a> <span class='Operator'>*</span><span class='Parentheses'>) 
</span>        <a href="../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/utils/typcache.h.html#LN129"><span class='Ref_to_Struct'>DomainConstraintRef</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../include/utils/typcache.h.html#LN144"><span class='Ref_to_Proto'>InitDomainConstraintRef</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2539"><span class='Ref_to_Parameter'>ctest</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1219"><span class='Ref_to_Member'>resulttype</span></a><span class='Delimiter'>, 
</span>                            <a href="execExpr.c.html#LN2544"><span class='Ref_To_Local'>constraint_ref</span></a><span class='Delimiter'>, 
</span>                            <a href="../utils/mmgr/mcxt.c.html#LN36"><span class='Ref_to_Global_Var'>CurrentMemoryContext</span></a><span class='Delimiter'>, 
</span>                            <span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Compile code to check each domain constraint.  NOTNULL constraints can 
     * just be applied on the resv/resnull value, but for CHECK constraints we 
     * need more pushups. 
     */ 
</span>    <a href="../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2549"><span class='Ref_To_Local'>l</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN2544"><span class='Ref_To_Local'>constraint_ref</span></a><span class='Operator'>-&GT;</span><a href="../../include/utils/typcache.h.html#LN131"><span class='Ref_to_Member'>constraints</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN2594"></a>        <a href="../../include/nodes/execnodes.h.html#LN783"><span class='Ref_to_Struct'>DomainConstraintState</span></a> <span class='Operator'>*</span><span class='Declare_Local'>con</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/execnodes.h.html#LN783"><span class='Ref_to_Struct'>DomainConstraintState</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2549"><span class='Ref_To_Local'>l</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="execExpr.c.html#LN2539"><span class='Ref_to_Parameter'>scratch</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>domaincheck<span class='Operator'>.</span>constraintname <span class='Operator'>= </span><a href="execExpr.c.html#LN2594"><span class='Ref_To_Local'>con</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN787"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN2594"><span class='Ref_To_Local'>con</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN786"><span class='Ref_to_Member'>constrainttype</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>case</span> <a href="../../include/nodes/execnodes.h.html#LN779"><span class='Ref_to_EnumConst'>DOM_CONSTRAINT_NOTNULL</span></a><span class='Operator'>: 
</span>                <a href="execExpr.c.html#LN2539"><span class='Ref_to_Parameter'>scratch</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN199"><span class='Ref_to_EnumConst'>EEOP_DOMAIN_NOTNULL</span></a><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN59"><span class='Ref_to_Proto'>ExprEvalPushStep</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2540"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN2539"><span class='Ref_to_Parameter'>scratch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="../../include/nodes/execnodes.h.html#LN780"><span class='Ref_to_EnumConst'>DOM_CONSTRAINT_CHECK</span></a><span class='Operator'>: 
</span>                <span class='Comment_Multi_Line'>/* Allocate workspace for CHECK output if we didn't yet */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN2539"><span class='Ref_to_Parameter'>scratch</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>domaincheck<span class='Operator'>.</span>checkvalue <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <a href="execExpr.c.html#LN2539"><span class='Ref_to_Parameter'>scratch</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>domaincheck<span class='Operator'>.</span>checkvalue <span class='Operator'>= 
</span>                        <span class='Parentheses'>(</span><a href="../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                    <a href="execExpr.c.html#LN2539"><span class='Ref_to_Parameter'>scratch</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>domaincheck<span class='Operator'>.</span>checknull <span class='Operator'>= 
</span>                        <span class='Parentheses'>(</span><span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>bool</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * If first time through, determine where CoerceToDomainValue 
                 * nodes should read from. 
                 */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execExpr.c.html#LN2545"><span class='Ref_To_Local'>domainval</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Comment_Multi_Line'>/* 
                     * Since value might be read multiple times, force to R/O 
                     * - but only if it could be an expanded datum. 
                     */ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/utils/lsyscache.h.html#LN133"><span class='Ref_to_Proto'>get_typlen</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2539"><span class='Ref_to_Parameter'>ctest</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1219"><span class='Ref_to_Member'>resulttype</span></a><span class='Parentheses'>) </span><span class='Operator'>== -</span><span class='Number'>1</span><span class='Parentheses'>)</span> 
                    <span class='Delimiter'>{ 
</span>                        <span class='Comment_Multi_Line'>/* Yes, so make output workspace for MAKE_READONLY */ 
</span>                        <a href="execExpr.c.html#LN2545"><span class='Ref_To_Local'>domainval</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                        <a href="execExpr.c.html#LN2546"><span class='Ref_To_Local'>domainnull</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>bool</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
                        <span class='Comment_Multi_Line'>/* Emit MAKE_READONLY */ 
</span>                        <a href="execExpr.c.html#LN2543"><span class='Ref_To_Local'>scratch2</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN138"><span class='Ref_to_EnumConst'>EEOP_MAKE_READONLY</span></a><span class='Delimiter'>; 
</span>                        <a href="execExpr.c.html#LN2543"><span class='Ref_To_Local'>scratch2</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN229"><span class='Ref_to_Member'>resvalue</span></a> <span class='Operator'>= </span><a href="execExpr.c.html#LN2545"><span class='Ref_To_Local'>domainval</span></a><span class='Delimiter'>; 
</span>                        <a href="execExpr.c.html#LN2543"><span class='Ref_To_Local'>scratch2</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN230"><span class='Ref_to_Member'>resnull</span></a> <span class='Operator'>= </span><a href="execExpr.c.html#LN2546"><span class='Ref_To_Local'>domainnull</span></a><span class='Delimiter'>; 
</span>                        <a href="execExpr.c.html#LN2543"><span class='Ref_To_Local'>scratch2</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>make_readonly<span class='Operator'>.</span><span class='Keyword'>value </span><span class='Operator'>= </span><a href="execExpr.c.html#LN2541"><span class='Ref_to_Parameter'>resv</span></a><span class='Delimiter'>; 
</span>                        <a href="execExpr.c.html#LN2543"><span class='Ref_To_Local'>scratch2</span></a><span class='Operator'>.</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>make_readonly<span class='Operator'>.</span>isnull <span class='Operator'>= </span><a href="execExpr.c.html#LN2541"><span class='Ref_to_Parameter'>resnull</span></a><span class='Delimiter'>; 
</span>                        <a href="execExpr.c.html#LN59"><span class='Ref_to_Proto'>ExprEvalPushStep</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2540"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="execExpr.c.html#LN2543"><span class='Ref_To_Local'>scratch2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                    <span class='Control'>else</span> 
                    <span class='Delimiter'>{ 
</span>                        <span class='Comment_Multi_Line'>/* No, so it's fine to read from resv/resnull */ 
</span>                        <a href="execExpr.c.html#LN2545"><span class='Ref_To_Local'>domainval</span></a> <span class='Operator'>= </span><a href="execExpr.c.html#LN2541"><span class='Ref_to_Parameter'>resv</span></a><span class='Delimiter'>; 
</span>                        <a href="execExpr.c.html#LN2546"><span class='Ref_To_Local'>domainnull</span></a> <span class='Operator'>= </span><a href="execExpr.c.html#LN2541"><span class='Ref_to_Parameter'>resnull</span></a><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if domainval==NULL &raquo; </span> 
 
                <span class='Comment_Multi_Line'>/* 
                 * Set up value to be returned by CoerceToDomainValue nodes. 
                 * We must save and restore innermost_domainval/null fields, 
                 * in case this node is itself within a check expression for 
                 * another domain. 
                 */ 
</span>                <a href="execExpr.c.html#LN2547"><span class='Ref_To_Local'>save_innermost_domainval</span></a> <span class='Operator'>= </span><a href="execExpr.c.html#LN2540"><span class='Ref_to_Parameter'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN94"><span class='Ref_to_Member'>innermost_domainval</span></a><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN2548"><span class='Ref_To_Local'>save_innermost_domainnull</span></a> <span class='Operator'>= </span><a href="execExpr.c.html#LN2540"><span class='Ref_to_Parameter'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN95"><span class='Ref_to_Member'>innermost_domainnull</span></a><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN2540"><span class='Ref_to_Parameter'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN94"><span class='Ref_to_Member'>innermost_domainval</span></a> <span class='Operator'>= </span><a href="execExpr.c.html#LN2545"><span class='Ref_To_Local'>domainval</span></a><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN2540"><span class='Ref_to_Parameter'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN95"><span class='Ref_to_Member'>innermost_domainnull</span></a> <span class='Operator'>= </span><a href="execExpr.c.html#LN2546"><span class='Ref_To_Local'>domainnull</span></a><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* evaluate check expression value */ 
</span>                <a href="execExpr.c.html#LN57"><span class='Ref_to_Proto'>ExecInitExprRec</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2594"><span class='Ref_To_Local'>con</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN788"><span class='Ref_to_Member'>check_expr</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN2540"><span class='Ref_to_Parameter'>parent</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN2540"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, 
</span>                                <a href="execExpr.c.html#LN2539"><span class='Ref_to_Parameter'>scratch</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>domaincheck<span class='Operator'>.</span>checkvalue<span class='Delimiter'>, 
</span>                                <a href="execExpr.c.html#LN2539"><span class='Ref_to_Parameter'>scratch</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN562"><span class='Ref_to_Member'>d</span></a><span class='Operator'>.</span>domaincheck<span class='Operator'>.</span>checknull<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <a href="execExpr.c.html#LN2540"><span class='Ref_to_Parameter'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN94"><span class='Ref_to_Member'>innermost_domainval</span></a> <span class='Operator'>= </span><a href="execExpr.c.html#LN2547"><span class='Ref_To_Local'>save_innermost_domainval</span></a><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN2540"><span class='Ref_to_Parameter'>state</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN95"><span class='Ref_to_Member'>innermost_domainnull</span></a> <span class='Operator'>= </span><a href="execExpr.c.html#LN2548"><span class='Ref_To_Local'>save_innermost_domainnull</span></a><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* now test result */ 
</span>                <a href="execExpr.c.html#LN2539"><span class='Ref_to_Parameter'>scratch</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/execExpr.h.html#LN226"><span class='Ref_to_Member'>opcode</span></a> <span class='Operator'>= </span><a href="../../include/executor/execExpr.h.html#LN202"><span class='Ref_to_EnumConst'>EEOP_DOMAIN_CHECK</span></a><span class='Delimiter'>; 
</span>                <a href="execExpr.c.html#LN59"><span class='Ref_to_Proto'>ExprEvalPushStep</span></a><span class='Parentheses'>(</span><a href="execExpr.c.html#LN2540"><span class='Ref_to_Parameter'>state</span></a><span class='Delimiter'>, </span><a href="execExpr.c.html#LN2539"><span class='Ref_to_Parameter'>scratch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>default</span><span class='Operator'>: 
</span>                <a href="../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"unrecognized constraint type: %d"</span><span class='Delimiter'>, 
</span>                     <span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>) </span><a href="execExpr.c.html#LN2594"><span class='Ref_To_Local'>con</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN786"><span class='Ref_to_Member'>constrainttype</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch con-&GT;constrainttype &raquo; </span> 
    <span class='Delimiter'>} 
}</span><span class='Auto_Annotations'> &laquo; end ExecInitCoerceToDomain &raquo; </span> 
</pre>
<table bgcolor='#c0c0c0' width='100%'><tr><td><a href='../../../Contents.html'>Contents</a></td></tr>
</table><hr><p class='blurb' align='center'><a href='http://www.sourceinsight.com'>HTML Created by Source Insight Version 4.00.0084 Built on 2017-02-26</a></p>
</body></html>