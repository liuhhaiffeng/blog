<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta name="generator" content="Source Insight Version 4.00.0084 Built on 2017-02-26">
<meta charset='UTF-8' />
<style type='text/css'><!--
TD {background-color: #C0C0C0; font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.blurb {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.filename {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 120%; font-weight: bold; }
.dirname {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 100%; font-weight: bold; margin-top: 2.5em;}
--></style>
<title>src\backend\executor\execUtils.c</title>
<LINK REL=StyleSheet HREF="../../../C_Cpp_Source_File.css" TYPE='text/css' MEDIA=screen>
</head>
<body bgcolor=#ffffff>
<table bgcolor='#c0c0c0' width='100%'>
<tr><td><p class='filename'><b>src\backend\executor\execUtils.c</b></p></td>
<td align='right'>
Wed Jun 14 08:25:39 2017
</td></tr>
<tr><td><a href='../../../Contents.html'>Contents</a></td></tr>
</table>
<pre>
</span><span class='Comment_Multi_Line'>/*------------------------------------------------------------------------- 
 * 
 * execUtils.c 
 *    miscellaneous executor utility routines 
 * 
 * Portions Copyright (c) 1996-2017, PostgreSQL Global Development Group 
 * Portions Copyright (c) 1994, Regents of the University of California 
 * 
 * 
 * IDENTIFICATION 
 *    src/backend/executor/execUtils.c 
 * 
 *------------------------------------------------------------------------- 
 */ 
/* 
 * INTERFACE ROUTINES 
 *      CreateExecutorState     Create/delete executor working state 
 *      FreeExecutorState 
 *      CreateExprContext 
 *      CreateStandaloneExprContext 
 *      FreeExprContext 
 *      ReScanExprContext 
 * 
 *      ExecAssignExprContext   Common code for plan node init routines. 
 *      ExecAssignResultType 
 *      etc 
 * 
 *      ExecOpenScanRelation    Common code for scan node init routines. 
 *      ExecCloseScanRelation 
 * 
 *      executor_errposition    Report syntactic position of an error. 
 * 
 *      RegisterExprContextCallback    Register function shutdown callback 
 *      UnregisterExprContextCallback  Deregister function shutdown callback 
 * 
 *      GetAttributeByName      Runtime extraction of columns from tuples. 
 *      GetAttributeByNum 
 * 
 *   NOTES 
 *      This file has traditionally been the place to stick misc. 
 *      executor support stuff that doesn't really go anyplace else. 
 */ 
</span> 
<span class='Keyword'>#include </span><span class='String'>"postgres.h"</span> 
 
<span class='Keyword'>#include </span><span class='String'>"access/relscan.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"access/transam.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"executor/executor.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"mb/pg_wchar.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"nodes/nodeFuncs.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"parser/parsetree.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"storage/lmgr.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/builtins.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/memutils.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/rel.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/typcache.h"</span> 
 
 
<a name="LN58"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>ShutdownExprContext</span><span class='Parentheses'>(</span><a href="../../include/nodes/execnodes.h.html#LN191"><span class='Ref_to_Struct'>ExprContext</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>econtext</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>isCommit</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
 
<span class='Comment_Multi_Line'>/* ---------------------------------------------------------------- 
 *               Executor state and memory management functions 
 * ---------------------------------------------------------------- 
 */ 
</span> 
<span class='Comment_Multi_Line'>/* ---------------- 
 *      CreateExecutorState 
 * 
 *      Create and initialize an EState node, which is the root of 
 *      working storage for an entire Executor invocation. 
 * 
 * Principally, this creates the per-query memory context that will be 
 * used to hold all working data that lives till the end of the query. 
 * Note that the per-query context will become a child of the caller's 
 * CurrentMemoryContext. 
 * ---------------- 
 */ 
</span><a href="../../include/nodes/execnodes.h.html#LN402"><span class='Ref_to_Struct'>EState</span></a> <span class='Operator'>* 
</span><a name="LN79"></a><span class='Declare_Function'>CreateExecutorState</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN81"></a>    <a href="../../include/nodes/execnodes.h.html#LN402"><span class='Ref_to_Struct'>EState</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>estate</span><span class='Delimiter'>; 
</span><a name="LN82"></a>    <a href="../../include/utils/palloc.h.html#LN35"><span class='Ref_to_Typedef'>MemoryContext</span></a> <span class='Declare_Local'>qcontext</span><span class='Delimiter'>; 
</span><a name="LN83"></a>    <a href="../../include/utils/palloc.h.html#LN35"><span class='Ref_to_Typedef'>MemoryContext</span></a> <span class='Declare_Local'>oldcontext</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Create the per-query context for this Executor run. 
     */ 
</span>    <a href="execUtils.c.html#LN82"><span class='Ref_To_Local'>qcontext</span></a> <span class='Operator'>= </span><a href="../../include/utils/memutils.h.html#LN145"><span class='Ref_to_Proto'>AllocSetContextCreate</span></a><span class='Parentheses'>(</span><a href="../utils/mmgr/mcxt.c.html#LN36"><span class='Ref_to_Global_Var'>CurrentMemoryContext</span></a><span class='Delimiter'>, 
</span>                                     <span class='String'>"ExecutorState"</span><span class='Delimiter'>, 
</span>                                     <a href="../../include/utils/memutils.h.html#LN164"><span class='Ref_to_Const'>ALLOCSET_DEFAULT_SIZES</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Make the EState node within the per-query context.  This way, we don't 
     * need a separate pfree() operation for it at shutdown. 
     */ 
</span>    <a href="execUtils.c.html#LN83"><span class='Ref_To_Local'>oldcontext</span></a> <span class='Operator'>= </span><a href="../../include/utils/palloc.h.html#LN107"><span class='Ref_to_Func'>MemoryContextSwitchTo</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN82"><span class='Ref_To_Local'>qcontext</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="execUtils.c.html#LN81"><span class='Ref_To_Local'>estate</span></a> <span class='Operator'>= </span><a href="../../include/nodes/nodes.h.html#LN556"><span class='Ref_to_Macro'>makeNode</span></a><span class='Parentheses'>(</span><a href="../../include/nodes/execnodes.h.html#LN402"><span class='Ref_to_Struct'>EState</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Initialize all fields of the Executor State structure 
     */ 
</span>    <a href="execUtils.c.html#LN81"><span class='Ref_To_Local'>estate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN407"><span class='Ref_to_Member'>es_direction</span></a> <span class='Operator'>= </span><a href="../../include/access/sdir.h.html#LN25"><span class='Ref_to_EnumConst'>ForwardScanDirection</span></a><span class='Delimiter'>; 
</span>    <a href="execUtils.c.html#LN81"><span class='Ref_To_Local'>estate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN408"><span class='Ref_to_Member'>es_snapshot</span></a> <span class='Operator'>= </span><a href="../../include/utils/snapshot.h.html#LN24"><span class='Ref_to_Const'>InvalidSnapshot</span></a><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* caller must initialize this */ 
</span>    <a href="execUtils.c.html#LN81"><span class='Ref_To_Local'>estate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN409"><span class='Ref_to_Member'>es_crosscheck_snapshot</span></a> <span class='Operator'>= </span><a href="../../include/utils/snapshot.h.html#LN24"><span class='Ref_to_Const'>InvalidSnapshot</span></a><span class='Delimiter'>;</span>   <span class='Comment_Single_Line'>/* no crosscheck */ 
</span>    <a href="execUtils.c.html#LN81"><span class='Ref_To_Local'>estate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN410"><span class='Ref_to_Member'>es_range_table</span></a> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span>    <a href="execUtils.c.html#LN81"><span class='Ref_To_Local'>estate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN411"><span class='Ref_to_Member'>es_plannedstmt</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <a href="execUtils.c.html#LN81"><span class='Ref_To_Local'>estate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN414"><span class='Ref_to_Member'>es_junkFilter</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <a href="execUtils.c.html#LN81"><span class='Ref_To_Local'>estate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN417"><span class='Ref_to_Member'>es_output_cid</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/c.h.html#LN410"><span class='Ref_to_Typedef'>CommandId</span></a><span class='Parentheses'>) </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <a href="execUtils.c.html#LN81"><span class='Ref_To_Local'>estate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN420"><span class='Ref_to_Member'>es_result_relations</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="execUtils.c.html#LN81"><span class='Ref_To_Local'>estate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN421"><span class='Ref_to_Member'>es_num_result_relations</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="execUtils.c.html#LN81"><span class='Ref_To_Local'>estate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN422"><span class='Ref_to_Member'>es_result_relation_info</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <a href="execUtils.c.html#LN81"><span class='Ref_To_Local'>estate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN435"><span class='Ref_to_Member'>es_trig_target_relations</span></a> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span>    <a href="execUtils.c.html#LN81"><span class='Ref_To_Local'>estate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN436"><span class='Ref_to_Member'>es_trig_tuple_slot</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="execUtils.c.html#LN81"><span class='Ref_To_Local'>estate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN437"><span class='Ref_to_Member'>es_trig_oldtup_slot</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="execUtils.c.html#LN81"><span class='Ref_To_Local'>estate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN438"><span class='Ref_to_Member'>es_trig_newtup_slot</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <a href="execUtils.c.html#LN81"><span class='Ref_To_Local'>estate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN441"><span class='Ref_to_Member'>es_param_list_info</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="execUtils.c.html#LN81"><span class='Ref_To_Local'>estate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN442"><span class='Ref_to_Member'>es_param_exec_vals</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <a href="execUtils.c.html#LN81"><span class='Ref_To_Local'>estate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN444"><span class='Ref_to_Member'>es_queryEnv</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <a href="execUtils.c.html#LN81"><span class='Ref_To_Local'>estate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN447"><span class='Ref_to_Member'>es_query_cxt</span></a> <span class='Operator'>= </span><a href="execUtils.c.html#LN82"><span class='Ref_To_Local'>qcontext</span></a><span class='Delimiter'>; 
</span> 
    <a href="execUtils.c.html#LN81"><span class='Ref_To_Local'>estate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN449"><span class='Ref_to_Member'>es_tupleTable</span></a> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span> 
    <a href="execUtils.c.html#LN81"><span class='Ref_To_Local'>estate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN451"><span class='Ref_to_Member'>es_rowMarks</span></a> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span> 
    <a href="execUtils.c.html#LN81"><span class='Ref_To_Local'>estate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN453"><span class='Ref_to_Member'>es_processed</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="execUtils.c.html#LN81"><span class='Ref_To_Local'>estate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN454"><span class='Ref_to_Member'>es_lastoid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
</span> 
    <a href="execUtils.c.html#LN81"><span class='Ref_To_Local'>estate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN456"><span class='Ref_to_Member'>es_top_eflags</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="execUtils.c.html#LN81"><span class='Ref_To_Local'>estate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN457"><span class='Ref_to_Member'>es_instrument</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="execUtils.c.html#LN81"><span class='Ref_To_Local'>estate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN458"><span class='Ref_to_Member'>es_finished</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
    <a href="execUtils.c.html#LN81"><span class='Ref_To_Local'>estate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN460"><span class='Ref_to_Member'>es_exprcontexts</span></a> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span> 
    <a href="execUtils.c.html#LN81"><span class='Ref_To_Local'>estate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN462"><span class='Ref_to_Member'>es_subplanstates</span></a> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span> 
    <a href="execUtils.c.html#LN81"><span class='Ref_To_Local'>estate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN464"><span class='Ref_to_Member'>es_auxmodifytables</span></a> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span> 
    <a href="execUtils.c.html#LN81"><span class='Ref_To_Local'>estate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN471"><span class='Ref_to_Member'>es_per_tuple_exprcontext</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <a href="execUtils.c.html#LN81"><span class='Ref_To_Local'>estate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN482"><span class='Ref_to_Member'>es_epqTuple</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="execUtils.c.html#LN81"><span class='Ref_To_Local'>estate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN483"><span class='Ref_to_Member'>es_epqTupleSet</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="execUtils.c.html#LN81"><span class='Ref_To_Local'>estate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN484"><span class='Ref_to_Member'>es_epqScanDone</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="execUtils.c.html#LN81"><span class='Ref_To_Local'>estate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN412"><span class='Ref_to_Member'>es_sourceText</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Return the executor state structure 
     */ 
</span>    <a href="../../include/utils/palloc.h.html#LN107"><span class='Ref_to_Func'>MemoryContextSwitchTo</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN83"><span class='Ref_To_Local'>oldcontext</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="execUtils.c.html#LN81"><span class='Ref_To_Local'>estate</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end CreateExecutorState &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* ---------------- 
 *      FreeExecutorState 
 * 
 *      Release an EState along with all remaining working storage. 
 * 
 * Note: this is not responsible for releasing non-memory resources, 
 * such as open relations or buffer pins.  But it will shut down any 
 * still-active ExprContexts within the EState.  That is sufficient 
 * cleanup for situations where the EState has only been used for expression 
 * evaluation, and not to run a complete Plan. 
 * 
 * This can be called in any memory context ... so long as it's not one 
 * of the ones to be freed. 
 * ---------------- 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN177"></a><span class='Declare_Function'>FreeExecutorState</span><span class='Parentheses'>(</span><a href="../../include/nodes/execnodes.h.html#LN402"><span class='Ref_to_Struct'>EState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>estate</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Comment_Multi_Line'>/* 
     * Shut down and free any remaining ExprContexts.  We do this explicitly 
     * to ensure that any remaining shutdown callbacks get called (since they 
     * might need to release resources that aren't simply memory within the 
     * per-query memory context). 
     */ 
</span>    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="execUtils.c.html#LN177"><span class='Ref_to_Parameter'>estate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN460"><span class='Ref_to_Member'>es_exprcontexts</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * XXX: seems there ought to be a faster way to implement this than 
         * repeated list_delete(), no? 
         */ 
</span>        <a href="execUtils.c.html#LN347"><span class='Ref_to_Func'>FreeExprContext</span></a><span class='Parentheses'>((</span><a href="../../include/nodes/execnodes.h.html#LN191"><span class='Ref_to_Struct'>ExprContext</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/nodes/pg_list.h.html#LN110"><span class='Ref_to_Macro'>linitial</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN177"><span class='Ref_to_Parameter'>estate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN460"><span class='Ref_to_Member'>es_exprcontexts</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                        <span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* FreeExprContext removed the list link for us */ 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Free the per-query memory context, thereby releasing all working 
     * memory, including the EState node itself. 
     */ 
</span>    <a href="../../include/utils/memutils.h.html#LN74"><span class='Ref_to_Proto'>MemoryContextDelete</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN177"><span class='Ref_to_Parameter'>estate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN447"><span class='Ref_to_Member'>es_query_cxt</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end FreeExecutorState &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* ---------------- 
 *      CreateExprContext 
 * 
 *      Create a context for expression evaluation within an EState. 
 * 
 * An executor run may require multiple ExprContexts (we usually make one 
 * for each Plan node, and a separate one for per-output-tuple processing 
 * such as constraint checking).  Each ExprContext has its own "per-tuple" 
 * memory context. 
 * 
 * Note we make no assumption about the caller's memory context. 
 * ---------------- 
 */ 
</span><a href="../../include/nodes/execnodes.h.html#LN191"><span class='Ref_to_Struct'>ExprContext</span></a> <span class='Operator'>* 
</span><a name="LN217"></a><span class='Declare_Function'>CreateExprContext</span><span class='Parentheses'>(</span><a href="../../include/nodes/execnodes.h.html#LN402"><span class='Ref_to_Struct'>EState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>estate</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN219"></a>    <a href="../../include/nodes/execnodes.h.html#LN191"><span class='Ref_to_Struct'>ExprContext</span></a> <span class='Operator'>*</span><span class='Declare_Local'>econtext</span><span class='Delimiter'>; 
</span><a name="LN220"></a>    <a href="../../include/utils/palloc.h.html#LN35"><span class='Ref_to_Typedef'>MemoryContext</span></a> <span class='Declare_Local'>oldcontext</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Create the ExprContext node within the per-query memory context */ 
</span>    <a href="execUtils.c.html#LN220"><span class='Ref_To_Local'>oldcontext</span></a> <span class='Operator'>= </span><a href="../../include/utils/palloc.h.html#LN107"><span class='Ref_to_Func'>MemoryContextSwitchTo</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN217"><span class='Ref_to_Parameter'>estate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN447"><span class='Ref_to_Member'>es_query_cxt</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="execUtils.c.html#LN219"><span class='Ref_To_Local'>econtext</span></a> <span class='Operator'>= </span><a href="../../include/nodes/nodes.h.html#LN556"><span class='Ref_to_Macro'>makeNode</span></a><span class='Parentheses'>(</span><a href="../../include/nodes/execnodes.h.html#LN191"><span class='Ref_to_Struct'>ExprContext</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Initialize fields of ExprContext */ 
</span>    <a href="execUtils.c.html#LN219"><span class='Ref_To_Local'>econtext</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN196"><span class='Ref_to_Member'>ecxt_scantuple</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="execUtils.c.html#LN219"><span class='Ref_To_Local'>econtext</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN197"><span class='Ref_to_Member'>ecxt_innertuple</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="execUtils.c.html#LN219"><span class='Ref_To_Local'>econtext</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN198"><span class='Ref_to_Member'>ecxt_outertuple</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <a href="execUtils.c.html#LN219"><span class='Ref_To_Local'>econtext</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN201"><span class='Ref_to_Member'>ecxt_per_query_memory</span></a> <span class='Operator'>= </span><a href="execUtils.c.html#LN217"><span class='Ref_to_Parameter'>estate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN447"><span class='Ref_to_Member'>es_query_cxt</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Create working memory for expression evaluation in this context. 
     */ 
</span>    <a href="execUtils.c.html#LN219"><span class='Ref_To_Local'>econtext</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN202"><span class='Ref_to_Member'>ecxt_per_tuple_memory</span></a> <span class='Operator'>= 
</span>        <a href="../../include/utils/memutils.h.html#LN145"><span class='Ref_to_Proto'>AllocSetContextCreate</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN217"><span class='Ref_to_Parameter'>estate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN447"><span class='Ref_to_Member'>es_query_cxt</span></a><span class='Delimiter'>, 
</span>                              <span class='String'>"ExprContext"</span><span class='Delimiter'>, 
</span>                              <a href="../../include/utils/memutils.h.html#LN164"><span class='Ref_to_Const'>ALLOCSET_DEFAULT_SIZES</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="execUtils.c.html#LN219"><span class='Ref_To_Local'>econtext</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN205"><span class='Ref_to_Member'>ecxt_param_exec_vals</span></a> <span class='Operator'>= </span><a href="execUtils.c.html#LN217"><span class='Ref_to_Parameter'>estate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN442"><span class='Ref_to_Member'>es_param_exec_vals</span></a><span class='Delimiter'>; 
</span>    <a href="execUtils.c.html#LN219"><span class='Ref_To_Local'>econtext</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN206"><span class='Ref_to_Member'>ecxt_param_list_info</span></a> <span class='Operator'>= </span><a href="execUtils.c.html#LN217"><span class='Ref_to_Parameter'>estate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN441"><span class='Ref_to_Member'>es_param_list_info</span></a><span class='Delimiter'>; 
</span> 
    <a href="execUtils.c.html#LN219"><span class='Ref_To_Local'>econtext</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN212"><span class='Ref_to_Member'>ecxt_aggvalues</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="execUtils.c.html#LN219"><span class='Ref_To_Local'>econtext</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN213"><span class='Ref_to_Member'>ecxt_aggnulls</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <a href="execUtils.c.html#LN219"><span class='Ref_To_Local'>econtext</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN216"><span class='Ref_to_Member'>caseValue_datum</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a><span class='Parentheses'>) </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="execUtils.c.html#LN219"><span class='Ref_To_Local'>econtext</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN217"><span class='Ref_to_Member'>caseValue_isNull</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
    <a href="execUtils.c.html#LN219"><span class='Ref_To_Local'>econtext</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN220"><span class='Ref_to_Member'>domainValue_datum</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a><span class='Parentheses'>) </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="execUtils.c.html#LN219"><span class='Ref_To_Local'>econtext</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN221"><span class='Ref_to_Member'>domainValue_isNull</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
    <a href="execUtils.c.html#LN219"><span class='Ref_To_Local'>econtext</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN224"><span class='Ref_to_Member'>ecxt_estate</span></a> <span class='Operator'>= </span><a href="execUtils.c.html#LN217"><span class='Ref_to_Parameter'>estate</span></a><span class='Delimiter'>; 
</span> 
    <a href="execUtils.c.html#LN219"><span class='Ref_To_Local'>econtext</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN227"><span class='Ref_to_Member'>ecxt_callbacks</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Link the ExprContext into the EState to ensure it is shut down when the 
     * EState is freed.  Because we use lcons(), shutdowns will occur in 
     * reverse order of creation, which may not be essential but can't hurt. 
     */ 
</span>    <a href="execUtils.c.html#LN217"><span class='Ref_to_Parameter'>estate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN460"><span class='Ref_to_Member'>es_exprcontexts</span></a> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN215"><span class='Ref_to_Proto'>lcons</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN219"><span class='Ref_To_Local'>econtext</span></a><span class='Delimiter'>, </span><a href="execUtils.c.html#LN217"><span class='Ref_to_Parameter'>estate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN460"><span class='Ref_to_Member'>es_exprcontexts</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../include/utils/palloc.h.html#LN107"><span class='Ref_to_Func'>MemoryContextSwitchTo</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN220"><span class='Ref_To_Local'>oldcontext</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="execUtils.c.html#LN219"><span class='Ref_To_Local'>econtext</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end CreateExprContext &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* ---------------- 
 *      CreateStandaloneExprContext 
 * 
 *      Create a context for standalone expression evaluation. 
 * 
 * An ExprContext made this way can be used for evaluation of expressions 
 * that contain no Params, subplans, or Var references (it might work to 
 * put tuple references into the scantuple field, but it seems unwise). 
 * 
 * The ExprContext struct is allocated in the caller's current memory 
 * context, which also becomes its "per query" context. 
 * 
 * It is caller's responsibility to free the ExprContext when done, 
 * or at least ensure that any shutdown callbacks have been called 
 * (ReScanExprContext() is suitable).  Otherwise, non-memory resources 
 * might be leaked. 
 * ---------------- 
 */ 
</span><a href="../../include/nodes/execnodes.h.html#LN191"><span class='Ref_to_Struct'>ExprContext</span></a> <span class='Operator'>* 
</span><a name="LN289"></a><span class='Declare_Function'>CreateStandaloneExprContext</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN291"></a>    <a href="../../include/nodes/execnodes.h.html#LN191"><span class='Ref_to_Struct'>ExprContext</span></a> <span class='Operator'>*</span><span class='Declare_Local'>econtext</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Create the ExprContext node within the caller's memory context */ 
</span>    <a href="execUtils.c.html#LN291"><span class='Ref_To_Local'>econtext</span></a> <span class='Operator'>= </span><a href="../../include/nodes/nodes.h.html#LN556"><span class='Ref_to_Macro'>makeNode</span></a><span class='Parentheses'>(</span><a href="../../include/nodes/execnodes.h.html#LN191"><span class='Ref_to_Struct'>ExprContext</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Initialize fields of ExprContext */ 
</span>    <a href="execUtils.c.html#LN291"><span class='Ref_To_Local'>econtext</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN196"><span class='Ref_to_Member'>ecxt_scantuple</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="execUtils.c.html#LN291"><span class='Ref_To_Local'>econtext</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN197"><span class='Ref_to_Member'>ecxt_innertuple</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="execUtils.c.html#LN291"><span class='Ref_To_Local'>econtext</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN198"><span class='Ref_to_Member'>ecxt_outertuple</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <a href="execUtils.c.html#LN291"><span class='Ref_To_Local'>econtext</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN201"><span class='Ref_to_Member'>ecxt_per_query_memory</span></a> <span class='Operator'>= </span><a href="../utils/mmgr/mcxt.c.html#LN36"><span class='Ref_to_Global_Var'>CurrentMemoryContext</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Create working memory for expression evaluation in this context. 
     */ 
</span>    <a href="execUtils.c.html#LN291"><span class='Ref_To_Local'>econtext</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN202"><span class='Ref_to_Member'>ecxt_per_tuple_memory</span></a> <span class='Operator'>= 
</span>        <a href="../../include/utils/memutils.h.html#LN145"><span class='Ref_to_Proto'>AllocSetContextCreate</span></a><span class='Parentheses'>(</span><a href="../utils/mmgr/mcxt.c.html#LN36"><span class='Ref_to_Global_Var'>CurrentMemoryContext</span></a><span class='Delimiter'>, 
</span>                              <span class='String'>"ExprContext"</span><span class='Delimiter'>, 
</span>                              <a href="../../include/utils/memutils.h.html#LN164"><span class='Ref_to_Const'>ALLOCSET_DEFAULT_SIZES</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="execUtils.c.html#LN291"><span class='Ref_To_Local'>econtext</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN205"><span class='Ref_to_Member'>ecxt_param_exec_vals</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="execUtils.c.html#LN291"><span class='Ref_To_Local'>econtext</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN206"><span class='Ref_to_Member'>ecxt_param_list_info</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <a href="execUtils.c.html#LN291"><span class='Ref_To_Local'>econtext</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN212"><span class='Ref_to_Member'>ecxt_aggvalues</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="execUtils.c.html#LN291"><span class='Ref_To_Local'>econtext</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN213"><span class='Ref_to_Member'>ecxt_aggnulls</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <a href="execUtils.c.html#LN291"><span class='Ref_To_Local'>econtext</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN216"><span class='Ref_to_Member'>caseValue_datum</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a><span class='Parentheses'>) </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="execUtils.c.html#LN291"><span class='Ref_To_Local'>econtext</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN217"><span class='Ref_to_Member'>caseValue_isNull</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
    <a href="execUtils.c.html#LN291"><span class='Ref_To_Local'>econtext</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN220"><span class='Ref_to_Member'>domainValue_datum</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a><span class='Parentheses'>) </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="execUtils.c.html#LN291"><span class='Ref_To_Local'>econtext</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN221"><span class='Ref_to_Member'>domainValue_isNull</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
    <a href="execUtils.c.html#LN291"><span class='Ref_To_Local'>econtext</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN224"><span class='Ref_to_Member'>ecxt_estate</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <a href="execUtils.c.html#LN291"><span class='Ref_To_Local'>econtext</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN227"><span class='Ref_to_Member'>ecxt_callbacks</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="execUtils.c.html#LN291"><span class='Ref_To_Local'>econtext</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end CreateStandaloneExprContext &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* ---------------- 
 *      FreeExprContext 
 * 
 *      Free an expression context, including calling any remaining 
 *      shutdown callbacks. 
 * 
 * Since we free the temporary context used for expression evaluation, 
 * any previously computed pass-by-reference expression result will go away! 
 * 
 * If isCommit is false, we are being called in error cleanup, and should 
 * not call callbacks but only release memory.  (It might be better to call 
 * the callbacks and pass the isCommit flag to them, but that would require 
 * more invasive code changes than currently seems justified.) 
 * 
 * Note we make no assumption about the caller's memory context. 
 * ---------------- 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN348"></a><span class='Declare_Function'>FreeExprContext</span><span class='Parentheses'>(</span><a href="../../include/nodes/execnodes.h.html#LN191"><span class='Ref_to_Struct'>ExprContext</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>econtext</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>isCommit</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN350"></a>    <a href="../../include/nodes/execnodes.h.html#LN402"><span class='Ref_to_Struct'>EState</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>estate</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Call any registered callbacks */ 
</span>    <a href="execUtils.c.html#LN58"><span class='Ref_to_Proto'>ShutdownExprContext</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN348"><span class='Ref_to_Parameter'>econtext</span></a><span class='Delimiter'>, </span><a href="execUtils.c.html#LN348"><span class='Ref_to_Parameter'>isCommit</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* And clean up the memory used */ 
</span>    <a href="../../include/utils/memutils.h.html#LN74"><span class='Ref_to_Proto'>MemoryContextDelete</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN348"><span class='Ref_to_Parameter'>econtext</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN202"><span class='Ref_to_Member'>ecxt_per_tuple_memory</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* Unlink self from owning EState, if any */ 
</span>    <a href="execUtils.c.html#LN350"><span class='Ref_To_Local'>estate</span></a> <span class='Operator'>= </span><a href="execUtils.c.html#LN348"><span class='Ref_to_Parameter'>econtext</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN224"><span class='Ref_to_Member'>ecxt_estate</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execUtils.c.html#LN350"><span class='Ref_To_Local'>estate</span></a><span class='Parentheses'>) 
</span>        <a href="execUtils.c.html#LN350"><span class='Ref_To_Local'>estate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN460"><span class='Ref_to_Member'>es_exprcontexts</span></a> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN234"><span class='Ref_to_Proto'>list_delete_ptr</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN350"><span class='Ref_To_Local'>estate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN460"><span class='Ref_to_Member'>es_exprcontexts</span></a><span class='Delimiter'>, 
</span>                                                  <a href="execUtils.c.html#LN348"><span class='Ref_to_Parameter'>econtext</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* And delete the ExprContext node */ 
</span>    <a href="../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN348"><span class='Ref_to_Parameter'>econtext</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * ReScanExprContext 
 * 
 *      Reset an expression context in preparation for a rescan of its 
 *      plan node.  This requires calling any registered shutdown callbacks, 
 *      since any partially complete set-returning-functions must be canceled. 
 * 
 * Note we make no assumption about the caller's memory context. 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN375"></a><span class='Declare_Function'>ReScanExprContext</span><span class='Parentheses'>(</span><a href="../../include/nodes/execnodes.h.html#LN191"><span class='Ref_to_Struct'>ExprContext</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>econtext</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Comment_Multi_Line'>/* Call any registered callbacks */ 
</span>    <a href="execUtils.c.html#LN58"><span class='Ref_to_Proto'>ShutdownExprContext</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN375"><span class='Ref_to_Parameter'>econtext</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* And clean up the memory used */ 
</span>    <a href="../../include/utils/memutils.h.html#LN73"><span class='Ref_to_Proto'>MemoryContextReset</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN375"><span class='Ref_to_Parameter'>econtext</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN202"><span class='Ref_to_Member'>ecxt_per_tuple_memory</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Build a per-output-tuple ExprContext for an EState. 
 * 
 * This is normally invoked via GetPerTupleExprContext() macro, 
 * not directly. 
 */ 
</span><a href="../../include/nodes/execnodes.h.html#LN191"><span class='Ref_to_Struct'>ExprContext</span></a> <span class='Operator'>* 
</span><a name="LN390"></a><span class='Declare_Function'>MakePerTupleExprContext</span><span class='Parentheses'>(</span><a href="../../include/nodes/execnodes.h.html#LN402"><span class='Ref_to_Struct'>EState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>estate</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execUtils.c.html#LN390"><span class='Ref_to_Parameter'>estate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN471"><span class='Ref_to_Member'>es_per_tuple_exprcontext</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="execUtils.c.html#LN390"><span class='Ref_to_Parameter'>estate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN471"><span class='Ref_to_Member'>es_per_tuple_exprcontext</span></a> <span class='Operator'>= </span><a href="execUtils.c.html#LN216"><span class='Ref_to_Func'>CreateExprContext</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN390"><span class='Ref_to_Parameter'>estate</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="execUtils.c.html#LN390"><span class='Ref_to_Parameter'>estate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN471"><span class='Ref_to_Member'>es_per_tuple_exprcontext</span></a><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/* ---------------------------------------------------------------- 
 *               miscellaneous node-init support functions 
 * 
 * Note: all of these are expected to be called with CurrentMemoryContext 
 * equal to the per-query memory context. 
 * ---------------------------------------------------------------- 
 */ 
</span> 
<span class='Comment_Multi_Line'>/* ---------------- 
 *      ExecAssignExprContext 
 * 
 *      This initializes the ps_ExprContext field.  It is only necessary 
 *      to do this for nodes which use ExecQual or ExecProject 
 *      because those routines require an econtext. Other nodes that 
 *      don't have to evaluate expressions don't need to do this. 
 * ---------------- 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN417"></a><span class='Declare_Function'>ExecAssignExprContext</span><span class='Parentheses'>(</span><a href="../../include/nodes/execnodes.h.html#LN402"><span class='Ref_to_Struct'>EState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>estate</span><span class='Delimiter'>, </span><a href="../../include/nodes/execnodes.h.html#LN808"><span class='Ref_to_Struct'>PlanState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>planstate</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <a href="execUtils.c.html#LN417"><span class='Ref_to_Parameter'>planstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN842"><span class='Ref_to_Member'>ps_ExprContext</span></a> <span class='Operator'>= </span><a href="execUtils.c.html#LN216"><span class='Ref_to_Func'>CreateExprContext</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN417"><span class='Ref_to_Parameter'>estate</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* ---------------- 
 *      ExecAssignResultType 
 * ---------------- 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN427"></a><span class='Declare_Function'>ExecAssignResultType</span><span class='Parentheses'>(</span><a href="../../include/nodes/execnodes.h.html#LN808"><span class='Ref_to_Struct'>PlanState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>planstate</span><span class='Delimiter'>, </span><a href="../../include/access/tupdesc.h.html#LN70"><span class='Ref_to_Typedef'>TupleDesc</span></a> <span class='Declare_Parameter'>tupDesc</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN429"></a>    <a href="../../include/executor/tuptable.h.html#LN112"><span class='Ref_to_Struct'>TupleTableSlot</span></a> <span class='Operator'>*</span><span class='Declare_Local'>slot</span> <span class='Operator'>= </span><a href="execUtils.c.html#LN427"><span class='Ref_to_Parameter'>planstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN841"><span class='Ref_to_Member'>ps_ResultTupleSlot</span></a><span class='Delimiter'>; 
</span> 
    <a href="../../include/executor/tuptable.h.html#LN146"><span class='Ref_to_Proto'>ExecSetSlotDescriptor</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN429"><span class='Ref_To_Local'>slot</span></a><span class='Delimiter'>, </span><a href="execUtils.c.html#LN427"><span class='Ref_to_Parameter'>tupDesc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* ---------------- 
 *      ExecAssignResultTypeFromTL 
 * ---------------- 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN439"></a><span class='Declare_Function'>ExecAssignResultTypeFromTL</span><span class='Parentheses'>(</span><a href="../../include/nodes/execnodes.h.html#LN808"><span class='Ref_to_Struct'>PlanState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>planstate</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN441"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>hasoid</span><span class='Delimiter'>; 
</span><a name="LN442"></a>    <a href="../../include/access/tupdesc.h.html#LN70"><span class='Ref_to_Typedef'>TupleDesc</span></a>   <span class='Declare_Local'>tupDesc</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/executor/executor.h.html#LN187"><span class='Ref_to_Proto'>ExecContextForcesOids</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN439"><span class='Ref_to_Parameter'>planstate</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="execUtils.c.html#LN441"><span class='Ref_To_Local'>hasoid</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* context forces OID choice; hasoid is now set correctly */ 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* given free choice, don't leave space for OIDs in result tuples */ 
</span>        <a href="execUtils.c.html#LN441"><span class='Ref_To_Local'>hasoid</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * ExecTypeFromTL needs the parse-time representation of the tlist, not a 
     * list of ExprStates.  This is good because some plan nodes don't bother 
     * to set up planstate-&GT;targetlist ... 
     */ 
</span>    <a href="execUtils.c.html#LN442"><span class='Ref_To_Local'>tupDesc</span></a> <span class='Operator'>= </span><a href="../../include/executor/executor.h.html#LN405"><span class='Ref_to_Proto'>ExecTypeFromTL</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN439"><span class='Ref_to_Parameter'>planstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN812"><span class='Ref_to_Member'>plan</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/plannodes.h.html#LN143"><span class='Ref_to_Member'>targetlist</span></a><span class='Delimiter'>, </span><a href="execUtils.c.html#LN441"><span class='Ref_To_Local'>hasoid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="execUtils.c.html#LN426"><span class='Ref_to_Func'>ExecAssignResultType</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN439"><span class='Ref_to_Parameter'>planstate</span></a><span class='Delimiter'>, </span><a href="execUtils.c.html#LN442"><span class='Ref_To_Local'>tupDesc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end ExecAssignResultTypeFromTL &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* ---------------- 
 *      ExecGetResultType 
 * ---------------- 
 */ 
</span><a href="../../include/access/tupdesc.h.html#LN70"><span class='Ref_to_Typedef'>TupleDesc</span></a> 
<a name="LN468"></a><span class='Declare_Function'>ExecGetResultType</span><span class='Parentheses'>(</span><a href="../../include/nodes/execnodes.h.html#LN808"><span class='Ref_to_Struct'>PlanState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>planstate</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN470"></a>    <a href="../../include/executor/tuptable.h.html#LN112"><span class='Ref_to_Struct'>TupleTableSlot</span></a> <span class='Operator'>*</span><span class='Declare_Local'>slot</span> <span class='Operator'>= </span><a href="execUtils.c.html#LN468"><span class='Ref_to_Parameter'>planstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN841"><span class='Ref_to_Member'>ps_ResultTupleSlot</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="execUtils.c.html#LN470"><span class='Ref_To_Local'>slot</span></a><span class='Operator'>-&GT;</span><a href="../../include/executor/tuptable.h.html#LN120"><span class='Ref_to_Member'>tts_tupleDescriptor</span></a><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/* ---------------- 
 *      ExecAssignProjectionInfo 
 * 
 * forms the projection information from the node's targetlist 
 * 
 * Notes for inputDesc are same as for ExecBuildProjectionInfo: supply it 
 * for a relation-scan node, can pass NULL for upper-level nodes 
 * ---------------- 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN486"></a><span class='Declare_Function'>ExecAssignProjectionInfo</span><span class='Parentheses'>(</span><a href="../../include/nodes/execnodes.h.html#LN808"><span class='Ref_to_Struct'>PlanState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>planstate</span><span class='Delimiter'>, 
</span><a name="LN487"></a>                         <a href="../../include/access/tupdesc.h.html#LN70"><span class='Ref_to_Typedef'>TupleDesc</span></a> <span class='Declare_Parameter'>inputDesc</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <a href="execUtils.c.html#LN486"><span class='Ref_to_Parameter'>planstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN843"><span class='Ref_to_Member'>ps_ProjInfo</span></a> <span class='Operator'>= 
</span>        <a href="../../include/executor/executor.h.html#LN241"><span class='Ref_to_Proto'>ExecBuildProjectionInfo</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN486"><span class='Ref_to_Parameter'>planstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN812"><span class='Ref_to_Member'>plan</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/plannodes.h.html#LN143"><span class='Ref_to_Member'>targetlist</span></a><span class='Delimiter'>, 
</span>                                <a href="execUtils.c.html#LN486"><span class='Ref_to_Parameter'>planstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN842"><span class='Ref_to_Member'>ps_ExprContext</span></a><span class='Delimiter'>, 
</span>                                <a href="execUtils.c.html#LN486"><span class='Ref_to_Parameter'>planstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN841"><span class='Ref_to_Member'>ps_ResultTupleSlot</span></a><span class='Delimiter'>, 
</span>                                <a href="execUtils.c.html#LN486"><span class='Ref_to_Parameter'>planstate</span></a><span class='Delimiter'>, 
</span>                                <a href="execUtils.c.html#LN487"><span class='Ref_to_Parameter'>inputDesc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/* ---------------- 
 *      ExecFreeExprContext 
 * 
 * A plan node's ExprContext should be freed explicitly during executor 
 * shutdown because there may be shutdown callbacks to call.  (Other resources 
 * made by the above routines, such as projection info, don't need to be freed 
 * explicitly because they're just memory in the per-query memory context.) 
 * 
 * However ... there is no particular need to do it during ExecEndNode, 
 * because FreeExecutorState will free any remaining ExprContexts within 
 * the EState.  Letting FreeExecutorState do it allows the ExprContexts to 
 * be freed in reverse order of creation, rather than order of creation as 
 * will happen if we delete them here, which saves O(N^2) work in the list 
 * cleanup inside FreeExprContext. 
 * ---------------- 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN515"></a><span class='Declare_Function'>ExecFreeExprContext</span><span class='Parentheses'>(</span><a href="../../include/nodes/execnodes.h.html#LN808"><span class='Ref_to_Struct'>PlanState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>planstate</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Comment_Multi_Line'>/* 
     * Per above discussion, don't actually delete the ExprContext. We do 
     * unlink it from the plan node, though. 
     */ 
</span>    <a href="execUtils.c.html#LN515"><span class='Ref_to_Parameter'>planstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN842"><span class='Ref_to_Member'>ps_ExprContext</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* ---------------------------------------------------------------- 
 *      the following scan type support functions are for 
 *      those nodes which are stubborn and return tuples in 
 *      their Scan tuple slot instead of their Result tuple 
 *      slot..  luck fur us, these nodes do not do projections 
 *      so we don't have to worry about getting the ProjectionInfo 
 *      right for them...  -cim 6/3/91 
 * ---------------------------------------------------------------- 
 */ 
</span> 
<span class='Comment_Multi_Line'>/* ---------------- 
 *      ExecAssignScanType 
 * ---------------- 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN539"></a><span class='Declare_Function'>ExecAssignScanType</span><span class='Parentheses'>(</span><a href="../../include/nodes/execnodes.h.html#LN1055"><span class='Ref_to_Struct'>ScanState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>scanstate</span><span class='Delimiter'>, </span><a href="../../include/access/tupdesc.h.html#LN70"><span class='Ref_to_Typedef'>TupleDesc</span></a> <span class='Declare_Parameter'>tupDesc</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN541"></a>    <a href="../../include/executor/tuptable.h.html#LN112"><span class='Ref_to_Struct'>TupleTableSlot</span></a> <span class='Operator'>*</span><span class='Declare_Local'>slot</span> <span class='Operator'>= </span><a href="execUtils.c.html#LN539"><span class='Ref_to_Parameter'>scanstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN1060"><span class='Ref_to_Member'>ss_ScanTupleSlot</span></a><span class='Delimiter'>; 
</span> 
    <a href="../../include/executor/tuptable.h.html#LN146"><span class='Ref_to_Proto'>ExecSetSlotDescriptor</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN541"><span class='Ref_To_Local'>slot</span></a><span class='Delimiter'>, </span><a href="execUtils.c.html#LN539"><span class='Ref_to_Parameter'>tupDesc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* ---------------- 
 *      ExecAssignScanTypeFromOuterPlan 
 * ---------------- 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN551"></a><span class='Declare_Function'>ExecAssignScanTypeFromOuterPlan</span><span class='Parentheses'>(</span><a href="../../include/nodes/execnodes.h.html#LN1055"><span class='Ref_to_Struct'>ScanState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>scanstate</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN553"></a>    <a href="../../include/nodes/execnodes.h.html#LN808"><span class='Ref_to_Struct'>PlanState</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>outerPlan</span><span class='Delimiter'>; 
</span><a name="LN554"></a>    <a href="../../include/access/tupdesc.h.html#LN70"><span class='Ref_to_Typedef'>TupleDesc</span></a>   <span class='Declare_Local'>tupDesc</span><span class='Delimiter'>; 
</span> 
    <a href="execUtils.c.html#LN553"><span class='Ref_To_Local'>outerPlan</span></a> <span class='Operator'>= </span><a href="../../include/nodes/execnodes.h.html#LN854"><span class='Ref_to_Macro'>outerPlanState</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN551"><span class='Ref_to_Parameter'>scanstate</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="execUtils.c.html#LN554"><span class='Ref_To_Local'>tupDesc</span></a> <span class='Operator'>= </span><a href="execUtils.c.html#LN467"><span class='Ref_to_Func'>ExecGetResultType</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN553"><span class='Ref_To_Local'>outerPlan</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../include/executor/executor.h.html#LN477"><span class='Ref_to_Proto'>ExecAssignScanType</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN551"><span class='Ref_to_Parameter'>scanstate</span></a><span class='Delimiter'>, </span><a href="execUtils.c.html#LN554"><span class='Ref_To_Local'>tupDesc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/* ---------------------------------------------------------------- 
 *                Scan node support 
 * ---------------------------------------------------------------- 
 */ 
</span> 
<span class='Comment_Multi_Line'>/* ---------------------------------------------------------------- 
 *      ExecRelationIsTargetRelation 
 * 
 *      Detect whether a relation (identified by rangetable index) 
 *      is one of the target relations of the query. 
 * ---------------------------------------------------------------- 
 */ 
</span><span class='Keyword'>bool 
</span><a name="LN576"></a><span class='Declare_Function'>ExecRelationIsTargetRelation</span><span class='Parentheses'>(</span><a href="../../include/nodes/execnodes.h.html#LN402"><span class='Ref_to_Struct'>EState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>estate</span><span class='Delimiter'>, </span><a href="../../include/c.h.html#LN364"><span class='Ref_to_Typedef'>Index</span></a> <span class='Declare_Parameter'>scanrelid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN578"></a>    <a href="../../include/nodes/execnodes.h.html#LN369"><span class='Ref_to_Struct'>ResultRelInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>resultRelInfos</span><span class='Delimiter'>; 
</span><a name="LN579"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <a href="execUtils.c.html#LN578"><span class='Ref_To_Local'>resultRelInfos</span></a> <span class='Operator'>= </span><a href="execUtils.c.html#LN576"><span class='Ref_to_Parameter'>estate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN420"><span class='Ref_to_Member'>es_result_relations</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="execUtils.c.html#LN579"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="execUtils.c.html#LN579"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="execUtils.c.html#LN576"><span class='Ref_to_Parameter'>estate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN421"><span class='Ref_to_Member'>es_num_result_relations</span></a><span class='Delimiter'>; </span><a href="execUtils.c.html#LN579"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execUtils.c.html#LN578"><span class='Ref_To_Local'>resultRelInfos</span></a><span class='Delimiter'>[</span><a href="execUtils.c.html#LN579"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../include/nodes/execnodes.h.html#LN372"><span class='Ref_to_Member'>ri_RangeTableIndex</span></a> <span class='Operator'>== </span><a href="execUtils.c.html#LN576"><span class='Ref_to_Parameter'>scanrelid</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* ---------------------------------------------------------------- 
 *      ExecOpenScanRelation 
 * 
 *      Open the heap relation to be scanned by a base-level scan plan node. 
 *      This should be called during the node's ExecInit routine. 
 * 
 * By default, this acquires AccessShareLock on the relation.  However, 
 * if the relation was already locked by InitPlan, we don't need to acquire 
 * any additional lock.  This saves trips to the shared lock manager. 
 * ---------------------------------------------------------------- 
 */ 
</span><a href="../../include/utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a> 
<a name="LN602"></a><span class='Declare_Function'>ExecOpenScanRelation</span><span class='Parentheses'>(</span><a href="../../include/nodes/execnodes.h.html#LN402"><span class='Ref_to_Struct'>EState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>estate</span><span class='Delimiter'>, </span><a href="../../include/c.h.html#LN364"><span class='Ref_to_Typedef'>Index</span></a> <span class='Declare_Parameter'>scanrelid</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>eflags</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN604"></a>    <a href="../../include/utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a>    <span class='Declare_Local'>rel</span><span class='Delimiter'>; 
</span><a name="LN605"></a>    <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>reloid</span><span class='Delimiter'>; 
</span><a name="LN606"></a>    <a href="../../include/storage/lockdefs.h.html#LN25"><span class='Ref_to_Typedef'>LOCKMODE</span></a>    <span class='Declare_Local'>lockmode</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Determine the lock type we need.  First, scan to see if target relation 
     * is a result relation.  If not, check if it's a FOR UPDATE/FOR SHARE 
     * relation.  In either of those cases, we got the lock already. 
     */ 
</span>    <a href="execUtils.c.html#LN606"><span class='Ref_To_Local'>lockmode</span></a> <span class='Operator'>= </span><a href="../../include/storage/lockdefs.h.html#LN35"><span class='Ref_to_Const'>AccessShareLock</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/executor/executor.h.html#LN480"><span class='Ref_to_Proto'>ExecRelationIsTargetRelation</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN602"><span class='Ref_to_Parameter'>estate</span></a><span class='Delimiter'>, </span><a href="execUtils.c.html#LN602"><span class='Ref_to_Parameter'>scanrelid</span></a><span class='Parentheses'>))</span> 
        <a href="execUtils.c.html#LN606"><span class='Ref_To_Local'>lockmode</span></a> <span class='Operator'>= </span><a href="../../include/storage/lockdefs.h.html#LN33"><span class='Ref_to_Const'>NoLock</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Keep this check in sync with InitPlan! */ 
</span><a name="LN619"></a>        <a href="../../include/nodes/execnodes.h.html#LN508"><span class='Ref_to_Struct'>ExecRowMark</span></a> <span class='Operator'>*</span><span class='Declare_Local'>erm</span> <span class='Operator'>= </span><a href="../../include/executor/executor.h.html#LN193"><span class='Ref_to_Proto'>ExecFindRowMark</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN602"><span class='Ref_to_Parameter'>estate</span></a><span class='Delimiter'>, </span><a href="execUtils.c.html#LN602"><span class='Ref_to_Parameter'>scanrelid</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execUtils.c.html#LN619"><span class='Ref_To_Local'>erm</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL </span><span class='Operator'>&& </span><a href="execUtils.c.html#LN619"><span class='Ref_To_Local'>erm</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN510"><span class='Ref_to_Member'>relation</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <a href="execUtils.c.html#LN606"><span class='Ref_To_Local'>lockmode</span></a> <span class='Operator'>= </span><a href="../../include/storage/lockdefs.h.html#LN33"><span class='Ref_to_Const'>NoLock</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* Open the relation and acquire lock as needed */ 
</span>    <a href="execUtils.c.html#LN605"><span class='Ref_To_Local'>reloid</span></a> <span class='Operator'>= </span><a href="../../include/parser/parsetree.h.html#LN40"><span class='Ref_to_Macro'>getrelid</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN602"><span class='Ref_to_Parameter'>scanrelid</span></a><span class='Delimiter'>, </span><a href="execUtils.c.html#LN602"><span class='Ref_to_Parameter'>estate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN410"><span class='Ref_to_Member'>es_range_table</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="execUtils.c.html#LN604"><span class='Ref_To_Local'>rel</span></a> <span class='Operator'>= </span><a href="../../include/access/heapam.h.html#LN91"><span class='Ref_to_Proto'>heap_open</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN605"><span class='Ref_To_Local'>reloid</span></a><span class='Delimiter'>, </span><a href="execUtils.c.html#LN606"><span class='Ref_To_Local'>lockmode</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Complain if we're attempting a scan of an unscannable relation, except 
     * when the query won't actually be run.  This is a slightly klugy place 
     * to do this, perhaps, but there is no better place. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="execUtils.c.html#LN602"><span class='Ref_to_Parameter'>eflags</span></a> <span class='Operator'>& </span><span class='Parentheses'>(</span><a href="../../include/executor/executor.h.html#LN57"><span class='Ref_to_Const'>EXEC_FLAG_EXPLAIN_ONLY</span></a> <span class='Operator'>| </span><a href="../../include/executor/executor.h.html#LN64"><span class='Ref_to_Const'>EXEC_FLAG_WITH_NO_DATA</span></a><span class='Parentheses'>))</span> <span class='Operator'>== </span><span class='Number'>0</span> <span class='Operator'>&& 
</span>        <span class='Operator'>!</span><a href="../../include/utils/rel.h.html#LN544"><span class='Ref_to_Macro'>RelationIsScannable</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN604"><span class='Ref_To_Local'>rel</span></a><span class='Parentheses'>))</span> 
        <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_OBJECT_NOT_IN_PREREQUISITE_STATE<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"materialized view \"%s\" has not been populated"</span><span class='Delimiter'>, 
</span>                        <a href="../../include/utils/rel.h.html#LN436"><span class='Ref_to_Macro'>RelationGetRelationName</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN604"><span class='Ref_To_Local'>rel</span></a><span class='Parentheses'>))</span><span class='Delimiter'>, 
</span>                 <a href="../utils/error/elog.c.html#LN985"><span class='Ref_to_Func'>errhint</span></a><span class='Parentheses'>(</span><span class='String'>"Use the REFRESH MATERIALIZED VIEW command."</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="execUtils.c.html#LN604"><span class='Ref_To_Local'>rel</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end ExecOpenScanRelation &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* ---------------------------------------------------------------- 
 *      ExecCloseScanRelation 
 * 
 *      Close the heap relation scanned by a base-level scan plan node. 
 *      This should be called during the node's ExecEnd routine. 
 * 
 * Currently, we do not release the lock acquired by ExecOpenScanRelation. 
 * This lock should be held till end of transaction.  (There is a faction 
 * that considers this too much locking, however.) 
 * 
 * If we did want to release the lock, we'd have to repeat the logic in 
 * ExecOpenScanRelation in order to figure out what to release. 
 * ---------------------------------------------------------------- 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN660"></a><span class='Declare_Function'>ExecCloseScanRelation</span><span class='Parentheses'>(</span><a href="../../include/utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a> <span class='Declare_Parameter'>scanrel</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <a href="../../include/access/heapam.h.html#LN96"><span class='Ref_to_Macro'>heap_close</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN660"><span class='Ref_to_Parameter'>scanrel</span></a><span class='Delimiter'>, </span><a href="../../include/storage/lockdefs.h.html#LN33"><span class='Ref_to_Const'>NoLock</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * UpdateChangedParamSet 
 *      Add changed parameters to a plan node's chgParam set 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN670"></a><span class='Declare_Function'>UpdateChangedParamSet</span><span class='Parentheses'>(</span><a href="../../include/nodes/execnodes.h.html#LN808"><span class='Ref_to_Struct'>PlanState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><a href="../../include/nodes/bitmapset.h.html#LN36"><span class='Ref_to_Struct'>Bitmapset</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>newchg</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN672"></a>    <a href="../../include/nodes/bitmapset.h.html#LN36"><span class='Ref_to_Struct'>Bitmapset</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>parmset</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * The plan node only depends on params listed in its allParam set. Don't 
     * include anything else into its chgParam set. 
     */ 
</span>    <a href="execUtils.c.html#LN672"><span class='Ref_To_Local'>parmset</span></a> <span class='Operator'>= </span><a href="../../include/nodes/bitmapset.h.html#LN71"><span class='Ref_to_Proto'>bms_intersect</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN670"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN812"><span class='Ref_to_Member'>plan</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/plannodes.h.html#LN162"><span class='Ref_to_Member'>allParam</span></a><span class='Delimiter'>, </span><a href="execUtils.c.html#LN670"><span class='Ref_to_Parameter'>newchg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Keep node-&GT;chgParam == NULL if there's not actually any members; this 
     * allows the simplest possible tests in executor node files. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../include/nodes/bitmapset.h.html#LN85"><span class='Ref_to_Proto'>bms_is_empty</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN672"><span class='Ref_To_Local'>parmset</span></a><span class='Parentheses'>))</span> 
        <a href="execUtils.c.html#LN670"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN836"><span class='Ref_to_Member'>chgParam</span></a> <span class='Operator'>= </span><a href="../../include/nodes/bitmapset.h.html#LN94"><span class='Ref_to_Proto'>bms_join</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN670"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN836"><span class='Ref_to_Member'>chgParam</span></a><span class='Delimiter'>, </span><a href="execUtils.c.html#LN672"><span class='Ref_To_Local'>parmset</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="../../include/nodes/bitmapset.h.html#LN68"><span class='Ref_to_Proto'>bms_free</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN672"><span class='Ref_To_Local'>parmset</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end UpdateChangedParamSet &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * executor_errposition 
 *      Report an execution-time cursor position, if possible. 
 * 
 * This is expected to be used within an ereport() call.  The return value 
 * is a dummy (always 0, in fact). 
 * 
 * The locations stored in parsetrees are byte offsets into the source string. 
 * We have to convert them to 1-based character indexes for reporting to 
 * clients.  (We do things this way to avoid unnecessary overhead in the 
 * normal non-error case: computing character indexes would be much more 
 * expensive than storing token offsets.) 
 */ 
</span><span class='Keyword'>int 
</span><a name="LN704"></a><span class='Declare_Function'>executor_errposition</span><span class='Parentheses'>(</span><a href="../../include/nodes/execnodes.h.html#LN402"><span class='Ref_to_Struct'>EState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>estate</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>location</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN706"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>pos</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* No-op if location was not provided */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execUtils.c.html#LN704"><span class='Ref_to_Parameter'>location</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* Can't do anything if source text is not available */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execUtils.c.html#LN704"><span class='Ref_to_Parameter'>estate</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL </span><span class='Operator'>|| </span><a href="execUtils.c.html#LN704"><span class='Ref_to_Parameter'>estate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN412"><span class='Ref_to_Member'>es_sourceText</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* Convert offset to character number */ 
</span>    <a href="execUtils.c.html#LN706"><span class='Ref_To_Local'>pos</span></a> <span class='Operator'>= </span><a href="../../include/mb/pg_wchar.h.html#LN529"><span class='Ref_to_Proto'>pg_mbstrlen_with_len</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN704"><span class='Ref_to_Parameter'>estate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN412"><span class='Ref_to_Member'>es_sourceText</span></a><span class='Delimiter'>, </span><a href="execUtils.c.html#LN704"><span class='Ref_to_Parameter'>location</span></a><span class='Parentheses'>) </span><span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* And pass it to the ereport mechanism */ 
</span>    <span class='Control'>return</span> <a href="../utils/error/elog.c.html#LN1123"><span class='Ref_to_Func'>errposition</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN706"><span class='Ref_To_Local'>pos</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Register a shutdown callback in an ExprContext. 
 * 
 * Shutdown callbacks will be called (in reverse order of registration) 
 * when the ExprContext is deleted or rescanned.  This provides a hook 
 * for functions called in the context to do any cleanup needed --- it's 
 * particularly useful for functions returning sets.  Note that the 
 * callback will *not* be called in the event that execution is aborted 
 * by an error. 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN731"></a><span class='Declare_Function'>RegisterExprContextCallback</span><span class='Parentheses'>(</span><a href="../../include/nodes/execnodes.h.html#LN191"><span class='Ref_to_Struct'>ExprContext</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>econtext</span><span class='Delimiter'>, 
</span><a name="LN732"></a>                            <a href="../../include/nodes/execnodes.h.html#LN159"><span class='Ref_to_Typedef'>ExprContextCallbackFunction</span></a> <span class='Declare_Parameter'>function</span><span class='Delimiter'>, 
</span><a name="LN733"></a>                            <a href="../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Declare_Parameter'>arg</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN735"></a>    <a href="../../include/nodes/execnodes.h.html#LN161"><span class='Ref_to_Struct'>ExprContext_CB</span></a> <span class='Operator'>*</span><span class='Declare_Local'>ecxt_callback</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Save the info in appropriate memory context */ 
</span>    <a href="execUtils.c.html#LN735"><span class='Ref_To_Local'>ecxt_callback</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/execnodes.h.html#LN161"><span class='Ref_to_Struct'>ExprContext_CB</span></a> <span class='Operator'>*</span><span class='Parentheses'>) 
</span>        <a href="../../include/utils/palloc.h.html#LN70"><span class='Ref_to_Proto'>MemoryContextAlloc</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN731"><span class='Ref_to_Parameter'>econtext</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN201"><span class='Ref_to_Member'>ecxt_per_query_memory</span></a><span class='Delimiter'>, 
</span>                           <span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/nodes/execnodes.h.html#LN161"><span class='Ref_to_Struct'>ExprContext_CB</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="execUtils.c.html#LN735"><span class='Ref_To_Local'>ecxt_callback</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN164"><span class='Ref_to_Member'>function</span></a> <span class='Operator'>= </span><a href="execUtils.c.html#LN732"><span class='Ref_to_Parameter'>function</span></a><span class='Delimiter'>; 
</span>    <a href="execUtils.c.html#LN735"><span class='Ref_To_Local'>ecxt_callback</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN165"><span class='Ref_to_Member'>arg</span></a> <span class='Operator'>= </span><a href="execUtils.c.html#LN733"><span class='Ref_to_Parameter'>arg</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* link to front of list for appropriate execution order */ 
</span>    <a href="execUtils.c.html#LN735"><span class='Ref_To_Local'>ecxt_callback</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN163"><span class='Ref_to_Member'>next</span></a> <span class='Operator'>= </span><a href="execUtils.c.html#LN731"><span class='Ref_to_Parameter'>econtext</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN227"><span class='Ref_to_Member'>ecxt_callbacks</span></a><span class='Delimiter'>; 
</span>    <a href="execUtils.c.html#LN731"><span class='Ref_to_Parameter'>econtext</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN227"><span class='Ref_to_Member'>ecxt_callbacks</span></a> <span class='Operator'>= </span><a href="execUtils.c.html#LN735"><span class='Ref_To_Local'>ecxt_callback</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Deregister a shutdown callback in an ExprContext. 
 * 
 * Any list entries matching the function and arg will be removed. 
 * This can be used if it's no longer necessary to call the callback. 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN757"></a><span class='Declare_Function'>UnregisterExprContextCallback</span><span class='Parentheses'>(</span><a href="../../include/nodes/execnodes.h.html#LN191"><span class='Ref_to_Struct'>ExprContext</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>econtext</span><span class='Delimiter'>, 
</span><a name="LN758"></a>                              <a href="../../include/nodes/execnodes.h.html#LN159"><span class='Ref_to_Typedef'>ExprContextCallbackFunction</span></a> <span class='Declare_Parameter'>function</span><span class='Delimiter'>, 
</span><a name="LN759"></a>                              <a href="../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Declare_Parameter'>arg</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN761"></a>    <a href="../../include/nodes/execnodes.h.html#LN161"><span class='Ref_to_Struct'>ExprContext_CB</span></a> <span class='Operator'>**</span><span class='Declare_Local'>prev_callback</span><span class='Delimiter'>; 
</span><a name="LN762"></a>    <a href="../../include/nodes/execnodes.h.html#LN161"><span class='Ref_to_Struct'>ExprContext_CB</span></a> <span class='Operator'>*</span><span class='Declare_Local'>ecxt_callback</span><span class='Delimiter'>; 
</span> 
    <a href="execUtils.c.html#LN761"><span class='Ref_To_Local'>prev_callback</span></a> <span class='Operator'>= &</span><a href="execUtils.c.html#LN757"><span class='Ref_to_Parameter'>econtext</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN227"><span class='Ref_to_Member'>ecxt_callbacks</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>while</span> <span class='Parentheses'>((</span><a href="execUtils.c.html#LN762"><span class='Ref_To_Local'>ecxt_callback</span></a> <span class='Operator'>= *</span><a href="execUtils.c.html#LN761"><span class='Ref_To_Local'>prev_callback</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execUtils.c.html#LN762"><span class='Ref_To_Local'>ecxt_callback</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN164"><span class='Ref_to_Member'>function</span></a> <span class='Operator'>== </span><a href="execUtils.c.html#LN758"><span class='Ref_to_Parameter'>function</span></a> <span class='Operator'>&& </span><a href="execUtils.c.html#LN762"><span class='Ref_To_Local'>ecxt_callback</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN165"><span class='Ref_to_Member'>arg</span></a> <span class='Operator'>== </span><a href="execUtils.c.html#LN759"><span class='Ref_to_Parameter'>arg</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Operator'>*</span><a href="execUtils.c.html#LN761"><span class='Ref_To_Local'>prev_callback</span></a> <span class='Operator'>= </span><a href="execUtils.c.html#LN762"><span class='Ref_To_Local'>ecxt_callback</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN163"><span class='Ref_to_Member'>next</span></a><span class='Delimiter'>; 
</span>            <a href="../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN762"><span class='Ref_To_Local'>ecxt_callback</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
            <a href="execUtils.c.html#LN761"><span class='Ref_To_Local'>prev_callback</span></a> <span class='Operator'>= &</span><a href="execUtils.c.html#LN762"><span class='Ref_To_Local'>ecxt_callback</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN163"><span class='Ref_to_Member'>next</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
}</span><span class='Auto_Annotations'> &laquo; end UnregisterExprContextCallback &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Call all the shutdown callbacks registered in an ExprContext. 
 * 
 * The callback list is emptied (important in case this is only a rescan 
 * reset, and not deletion of the ExprContext). 
 * 
 * If isCommit is false, just clean the callback list but don't call 'em. 
 * (See comment for FreeExprContext.) 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN788"></a><span class='Declare_Function'>ShutdownExprContext</span><span class='Parentheses'>(</span><a href="../../include/nodes/execnodes.h.html#LN191"><span class='Ref_to_Struct'>ExprContext</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>econtext</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>isCommit</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN790"></a>    <a href="../../include/nodes/execnodes.h.html#LN161"><span class='Ref_to_Struct'>ExprContext_CB</span></a> <span class='Operator'>*</span><span class='Declare_Local'>ecxt_callback</span><span class='Delimiter'>; 
</span><a name="LN791"></a>    <a href="../../include/utils/palloc.h.html#LN35"><span class='Ref_to_Typedef'>MemoryContext</span></a> <span class='Declare_Local'>oldcontext</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Fast path in normal case where there's nothing to do. */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execUtils.c.html#LN788"><span class='Ref_to_Parameter'>econtext</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN227"><span class='Ref_to_Member'>ecxt_callbacks</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Call the callbacks in econtext's per-tuple context.  This ensures that 
     * any memory they might leak will get cleaned up. 
     */ 
</span>    <a href="execUtils.c.html#LN791"><span class='Ref_To_Local'>oldcontext</span></a> <span class='Operator'>= </span><a href="../../include/utils/palloc.h.html#LN107"><span class='Ref_to_Func'>MemoryContextSwitchTo</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN788"><span class='Ref_to_Parameter'>econtext</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN202"><span class='Ref_to_Member'>ecxt_per_tuple_memory</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Call each callback function in reverse registration order. 
     */ 
</span>    <span class='Control'>while</span> <span class='Parentheses'>((</span><a href="execUtils.c.html#LN790"><span class='Ref_To_Local'>ecxt_callback</span></a> <span class='Operator'>= </span><a href="execUtils.c.html#LN788"><span class='Ref_to_Parameter'>econtext</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN227"><span class='Ref_to_Member'>ecxt_callbacks</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="execUtils.c.html#LN788"><span class='Ref_to_Parameter'>econtext</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN227"><span class='Ref_to_Member'>ecxt_callbacks</span></a> <span class='Operator'>= </span><a href="execUtils.c.html#LN790"><span class='Ref_To_Local'>ecxt_callback</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN163"><span class='Ref_to_Member'>next</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execUtils.c.html#LN788"><span class='Ref_to_Parameter'>isCommit</span></a><span class='Parentheses'>) 
</span>            <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="execUtils.c.html#LN790"><span class='Ref_To_Local'>ecxt_callback</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN164"><span class='Ref_to_Member'>function</span></a><span class='Parentheses'>) (</span><a href="execUtils.c.html#LN790"><span class='Ref_To_Local'>ecxt_callback</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN165"><span class='Ref_to_Member'>arg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN790"><span class='Ref_To_Local'>ecxt_callback</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../include/utils/palloc.h.html#LN107"><span class='Ref_to_Func'>MemoryContextSwitchTo</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN791"><span class='Ref_To_Local'>oldcontext</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end ShutdownExprContext &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * ExecLockNonLeafAppendTables 
 * 
 * Locks, if necessary, the tables indicated by the RT indexes contained in 
 * the partitioned_rels list.  These are the non-leaf tables in the partition 
 * tree controlled by a given Append or MergeAppend node. 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN825"></a><span class='Declare_Function'>ExecLockNonLeafAppendTables</span><span class='Parentheses'>(</span><a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>partitioned_rels</span><span class='Delimiter'>, </span><a href="../../include/nodes/execnodes.h.html#LN402"><span class='Ref_to_Struct'>EState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>estate</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN827"></a>    <a href="../../include/nodes/plannodes.h.html#LN40"><span class='Ref_to_Struct'>PlannedStmt</span></a> <span class='Operator'>*</span><span class='Declare_Local'>stmt</span> <span class='Operator'>= </span><a href="execUtils.c.html#LN825"><span class='Ref_to_Parameter'>estate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN411"><span class='Ref_to_Member'>es_plannedstmt</span></a><span class='Delimiter'>; 
</span><a name="LN828"></a>    <a href="../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc</span><span class='Delimiter'>; 
</span> 
    <a href="../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN828"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="execUtils.c.html#LN825"><span class='Ref_to_Parameter'>partitioned_rels</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN832"></a>        <a href="../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>l</span><span class='Delimiter'>; 
</span><a name="LN833"></a>        <a href="../../include/c.h.html#LN364"><span class='Ref_to_Typedef'>Index</span></a>       <span class='Declare_Local'>rti</span> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN106"><span class='Ref_to_Macro'>lfirst_int</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN828"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN834"></a>        <span class='Keyword'>bool</span>        <span class='Declare_Local'>is_result_rel</span> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span><a name="LN835"></a>        <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>relid</span> <span class='Operator'>= </span><a href="../../include/parser/parsetree.h.html#LN40"><span class='Ref_to_Macro'>getrelid</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN833"><span class='Ref_To_Local'>rti</span></a><span class='Delimiter'>, </span><a href="execUtils.c.html#LN825"><span class='Ref_to_Parameter'>estate</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/execnodes.h.html#LN410"><span class='Ref_to_Member'>es_range_table</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* If this is a result relation, already locked in InitPlan */ 
</span>        <a href="../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN832"><span class='Ref_To_Local'>l</span></a><span class='Delimiter'>, </span><a href="execUtils.c.html#LN827"><span class='Ref_To_Local'>stmt</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/plannodes.h.html#LN71"><span class='Ref_to_Member'>nonleafResultRelations</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execUtils.c.html#LN833"><span class='Ref_To_Local'>rti</span></a> <span class='Operator'>== </span><a href="../../include/nodes/pg_list.h.html#LN106"><span class='Ref_to_Macro'>lfirst_int</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN832"><span class='Ref_To_Local'>l</span></a><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span>                <a href="execUtils.c.html#LN834"><span class='Ref_To_Local'>is_result_rel</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Not a result relation; check if there is a RowMark that requires 
         * taking a RowShareLock on this rel. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="execUtils.c.html#LN834"><span class='Ref_To_Local'>is_result_rel</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN853"></a>            <a href="../../include/nodes/plannodes.h.html#LN1002"><span class='Ref_to_Struct'>PlanRowMark</span></a> <span class='Operator'>*</span><span class='Declare_Local'>rc</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
            <a href="../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN832"><span class='Ref_To_Local'>l</span></a><span class='Delimiter'>, </span><a href="execUtils.c.html#LN827"><span class='Ref_To_Local'>stmt</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/plannodes.h.html#LN85"><span class='Ref_to_Member'>rowMarks</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(((</span><a href="../../include/nodes/plannodes.h.html#LN1002"><span class='Ref_to_Struct'>PlanRowMark</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN832"><span class='Ref_To_Local'>l</span></a><span class='Parentheses'>))</span><span class='Operator'>-&GT;</span>rti <span class='Operator'>== </span><a href="execUtils.c.html#LN833"><span class='Ref_To_Local'>rti</span></a><span class='Parentheses'>)</span> 
                <span class='Delimiter'>{ 
</span>                    <a href="execUtils.c.html#LN853"><span class='Ref_To_Local'>rc</span></a> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN832"><span class='Ref_To_Local'>l</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>            <span class='Delimiter'>} 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execUtils.c.html#LN853"><span class='Ref_To_Local'>rc</span></a> <span class='Operator'>&& </span><a href="../../include/nodes/plannodes.h.html#LN961"><span class='Ref_to_Macro'>RowMarkRequiresRowShareLock</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN853"><span class='Ref_To_Local'>rc</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/plannodes.h.html#LN1008"><span class='Ref_to_Member'>markType</span></a><span class='Parentheses'>))</span> 
                <a href="../../include/storage/lmgr.h.html#LN39"><span class='Ref_to_Proto'>LockRelationOid</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN835"><span class='Ref_To_Local'>relid</span></a><span class='Delimiter'>, </span><a href="../../include/storage/lockdefs.h.html#LN36"><span class='Ref_to_Const'>RowShareLock</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
                <a href="../../include/storage/lmgr.h.html#LN39"><span class='Ref_to_Proto'>LockRelationOid</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN835"><span class='Ref_To_Local'>relid</span></a><span class='Delimiter'>, </span><a href="../../include/storage/lockdefs.h.html#LN35"><span class='Ref_to_Const'>AccessShareLock</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
}</span><span class='Auto_Annotations'> &laquo; end ExecLockNonLeafAppendTables &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 *      GetAttributeByName 
 *      GetAttributeByNum 
 * 
 *      These functions return the value of the requested attribute 
 *      out of the given tuple Datum. 
 *      C functions which take a tuple as an argument are expected 
 *      to use these.  Ex: overpaid(EMP) might call GetAttributeByNum(). 
 *      Note: these are actually rather slow because they do a typcache 
 *      lookup on each call. 
 */ 
</span><a href="../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN884"></a><span class='Declare_Function'>GetAttributeByName</span><span class='Parentheses'>(</span><a href="../../include/access/htup.h.html#LN22"><span class='Ref_to_Typedef'>HeapTupleHeader</span></a> <span class='Declare_Parameter'>tuple</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>attname</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Declare_Parameter'>isNull</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN886"></a>    <a href="../../include/access/attnum.h.html#LN20"><span class='Ref_to_Typedef'>AttrNumber</span></a>  <span class='Declare_Local'>attrno</span><span class='Delimiter'>; 
</span><a name="LN887"></a>    <a href="../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>       <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span><a name="LN888"></a>    <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>tupType</span><span class='Delimiter'>; 
</span><a name="LN889"></a>    <a href="../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>tupTypmod</span><span class='Delimiter'>; 
</span><a name="LN890"></a>    <a href="../../include/access/tupdesc.h.html#LN70"><span class='Ref_to_Typedef'>TupleDesc</span></a>   <span class='Declare_Local'>tupDesc</span><span class='Delimiter'>; 
</span><a name="LN891"></a>    <a href="../../include/access/htup.h.html#LN61"><span class='Ref_to_Struct'>HeapTupleData</span></a> <span class='Declare_Local'>tmptup</span><span class='Delimiter'>; 
</span><a name="LN892"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execUtils.c.html#LN884"><span class='Ref_to_Parameter'>attname</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"invalid attribute name"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execUtils.c.html#LN884"><span class='Ref_to_Parameter'>isNull</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"a NULL isNull pointer was passed"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execUtils.c.html#LN884"><span class='Ref_to_Parameter'>tuple</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Kinda bogus but compatible with old behavior... */ 
</span>        <span class='Operator'>*</span><a href="execUtils.c.html#LN884"><span class='Ref_to_Parameter'>isNull</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Parentheses'>(</span><a href="../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a><span class='Parentheses'>) </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="execUtils.c.html#LN888"><span class='Ref_To_Local'>tupType</span></a> <span class='Operator'>= </span><a href="../../include/access/htup_details.h.html#LN444"><span class='Ref_to_Macro'>HeapTupleHeaderGetTypeId</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN884"><span class='Ref_to_Parameter'>tuple</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="execUtils.c.html#LN889"><span class='Ref_To_Local'>tupTypmod</span></a> <span class='Operator'>= </span><a href="../../include/access/htup_details.h.html#LN454"><span class='Ref_to_Macro'>HeapTupleHeaderGetTypMod</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN884"><span class='Ref_to_Parameter'>tuple</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="execUtils.c.html#LN890"><span class='Ref_To_Local'>tupDesc</span></a> <span class='Operator'>= </span><a href="../../include/utils/typcache.h.html#LN151"><span class='Ref_to_Proto'>lookup_rowtype_tupdesc</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN888"><span class='Ref_To_Local'>tupType</span></a><span class='Delimiter'>, </span><a href="execUtils.c.html#LN889"><span class='Ref_To_Local'>tupTypmod</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="execUtils.c.html#LN886"><span class='Ref_To_Local'>attrno</span></a> <span class='Operator'>= </span><a href="../../include/access/attnum.h.html#LN22"><span class='Ref_to_Const'>InvalidAttrNumber</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="execUtils.c.html#LN892"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="execUtils.c.html#LN892"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="execUtils.c.html#LN890"><span class='Ref_To_Local'>tupDesc</span></a><span class='Operator'>-&GT;</span><a href="../../include/access/tupdesc.h.html#LN72"><span class='Ref_to_Member'>natts</span></a><span class='Delimiter'>; </span><a href="execUtils.c.html#LN892"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/utils/builtins.h.html#LN41"><span class='Ref_to_Proto'>namestrcmp</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="execUtils.c.html#LN890"><span class='Ref_To_Local'>tupDesc</span></a><span class='Operator'>-&GT;</span><a href="../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="execUtils.c.html#LN892"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attname<span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="execUtils.c.html#LN884"><span class='Ref_to_Parameter'>attname</span></a><span class='Parentheses'>)</span> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <a href="execUtils.c.html#LN886"><span class='Ref_To_Local'>attrno</span></a> <span class='Operator'>= </span><a href="execUtils.c.html#LN890"><span class='Ref_To_Local'>tupDesc</span></a><span class='Operator'>-&GT;</span><a href="../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="execUtils.c.html#LN892"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attnum<span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execUtils.c.html#LN886"><span class='Ref_To_Local'>attrno</span></a> <span class='Operator'>== </span><a href="../../include/access/attnum.h.html#LN22"><span class='Ref_to_Const'>InvalidAttrNumber</span></a><span class='Parentheses'>) 
</span>        <a href="../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"attribute \"%s\" does not exist"</span><span class='Delimiter'>, </span><a href="execUtils.c.html#LN884"><span class='Ref_to_Parameter'>attname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * heap_getattr needs a HeapTuple not a bare HeapTupleHeader.  We set all 
     * the fields in the struct just in case user tries to inspect system 
     * columns. 
     */ 
</span>    <a href="execUtils.c.html#LN891"><span class='Ref_To_Local'>tmptup</span></a><span class='Operator'>.</span><a href="../../include/access/htup.h.html#LN63"><span class='Ref_to_Member'>t_len</span></a> <span class='Operator'>= </span><a href="../../include/access/htup_details.h.html#LN438"><span class='Ref_to_Macro'>HeapTupleHeaderGetDatumLength</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN884"><span class='Ref_to_Parameter'>tuple</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../include/storage/itemptr.h.html#LN148"><span class='Ref_to_Macro'>ItemPointerSetInvalid</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="execUtils.c.html#LN891"><span class='Ref_To_Local'>tmptup</span></a><span class='Operator'>.</span><a href="../../include/access/htup.h.html#LN64"><span class='Ref_to_Member'>t_self</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="execUtils.c.html#LN891"><span class='Ref_To_Local'>tmptup</span></a><span class='Operator'>.</span><a href="../../include/access/htup.h.html#LN65"><span class='Ref_to_Member'>t_tableOid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
</span>    <a href="execUtils.c.html#LN891"><span class='Ref_To_Local'>tmptup</span></a><span class='Operator'>.</span><a href="../../include/access/htup.h.html#LN66"><span class='Ref_to_Member'>t_data</span></a> <span class='Operator'>= </span><a href="execUtils.c.html#LN884"><span class='Ref_to_Parameter'>tuple</span></a><span class='Delimiter'>; 
</span> 
    <a href="execUtils.c.html#LN887"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../include/access/htup_details.h.html#LN768"><span class='Ref_to_Macro'>heap_getattr</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="execUtils.c.html#LN891"><span class='Ref_To_Local'>tmptup</span></a><span class='Delimiter'>, 
</span>                          <a href="execUtils.c.html#LN886"><span class='Ref_To_Local'>attrno</span></a><span class='Delimiter'>, 
</span>                          <a href="execUtils.c.html#LN890"><span class='Ref_To_Local'>tupDesc</span></a><span class='Delimiter'>, 
</span>                          <a href="execUtils.c.html#LN884"><span class='Ref_to_Parameter'>isNull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../include/access/tupdesc.h.html#LN106"><span class='Ref_to_Macro'>ReleaseTupleDesc</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN890"><span class='Ref_To_Local'>tupDesc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="execUtils.c.html#LN887"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end GetAttributeByName &raquo; </span> 
 
<a href="../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN945"></a><span class='Declare_Function'>GetAttributeByNum</span><span class='Parentheses'>(</span><a href="../../include/access/htup.h.html#LN22"><span class='Ref_to_Typedef'>HeapTupleHeader</span></a> <span class='Declare_Parameter'>tuple</span><span class='Delimiter'>, 
</span><a name="LN946"></a>                  <a href="../../include/access/attnum.h.html#LN20"><span class='Ref_to_Typedef'>AttrNumber</span></a> <span class='Declare_Parameter'>attrno</span><span class='Delimiter'>, 
</span><a name="LN947"></a>                  <span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Declare_Parameter'>isNull</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN949"></a>    <a href="../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>       <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span><a name="LN950"></a>    <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>tupType</span><span class='Delimiter'>; 
</span><a name="LN951"></a>    <a href="../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>tupTypmod</span><span class='Delimiter'>; 
</span><a name="LN952"></a>    <a href="../../include/access/tupdesc.h.html#LN70"><span class='Ref_to_Typedef'>TupleDesc</span></a>   <span class='Declare_Local'>tupDesc</span><span class='Delimiter'>; 
</span><a name="LN953"></a>    <a href="../../include/access/htup.h.html#LN61"><span class='Ref_to_Struct'>HeapTupleData</span></a> <span class='Declare_Local'>tmptup</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../include/access/attnum.h.html#LN33"><span class='Ref_to_Macro'>AttributeNumberIsValid</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN946"><span class='Ref_to_Parameter'>attrno</span></a><span class='Parentheses'>))</span> 
        <a href="../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"invalid attribute number %d"</span><span class='Delimiter'>, </span><a href="execUtils.c.html#LN946"><span class='Ref_to_Parameter'>attrno</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execUtils.c.html#LN947"><span class='Ref_to_Parameter'>isNull</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"a NULL isNull pointer was passed"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="execUtils.c.html#LN945"><span class='Ref_to_Parameter'>tuple</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Kinda bogus but compatible with old behavior... */ 
</span>        <span class='Operator'>*</span><a href="execUtils.c.html#LN947"><span class='Ref_to_Parameter'>isNull</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Parentheses'>(</span><a href="../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a><span class='Parentheses'>) </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="execUtils.c.html#LN950"><span class='Ref_To_Local'>tupType</span></a> <span class='Operator'>= </span><a href="../../include/access/htup_details.h.html#LN444"><span class='Ref_to_Macro'>HeapTupleHeaderGetTypeId</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN945"><span class='Ref_to_Parameter'>tuple</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="execUtils.c.html#LN951"><span class='Ref_To_Local'>tupTypmod</span></a> <span class='Operator'>= </span><a href="../../include/access/htup_details.h.html#LN454"><span class='Ref_to_Macro'>HeapTupleHeaderGetTypMod</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN945"><span class='Ref_to_Parameter'>tuple</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="execUtils.c.html#LN952"><span class='Ref_To_Local'>tupDesc</span></a> <span class='Operator'>= </span><a href="../../include/utils/typcache.h.html#LN151"><span class='Ref_to_Proto'>lookup_rowtype_tupdesc</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN950"><span class='Ref_To_Local'>tupType</span></a><span class='Delimiter'>, </span><a href="execUtils.c.html#LN951"><span class='Ref_To_Local'>tupTypmod</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * heap_getattr needs a HeapTuple not a bare HeapTupleHeader.  We set all 
     * the fields in the struct just in case user tries to inspect system 
     * columns. 
     */ 
</span>    <a href="execUtils.c.html#LN953"><span class='Ref_To_Local'>tmptup</span></a><span class='Operator'>.</span><a href="../../include/access/htup.h.html#LN63"><span class='Ref_to_Member'>t_len</span></a> <span class='Operator'>= </span><a href="../../include/access/htup_details.h.html#LN438"><span class='Ref_to_Macro'>HeapTupleHeaderGetDatumLength</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN945"><span class='Ref_to_Parameter'>tuple</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../include/storage/itemptr.h.html#LN148"><span class='Ref_to_Macro'>ItemPointerSetInvalid</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="execUtils.c.html#LN953"><span class='Ref_To_Local'>tmptup</span></a><span class='Operator'>.</span><a href="../../include/access/htup.h.html#LN64"><span class='Ref_to_Member'>t_self</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="execUtils.c.html#LN953"><span class='Ref_To_Local'>tmptup</span></a><span class='Operator'>.</span><a href="../../include/access/htup.h.html#LN65"><span class='Ref_to_Member'>t_tableOid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
</span>    <a href="execUtils.c.html#LN953"><span class='Ref_To_Local'>tmptup</span></a><span class='Operator'>.</span><a href="../../include/access/htup.h.html#LN66"><span class='Ref_to_Member'>t_data</span></a> <span class='Operator'>= </span><a href="execUtils.c.html#LN945"><span class='Ref_to_Parameter'>tuple</span></a><span class='Delimiter'>; 
</span> 
    <a href="execUtils.c.html#LN949"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../include/access/htup_details.h.html#LN768"><span class='Ref_to_Macro'>heap_getattr</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="execUtils.c.html#LN953"><span class='Ref_To_Local'>tmptup</span></a><span class='Delimiter'>, 
</span>                          <a href="execUtils.c.html#LN946"><span class='Ref_to_Parameter'>attrno</span></a><span class='Delimiter'>, 
</span>                          <a href="execUtils.c.html#LN952"><span class='Ref_To_Local'>tupDesc</span></a><span class='Delimiter'>, 
</span>                          <a href="execUtils.c.html#LN947"><span class='Ref_to_Parameter'>isNull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../include/access/tupdesc.h.html#LN106"><span class='Ref_to_Macro'>ReleaseTupleDesc</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN952"><span class='Ref_To_Local'>tupDesc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="execUtils.c.html#LN949"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end GetAttributeByNum &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Number of items in a tlist (including any resjunk items!) 
 */ 
</span><span class='Keyword'>int 
</span><a name="LN996"></a><span class='Declare_Function'>ExecTargetListLength</span><span class='Parentheses'>(</span><a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>targetlist</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Comment_Multi_Line'>/* This used to be more complex, but fjoins are dead */ 
</span>    <span class='Control'>return</span> <a href="../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN996"><span class='Ref_to_Parameter'>targetlist</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Number of items in a tlist, not including any resjunk items 
 */ 
</span><span class='Keyword'>int 
</span><a name="LN1006"></a><span class='Declare_Function'>ExecCleanTargetListLength</span><span class='Parentheses'>(</span><a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>targetlist</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1008"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>len</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN1009"></a>    <a href="../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>tl</span><span class='Delimiter'>; 
</span> 
    <a href="../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="execUtils.c.html#LN1009"><span class='Ref_To_Local'>tl</span></a><span class='Delimiter'>, </span><a href="execUtils.c.html#LN1006"><span class='Ref_to_Parameter'>targetlist</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN1013"></a>        <a href="../../include/nodes/primnodes.h.html#LN1363"><span class='Ref_to_Struct'>TargetEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>curTle</span> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN108"><span class='Ref_to_Macro'>lfirst_node</span></a><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN1363"><span class='Ref_to_Struct'>TargetEntry</span></a><span class='Delimiter'>, </span><a href="execUtils.c.html#LN1009"><span class='Ref_To_Local'>tl</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="execUtils.c.html#LN1013"><span class='Ref_To_Local'>curTle</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1373"><span class='Ref_to_Member'>resjunk</span></a><span class='Parentheses'>) 
</span>            <a href="execUtils.c.html#LN1008"><span class='Ref_To_Local'>len</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>return</span> <a href="execUtils.c.html#LN1008"><span class='Ref_To_Local'>len</span></a><span class='Delimiter'>; 
} 
</span></pre>
<table bgcolor='#c0c0c0' width='100%'><tr><td><a href='../../../Contents.html'>Contents</a></td></tr>
</table><hr><p class='blurb' align='center'><a href='http://www.sourceinsight.com'>HTML Created by Source Insight Version 4.00.0084 Built on 2017-02-26</a></p>
</body></html>