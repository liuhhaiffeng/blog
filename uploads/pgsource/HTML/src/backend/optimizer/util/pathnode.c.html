<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta name="generator" content="Source Insight Version 4.00.0084 Built on 2017-02-26">
<meta charset='UTF-8' />
<style type='text/css'><!--
TD {background-color: #C0C0C0; font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.blurb {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.filename {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 120%; font-weight: bold; }
.dirname {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 100%; font-weight: bold; margin-top: 2.5em;}
--></style>
<title>src\backend\optimizer\util\pathnode.c</title>
<LINK REL=StyleSheet HREF="../../../../C_Cpp_Source_File.css" TYPE='text/css' MEDIA=screen>
</head>
<body bgcolor=#ffffff>
<table bgcolor='#c0c0c0' width='100%'>
<tr><td><p class='filename'><b>src\backend\optimizer\util\pathnode.c</b></p></td>
<td align='right'>
Wed Jun 14 08:25:43 2017
</td></tr>
<tr><td><a href='../../../../Contents.html'>Contents</a></td></tr>
</table>
<pre>
<span class='Comment_Multi_Line'>/*------------------------------------------------------------------------- 
 * 
 * pathnode.c 
 *    Routines to manipulate pathlists and create path nodes 
 * 
 * Portions Copyright (c) 1996-2017, PostgreSQL Global Development Group 
 * Portions Copyright (c) 1994, Regents of the University of California 
 * 
 * 
 * IDENTIFICATION 
 *    src/backend/optimizer/util/pathnode.c 
 * 
 *------------------------------------------------------------------------- 
 */ 
</span><span class='Keyword'>#include </span><span class='String'>"postgres.h"</span> 
 
<span class='Keyword'>#include </span><span class='String'>&LT;math.h&GT;</span> 
 
<span class='Keyword'>#include </span><span class='String'>"miscadmin.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"nodes/nodeFuncs.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"optimizer/clauses.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"optimizer/cost.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"optimizer/pathnode.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"optimizer/paths.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"optimizer/planmain.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"optimizer/restrictinfo.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"optimizer/var.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"parser/parsetree.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/lsyscache.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/selfuncs.h"</span> 
 
 
<span class='Control'>typedef</span> <span class='Control'>enum</span> 
<span class='Delimiter'>{ 
</span><a name="LN34"></a>    <span class='Declare_Enum_Const'>COSTS_EQUAL</span><span class='Delimiter'>,</span>                <span class='Comment_Single_Line'>/* path costs are fuzzily equal */ 
</span><a name="LN35"></a>    <span class='Declare_Enum_Const'>COSTS_BETTER1</span><span class='Delimiter'>,</span>              <span class='Comment_Single_Line'>/* first path is cheaper than second */ 
</span><a name="LN36"></a>    <span class='Declare_Enum_Const'>COSTS_BETTER2</span><span class='Delimiter'>,</span>              <span class='Comment_Single_Line'>/* second path is cheaper than first */ 
</span><a name="LN37"></a>    <span class='Declare_Enum_Const'>COSTS_DIFFERENT</span>             <span class='Comment_Single_Line'>/* neither path dominates the other on cost */ 
</span><a name="LN38"></a><span class='Delimiter'>} </span><span class='Declare_Typedef'>PathCostComparison</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* 
 * STD_FUZZ_FACTOR is the normal fuzz factor for compare_path_costs_fuzzily. 
 * XXX is it worth making this user-controllable?  It provides a tradeoff 
 * between planner runtime and the accuracy of path cost comparisons. 
 */ 
</span><a name="LN45"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>STD_FUZZ_FACTOR</span> <span class='Number'>1</span><span class='Operator'>.</span><span class='Number'>01</span> 
 
<a name="LN47"></a><span class='Keyword'>static </span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Prototype'>translate_sub_tlist</span><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tlist</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>relid</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
 
<span class='Comment_Multi_Line'>/***************************************************************************** 
 *      MISC. PATH UTILITIES 
 *****************************************************************************/ 
</span> 
<span class='Comment_Multi_Line'>/* 
 * compare_path_costs 
 *    Return -1, 0, or +1 according as path1 is cheaper, the same cost, 
 *    or more expensive than path2 for the specified criterion. 
 */ 
</span><span class='Keyword'>int 
</span><a name="LN60"></a><span class='Declare_Function'>compare_path_costs</span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>path1</span><span class='Delimiter'>, </span><a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>path2</span><span class='Delimiter'>, </span><a href="../../../include/nodes/relation.h.html#LN33"><span class='Ref_to_Enum'>CostSelector</span></a> <span class='Declare_Parameter'>criterion</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN60"><span class='Ref_to_Parameter'>criterion</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/relation.h.html#LN35"><span class='Ref_to_EnumConst'>STARTUP_COST</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN60"><span class='Ref_to_Parameter'>path1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a> <span class='Operator'>&LT; </span><a href="pathnode.c.html#LN60"><span class='Ref_to_Parameter'>path2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN60"><span class='Ref_to_Parameter'>path1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a> <span class='Operator'>&GT; </span><a href="pathnode.c.html#LN60"><span class='Ref_to_Parameter'>path2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>return</span> <span class='Operator'>+</span><span class='Number'>1</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * If paths have the same startup cost (not at all unlikely), order 
         * them by total cost. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN60"><span class='Ref_to_Parameter'>path1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a> <span class='Operator'>&LT; </span><a href="pathnode.c.html#LN60"><span class='Ref_to_Parameter'>path2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN60"><span class='Ref_to_Parameter'>path1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a> <span class='Operator'>&GT; </span><a href="pathnode.c.html#LN60"><span class='Ref_to_Parameter'>path2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>return</span> <span class='Operator'>+</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN60"><span class='Ref_to_Parameter'>path1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a> <span class='Operator'>&LT; </span><a href="pathnode.c.html#LN60"><span class='Ref_to_Parameter'>path2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN60"><span class='Ref_to_Parameter'>path1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a> <span class='Operator'>&GT; </span><a href="pathnode.c.html#LN60"><span class='Ref_to_Parameter'>path2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>return</span> <span class='Operator'>+</span><span class='Number'>1</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * If paths have the same total cost, order them by startup cost. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN60"><span class='Ref_to_Parameter'>path1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a> <span class='Operator'>&LT; </span><a href="pathnode.c.html#LN60"><span class='Ref_to_Parameter'>path2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN60"><span class='Ref_to_Parameter'>path1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a> <span class='Operator'>&GT; </span><a href="pathnode.c.html#LN60"><span class='Ref_to_Parameter'>path2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>return</span> <span class='Operator'>+</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end compare_path_costs &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * compare_path_fractional_costs 
 *    Return -1, 0, or +1 according as path1 is cheaper, the same cost, 
 *    or more expensive than path2 for fetching the specified fraction 
 *    of the total tuples. 
 * 
 * If fraction is &LT;= 0 or &GT; 1, we interpret it as 1, ie, we select the 
 * path with the cheaper total_cost. 
 */ 
</span><span class='Keyword'>int 
</span><a name="LN106"></a><span class='Declare_Function'>compare_fractional_path_costs</span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>path1</span><span class='Delimiter'>, </span><a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>path2</span><span class='Delimiter'>, 
</span><a name="LN107"></a>                              <span class='Keyword'>double </span><span class='Declare_Parameter'>fraction</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN109"></a>    <a href="../../../include/nodes/nodes.h.html#LN638"><span class='Ref_to_Typedef'>Cost</span></a>        <span class='Declare_Local'>cost1</span><span class='Delimiter'>, 
</span><a name="LN110"></a>                <span class='Declare_Local'>cost2</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN107"><span class='Ref_to_Parameter'>fraction</span></a> <span class='Operator'>&LT;= </span><span class='Number'>0</span><span class='Operator'>.</span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="pathnode.c.html#LN107"><span class='Ref_to_Parameter'>fraction</span></a> <span class='Operator'>&GT;= </span><span class='Number'>1</span><span class='Operator'>.</span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <a href="../../../include/optimizer/pathnode.h.html#LN22"><span class='Ref_to_Proto'>compare_path_costs</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN106"><span class='Ref_to_Parameter'>path1</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN106"><span class='Ref_to_Parameter'>path2</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/relation.h.html#LN35"><span class='Ref_to_EnumConst'>TOTAL_COST</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN109"><span class='Ref_To_Local'>cost1</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN106"><span class='Ref_to_Parameter'>path1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a> <span class='Operator'>+ 
</span>        <a href="pathnode.c.html#LN107"><span class='Ref_to_Parameter'>fraction</span></a> <span class='Operator'>* </span><span class='Parentheses'>(</span><a href="pathnode.c.html#LN106"><span class='Ref_to_Parameter'>path1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a> <span class='Operator'>- </span><a href="pathnode.c.html#LN106"><span class='Ref_to_Parameter'>path1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN110"><span class='Ref_To_Local'>cost2</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN106"><span class='Ref_to_Parameter'>path2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a> <span class='Operator'>+ 
</span>        <a href="pathnode.c.html#LN107"><span class='Ref_to_Parameter'>fraction</span></a> <span class='Operator'>* </span><span class='Parentheses'>(</span><a href="pathnode.c.html#LN106"><span class='Ref_to_Parameter'>path2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a> <span class='Operator'>- </span><a href="pathnode.c.html#LN106"><span class='Ref_to_Parameter'>path2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN109"><span class='Ref_To_Local'>cost1</span></a> <span class='Operator'>&LT; </span><a href="pathnode.c.html#LN110"><span class='Ref_To_Local'>cost2</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN109"><span class='Ref_To_Local'>cost1</span></a> <span class='Operator'>&GT; </span><a href="pathnode.c.html#LN110"><span class='Ref_To_Local'>cost2</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Operator'>+</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * compare_path_costs_fuzzily 
 *    Compare the costs of two paths to see if either can be said to 
 *    dominate the other. 
 * 
 * We use fuzzy comparisons so that add_path() can avoid keeping both of 
 * a pair of paths that really have insignificantly different cost. 
 * 
 * The fuzz_factor argument must be 1.0 plus delta, where delta is the 
 * fraction of the smaller cost that is considered to be a significant 
 * difference.  For example, fuzz_factor = 1.01 makes the fuzziness limit 
 * be 1% of the smaller cost. 
 * 
 * The two paths are said to have "equal" costs if both startup and total 
 * costs are fuzzily the same.  Path1 is said to be better than path2 if 
 * it has fuzzily better startup cost and fuzzily no worse total cost, 
 * or if it has fuzzily better total cost and fuzzily no worse startup cost. 
 * Path2 is better than path1 if the reverse holds.  Finally, if one path 
 * is fuzzily better than the other on startup cost and fuzzily worse on 
 * total cost, we just say that their costs are "different", since neither 
 * dominates the other across the whole performance spectrum. 
 * 
 * This function also enforces a policy rule that paths for which the relevant 
 * one of parent-&GT;consider_startup and parent-&GT;consider_param_startup is false 
 * cannot survive comparisons solely on the grounds of good startup cost, so 
 * we never return COSTS_DIFFERENT when that is true for the total-cost loser. 
 * (But if total costs are fuzzily equal, we compare startup costs anyway, 
 * in hopes of eliminating one path or the other.) 
 */ 
</span><span class='Keyword'>static </span><a href="pathnode.c.html#LN32"><span class='Ref_to_Typedef'>PathCostComparison</span></a> 
<a name="LN155"></a><span class='Declare_Function'>compare_path_costs_fuzzily</span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>path1</span><span class='Delimiter'>, </span><a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>path2</span><span class='Delimiter'>, </span><span class='Keyword'>double </span><span class='Declare_Parameter'>fuzz_factor</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN157"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>CONSIDER_PATH_STARTUP_COST</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>p</span><span class='Parentheses'>)</span>  <span class='Operator'>\ 
</span>    <span class='Parentheses'>((</span>p<span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>param_info <span class='Operator'>== </span><span class='Null_Value'>NULL </span><span class='Operator'>? </span><span class='Parentheses'>(</span>p<span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>parent<span class='Operator'>-&GT;</span>consider_startup <span class='Operator'>: </span><span class='Parentheses'>(</span>p<span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>parent<span class='Operator'>-&GT;</span>consider_param_startup<span class='Parentheses'>)</span> 
 
    <span class='Comment_Multi_Line'>/* 
     * Check total cost first since it's more likely to be different; many 
     * paths have zero startup cost. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN155"><span class='Ref_to_Parameter'>path1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a> <span class='Operator'>&GT; </span><a href="pathnode.c.html#LN155"><span class='Ref_to_Parameter'>path2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a> <span class='Operator'>* </span><a href="pathnode.c.html#LN155"><span class='Ref_to_Parameter'>fuzz_factor</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* path1 fuzzily worse on total cost */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN157"><span class='Ref_to_Macro'>CONSIDER_PATH_STARTUP_COST</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN155"><span class='Ref_to_Parameter'>path1</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>            <a href="pathnode.c.html#LN155"><span class='Ref_to_Parameter'>path2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a> <span class='Operator'>&GT; </span><a href="pathnode.c.html#LN155"><span class='Ref_to_Parameter'>path1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a> <span class='Operator'>* </span><a href="pathnode.c.html#LN155"><span class='Ref_to_Parameter'>fuzz_factor</span></a><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* ... but path2 fuzzily worse on startup, so DIFFERENT */ 
</span>            <span class='Control'>return</span> <a href="pathnode.c.html#LN37"><span class='Ref_to_EnumConst'>COSTS_DIFFERENT</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Comment_Multi_Line'>/* else path2 dominates */ 
</span>        <span class='Control'>return</span> <a href="pathnode.c.html#LN36"><span class='Ref_to_EnumConst'>COSTS_BETTER2</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN155"><span class='Ref_to_Parameter'>path2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a> <span class='Operator'>&GT; </span><a href="pathnode.c.html#LN155"><span class='Ref_to_Parameter'>path1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a> <span class='Operator'>* </span><a href="pathnode.c.html#LN155"><span class='Ref_to_Parameter'>fuzz_factor</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* path2 fuzzily worse on total cost */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN157"><span class='Ref_to_Macro'>CONSIDER_PATH_STARTUP_COST</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN155"><span class='Ref_to_Parameter'>path2</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>            <a href="pathnode.c.html#LN155"><span class='Ref_to_Parameter'>path1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a> <span class='Operator'>&GT; </span><a href="pathnode.c.html#LN155"><span class='Ref_to_Parameter'>path2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a> <span class='Operator'>* </span><a href="pathnode.c.html#LN155"><span class='Ref_to_Parameter'>fuzz_factor</span></a><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* ... but path1 fuzzily worse on startup, so DIFFERENT */ 
</span>            <span class='Control'>return</span> <a href="pathnode.c.html#LN37"><span class='Ref_to_EnumConst'>COSTS_DIFFERENT</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Comment_Multi_Line'>/* else path1 dominates */ 
</span>        <span class='Control'>return</span> <a href="pathnode.c.html#LN35"><span class='Ref_to_EnumConst'>COSTS_BETTER1</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Comment_Multi_Line'>/* fuzzily the same on total cost ... */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN155"><span class='Ref_to_Parameter'>path1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a> <span class='Operator'>&GT; </span><a href="pathnode.c.html#LN155"><span class='Ref_to_Parameter'>path2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a> <span class='Operator'>* </span><a href="pathnode.c.html#LN155"><span class='Ref_to_Parameter'>fuzz_factor</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* ... but path1 fuzzily worse on startup, so path2 wins */ 
</span>        <span class='Control'>return</span> <a href="pathnode.c.html#LN36"><span class='Ref_to_EnumConst'>COSTS_BETTER2</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN155"><span class='Ref_to_Parameter'>path2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a> <span class='Operator'>&GT; </span><a href="pathnode.c.html#LN155"><span class='Ref_to_Parameter'>path1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a> <span class='Operator'>* </span><a href="pathnode.c.html#LN155"><span class='Ref_to_Parameter'>fuzz_factor</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* ... but path2 fuzzily worse on startup, so path1 wins */ 
</span>        <span class='Control'>return</span> <a href="pathnode.c.html#LN35"><span class='Ref_to_EnumConst'>COSTS_BETTER1</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Comment_Multi_Line'>/* fuzzily the same on both costs */ 
</span>    <span class='Control'>return</span> <a href="pathnode.c.html#LN34"><span class='Ref_to_EnumConst'>COSTS_EQUAL</span></a><span class='Delimiter'>; 
</span> 
<span class='Keyword'>#undef </span><a href="pathnode.c.html#LN157"><span class='Ref_to_Macro'>CONSIDER_PATH_STARTUP_COST</span></a> 
<span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end compare_path_costs_fuzzily &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * set_cheapest 
 *    Find the minimum-cost paths from among a relation's paths, 
 *    and save them in the rel's cheapest-path fields. 
 * 
 * cheapest_total_path is normally the cheapest-total-cost unparameterized 
 * path; but if there are no unparameterized paths, we assign it to be the 
 * best (cheapest least-parameterized) parameterized path.  However, only 
 * unparameterized paths are considered candidates for cheapest_startup_path, 
 * so that will be NULL if there are no unparameterized paths. 
 * 
 * The cheapest_parameterized_paths list collects all parameterized paths 
 * that have survived the add_path() tournament for this relation.  (Since 
 * add_path ignores pathkeys for a parameterized path, these will be paths 
 * that have best cost or best row count for their parameterization.  We 
 * may also have both a parallel-safe and a non-parallel-safe path in some 
 * cases for the same parameterization in some cases, but this should be 
 * relatively rare since, most typically, all paths for the same relation 
 * will be parallel-safe or none of them will.) 
 * 
 * cheapest_parameterized_paths always includes the cheapest-total 
 * unparameterized path, too, if there is one; the users of that list find 
 * it more convenient if that's included. 
 * 
 * This is normally called only after we've finished constructing the path 
 * list for the rel node. 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN233"></a><span class='Declare_Function'>set_cheapest</span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>parent_rel</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN235"></a>    <a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>cheapest_startup_path</span><span class='Delimiter'>; 
</span><a name="LN236"></a>    <a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>cheapest_total_path</span><span class='Delimiter'>; 
</span><a name="LN237"></a>    <a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>best_param_path</span><span class='Delimiter'>; 
</span><a name="LN238"></a>    <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>parameterized_paths</span><span class='Delimiter'>; 
</span><a name="LN239"></a>    <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>p</span><span class='Delimiter'>; 
</span> 
    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN233"><span class='Ref_to_Parameter'>parent_rel</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN233"><span class='Ref_to_Parameter'>parent_rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN538"><span class='Ref_to_Member'>pathlist</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Parentheses'>) 
</span>        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"could not devise a query plan for the given query"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pathnode.c.html#LN235"><span class='Ref_To_Local'>cheapest_startup_path</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN236"><span class='Ref_To_Local'>cheapest_total_path</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN237"><span class='Ref_To_Local'>best_param_path</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN238"><span class='Ref_To_Local'>parameterized_paths</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span> 
    <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN239"><span class='Ref_To_Local'>p</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN233"><span class='Ref_to_Parameter'>parent_rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN538"><span class='Ref_to_Member'>pathlist</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN251"></a>        <a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>path</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN239"><span class='Ref_To_Local'>p</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN252"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>cmp</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN251"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN955"><span class='Ref_to_Member'>param_info</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* Parameterized path, so add it to parameterized_paths */ 
</span>            <a href="pathnode.c.html#LN238"><span class='Ref_To_Local'>parameterized_paths</span></a> <span class='Operator'>= </span><a href="../../nodes/list.c.html#LN126"><span class='Ref_to_Func'>lappend</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN238"><span class='Ref_To_Local'>parameterized_paths</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN251"><span class='Ref_To_Local'>path</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * If we have an unparameterized cheapest-total, we no longer care 
             * about finding the best parameterized path, so move on. 
             */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN236"><span class='Ref_To_Local'>cheapest_total_path</span></a><span class='Parentheses'>) 
</span>                <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * Otherwise, track the best parameterized path, which is the one 
             * with least total cost among those of the minimum 
             * parameterization. 
             */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN237"><span class='Ref_To_Local'>best_param_path</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>                <a href="pathnode.c.html#LN237"><span class='Ref_To_Local'>best_param_path</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN251"><span class='Ref_To_Local'>path</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/bitmapset.h.html#LN74"><span class='Ref_to_Proto'>bms_subset_compare</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN972"><span class='Ref_to_Macro'>PATH_REQ_OUTER</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN251"><span class='Ref_To_Local'>path</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                           <a href="../../../include/nodes/relation.h.html#LN972"><span class='Ref_to_Macro'>PATH_REQ_OUTER</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN237"><span class='Ref_To_Local'>best_param_path</span></a><span class='Parentheses'>)))</span> 
                <span class='Delimiter'>{ 
</span>                    <span class='Control'>case</span> <a href="../../../include/nodes/bitmapset.h.html#LN46"><span class='Ref_to_EnumConst'>BMS_EQUAL</span></a><span class='Operator'>: 
</span>                        <span class='Comment_Multi_Line'>/* keep the cheaper one */ 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/optimizer/pathnode.h.html#LN22"><span class='Ref_to_Proto'>compare_path_costs</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN251"><span class='Ref_To_Local'>path</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN237"><span class='Ref_To_Local'>best_param_path</span></a><span class='Delimiter'>, 
</span>                                               <a href="../../../include/nodes/relation.h.html#LN35"><span class='Ref_to_EnumConst'>TOTAL_COST</span></a><span class='Parentheses'>) </span><span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                            <a href="pathnode.c.html#LN237"><span class='Ref_To_Local'>best_param_path</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN251"><span class='Ref_To_Local'>path</span></a><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>case</span> <a href="../../../include/nodes/bitmapset.h.html#LN47"><span class='Ref_to_EnumConst'>BMS_SUBSET1</span></a><span class='Operator'>: 
</span>                        <span class='Comment_Multi_Line'>/* new path is less-parameterized */ 
</span>                        <a href="pathnode.c.html#LN237"><span class='Ref_To_Local'>best_param_path</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN251"><span class='Ref_To_Local'>path</span></a><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>case</span> <a href="../../../include/nodes/bitmapset.h.html#LN48"><span class='Ref_to_EnumConst'>BMS_SUBSET2</span></a><span class='Operator'>: 
</span>                        <span class='Comment_Multi_Line'>/* old path is less-parameterized, keep it */ 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>case</span> <a href="../../../include/nodes/bitmapset.h.html#LN49"><span class='Ref_to_EnumConst'>BMS_DIFFERENT</span></a><span class='Operator'>: 
</span> 
                        <span class='Comment_Multi_Line'>/* 
                         * This means that neither path has the least possible 
                         * parameterization for the rel.  We'll sit on the old 
                         * path until something better comes along. 
                         */ 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch bms_subset_compare(PA... &raquo; </span> 
            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if path-&GT;param_info &raquo; </span> 
        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* Unparameterized path, so consider it for cheapest slots */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN236"><span class='Ref_To_Local'>cheapest_total_path</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <a href="pathnode.c.html#LN235"><span class='Ref_To_Local'>cheapest_startup_path</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN236"><span class='Ref_To_Local'>cheapest_total_path</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN251"><span class='Ref_To_Local'>path</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>continue</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * If we find two paths of identical costs, try to keep the 
             * better-sorted one.  The paths might have unrelated sort 
             * orderings, in which case we can only guess which might be 
             * better to keep, but if one is superior then we definitely 
             * should keep that one. 
             */ 
</span>            <a href="pathnode.c.html#LN252"><span class='Ref_To_Local'>cmp</span></a> <span class='Operator'>= </span><a href="../../../include/optimizer/pathnode.h.html#LN22"><span class='Ref_to_Proto'>compare_path_costs</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN235"><span class='Ref_To_Local'>cheapest_startup_path</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN251"><span class='Ref_To_Local'>path</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/relation.h.html#LN35"><span class='Ref_to_EnumConst'>STARTUP_COST</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN252"><span class='Ref_To_Local'>cmp</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span> <span class='Operator'>|| 
</span>                <span class='Parentheses'>(</span><a href="pathnode.c.html#LN252"><span class='Ref_To_Local'>cmp</span></a> <span class='Operator'>== </span><span class='Number'>0</span> <span class='Operator'>&& 
</span>                 <a href="../../../include/optimizer/paths.h.html#LN182"><span class='Ref_to_Proto'>compare_pathkeys</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN235"><span class='Ref_To_Local'>cheapest_startup_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a><span class='Delimiter'>, 
</span>                                  <a href="pathnode.c.html#LN251"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><a href="../../../include/optimizer/paths.h.html#LN178"><span class='Ref_to_EnumConst'>PATHKEYS_BETTER2</span></a><span class='Parentheses'>))</span> 
                <a href="pathnode.c.html#LN235"><span class='Ref_To_Local'>cheapest_startup_path</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN251"><span class='Ref_To_Local'>path</span></a><span class='Delimiter'>; 
</span> 
            <a href="pathnode.c.html#LN252"><span class='Ref_To_Local'>cmp</span></a> <span class='Operator'>= </span><a href="../../../include/optimizer/pathnode.h.html#LN22"><span class='Ref_to_Proto'>compare_path_costs</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN236"><span class='Ref_To_Local'>cheapest_total_path</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN251"><span class='Ref_To_Local'>path</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/relation.h.html#LN35"><span class='Ref_to_EnumConst'>TOTAL_COST</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN252"><span class='Ref_To_Local'>cmp</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span> <span class='Operator'>|| 
</span>                <span class='Parentheses'>(</span><a href="pathnode.c.html#LN252"><span class='Ref_To_Local'>cmp</span></a> <span class='Operator'>== </span><span class='Number'>0</span> <span class='Operator'>&& 
</span>                 <a href="../../../include/optimizer/paths.h.html#LN182"><span class='Ref_to_Proto'>compare_pathkeys</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN236"><span class='Ref_To_Local'>cheapest_total_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a><span class='Delimiter'>, 
</span>                                  <a href="pathnode.c.html#LN251"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><a href="../../../include/optimizer/paths.h.html#LN178"><span class='Ref_to_EnumConst'>PATHKEYS_BETTER2</span></a><span class='Parentheses'>))</span> 
                <a href="pathnode.c.html#LN236"><span class='Ref_To_Local'>cheapest_total_path</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN251"><span class='Ref_To_Local'>path</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* Add cheapest unparameterized path, if any, to parameterized_paths */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN236"><span class='Ref_To_Local'>cheapest_total_path</span></a><span class='Parentheses'>) 
</span>        <a href="pathnode.c.html#LN238"><span class='Ref_To_Local'>parameterized_paths</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN215"><span class='Ref_to_Proto'>lcons</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN236"><span class='Ref_To_Local'>cheapest_total_path</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN238"><span class='Ref_To_Local'>parameterized_paths</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If there is no unparameterized path, use the best parameterized path as 
     * cheapest_total_path (but not as cheapest_startup_path). 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN236"><span class='Ref_To_Local'>cheapest_total_path</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="pathnode.c.html#LN236"><span class='Ref_To_Local'>cheapest_total_path</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN237"><span class='Ref_To_Local'>best_param_path</span></a><span class='Delimiter'>; 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="pathnode.c.html#LN236"><span class='Ref_To_Local'>cheapest_total_path</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pathnode.c.html#LN233"><span class='Ref_to_Parameter'>parent_rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN541"><span class='Ref_to_Member'>cheapest_startup_path</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN235"><span class='Ref_To_Local'>cheapest_startup_path</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN233"><span class='Ref_to_Parameter'>parent_rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN542"><span class='Ref_to_Member'>cheapest_total_path</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN236"><span class='Ref_To_Local'>cheapest_total_path</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN233"><span class='Ref_to_Parameter'>parent_rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN543"><span class='Ref_to_Member'>cheapest_unique_path</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* computed only if needed */ 
</span>    <a href="pathnode.c.html#LN233"><span class='Ref_to_Parameter'>parent_rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN544"><span class='Ref_to_Member'>cheapest_parameterized_paths</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN238"><span class='Ref_To_Local'>parameterized_paths</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end set_cheapest &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * add_path 
 *    Consider a potential implementation path for the specified parent rel, 
 *    and add it to the rel's pathlist if it is worthy of consideration. 
 *    A path is worthy if it has a better sort order (better pathkeys) or 
 *    cheaper cost (on either dimension), or generates fewer rows, than any 
 *    existing path that has the same or superset parameterization rels. 
 *    We also consider parallel-safe paths more worthy than others. 
 * 
 *    We also remove from the rel's pathlist any old paths that are dominated 
 *    by new_path --- that is, new_path is cheaper, at least as well ordered, 
 *    generates no more rows, requires no outer rels not required by the old 
 *    path, and is no less parallel-safe. 
 * 
 *    In most cases, a path with a superset parameterization will generate 
 *    fewer rows (since it has more join clauses to apply), so that those two 
 *    figures of merit move in opposite directions; this means that a path of 
 *    one parameterization can seldom dominate a path of another.  But such 
 *    cases do arise, so we make the full set of checks anyway. 
 * 
 *    There are two policy decisions embedded in this function, along with 
 *    its sibling add_path_precheck.  First, we treat all parameterized paths 
 *    as having NIL pathkeys, so that they cannot win comparisons on the 
 *    basis of sort order.  This is to reduce the number of parameterized 
 *    paths that are kept; see discussion in src/backend/optimizer/README. 
 * 
 *    Second, we only consider cheap startup cost to be interesting if 
 *    parent_rel-&GT;consider_startup is true for an unparameterized path, or 
 *    parent_rel-&GT;consider_param_startup is true for a parameterized one. 
 *    Again, this allows discarding useless paths sooner. 
 * 
 *    The pathlist is kept sorted by total_cost, with cheaper paths 
 *    at the front.  Within this routine, that's simply a speed hack: 
 *    doing it that way makes it more likely that we will reject an inferior 
 *    path after a few comparisons, rather than many comparisons. 
 *    However, add_path_precheck relies on this ordering to exit early 
 *    when possible. 
 * 
 *    NOTE: discarded Path objects are immediately pfree'd to reduce planner 
 *    memory consumption.  We dare not try to free the substructure of a Path, 
 *    since much of it may be shared with other Paths or the query tree itself; 
 *    but just recycling discarded Path nodes is a very useful savings in 
 *    a large join tree.  We can recycle the List nodes of pathlist, too. 
 * 
 *    As noted in optimizer/README, deleting a previously-accepted Path is 
 *    safe because we know that Paths of this rel cannot yet be referenced 
 *    from any other rel, such as a higher-level join.  However, in some cases 
 *    it is possible that a Path is referenced by another Path for its own 
 *    rel; we must not delete such a Path, even if it is dominated by the new 
 *    Path.  Currently this occurs only for IndexPath objects, which may be 
 *    referenced as children of BitmapHeapPaths as well as being paths in 
 *    their own right.  Hence, we don't pfree IndexPaths when rejecting them. 
 * 
 * 'parent_rel' is the relation entry to which the path corresponds. 
 * 'new_path' is a potential path for parent_rel. 
 * 
 * Returns nothing, but modifies parent_rel-&GT;pathlist. 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN411"></a><span class='Declare_Function'>add_path</span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>parent_rel</span><span class='Delimiter'>, </span><a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>new_path</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN413"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>accept_new</span> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* unless we find a superior old path */ 
</span><a name="LN414"></a>    <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>insert_after</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* where to insert new item */ 
</span><a name="LN415"></a>    <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>new_path_pathkeys</span><span class='Delimiter'>; 
</span><a name="LN416"></a>    <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>p1</span><span class='Delimiter'>; 
</span><a name="LN417"></a>    <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>p1_prev</span><span class='Delimiter'>; 
</span><a name="LN418"></a>    <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>p1_next</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * This is a convenient place to check for query cancel --- no part of the 
     * planner goes very long without calling add_path(). 
     */ 
</span>    <a href="../../../include/miscadmin.h.html#LN99"><span class='Ref_to_Macro'>CHECK_FOR_INTERRUPTS</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Pretend parameterized paths have no pathkeys, per comment above */ 
</span>    <a href="pathnode.c.html#LN415"><span class='Ref_To_Local'>new_path_pathkeys</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN411"><span class='Ref_to_Parameter'>new_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN955"><span class='Ref_to_Member'>param_info</span></a> <span class='Operator'>? </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a> <span class='Operator'>: </span><a href="pathnode.c.html#LN411"><span class='Ref_to_Parameter'>new_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Loop to check proposed new path against old paths.  Note it is possible 
     * for more than one old path to be tossed out because new_path dominates 
     * it. 
     * 
     * We can't use foreach here because the loop body may delete the current 
     * list cell. 
     */ 
</span>    <a href="pathnode.c.html#LN417"><span class='Ref_To_Local'>p1_prev</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN416"><span class='Ref_To_Local'>p1</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN75"><span class='Ref_to_Func'>list_head</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN411"><span class='Ref_to_Parameter'>parent_rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN538"><span class='Ref_to_Member'>pathlist</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; </span><a href="pathnode.c.html#LN416"><span class='Ref_To_Local'>p1</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; </span><a href="pathnode.c.html#LN416"><span class='Ref_To_Local'>p1</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN418"><span class='Ref_To_Local'>p1_next</span></a><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span><a name="LN440"></a>        <a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>old_path</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN416"><span class='Ref_To_Local'>p1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN441"></a>        <span class='Keyword'>bool</span>        <span class='Declare_Local'>remove_old</span> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; </span><span class='Comment_Single_Line'>/* unless new proves superior */ 
</span><a name="LN442"></a>        <a href="pathnode.c.html#LN32"><span class='Ref_to_Typedef'>PathCostComparison</span></a> <span class='Declare_Local'>costcmp</span><span class='Delimiter'>; 
</span><a name="LN443"></a>        <a href="../../../include/optimizer/paths.h.html#LN174"><span class='Ref_to_Typedef'>PathKeysComparison</span></a> <span class='Declare_Local'>keyscmp</span><span class='Delimiter'>; 
</span><a name="LN444"></a>        <a href="../../../include/nodes/bitmapset.h.html#LN44"><span class='Ref_to_Typedef'>BMS_Comparison</span></a> <span class='Declare_Local'>outercmp</span><span class='Delimiter'>; 
</span> 
        <a href="pathnode.c.html#LN418"><span class='Ref_To_Local'>p1_next</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN104"><span class='Ref_to_Macro'>lnext</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN416"><span class='Ref_To_Local'>p1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Do a fuzzy cost comparison with standard fuzziness limit. 
         */ 
</span>        <a href="pathnode.c.html#LN442"><span class='Ref_To_Local'>costcmp</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN154"><span class='Ref_to_Func'>compare_path_costs_fuzzily</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN411"><span class='Ref_to_Parameter'>new_path</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN440"><span class='Ref_To_Local'>old_path</span></a><span class='Delimiter'>, 
</span>                                             <a href="pathnode.c.html#LN45"><span class='Ref_to_Const'>STD_FUZZ_FACTOR</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * If the two paths compare differently for startup and total cost, 
         * then we want to keep both, and we can skip comparing pathkeys and 
         * required_outer rels.  If they compare the same, proceed with the 
         * other comparisons.  Row count is checked last.  (We make the tests 
         * in this order because the cost comparison is most likely to turn 
         * out "different", and the pathkeys comparison next most likely.  As 
         * explained above, row count very seldom makes a difference, so even 
         * though it's cheap to compare there's not much point in checking it 
         * earlier.) 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN442"><span class='Ref_To_Local'>costcmp</span></a> <span class='Operator'>!= </span><a href="pathnode.c.html#LN37"><span class='Ref_to_EnumConst'>COSTS_DIFFERENT</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* Similarly check to see if either dominates on pathkeys */ 
</span><a name="LN468"></a>            <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>old_path_pathkeys</span><span class='Delimiter'>; 
</span> 
            <a href="pathnode.c.html#LN468"><span class='Ref_To_Local'>old_path_pathkeys</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN440"><span class='Ref_To_Local'>old_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN955"><span class='Ref_to_Member'>param_info</span></a> <span class='Operator'>? </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a> <span class='Operator'>: </span><a href="pathnode.c.html#LN440"><span class='Ref_To_Local'>old_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a><span class='Delimiter'>; 
</span>            <a href="pathnode.c.html#LN443"><span class='Ref_To_Local'>keyscmp</span></a> <span class='Operator'>= </span><a href="../../../include/optimizer/paths.h.html#LN182"><span class='Ref_to_Proto'>compare_pathkeys</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN415"><span class='Ref_To_Local'>new_path_pathkeys</span></a><span class='Delimiter'>, 
</span>                                       <a href="pathnode.c.html#LN468"><span class='Ref_To_Local'>old_path_pathkeys</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN443"><span class='Ref_To_Local'>keyscmp</span></a> <span class='Operator'>!= </span><a href="../../../include/optimizer/paths.h.html#LN179"><span class='Ref_to_EnumConst'>PATHKEYS_DIFFERENT</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN442"><span class='Ref_To_Local'>costcmp</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Control'>case</span> <a href="pathnode.c.html#LN34"><span class='Ref_to_EnumConst'>COSTS_EQUAL</span></a><span class='Operator'>: 
</span>                        <a href="pathnode.c.html#LN444"><span class='Ref_To_Local'>outercmp</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/bitmapset.h.html#LN74"><span class='Ref_to_Proto'>bms_subset_compare</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN972"><span class='Ref_to_Macro'>PATH_REQ_OUTER</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN411"><span class='Ref_to_Parameter'>new_path</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                                   <a href="../../../include/nodes/relation.h.html#LN972"><span class='Ref_to_Macro'>PATH_REQ_OUTER</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN440"><span class='Ref_To_Local'>old_path</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN443"><span class='Ref_To_Local'>keyscmp</span></a> <span class='Operator'>== </span><a href="../../../include/optimizer/paths.h.html#LN177"><span class='Ref_to_EnumConst'>PATHKEYS_BETTER1</span></a><span class='Parentheses'>) 
</span>                        <span class='Delimiter'>{ 
</span>                            <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="pathnode.c.html#LN444"><span class='Ref_To_Local'>outercmp</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/bitmapset.h.html#LN46"><span class='Ref_to_EnumConst'>BMS_EQUAL</span></a> <span class='Operator'>|| 
</span>                                 <a href="pathnode.c.html#LN444"><span class='Ref_To_Local'>outercmp</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/bitmapset.h.html#LN47"><span class='Ref_to_EnumConst'>BMS_SUBSET1</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>                                <a href="pathnode.c.html#LN411"><span class='Ref_to_Parameter'>new_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a> <span class='Operator'>&LT;= </span><a href="pathnode.c.html#LN440"><span class='Ref_To_Local'>old_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a> <span class='Operator'>&& 
</span>                                <a href="pathnode.c.html#LN411"><span class='Ref_to_Parameter'>new_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a> <span class='Operator'>&GT;= </span><a href="pathnode.c.html#LN440"><span class='Ref_To_Local'>old_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a><span class='Parentheses'>)</span> 
                                <a href="pathnode.c.html#LN441"><span class='Ref_To_Local'>remove_old</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* new dominates old */ 
</span>                        <span class='Delimiter'>} 
</span>                        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN443"><span class='Ref_To_Local'>keyscmp</span></a> <span class='Operator'>== </span><a href="../../../include/optimizer/paths.h.html#LN178"><span class='Ref_to_EnumConst'>PATHKEYS_BETTER2</span></a><span class='Parentheses'>) 
</span>                        <span class='Delimiter'>{ 
</span>                            <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="pathnode.c.html#LN444"><span class='Ref_To_Local'>outercmp</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/bitmapset.h.html#LN46"><span class='Ref_to_EnumConst'>BMS_EQUAL</span></a> <span class='Operator'>|| 
</span>                                 <a href="pathnode.c.html#LN444"><span class='Ref_To_Local'>outercmp</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/bitmapset.h.html#LN48"><span class='Ref_to_EnumConst'>BMS_SUBSET2</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>                                <a href="pathnode.c.html#LN411"><span class='Ref_to_Parameter'>new_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a> <span class='Operator'>&GT;= </span><a href="pathnode.c.html#LN440"><span class='Ref_To_Local'>old_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a> <span class='Operator'>&& 
</span>                                <a href="pathnode.c.html#LN411"><span class='Ref_to_Parameter'>new_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a> <span class='Operator'>&LT;= </span><a href="pathnode.c.html#LN440"><span class='Ref_To_Local'>old_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a><span class='Parentheses'>)</span> 
                                <a href="pathnode.c.html#LN413"><span class='Ref_To_Local'>accept_new</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* old dominates new */ 
</span>                        <span class='Delimiter'>} 
</span>                        <span class='Control'>else</span>    <span class='Comment_Single_Line'>/* keyscmp == PATHKEYS_EQUAL */ 
</span>                        <span class='Delimiter'>{ 
</span>                            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN444"><span class='Ref_To_Local'>outercmp</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/bitmapset.h.html#LN46"><span class='Ref_to_EnumConst'>BMS_EQUAL</span></a><span class='Parentheses'>) 
</span>                            <span class='Delimiter'>{ 
</span>                                <span class='Comment_Multi_Line'>/* 
                                 * Same pathkeys and outer rels, and fuzzily 
                                 * the same cost, so keep just one; to decide 
                                 * which, first check parallel-safety, then 
                                 * rows, then do a fuzzy cost comparison with 
                                 * very small fuzz limit.  (We used to do an 
                                 * exact cost comparison, but that results in 
                                 * annoying platform-specific plan variations 
                                 * due to roundoff in the cost estimates.)  If 
                                 * things are still tied, arbitrarily keep 
                                 * only the old path.  Notice that we will 
                                 * keep only the old path even if the 
                                 * less-fuzzy comparison decides the startup 
                                 * and total costs compare differently. 
                                 */ 
</span>                                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN411"><span class='Ref_to_Parameter'>new_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a> <span class='Operator'>&GT; 
</span>                                    <a href="pathnode.c.html#LN440"><span class='Ref_To_Local'>old_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a><span class='Parentheses'>) 
</span>                                    <a href="pathnode.c.html#LN441"><span class='Ref_To_Local'>remove_old</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>;</span>  <span class='Comment_Single_Line'>/* new dominates old */ 
</span>                                <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN411"><span class='Ref_to_Parameter'>new_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a> <span class='Operator'>&LT; 
</span>                                         <a href="pathnode.c.html#LN440"><span class='Ref_To_Local'>old_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a><span class='Parentheses'>) 
</span>                                    <a href="pathnode.c.html#LN413"><span class='Ref_To_Local'>accept_new</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; </span><span class='Comment_Single_Line'>/* old dominates new */ 
</span>                                <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN411"><span class='Ref_to_Parameter'>new_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a> <span class='Operator'>&LT; </span><a href="pathnode.c.html#LN440"><span class='Ref_To_Local'>old_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a><span class='Parentheses'>) 
</span>                                    <a href="pathnode.c.html#LN441"><span class='Ref_To_Local'>remove_old</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>;</span>  <span class='Comment_Single_Line'>/* new dominates old */ 
</span>                                <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN411"><span class='Ref_to_Parameter'>new_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a> <span class='Operator'>&GT; </span><a href="pathnode.c.html#LN440"><span class='Ref_To_Local'>old_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a><span class='Parentheses'>) 
</span>                                    <a href="pathnode.c.html#LN413"><span class='Ref_To_Local'>accept_new</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; </span><span class='Comment_Single_Line'>/* old dominates new */ 
</span>                                <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN154"><span class='Ref_to_Func'>compare_path_costs_fuzzily</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN411"><span class='Ref_to_Parameter'>new_path</span></a><span class='Delimiter'>, 
</span>                                                                    <a href="pathnode.c.html#LN440"><span class='Ref_To_Local'>old_path</span></a><span class='Delimiter'>, 
</span>                                              <span class='Number'>1</span><span class='Operator'>.</span><span class='Number'>0000000001</span><span class='Parentheses'>) </span><span class='Operator'>== </span><a href="pathnode.c.html#LN35"><span class='Ref_to_EnumConst'>COSTS_BETTER1</span></a><span class='Parentheses'>)</span> 
                                    <a href="pathnode.c.html#LN441"><span class='Ref_To_Local'>remove_old</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>;</span>  <span class='Comment_Single_Line'>/* new dominates old */ 
</span>                                <span class='Control'>else</span> 
                                    <a href="pathnode.c.html#LN413"><span class='Ref_To_Local'>accept_new</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; </span><span class='Comment_Multi_Line'>/* old equals or 
                                                         * dominates new */ 
</span>                            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if outercmp==BMS_EQUAL &raquo; </span> 
                            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN444"><span class='Ref_To_Local'>outercmp</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/bitmapset.h.html#LN47"><span class='Ref_to_EnumConst'>BMS_SUBSET1</span></a> <span class='Operator'>&& 
</span>                                     <a href="pathnode.c.html#LN411"><span class='Ref_to_Parameter'>new_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a> <span class='Operator'>&LT;= </span><a href="pathnode.c.html#LN440"><span class='Ref_To_Local'>old_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a> <span class='Operator'>&& 
</span>                                     <a href="pathnode.c.html#LN411"><span class='Ref_to_Parameter'>new_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a> <span class='Operator'>&GT;= </span><a href="pathnode.c.html#LN440"><span class='Ref_To_Local'>old_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a><span class='Parentheses'>) 
</span>                                <a href="pathnode.c.html#LN441"><span class='Ref_To_Local'>remove_old</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* new dominates old */ 
</span>                            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN444"><span class='Ref_To_Local'>outercmp</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/bitmapset.h.html#LN48"><span class='Ref_to_EnumConst'>BMS_SUBSET2</span></a> <span class='Operator'>&& 
</span>                                     <a href="pathnode.c.html#LN411"><span class='Ref_to_Parameter'>new_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a> <span class='Operator'>&GT;= </span><a href="pathnode.c.html#LN440"><span class='Ref_To_Local'>old_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a> <span class='Operator'>&& 
</span>                                     <a href="pathnode.c.html#LN411"><span class='Ref_to_Parameter'>new_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a> <span class='Operator'>&LT;= </span><a href="pathnode.c.html#LN440"><span class='Ref_To_Local'>old_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a><span class='Parentheses'>) 
</span>                                <a href="pathnode.c.html#LN413"><span class='Ref_To_Local'>accept_new</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* old dominates new */ 
</span>                            <span class='Comment_Multi_Line'>/* else different parameterizations, keep both */ 
</span>                        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>case</span> <a href="pathnode.c.html#LN35"><span class='Ref_to_EnumConst'>COSTS_BETTER1</span></a><span class='Operator'>: 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN443"><span class='Ref_To_Local'>keyscmp</span></a> <span class='Operator'>!= </span><a href="../../../include/optimizer/paths.h.html#LN178"><span class='Ref_to_EnumConst'>PATHKEYS_BETTER2</span></a><span class='Parentheses'>) 
</span>                        <span class='Delimiter'>{ 
</span>                            <a href="pathnode.c.html#LN444"><span class='Ref_To_Local'>outercmp</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/bitmapset.h.html#LN74"><span class='Ref_to_Proto'>bms_subset_compare</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN972"><span class='Ref_to_Macro'>PATH_REQ_OUTER</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN411"><span class='Ref_to_Parameter'>new_path</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                                   <a href="../../../include/nodes/relation.h.html#LN972"><span class='Ref_to_Macro'>PATH_REQ_OUTER</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN440"><span class='Ref_To_Local'>old_path</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                            <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="pathnode.c.html#LN444"><span class='Ref_To_Local'>outercmp</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/bitmapset.h.html#LN46"><span class='Ref_to_EnumConst'>BMS_EQUAL</span></a> <span class='Operator'>|| 
</span>                                 <a href="pathnode.c.html#LN444"><span class='Ref_To_Local'>outercmp</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/bitmapset.h.html#LN47"><span class='Ref_to_EnumConst'>BMS_SUBSET1</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>                                <a href="pathnode.c.html#LN411"><span class='Ref_to_Parameter'>new_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a> <span class='Operator'>&LT;= </span><a href="pathnode.c.html#LN440"><span class='Ref_To_Local'>old_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a> <span class='Operator'>&& 
</span>                                <a href="pathnode.c.html#LN411"><span class='Ref_to_Parameter'>new_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a> <span class='Operator'>&GT;= </span><a href="pathnode.c.html#LN440"><span class='Ref_To_Local'>old_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a><span class='Parentheses'>)</span> 
                                <a href="pathnode.c.html#LN441"><span class='Ref_To_Local'>remove_old</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* new dominates old */ 
</span>                        <span class='Delimiter'>} 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>case</span> <a href="pathnode.c.html#LN36"><span class='Ref_to_EnumConst'>COSTS_BETTER2</span></a><span class='Operator'>: 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN443"><span class='Ref_To_Local'>keyscmp</span></a> <span class='Operator'>!= </span><a href="../../../include/optimizer/paths.h.html#LN177"><span class='Ref_to_EnumConst'>PATHKEYS_BETTER1</span></a><span class='Parentheses'>) 
</span>                        <span class='Delimiter'>{ 
</span>                            <a href="pathnode.c.html#LN444"><span class='Ref_To_Local'>outercmp</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/bitmapset.h.html#LN74"><span class='Ref_to_Proto'>bms_subset_compare</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN972"><span class='Ref_to_Macro'>PATH_REQ_OUTER</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN411"><span class='Ref_to_Parameter'>new_path</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                                   <a href="../../../include/nodes/relation.h.html#LN972"><span class='Ref_to_Macro'>PATH_REQ_OUTER</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN440"><span class='Ref_To_Local'>old_path</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                            <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="pathnode.c.html#LN444"><span class='Ref_To_Local'>outercmp</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/bitmapset.h.html#LN46"><span class='Ref_to_EnumConst'>BMS_EQUAL</span></a> <span class='Operator'>|| 
</span>                                 <a href="pathnode.c.html#LN444"><span class='Ref_To_Local'>outercmp</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/bitmapset.h.html#LN48"><span class='Ref_to_EnumConst'>BMS_SUBSET2</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>                                <a href="pathnode.c.html#LN411"><span class='Ref_to_Parameter'>new_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a> <span class='Operator'>&GT;= </span><a href="pathnode.c.html#LN440"><span class='Ref_To_Local'>old_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a> <span class='Operator'>&& 
</span>                                <a href="pathnode.c.html#LN411"><span class='Ref_to_Parameter'>new_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a> <span class='Operator'>&LT;= </span><a href="pathnode.c.html#LN440"><span class='Ref_To_Local'>old_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a><span class='Parentheses'>)</span> 
                                <a href="pathnode.c.html#LN413"><span class='Ref_To_Local'>accept_new</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* old dominates new */ 
</span>                        <span class='Delimiter'>} 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>case</span> <a href="pathnode.c.html#LN37"><span class='Ref_to_EnumConst'>COSTS_DIFFERENT</span></a><span class='Operator'>: 
</span> 
                        <span class='Comment_Multi_Line'>/* 
                         * can't get here, but keep this case to keep compiler 
                         * quiet 
                         */ 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch costcmp &raquo; </span> 
            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if keyscmp!=PATHKEYS_DIF... &raquo; </span> 
        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if costcmp!=COSTS_DIFFER... &raquo; </span> 
 
        <span class='Comment_Multi_Line'>/* 
         * Remove current element from pathlist if dominated by new. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN441"><span class='Ref_To_Local'>remove_old</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="pathnode.c.html#LN411"><span class='Ref_to_Parameter'>parent_rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN538"><span class='Ref_to_Member'>pathlist</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN238"><span class='Ref_to_Proto'>list_delete_cell</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN411"><span class='Ref_to_Parameter'>parent_rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN538"><span class='Ref_to_Member'>pathlist</span></a><span class='Delimiter'>, 
</span>                                                    <a href="pathnode.c.html#LN416"><span class='Ref_To_Local'>p1</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN417"><span class='Ref_To_Local'>p1_prev</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * Delete the data pointed-to by the deleted cell, if possible 
             */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN440"><span class='Ref_To_Local'>old_path</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/relation.h.html#LN1027"><span class='Ref_to_Struct'>IndexPath</span></a><span class='Parentheses'>))</span> 
                <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN440"><span class='Ref_To_Local'>old_path</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Comment_Multi_Line'>/* p1_prev does not advance */ 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* new belongs after this old path if it has cost &GT;= old's */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN411"><span class='Ref_to_Parameter'>new_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a> <span class='Operator'>&GT;= </span><a href="pathnode.c.html#LN440"><span class='Ref_To_Local'>old_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a><span class='Parentheses'>) 
</span>                <a href="pathnode.c.html#LN414"><span class='Ref_To_Local'>insert_after</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN416"><span class='Ref_To_Local'>p1</span></a><span class='Delimiter'>; 
</span>            <span class='Comment_Multi_Line'>/* p1_prev advances */ 
</span>            <a href="pathnode.c.html#LN417"><span class='Ref_To_Local'>p1_prev</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN416"><span class='Ref_To_Local'>p1</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * If we found an old path that dominates new_path, we can quit 
         * scanning the pathlist; we will not add new_path, and we assume 
         * new_path cannot dominate any other elements of the pathlist. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pathnode.c.html#LN413"><span class='Ref_To_Local'>accept_new</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for p1=list_head(parent_r... &raquo; </span> 
 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN413"><span class='Ref_To_Local'>accept_new</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Accept the new path: insert it at proper place in pathlist */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN414"><span class='Ref_To_Local'>insert_after</span></a><span class='Parentheses'>) 
</span>            <a href="../../nodes/list.c.html#LN207"><span class='Ref_to_Func'>lappend_cell</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN411"><span class='Ref_to_Parameter'>parent_rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN538"><span class='Ref_to_Member'>pathlist</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN414"><span class='Ref_To_Local'>insert_after</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN411"><span class='Ref_to_Parameter'>new_path</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="pathnode.c.html#LN411"><span class='Ref_to_Parameter'>parent_rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN538"><span class='Ref_to_Member'>pathlist</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN215"><span class='Ref_to_Proto'>lcons</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN411"><span class='Ref_to_Parameter'>new_path</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN411"><span class='Ref_to_Parameter'>parent_rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN538"><span class='Ref_to_Member'>pathlist</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Reject and recycle the new path */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN411"><span class='Ref_to_Parameter'>new_path</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/relation.h.html#LN1027"><span class='Ref_to_Struct'>IndexPath</span></a><span class='Parentheses'>))</span> 
            <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN411"><span class='Ref_to_Parameter'>new_path</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
}</span><span class='Auto_Annotations'> &laquo; end add_path &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * add_path_precheck 
 *    Check whether a proposed new path could possibly get accepted. 
 *    We assume we know the path's pathkeys and parameterization accurately, 
 *    and have lower bounds for its costs. 
 * 
 * Note that we do not know the path's rowcount, since getting an estimate for 
 * that is too expensive to do before prechecking.  We assume here that paths 
 * of a superset parameterization will generate fewer rows; if that holds, 
 * then paths with different parameterizations cannot dominate each other 
 * and so we can simply ignore existing paths of another parameterization. 
 * (In the infrequent cases where that rule of thumb fails, add_path will 
 * get rid of the inferior path.) 
 * 
 * At the time this is called, we haven't actually built a Path structure, 
 * so the required information has to be passed piecemeal. 
 */ 
</span><span class='Keyword'>bool 
</span><a name="LN646"></a><span class='Declare_Function'>add_path_precheck</span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>parent_rel</span><span class='Delimiter'>, 
</span><a name="LN647"></a>                  <a href="../../../include/nodes/nodes.h.html#LN638"><span class='Ref_to_Typedef'>Cost</span></a> <span class='Declare_Parameter'>startup_cost</span><span class='Delimiter'>, </span><a href="../../../include/nodes/nodes.h.html#LN638"><span class='Ref_to_Typedef'>Cost</span></a> <span class='Declare_Parameter'>total_cost</span><span class='Delimiter'>, 
</span><a name="LN648"></a>                  <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pathkeys</span><span class='Delimiter'>, </span><a href="../../../include/nodes/relation.h.html#LN27"><span class='Ref_to_Typedef'>Relids</span></a> <span class='Declare_Parameter'>required_outer</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN650"></a>    <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>new_path_pathkeys</span><span class='Delimiter'>; 
</span><a name="LN651"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>consider_startup</span><span class='Delimiter'>; 
</span><a name="LN652"></a>    <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>p1</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Pretend parameterized paths have no pathkeys, per add_path policy */ 
</span>    <a href="pathnode.c.html#LN650"><span class='Ref_To_Local'>new_path_pathkeys</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN648"><span class='Ref_to_Parameter'>required_outer</span></a> <span class='Operator'>? </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a> <span class='Operator'>: </span><a href="pathnode.c.html#LN648"><span class='Ref_to_Parameter'>pathkeys</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Decide whether new path's startup cost is interesting */ 
</span>    <a href="pathnode.c.html#LN651"><span class='Ref_To_Local'>consider_startup</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN648"><span class='Ref_to_Parameter'>required_outer</span></a> <span class='Operator'>? </span><a href="pathnode.c.html#LN646"><span class='Ref_to_Parameter'>parent_rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN531"><span class='Ref_to_Member'>consider_param_startup</span></a> <span class='Operator'>: </span><a href="pathnode.c.html#LN646"><span class='Ref_to_Parameter'>parent_rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN530"><span class='Ref_to_Member'>consider_startup</span></a><span class='Delimiter'>; 
</span> 
    <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN652"><span class='Ref_To_Local'>p1</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN646"><span class='Ref_to_Parameter'>parent_rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN538"><span class='Ref_to_Member'>pathlist</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN662"></a>        <a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>old_path</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN652"><span class='Ref_To_Local'>p1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN663"></a>        <a href="../../../include/optimizer/paths.h.html#LN174"><span class='Ref_to_Typedef'>PathKeysComparison</span></a> <span class='Declare_Local'>keyscmp</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * We are looking for an old_path with the same parameterization (and 
         * by assumption the same rowcount) that dominates the new path on 
         * pathkeys as well as both cost metrics.  If we find one, we can 
         * reject the new path. 
         * 
         * Cost comparisons here should match compare_path_costs_fuzzily. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN647"><span class='Ref_to_Parameter'>total_cost</span></a> <span class='Operator'>&GT; </span><a href="pathnode.c.html#LN662"><span class='Ref_To_Local'>old_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a> <span class='Operator'>* </span><a href="pathnode.c.html#LN45"><span class='Ref_to_Const'>STD_FUZZ_FACTOR</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* new path can win on startup cost only if consider_startup */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN647"><span class='Ref_to_Parameter'>startup_cost</span></a> <span class='Operator'>&GT; </span><a href="pathnode.c.html#LN662"><span class='Ref_To_Local'>old_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a> <span class='Operator'>* </span><a href="pathnode.c.html#LN45"><span class='Ref_to_Const'>STD_FUZZ_FACTOR</span></a> <span class='Operator'>|| 
</span>                <span class='Operator'>!</span><a href="pathnode.c.html#LN651"><span class='Ref_To_Local'>consider_startup</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* new path loses on cost, so check pathkeys... */ 
</span><a name="LN680"></a>                <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>old_path_pathkeys</span><span class='Delimiter'>; 
</span> 
                <a href="pathnode.c.html#LN680"><span class='Ref_To_Local'>old_path_pathkeys</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN662"><span class='Ref_To_Local'>old_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN955"><span class='Ref_to_Member'>param_info</span></a> <span class='Operator'>? </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a> <span class='Operator'>: </span><a href="pathnode.c.html#LN662"><span class='Ref_To_Local'>old_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a><span class='Delimiter'>; 
</span>                <a href="pathnode.c.html#LN663"><span class='Ref_To_Local'>keyscmp</span></a> <span class='Operator'>= </span><a href="../../../include/optimizer/paths.h.html#LN182"><span class='Ref_to_Proto'>compare_pathkeys</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN650"><span class='Ref_To_Local'>new_path_pathkeys</span></a><span class='Delimiter'>, 
</span>                                           <a href="pathnode.c.html#LN680"><span class='Ref_To_Local'>old_path_pathkeys</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN663"><span class='Ref_To_Local'>keyscmp</span></a> <span class='Operator'>== </span><a href="../../../include/optimizer/paths.h.html#LN176"><span class='Ref_to_EnumConst'>PATHKEYS_EQUAL</span></a> <span class='Operator'>|| 
</span>                    <a href="pathnode.c.html#LN663"><span class='Ref_To_Local'>keyscmp</span></a> <span class='Operator'>== </span><a href="../../../include/optimizer/paths.h.html#LN178"><span class='Ref_to_EnumConst'>PATHKEYS_BETTER2</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Comment_Multi_Line'>/* new path does not win on pathkeys... */ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/bitmapset.h.html#LN66"><span class='Ref_to_Proto'>bms_equal</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN648"><span class='Ref_to_Parameter'>required_outer</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/relation.h.html#LN972"><span class='Ref_to_Macro'>PATH_REQ_OUTER</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN662"><span class='Ref_To_Local'>old_path</span></a><span class='Parentheses'>)))</span> 
                    <span class='Delimiter'>{ 
</span>                        <span class='Comment_Multi_Line'>/* Found an old path that dominates the new one */ 
</span>                        <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>} 
</span>            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if startup_cost&GT;old_path... &raquo; </span> 
        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if total_cost&GT;old_path-&GT;... &raquo; </span> 
        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * Since the pathlist is sorted by total_cost, we can stop looking 
             * once we reach a path with a total_cost larger than the new 
             * path's. 
             */ 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end add_path_precheck &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * add_partial_path 
 *    Like add_path, our goal here is to consider whether a path is worthy 
 *    of being kept around, but the considerations here are a bit different. 
 *    A partial path is one which can be executed in any number of workers in 
 *    parallel such that each worker will generate a subset of the path's 
 *    overall result. 
 * 
 *    As in add_path, the partial_pathlist is kept sorted with the cheapest 
 *    total path in front.  This is depended on by multiple places, which 
 *    just take the front entry as the cheapest path without searching. 
 * 
 *    We don't generate parameterized partial paths for several reasons.  Most 
 *    importantly, they're not safe to execute, because there's nothing to 
 *    make sure that a parallel scan within the parameterized portion of the 
 *    plan is running with the same value in every worker at the same time. 
 *    Fortunately, it seems unlikely to be worthwhile anyway, because having 
 *    each worker scan the entire outer relation and a subset of the inner 
 *    relation will generally be a terrible plan.  The inner (parameterized) 
 *    side of the plan will be small anyway.  There could be rare cases where 
 *    this wins big - e.g. if join order constraints put a 1-row relation on 
 *    the outer side of the topmost join with a parameterized plan on the inner 
 *    side - but we'll have to be content not to handle such cases until 
 *    somebody builds an executor infrastructure that can cope with them. 
 * 
 *    Because we don't consider parameterized paths here, we also don't 
 *    need to consider the row counts as a measure of quality: every path will 
 *    produce the same number of rows.  Neither do we need to consider startup 
 *    costs: parallelism is only used for plans that will be run to completion. 
 *    Therefore, this routine is much simpler than add_path: it needs to 
 *    consider only pathkeys and total cost. 
 * 
 *    As with add_path, we pfree paths that are found to be dominated by 
 *    another partial path; this requires that there be no other references to 
 *    such paths yet.  Hence, GatherPaths must not be created for a rel until 
 *    we're done creating all partial paths for it.  Unlike add_path, we don't 
 *    take an exception for IndexPaths as partial index paths won't be 
 *    referenced by partial BitmapHeapPaths. 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN751"></a><span class='Declare_Function'>add_partial_path</span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>parent_rel</span><span class='Delimiter'>, </span><a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>new_path</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN753"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>accept_new</span> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* unless we find a superior old path */ 
</span><a name="LN754"></a>    <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>insert_after</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* where to insert new item */ 
</span><a name="LN755"></a>    <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>p1</span><span class='Delimiter'>; 
</span><a name="LN756"></a>    <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>p1_prev</span><span class='Delimiter'>; 
</span><a name="LN757"></a>    <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>p1_next</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Check for query cancel. */ 
</span>    <a href="../../../include/miscadmin.h.html#LN99"><span class='Ref_to_Macro'>CHECK_FOR_INTERRUPTS</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * As in add_path, throw out any paths which are dominated by the new 
     * path, but throw out the new path if some existing path dominates it. 
     */ 
</span>    <a href="pathnode.c.html#LN756"><span class='Ref_To_Local'>p1_prev</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN755"><span class='Ref_To_Local'>p1</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN75"><span class='Ref_to_Func'>list_head</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN751"><span class='Ref_to_Parameter'>parent_rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN540"><span class='Ref_to_Member'>partial_pathlist</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; </span><a href="pathnode.c.html#LN755"><span class='Ref_To_Local'>p1</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>         <a href="pathnode.c.html#LN755"><span class='Ref_To_Local'>p1</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN757"><span class='Ref_To_Local'>p1_next</span></a><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span><a name="LN770"></a>        <a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>old_path</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN755"><span class='Ref_To_Local'>p1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN771"></a>        <span class='Keyword'>bool</span>        <span class='Declare_Local'>remove_old</span> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; </span><span class='Comment_Single_Line'>/* unless new proves superior */ 
</span><a name="LN772"></a>        <a href="../../../include/optimizer/paths.h.html#LN174"><span class='Ref_to_Typedef'>PathKeysComparison</span></a> <span class='Declare_Local'>keyscmp</span><span class='Delimiter'>; 
</span> 
        <a href="pathnode.c.html#LN757"><span class='Ref_To_Local'>p1_next</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN104"><span class='Ref_to_Macro'>lnext</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN755"><span class='Ref_To_Local'>p1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Compare pathkeys. */ 
</span>        <a href="pathnode.c.html#LN772"><span class='Ref_To_Local'>keyscmp</span></a> <span class='Operator'>= </span><a href="../../../include/optimizer/paths.h.html#LN182"><span class='Ref_to_Proto'>compare_pathkeys</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN751"><span class='Ref_to_Parameter'>new_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN770"><span class='Ref_To_Local'>old_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Unless pathkeys are incompable, keep just one of the two paths. */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN772"><span class='Ref_To_Local'>keyscmp</span></a> <span class='Operator'>!= </span><a href="../../../include/optimizer/paths.h.html#LN179"><span class='Ref_to_EnumConst'>PATHKEYS_DIFFERENT</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN751"><span class='Ref_to_Parameter'>new_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a> <span class='Operator'>&GT; </span><a href="pathnode.c.html#LN770"><span class='Ref_To_Local'>old_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a> <span class='Operator'>* </span><a href="pathnode.c.html#LN45"><span class='Ref_to_Const'>STD_FUZZ_FACTOR</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* New path costs more; keep it only if pathkeys are better. */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN772"><span class='Ref_To_Local'>keyscmp</span></a> <span class='Operator'>!= </span><a href="../../../include/optimizer/paths.h.html#LN177"><span class='Ref_to_EnumConst'>PATHKEYS_BETTER1</span></a><span class='Parentheses'>) 
</span>                    <a href="pathnode.c.html#LN753"><span class='Ref_To_Local'>accept_new</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN770"><span class='Ref_To_Local'>old_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a> <span class='Operator'>&GT; </span><a href="pathnode.c.html#LN751"><span class='Ref_to_Parameter'>new_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a> 
                     <span class='Operator'>* </span><a href="pathnode.c.html#LN45"><span class='Ref_to_Const'>STD_FUZZ_FACTOR</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* Old path costs more; keep it only if pathkeys are better. */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN772"><span class='Ref_To_Local'>keyscmp</span></a> <span class='Operator'>!= </span><a href="../../../include/optimizer/paths.h.html#LN178"><span class='Ref_to_EnumConst'>PATHKEYS_BETTER2</span></a><span class='Parentheses'>) 
</span>                    <a href="pathnode.c.html#LN771"><span class='Ref_To_Local'>remove_old</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN772"><span class='Ref_To_Local'>keyscmp</span></a> <span class='Operator'>== </span><a href="../../../include/optimizer/paths.h.html#LN177"><span class='Ref_to_EnumConst'>PATHKEYS_BETTER1</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* Costs are about the same, new path has better pathkeys. */ 
</span>                <a href="pathnode.c.html#LN771"><span class='Ref_To_Local'>remove_old</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN772"><span class='Ref_To_Local'>keyscmp</span></a> <span class='Operator'>== </span><a href="../../../include/optimizer/paths.h.html#LN178"><span class='Ref_to_EnumConst'>PATHKEYS_BETTER2</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* Costs are about the same, old path has better pathkeys. */ 
</span>                <a href="pathnode.c.html#LN753"><span class='Ref_To_Local'>accept_new</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN770"><span class='Ref_To_Local'>old_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a> <span class='Operator'>&GT; </span><a href="pathnode.c.html#LN751"><span class='Ref_to_Parameter'>new_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a> <span class='Operator'>* </span><span class='Number'>1</span><span class='Operator'>.</span><span class='Number'>0000000001</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* Pathkeys are the same, and the old path costs more. */ 
</span>                <a href="pathnode.c.html#LN771"><span class='Ref_To_Local'>remove_old</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* 
                 * Pathkeys are the same, and new path isn't materially 
                 * cheaper. 
                 */ 
</span>                <a href="pathnode.c.html#LN753"><span class='Ref_To_Local'>accept_new</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if keyscmp!=PATHKEYS_DIF... &raquo; </span> 
 
        <span class='Comment_Multi_Line'>/* 
         * Remove current element from partial_pathlist if dominated by new. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN771"><span class='Ref_To_Local'>remove_old</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="pathnode.c.html#LN751"><span class='Ref_to_Parameter'>parent_rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN540"><span class='Ref_to_Member'>partial_pathlist</span></a> <span class='Operator'>= 
</span>                <a href="../../../include/nodes/pg_list.h.html#LN238"><span class='Ref_to_Proto'>list_delete_cell</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN751"><span class='Ref_to_Parameter'>parent_rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN540"><span class='Ref_to_Member'>partial_pathlist</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN755"><span class='Ref_To_Local'>p1</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN756"><span class='Ref_To_Local'>p1_prev</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN770"><span class='Ref_To_Local'>old_path</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Comment_Multi_Line'>/* p1_prev does not advance */ 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* new belongs after this old path if it has cost &GT;= old's */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN751"><span class='Ref_to_Parameter'>new_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a> <span class='Operator'>&GT;= </span><a href="pathnode.c.html#LN770"><span class='Ref_To_Local'>old_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a><span class='Parentheses'>) 
</span>                <a href="pathnode.c.html#LN754"><span class='Ref_To_Local'>insert_after</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN755"><span class='Ref_To_Local'>p1</span></a><span class='Delimiter'>; 
</span>            <span class='Comment_Multi_Line'>/* p1_prev advances */ 
</span>            <a href="pathnode.c.html#LN756"><span class='Ref_To_Local'>p1_prev</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN755"><span class='Ref_To_Local'>p1</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * If we found an old path that dominates new_path, we can quit 
         * scanning the partial_pathlist; we will not add new_path, and we 
         * assume new_path cannot dominate any later path. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pathnode.c.html#LN753"><span class='Ref_To_Local'>accept_new</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for p1=list_head(parent_r... &raquo; </span> 
 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN753"><span class='Ref_To_Local'>accept_new</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Accept the new path: insert it at proper place */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN754"><span class='Ref_To_Local'>insert_after</span></a><span class='Parentheses'>) 
</span>            <a href="../../nodes/list.c.html#LN207"><span class='Ref_to_Func'>lappend_cell</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN751"><span class='Ref_to_Parameter'>parent_rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN540"><span class='Ref_to_Member'>partial_pathlist</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN754"><span class='Ref_To_Local'>insert_after</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN751"><span class='Ref_to_Parameter'>new_path</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="pathnode.c.html#LN751"><span class='Ref_to_Parameter'>parent_rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN540"><span class='Ref_to_Member'>partial_pathlist</span></a> <span class='Operator'>= 
</span>                <a href="../../../include/nodes/pg_list.h.html#LN215"><span class='Ref_to_Proto'>lcons</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN751"><span class='Ref_to_Parameter'>new_path</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN751"><span class='Ref_to_Parameter'>parent_rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN540"><span class='Ref_to_Member'>partial_pathlist</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Reject and recycle the new path */ 
</span>        <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN751"><span class='Ref_to_Parameter'>new_path</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
}</span><span class='Auto_Annotations'> &laquo; end add_partial_path &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * add_partial_path_precheck 
 *    Check whether a proposed new partial path could possibly get accepted. 
 * 
 * Unlike add_path_precheck, we can ignore startup cost and parameterization, 
 * since they don't matter for partial paths (see add_partial_path).  But 
 * we do want to make sure we don't add a partial path if there's already 
 * a complete path that dominates it, since in that case the proposed path 
 * is surely a loser. 
 */ 
</span><span class='Keyword'>bool 
</span><a name="LN875"></a><span class='Declare_Function'>add_partial_path_precheck</span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>parent_rel</span><span class='Delimiter'>, </span><a href="../../../include/nodes/nodes.h.html#LN638"><span class='Ref_to_Typedef'>Cost</span></a> <span class='Declare_Parameter'>total_cost</span><span class='Delimiter'>, 
</span><a name="LN876"></a>                          <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pathkeys</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN878"></a>    <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>p1</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Our goal here is twofold.  First, we want to find out whether this path 
     * is clearly inferior to some existing partial path.  If so, we want to 
     * reject it immediately.  Second, we want to find out whether this path 
     * is clearly superior to some existing partial path -- at least, modulo 
     * final cost computations.  If so, we definitely want to consider it. 
     * 
     * Unlike add_path(), we always compare pathkeys here.  This is because we 
     * expect partial_pathlist to be very short, and getting a definitive 
     * answer at this stage avoids the need to call add_path_precheck. 
     */ 
</span>    <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN878"><span class='Ref_To_Local'>p1</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN875"><span class='Ref_to_Parameter'>parent_rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN540"><span class='Ref_to_Member'>partial_pathlist</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN893"></a>        <a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>old_path</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN878"><span class='Ref_To_Local'>p1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN894"></a>        <a href="../../../include/optimizer/paths.h.html#LN174"><span class='Ref_to_Typedef'>PathKeysComparison</span></a> <span class='Declare_Local'>keyscmp</span><span class='Delimiter'>; 
</span> 
        <a href="pathnode.c.html#LN894"><span class='Ref_To_Local'>keyscmp</span></a> <span class='Operator'>= </span><a href="../../../include/optimizer/paths.h.html#LN182"><span class='Ref_to_Proto'>compare_pathkeys</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN876"><span class='Ref_to_Parameter'>pathkeys</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN893"><span class='Ref_To_Local'>old_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN894"><span class='Ref_To_Local'>keyscmp</span></a> <span class='Operator'>!= </span><a href="../../../include/optimizer/paths.h.html#LN179"><span class='Ref_to_EnumConst'>PATHKEYS_DIFFERENT</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN875"><span class='Ref_to_Parameter'>total_cost</span></a> <span class='Operator'>&GT; </span><a href="pathnode.c.html#LN893"><span class='Ref_To_Local'>old_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a> <span class='Operator'>* </span><a href="pathnode.c.html#LN45"><span class='Ref_to_Const'>STD_FUZZ_FACTOR</span></a> <span class='Operator'>&& 
</span>                <a href="pathnode.c.html#LN894"><span class='Ref_To_Local'>keyscmp</span></a> <span class='Operator'>!= </span><a href="../../../include/optimizer/paths.h.html#LN177"><span class='Ref_to_EnumConst'>PATHKEYS_BETTER1</span></a><span class='Parentheses'>) 
</span>                <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN893"><span class='Ref_To_Local'>old_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a> <span class='Operator'>&GT; </span><a href="pathnode.c.html#LN875"><span class='Ref_to_Parameter'>total_cost</span></a> <span class='Operator'>* </span><a href="pathnode.c.html#LN45"><span class='Ref_to_Const'>STD_FUZZ_FACTOR</span></a> <span class='Operator'>&& 
</span>                <a href="pathnode.c.html#LN894"><span class='Ref_To_Local'>keyscmp</span></a> <span class='Operator'>!= </span><a href="../../../include/optimizer/paths.h.html#LN178"><span class='Ref_to_EnumConst'>PATHKEYS_BETTER2</span></a><span class='Parentheses'>) 
</span>                <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * This path is neither clearly inferior to an existing partial path nor 
     * clearly good enough that it might replace one.  Compare it to 
     * non-parallel plans.  If it loses even before accounting for the cost of 
     * the Gather node, we should definitely reject it. 
     * 
     * Note that we pass the total_cost to add_path_precheck twice.  This is 
     * because it's never advantageous to consider the startup cost of a 
     * partial path; the resulting plans, if run in parallel, will be run to 
     * completion. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/optimizer/pathnode.h.html#LN28"><span class='Ref_to_Proto'>add_path_precheck</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN875"><span class='Ref_to_Parameter'>parent_rel</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN875"><span class='Ref_to_Parameter'>total_cost</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN875"><span class='Ref_to_Parameter'>total_cost</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN876"><span class='Ref_to_Parameter'>pathkeys</span></a><span class='Delimiter'>, 
</span>                           <span class='Null_Value'>NULL</span><span class='Parentheses'>))</span> 
        <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end add_partial_path_precheck &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/***************************************************************************** 
 *      PATH NODE CREATION ROUTINES 
 *****************************************************************************/ 
</span> 
<span class='Comment_Multi_Line'>/* 
 * create_seqscan_path 
 *    Creates a path corresponding to a sequential scan, returning the 
 *    pathnode. 
 */ 
</span><a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>* 
</span><a name="LN937"></a><span class='Declare_Function'>create_seqscan_path</span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN150"><span class='Ref_to_Struct'>PlannerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>root</span><span class='Delimiter'>, </span><a href="../../../include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rel</span><span class='Delimiter'>, 
</span><a name="LN938"></a>                    <a href="../../../include/nodes/relation.h.html#LN27"><span class='Ref_to_Typedef'>Relids</span></a> <span class='Declare_Parameter'>required_outer</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>parallel_workers</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN940"></a>    <a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>pathnode</span> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN556"><span class='Ref_to_Macro'>makeNode</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pathnode.c.html#LN940"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN950"><span class='Ref_to_Member'>pathtype</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN53"><span class='Ref_to_EnumConst'>T_SeqScan</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN940"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN952"><span class='Ref_to_Member'>parent</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN937"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN940"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN953"><span class='Ref_to_Member'>pathtarget</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN937"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN535"><span class='Ref_to_Member'>reltarget</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN940"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN955"><span class='Ref_to_Member'>param_info</span></a> <span class='Operator'>= </span><a href="../../../include/optimizer/pathnode.h.html#LN275"><span class='Ref_to_Proto'>get_baserel_parampathinfo</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN937"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN937"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>, 
</span>                                                     <a href="pathnode.c.html#LN938"><span class='Ref_to_Parameter'>required_outer</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN940"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN957"><span class='Ref_to_Member'>parallel_aware</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN938"><span class='Ref_to_Parameter'>parallel_workers</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span> <span class='Operator'>? </span><span class='Boolean'>true </span><span class='Operator'>: </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN940"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN937"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN532"><span class='Ref_to_Member'>consider_parallel</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN940"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN959"><span class='Ref_to_Member'>parallel_workers</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN938"><span class='Ref_to_Parameter'>parallel_workers</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN940"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>;</span>   <span class='Comment_Single_Line'>/* seqscan has unordered result */ 
</span> 
    <a href="../../../include/optimizer/cost.h.html#LN74"><span class='Ref_to_Proto'>cost_seqscan</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN940"><span class='Ref_To_Local'>pathnode</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN937"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN937"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN940"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN955"><span class='Ref_to_Member'>param_info</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pathnode.c.html#LN940"><span class='Ref_To_Local'>pathnode</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end create_seqscan_path &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * create_samplescan_path 
 *    Creates a path node for a sampled table scan. 
 */ 
</span><a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>* 
</span><a name="LN962"></a><span class='Declare_Function'>create_samplescan_path</span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN150"><span class='Ref_to_Struct'>PlannerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>root</span><span class='Delimiter'>, </span><a href="../../../include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rel</span><span class='Delimiter'>, </span><a href="../../../include/nodes/relation.h.html#LN27"><span class='Ref_to_Typedef'>Relids</span></a> <span class='Declare_Parameter'>required_outer</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN964"></a>    <a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>pathnode</span> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN556"><span class='Ref_to_Macro'>makeNode</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pathnode.c.html#LN964"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN950"><span class='Ref_to_Member'>pathtype</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN54"><span class='Ref_to_EnumConst'>T_SampleScan</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN964"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN952"><span class='Ref_to_Member'>parent</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN962"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN964"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN953"><span class='Ref_to_Member'>pathtarget</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN962"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN535"><span class='Ref_to_Member'>reltarget</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN964"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN955"><span class='Ref_to_Member'>param_info</span></a> <span class='Operator'>= </span><a href="../../../include/optimizer/pathnode.h.html#LN275"><span class='Ref_to_Proto'>get_baserel_parampathinfo</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN962"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN962"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>, 
</span>                                                     <a href="pathnode.c.html#LN962"><span class='Ref_to_Parameter'>required_outer</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN964"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN957"><span class='Ref_to_Member'>parallel_aware</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN964"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN962"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN532"><span class='Ref_to_Member'>consider_parallel</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN964"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN959"><span class='Ref_to_Member'>parallel_workers</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN964"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>;</span>   <span class='Comment_Single_Line'>/* samplescan has unordered result */ 
</span> 
    <a href="../../../include/optimizer/cost.h.html#LN76"><span class='Ref_to_Proto'>cost_samplescan</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN964"><span class='Ref_To_Local'>pathnode</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN962"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN962"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN964"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN955"><span class='Ref_to_Member'>param_info</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pathnode.c.html#LN964"><span class='Ref_To_Local'>pathnode</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * create_index_path 
 *    Creates a path node for an index scan. 
 * 
 * 'index' is a usable index. 
 * 'indexclauses' is a list of RestrictInfo nodes representing clauses 
 *          to be used as index qual conditions in the scan. 
 * 'indexclausecols' is an integer list of index column numbers (zero based) 
 *          the indexclauses can be used with. 
 * 'indexorderbys' is a list of bare expressions (no RestrictInfos) 
 *          to be used as index ordering operators in the scan. 
 * 'indexorderbycols' is an integer list of index column numbers (zero based) 
 *          the ordering operators can be used with. 
 * 'pathkeys' describes the ordering of the path. 
 * 'indexscandir' is ForwardScanDirection or BackwardScanDirection 
 *          for an ordered index, or NoMovementScanDirection for 
 *          an unordered index. 
 * 'indexonly' is true if an index-only scan is wanted. 
 * 'required_outer' is the set of outer relids for a parameterized path. 
 * 'loop_count' is the number of repetitions of the indexscan to factor into 
 *      estimates of caching behavior. 
 * 'partial_path' is true if constructing a parallel index scan path. 
 * 
 * Returns the new path node. 
 */ 
</span><a href="../../../include/nodes/relation.h.html#LN1027"><span class='Ref_to_Struct'>IndexPath</span></a> <span class='Operator'>* 
</span><a name="LN1007"></a><span class='Declare_Function'>create_index_path</span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN150"><span class='Ref_to_Struct'>PlannerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>root</span><span class='Delimiter'>, 
</span><a name="LN1008"></a>                  <a href="../../../include/nodes/relation.h.html#LN626"><span class='Ref_to_Struct'>IndexOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>index</span><span class='Delimiter'>, 
</span><a name="LN1009"></a>                  <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>indexclauses</span><span class='Delimiter'>, 
</span><a name="LN1010"></a>                  <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>indexclausecols</span><span class='Delimiter'>, 
</span><a name="LN1011"></a>                  <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>indexorderbys</span><span class='Delimiter'>, 
</span><a name="LN1012"></a>                  <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>indexorderbycols</span><span class='Delimiter'>, 
</span><a name="LN1013"></a>                  <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pathkeys</span><span class='Delimiter'>, 
</span><a name="LN1014"></a>                  <a href="../../../include/access/sdir.h.html#LN21"><span class='Ref_to_Enum'>ScanDirection</span></a> <span class='Declare_Parameter'>indexscandir</span><span class='Delimiter'>, 
</span><a name="LN1015"></a>                  <span class='Keyword'>bool </span><span class='Declare_Parameter'>indexonly</span><span class='Delimiter'>, 
</span><a name="LN1016"></a>                  <a href="../../../include/nodes/relation.h.html#LN27"><span class='Ref_to_Typedef'>Relids</span></a> <span class='Declare_Parameter'>required_outer</span><span class='Delimiter'>, 
</span><a name="LN1017"></a>                  <span class='Keyword'>double </span><span class='Declare_Parameter'>loop_count</span><span class='Delimiter'>, 
</span><a name="LN1018"></a>                  <span class='Keyword'>bool </span><span class='Declare_Parameter'>partial_path</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1020"></a>    <a href="../../../include/nodes/relation.h.html#LN1027"><span class='Ref_to_Struct'>IndexPath</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>pathnode</span> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN556"><span class='Ref_to_Macro'>makeNode</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN1027"><span class='Ref_to_Struct'>IndexPath</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1021"></a>    <a href="../../../include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>rel</span> <span class='Operator'>= </span><a href="pathnode.c.html#LN1008"><span class='Ref_to_Parameter'>index</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN632"><span class='Ref_to_Member'>rel</span></a><span class='Delimiter'>; 
</span><a name="LN1022"></a>    <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>indexquals</span><span class='Delimiter'>, 
</span><a name="LN1023"></a>               <span class='Operator'>*</span><span class='Declare_Local'>indexqualcols</span><span class='Delimiter'>; 
</span> 
    <a href="pathnode.c.html#LN1020"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1029"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN950"><span class='Ref_to_Member'>pathtype</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1015"><span class='Ref_to_Parameter'>indexonly</span></a> <span class='Operator'>? </span><a href="../../../include/nodes/nodes.h.html#LN56"><span class='Ref_to_EnumConst'>T_IndexOnlyScan</span></a> <span class='Operator'>: </span><a href="../../../include/nodes/nodes.h.html#LN55"><span class='Ref_to_EnumConst'>T_IndexScan</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1020"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1029"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN952"><span class='Ref_to_Member'>parent</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1021"><span class='Ref_To_Local'>rel</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1020"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1029"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN953"><span class='Ref_to_Member'>pathtarget</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1021"><span class='Ref_To_Local'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN535"><span class='Ref_to_Member'>reltarget</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1020"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1029"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN955"><span class='Ref_to_Member'>param_info</span></a> <span class='Operator'>= </span><a href="../../../include/optimizer/pathnode.h.html#LN275"><span class='Ref_to_Proto'>get_baserel_parampathinfo</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1007"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1021"><span class='Ref_To_Local'>rel</span></a><span class='Delimiter'>, 
</span>                                                          <a href="pathnode.c.html#LN1016"><span class='Ref_to_Parameter'>required_outer</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1020"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1029"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN957"><span class='Ref_to_Member'>parallel_aware</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1020"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1029"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1021"><span class='Ref_To_Local'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN532"><span class='Ref_to_Member'>consider_parallel</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1020"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1029"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN959"><span class='Ref_to_Member'>parallel_workers</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1020"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1029"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1013"><span class='Ref_to_Parameter'>pathkeys</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Convert clauses to indexquals the executor can handle */ 
</span>    <a href="../../../include/optimizer/paths.h.html#LN77"><span class='Ref_to_Proto'>expand_indexqual_conditions</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1008"><span class='Ref_to_Parameter'>index</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1009"><span class='Ref_to_Parameter'>indexclauses</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1010"><span class='Ref_to_Parameter'>indexclausecols</span></a><span class='Delimiter'>, 
</span>                                <span class='Operator'>&</span><a href="pathnode.c.html#LN1022"><span class='Ref_To_Local'>indexquals</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pathnode.c.html#LN1023"><span class='Ref_To_Local'>indexqualcols</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Fill in the pathnode */ 
</span>    <a href="pathnode.c.html#LN1020"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1030"><span class='Ref_to_Member'>indexinfo</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1008"><span class='Ref_to_Parameter'>index</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1020"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1031"><span class='Ref_to_Member'>indexclauses</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1009"><span class='Ref_to_Parameter'>indexclauses</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1020"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1032"><span class='Ref_to_Member'>indexquals</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1022"><span class='Ref_To_Local'>indexquals</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1020"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1033"><span class='Ref_to_Member'>indexqualcols</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1023"><span class='Ref_To_Local'>indexqualcols</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1020"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1034"><span class='Ref_to_Member'>indexorderbys</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1011"><span class='Ref_to_Parameter'>indexorderbys</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1020"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1035"><span class='Ref_to_Member'>indexorderbycols</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1012"><span class='Ref_to_Parameter'>indexorderbycols</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1020"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1036"><span class='Ref_to_Member'>indexscandir</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1014"><span class='Ref_to_Parameter'>indexscandir</span></a><span class='Delimiter'>; 
</span> 
    <a href="../../../include/optimizer/cost.h.html#LN78"><span class='Ref_to_Proto'>cost_index</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1020"><span class='Ref_To_Local'>pathnode</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1007"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1017"><span class='Ref_to_Parameter'>loop_count</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1018"><span class='Ref_to_Parameter'>partial_path</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pathnode.c.html#LN1020"><span class='Ref_To_Local'>pathnode</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end create_index_path &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * create_bitmap_heap_path 
 *    Creates a path node for a bitmap scan. 
 * 
 * 'bitmapqual' is a tree of IndexPath, BitmapAndPath, and BitmapOrPath nodes. 
 * 'required_outer' is the set of outer relids for a parameterized path. 
 * 'loop_count' is the number of repetitions of the indexscan to factor into 
 *      estimates of caching behavior. 
 * 
 * loop_count should match the value used when creating the component 
 * IndexPaths. 
 */ 
</span><a href="../../../include/nodes/relation.h.html#LN1058"><span class='Ref_to_Struct'>BitmapHeapPath</span></a> <span class='Operator'>* 
</span><a name="LN1066"></a><span class='Declare_Function'>create_bitmap_heap_path</span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN150"><span class='Ref_to_Struct'>PlannerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>root</span><span class='Delimiter'>, 
</span><a name="LN1067"></a>                        <a href="../../../include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rel</span><span class='Delimiter'>, 
</span><a name="LN1068"></a>                        <a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>bitmapqual</span><span class='Delimiter'>, 
</span><a name="LN1069"></a>                        <a href="../../../include/nodes/relation.h.html#LN27"><span class='Ref_to_Typedef'>Relids</span></a> <span class='Declare_Parameter'>required_outer</span><span class='Delimiter'>, 
</span><a name="LN1070"></a>                        <span class='Keyword'>double </span><span class='Declare_Parameter'>loop_count</span><span class='Delimiter'>, 
</span><a name="LN1071"></a>                        <span class='Keyword'>int </span><span class='Declare_Parameter'>parallel_degree</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1073"></a>    <a href="../../../include/nodes/relation.h.html#LN1058"><span class='Ref_to_Struct'>BitmapHeapPath</span></a> <span class='Operator'>*</span><span class='Declare_Local'>pathnode</span> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN556"><span class='Ref_to_Macro'>makeNode</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN1058"><span class='Ref_to_Struct'>BitmapHeapPath</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pathnode.c.html#LN1073"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1060"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN950"><span class='Ref_to_Member'>pathtype</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN58"><span class='Ref_to_EnumConst'>T_BitmapHeapScan</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1073"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1060"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN952"><span class='Ref_to_Member'>parent</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1067"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1073"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1060"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN953"><span class='Ref_to_Member'>pathtarget</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1067"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN535"><span class='Ref_to_Member'>reltarget</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1073"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1060"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN955"><span class='Ref_to_Member'>param_info</span></a> <span class='Operator'>= </span><a href="../../../include/optimizer/pathnode.h.html#LN275"><span class='Ref_to_Proto'>get_baserel_parampathinfo</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1066"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1067"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>, 
</span>                                                          <a href="pathnode.c.html#LN1069"><span class='Ref_to_Parameter'>required_outer</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1073"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1060"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN957"><span class='Ref_to_Member'>parallel_aware</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1071"><span class='Ref_to_Parameter'>parallel_degree</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span> <span class='Operator'>? </span><span class='Boolean'>true </span><span class='Operator'>: </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1073"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1060"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1067"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN532"><span class='Ref_to_Member'>consider_parallel</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1073"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1060"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN959"><span class='Ref_to_Member'>parallel_workers</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1071"><span class='Ref_to_Parameter'>parallel_degree</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1073"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1060"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* always unordered */ 
</span> 
    <a href="pathnode.c.html#LN1073"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1061"><span class='Ref_to_Member'>bitmapqual</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1068"><span class='Ref_to_Parameter'>bitmapqual</span></a><span class='Delimiter'>; 
</span> 
    <a href="../../../include/optimizer/cost.h.html#LN80"><span class='Ref_to_Proto'>cost_bitmap_heap_scan</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pathnode.c.html#LN1073"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1060"><span class='Ref_to_Member'>path</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1066"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1067"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>, 
</span>                          <a href="pathnode.c.html#LN1073"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1060"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN955"><span class='Ref_to_Member'>param_info</span></a><span class='Delimiter'>, 
</span>                          <a href="pathnode.c.html#LN1068"><span class='Ref_to_Parameter'>bitmapqual</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1070"><span class='Ref_to_Parameter'>loop_count</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pathnode.c.html#LN1073"><span class='Ref_To_Local'>pathnode</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end create_bitmap_heap_path &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * create_bitmap_and_path 
 *    Creates a path node representing a BitmapAnd. 
 */ 
</span><a href="../../../include/nodes/relation.h.html#LN1070"><span class='Ref_to_Struct'>BitmapAndPath</span></a> <span class='Operator'>* 
</span><a name="LN1099"></a><span class='Declare_Function'>create_bitmap_and_path</span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN150"><span class='Ref_to_Struct'>PlannerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>root</span><span class='Delimiter'>, 
</span><a name="LN1100"></a>                       <a href="../../../include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rel</span><span class='Delimiter'>, 
</span><a name="LN1101"></a>                       <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>bitmapquals</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1103"></a>    <a href="../../../include/nodes/relation.h.html#LN1070"><span class='Ref_to_Struct'>BitmapAndPath</span></a> <span class='Operator'>*</span><span class='Declare_Local'>pathnode</span> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN556"><span class='Ref_to_Macro'>makeNode</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN1070"><span class='Ref_to_Struct'>BitmapAndPath</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pathnode.c.html#LN1103"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1072"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN950"><span class='Ref_to_Member'>pathtype</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN50"><span class='Ref_to_EnumConst'>T_BitmapAnd</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1103"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1072"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN952"><span class='Ref_to_Member'>parent</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1100"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1103"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1072"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN953"><span class='Ref_to_Member'>pathtarget</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1100"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN535"><span class='Ref_to_Member'>reltarget</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1103"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1072"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN955"><span class='Ref_to_Member'>param_info</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>;</span>   <span class='Comment_Single_Line'>/* not used in bitmap trees */ 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Currently, a BitmapHeapPath, BitmapAndPath, or BitmapOrPath will be 
     * parallel-safe if and only if rel-&GT;consider_parallel is set.  So, we can 
     * set the flag for this path based only on the relation-level flag, 
     * without actually iterating over the list of children. 
     */ 
</span>    <a href="pathnode.c.html#LN1103"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1072"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN957"><span class='Ref_to_Member'>parallel_aware</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1103"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1072"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1100"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN532"><span class='Ref_to_Member'>consider_parallel</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1103"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1072"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN959"><span class='Ref_to_Member'>parallel_workers</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <a href="pathnode.c.html#LN1103"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1072"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* always unordered */ 
</span> 
    <a href="pathnode.c.html#LN1103"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1073"><span class='Ref_to_Member'>bitmapquals</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1101"><span class='Ref_to_Parameter'>bitmapquals</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* this sets bitmapselectivity as well as the regular cost fields: */ 
</span>    <a href="../../../include/optimizer/cost.h.html#LN83"><span class='Ref_to_Proto'>cost_bitmap_and_node</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1103"><span class='Ref_To_Local'>pathnode</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1099"><span class='Ref_to_Parameter'>root</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pathnode.c.html#LN1103"><span class='Ref_To_Local'>pathnode</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end create_bitmap_and_path &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * create_bitmap_or_path 
 *    Creates a path node representing a BitmapOr. 
 */ 
</span><a href="../../../include/nodes/relation.h.html#LN1083"><span class='Ref_to_Struct'>BitmapOrPath</span></a> <span class='Operator'>* 
</span><a name="LN1135"></a><span class='Declare_Function'>create_bitmap_or_path</span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN150"><span class='Ref_to_Struct'>PlannerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>root</span><span class='Delimiter'>, 
</span><a name="LN1136"></a>                      <a href="../../../include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rel</span><span class='Delimiter'>, 
</span><a name="LN1137"></a>                      <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>bitmapquals</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1139"></a>    <a href="../../../include/nodes/relation.h.html#LN1083"><span class='Ref_to_Struct'>BitmapOrPath</span></a> <span class='Operator'>*</span><span class='Declare_Local'>pathnode</span> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN556"><span class='Ref_to_Macro'>makeNode</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN1083"><span class='Ref_to_Struct'>BitmapOrPath</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pathnode.c.html#LN1139"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1085"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN950"><span class='Ref_to_Member'>pathtype</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN51"><span class='Ref_to_EnumConst'>T_BitmapOr</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1139"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1085"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN952"><span class='Ref_to_Member'>parent</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1136"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1139"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1085"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN953"><span class='Ref_to_Member'>pathtarget</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1136"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN535"><span class='Ref_to_Member'>reltarget</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1139"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1085"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN955"><span class='Ref_to_Member'>param_info</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>;</span>   <span class='Comment_Single_Line'>/* not used in bitmap trees */ 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Currently, a BitmapHeapPath, BitmapAndPath, or BitmapOrPath will be 
     * parallel-safe if and only if rel-&GT;consider_parallel is set.  So, we can 
     * set the flag for this path based only on the relation-level flag, 
     * without actually iterating over the list of children. 
     */ 
</span>    <a href="pathnode.c.html#LN1139"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1085"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN957"><span class='Ref_to_Member'>parallel_aware</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1139"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1085"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1136"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN532"><span class='Ref_to_Member'>consider_parallel</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1139"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1085"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN959"><span class='Ref_to_Member'>parallel_workers</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <a href="pathnode.c.html#LN1139"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1085"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* always unordered */ 
</span> 
    <a href="pathnode.c.html#LN1139"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1086"><span class='Ref_to_Member'>bitmapquals</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1137"><span class='Ref_to_Parameter'>bitmapquals</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* this sets bitmapselectivity as well as the regular cost fields: */ 
</span>    <a href="../../../include/optimizer/cost.h.html#LN84"><span class='Ref_to_Proto'>cost_bitmap_or_node</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1139"><span class='Ref_To_Local'>pathnode</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1135"><span class='Ref_to_Parameter'>root</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pathnode.c.html#LN1139"><span class='Ref_To_Local'>pathnode</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end create_bitmap_or_path &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * create_tidscan_path 
 *    Creates a path corresponding to a scan by TID, returning the pathnode. 
 */ 
</span><a href="../../../include/nodes/relation.h.html#LN1097"><span class='Ref_to_Struct'>TidPath</span></a> <span class='Operator'>* 
</span><a name="LN1171"></a><span class='Declare_Function'>create_tidscan_path</span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN150"><span class='Ref_to_Struct'>PlannerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>root</span><span class='Delimiter'>, </span><a href="../../../include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rel</span><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tidquals</span><span class='Delimiter'>, 
</span><a name="LN1172"></a>                    <a href="../../../include/nodes/relation.h.html#LN27"><span class='Ref_to_Typedef'>Relids</span></a> <span class='Declare_Parameter'>required_outer</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1174"></a>    <a href="../../../include/nodes/relation.h.html#LN1097"><span class='Ref_to_Struct'>TidPath</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>pathnode</span> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN556"><span class='Ref_to_Macro'>makeNode</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN1097"><span class='Ref_to_Struct'>TidPath</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pathnode.c.html#LN1174"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1099"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN950"><span class='Ref_to_Member'>pathtype</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN59"><span class='Ref_to_EnumConst'>T_TidScan</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1174"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1099"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN952"><span class='Ref_to_Member'>parent</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1171"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1174"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1099"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN953"><span class='Ref_to_Member'>pathtarget</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1171"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN535"><span class='Ref_to_Member'>reltarget</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1174"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1099"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN955"><span class='Ref_to_Member'>param_info</span></a> <span class='Operator'>= </span><a href="../../../include/optimizer/pathnode.h.html#LN275"><span class='Ref_to_Proto'>get_baserel_parampathinfo</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1171"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1171"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>, 
</span>                                                          <a href="pathnode.c.html#LN1172"><span class='Ref_to_Parameter'>required_outer</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1174"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1099"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN957"><span class='Ref_to_Member'>parallel_aware</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1174"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1099"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1171"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN532"><span class='Ref_to_Member'>consider_parallel</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1174"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1099"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN959"><span class='Ref_to_Member'>parallel_workers</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1174"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1099"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* always unordered */ 
</span> 
    <a href="pathnode.c.html#LN1174"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1100"><span class='Ref_to_Member'>tidquals</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1171"><span class='Ref_to_Parameter'>tidquals</span></a><span class='Delimiter'>; 
</span> 
    <a href="../../../include/optimizer/cost.h.html#LN86"><span class='Ref_to_Proto'>cost_tidscan</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pathnode.c.html#LN1174"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1099"><span class='Ref_to_Member'>path</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1171"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1171"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1171"><span class='Ref_to_Parameter'>tidquals</span></a><span class='Delimiter'>, 
</span>                 <a href="pathnode.c.html#LN1174"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1099"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN955"><span class='Ref_to_Member'>param_info</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pathnode.c.html#LN1174"><span class='Ref_To_Local'>pathnode</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end create_tidscan_path &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * create_append_path 
 *    Creates a path corresponding to an Append plan, returning the 
 *    pathnode. 
 * 
 * Note that we must handle subpaths = NIL, representing a dummy access path. 
 */ 
</span><a href="../../../include/nodes/relation.h.html#LN1174"><span class='Ref_to_Struct'>AppendPath</span></a> <span class='Operator'>* 
</span><a name="LN1202"></a><span class='Declare_Function'>create_append_path</span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rel</span><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>subpaths</span><span class='Delimiter'>, </span><a href="../../../include/nodes/relation.h.html#LN27"><span class='Ref_to_Typedef'>Relids</span></a> <span class='Declare_Parameter'>required_outer</span><span class='Delimiter'>, 
</span><a name="LN1203"></a>                   <span class='Keyword'>int </span><span class='Declare_Parameter'>parallel_workers</span><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>partitioned_rels</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1205"></a>    <a href="../../../include/nodes/relation.h.html#LN1174"><span class='Ref_to_Struct'>AppendPath</span></a> <span class='Operator'>*</span><span class='Declare_Local'>pathnode</span> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN556"><span class='Ref_to_Macro'>makeNode</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN1174"><span class='Ref_to_Struct'>AppendPath</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1206"></a>    <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>l</span><span class='Delimiter'>; 
</span> 
    <a href="pathnode.c.html#LN1205"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1176"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN950"><span class='Ref_to_Member'>pathtype</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN47"><span class='Ref_to_EnumConst'>T_Append</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1205"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1176"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN952"><span class='Ref_to_Member'>parent</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1202"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1205"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1176"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN953"><span class='Ref_to_Member'>pathtarget</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1202"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN535"><span class='Ref_to_Member'>reltarget</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1205"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1176"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN955"><span class='Ref_to_Member'>param_info</span></a> <span class='Operator'>= </span><a href="../../../include/optimizer/pathnode.h.html#LN285"><span class='Ref_to_Proto'>get_appendrel_parampathinfo</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1202"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>, 
</span>                                                            <a href="pathnode.c.html#LN1202"><span class='Ref_to_Parameter'>required_outer</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1205"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1176"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN957"><span class='Ref_to_Member'>parallel_aware</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1205"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1176"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1202"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN532"><span class='Ref_to_Member'>consider_parallel</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1205"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1176"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN959"><span class='Ref_to_Member'>parallel_workers</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1203"><span class='Ref_to_Parameter'>parallel_workers</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1205"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1176"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>;</span>      <span class='Comment_Multi_Line'>/* result is always considered 
                                         * unsorted */ 
</span>    <a href="pathnode.c.html#LN1205"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1178"><span class='Ref_to_Member'>partitioned_rels</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN268"><span class='Ref_to_Proto'>list_copy</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1203"><span class='Ref_to_Parameter'>partitioned_rels</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1205"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1179"><span class='Ref_to_Member'>subpaths</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1202"><span class='Ref_to_Parameter'>subpaths</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * We don't bother with inventing a cost_append(), but just do it here. 
     * 
     * Compute rows and costs as sums of subplan rows and costs.  We charge 
     * nothing extra for the Append itself, which perhaps is too optimistic, 
     * but since it doesn't do any selection or projection, it is a pretty 
     * cheap node. 
     */ 
</span>    <a href="pathnode.c.html#LN1205"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1176"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1205"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1176"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1205"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1176"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1206"><span class='Ref_To_Local'>l</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1202"><span class='Ref_to_Parameter'>subpaths</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN1234"></a>        <a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>subpath</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1206"><span class='Ref_To_Local'>l</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="pathnode.c.html#LN1205"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1176"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a> <span class='Operator'>+= </span><a href="pathnode.c.html#LN1234"><span class='Ref_To_Local'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN1206"><span class='Ref_To_Local'>l</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/pg_list.h.html#LN75"><span class='Ref_to_Func'>list_head</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1202"><span class='Ref_to_Parameter'>subpaths</span></a><span class='Parentheses'>))</span>   <span class='Comment_Single_Line'>/* first node? */ 
</span>            <a href="pathnode.c.html#LN1205"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1176"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1234"><span class='Ref_To_Local'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a><span class='Delimiter'>; 
</span>        <a href="pathnode.c.html#LN1205"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1176"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a> <span class='Operator'>+= </span><a href="pathnode.c.html#LN1234"><span class='Ref_To_Local'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a><span class='Delimiter'>; 
</span>        <a href="pathnode.c.html#LN1205"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1176"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1205"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1176"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a> <span class='Operator'>&& 
</span>            <a href="pathnode.c.html#LN1234"><span class='Ref_To_Local'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* All child paths must have same parameterization */ 
</span>        <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="../../../include/nodes/bitmapset.h.html#LN66"><span class='Ref_to_Proto'>bms_equal</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN972"><span class='Ref_to_Macro'>PATH_REQ_OUTER</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1234"><span class='Ref_To_Local'>subpath</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1202"><span class='Ref_to_Parameter'>required_outer</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>return</span> <a href="pathnode.c.html#LN1205"><span class='Ref_To_Local'>pathnode</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end create_append_path &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * create_merge_append_path 
 *    Creates a path corresponding to a MergeAppend plan, returning the 
 *    pathnode. 
 */ 
</span><a href="../../../include/nodes/relation.h.html#LN1194"><span class='Ref_to_Struct'>MergeAppendPath</span></a> <span class='Operator'>* 
</span><a name="LN1257"></a><span class='Declare_Function'>create_merge_append_path</span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN150"><span class='Ref_to_Struct'>PlannerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>root</span><span class='Delimiter'>, 
</span><a name="LN1258"></a>                         <a href="../../../include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rel</span><span class='Delimiter'>, 
</span><a name="LN1259"></a>                         <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>subpaths</span><span class='Delimiter'>, 
</span><a name="LN1260"></a>                         <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pathkeys</span><span class='Delimiter'>, 
</span><a name="LN1261"></a>                         <a href="../../../include/nodes/relation.h.html#LN27"><span class='Ref_to_Typedef'>Relids</span></a> <span class='Declare_Parameter'>required_outer</span><span class='Delimiter'>, 
</span><a name="LN1262"></a>                         <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>partitioned_rels</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1264"></a>    <a href="../../../include/nodes/relation.h.html#LN1194"><span class='Ref_to_Struct'>MergeAppendPath</span></a> <span class='Operator'>*</span><span class='Declare_Local'>pathnode</span> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN556"><span class='Ref_to_Macro'>makeNode</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN1194"><span class='Ref_to_Struct'>MergeAppendPath</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1265"></a>    <a href="../../../include/nodes/nodes.h.html#LN638"><span class='Ref_to_Typedef'>Cost</span></a>        <span class='Declare_Local'>input_startup_cost</span><span class='Delimiter'>; 
</span><a name="LN1266"></a>    <a href="../../../include/nodes/nodes.h.html#LN638"><span class='Ref_to_Typedef'>Cost</span></a>        <span class='Declare_Local'>input_total_cost</span><span class='Delimiter'>; 
</span><a name="LN1267"></a>    <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>l</span><span class='Delimiter'>; 
</span> 
    <a href="pathnode.c.html#LN1264"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1196"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN950"><span class='Ref_to_Member'>pathtype</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN48"><span class='Ref_to_EnumConst'>T_MergeAppend</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1264"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1196"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN952"><span class='Ref_to_Member'>parent</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1258"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1264"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1196"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN953"><span class='Ref_to_Member'>pathtarget</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1258"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN535"><span class='Ref_to_Member'>reltarget</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1264"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1196"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN955"><span class='Ref_to_Member'>param_info</span></a> <span class='Operator'>= </span><a href="../../../include/optimizer/pathnode.h.html#LN285"><span class='Ref_to_Proto'>get_appendrel_parampathinfo</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1258"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>, 
</span>                                                            <a href="pathnode.c.html#LN1261"><span class='Ref_to_Parameter'>required_outer</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1264"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1196"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN957"><span class='Ref_to_Member'>parallel_aware</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1264"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1196"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1258"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN532"><span class='Ref_to_Member'>consider_parallel</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1264"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1196"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN959"><span class='Ref_to_Member'>parallel_workers</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1264"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1196"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1260"><span class='Ref_to_Parameter'>pathkeys</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1264"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1198"><span class='Ref_to_Member'>partitioned_rels</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN268"><span class='Ref_to_Proto'>list_copy</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1262"><span class='Ref_to_Parameter'>partitioned_rels</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1264"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1199"><span class='Ref_to_Member'>subpaths</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1259"><span class='Ref_to_Parameter'>subpaths</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Apply query-wide LIMIT if known and path is for sole base relation. 
     * (Handling this at this low level is a bit klugy.) 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/bitmapset.h.html#LN66"><span class='Ref_to_Proto'>bms_equal</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1258"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN524"><span class='Ref_to_Member'>relids</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1257"><span class='Ref_to_Parameter'>root</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN195"><span class='Ref_to_Member'>all_baserels</span></a><span class='Parentheses'>))</span> 
        <a href="pathnode.c.html#LN1264"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1200"><span class='Ref_to_Member'>limit_tuples</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1257"><span class='Ref_to_Parameter'>root</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN291"><span class='Ref_to_Member'>limit_tuples</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="pathnode.c.html#LN1264"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1200"><span class='Ref_to_Member'>limit_tuples</span></a> <span class='Operator'>= -</span><span class='Number'>1</span><span class='Operator'>.</span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Add up the sizes and costs of the input paths. 
     */ 
</span>    <a href="pathnode.c.html#LN1264"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1196"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1265"><span class='Ref_To_Local'>input_startup_cost</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1266"><span class='Ref_To_Local'>input_total_cost</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1267"><span class='Ref_To_Local'>l</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1259"><span class='Ref_to_Parameter'>subpaths</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN1298"></a>        <a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>subpath</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1267"><span class='Ref_To_Local'>l</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="pathnode.c.html#LN1264"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1196"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a> <span class='Operator'>+= </span><a href="pathnode.c.html#LN1298"><span class='Ref_To_Local'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a><span class='Delimiter'>; 
</span>        <a href="pathnode.c.html#LN1264"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1196"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1264"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1196"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a> <span class='Operator'>&& 
</span>            <a href="pathnode.c.html#LN1298"><span class='Ref_To_Local'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/optimizer/paths.h.html#LN183"><span class='Ref_to_Proto'>pathkeys_contained_in</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1260"><span class='Ref_to_Parameter'>pathkeys</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1298"><span class='Ref_To_Local'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* Subpath is adequately ordered, we won't need to sort it */ 
</span>            <a href="pathnode.c.html#LN1265"><span class='Ref_To_Local'>input_startup_cost</span></a> <span class='Operator'>+= </span><a href="pathnode.c.html#LN1298"><span class='Ref_To_Local'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a><span class='Delimiter'>; 
</span>            <a href="pathnode.c.html#LN1266"><span class='Ref_To_Local'>input_total_cost</span></a> <span class='Operator'>+= </span><a href="pathnode.c.html#LN1298"><span class='Ref_To_Local'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* We'll need to insert a Sort node, so include cost for that */ 
</span><a name="LN1313"></a>            <a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a>        <span class='Declare_Local'>sort_path</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* dummy for result of cost_sort */ 
</span> 
            <a href="../../../include/optimizer/cost.h.html#LN103"><span class='Ref_to_Proto'>cost_sort</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pathnode.c.html#LN1313"><span class='Ref_To_Local'>sort_path</span></a><span class='Delimiter'>, 
</span>                      <a href="pathnode.c.html#LN1257"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, 
</span>                      <a href="pathnode.c.html#LN1260"><span class='Ref_to_Parameter'>pathkeys</span></a><span class='Delimiter'>, 
</span>                      <a href="pathnode.c.html#LN1298"><span class='Ref_To_Local'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a><span class='Delimiter'>, 
</span>                      <a href="pathnode.c.html#LN1298"><span class='Ref_To_Local'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN952"><span class='Ref_to_Member'>parent</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN564"><span class='Ref_to_Member'>tuples</span></a><span class='Delimiter'>, 
</span>                      <a href="pathnode.c.html#LN1298"><span class='Ref_To_Local'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN953"><span class='Ref_to_Member'>pathtarget</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN885"><span class='Ref_to_Member'>width</span></a><span class='Delimiter'>, 
</span>                      <span class='Number'>0</span><span class='Operator'>.</span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                      <a href="../../utils/init/globals.c.html#LN112"><span class='Ref_to_Global_Var'>work_mem</span></a><span class='Delimiter'>, 
</span>                      <a href="pathnode.c.html#LN1264"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1200"><span class='Ref_to_Member'>limit_tuples</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="pathnode.c.html#LN1265"><span class='Ref_To_Local'>input_startup_cost</span></a> <span class='Operator'>+= </span><a href="pathnode.c.html#LN1313"><span class='Ref_To_Local'>sort_path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a><span class='Delimiter'>; 
</span>            <a href="pathnode.c.html#LN1266"><span class='Ref_To_Local'>input_total_cost</span></a> <span class='Operator'>+= </span><a href="pathnode.c.html#LN1313"><span class='Ref_To_Local'>sort_path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Comment_Multi_Line'>/* All child paths must have same parameterization */ 
</span>        <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="../../../include/nodes/bitmapset.h.html#LN66"><span class='Ref_to_Proto'>bms_equal</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN972"><span class='Ref_to_Macro'>PATH_REQ_OUTER</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1298"><span class='Ref_To_Local'>subpath</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1261"><span class='Ref_to_Parameter'>required_outer</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* Now we can compute total costs of the MergeAppend */ 
</span>    <a href="../../../include/optimizer/cost.h.html#LN107"><span class='Ref_to_Proto'>cost_merge_append</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pathnode.c.html#LN1264"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1196"><span class='Ref_to_Member'>path</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1257"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, 
</span>                      <a href="pathnode.c.html#LN1260"><span class='Ref_to_Parameter'>pathkeys</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1259"><span class='Ref_to_Parameter'>subpaths</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                      <a href="pathnode.c.html#LN1265"><span class='Ref_To_Local'>input_startup_cost</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1266"><span class='Ref_To_Local'>input_total_cost</span></a><span class='Delimiter'>, 
</span>                      <a href="pathnode.c.html#LN1264"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1196"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pathnode.c.html#LN1264"><span class='Ref_To_Local'>pathnode</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end create_merge_append_path &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * create_result_path 
 *    Creates a path representing a Result-and-nothing-else plan. 
 * 
 * This is only used for degenerate cases, such as a query with an empty 
 * jointree. 
 */ 
</span><a href="../../../include/nodes/relation.h.html#LN1210"><span class='Ref_to_Struct'>ResultPath</span></a> <span class='Operator'>* 
</span><a name="LN1349"></a><span class='Declare_Function'>create_result_path</span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN150"><span class='Ref_to_Struct'>PlannerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>root</span><span class='Delimiter'>, </span><a href="../../../include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rel</span><span class='Delimiter'>, 
</span><a name="LN1350"></a>                   <a href="../../../include/nodes/relation.h.html#LN879"><span class='Ref_to_Struct'>PathTarget</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>target</span><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>resconstantqual</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1352"></a>    <a href="../../../include/nodes/relation.h.html#LN1210"><span class='Ref_to_Struct'>ResultPath</span></a> <span class='Operator'>*</span><span class='Declare_Local'>pathnode</span> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN556"><span class='Ref_to_Macro'>makeNode</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN1210"><span class='Ref_to_Struct'>ResultPath</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pathnode.c.html#LN1352"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1212"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN950"><span class='Ref_to_Member'>pathtype</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN44"><span class='Ref_to_EnumConst'>T_Result</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1352"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1212"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN952"><span class='Ref_to_Member'>parent</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1349"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1352"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1212"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN953"><span class='Ref_to_Member'>pathtarget</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1350"><span class='Ref_to_Parameter'>target</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1352"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1212"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN955"><span class='Ref_to_Member'>param_info</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>;</span>   <span class='Comment_Single_Line'>/* there are no other rels... */ 
</span>    <a href="pathnode.c.html#LN1352"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1212"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN957"><span class='Ref_to_Member'>parallel_aware</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1352"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1212"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1349"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN532"><span class='Ref_to_Member'>consider_parallel</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1352"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1212"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN959"><span class='Ref_to_Member'>parallel_workers</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1352"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1212"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1352"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1213"><span class='Ref_to_Member'>quals</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1350"><span class='Ref_to_Parameter'>resconstantqual</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Hardly worth defining a cost_result() function ... just do it */ 
</span>    <a href="pathnode.c.html#LN1352"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1212"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1352"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1212"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1350"><span class='Ref_to_Parameter'>target</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN884"><span class='Ref_to_Member'>cost</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN44"><span class='Ref_to_Member'>startup</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1352"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1212"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1350"><span class='Ref_to_Parameter'>target</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN884"><span class='Ref_to_Member'>cost</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN44"><span class='Ref_to_Member'>startup</span></a> <span class='Operator'>+ 
</span>        <a href="../path/costsize.c.html#LN105"><span class='Ref_to_Global_Var'>cpu_tuple_cost</span></a> <span class='Operator'>+ </span><a href="pathnode.c.html#LN1350"><span class='Ref_to_Parameter'>target</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN884"><span class='Ref_to_Member'>cost</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN45"><span class='Ref_to_Member'>per_tuple</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN1350"><span class='Ref_to_Parameter'>resconstantqual</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN1371"></a>        <a href="../../../include/nodes/relation.h.html#LN42"><span class='Ref_to_Struct'>QualCost</span></a>    <span class='Declare_Local'>qual_cost</span><span class='Delimiter'>; 
</span> 
        <a href="../../../include/optimizer/cost.h.html#LN157"><span class='Ref_to_Proto'>cost_qual_eval</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pathnode.c.html#LN1371"><span class='Ref_To_Local'>qual_cost</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1350"><span class='Ref_to_Parameter'>resconstantqual</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1349"><span class='Ref_to_Parameter'>root</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* resconstantqual is evaluated once at startup */ 
</span>        <a href="pathnode.c.html#LN1352"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1212"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a> <span class='Operator'>+= </span><a href="pathnode.c.html#LN1371"><span class='Ref_To_Local'>qual_cost</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN44"><span class='Ref_to_Member'>startup</span></a> <span class='Operator'>+ </span><a href="pathnode.c.html#LN1371"><span class='Ref_To_Local'>qual_cost</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN45"><span class='Ref_to_Member'>per_tuple</span></a><span class='Delimiter'>; 
</span>        <a href="pathnode.c.html#LN1352"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1212"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a> <span class='Operator'>+= </span><a href="pathnode.c.html#LN1371"><span class='Ref_To_Local'>qual_cost</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN44"><span class='Ref_to_Member'>startup</span></a> <span class='Operator'>+ </span><a href="pathnode.c.html#LN1371"><span class='Ref_To_Local'>qual_cost</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN45"><span class='Ref_to_Member'>per_tuple</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>return</span> <a href="pathnode.c.html#LN1352"><span class='Ref_To_Local'>pathnode</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end create_result_path &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * create_material_path 
 *    Creates a path corresponding to a Material plan, returning the 
 *    pathnode. 
 */ 
</span><a href="../../../include/nodes/relation.h.html#LN1222"><span class='Ref_to_Struct'>MaterialPath</span></a> <span class='Operator'>* 
</span><a name="LN1388"></a><span class='Declare_Function'>create_material_path</span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rel</span><span class='Delimiter'>, </span><a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>subpath</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1390"></a>    <a href="../../../include/nodes/relation.h.html#LN1222"><span class='Ref_to_Struct'>MaterialPath</span></a> <span class='Operator'>*</span><span class='Declare_Local'>pathnode</span> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN556"><span class='Ref_to_Macro'>makeNode</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN1222"><span class='Ref_to_Struct'>MaterialPath</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1388"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN952"><span class='Ref_to_Member'>parent</span></a> <span class='Operator'>== </span><a href="pathnode.c.html#LN1388"><span class='Ref_to_Parameter'>rel</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pathnode.c.html#LN1390"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1224"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN950"><span class='Ref_to_Member'>pathtype</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN73"><span class='Ref_to_EnumConst'>T_Material</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1390"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1224"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN952"><span class='Ref_to_Member'>parent</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1388"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1390"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1224"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN953"><span class='Ref_to_Member'>pathtarget</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1388"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN535"><span class='Ref_to_Member'>reltarget</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1390"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1224"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN955"><span class='Ref_to_Member'>param_info</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1388"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN955"><span class='Ref_to_Member'>param_info</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1390"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1224"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN957"><span class='Ref_to_Member'>parallel_aware</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1390"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1224"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1388"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN532"><span class='Ref_to_Member'>consider_parallel</span></a> <span class='Operator'>&& 
</span>        <a href="pathnode.c.html#LN1388"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1390"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1224"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN959"><span class='Ref_to_Member'>parallel_workers</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1388"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN959"><span class='Ref_to_Member'>parallel_workers</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1390"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1224"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1388"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a><span class='Delimiter'>; 
</span> 
    <a href="pathnode.c.html#LN1390"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1225"><span class='Ref_to_Member'>subpath</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1388"><span class='Ref_to_Parameter'>subpath</span></a><span class='Delimiter'>; 
</span> 
    <a href="../../../include/optimizer/cost.h.html#LN111"><span class='Ref_to_Proto'>cost_material</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pathnode.c.html#LN1390"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1224"><span class='Ref_to_Member'>path</span></a><span class='Delimiter'>, 
</span>                  <a href="pathnode.c.html#LN1388"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a><span class='Delimiter'>, 
</span>                  <a href="pathnode.c.html#LN1388"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a><span class='Delimiter'>, 
</span>                  <a href="pathnode.c.html#LN1388"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a><span class='Delimiter'>, 
</span>                  <a href="pathnode.c.html#LN1388"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN953"><span class='Ref_to_Member'>pathtarget</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN885"><span class='Ref_to_Member'>width</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pathnode.c.html#LN1390"><span class='Ref_To_Local'>pathnode</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end create_material_path &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * create_unique_path 
 *    Creates a path representing elimination of distinct rows from the 
 *    input data.  Distinct-ness is defined according to the needs of the 
 *    semijoin represented by sjinfo.  If it is not possible to identify 
 *    how to make the data unique, NULL is returned. 
 * 
 * If used at all, this is likely to be called repeatedly on the same rel; 
 * and the input subpath should always be the same (the cheapest_total path 
 * for the rel).  So we cache the result. 
 */ 
</span><a href="../../../include/nodes/relation.h.html#LN1247"><span class='Ref_to_Struct'>UniquePath</span></a> <span class='Operator'>* 
</span><a name="LN1427"></a><span class='Declare_Function'>create_unique_path</span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN150"><span class='Ref_to_Struct'>PlannerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>root</span><span class='Delimiter'>, </span><a href="../../../include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rel</span><span class='Delimiter'>, </span><a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>subpath</span><span class='Delimiter'>, 
</span><a name="LN1428"></a>                   <a href="../../../include/nodes/relation.h.html#LN1913"><span class='Ref_to_Struct'>SpecialJoinInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>sjinfo</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1430"></a>    <a href="../../../include/nodes/relation.h.html#LN1247"><span class='Ref_to_Struct'>UniquePath</span></a> <span class='Operator'>*</span><span class='Declare_Local'>pathnode</span><span class='Delimiter'>; 
</span><a name="LN1431"></a>    <a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a>        <span class='Declare_Local'>sort_path</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* dummy for result of cost_sort */ 
</span><a name="LN1432"></a>    <a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a>        <span class='Declare_Local'>agg_path</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* dummy for result of cost_agg */ 
</span><a name="LN1433"></a>    <a href="../../../include/utils/palloc.h.html#LN35"><span class='Ref_to_Typedef'>MemoryContext</span></a> <span class='Declare_Local'>oldcontext</span><span class='Delimiter'>; 
</span><a name="LN1434"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>numCols</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Caller made a mistake if subpath isn't cheapest_total ... */ 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1427"><span class='Ref_to_Parameter'>subpath</span></a> <span class='Operator'>== </span><a href="pathnode.c.html#LN1427"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN542"><span class='Ref_to_Member'>cheapest_total_path</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1427"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN952"><span class='Ref_to_Member'>parent</span></a> <span class='Operator'>== </span><a href="pathnode.c.html#LN1427"><span class='Ref_to_Parameter'>rel</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* ... or if SpecialJoinInfo is the wrong one */ 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1428"><span class='Ref_to_Parameter'>sjinfo</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1920"><span class='Ref_to_Member'>jointype</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/nodes.h.html#LN691"><span class='Ref_to_EnumConst'>JOIN_SEMI</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="../../../include/nodes/bitmapset.h.html#LN66"><span class='Ref_to_Proto'>bms_equal</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1427"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN524"><span class='Ref_to_Member'>relids</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1428"><span class='Ref_to_Parameter'>sjinfo</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1919"><span class='Ref_to_Member'>syn_righthand</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* If result already cached, return it */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN1427"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN543"><span class='Ref_to_Member'>cheapest_unique_path</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN1247"><span class='Ref_to_Struct'>UniquePath</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pathnode.c.html#LN1427"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN543"><span class='Ref_to_Member'>cheapest_unique_path</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* If it's not possible to unique-ify, return NULL */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1428"><span class='Ref_to_Parameter'>sjinfo</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1924"><span class='Ref_to_Member'>semi_can_btree</span></a> <span class='Operator'>|| </span><a href="pathnode.c.html#LN1428"><span class='Ref_to_Parameter'>sjinfo</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1925"><span class='Ref_to_Member'>semi_can_hash</span></a><span class='Parentheses'>))</span> 
        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * We must ensure path struct and subsidiary data are allocated in main 
     * planning context; otherwise GEQO memory management causes trouble. 
     */ 
</span>    <a href="pathnode.c.html#LN1433"><span class='Ref_To_Local'>oldcontext</span></a> <span class='Operator'>= </span><a href="../../../include/utils/palloc.h.html#LN107"><span class='Ref_to_Func'>MemoryContextSwitchTo</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1427"><span class='Ref_to_Parameter'>root</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN286"><span class='Ref_to_Member'>planner_cxt</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pathnode.c.html#LN1430"><span class='Ref_To_Local'>pathnode</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN556"><span class='Ref_to_Macro'>makeNode</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN1247"><span class='Ref_to_Struct'>UniquePath</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pathnode.c.html#LN1430"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1249"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN950"><span class='Ref_to_Member'>pathtype</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN78"><span class='Ref_to_EnumConst'>T_Unique</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1430"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1249"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN952"><span class='Ref_to_Member'>parent</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1427"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1430"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1249"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN953"><span class='Ref_to_Member'>pathtarget</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1427"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN535"><span class='Ref_to_Member'>reltarget</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1430"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1249"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN955"><span class='Ref_to_Member'>param_info</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1427"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN955"><span class='Ref_to_Member'>param_info</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1430"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1249"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN957"><span class='Ref_to_Member'>parallel_aware</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1430"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1249"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1427"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN532"><span class='Ref_to_Member'>consider_parallel</span></a> <span class='Operator'>&& 
</span>        <a href="pathnode.c.html#LN1427"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1430"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1249"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN959"><span class='Ref_to_Member'>parallel_workers</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1427"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN959"><span class='Ref_to_Member'>parallel_workers</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Assume the output is unsorted, since we don't necessarily have pathkeys 
     * to represent it.  (This might get overridden below.) 
     */ 
</span>    <a href="pathnode.c.html#LN1430"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1249"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span> 
    <a href="pathnode.c.html#LN1430"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1250"><span class='Ref_to_Member'>subpath</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1427"><span class='Ref_to_Parameter'>subpath</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1430"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1252"><span class='Ref_to_Member'>in_operators</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1428"><span class='Ref_to_Parameter'>sjinfo</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1926"><span class='Ref_to_Member'>semi_operators</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1430"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1253"><span class='Ref_to_Member'>uniq_exprs</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1428"><span class='Ref_to_Parameter'>sjinfo</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1927"><span class='Ref_to_Member'>semi_rhs_exprs</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If the input is a relation and it has a unique index that proves the 
     * semi_rhs_exprs are unique, then we don't need to do anything.  Note 
     * that relation_has_unique_index_for automatically considers restriction 
     * clauses for the rel, as well. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN1427"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN554"><span class='Ref_to_Member'>rtekind</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/parsenodes.h.html#LN922"><span class='Ref_to_EnumConst'>RTE_RELATION</span></a> <span class='Operator'>&& </span><a href="pathnode.c.html#LN1428"><span class='Ref_to_Parameter'>sjinfo</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1924"><span class='Ref_to_Member'>semi_can_btree</span></a> <span class='Operator'>&& 
</span>        <a href="../../../include/optimizer/paths.h.html#LN70"><span class='Ref_to_Proto'>relation_has_unique_index_for</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1427"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1427"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>, 
</span>                                      <a href="pathnode.c.html#LN1428"><span class='Ref_to_Parameter'>sjinfo</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1927"><span class='Ref_to_Member'>semi_rhs_exprs</span></a><span class='Delimiter'>, 
</span>                                      <a href="pathnode.c.html#LN1428"><span class='Ref_to_Parameter'>sjinfo</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1926"><span class='Ref_to_Member'>semi_operators</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="pathnode.c.html#LN1430"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1251"><span class='Ref_to_Member'>umethod</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/relation.h.html#LN1242"><span class='Ref_to_EnumConst'>UNIQUE_PATH_NOOP</span></a><span class='Delimiter'>; 
</span>        <a href="pathnode.c.html#LN1430"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1249"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1427"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN527"><span class='Ref_to_Member'>rows</span></a><span class='Delimiter'>; 
</span>        <a href="pathnode.c.html#LN1430"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1249"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1427"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a><span class='Delimiter'>; 
</span>        <a href="pathnode.c.html#LN1430"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1249"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1427"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a><span class='Delimiter'>; 
</span>        <a href="pathnode.c.html#LN1430"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1249"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1427"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a><span class='Delimiter'>; 
</span> 
        <a href="pathnode.c.html#LN1427"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN543"><span class='Ref_to_Member'>cheapest_unique_path</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pathnode.c.html#LN1430"><span class='Ref_To_Local'>pathnode</span></a><span class='Delimiter'>; 
</span> 
        <a href="../../../include/utils/palloc.h.html#LN107"><span class='Ref_to_Func'>MemoryContextSwitchTo</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1433"><span class='Ref_To_Local'>oldcontext</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>return</span> <a href="pathnode.c.html#LN1430"><span class='Ref_To_Local'>pathnode</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If the input is a subquery whose output must be unique already, then we 
     * don't need to do anything.  The test for uniqueness has to consider 
     * exactly which columns we are extracting; for example "SELECT DISTINCT 
     * x,y" doesn't guarantee that x alone is distinct. So we cannot check for 
     * this optimization unless semi_rhs_exprs consists only of simple Vars 
     * referencing subquery outputs.  (Possibly we could do something with 
     * expressions in the subquery outputs, too, but for now keep it simple.) 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN1427"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN554"><span class='Ref_to_Member'>rtekind</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/parsenodes.h.html#LN923"><span class='Ref_to_EnumConst'>RTE_SUBQUERY</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN1513"></a>        <a href="../../../include/nodes/parsenodes.h.html#LN932"><span class='Ref_to_Struct'>RangeTblEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>rte</span> <span class='Operator'>= </span><a href="../../../include/nodes/relation.h.html#LN324"><span class='Ref_to_Macro'>planner_rt_fetch</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1427"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN552"><span class='Ref_to_Member'>relid</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1427"><span class='Ref_to_Parameter'>root</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/optimizer/planmain.h.html#LN106"><span class='Ref_to_Proto'>query_supports_distinctness</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1513"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN954"><span class='Ref_to_Member'>subquery</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span><a name="LN1517"></a>            <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>sub_tlist_colnos</span><span class='Delimiter'>; 
</span> 
            <a href="pathnode.c.html#LN1517"><span class='Ref_To_Local'>sub_tlist_colnos</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN47"><span class='Ref_to_Proto'>translate_sub_tlist</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1428"><span class='Ref_to_Parameter'>sjinfo</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1927"><span class='Ref_to_Member'>semi_rhs_exprs</span></a><span class='Delimiter'>, 
</span>                                                   <a href="pathnode.c.html#LN1427"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN552"><span class='Ref_to_Member'>relid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN1517"><span class='Ref_To_Local'>sub_tlist_colnos</span></a> <span class='Operator'>&& 
</span>                <a href="../../../include/optimizer/planmain.h.html#LN107"><span class='Ref_to_Proto'>query_is_distinct_for</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1513"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN954"><span class='Ref_to_Member'>subquery</span></a><span class='Delimiter'>, 
</span>                                      <a href="pathnode.c.html#LN1517"><span class='Ref_To_Local'>sub_tlist_colnos</span></a><span class='Delimiter'>, 
</span>                                      <a href="pathnode.c.html#LN1428"><span class='Ref_to_Parameter'>sjinfo</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1926"><span class='Ref_to_Member'>semi_operators</span></a><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span>                <a href="pathnode.c.html#LN1430"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1251"><span class='Ref_to_Member'>umethod</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/relation.h.html#LN1242"><span class='Ref_to_EnumConst'>UNIQUE_PATH_NOOP</span></a><span class='Delimiter'>; 
</span>                <a href="pathnode.c.html#LN1430"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1249"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1427"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN527"><span class='Ref_to_Member'>rows</span></a><span class='Delimiter'>; 
</span>                <a href="pathnode.c.html#LN1430"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1249"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1427"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a><span class='Delimiter'>; 
</span>                <a href="pathnode.c.html#LN1430"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1249"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1427"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a><span class='Delimiter'>; 
</span>                <a href="pathnode.c.html#LN1430"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1249"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1427"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a><span class='Delimiter'>; 
</span> 
                <a href="pathnode.c.html#LN1427"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN543"><span class='Ref_to_Member'>cheapest_unique_path</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pathnode.c.html#LN1430"><span class='Ref_To_Local'>pathnode</span></a><span class='Delimiter'>; 
</span> 
                <a href="../../../include/utils/palloc.h.html#LN107"><span class='Ref_to_Func'>MemoryContextSwitchTo</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1433"><span class='Ref_To_Local'>oldcontext</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>return</span> <a href="pathnode.c.html#LN1430"><span class='Ref_To_Local'>pathnode</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if query_supports_distin... &raquo; </span> 
    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if rel-&GT;rtekind==RTE_SUB... &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* Estimate number of output rows */ 
</span>    <a href="pathnode.c.html#LN1430"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1249"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a> <span class='Operator'>= </span><a href="../../../include/utils/selfuncs.h.html#LN205"><span class='Ref_to_Proto'>estimate_num_groups</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1427"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, 
</span>                                              <a href="pathnode.c.html#LN1428"><span class='Ref_to_Parameter'>sjinfo</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1927"><span class='Ref_to_Member'>semi_rhs_exprs</span></a><span class='Delimiter'>, 
</span>                                              <a href="pathnode.c.html#LN1427"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN527"><span class='Ref_to_Member'>rows</span></a><span class='Delimiter'>, 
</span>                                              <span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1434"><span class='Ref_To_Local'>numCols</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1428"><span class='Ref_to_Parameter'>sjinfo</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1927"><span class='Ref_to_Member'>semi_rhs_exprs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN1428"><span class='Ref_to_Parameter'>sjinfo</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1924"><span class='Ref_to_Member'>semi_can_btree</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * Estimate cost for sort+unique implementation 
         */ 
</span>        <a href="../../../include/optimizer/cost.h.html#LN103"><span class='Ref_to_Proto'>cost_sort</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pathnode.c.html#LN1431"><span class='Ref_To_Local'>sort_path</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1427"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>, 
</span>                  <a href="pathnode.c.html#LN1427"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a><span class='Delimiter'>, 
</span>                  <a href="pathnode.c.html#LN1427"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN527"><span class='Ref_to_Member'>rows</span></a><span class='Delimiter'>, 
</span>                  <a href="pathnode.c.html#LN1427"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN953"><span class='Ref_to_Member'>pathtarget</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN885"><span class='Ref_to_Member'>width</span></a><span class='Delimiter'>, 
</span>                  <span class='Number'>0</span><span class='Operator'>.</span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                  <a href="../../utils/init/globals.c.html#LN112"><span class='Ref_to_Global_Var'>work_mem</span></a><span class='Delimiter'>, 
</span>                  <span class='Operator'>-</span><span class='Number'>1</span><span class='Operator'>.</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Charge one cpu_operator_cost per comparison per input tuple. We 
         * assume all columns get compared at most of the tuples. (XXX 
         * probably this is an overestimate.)  This should agree with 
         * create_upper_unique_path. 
         */ 
</span>        <a href="pathnode.c.html#LN1431"><span class='Ref_To_Local'>sort_path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a> <span class='Operator'>+= </span><a href="../path/costsize.c.html#LN107"><span class='Ref_to_Global_Var'>cpu_operator_cost</span></a> <span class='Operator'>* </span><a href="pathnode.c.html#LN1427"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN527"><span class='Ref_to_Member'>rows</span></a> <span class='Operator'>* </span><a href="pathnode.c.html#LN1434"><span class='Ref_To_Local'>numCols</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if sjinfo-&GT;semi_can_btre... &raquo; </span> 
 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN1428"><span class='Ref_to_Parameter'>sjinfo</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1925"><span class='Ref_to_Member'>semi_can_hash</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * Estimate the overhead per hashtable entry at 64 bytes (same as in 
         * planner.c). 
         */ 
</span><a name="LN1577"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>hashentrysize</span> <span class='Operator'>= </span><a href="pathnode.c.html#LN1427"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN953"><span class='Ref_to_Member'>pathtarget</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN885"><span class='Ref_to_Member'>width</span></a> <span class='Operator'>+ </span><span class='Number'>64</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN1577"><span class='Ref_To_Local'>hashentrysize</span></a> <span class='Operator'>* </span><a href="pathnode.c.html#LN1430"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1249"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a> <span class='Operator'>&GT; </span><a href="../../utils/init/globals.c.html#LN112"><span class='Ref_to_Global_Var'>work_mem</span></a> <span class='Operator'>* </span><span class='Number'>1024L</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * We should not try to hash.  Hack the SpecialJoinInfo to 
             * remember this, in case we come through here again. 
             */ 
</span>            <a href="pathnode.c.html#LN1428"><span class='Ref_to_Parameter'>sjinfo</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1925"><span class='Ref_to_Member'>semi_can_hash</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
            <a href="../../../include/optimizer/cost.h.html#LN114"><span class='Ref_to_Proto'>cost_agg</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pathnode.c.html#LN1432"><span class='Ref_To_Local'>agg_path</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1427"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, 
</span>                     <a href="../../../include/nodes/nodes.h.html#LN737"><span class='Ref_to_EnumConst'>AGG_HASHED</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <a href="pathnode.c.html#LN1434"><span class='Ref_To_Local'>numCols</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1430"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1249"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a><span class='Delimiter'>, 
</span>                     <a href="pathnode.c.html#LN1427"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a><span class='Delimiter'>, 
</span>                     <a href="pathnode.c.html#LN1427"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a><span class='Delimiter'>, 
</span>                     <a href="pathnode.c.html#LN1427"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN527"><span class='Ref_to_Member'>rows</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if sjinfo-&GT;semi_can_hash &raquo; </span> 
 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN1428"><span class='Ref_to_Parameter'>sjinfo</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1924"><span class='Ref_to_Member'>semi_can_btree</span></a> <span class='Operator'>&& </span><a href="pathnode.c.html#LN1428"><span class='Ref_to_Parameter'>sjinfo</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1925"><span class='Ref_to_Member'>semi_can_hash</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN1432"><span class='Ref_To_Local'>agg_path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a> <span class='Operator'>&LT; </span><a href="pathnode.c.html#LN1431"><span class='Ref_To_Local'>sort_path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a><span class='Parentheses'>) 
</span>            <a href="pathnode.c.html#LN1430"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1251"><span class='Ref_to_Member'>umethod</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/relation.h.html#LN1243"><span class='Ref_to_EnumConst'>UNIQUE_PATH_HASH</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="pathnode.c.html#LN1430"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1251"><span class='Ref_to_Member'>umethod</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/relation.h.html#LN1244"><span class='Ref_to_EnumConst'>UNIQUE_PATH_SORT</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN1428"><span class='Ref_to_Parameter'>sjinfo</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1924"><span class='Ref_to_Member'>semi_can_btree</span></a><span class='Parentheses'>) 
</span>        <a href="pathnode.c.html#LN1430"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1251"><span class='Ref_to_Member'>umethod</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/relation.h.html#LN1244"><span class='Ref_to_EnumConst'>UNIQUE_PATH_SORT</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN1428"><span class='Ref_to_Parameter'>sjinfo</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1925"><span class='Ref_to_Member'>semi_can_hash</span></a><span class='Parentheses'>) 
</span>        <a href="pathnode.c.html#LN1430"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1251"><span class='Ref_to_Member'>umethod</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/relation.h.html#LN1243"><span class='Ref_to_EnumConst'>UNIQUE_PATH_HASH</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* we can get here only if we abandoned hashing above */ 
</span>        <a href="../../../include/utils/palloc.h.html#LN107"><span class='Ref_to_Func'>MemoryContextSwitchTo</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1433"><span class='Ref_To_Local'>oldcontext</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN1430"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1251"><span class='Ref_to_Member'>umethod</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/relation.h.html#LN1243"><span class='Ref_to_EnumConst'>UNIQUE_PATH_HASH</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="pathnode.c.html#LN1430"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1249"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1432"><span class='Ref_To_Local'>agg_path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a><span class='Delimiter'>; 
</span>        <a href="pathnode.c.html#LN1430"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1249"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1432"><span class='Ref_To_Local'>agg_path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="pathnode.c.html#LN1430"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1249"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1431"><span class='Ref_To_Local'>sort_path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a><span class='Delimiter'>; 
</span>        <a href="pathnode.c.html#LN1430"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1249"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1431"><span class='Ref_To_Local'>sort_path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="pathnode.c.html#LN1427"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN543"><span class='Ref_to_Member'>cheapest_unique_path</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pathnode.c.html#LN1430"><span class='Ref_To_Local'>pathnode</span></a><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/palloc.h.html#LN107"><span class='Ref_to_Func'>MemoryContextSwitchTo</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1433"><span class='Ref_To_Local'>oldcontext</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pathnode.c.html#LN1430"><span class='Ref_To_Local'>pathnode</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end create_unique_path &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * create_gather_merge_path 
 * 
 *    Creates a path corresponding to a gather merge scan, returning 
 *    the pathnode. 
 */ 
</span><a href="../../../include/nodes/relation.h.html#LN1274"><span class='Ref_to_Struct'>GatherMergePath</span></a> <span class='Operator'>* 
</span><a name="LN1639"></a><span class='Declare_Function'>create_gather_merge_path</span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN150"><span class='Ref_to_Struct'>PlannerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>root</span><span class='Delimiter'>, </span><a href="../../../include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rel</span><span class='Delimiter'>, </span><a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>subpath</span><span class='Delimiter'>, 
</span><a name="LN1640"></a>                         <a href="../../../include/nodes/relation.h.html#LN879"><span class='Ref_to_Struct'>PathTarget</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>target</span><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pathkeys</span><span class='Delimiter'>, 
</span><a name="LN1641"></a>                         <a href="../../../include/nodes/relation.h.html#LN27"><span class='Ref_to_Typedef'>Relids</span></a> <span class='Declare_Parameter'>required_outer</span><span class='Delimiter'>, </span><span class='Keyword'>double </span><span class='Operator'>*</span><span class='Declare_Parameter'>rows</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1643"></a>    <a href="../../../include/nodes/relation.h.html#LN1274"><span class='Ref_to_Struct'>GatherMergePath</span></a> <span class='Operator'>*</span><span class='Declare_Local'>pathnode</span> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN556"><span class='Ref_to_Macro'>makeNode</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN1274"><span class='Ref_to_Struct'>GatherMergePath</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1644"></a>    <a href="../../../include/nodes/nodes.h.html#LN638"><span class='Ref_to_Typedef'>Cost</span></a>        <span class='Declare_Local'>input_startup_cost</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN1645"></a>    <a href="../../../include/nodes/nodes.h.html#LN638"><span class='Ref_to_Typedef'>Cost</span></a>        <span class='Declare_Local'>input_total_cost</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1639"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1640"><span class='Ref_to_Parameter'>pathkeys</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pathnode.c.html#LN1643"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1276"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN950"><span class='Ref_to_Member'>pathtype</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN80"><span class='Ref_to_EnumConst'>T_GatherMerge</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1643"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1276"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN952"><span class='Ref_to_Member'>parent</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1639"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1643"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1276"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN955"><span class='Ref_to_Member'>param_info</span></a> <span class='Operator'>= </span><a href="../../../include/optimizer/pathnode.h.html#LN275"><span class='Ref_to_Proto'>get_baserel_parampathinfo</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1639"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1639"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>, 
</span>                                                          <a href="pathnode.c.html#LN1641"><span class='Ref_to_Parameter'>required_outer</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1643"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1276"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN957"><span class='Ref_to_Member'>parallel_aware</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
    <a href="pathnode.c.html#LN1643"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1277"><span class='Ref_to_Member'>subpath</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1639"><span class='Ref_to_Parameter'>subpath</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1643"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1278"><span class='Ref_to_Member'>num_workers</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1639"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN959"><span class='Ref_to_Member'>parallel_workers</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1643"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1276"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1640"><span class='Ref_to_Parameter'>pathkeys</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1643"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1276"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN953"><span class='Ref_to_Member'>pathtarget</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1640"><span class='Ref_to_Parameter'>target</span></a> <span class='Operator'>? </span><a href="pathnode.c.html#LN1640"><span class='Ref_to_Parameter'>target</span></a> <span class='Operator'>: </span><a href="pathnode.c.html#LN1639"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN535"><span class='Ref_to_Member'>reltarget</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1643"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1276"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a> <span class='Operator'>+= </span><a href="pathnode.c.html#LN1639"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/optimizer/paths.h.html#LN183"><span class='Ref_to_Proto'>pathkeys_contained_in</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1640"><span class='Ref_to_Parameter'>pathkeys</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1639"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Subpath is adequately ordered, we won't need to sort it */ 
</span>        <a href="pathnode.c.html#LN1644"><span class='Ref_To_Local'>input_startup_cost</span></a> <span class='Operator'>+= </span><a href="pathnode.c.html#LN1639"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a><span class='Delimiter'>; 
</span>        <a href="pathnode.c.html#LN1645"><span class='Ref_To_Local'>input_total_cost</span></a> <span class='Operator'>+= </span><a href="pathnode.c.html#LN1639"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* We'll need to insert a Sort node, so include cost for that */ 
</span><a name="LN1671"></a>        <a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a>        <span class='Declare_Local'>sort_path</span><span class='Delimiter'>;</span>  <span class='Comment_Single_Line'>/* dummy for result of cost_sort */ 
</span> 
        <a href="../../../include/optimizer/cost.h.html#LN103"><span class='Ref_to_Proto'>cost_sort</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pathnode.c.html#LN1671"><span class='Ref_To_Local'>sort_path</span></a><span class='Delimiter'>, 
</span>                  <a href="pathnode.c.html#LN1639"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, 
</span>                  <a href="pathnode.c.html#LN1640"><span class='Ref_to_Parameter'>pathkeys</span></a><span class='Delimiter'>, 
</span>                  <a href="pathnode.c.html#LN1639"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a><span class='Delimiter'>, 
</span>                  <a href="pathnode.c.html#LN1639"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a><span class='Delimiter'>, 
</span>                  <a href="pathnode.c.html#LN1639"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN953"><span class='Ref_to_Member'>pathtarget</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN885"><span class='Ref_to_Member'>width</span></a><span class='Delimiter'>, 
</span>                  <span class='Number'>0</span><span class='Operator'>.</span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                  <a href="../../utils/init/globals.c.html#LN112"><span class='Ref_to_Global_Var'>work_mem</span></a><span class='Delimiter'>, 
</span>                  <span class='Operator'>-</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pathnode.c.html#LN1644"><span class='Ref_To_Local'>input_startup_cost</span></a> <span class='Operator'>+= </span><a href="pathnode.c.html#LN1671"><span class='Ref_To_Local'>sort_path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a><span class='Delimiter'>; 
</span>        <a href="pathnode.c.html#LN1645"><span class='Ref_To_Local'>input_total_cost</span></a> <span class='Operator'>+= </span><a href="pathnode.c.html#LN1671"><span class='Ref_To_Local'>sort_path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../../include/optimizer/cost.h.html#LN207"><span class='Ref_to_Proto'>cost_gather_merge</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1643"><span class='Ref_To_Local'>pathnode</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1639"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1639"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1643"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1276"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN955"><span class='Ref_to_Member'>param_info</span></a><span class='Delimiter'>, 
</span>                      <a href="pathnode.c.html#LN1644"><span class='Ref_To_Local'>input_startup_cost</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1645"><span class='Ref_To_Local'>input_total_cost</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1641"><span class='Ref_to_Parameter'>rows</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pathnode.c.html#LN1643"><span class='Ref_To_Local'>pathnode</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end create_gather_merge_path &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * translate_sub_tlist - get subquery column numbers represented by tlist 
 * 
 * The given targetlist usually contains only Vars referencing the given relid. 
 * Extract their varattnos (ie, the column numbers of the subquery) and return 
 * as an integer List. 
 * 
 * If any of the tlist items is not a simple Var, we cannot determine whether 
 * the subquery's uniqueness condition (if any) matches ours, so punt and 
 * return NIL. 
 */ 
</span><span class='Keyword'>static </span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>* 
</span><a name="LN1704"></a><span class='Declare_Function'>translate_sub_tlist</span><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tlist</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>relid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1706"></a>    <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>result</span> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span><a name="LN1707"></a>    <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>l</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1707"><span class='Ref_To_Local'>l</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1704"><span class='Ref_to_Parameter'>tlist</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN1711"></a>        <a href="../../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>var</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1707"><span class='Ref_To_Local'>l</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pathnode.c.html#LN1711"><span class='Ref_To_Local'>var</span></a> <span class='Operator'>|| !</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1711"><span class='Ref_To_Local'>var</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a><span class='Parentheses'>) </span><span class='Operator'>|| 
</span>            <a href="pathnode.c.html#LN1711"><span class='Ref_To_Local'>var</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN165"><span class='Ref_to_Member'>varno</span></a> <span class='Operator'>!= </span><a href="pathnode.c.html#LN1704"><span class='Ref_to_Parameter'>relid</span></a><span class='Parentheses'>)</span> 
            <span class='Control'>return</span> <a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>;</span>         <span class='Comment_Single_Line'>/* punt */ 
</span> 
        <a href="pathnode.c.html#LN1706"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../nodes/list.c.html#LN144"><span class='Ref_to_Func'>lappend_int</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1706"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1711"><span class='Ref_To_Local'>var</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN167"><span class='Ref_to_Member'>varattno</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>return</span> <a href="pathnode.c.html#LN1706"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * create_gather_path 
 *    Creates a path corresponding to a gather scan, returning the 
 *    pathnode. 
 * 
 * 'rows' may optionally be set to override row estimates from other sources. 
 */ 
</span><a href="../../../include/nodes/relation.h.html#LN1261"><span class='Ref_to_Struct'>GatherPath</span></a> <span class='Operator'>* 
</span><a name="LN1730"></a><span class='Declare_Function'>create_gather_path</span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN150"><span class='Ref_to_Struct'>PlannerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>root</span><span class='Delimiter'>, </span><a href="../../../include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rel</span><span class='Delimiter'>, </span><a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>subpath</span><span class='Delimiter'>, 
</span><a name="LN1731"></a>                   <a href="../../../include/nodes/relation.h.html#LN879"><span class='Ref_to_Struct'>PathTarget</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>target</span><span class='Delimiter'>, </span><a href="../../../include/nodes/relation.h.html#LN27"><span class='Ref_to_Typedef'>Relids</span></a> <span class='Declare_Parameter'>required_outer</span><span class='Delimiter'>, </span><span class='Keyword'>double </span><span class='Operator'>*</span><span class='Declare_Parameter'>rows</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1733"></a>    <a href="../../../include/nodes/relation.h.html#LN1261"><span class='Ref_to_Struct'>GatherPath</span></a> <span class='Operator'>*</span><span class='Declare_Local'>pathnode</span> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN556"><span class='Ref_to_Macro'>makeNode</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN1261"><span class='Ref_to_Struct'>GatherPath</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1730"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pathnode.c.html#LN1733"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1263"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN950"><span class='Ref_to_Member'>pathtype</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN79"><span class='Ref_to_EnumConst'>T_Gather</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1733"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1263"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN952"><span class='Ref_to_Member'>parent</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1730"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1733"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1263"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN953"><span class='Ref_to_Member'>pathtarget</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1731"><span class='Ref_to_Parameter'>target</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1733"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1263"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN955"><span class='Ref_to_Member'>param_info</span></a> <span class='Operator'>= </span><a href="../../../include/optimizer/pathnode.h.html#LN275"><span class='Ref_to_Proto'>get_baserel_parampathinfo</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1730"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1730"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>, 
</span>                                                          <a href="pathnode.c.html#LN1731"><span class='Ref_to_Parameter'>required_outer</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1733"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1263"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN957"><span class='Ref_to_Member'>parallel_aware</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1733"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1263"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1733"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1263"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN959"><span class='Ref_to_Member'>parallel_workers</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1733"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1263"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* Gather has unordered result */ 
</span> 
    <a href="pathnode.c.html#LN1733"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1264"><span class='Ref_to_Member'>subpath</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1730"><span class='Ref_to_Parameter'>subpath</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1733"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1266"><span class='Ref_to_Member'>num_workers</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1730"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN959"><span class='Ref_to_Member'>parallel_workers</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1733"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1265"><span class='Ref_to_Member'>single_copy</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN1733"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1266"><span class='Ref_to_Member'>num_workers</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="pathnode.c.html#LN1733"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1263"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1730"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a><span class='Delimiter'>; 
</span>        <a href="pathnode.c.html#LN1733"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1266"><span class='Ref_to_Member'>num_workers</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <a href="pathnode.c.html#LN1733"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1265"><span class='Ref_to_Member'>single_copy</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../../include/optimizer/cost.h.html#LN154"><span class='Ref_to_Proto'>cost_gather</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1733"><span class='Ref_To_Local'>pathnode</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1730"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1730"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1733"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1263"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN955"><span class='Ref_to_Member'>param_info</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1731"><span class='Ref_to_Parameter'>rows</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pathnode.c.html#LN1733"><span class='Ref_To_Local'>pathnode</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end create_gather_path &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * create_subqueryscan_path 
 *    Creates a path corresponding to a scan of a subquery, 
 *    returning the pathnode. 
 */ 
</span><a href="../../../include/nodes/relation.h.html#LN1111"><span class='Ref_to_Struct'>SubqueryScanPath</span></a> <span class='Operator'>* 
</span><a name="LN1769"></a><span class='Declare_Function'>create_subqueryscan_path</span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN150"><span class='Ref_to_Struct'>PlannerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>root</span><span class='Delimiter'>, </span><a href="../../../include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rel</span><span class='Delimiter'>, </span><a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>subpath</span><span class='Delimiter'>, 
</span><a name="LN1770"></a>                         <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pathkeys</span><span class='Delimiter'>, </span><a href="../../../include/nodes/relation.h.html#LN27"><span class='Ref_to_Typedef'>Relids</span></a> <span class='Declare_Parameter'>required_outer</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1772"></a>    <a href="../../../include/nodes/relation.h.html#LN1111"><span class='Ref_to_Struct'>SubqueryScanPath</span></a> <span class='Operator'>*</span><span class='Declare_Local'>pathnode</span> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN556"><span class='Ref_to_Macro'>makeNode</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN1111"><span class='Ref_to_Struct'>SubqueryScanPath</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pathnode.c.html#LN1772"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1113"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN950"><span class='Ref_to_Member'>pathtype</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN60"><span class='Ref_to_EnumConst'>T_SubqueryScan</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1772"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1113"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN952"><span class='Ref_to_Member'>parent</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1769"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1772"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1113"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN953"><span class='Ref_to_Member'>pathtarget</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1769"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN535"><span class='Ref_to_Member'>reltarget</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1772"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1113"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN955"><span class='Ref_to_Member'>param_info</span></a> <span class='Operator'>= </span><a href="../../../include/optimizer/pathnode.h.html#LN275"><span class='Ref_to_Proto'>get_baserel_parampathinfo</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1769"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1769"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>, 
</span>                                                          <a href="pathnode.c.html#LN1770"><span class='Ref_to_Parameter'>required_outer</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1772"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1113"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN957"><span class='Ref_to_Member'>parallel_aware</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1772"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1113"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1769"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN532"><span class='Ref_to_Member'>consider_parallel</span></a> <span class='Operator'>&& 
</span>        <a href="pathnode.c.html#LN1769"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1772"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1113"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN959"><span class='Ref_to_Member'>parallel_workers</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1769"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN959"><span class='Ref_to_Member'>parallel_workers</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1772"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1113"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1770"><span class='Ref_to_Parameter'>pathkeys</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1772"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1114"><span class='Ref_to_Member'>subpath</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1769"><span class='Ref_to_Parameter'>subpath</span></a><span class='Delimiter'>; 
</span> 
    <a href="../../../include/optimizer/cost.h.html#LN88"><span class='Ref_to_Proto'>cost_subqueryscan</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1772"><span class='Ref_To_Local'>pathnode</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1769"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1769"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1772"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1113"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN955"><span class='Ref_to_Member'>param_info</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pathnode.c.html#LN1772"><span class='Ref_To_Local'>pathnode</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end create_subqueryscan_path &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * create_functionscan_path 
 *    Creates a path corresponding to a sequential scan of a function, 
 *    returning the pathnode. 
 */ 
</span><a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>* 
</span><a name="LN1797"></a><span class='Declare_Function'>create_functionscan_path</span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN150"><span class='Ref_to_Struct'>PlannerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>root</span><span class='Delimiter'>, </span><a href="../../../include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rel</span><span class='Delimiter'>, 
</span><a name="LN1798"></a>                         <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pathkeys</span><span class='Delimiter'>, </span><a href="../../../include/nodes/relation.h.html#LN27"><span class='Ref_to_Typedef'>Relids</span></a> <span class='Declare_Parameter'>required_outer</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1800"></a>    <a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>pathnode</span> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN556"><span class='Ref_to_Macro'>makeNode</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pathnode.c.html#LN1800"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN950"><span class='Ref_to_Member'>pathtype</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN61"><span class='Ref_to_EnumConst'>T_FunctionScan</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1800"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN952"><span class='Ref_to_Member'>parent</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1797"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1800"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN953"><span class='Ref_to_Member'>pathtarget</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1797"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN535"><span class='Ref_to_Member'>reltarget</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1800"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN955"><span class='Ref_to_Member'>param_info</span></a> <span class='Operator'>= </span><a href="../../../include/optimizer/pathnode.h.html#LN275"><span class='Ref_to_Proto'>get_baserel_parampathinfo</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1797"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1797"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>, 
</span>                                                     <a href="pathnode.c.html#LN1798"><span class='Ref_to_Parameter'>required_outer</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1800"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN957"><span class='Ref_to_Member'>parallel_aware</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1800"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1797"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN532"><span class='Ref_to_Member'>consider_parallel</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1800"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN959"><span class='Ref_to_Member'>parallel_workers</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1800"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1798"><span class='Ref_to_Parameter'>pathkeys</span></a><span class='Delimiter'>; 
</span> 
    <a href="../../../include/optimizer/cost.h.html#LN90"><span class='Ref_to_Proto'>cost_functionscan</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1800"><span class='Ref_To_Local'>pathnode</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1797"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1797"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1800"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN955"><span class='Ref_to_Member'>param_info</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pathnode.c.html#LN1800"><span class='Ref_To_Local'>pathnode</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end create_functionscan_path &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * create_tablefuncscan_path 
 *    Creates a path corresponding to a sequential scan of a table function, 
 *    returning the pathnode. 
 */ 
</span><a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>* 
</span><a name="LN1823"></a><span class='Declare_Function'>create_tablefuncscan_path</span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN150"><span class='Ref_to_Struct'>PlannerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>root</span><span class='Delimiter'>, </span><a href="../../../include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rel</span><span class='Delimiter'>, 
</span><a name="LN1824"></a>                          <a href="../../../include/nodes/relation.h.html#LN27"><span class='Ref_to_Typedef'>Relids</span></a> <span class='Declare_Parameter'>required_outer</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1826"></a>    <a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>pathnode</span> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN556"><span class='Ref_to_Macro'>makeNode</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pathnode.c.html#LN1826"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN950"><span class='Ref_to_Member'>pathtype</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN63"><span class='Ref_to_EnumConst'>T_TableFuncScan</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1826"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN952"><span class='Ref_to_Member'>parent</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1823"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1826"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN953"><span class='Ref_to_Member'>pathtarget</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1823"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN535"><span class='Ref_to_Member'>reltarget</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1826"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN955"><span class='Ref_to_Member'>param_info</span></a> <span class='Operator'>= </span><a href="../../../include/optimizer/pathnode.h.html#LN275"><span class='Ref_to_Proto'>get_baserel_parampathinfo</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1823"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1823"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>, 
</span>                                                     <a href="pathnode.c.html#LN1824"><span class='Ref_to_Parameter'>required_outer</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1826"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN957"><span class='Ref_to_Member'>parallel_aware</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1826"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1823"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN532"><span class='Ref_to_Member'>consider_parallel</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1826"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN959"><span class='Ref_to_Member'>parallel_workers</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1826"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>;</span>   <span class='Comment_Single_Line'>/* result is always unordered */ 
</span> 
    <a href="../../../include/optimizer/cost.h.html#LN96"><span class='Ref_to_Proto'>cost_tablefuncscan</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1826"><span class='Ref_To_Local'>pathnode</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1823"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1823"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1826"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN955"><span class='Ref_to_Member'>param_info</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pathnode.c.html#LN1826"><span class='Ref_To_Local'>pathnode</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end create_tablefuncscan_path &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * create_valuesscan_path 
 *    Creates a path corresponding to a scan of a VALUES list, 
 *    returning the pathnode. 
 */ 
</span><a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>* 
</span><a name="LN1849"></a><span class='Declare_Function'>create_valuesscan_path</span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN150"><span class='Ref_to_Struct'>PlannerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>root</span><span class='Delimiter'>, </span><a href="../../../include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rel</span><span class='Delimiter'>, 
</span><a name="LN1850"></a>                       <a href="../../../include/nodes/relation.h.html#LN27"><span class='Ref_to_Typedef'>Relids</span></a> <span class='Declare_Parameter'>required_outer</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1852"></a>    <a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>pathnode</span> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN556"><span class='Ref_to_Macro'>makeNode</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pathnode.c.html#LN1852"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN950"><span class='Ref_to_Member'>pathtype</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN62"><span class='Ref_to_EnumConst'>T_ValuesScan</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1852"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN952"><span class='Ref_to_Member'>parent</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1849"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1852"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN953"><span class='Ref_to_Member'>pathtarget</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1849"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN535"><span class='Ref_to_Member'>reltarget</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1852"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN955"><span class='Ref_to_Member'>param_info</span></a> <span class='Operator'>= </span><a href="../../../include/optimizer/pathnode.h.html#LN275"><span class='Ref_to_Proto'>get_baserel_parampathinfo</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1849"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1849"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>, 
</span>                                                     <a href="pathnode.c.html#LN1850"><span class='Ref_to_Parameter'>required_outer</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1852"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN957"><span class='Ref_to_Member'>parallel_aware</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1852"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1849"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN532"><span class='Ref_to_Member'>consider_parallel</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1852"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN959"><span class='Ref_to_Member'>parallel_workers</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1852"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>;</span>   <span class='Comment_Single_Line'>/* result is always unordered */ 
</span> 
    <a href="../../../include/optimizer/cost.h.html#LN94"><span class='Ref_to_Proto'>cost_valuesscan</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1852"><span class='Ref_To_Local'>pathnode</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1849"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1849"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1852"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN955"><span class='Ref_to_Member'>param_info</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pathnode.c.html#LN1852"><span class='Ref_To_Local'>pathnode</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end create_valuesscan_path &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * create_ctescan_path 
 *    Creates a path corresponding to a scan of a non-self-reference CTE, 
 *    returning the pathnode. 
 */ 
</span><a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>* 
</span><a name="LN1875"></a><span class='Declare_Function'>create_ctescan_path</span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN150"><span class='Ref_to_Struct'>PlannerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>root</span><span class='Delimiter'>, </span><a href="../../../include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rel</span><span class='Delimiter'>, </span><a href="../../../include/nodes/relation.h.html#LN27"><span class='Ref_to_Typedef'>Relids</span></a> <span class='Declare_Parameter'>required_outer</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1877"></a>    <a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>pathnode</span> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN556"><span class='Ref_to_Macro'>makeNode</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pathnode.c.html#LN1877"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN950"><span class='Ref_to_Member'>pathtype</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN64"><span class='Ref_to_EnumConst'>T_CteScan</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1877"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN952"><span class='Ref_to_Member'>parent</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1875"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1877"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN953"><span class='Ref_to_Member'>pathtarget</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1875"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN535"><span class='Ref_to_Member'>reltarget</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1877"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN955"><span class='Ref_to_Member'>param_info</span></a> <span class='Operator'>= </span><a href="../../../include/optimizer/pathnode.h.html#LN275"><span class='Ref_to_Proto'>get_baserel_parampathinfo</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1875"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1875"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>, 
</span>                                                     <a href="pathnode.c.html#LN1875"><span class='Ref_to_Parameter'>required_outer</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1877"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN957"><span class='Ref_to_Member'>parallel_aware</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1877"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1875"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN532"><span class='Ref_to_Member'>consider_parallel</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1877"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN959"><span class='Ref_to_Member'>parallel_workers</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1877"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>;</span>   <span class='Comment_Single_Line'>/* XXX for now, result is always unordered */ 
</span> 
    <a href="../../../include/optimizer/cost.h.html#LN98"><span class='Ref_to_Proto'>cost_ctescan</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1877"><span class='Ref_To_Local'>pathnode</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1875"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1875"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1877"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN955"><span class='Ref_to_Member'>param_info</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pathnode.c.html#LN1877"><span class='Ref_To_Local'>pathnode</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * create_namedtuplestorescan_path 
 *    Creates a path corresponding to a scan of a named tuplestore, returning 
 *    the pathnode. 
 */ 
</span><a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>* 
</span><a name="LN1900"></a><span class='Declare_Function'>create_namedtuplestorescan_path</span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN150"><span class='Ref_to_Struct'>PlannerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>root</span><span class='Delimiter'>, </span><a href="../../../include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rel</span><span class='Delimiter'>, 
</span><a name="LN1901"></a>                                <a href="../../../include/nodes/relation.h.html#LN27"><span class='Ref_to_Typedef'>Relids</span></a> <span class='Declare_Parameter'>required_outer</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1903"></a>    <a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>pathnode</span> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN556"><span class='Ref_to_Macro'>makeNode</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pathnode.c.html#LN1903"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN950"><span class='Ref_to_Member'>pathtype</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN65"><span class='Ref_to_EnumConst'>T_NamedTuplestoreScan</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1903"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN952"><span class='Ref_to_Member'>parent</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1900"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1903"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN953"><span class='Ref_to_Member'>pathtarget</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1900"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN535"><span class='Ref_to_Member'>reltarget</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1903"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN955"><span class='Ref_to_Member'>param_info</span></a> <span class='Operator'>= </span><a href="../../../include/optimizer/pathnode.h.html#LN275"><span class='Ref_to_Proto'>get_baserel_parampathinfo</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1900"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1900"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>, 
</span>                                                     <a href="pathnode.c.html#LN1901"><span class='Ref_to_Parameter'>required_outer</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1903"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN957"><span class='Ref_to_Member'>parallel_aware</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1903"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1900"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN532"><span class='Ref_to_Member'>consider_parallel</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1903"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN959"><span class='Ref_to_Member'>parallel_workers</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1903"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>;</span>   <span class='Comment_Single_Line'>/* result is always unordered */ 
</span> 
    <a href="../../../include/optimizer/cost.h.html#LN100"><span class='Ref_to_Proto'>cost_namedtuplestorescan</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1903"><span class='Ref_To_Local'>pathnode</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1900"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1900"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1903"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN955"><span class='Ref_to_Member'>param_info</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pathnode.c.html#LN1903"><span class='Ref_To_Local'>pathnode</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end create_namedtuplestorescan_path &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * create_worktablescan_path 
 *    Creates a path corresponding to a scan of a self-reference CTE, 
 *    returning the pathnode. 
 */ 
</span><a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>* 
</span><a name="LN1926"></a><span class='Declare_Function'>create_worktablescan_path</span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN150"><span class='Ref_to_Struct'>PlannerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>root</span><span class='Delimiter'>, </span><a href="../../../include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rel</span><span class='Delimiter'>, 
</span><a name="LN1927"></a>                          <a href="../../../include/nodes/relation.h.html#LN27"><span class='Ref_to_Typedef'>Relids</span></a> <span class='Declare_Parameter'>required_outer</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1929"></a>    <a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>pathnode</span> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN556"><span class='Ref_to_Macro'>makeNode</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pathnode.c.html#LN1929"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN950"><span class='Ref_to_Member'>pathtype</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN66"><span class='Ref_to_EnumConst'>T_WorkTableScan</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1929"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN952"><span class='Ref_to_Member'>parent</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1926"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1929"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN953"><span class='Ref_to_Member'>pathtarget</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1926"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN535"><span class='Ref_to_Member'>reltarget</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1929"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN955"><span class='Ref_to_Member'>param_info</span></a> <span class='Operator'>= </span><a href="../../../include/optimizer/pathnode.h.html#LN275"><span class='Ref_to_Proto'>get_baserel_parampathinfo</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1926"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1926"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>, 
</span>                                                     <a href="pathnode.c.html#LN1927"><span class='Ref_to_Parameter'>required_outer</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1929"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN957"><span class='Ref_to_Member'>parallel_aware</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1929"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1926"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN532"><span class='Ref_to_Member'>consider_parallel</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1929"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN959"><span class='Ref_to_Member'>parallel_workers</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1929"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>;</span>   <span class='Comment_Single_Line'>/* result is always unordered */ 
</span> 
    <span class='Comment_Multi_Line'>/* Cost is the same as for a regular CTE scan */ 
</span>    <a href="../../../include/optimizer/cost.h.html#LN98"><span class='Ref_to_Proto'>cost_ctescan</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1929"><span class='Ref_To_Local'>pathnode</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1926"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1926"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1929"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN955"><span class='Ref_to_Member'>param_info</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pathnode.c.html#LN1929"><span class='Ref_To_Local'>pathnode</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end create_worktablescan_path &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * create_foreignscan_path 
 *    Creates a path corresponding to a scan of a foreign table, foreign join, 
 *    or foreign upper-relation processing, returning the pathnode. 
 * 
 * This function is never called from core Postgres; rather, it's expected 
 * to be called by the GetForeignPaths, GetForeignJoinPaths, or 
 * GetForeignUpperPaths function of a foreign data wrapper.  We make the FDW 
 * supply all fields of the path, since we do not have any way to calculate 
 * them in core.  However, there is a usually-sane default for the pathtarget 
 * (rel-&GT;reltarget), so we let a NULL for "target" select that. 
 */ 
</span><a href="../../../include/nodes/relation.h.html#LN1127"><span class='Ref_to_Struct'>ForeignPath</span></a> <span class='Operator'>* 
</span><a name="LN1960"></a><span class='Declare_Function'>create_foreignscan_path</span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN150"><span class='Ref_to_Struct'>PlannerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>root</span><span class='Delimiter'>, </span><a href="../../../include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rel</span><span class='Delimiter'>, 
</span><a name="LN1961"></a>                        <a href="../../../include/nodes/relation.h.html#LN879"><span class='Ref_to_Struct'>PathTarget</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>target</span><span class='Delimiter'>, 
</span><a name="LN1962"></a>                        <span class='Keyword'>double </span><span class='Declare_Parameter'>rows</span><span class='Delimiter'>, </span><a href="../../../include/nodes/nodes.h.html#LN638"><span class='Ref_to_Typedef'>Cost</span></a> <span class='Declare_Parameter'>startup_cost</span><span class='Delimiter'>, </span><a href="../../../include/nodes/nodes.h.html#LN638"><span class='Ref_to_Typedef'>Cost</span></a> <span class='Declare_Parameter'>total_cost</span><span class='Delimiter'>, 
</span><a name="LN1963"></a>                        <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pathkeys</span><span class='Delimiter'>, 
</span><a name="LN1964"></a>                        <a href="../../../include/nodes/relation.h.html#LN27"><span class='Ref_to_Typedef'>Relids</span></a> <span class='Declare_Parameter'>required_outer</span><span class='Delimiter'>, 
</span><a name="LN1965"></a>                        <a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fdw_outerpath</span><span class='Delimiter'>, 
</span><a name="LN1966"></a>                        <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fdw_private</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1968"></a>    <a href="../../../include/nodes/relation.h.html#LN1127"><span class='Ref_to_Struct'>ForeignPath</span></a> <span class='Operator'>*</span><span class='Declare_Local'>pathnode</span> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN556"><span class='Ref_to_Macro'>makeNode</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN1127"><span class='Ref_to_Struct'>ForeignPath</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pathnode.c.html#LN1968"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1129"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN950"><span class='Ref_to_Member'>pathtype</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN67"><span class='Ref_to_EnumConst'>T_ForeignScan</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1968"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1129"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN952"><span class='Ref_to_Member'>parent</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1960"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1968"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1129"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN953"><span class='Ref_to_Member'>pathtarget</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1961"><span class='Ref_to_Parameter'>target</span></a> <span class='Operator'>? </span><a href="pathnode.c.html#LN1961"><span class='Ref_to_Parameter'>target</span></a> <span class='Operator'>: </span><a href="pathnode.c.html#LN1960"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN535"><span class='Ref_to_Member'>reltarget</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1968"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1129"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN955"><span class='Ref_to_Member'>param_info</span></a> <span class='Operator'>= </span><a href="../../../include/optimizer/pathnode.h.html#LN275"><span class='Ref_to_Proto'>get_baserel_parampathinfo</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1960"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1960"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>, 
</span>                                                          <a href="pathnode.c.html#LN1964"><span class='Ref_to_Parameter'>required_outer</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1968"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1129"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN957"><span class='Ref_to_Member'>parallel_aware</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1968"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1129"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1960"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN532"><span class='Ref_to_Member'>consider_parallel</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1968"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1129"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN959"><span class='Ref_to_Member'>parallel_workers</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1968"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1129"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1962"><span class='Ref_to_Parameter'>rows</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1968"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1129"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1962"><span class='Ref_to_Parameter'>startup_cost</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1968"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1129"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1962"><span class='Ref_to_Parameter'>total_cost</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1968"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1129"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1963"><span class='Ref_to_Parameter'>pathkeys</span></a><span class='Delimiter'>; 
</span> 
    <a href="pathnode.c.html#LN1968"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1130"><span class='Ref_to_Member'>fdw_outerpath</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1965"><span class='Ref_to_Parameter'>fdw_outerpath</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN1968"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1131"><span class='Ref_to_Member'>fdw_private</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN1966"><span class='Ref_to_Parameter'>fdw_private</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pathnode.c.html#LN1968"><span class='Ref_To_Local'>pathnode</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end create_foreignscan_path &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * calc_nestloop_required_outer 
 *    Compute the required_outer set for a nestloop join path 
 * 
 * Note: result must not share storage with either input 
 */ 
</span><a href="../../../include/nodes/relation.h.html#LN27"><span class='Ref_to_Typedef'>Relids</span></a> 
<a name="LN1996"></a><span class='Declare_Function'>calc_nestloop_required_outer</span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>outer_path</span><span class='Delimiter'>, </span><a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>inner_path</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1998"></a>    <a href="../../../include/nodes/relation.h.html#LN27"><span class='Ref_to_Typedef'>Relids</span></a>      <span class='Declare_Local'>outer_paramrels</span> <span class='Operator'>= </span><a href="../../../include/nodes/relation.h.html#LN972"><span class='Ref_to_Macro'>PATH_REQ_OUTER</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1996"><span class='Ref_to_Parameter'>outer_path</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1999"></a>    <a href="../../../include/nodes/relation.h.html#LN27"><span class='Ref_to_Typedef'>Relids</span></a>      <span class='Declare_Local'>inner_paramrels</span> <span class='Operator'>= </span><a href="../../../include/nodes/relation.h.html#LN972"><span class='Ref_to_Macro'>PATH_REQ_OUTER</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1996"><span class='Ref_to_Parameter'>inner_path</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2000"></a>    <a href="../../../include/nodes/relation.h.html#LN27"><span class='Ref_to_Typedef'>Relids</span></a>      <span class='Declare_Local'>required_outer</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* inner_path can require rels from outer path, but not vice versa */ 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/nodes/bitmapset.h.html#LN76"><span class='Ref_to_Proto'>bms_overlap</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1998"><span class='Ref_To_Local'>outer_paramrels</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1996"><span class='Ref_to_Parameter'>inner_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN952"><span class='Ref_to_Member'>parent</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN524"><span class='Ref_to_Member'>relids</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* easy case if inner path is not parameterized */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pathnode.c.html#LN1999"><span class='Ref_To_Local'>inner_paramrels</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <a href="../../../include/nodes/bitmapset.h.html#LN65"><span class='Ref_to_Proto'>bms_copy</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1998"><span class='Ref_To_Local'>outer_paramrels</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* else, form the union ... */ 
</span>    <a href="pathnode.c.html#LN2000"><span class='Ref_To_Local'>required_outer</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/bitmapset.h.html#LN70"><span class='Ref_to_Proto'>bms_union</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN1998"><span class='Ref_To_Local'>outer_paramrels</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN1999"><span class='Ref_To_Local'>inner_paramrels</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* ... and remove any mention of now-satisfied outer rels */ 
</span>    <a href="pathnode.c.html#LN2000"><span class='Ref_To_Local'>required_outer</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/bitmapset.h.html#LN93"><span class='Ref_to_Proto'>bms_del_members</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN2000"><span class='Ref_To_Local'>required_outer</span></a><span class='Delimiter'>, 
</span>                                     <a href="pathnode.c.html#LN1996"><span class='Ref_to_Parameter'>outer_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN952"><span class='Ref_to_Member'>parent</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN524"><span class='Ref_to_Member'>relids</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* maintain invariant that required_outer is exactly NULL if empty */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/bitmapset.h.html#LN85"><span class='Ref_to_Proto'>bms_is_empty</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN2000"><span class='Ref_To_Local'>required_outer</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../../include/nodes/bitmapset.h.html#LN68"><span class='Ref_to_Proto'>bms_free</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN2000"><span class='Ref_To_Local'>required_outer</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pathnode.c.html#LN2000"><span class='Ref_To_Local'>required_outer</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>return</span> <a href="pathnode.c.html#LN2000"><span class='Ref_To_Local'>required_outer</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end calc_nestloop_required_outer &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * calc_non_nestloop_required_outer 
 *    Compute the required_outer set for a merge or hash join path 
 * 
 * Note: result must not share storage with either input 
 */ 
</span><a href="../../../include/nodes/relation.h.html#LN27"><span class='Ref_to_Typedef'>Relids</span></a> 
<a name="LN2028"></a><span class='Declare_Function'>calc_non_nestloop_required_outer</span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>outer_path</span><span class='Delimiter'>, </span><a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>inner_path</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2030"></a>    <a href="../../../include/nodes/relation.h.html#LN27"><span class='Ref_to_Typedef'>Relids</span></a>      <span class='Declare_Local'>outer_paramrels</span> <span class='Operator'>= </span><a href="../../../include/nodes/relation.h.html#LN972"><span class='Ref_to_Macro'>PATH_REQ_OUTER</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN2028"><span class='Ref_to_Parameter'>outer_path</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2031"></a>    <a href="../../../include/nodes/relation.h.html#LN27"><span class='Ref_to_Typedef'>Relids</span></a>      <span class='Declare_Local'>inner_paramrels</span> <span class='Operator'>= </span><a href="../../../include/nodes/relation.h.html#LN972"><span class='Ref_to_Macro'>PATH_REQ_OUTER</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN2028"><span class='Ref_to_Parameter'>inner_path</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2032"></a>    <a href="../../../include/nodes/relation.h.html#LN27"><span class='Ref_to_Typedef'>Relids</span></a>      <span class='Declare_Local'>required_outer</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* neither path can require rels from the other */ 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/nodes/bitmapset.h.html#LN76"><span class='Ref_to_Proto'>bms_overlap</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN2030"><span class='Ref_To_Local'>outer_paramrels</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN2028"><span class='Ref_to_Parameter'>inner_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN952"><span class='Ref_to_Member'>parent</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN524"><span class='Ref_to_Member'>relids</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/nodes/bitmapset.h.html#LN76"><span class='Ref_to_Proto'>bms_overlap</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN2031"><span class='Ref_To_Local'>inner_paramrels</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN2028"><span class='Ref_to_Parameter'>outer_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN952"><span class='Ref_to_Member'>parent</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN524"><span class='Ref_to_Member'>relids</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* form the union ... */ 
</span>    <a href="pathnode.c.html#LN2032"><span class='Ref_To_Local'>required_outer</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/bitmapset.h.html#LN70"><span class='Ref_to_Proto'>bms_union</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN2030"><span class='Ref_To_Local'>outer_paramrels</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN2031"><span class='Ref_To_Local'>inner_paramrels</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* we do not need an explicit test for empty; bms_union gets it right */ 
</span>    <span class='Control'>return</span> <a href="pathnode.c.html#LN2032"><span class='Ref_To_Local'>required_outer</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * create_nestloop_path 
 *    Creates a pathnode corresponding to a nestloop join between two 
 *    relations. 
 * 
 * 'joinrel' is the join relation. 
 * 'jointype' is the type of join required 
 * 'workspace' is the result from initial_cost_nestloop 
 * 'extra' contains various information about the join 
 * 'outer_path' is the outer path 
 * 'inner_path' is the inner path 
 * 'restrict_clauses' are the RestrictInfo nodes to apply at the join 
 * 'pathkeys' are the path keys of the new join path 
 * 'required_outer' is the set of required outer rels 
 * 
 * Returns the resulting path node. 
 */ 
</span><a href="../../../include/nodes/relation.h.html#LN1311"><span class='Ref_to_Typedef'>NestPath</span></a> <span class='Operator'>* 
</span><a name="LN2061"></a><span class='Declare_Function'>create_nestloop_path</span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN150"><span class='Ref_to_Struct'>PlannerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>root</span><span class='Delimiter'>, 
</span><a name="LN2062"></a>                     <a href="../../../include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>joinrel</span><span class='Delimiter'>, 
</span><a name="LN2063"></a>                     <a href="../../../include/nodes/nodes.h.html#LN671"><span class='Ref_to_Enum'>JoinType</span></a> <span class='Declare_Parameter'>jointype</span><span class='Delimiter'>, 
</span><a name="LN2064"></a>                     <a href="../../../include/nodes/relation.h.html#LN2199"><span class='Ref_to_Struct'>JoinCostWorkspace</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>workspace</span><span class='Delimiter'>, 
</span><a name="LN2065"></a>                     <a href="../../../include/nodes/relation.h.html#LN2177"><span class='Ref_to_Struct'>JoinPathExtraData</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>extra</span><span class='Delimiter'>, 
</span><a name="LN2066"></a>                     <a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>outer_path</span><span class='Delimiter'>, 
</span><a name="LN2067"></a>                     <a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>inner_path</span><span class='Delimiter'>, 
</span><a name="LN2068"></a>                     <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>restrict_clauses</span><span class='Delimiter'>, 
</span><a name="LN2069"></a>                     <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pathkeys</span><span class='Delimiter'>, 
</span><a name="LN2070"></a>                     <a href="../../../include/nodes/relation.h.html#LN27"><span class='Ref_to_Typedef'>Relids</span></a> <span class='Declare_Parameter'>required_outer</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2072"></a>    <a href="../../../include/nodes/relation.h.html#LN1311"><span class='Ref_to_Typedef'>NestPath</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>pathnode</span> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN556"><span class='Ref_to_Macro'>makeNode</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN1311"><span class='Ref_to_Typedef'>NestPath</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2073"></a>    <a href="../../../include/nodes/relation.h.html#LN27"><span class='Ref_to_Typedef'>Relids</span></a>      <span class='Declare_Local'>inner_req_outer</span> <span class='Operator'>= </span><a href="../../../include/nodes/relation.h.html#LN972"><span class='Ref_to_Macro'>PATH_REQ_OUTER</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN2067"><span class='Ref_to_Parameter'>inner_path</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If the inner path is parameterized by the outer, we must drop any 
     * restrict_clauses that are due to be moved into the inner path.  We have 
     * to do this now, rather than postpone the work till createplan time, 
     * because the restrict_clauses list can affect the size and cost 
     * estimates for this path. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/bitmapset.h.html#LN76"><span class='Ref_to_Proto'>bms_overlap</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN2073"><span class='Ref_To_Local'>inner_req_outer</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN2066"><span class='Ref_to_Parameter'>outer_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN952"><span class='Ref_to_Member'>parent</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN524"><span class='Ref_to_Member'>relids</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN2084"></a>        <a href="../../../include/nodes/relation.h.html#LN27"><span class='Ref_to_Typedef'>Relids</span></a>      <span class='Declare_Local'>inner_and_outer</span> <span class='Operator'>= </span><a href="../../../include/nodes/bitmapset.h.html#LN70"><span class='Ref_to_Proto'>bms_union</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN2067"><span class='Ref_to_Parameter'>inner_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN952"><span class='Ref_to_Member'>parent</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN524"><span class='Ref_to_Member'>relids</span></a><span class='Delimiter'>, 
</span>                                                <a href="pathnode.c.html#LN2073"><span class='Ref_To_Local'>inner_req_outer</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2086"></a>        <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>jclauses</span> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span><a name="LN2087"></a>        <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc</span><span class='Delimiter'>; 
</span> 
        <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN2087"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN2068"><span class='Ref_to_Parameter'>restrict_clauses</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN2091"></a>            <a href="../../../include/nodes/relation.h.html#LN1742"><span class='Ref_to_Struct'>RestrictInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>rinfo</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN1742"><span class='Ref_to_Struct'>RestrictInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN2087"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/optimizer/restrictinfo.h.html#LN41"><span class='Ref_to_Proto'>join_clause_is_movable_into</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN2091"><span class='Ref_To_Local'>rinfo</span></a><span class='Delimiter'>, 
</span>                                             <a href="pathnode.c.html#LN2067"><span class='Ref_to_Parameter'>inner_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN952"><span class='Ref_to_Member'>parent</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN524"><span class='Ref_to_Member'>relids</span></a><span class='Delimiter'>, 
</span>                                             <a href="pathnode.c.html#LN2084"><span class='Ref_To_Local'>inner_and_outer</span></a><span class='Parentheses'>))</span> 
                <a href="pathnode.c.html#LN2086"><span class='Ref_To_Local'>jclauses</span></a> <span class='Operator'>= </span><a href="../../nodes/list.c.html#LN126"><span class='Ref_to_Func'>lappend</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN2086"><span class='Ref_To_Local'>jclauses</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN2091"><span class='Ref_To_Local'>rinfo</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <a href="pathnode.c.html#LN2068"><span class='Ref_to_Parameter'>restrict_clauses</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2086"><span class='Ref_To_Local'>jclauses</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="pathnode.c.html#LN2072"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1288"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN950"><span class='Ref_to_Member'>pathtype</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN70"><span class='Ref_to_EnumConst'>T_NestLoop</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2072"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1288"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN952"><span class='Ref_to_Member'>parent</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2062"><span class='Ref_to_Parameter'>joinrel</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2072"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1288"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN953"><span class='Ref_to_Member'>pathtarget</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2062"><span class='Ref_to_Parameter'>joinrel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN535"><span class='Ref_to_Member'>reltarget</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2072"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1288"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN955"><span class='Ref_to_Member'>param_info</span></a> <span class='Operator'>= 
</span>        <a href="../../../include/optimizer/pathnode.h.html#LN278"><span class='Ref_to_Proto'>get_joinrel_parampathinfo</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN2061"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, 
</span>                                  <a href="pathnode.c.html#LN2062"><span class='Ref_to_Parameter'>joinrel</span></a><span class='Delimiter'>, 
</span>                                  <a href="pathnode.c.html#LN2066"><span class='Ref_to_Parameter'>outer_path</span></a><span class='Delimiter'>, 
</span>                                  <a href="pathnode.c.html#LN2067"><span class='Ref_to_Parameter'>inner_path</span></a><span class='Delimiter'>, 
</span>                                  <a href="pathnode.c.html#LN2065"><span class='Ref_to_Parameter'>extra</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN2182"><span class='Ref_to_Member'>sjinfo</span></a><span class='Delimiter'>, 
</span>                                  <a href="pathnode.c.html#LN2070"><span class='Ref_to_Parameter'>required_outer</span></a><span class='Delimiter'>, 
</span>                                  <span class='Operator'>&</span><a href="pathnode.c.html#LN2068"><span class='Ref_to_Parameter'>restrict_clauses</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2072"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1288"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN957"><span class='Ref_to_Member'>parallel_aware</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2072"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1288"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2062"><span class='Ref_to_Parameter'>joinrel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN532"><span class='Ref_to_Member'>consider_parallel</span></a> <span class='Operator'>&& 
</span>        <a href="pathnode.c.html#LN2066"><span class='Ref_to_Parameter'>outer_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a> <span class='Operator'>&& </span><a href="pathnode.c.html#LN2067"><span class='Ref_to_Parameter'>inner_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* This is a foolish way to estimate parallel_workers, but for now... */ 
</span>    <a href="pathnode.c.html#LN2072"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1288"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN959"><span class='Ref_to_Member'>parallel_workers</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2066"><span class='Ref_to_Parameter'>outer_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN959"><span class='Ref_to_Member'>parallel_workers</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2072"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1288"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2069"><span class='Ref_to_Parameter'>pathkeys</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2072"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1290"><span class='Ref_to_Member'>jointype</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2063"><span class='Ref_to_Parameter'>jointype</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2072"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1292"><span class='Ref_to_Member'>inner_unique</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2065"><span class='Ref_to_Parameter'>extra</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN2181"><span class='Ref_to_Member'>inner_unique</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2072"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1295"><span class='Ref_to_Member'>outerjoinpath</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2066"><span class='Ref_to_Parameter'>outer_path</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2072"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1296"><span class='Ref_to_Member'>innerjoinpath</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2067"><span class='Ref_to_Parameter'>inner_path</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2072"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1298"><span class='Ref_to_Member'>joinrestrictinfo</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2068"><span class='Ref_to_Parameter'>restrict_clauses</span></a><span class='Delimiter'>; 
</span> 
    <a href="../../../include/optimizer/cost.h.html#LN132"><span class='Ref_to_Proto'>final_cost_nestloop</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN2061"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN2072"><span class='Ref_To_Local'>pathnode</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN2064"><span class='Ref_to_Parameter'>workspace</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN2065"><span class='Ref_to_Parameter'>extra</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pathnode.c.html#LN2072"><span class='Ref_To_Local'>pathnode</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end create_nestloop_path &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * create_mergejoin_path 
 *    Creates a pathnode corresponding to a mergejoin join between 
 *    two relations 
 * 
 * 'joinrel' is the join relation 
 * 'jointype' is the type of join required 
 * 'workspace' is the result from initial_cost_mergejoin 
 * 'extra' contains various information about the join 
 * 'outer_path' is the outer path 
 * 'inner_path' is the inner path 
 * 'restrict_clauses' are the RestrictInfo nodes to apply at the join 
 * 'pathkeys' are the path keys of the new join path 
 * 'required_outer' is the set of required outer rels 
 * 'mergeclauses' are the RestrictInfo nodes to use as merge clauses 
 *      (this should be a subset of the restrict_clauses list) 
 * 'outersortkeys' are the sort varkeys for the outer relation 
 * 'innersortkeys' are the sort varkeys for the inner relation 
 */ 
</span><a href="../../../include/nodes/relation.h.html#LN1348"><span class='Ref_to_Struct'>MergePath</span></a> <span class='Operator'>* 
</span><a name="LN2149"></a><span class='Declare_Function'>create_mergejoin_path</span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN150"><span class='Ref_to_Struct'>PlannerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>root</span><span class='Delimiter'>, 
</span><a name="LN2150"></a>                      <a href="../../../include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>joinrel</span><span class='Delimiter'>, 
</span><a name="LN2151"></a>                      <a href="../../../include/nodes/nodes.h.html#LN671"><span class='Ref_to_Enum'>JoinType</span></a> <span class='Declare_Parameter'>jointype</span><span class='Delimiter'>, 
</span><a name="LN2152"></a>                      <a href="../../../include/nodes/relation.h.html#LN2199"><span class='Ref_to_Struct'>JoinCostWorkspace</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>workspace</span><span class='Delimiter'>, 
</span><a name="LN2153"></a>                      <a href="../../../include/nodes/relation.h.html#LN2177"><span class='Ref_to_Struct'>JoinPathExtraData</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>extra</span><span class='Delimiter'>, 
</span><a name="LN2154"></a>                      <a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>outer_path</span><span class='Delimiter'>, 
</span><a name="LN2155"></a>                      <a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>inner_path</span><span class='Delimiter'>, 
</span><a name="LN2156"></a>                      <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>restrict_clauses</span><span class='Delimiter'>, 
</span><a name="LN2157"></a>                      <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pathkeys</span><span class='Delimiter'>, 
</span><a name="LN2158"></a>                      <a href="../../../include/nodes/relation.h.html#LN27"><span class='Ref_to_Typedef'>Relids</span></a> <span class='Declare_Parameter'>required_outer</span><span class='Delimiter'>, 
</span><a name="LN2159"></a>                      <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>mergeclauses</span><span class='Delimiter'>, 
</span><a name="LN2160"></a>                      <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>outersortkeys</span><span class='Delimiter'>, 
</span><a name="LN2161"></a>                      <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>innersortkeys</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2163"></a>    <a href="../../../include/nodes/relation.h.html#LN1348"><span class='Ref_to_Struct'>MergePath</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>pathnode</span> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN556"><span class='Ref_to_Macro'>makeNode</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN1348"><span class='Ref_to_Struct'>MergePath</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pathnode.c.html#LN2163"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1350"><span class='Ref_to_Member'>jpath</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN1288"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN950"><span class='Ref_to_Member'>pathtype</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN71"><span class='Ref_to_EnumConst'>T_MergeJoin</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2163"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1350"><span class='Ref_to_Member'>jpath</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN1288"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN952"><span class='Ref_to_Member'>parent</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2150"><span class='Ref_to_Parameter'>joinrel</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2163"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1350"><span class='Ref_to_Member'>jpath</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN1288"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN953"><span class='Ref_to_Member'>pathtarget</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2150"><span class='Ref_to_Parameter'>joinrel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN535"><span class='Ref_to_Member'>reltarget</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2163"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1350"><span class='Ref_to_Member'>jpath</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN1288"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN955"><span class='Ref_to_Member'>param_info</span></a> <span class='Operator'>= 
</span>        <a href="../../../include/optimizer/pathnode.h.html#LN278"><span class='Ref_to_Proto'>get_joinrel_parampathinfo</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN2149"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, 
</span>                                  <a href="pathnode.c.html#LN2150"><span class='Ref_to_Parameter'>joinrel</span></a><span class='Delimiter'>, 
</span>                                  <a href="pathnode.c.html#LN2154"><span class='Ref_to_Parameter'>outer_path</span></a><span class='Delimiter'>, 
</span>                                  <a href="pathnode.c.html#LN2155"><span class='Ref_to_Parameter'>inner_path</span></a><span class='Delimiter'>, 
</span>                                  <a href="pathnode.c.html#LN2153"><span class='Ref_to_Parameter'>extra</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN2182"><span class='Ref_to_Member'>sjinfo</span></a><span class='Delimiter'>, 
</span>                                  <a href="pathnode.c.html#LN2158"><span class='Ref_to_Parameter'>required_outer</span></a><span class='Delimiter'>, 
</span>                                  <span class='Operator'>&</span><a href="pathnode.c.html#LN2156"><span class='Ref_to_Parameter'>restrict_clauses</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2163"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1350"><span class='Ref_to_Member'>jpath</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN1288"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN957"><span class='Ref_to_Member'>parallel_aware</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2163"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1350"><span class='Ref_to_Member'>jpath</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN1288"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2150"><span class='Ref_to_Parameter'>joinrel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN532"><span class='Ref_to_Member'>consider_parallel</span></a> <span class='Operator'>&& 
</span>        <a href="pathnode.c.html#LN2154"><span class='Ref_to_Parameter'>outer_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a> <span class='Operator'>&& </span><a href="pathnode.c.html#LN2155"><span class='Ref_to_Parameter'>inner_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* This is a foolish way to estimate parallel_workers, but for now... */ 
</span>    <a href="pathnode.c.html#LN2163"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1350"><span class='Ref_to_Member'>jpath</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN1288"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN959"><span class='Ref_to_Member'>parallel_workers</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2154"><span class='Ref_to_Parameter'>outer_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN959"><span class='Ref_to_Member'>parallel_workers</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2163"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1350"><span class='Ref_to_Member'>jpath</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN1288"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2157"><span class='Ref_to_Parameter'>pathkeys</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2163"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1350"><span class='Ref_to_Member'>jpath</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN1290"><span class='Ref_to_Member'>jointype</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2151"><span class='Ref_to_Parameter'>jointype</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2163"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1350"><span class='Ref_to_Member'>jpath</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN1292"><span class='Ref_to_Member'>inner_unique</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2153"><span class='Ref_to_Parameter'>extra</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN2181"><span class='Ref_to_Member'>inner_unique</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2163"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1350"><span class='Ref_to_Member'>jpath</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN1295"><span class='Ref_to_Member'>outerjoinpath</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2154"><span class='Ref_to_Parameter'>outer_path</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2163"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1350"><span class='Ref_to_Member'>jpath</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN1296"><span class='Ref_to_Member'>innerjoinpath</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2155"><span class='Ref_to_Parameter'>inner_path</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2163"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1350"><span class='Ref_to_Member'>jpath</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN1298"><span class='Ref_to_Member'>joinrestrictinfo</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2156"><span class='Ref_to_Parameter'>restrict_clauses</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2163"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1351"><span class='Ref_to_Member'>path_mergeclauses</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2159"><span class='Ref_to_Parameter'>mergeclauses</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2163"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1352"><span class='Ref_to_Member'>outersortkeys</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2160"><span class='Ref_to_Parameter'>outersortkeys</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2163"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1353"><span class='Ref_to_Member'>innersortkeys</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2161"><span class='Ref_to_Parameter'>innersortkeys</span></a><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* pathnode-&GT;skip_mark_restore will be set by final_cost_mergejoin */ 
</span>    <span class='Comment_Multi_Line'>/* pathnode-&GT;materialize_inner will be set by final_cost_mergejoin */ 
</span> 
    <a href="../../../include/optimizer/cost.h.html#LN142"><span class='Ref_to_Proto'>final_cost_mergejoin</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN2149"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN2163"><span class='Ref_To_Local'>pathnode</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN2152"><span class='Ref_to_Parameter'>workspace</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN2153"><span class='Ref_to_Parameter'>extra</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pathnode.c.html#LN2163"><span class='Ref_To_Local'>pathnode</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end create_mergejoin_path &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * create_hashjoin_path 
 *    Creates a pathnode corresponding to a hash join between two relations. 
 * 
 * 'joinrel' is the join relation 
 * 'jointype' is the type of join required 
 * 'workspace' is the result from initial_cost_hashjoin 
 * 'extra' contains various information about the join 
 * 'outer_path' is the cheapest outer path 
 * 'inner_path' is the cheapest inner path 
 * 'restrict_clauses' are the RestrictInfo nodes to apply at the join 
 * 'required_outer' is the set of required outer rels 
 * 'hashclauses' are the RestrictInfo nodes to use as hash clauses 
 *      (this should be a subset of the restrict_clauses list) 
 */ 
</span><a href="../../../include/nodes/relation.h.html#LN1367"><span class='Ref_to_Struct'>HashPath</span></a> <span class='Operator'>* 
</span><a name="LN2214"></a><span class='Declare_Function'>create_hashjoin_path</span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN150"><span class='Ref_to_Struct'>PlannerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>root</span><span class='Delimiter'>, 
</span><a name="LN2215"></a>                     <a href="../../../include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>joinrel</span><span class='Delimiter'>, 
</span><a name="LN2216"></a>                     <a href="../../../include/nodes/nodes.h.html#LN671"><span class='Ref_to_Enum'>JoinType</span></a> <span class='Declare_Parameter'>jointype</span><span class='Delimiter'>, 
</span><a name="LN2217"></a>                     <a href="../../../include/nodes/relation.h.html#LN2199"><span class='Ref_to_Struct'>JoinCostWorkspace</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>workspace</span><span class='Delimiter'>, 
</span><a name="LN2218"></a>                     <a href="../../../include/nodes/relation.h.html#LN2177"><span class='Ref_to_Struct'>JoinPathExtraData</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>extra</span><span class='Delimiter'>, 
</span><a name="LN2219"></a>                     <a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>outer_path</span><span class='Delimiter'>, 
</span><a name="LN2220"></a>                     <a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>inner_path</span><span class='Delimiter'>, 
</span><a name="LN2221"></a>                     <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>restrict_clauses</span><span class='Delimiter'>, 
</span><a name="LN2222"></a>                     <a href="../../../include/nodes/relation.h.html#LN27"><span class='Ref_to_Typedef'>Relids</span></a> <span class='Declare_Parameter'>required_outer</span><span class='Delimiter'>, 
</span><a name="LN2223"></a>                     <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>hashclauses</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2225"></a>    <a href="../../../include/nodes/relation.h.html#LN1367"><span class='Ref_to_Struct'>HashPath</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>pathnode</span> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN556"><span class='Ref_to_Macro'>makeNode</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN1367"><span class='Ref_to_Struct'>HashPath</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pathnode.c.html#LN2225"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1369"><span class='Ref_to_Member'>jpath</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN1288"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN950"><span class='Ref_to_Member'>pathtype</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN72"><span class='Ref_to_EnumConst'>T_HashJoin</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2225"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1369"><span class='Ref_to_Member'>jpath</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN1288"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN952"><span class='Ref_to_Member'>parent</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2215"><span class='Ref_to_Parameter'>joinrel</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2225"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1369"><span class='Ref_to_Member'>jpath</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN1288"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN953"><span class='Ref_to_Member'>pathtarget</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2215"><span class='Ref_to_Parameter'>joinrel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN535"><span class='Ref_to_Member'>reltarget</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2225"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1369"><span class='Ref_to_Member'>jpath</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN1288"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN955"><span class='Ref_to_Member'>param_info</span></a> <span class='Operator'>= 
</span>        <a href="../../../include/optimizer/pathnode.h.html#LN278"><span class='Ref_to_Proto'>get_joinrel_parampathinfo</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN2214"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, 
</span>                                  <a href="pathnode.c.html#LN2215"><span class='Ref_to_Parameter'>joinrel</span></a><span class='Delimiter'>, 
</span>                                  <a href="pathnode.c.html#LN2219"><span class='Ref_to_Parameter'>outer_path</span></a><span class='Delimiter'>, 
</span>                                  <a href="pathnode.c.html#LN2220"><span class='Ref_to_Parameter'>inner_path</span></a><span class='Delimiter'>, 
</span>                                  <a href="pathnode.c.html#LN2218"><span class='Ref_to_Parameter'>extra</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN2182"><span class='Ref_to_Member'>sjinfo</span></a><span class='Delimiter'>, 
</span>                                  <a href="pathnode.c.html#LN2222"><span class='Ref_to_Parameter'>required_outer</span></a><span class='Delimiter'>, 
</span>                                  <span class='Operator'>&</span><a href="pathnode.c.html#LN2221"><span class='Ref_to_Parameter'>restrict_clauses</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2225"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1369"><span class='Ref_to_Member'>jpath</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN1288"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN957"><span class='Ref_to_Member'>parallel_aware</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2225"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1369"><span class='Ref_to_Member'>jpath</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN1288"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2215"><span class='Ref_to_Parameter'>joinrel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN532"><span class='Ref_to_Member'>consider_parallel</span></a> <span class='Operator'>&& 
</span>        <a href="pathnode.c.html#LN2219"><span class='Ref_to_Parameter'>outer_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a> <span class='Operator'>&& </span><a href="pathnode.c.html#LN2220"><span class='Ref_to_Parameter'>inner_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* This is a foolish way to estimate parallel_workers, but for now... */ 
</span>    <a href="pathnode.c.html#LN2225"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1369"><span class='Ref_to_Member'>jpath</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN1288"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN959"><span class='Ref_to_Member'>parallel_workers</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2219"><span class='Ref_to_Parameter'>outer_path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN959"><span class='Ref_to_Member'>parallel_workers</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * A hashjoin never has pathkeys, since its output ordering is 
     * unpredictable due to possible batching.  XXX If the inner relation is 
     * small enough, we could instruct the executor that it must not batch, 
     * and then we could assume that the output inherits the outer relation's 
     * ordering, which might save a sort step.  However there is considerable 
     * downside if our estimate of the inner relation size is badly off. For 
     * the moment we don't risk it.  (Note also that if we wanted to take this 
     * seriously, joinpath.c would have to consider many more paths for the 
     * outer rel than it does now.) 
     */ 
</span>    <a href="pathnode.c.html#LN2225"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1369"><span class='Ref_to_Member'>jpath</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN1288"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2225"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1369"><span class='Ref_to_Member'>jpath</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN1290"><span class='Ref_to_Member'>jointype</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2216"><span class='Ref_to_Parameter'>jointype</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2225"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1369"><span class='Ref_to_Member'>jpath</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN1292"><span class='Ref_to_Member'>inner_unique</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2218"><span class='Ref_to_Parameter'>extra</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN2181"><span class='Ref_to_Member'>inner_unique</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2225"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1369"><span class='Ref_to_Member'>jpath</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN1295"><span class='Ref_to_Member'>outerjoinpath</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2219"><span class='Ref_to_Parameter'>outer_path</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2225"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1369"><span class='Ref_to_Member'>jpath</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN1296"><span class='Ref_to_Member'>innerjoinpath</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2220"><span class='Ref_to_Parameter'>inner_path</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2225"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1369"><span class='Ref_to_Member'>jpath</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN1298"><span class='Ref_to_Member'>joinrestrictinfo</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2221"><span class='Ref_to_Parameter'>restrict_clauses</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2225"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1370"><span class='Ref_to_Member'>path_hashclauses</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2223"><span class='Ref_to_Parameter'>hashclauses</span></a><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* final_cost_hashjoin will fill in pathnode-&GT;num_batches */ 
</span> 
    <a href="../../../include/optimizer/cost.h.html#LN151"><span class='Ref_to_Proto'>final_cost_hashjoin</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN2214"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN2225"><span class='Ref_To_Local'>pathnode</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN2217"><span class='Ref_to_Parameter'>workspace</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN2218"><span class='Ref_to_Parameter'>extra</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pathnode.c.html#LN2225"><span class='Ref_To_Local'>pathnode</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end create_hashjoin_path &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * create_projection_path 
 *    Creates a pathnode that represents performing a projection. 
 * 
 * 'rel' is the parent relation associated with the result 
 * 'subpath' is the path representing the source of data 
 * 'target' is the PathTarget to be computed 
 */ 
</span><a href="../../../include/nodes/relation.h.html#LN1388"><span class='Ref_to_Struct'>ProjectionPath</span></a> <span class='Operator'>* 
</span><a name="LN2278"></a><span class='Declare_Function'>create_projection_path</span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN150"><span class='Ref_to_Struct'>PlannerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>root</span><span class='Delimiter'>, 
</span><a name="LN2279"></a>                       <a href="../../../include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rel</span><span class='Delimiter'>, 
</span><a name="LN2280"></a>                       <a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>subpath</span><span class='Delimiter'>, 
</span><a name="LN2281"></a>                       <a href="../../../include/nodes/relation.h.html#LN879"><span class='Ref_to_Struct'>PathTarget</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>target</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2283"></a>    <a href="../../../include/nodes/relation.h.html#LN1388"><span class='Ref_to_Struct'>ProjectionPath</span></a> <span class='Operator'>*</span><span class='Declare_Local'>pathnode</span> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN556"><span class='Ref_to_Macro'>makeNode</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN1388"><span class='Ref_to_Struct'>ProjectionPath</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2284"></a>    <a href="../../../include/nodes/relation.h.html#LN879"><span class='Ref_to_Struct'>PathTarget</span></a> <span class='Operator'>*</span><span class='Declare_Local'>oldtarget</span> <span class='Operator'>= </span><a href="pathnode.c.html#LN2280"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN953"><span class='Ref_to_Member'>pathtarget</span></a><span class='Delimiter'>; 
</span> 
    <a href="pathnode.c.html#LN2283"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1390"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN950"><span class='Ref_to_Member'>pathtype</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN44"><span class='Ref_to_EnumConst'>T_Result</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2283"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1390"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN952"><span class='Ref_to_Member'>parent</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2279"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2283"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1390"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN953"><span class='Ref_to_Member'>pathtarget</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2281"><span class='Ref_to_Parameter'>target</span></a><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* For now, assume we are above any joins, so no parameterization */ 
</span>    <a href="pathnode.c.html#LN2283"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1390"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN955"><span class='Ref_to_Member'>param_info</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2283"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1390"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN957"><span class='Ref_to_Member'>parallel_aware</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2283"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1390"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2279"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN532"><span class='Ref_to_Member'>consider_parallel</span></a> <span class='Operator'>&& 
</span>        <a href="pathnode.c.html#LN2280"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a> <span class='Operator'>&& 
</span>        <a href="../../../include/optimizer/clauses.h.html#LN63"><span class='Ref_to_Proto'>is_parallel_safe</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN2278"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pathnode.c.html#LN2281"><span class='Ref_to_Parameter'>target</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN882"><span class='Ref_to_Member'>exprs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2283"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1390"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN959"><span class='Ref_to_Member'>parallel_workers</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2280"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN959"><span class='Ref_to_Member'>parallel_workers</span></a><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* Projection does not change the sort order */ 
</span>    <a href="pathnode.c.html#LN2283"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1390"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2280"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a><span class='Delimiter'>; 
</span> 
    <a href="pathnode.c.html#LN2283"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1391"><span class='Ref_to_Member'>subpath</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2280"><span class='Ref_to_Parameter'>subpath</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * We might not need a separate Result node.  If the input plan node type 
     * can project, we can just tell it to project something else.  Or, if it 
     * can't project but the desired target has the same expression list as 
     * what the input will produce anyway, we can still give it the desired 
     * tlist (possibly changing its ressortgroupref labels, but nothing else). 
     * Note: in the latter case, create_projection_plan has to recheck our 
     * conclusion; see comments therein. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/optimizer/planmain.h.html#LN55"><span class='Ref_to_Proto'>is_projection_capable_path</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN2280"><span class='Ref_to_Parameter'>subpath</span></a><span class='Parentheses'>) </span><span class='Operator'>|| 
</span>        <a href="../../../include/nodes/nodes.h.html#LN626"><span class='Ref_to_Proto'>equal</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN2284"><span class='Ref_To_Local'>oldtarget</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN882"><span class='Ref_to_Member'>exprs</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN2281"><span class='Ref_to_Parameter'>target</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN882"><span class='Ref_to_Member'>exprs</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* No separate Result node needed */ 
</span>        <a href="pathnode.c.html#LN2283"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1392"><span class='Ref_to_Member'>dummypp</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Set cost of plan as subpath's cost, adjusted for tlist replacement. 
         */ 
</span>        <a href="pathnode.c.html#LN2283"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1390"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2280"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a><span class='Delimiter'>; 
</span>        <a href="pathnode.c.html#LN2283"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1390"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2280"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a> <span class='Operator'>+ 
</span>            <span class='Parentheses'>(</span><a href="pathnode.c.html#LN2281"><span class='Ref_to_Parameter'>target</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN884"><span class='Ref_to_Member'>cost</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN44"><span class='Ref_to_Member'>startup</span></a> <span class='Operator'>- </span><a href="pathnode.c.html#LN2284"><span class='Ref_To_Local'>oldtarget</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN884"><span class='Ref_to_Member'>cost</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN44"><span class='Ref_to_Member'>startup</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pathnode.c.html#LN2283"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1390"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2280"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a> <span class='Operator'>+ 
</span>            <span class='Parentheses'>(</span><a href="pathnode.c.html#LN2281"><span class='Ref_to_Parameter'>target</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN884"><span class='Ref_to_Member'>cost</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN44"><span class='Ref_to_Member'>startup</span></a> <span class='Operator'>- </span><a href="pathnode.c.html#LN2284"><span class='Ref_To_Local'>oldtarget</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN884"><span class='Ref_to_Member'>cost</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN44"><span class='Ref_to_Member'>startup</span></a><span class='Parentheses'>) </span><span class='Operator'>+ 
</span>            <span class='Parentheses'>(</span><a href="pathnode.c.html#LN2281"><span class='Ref_to_Parameter'>target</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN884"><span class='Ref_to_Member'>cost</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN45"><span class='Ref_to_Member'>per_tuple</span></a> <span class='Operator'>- </span><a href="pathnode.c.html#LN2284"><span class='Ref_To_Local'>oldtarget</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN884"><span class='Ref_to_Member'>cost</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN45"><span class='Ref_to_Member'>per_tuple</span></a><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="pathnode.c.html#LN2280"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* We really do need the Result node */ 
</span>        <a href="pathnode.c.html#LN2283"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1392"><span class='Ref_to_Member'>dummypp</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * The Result node's cost is cpu_tuple_cost per row, plus the cost of 
         * evaluating the tlist.  There is no qual to worry about. 
         */ 
</span>        <a href="pathnode.c.html#LN2283"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1390"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2280"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a><span class='Delimiter'>; 
</span>        <a href="pathnode.c.html#LN2283"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1390"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2280"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a> <span class='Operator'>+ 
</span>            <a href="pathnode.c.html#LN2281"><span class='Ref_to_Parameter'>target</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN884"><span class='Ref_to_Member'>cost</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN44"><span class='Ref_to_Member'>startup</span></a><span class='Delimiter'>; 
</span>        <a href="pathnode.c.html#LN2283"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1390"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2280"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a> <span class='Operator'>+ 
</span>            <a href="pathnode.c.html#LN2281"><span class='Ref_to_Parameter'>target</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN884"><span class='Ref_to_Member'>cost</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN44"><span class='Ref_to_Member'>startup</span></a> <span class='Operator'>+ 
</span>            <span class='Parentheses'>(</span><a href="../path/costsize.c.html#LN105"><span class='Ref_to_Global_Var'>cpu_tuple_cost</span></a> <span class='Operator'>+ </span><a href="pathnode.c.html#LN2281"><span class='Ref_to_Parameter'>target</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN884"><span class='Ref_to_Member'>cost</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN45"><span class='Ref_to_Member'>per_tuple</span></a><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="pathnode.c.html#LN2280"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>return</span> <a href="pathnode.c.html#LN2283"><span class='Ref_To_Local'>pathnode</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end create_projection_path &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * apply_projection_to_path 
 *    Add a projection step, or just apply the target directly to given path. 
 * 
 * This has the same net effect as create_projection_path(), except that if 
 * a separate Result plan node isn't needed, we just replace the given path's 
 * pathtarget with the desired one.  This must be used only when the caller 
 * knows that the given path isn't referenced elsewhere and so can be modified 
 * in-place. 
 * 
 * If the input path is a GatherPath, we try to push the new target down to 
 * its input as well; this is a yet more invasive modification of the input 
 * path, which create_projection_path() can't do. 
 * 
 * Note that we mustn't change the source path's parent link; so when it is 
 * add_path'd to "rel" things will be a bit inconsistent.  So far that has 
 * not caused any trouble. 
 * 
 * 'rel' is the parent relation associated with the result 
 * 'path' is the path representing the source of data 
 * 'target' is the PathTarget to be computed 
 */ 
</span><a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>* 
</span><a name="LN2369"></a><span class='Declare_Function'>apply_projection_to_path</span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN150"><span class='Ref_to_Struct'>PlannerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>root</span><span class='Delimiter'>, 
</span><a name="LN2370"></a>                         <a href="../../../include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rel</span><span class='Delimiter'>, 
</span><a name="LN2371"></a>                         <a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>path</span><span class='Delimiter'>, 
</span><a name="LN2372"></a>                         <a href="../../../include/nodes/relation.h.html#LN879"><span class='Ref_to_Struct'>PathTarget</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>target</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2374"></a>    <a href="../../../include/nodes/relation.h.html#LN42"><span class='Ref_to_Struct'>QualCost</span></a>    <span class='Declare_Local'>oldcost</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If given path can't project, we might need a Result node, so make a 
     * separate ProjectionPath. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/optimizer/planmain.h.html#LN55"><span class='Ref_to_Proto'>is_projection_capable_path</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN2371"><span class='Ref_to_Parameter'>path</span></a><span class='Parentheses'>))</span> 
        <span class='Control'>return</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/optimizer/pathnode.h.html#LN153"><span class='Ref_to_Proto'>create_projection_path</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN2369"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN2370"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN2371"><span class='Ref_to_Parameter'>path</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN2372"><span class='Ref_to_Parameter'>target</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * We can just jam the desired tlist into the existing path, being sure to 
     * update its cost estimates appropriately. 
     */ 
</span>    <a href="pathnode.c.html#LN2374"><span class='Ref_To_Local'>oldcost</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2371"><span class='Ref_to_Parameter'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN953"><span class='Ref_to_Member'>pathtarget</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN884"><span class='Ref_to_Member'>cost</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2371"><span class='Ref_to_Parameter'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN953"><span class='Ref_to_Member'>pathtarget</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2372"><span class='Ref_to_Parameter'>target</span></a><span class='Delimiter'>; 
</span> 
    <a href="pathnode.c.html#LN2371"><span class='Ref_to_Parameter'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a> <span class='Operator'>+= </span><a href="pathnode.c.html#LN2372"><span class='Ref_to_Parameter'>target</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN884"><span class='Ref_to_Member'>cost</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN44"><span class='Ref_to_Member'>startup</span></a> <span class='Operator'>- </span><a href="pathnode.c.html#LN2374"><span class='Ref_To_Local'>oldcost</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN44"><span class='Ref_to_Member'>startup</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2371"><span class='Ref_to_Parameter'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a> <span class='Operator'>+= </span><a href="pathnode.c.html#LN2372"><span class='Ref_to_Parameter'>target</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN884"><span class='Ref_to_Member'>cost</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN44"><span class='Ref_to_Member'>startup</span></a> <span class='Operator'>- </span><a href="pathnode.c.html#LN2374"><span class='Ref_To_Local'>oldcost</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN44"><span class='Ref_to_Member'>startup</span></a> <span class='Operator'>+ 
</span>        <span class='Parentheses'>(</span><a href="pathnode.c.html#LN2372"><span class='Ref_to_Parameter'>target</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN884"><span class='Ref_to_Member'>cost</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN45"><span class='Ref_to_Member'>per_tuple</span></a> <span class='Operator'>- </span><a href="pathnode.c.html#LN2374"><span class='Ref_To_Local'>oldcost</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN45"><span class='Ref_to_Member'>per_tuple</span></a><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="pathnode.c.html#LN2371"><span class='Ref_to_Parameter'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If the path happens to be a Gather path, we'd like to arrange for the 
     * subpath to return the required target list so that workers can help 
     * project.  But if there is something that is not parallel-safe in the 
     * target expressions, then we can't. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN2371"><span class='Ref_to_Parameter'>path</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/relation.h.html#LN1261"><span class='Ref_to_Struct'>GatherPath</span></a><span class='Parentheses'>)</span> <span class='Operator'>&& 
</span>        <a href="../../../include/optimizer/clauses.h.html#LN63"><span class='Ref_to_Proto'>is_parallel_safe</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN2369"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pathnode.c.html#LN2372"><span class='Ref_to_Parameter'>target</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN882"><span class='Ref_to_Member'>exprs</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN2403"></a>        <a href="../../../include/nodes/relation.h.html#LN1261"><span class='Ref_to_Struct'>GatherPath</span></a> <span class='Operator'>*</span><span class='Declare_Local'>gpath</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN1261"><span class='Ref_to_Struct'>GatherPath</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pathnode.c.html#LN2371"><span class='Ref_to_Parameter'>path</span></a><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * We always use create_projection_path here, even if the subpath is 
         * projection-capable, so as to avoid modifying the subpath in place. 
         * It seems unlikely at present that there could be any other 
         * references to the subpath, but better safe than sorry. 
         * 
         * Note that we don't change the GatherPath's cost estimates; it might 
         * be appropriate to do so, to reflect the fact that the bulk of the 
         * target evaluation will happen in workers. 
         */ 
</span>        <a href="pathnode.c.html#LN2403"><span class='Ref_To_Local'>gpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1264"><span class='Ref_to_Member'>subpath</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>*</span><span class='Parentheses'>) 
</span>            <a href="../../../include/optimizer/pathnode.h.html#LN153"><span class='Ref_to_Proto'>create_projection_path</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN2369"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, 
</span>                                   <a href="pathnode.c.html#LN2403"><span class='Ref_To_Local'>gpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1264"><span class='Ref_to_Member'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN952"><span class='Ref_to_Member'>parent</span></a><span class='Delimiter'>, 
</span>                                   <a href="pathnode.c.html#LN2403"><span class='Ref_To_Local'>gpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1264"><span class='Ref_to_Member'>subpath</span></a><span class='Delimiter'>, 
</span>                                   <a href="pathnode.c.html#LN2372"><span class='Ref_to_Parameter'>target</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if IsA(path,GatherPath)&... &raquo; </span> 
    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN2371"><span class='Ref_to_Parameter'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a> <span class='Operator'>&& 
</span>             <span class='Operator'>!</span><a href="../../../include/optimizer/clauses.h.html#LN63"><span class='Ref_to_Proto'>is_parallel_safe</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN2369"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pathnode.c.html#LN2372"><span class='Ref_to_Parameter'>target</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN882"><span class='Ref_to_Member'>exprs</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * We're inserting a parallel-restricted target list into a path 
         * currently marked parallel-safe, so we have to mark it as no longer 
         * safe. 
         */ 
</span>        <a href="pathnode.c.html#LN2371"><span class='Ref_to_Parameter'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>return</span> <a href="pathnode.c.html#LN2371"><span class='Ref_to_Parameter'>path</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end apply_projection_to_path &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * create_set_projection_path 
 *    Creates a pathnode that represents performing a projection that 
 *    includes set-returning functions. 
 * 
 * 'rel' is the parent relation associated with the result 
 * 'subpath' is the path representing the source of data 
 * 'target' is the PathTarget to be computed 
 */ 
</span><a href="../../../include/nodes/relation.h.html#LN1400"><span class='Ref_to_Struct'>ProjectSetPath</span></a> <span class='Operator'>* 
</span><a name="LN2445"></a><span class='Declare_Function'>create_set_projection_path</span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN150"><span class='Ref_to_Struct'>PlannerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>root</span><span class='Delimiter'>, 
</span><a name="LN2446"></a>                           <a href="../../../include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rel</span><span class='Delimiter'>, 
</span><a name="LN2447"></a>                           <a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>subpath</span><span class='Delimiter'>, 
</span><a name="LN2448"></a>                           <a href="../../../include/nodes/relation.h.html#LN879"><span class='Ref_to_Struct'>PathTarget</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>target</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2450"></a>    <a href="../../../include/nodes/relation.h.html#LN1400"><span class='Ref_to_Struct'>ProjectSetPath</span></a> <span class='Operator'>*</span><span class='Declare_Local'>pathnode</span> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN556"><span class='Ref_to_Macro'>makeNode</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN1400"><span class='Ref_to_Struct'>ProjectSetPath</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2451"></a>    <span class='Keyword'>double</span>      <span class='Declare_Local'>tlist_rows</span><span class='Delimiter'>; 
</span><a name="LN2452"></a>    <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc</span><span class='Delimiter'>; 
</span> 
    <a href="pathnode.c.html#LN2450"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1402"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN950"><span class='Ref_to_Member'>pathtype</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN45"><span class='Ref_to_EnumConst'>T_ProjectSet</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2450"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1402"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN952"><span class='Ref_to_Member'>parent</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2446"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2450"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1402"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN953"><span class='Ref_to_Member'>pathtarget</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2448"><span class='Ref_to_Parameter'>target</span></a><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* For now, assume we are above any joins, so no parameterization */ 
</span>    <a href="pathnode.c.html#LN2450"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1402"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN955"><span class='Ref_to_Member'>param_info</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2450"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1402"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN957"><span class='Ref_to_Member'>parallel_aware</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2450"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1402"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2446"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN532"><span class='Ref_to_Member'>consider_parallel</span></a> <span class='Operator'>&& 
</span>        <a href="pathnode.c.html#LN2447"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a> <span class='Operator'>&& 
</span>        <a href="../../../include/optimizer/clauses.h.html#LN63"><span class='Ref_to_Proto'>is_parallel_safe</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN2445"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pathnode.c.html#LN2448"><span class='Ref_to_Parameter'>target</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN882"><span class='Ref_to_Member'>exprs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2450"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1402"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN959"><span class='Ref_to_Member'>parallel_workers</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2447"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN959"><span class='Ref_to_Member'>parallel_workers</span></a><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* Projection does not change the sort order XXX? */ 
</span>    <a href="pathnode.c.html#LN2450"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1402"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2447"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a><span class='Delimiter'>; 
</span> 
    <a href="pathnode.c.html#LN2450"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1403"><span class='Ref_to_Member'>subpath</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2447"><span class='Ref_to_Parameter'>subpath</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Estimate number of rows produced by SRFs for each row of input; if 
     * there's more than one in this node, use the maximum. 
     */ 
</span>    <a href="pathnode.c.html#LN2451"><span class='Ref_To_Local'>tlist_rows</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN2452"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN2448"><span class='Ref_to_Parameter'>target</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN882"><span class='Ref_to_Member'>exprs</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN2476"></a>        <a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>node</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN2452"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2477"></a>        <span class='Keyword'>double</span>      <span class='Declare_Local'>itemrows</span><span class='Delimiter'>; 
</span> 
        <a href="pathnode.c.html#LN2477"><span class='Ref_To_Local'>itemrows</span></a> <span class='Operator'>= </span><a href="../../../include/optimizer/clauses.h.html#LN55"><span class='Ref_to_Proto'>expression_returns_set_rows</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN2476"><span class='Ref_To_Local'>node</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN2451"><span class='Ref_To_Local'>tlist_rows</span></a> <span class='Operator'>&LT; </span><a href="pathnode.c.html#LN2477"><span class='Ref_To_Local'>itemrows</span></a><span class='Parentheses'>) 
</span>            <a href="pathnode.c.html#LN2451"><span class='Ref_To_Local'>tlist_rows</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2477"><span class='Ref_To_Local'>itemrows</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * In addition to the cost of evaluating the tlist, charge cpu_tuple_cost 
     * per input row, and half of cpu_tuple_cost for each added output row. 
     * This is slightly bizarre maybe, but it's what 9.6 did; we may revisit 
     * this estimate later. 
     */ 
</span>    <a href="pathnode.c.html#LN2450"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1402"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2447"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a> <span class='Operator'>* </span><a href="pathnode.c.html#LN2451"><span class='Ref_To_Local'>tlist_rows</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2450"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1402"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2447"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a> <span class='Operator'>+ 
</span>        <a href="pathnode.c.html#LN2448"><span class='Ref_to_Parameter'>target</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN884"><span class='Ref_to_Member'>cost</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN44"><span class='Ref_to_Member'>startup</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2450"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1402"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2447"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a> <span class='Operator'>+ 
</span>        <a href="pathnode.c.html#LN2448"><span class='Ref_to_Parameter'>target</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN884"><span class='Ref_to_Member'>cost</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN44"><span class='Ref_to_Member'>startup</span></a> <span class='Operator'>+ 
</span>        <span class='Parentheses'>(</span><a href="../path/costsize.c.html#LN105"><span class='Ref_to_Global_Var'>cpu_tuple_cost</span></a> <span class='Operator'>+ </span><a href="pathnode.c.html#LN2448"><span class='Ref_to_Parameter'>target</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN884"><span class='Ref_to_Member'>cost</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN45"><span class='Ref_to_Member'>per_tuple</span></a><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="pathnode.c.html#LN2447"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a> <span class='Operator'>+ 
</span>        <span class='Parentheses'>(</span><a href="pathnode.c.html#LN2450"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1402"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a> <span class='Operator'>- </span><a href="pathnode.c.html#LN2447"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="../path/costsize.c.html#LN105"><span class='Ref_to_Global_Var'>cpu_tuple_cost</span></a> <span class='Operator'>/ </span><span class='Number'>2</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pathnode.c.html#LN2450"><span class='Ref_To_Local'>pathnode</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end create_set_projection_path &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * create_sort_path 
 *    Creates a pathnode that represents performing an explicit sort. 
 * 
 * 'rel' is the parent relation associated with the result 
 * 'subpath' is the path representing the source of data 
 * 'pathkeys' represents the desired sort order 
 * 'limit_tuples' is the estimated bound on the number of output tuples, 
 *      or -1 if no LIMIT or couldn't estimate 
 */ 
</span><a href="../../../include/nodes/relation.h.html#LN1414"><span class='Ref_to_Struct'>SortPath</span></a> <span class='Operator'>* 
</span><a name="LN2512"></a><span class='Declare_Function'>create_sort_path</span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN150"><span class='Ref_to_Struct'>PlannerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>root</span><span class='Delimiter'>, 
</span><a name="LN2513"></a>                 <a href="../../../include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rel</span><span class='Delimiter'>, 
</span><a name="LN2514"></a>                 <a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>subpath</span><span class='Delimiter'>, 
</span><a name="LN2515"></a>                 <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pathkeys</span><span class='Delimiter'>, 
</span><a name="LN2516"></a>                 <span class='Keyword'>double </span><span class='Declare_Parameter'>limit_tuples</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2518"></a>    <a href="../../../include/nodes/relation.h.html#LN1414"><span class='Ref_to_Struct'>SortPath</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>pathnode</span> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN556"><span class='Ref_to_Macro'>makeNode</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN1414"><span class='Ref_to_Struct'>SortPath</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pathnode.c.html#LN2518"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1416"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN950"><span class='Ref_to_Member'>pathtype</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN74"><span class='Ref_to_EnumConst'>T_Sort</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2518"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1416"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN952"><span class='Ref_to_Member'>parent</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2513"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* Sort doesn't project, so use source path's pathtarget */ 
</span>    <a href="pathnode.c.html#LN2518"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1416"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN953"><span class='Ref_to_Member'>pathtarget</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2514"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN953"><span class='Ref_to_Member'>pathtarget</span></a><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* For now, assume we are above any joins, so no parameterization */ 
</span>    <a href="pathnode.c.html#LN2518"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1416"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN955"><span class='Ref_to_Member'>param_info</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2518"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1416"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN957"><span class='Ref_to_Member'>parallel_aware</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2518"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1416"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2513"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN532"><span class='Ref_to_Member'>consider_parallel</span></a> <span class='Operator'>&& 
</span>        <a href="pathnode.c.html#LN2514"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2518"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1416"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN959"><span class='Ref_to_Member'>parallel_workers</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2514"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN959"><span class='Ref_to_Member'>parallel_workers</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2518"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1416"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2515"><span class='Ref_to_Parameter'>pathkeys</span></a><span class='Delimiter'>; 
</span> 
    <a href="pathnode.c.html#LN2518"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1417"><span class='Ref_to_Member'>subpath</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2514"><span class='Ref_to_Parameter'>subpath</span></a><span class='Delimiter'>; 
</span> 
    <a href="../../../include/optimizer/cost.h.html#LN103"><span class='Ref_to_Proto'>cost_sort</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pathnode.c.html#LN2518"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1416"><span class='Ref_to_Member'>path</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN2512"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN2515"><span class='Ref_to_Parameter'>pathkeys</span></a><span class='Delimiter'>, 
</span>              <a href="pathnode.c.html#LN2514"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a><span class='Delimiter'>, 
</span>              <a href="pathnode.c.html#LN2514"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a><span class='Delimiter'>, 
</span>              <a href="pathnode.c.html#LN2514"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN953"><span class='Ref_to_Member'>pathtarget</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN885"><span class='Ref_to_Member'>width</span></a><span class='Delimiter'>, 
</span>              <span class='Number'>0</span><span class='Operator'>.</span><span class='Number'>0</span><span class='Delimiter'>,</span>              <span class='Comment_Single_Line'>/* XXX comparison_cost shouldn't be 0? */ 
</span>              <a href="../../utils/init/globals.c.html#LN112"><span class='Ref_to_Global_Var'>work_mem</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN2516"><span class='Ref_to_Parameter'>limit_tuples</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pathnode.c.html#LN2518"><span class='Ref_To_Local'>pathnode</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end create_sort_path &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * create_group_path 
 *    Creates a pathnode that represents performing grouping of presorted input 
 * 
 * 'rel' is the parent relation associated with the result 
 * 'subpath' is the path representing the source of data 
 * 'target' is the PathTarget to be computed 
 * 'groupClause' is a list of SortGroupClause's representing the grouping 
 * 'qual' is the HAVING quals if any 
 * 'numGroups' is the estimated number of groups 
 */ 
</span><a href="../../../include/nodes/relation.h.html#LN1428"><span class='Ref_to_Struct'>GroupPath</span></a> <span class='Operator'>* 
</span><a name="LN2556"></a><span class='Declare_Function'>create_group_path</span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN150"><span class='Ref_to_Struct'>PlannerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>root</span><span class='Delimiter'>, 
</span><a name="LN2557"></a>                  <a href="../../../include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rel</span><span class='Delimiter'>, 
</span><a name="LN2558"></a>                  <a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>subpath</span><span class='Delimiter'>, 
</span><a name="LN2559"></a>                  <a href="../../../include/nodes/relation.h.html#LN879"><span class='Ref_to_Struct'>PathTarget</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>target</span><span class='Delimiter'>, 
</span><a name="LN2560"></a>                  <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>groupClause</span><span class='Delimiter'>, 
</span><a name="LN2561"></a>                  <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>qual</span><span class='Delimiter'>, 
</span><a name="LN2562"></a>                  <span class='Keyword'>double </span><span class='Declare_Parameter'>numGroups</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2564"></a>    <a href="../../../include/nodes/relation.h.html#LN1428"><span class='Ref_to_Struct'>GroupPath</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>pathnode</span> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN556"><span class='Ref_to_Macro'>makeNode</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN1428"><span class='Ref_to_Struct'>GroupPath</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pathnode.c.html#LN2564"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1430"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN950"><span class='Ref_to_Member'>pathtype</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN75"><span class='Ref_to_EnumConst'>T_Group</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2564"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1430"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN952"><span class='Ref_to_Member'>parent</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2557"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2564"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1430"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN953"><span class='Ref_to_Member'>pathtarget</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2559"><span class='Ref_to_Parameter'>target</span></a><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* For now, assume we are above any joins, so no parameterization */ 
</span>    <a href="pathnode.c.html#LN2564"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1430"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN955"><span class='Ref_to_Member'>param_info</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2564"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1430"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN957"><span class='Ref_to_Member'>parallel_aware</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2564"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1430"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2557"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN532"><span class='Ref_to_Member'>consider_parallel</span></a> <span class='Operator'>&& 
</span>        <a href="pathnode.c.html#LN2558"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2564"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1430"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN959"><span class='Ref_to_Member'>parallel_workers</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2558"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN959"><span class='Ref_to_Member'>parallel_workers</span></a><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* Group doesn't change sort ordering */ 
</span>    <a href="pathnode.c.html#LN2564"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1430"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2558"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a><span class='Delimiter'>; 
</span> 
    <a href="pathnode.c.html#LN2564"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1431"><span class='Ref_to_Member'>subpath</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2558"><span class='Ref_to_Parameter'>subpath</span></a><span class='Delimiter'>; 
</span> 
    <a href="pathnode.c.html#LN2564"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1432"><span class='Ref_to_Member'>groupClause</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2560"><span class='Ref_to_Parameter'>groupClause</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2564"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1433"><span class='Ref_to_Member'>qual</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2561"><span class='Ref_to_Parameter'>qual</span></a><span class='Delimiter'>; 
</span> 
    <a href="../../../include/optimizer/cost.h.html#LN123"><span class='Ref_to_Proto'>cost_group</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pathnode.c.html#LN2564"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1430"><span class='Ref_to_Member'>path</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN2556"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, 
</span>               <a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN2560"><span class='Ref_to_Parameter'>groupClause</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>               <a href="pathnode.c.html#LN2562"><span class='Ref_to_Parameter'>numGroups</span></a><span class='Delimiter'>, 
</span>               <a href="pathnode.c.html#LN2558"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN2558"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a><span class='Delimiter'>, 
</span>               <a href="pathnode.c.html#LN2558"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* add tlist eval cost for each output row */ 
</span>    <a href="pathnode.c.html#LN2564"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1430"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a> <span class='Operator'>+= </span><a href="pathnode.c.html#LN2559"><span class='Ref_to_Parameter'>target</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN884"><span class='Ref_to_Member'>cost</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN44"><span class='Ref_to_Member'>startup</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2564"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1430"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a> <span class='Operator'>+= </span><a href="pathnode.c.html#LN2559"><span class='Ref_to_Parameter'>target</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN884"><span class='Ref_to_Member'>cost</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN44"><span class='Ref_to_Member'>startup</span></a> <span class='Operator'>+ 
</span>        <a href="pathnode.c.html#LN2559"><span class='Ref_to_Parameter'>target</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN884"><span class='Ref_to_Member'>cost</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN45"><span class='Ref_to_Member'>per_tuple</span></a> <span class='Operator'>* </span><a href="pathnode.c.html#LN2564"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1430"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pathnode.c.html#LN2564"><span class='Ref_To_Local'>pathnode</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end create_group_path &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * create_upper_unique_path 
 *    Creates a pathnode that represents performing an explicit Unique step 
 *    on presorted input. 
 * 
 * This produces a Unique plan node, but the use-case is so different from 
 * create_unique_path that it doesn't seem worth trying to merge the two. 
 * 
 * 'rel' is the parent relation associated with the result 
 * 'subpath' is the path representing the source of data 
 * 'numCols' is the number of grouping columns 
 * 'numGroups' is the estimated number of groups 
 * 
 * The input path must be sorted on the grouping columns, plus possibly 
 * additional columns; so the first numCols pathkeys are the grouping columns 
 */ 
</span><a href="../../../include/nodes/relation.h.html#LN1442"><span class='Ref_to_Struct'>UpperUniquePath</span></a> <span class='Operator'>* 
</span><a name="LN2614"></a><span class='Declare_Function'>create_upper_unique_path</span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN150"><span class='Ref_to_Struct'>PlannerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>root</span><span class='Delimiter'>, 
</span><a name="LN2615"></a>                         <a href="../../../include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rel</span><span class='Delimiter'>, 
</span><a name="LN2616"></a>                         <a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>subpath</span><span class='Delimiter'>, 
</span><a name="LN2617"></a>                         <span class='Keyword'>int </span><span class='Declare_Parameter'>numCols</span><span class='Delimiter'>, 
</span><a name="LN2618"></a>                         <span class='Keyword'>double </span><span class='Declare_Parameter'>numGroups</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2620"></a>    <a href="../../../include/nodes/relation.h.html#LN1442"><span class='Ref_to_Struct'>UpperUniquePath</span></a> <span class='Operator'>*</span><span class='Declare_Local'>pathnode</span> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN556"><span class='Ref_to_Macro'>makeNode</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN1442"><span class='Ref_to_Struct'>UpperUniquePath</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pathnode.c.html#LN2620"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1444"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN950"><span class='Ref_to_Member'>pathtype</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN78"><span class='Ref_to_EnumConst'>T_Unique</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2620"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1444"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN952"><span class='Ref_to_Member'>parent</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2615"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* Unique doesn't project, so use source path's pathtarget */ 
</span>    <a href="pathnode.c.html#LN2620"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1444"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN953"><span class='Ref_to_Member'>pathtarget</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2616"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN953"><span class='Ref_to_Member'>pathtarget</span></a><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* For now, assume we are above any joins, so no parameterization */ 
</span>    <a href="pathnode.c.html#LN2620"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1444"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN955"><span class='Ref_to_Member'>param_info</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2620"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1444"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN957"><span class='Ref_to_Member'>parallel_aware</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2620"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1444"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2615"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN532"><span class='Ref_to_Member'>consider_parallel</span></a> <span class='Operator'>&& 
</span>        <a href="pathnode.c.html#LN2616"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2620"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1444"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN959"><span class='Ref_to_Member'>parallel_workers</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2616"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN959"><span class='Ref_to_Member'>parallel_workers</span></a><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* Unique doesn't change the input ordering */ 
</span>    <a href="pathnode.c.html#LN2620"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1444"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2616"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a><span class='Delimiter'>; 
</span> 
    <a href="pathnode.c.html#LN2620"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1445"><span class='Ref_to_Member'>subpath</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2616"><span class='Ref_to_Parameter'>subpath</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2620"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1446"><span class='Ref_to_Member'>numkeys</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2617"><span class='Ref_to_Parameter'>numCols</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Charge one cpu_operator_cost per comparison per input tuple. We assume 
     * all columns get compared at most of the tuples.  (XXX probably this is 
     * an overestimate.) 
     */ 
</span>    <a href="pathnode.c.html#LN2620"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1444"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2616"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2620"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1444"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2616"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a> <span class='Operator'>+ 
</span>        <a href="../path/costsize.c.html#LN107"><span class='Ref_to_Global_Var'>cpu_operator_cost</span></a> <span class='Operator'>* </span><a href="pathnode.c.html#LN2616"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a> <span class='Operator'>* </span><a href="pathnode.c.html#LN2617"><span class='Ref_to_Parameter'>numCols</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2620"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1444"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2618"><span class='Ref_to_Parameter'>numGroups</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pathnode.c.html#LN2620"><span class='Ref_To_Local'>pathnode</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end create_upper_unique_path &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * create_agg_path 
 *    Creates a pathnode that represents performing aggregation/grouping 
 * 
 * 'rel' is the parent relation associated with the result 
 * 'subpath' is the path representing the source of data 
 * 'target' is the PathTarget to be computed 
 * 'aggstrategy' is the Agg node's basic implementation strategy 
 * 'aggsplit' is the Agg node's aggregate-splitting mode 
 * 'groupClause' is a list of SortGroupClause's representing the grouping 
 * 'qual' is the HAVING quals if any 
 * 'aggcosts' contains cost info about the aggregate functions to be computed 
 * 'numGroups' is the estimated number of groups (1 if not grouping) 
 */ 
</span><a href="../../../include/nodes/relation.h.html#LN1456"><span class='Ref_to_Struct'>AggPath</span></a> <span class='Operator'>* 
</span><a name="LN2666"></a><span class='Declare_Function'>create_agg_path</span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN150"><span class='Ref_to_Struct'>PlannerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>root</span><span class='Delimiter'>, 
</span><a name="LN2667"></a>                <a href="../../../include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rel</span><span class='Delimiter'>, 
</span><a name="LN2668"></a>                <a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>subpath</span><span class='Delimiter'>, 
</span><a name="LN2669"></a>                <a href="../../../include/nodes/relation.h.html#LN879"><span class='Ref_to_Struct'>PathTarget</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>target</span><span class='Delimiter'>, 
</span><a name="LN2670"></a>                <a href="../../../include/nodes/nodes.h.html#LN733"><span class='Ref_to_Enum'>AggStrategy</span></a> <span class='Declare_Parameter'>aggstrategy</span><span class='Delimiter'>, 
</span><a name="LN2671"></a>                <a href="../../../include/nodes/nodes.h.html#LN755"><span class='Ref_to_Enum'>AggSplit</span></a> <span class='Declare_Parameter'>aggsplit</span><span class='Delimiter'>, 
</span><a name="LN2672"></a>                <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>groupClause</span><span class='Delimiter'>, 
</span><a name="LN2673"></a>                <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>qual</span><span class='Delimiter'>, 
</span><a name="LN2674"></a>                <span class='Keyword'>const </span><a href="../../../include/nodes/relation.h.html#LN55"><span class='Ref_to_Struct'>AggClauseCosts</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>aggcosts</span><span class='Delimiter'>, 
</span><a name="LN2675"></a>                <span class='Keyword'>double </span><span class='Declare_Parameter'>numGroups</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2677"></a>    <a href="../../../include/nodes/relation.h.html#LN1456"><span class='Ref_to_Struct'>AggPath</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>pathnode</span> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN556"><span class='Ref_to_Macro'>makeNode</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN1456"><span class='Ref_to_Struct'>AggPath</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pathnode.c.html#LN2677"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1458"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN950"><span class='Ref_to_Member'>pathtype</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN76"><span class='Ref_to_EnumConst'>T_Agg</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2677"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1458"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN952"><span class='Ref_to_Member'>parent</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2667"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2677"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1458"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN953"><span class='Ref_to_Member'>pathtarget</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2669"><span class='Ref_to_Parameter'>target</span></a><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* For now, assume we are above any joins, so no parameterization */ 
</span>    <a href="pathnode.c.html#LN2677"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1458"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN955"><span class='Ref_to_Member'>param_info</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2677"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1458"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN957"><span class='Ref_to_Member'>parallel_aware</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2677"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1458"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2667"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN532"><span class='Ref_to_Member'>consider_parallel</span></a> <span class='Operator'>&& 
</span>        <a href="pathnode.c.html#LN2668"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2677"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1458"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN959"><span class='Ref_to_Member'>parallel_workers</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2668"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN959"><span class='Ref_to_Member'>parallel_workers</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN2670"><span class='Ref_to_Parameter'>aggstrategy</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/nodes.h.html#LN736"><span class='Ref_to_EnumConst'>AGG_SORTED</span></a><span class='Parentheses'>) 
</span>        <a href="pathnode.c.html#LN2677"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1458"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2668"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* preserves order */ 
</span>    <span class='Control'>else</span> 
        <a href="pathnode.c.html#LN2677"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1458"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>;</span>  <span class='Comment_Single_Line'>/* output is unordered */ 
</span>    <a href="pathnode.c.html#LN2677"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1459"><span class='Ref_to_Member'>subpath</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2668"><span class='Ref_to_Parameter'>subpath</span></a><span class='Delimiter'>; 
</span> 
    <a href="pathnode.c.html#LN2677"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1460"><span class='Ref_to_Member'>aggstrategy</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2670"><span class='Ref_to_Parameter'>aggstrategy</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2677"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1461"><span class='Ref_to_Member'>aggsplit</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2671"><span class='Ref_to_Parameter'>aggsplit</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2677"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1462"><span class='Ref_to_Member'>numGroups</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2675"><span class='Ref_to_Parameter'>numGroups</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2677"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1463"><span class='Ref_to_Member'>groupClause</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2672"><span class='Ref_to_Parameter'>groupClause</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2677"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1464"><span class='Ref_to_Member'>qual</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2673"><span class='Ref_to_Parameter'>qual</span></a><span class='Delimiter'>; 
</span> 
    <a href="../../../include/optimizer/cost.h.html#LN114"><span class='Ref_to_Proto'>cost_agg</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pathnode.c.html#LN2677"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1458"><span class='Ref_to_Member'>path</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN2666"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, 
</span>             <a href="pathnode.c.html#LN2670"><span class='Ref_to_Parameter'>aggstrategy</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN2674"><span class='Ref_to_Parameter'>aggcosts</span></a><span class='Delimiter'>, 
</span>             <a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN2672"><span class='Ref_to_Parameter'>groupClause</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="pathnode.c.html#LN2675"><span class='Ref_to_Parameter'>numGroups</span></a><span class='Delimiter'>, 
</span>             <a href="pathnode.c.html#LN2668"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN2668"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a><span class='Delimiter'>, 
</span>             <a href="pathnode.c.html#LN2668"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* add tlist eval cost for each output row */ 
</span>    <a href="pathnode.c.html#LN2677"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1458"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a> <span class='Operator'>+= </span><a href="pathnode.c.html#LN2669"><span class='Ref_to_Parameter'>target</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN884"><span class='Ref_to_Member'>cost</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN44"><span class='Ref_to_Member'>startup</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2677"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1458"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a> <span class='Operator'>+= </span><a href="pathnode.c.html#LN2669"><span class='Ref_to_Parameter'>target</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN884"><span class='Ref_to_Member'>cost</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN44"><span class='Ref_to_Member'>startup</span></a> <span class='Operator'>+ 
</span>        <a href="pathnode.c.html#LN2669"><span class='Ref_to_Parameter'>target</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN884"><span class='Ref_to_Member'>cost</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN45"><span class='Ref_to_Member'>per_tuple</span></a> <span class='Operator'>* </span><a href="pathnode.c.html#LN2677"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1458"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pathnode.c.html#LN2677"><span class='Ref_To_Local'>pathnode</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end create_agg_path &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * create_groupingsets_path 
 *    Creates a pathnode that represents performing GROUPING SETS aggregation 
 * 
 * GroupingSetsPath represents sorted grouping with one or more grouping sets. 
 * The input path's result must be sorted to match the last entry in 
 * rollup_groupclauses. 
 * 
 * 'rel' is the parent relation associated with the result 
 * 'subpath' is the path representing the source of data 
 * 'target' is the PathTarget to be computed 
 * 'having_qual' is the HAVING quals if any 
 * 'rollups' is a list of RollupData nodes 
 * 'agg_costs' contains cost info about the aggregate functions to be computed 
 * 'numGroups' is the estimated total number of groups 
 */ 
</span><a href="../../../include/nodes/relation.h.html#LN1493"><span class='Ref_to_Struct'>GroupingSetsPath</span></a> <span class='Operator'>* 
</span><a name="LN2731"></a><span class='Declare_Function'>create_groupingsets_path</span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN150"><span class='Ref_to_Struct'>PlannerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>root</span><span class='Delimiter'>, 
</span><a name="LN2732"></a>                         <a href="../../../include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rel</span><span class='Delimiter'>, 
</span><a name="LN2733"></a>                         <a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>subpath</span><span class='Delimiter'>, 
</span><a name="LN2734"></a>                         <a href="../../../include/nodes/relation.h.html#LN879"><span class='Ref_to_Struct'>PathTarget</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>target</span><span class='Delimiter'>, 
</span><a name="LN2735"></a>                         <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>having_qual</span><span class='Delimiter'>, 
</span><a name="LN2736"></a>                         <a href="../../../include/nodes/nodes.h.html#LN733"><span class='Ref_to_Enum'>AggStrategy</span></a> <span class='Declare_Parameter'>aggstrategy</span><span class='Delimiter'>, 
</span><a name="LN2737"></a>                         <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rollups</span><span class='Delimiter'>, 
</span><a name="LN2738"></a>                         <span class='Keyword'>const </span><a href="../../../include/nodes/relation.h.html#LN55"><span class='Ref_to_Struct'>AggClauseCosts</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>agg_costs</span><span class='Delimiter'>, 
</span><a name="LN2739"></a>                         <span class='Keyword'>double </span><span class='Declare_Parameter'>numGroups</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2741"></a>    <a href="../../../include/nodes/relation.h.html#LN1493"><span class='Ref_to_Struct'>GroupingSetsPath</span></a> <span class='Operator'>*</span><span class='Declare_Local'>pathnode</span> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN556"><span class='Ref_to_Macro'>makeNode</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN1493"><span class='Ref_to_Struct'>GroupingSetsPath</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2742"></a>    <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc</span><span class='Delimiter'>; 
</span><a name="LN2743"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>is_first</span> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span><a name="LN2744"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>is_first_sort</span> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* The topmost generated Plan node will be an Agg */ 
</span>    <a href="pathnode.c.html#LN2741"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1495"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN950"><span class='Ref_to_Member'>pathtype</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN76"><span class='Ref_to_EnumConst'>T_Agg</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2741"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1495"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN952"><span class='Ref_to_Member'>parent</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2732"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2741"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1495"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN953"><span class='Ref_to_Member'>pathtarget</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2734"><span class='Ref_to_Parameter'>target</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2741"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1495"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN955"><span class='Ref_to_Member'>param_info</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2733"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN955"><span class='Ref_to_Member'>param_info</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2741"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1495"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN957"><span class='Ref_to_Member'>parallel_aware</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2741"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1495"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2732"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN532"><span class='Ref_to_Member'>consider_parallel</span></a> <span class='Operator'>&& 
</span>        <a href="pathnode.c.html#LN2733"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2741"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1495"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN959"><span class='Ref_to_Member'>parallel_workers</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2733"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN959"><span class='Ref_to_Member'>parallel_workers</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2741"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1496"><span class='Ref_to_Member'>subpath</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2733"><span class='Ref_to_Parameter'>subpath</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Simplify callers by downgrading AGG_SORTED to AGG_PLAIN, and AGG_MIXED 
     * to AGG_HASHED, here if possible. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN2736"><span class='Ref_to_Parameter'>aggstrategy</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/nodes.h.html#LN736"><span class='Ref_to_EnumConst'>AGG_SORTED</span></a> <span class='Operator'>&& 
</span>        <a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN2737"><span class='Ref_to_Parameter'>rollups</span></a><span class='Parentheses'>)</span> <span class='Operator'>== </span><span class='Number'>1</span> <span class='Operator'>&& 
</span>        <span class='Parentheses'>((</span><a href="../../../include/nodes/relation.h.html#LN1478"><span class='Ref_to_Struct'>RollupData</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN110"><span class='Ref_to_Macro'>linitial</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN2737"><span class='Ref_to_Parameter'>rollups</span></a><span class='Parentheses'>))</span><span class='Operator'>-&GT;</span>groupClause <span class='Operator'>== </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Parentheses'>)</span> 
        <a href="pathnode.c.html#LN2736"><span class='Ref_to_Parameter'>aggstrategy</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN735"><span class='Ref_to_EnumConst'>AGG_PLAIN</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN2736"><span class='Ref_to_Parameter'>aggstrategy</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/nodes.h.html#LN738"><span class='Ref_to_EnumConst'>AGG_MIXED</span></a> <span class='Operator'>&& 
</span>        <a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN2737"><span class='Ref_to_Parameter'>rollups</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>1</span><span class='Parentheses'>)</span> 
        <a href="pathnode.c.html#LN2736"><span class='Ref_to_Parameter'>aggstrategy</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN737"><span class='Ref_to_EnumConst'>AGG_HASHED</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Output will be in sorted order by group_pathkeys if, and only if, there 
     * is a single rollup operation on a non-empty list of grouping 
     * expressions. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN2736"><span class='Ref_to_Parameter'>aggstrategy</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/nodes.h.html#LN736"><span class='Ref_to_EnumConst'>AGG_SORTED</span></a> <span class='Operator'>&& </span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN2737"><span class='Ref_to_Parameter'>rollups</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>1</span><span class='Parentheses'>)</span> 
        <a href="pathnode.c.html#LN2741"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1495"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2731"><span class='Ref_to_Parameter'>root</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN263"><span class='Ref_to_Member'>group_pathkeys</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="pathnode.c.html#LN2741"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1495"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span> 
    <a href="pathnode.c.html#LN2741"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1497"><span class='Ref_to_Member'>aggstrategy</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2736"><span class='Ref_to_Parameter'>aggstrategy</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2741"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1498"><span class='Ref_to_Member'>rollups</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2737"><span class='Ref_to_Parameter'>rollups</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2741"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1499"><span class='Ref_to_Member'>qual</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2735"><span class='Ref_to_Parameter'>having_qual</span></a><span class='Delimiter'>; 
</span> 
    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="pathnode.c.html#LN2737"><span class='Ref_to_Parameter'>rollups</span></a> <span class='Operator'>!= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="pathnode.c.html#LN2736"><span class='Ref_to_Parameter'>aggstrategy</span></a> <span class='Operator'>!= </span><a href="../../../include/nodes/nodes.h.html#LN735"><span class='Ref_to_EnumConst'>AGG_PLAIN</span></a> <span class='Operator'>|| </span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN2737"><span class='Ref_to_Parameter'>rollups</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="pathnode.c.html#LN2736"><span class='Ref_to_Parameter'>aggstrategy</span></a> <span class='Operator'>!= </span><a href="../../../include/nodes/nodes.h.html#LN738"><span class='Ref_to_EnumConst'>AGG_MIXED</span></a> <span class='Operator'>|| </span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN2737"><span class='Ref_to_Parameter'>rollups</span></a><span class='Parentheses'>) </span><span class='Operator'>&GT; </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN2742"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN2737"><span class='Ref_to_Parameter'>rollups</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN2790"></a>        <a href="../../../include/nodes/relation.h.html#LN1478"><span class='Ref_to_Struct'>RollupData</span></a> <span class='Operator'>*</span><span class='Declare_Local'>rollup</span> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN2742"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2791"></a>        <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>gsets</span> <span class='Operator'>= </span><a href="pathnode.c.html#LN2790"><span class='Ref_To_Local'>rollup</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1482"><span class='Ref_to_Member'>gsets</span></a><span class='Delimiter'>; 
</span><a name="LN2792"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>numGroupCols</span> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN110"><span class='Ref_to_Macro'>linitial</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN2791"><span class='Ref_To_Local'>gsets</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * In AGG_SORTED or AGG_PLAIN mode, the first rollup takes the 
         * (already-sorted) input, and following ones do their own sort. 
         * 
         * In AGG_HASHED mode, there is one rollup for each grouping set. 
         * 
         * In AGG_MIXED mode, the first rollups are hashed, the first 
         * non-hashed one takes the (already-sorted) input, and following ones 
         * do their own sort. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN2743"><span class='Ref_To_Local'>is_first</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="../../../include/optimizer/cost.h.html#LN114"><span class='Ref_to_Proto'>cost_agg</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pathnode.c.html#LN2741"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1495"><span class='Ref_to_Member'>path</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN2731"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, 
</span>                     <a href="pathnode.c.html#LN2736"><span class='Ref_to_Parameter'>aggstrategy</span></a><span class='Delimiter'>, 
</span>                     <a href="pathnode.c.html#LN2738"><span class='Ref_to_Parameter'>agg_costs</span></a><span class='Delimiter'>, 
</span>                     <a href="pathnode.c.html#LN2792"><span class='Ref_To_Local'>numGroupCols</span></a><span class='Delimiter'>, 
</span>                     <a href="pathnode.c.html#LN2790"><span class='Ref_To_Local'>rollup</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1484"><span class='Ref_to_Member'>numGroups</span></a><span class='Delimiter'>, 
</span>                     <a href="pathnode.c.html#LN2733"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a><span class='Delimiter'>, 
</span>                     <a href="pathnode.c.html#LN2733"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a><span class='Delimiter'>, 
</span>                     <a href="pathnode.c.html#LN2733"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="pathnode.c.html#LN2743"><span class='Ref_To_Local'>is_first</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pathnode.c.html#LN2790"><span class='Ref_To_Local'>rollup</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1486"><span class='Ref_to_Member'>is_hashed</span></a><span class='Parentheses'>) 
</span>                <a href="pathnode.c.html#LN2744"><span class='Ref_To_Local'>is_first_sort</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span><a name="LN2820"></a>            <a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a>        <span class='Declare_Local'>sort_path</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* dummy for result of cost_sort */ 
</span><a name="LN2821"></a>            <a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a>        <span class='Declare_Local'>agg_path</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* dummy for result of cost_agg */ 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN2790"><span class='Ref_To_Local'>rollup</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1486"><span class='Ref_to_Member'>is_hashed</span></a> <span class='Operator'>|| </span><a href="pathnode.c.html#LN2744"><span class='Ref_To_Local'>is_first_sort</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* 
                 * Account for cost of aggregation, but don't charge input 
                 * cost again 
                 */ 
</span>                <a href="../../../include/optimizer/cost.h.html#LN114"><span class='Ref_to_Proto'>cost_agg</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pathnode.c.html#LN2821"><span class='Ref_To_Local'>agg_path</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN2731"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, 
</span>                         <a href="pathnode.c.html#LN2790"><span class='Ref_To_Local'>rollup</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1486"><span class='Ref_to_Member'>is_hashed</span></a> <span class='Operator'>? </span><a href="../../../include/nodes/nodes.h.html#LN737"><span class='Ref_to_EnumConst'>AGG_HASHED</span></a> <span class='Operator'>: </span><a href="../../../include/nodes/nodes.h.html#LN736"><span class='Ref_to_EnumConst'>AGG_SORTED</span></a><span class='Delimiter'>, 
</span>                         <a href="pathnode.c.html#LN2738"><span class='Ref_to_Parameter'>agg_costs</span></a><span class='Delimiter'>, 
</span>                         <a href="pathnode.c.html#LN2792"><span class='Ref_To_Local'>numGroupCols</span></a><span class='Delimiter'>, 
</span>                         <a href="pathnode.c.html#LN2790"><span class='Ref_To_Local'>rollup</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1484"><span class='Ref_to_Member'>numGroups</span></a><span class='Delimiter'>, 
</span>                         <span class='Number'>0</span><span class='Operator'>.</span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Operator'>.</span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                         <a href="pathnode.c.html#LN2733"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pathnode.c.html#LN2790"><span class='Ref_To_Local'>rollup</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1486"><span class='Ref_to_Member'>is_hashed</span></a><span class='Parentheses'>) 
</span>                    <a href="pathnode.c.html#LN2744"><span class='Ref_To_Local'>is_first_sort</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* Account for cost of sort, but don't charge input cost again */ 
</span>                <a href="../../../include/optimizer/cost.h.html#LN103"><span class='Ref_to_Proto'>cost_sort</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pathnode.c.html#LN2820"><span class='Ref_To_Local'>sort_path</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN2731"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>, 
</span>                          <span class='Number'>0</span><span class='Operator'>.</span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                          <a href="pathnode.c.html#LN2733"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a><span class='Delimiter'>, 
</span>                          <a href="pathnode.c.html#LN2733"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN953"><span class='Ref_to_Member'>pathtarget</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN885"><span class='Ref_to_Member'>width</span></a><span class='Delimiter'>, 
</span>                          <span class='Number'>0</span><span class='Operator'>.</span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                          <a href="../../utils/init/globals.c.html#LN112"><span class='Ref_to_Global_Var'>work_mem</span></a><span class='Delimiter'>, 
</span>                          <span class='Operator'>-</span><span class='Number'>1</span><span class='Operator'>.</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* Account for cost of aggregation */ 
</span> 
                <a href="../../../include/optimizer/cost.h.html#LN114"><span class='Ref_to_Proto'>cost_agg</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pathnode.c.html#LN2821"><span class='Ref_To_Local'>agg_path</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN2731"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, 
</span>                         <a href="../../../include/nodes/nodes.h.html#LN736"><span class='Ref_to_EnumConst'>AGG_SORTED</span></a><span class='Delimiter'>, 
</span>                         <a href="pathnode.c.html#LN2738"><span class='Ref_to_Parameter'>agg_costs</span></a><span class='Delimiter'>, 
</span>                         <a href="pathnode.c.html#LN2792"><span class='Ref_To_Local'>numGroupCols</span></a><span class='Delimiter'>, 
</span>                         <a href="pathnode.c.html#LN2790"><span class='Ref_To_Local'>rollup</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1484"><span class='Ref_to_Member'>numGroups</span></a><span class='Delimiter'>, 
</span>                         <a href="pathnode.c.html#LN2820"><span class='Ref_To_Local'>sort_path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a><span class='Delimiter'>, 
</span>                         <a href="pathnode.c.html#LN2820"><span class='Ref_To_Local'>sort_path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a><span class='Delimiter'>, 
</span>                         <a href="pathnode.c.html#LN2820"><span class='Ref_To_Local'>sort_path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
 
            <a href="pathnode.c.html#LN2741"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1495"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a> <span class='Operator'>+= </span><a href="pathnode.c.html#LN2821"><span class='Ref_To_Local'>agg_path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a><span class='Delimiter'>; 
</span>            <a href="pathnode.c.html#LN2741"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1495"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a> <span class='Operator'>+= </span><a href="pathnode.c.html#LN2821"><span class='Ref_To_Local'>agg_path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* add tlist eval cost for each output row */ 
</span>    <a href="pathnode.c.html#LN2741"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1495"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a> <span class='Operator'>+= </span><a href="pathnode.c.html#LN2734"><span class='Ref_to_Parameter'>target</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN884"><span class='Ref_to_Member'>cost</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN44"><span class='Ref_to_Member'>startup</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2741"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1495"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a> <span class='Operator'>+= </span><a href="pathnode.c.html#LN2734"><span class='Ref_to_Parameter'>target</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN884"><span class='Ref_to_Member'>cost</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN44"><span class='Ref_to_Member'>startup</span></a> <span class='Operator'>+ 
</span>        <a href="pathnode.c.html#LN2734"><span class='Ref_to_Parameter'>target</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN884"><span class='Ref_to_Member'>cost</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN45"><span class='Ref_to_Member'>per_tuple</span></a> <span class='Operator'>* </span><a href="pathnode.c.html#LN2741"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1495"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pathnode.c.html#LN2741"><span class='Ref_To_Local'>pathnode</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end create_groupingsets_path &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * create_minmaxagg_path 
 *    Creates a pathnode that represents computation of MIN/MAX aggregates 
 * 
 * 'rel' is the parent relation associated with the result 
 * 'target' is the PathTarget to be computed 
 * 'mmaggregates' is a list of MinMaxAggInfo structs 
 * 'quals' is the HAVING quals if any 
 */ 
</span><a href="../../../include/nodes/relation.h.html#LN1505"><span class='Ref_to_Struct'>MinMaxAggPath</span></a> <span class='Operator'>* 
</span><a name="LN2885"></a><span class='Declare_Function'>create_minmaxagg_path</span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN150"><span class='Ref_to_Struct'>PlannerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>root</span><span class='Delimiter'>, 
</span><a name="LN2886"></a>                      <a href="../../../include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rel</span><span class='Delimiter'>, 
</span><a name="LN2887"></a>                      <a href="../../../include/nodes/relation.h.html#LN879"><span class='Ref_to_Struct'>PathTarget</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>target</span><span class='Delimiter'>, 
</span><a name="LN2888"></a>                      <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>mmaggregates</span><span class='Delimiter'>, 
</span><a name="LN2889"></a>                      <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>quals</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2891"></a>    <a href="../../../include/nodes/relation.h.html#LN1505"><span class='Ref_to_Struct'>MinMaxAggPath</span></a> <span class='Operator'>*</span><span class='Declare_Local'>pathnode</span> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN556"><span class='Ref_to_Macro'>makeNode</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN1505"><span class='Ref_to_Struct'>MinMaxAggPath</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2892"></a>    <a href="../../../include/nodes/nodes.h.html#LN638"><span class='Ref_to_Typedef'>Cost</span></a>        <span class='Declare_Local'>initplan_cost</span><span class='Delimiter'>; 
</span><a name="LN2893"></a>    <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* The topmost generated Plan node will be a Result */ 
</span>    <a href="pathnode.c.html#LN2891"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1507"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN950"><span class='Ref_to_Member'>pathtype</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN44"><span class='Ref_to_EnumConst'>T_Result</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2891"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1507"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN952"><span class='Ref_to_Member'>parent</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2886"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2891"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1507"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN953"><span class='Ref_to_Member'>pathtarget</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2887"><span class='Ref_to_Parameter'>target</span></a><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* For now, assume we are above any joins, so no parameterization */ 
</span>    <a href="pathnode.c.html#LN2891"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1507"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN955"><span class='Ref_to_Member'>param_info</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2891"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1507"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN957"><span class='Ref_to_Member'>parallel_aware</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* A MinMaxAggPath implies use of subplans, so cannot be parallel-safe */ 
</span>    <a href="pathnode.c.html#LN2891"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1507"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2891"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1507"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN959"><span class='Ref_to_Member'>parallel_workers</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* Result is one unordered row */ 
</span>    <a href="pathnode.c.html#LN2891"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1507"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2891"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1507"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span> 
    <a href="pathnode.c.html#LN2891"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1508"><span class='Ref_to_Member'>mmaggregates</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2888"><span class='Ref_to_Parameter'>mmaggregates</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2891"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1509"><span class='Ref_to_Member'>quals</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2889"><span class='Ref_to_Parameter'>quals</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Calculate cost of all the initplans ... */ 
</span>    <a href="pathnode.c.html#LN2892"><span class='Ref_To_Local'>initplan_cost</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN2893"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN2888"><span class='Ref_to_Parameter'>mmaggregates</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN2916"></a>        <a href="../../../include/nodes/relation.h.html#LN2074"><span class='Ref_to_Struct'>MinMaxAggInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>mminfo</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN2074"><span class='Ref_to_Struct'>MinMaxAggInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN2893"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="pathnode.c.html#LN2892"><span class='Ref_To_Local'>initplan_cost</span></a> <span class='Operator'>+= </span><a href="pathnode.c.html#LN2916"><span class='Ref_To_Local'>mminfo</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN2083"><span class='Ref_to_Member'>pathcost</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* add tlist eval cost for each output row, plus cpu_tuple_cost */ 
</span>    <a href="pathnode.c.html#LN2891"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1507"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2892"><span class='Ref_To_Local'>initplan_cost</span></a> <span class='Operator'>+ </span><a href="pathnode.c.html#LN2887"><span class='Ref_to_Parameter'>target</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN884"><span class='Ref_to_Member'>cost</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN44"><span class='Ref_to_Member'>startup</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2891"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1507"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2892"><span class='Ref_To_Local'>initplan_cost</span></a> <span class='Operator'>+ </span><a href="pathnode.c.html#LN2887"><span class='Ref_to_Parameter'>target</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN884"><span class='Ref_to_Member'>cost</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN44"><span class='Ref_to_Member'>startup</span></a> <span class='Operator'>+ 
</span>        <a href="pathnode.c.html#LN2887"><span class='Ref_to_Parameter'>target</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN884"><span class='Ref_to_Member'>cost</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN45"><span class='Ref_to_Member'>per_tuple</span></a> <span class='Operator'>+ </span><a href="../path/costsize.c.html#LN105"><span class='Ref_to_Global_Var'>cpu_tuple_cost</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pathnode.c.html#LN2891"><span class='Ref_To_Local'>pathnode</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end create_minmaxagg_path &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * create_windowagg_path 
 *    Creates a pathnode that represents computation of window functions 
 * 
 * 'rel' is the parent relation associated with the result 
 * 'subpath' is the path representing the source of data 
 * 'target' is the PathTarget to be computed 
 * 'windowFuncs' is a list of WindowFunc structs 
 * 'winclause' is a WindowClause that is common to all the WindowFuncs 
 * 'winpathkeys' is the pathkeys for the PARTITION keys + ORDER keys 
 * 
 * The actual sort order of the input must match winpathkeys, but might 
 * have additional keys after those. 
 */ 
</span><a href="../../../include/nodes/relation.h.html#LN1519"><span class='Ref_to_Struct'>WindowAggPath</span></a> <span class='Operator'>* 
</span><a name="LN2944"></a><span class='Declare_Function'>create_windowagg_path</span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN150"><span class='Ref_to_Struct'>PlannerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>root</span><span class='Delimiter'>, 
</span><a name="LN2945"></a>                      <a href="../../../include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rel</span><span class='Delimiter'>, 
</span><a name="LN2946"></a>                      <a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>subpath</span><span class='Delimiter'>, 
</span><a name="LN2947"></a>                      <a href="../../../include/nodes/relation.h.html#LN879"><span class='Ref_to_Struct'>PathTarget</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>target</span><span class='Delimiter'>, 
</span><a name="LN2948"></a>                      <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>windowFuncs</span><span class='Delimiter'>, 
</span><a name="LN2949"></a>                      <a href="../../../include/nodes/parsenodes.h.html#LN1252"><span class='Ref_to_Struct'>WindowClause</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>winclause</span><span class='Delimiter'>, 
</span><a name="LN2950"></a>                      <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>winpathkeys</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2952"></a>    <a href="../../../include/nodes/relation.h.html#LN1519"><span class='Ref_to_Struct'>WindowAggPath</span></a> <span class='Operator'>*</span><span class='Declare_Local'>pathnode</span> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN556"><span class='Ref_to_Macro'>makeNode</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN1519"><span class='Ref_to_Struct'>WindowAggPath</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pathnode.c.html#LN2952"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1521"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN950"><span class='Ref_to_Member'>pathtype</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN77"><span class='Ref_to_EnumConst'>T_WindowAgg</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2952"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1521"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN952"><span class='Ref_to_Member'>parent</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2945"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2952"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1521"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN953"><span class='Ref_to_Member'>pathtarget</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2947"><span class='Ref_to_Parameter'>target</span></a><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* For now, assume we are above any joins, so no parameterization */ 
</span>    <a href="pathnode.c.html#LN2952"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1521"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN955"><span class='Ref_to_Member'>param_info</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2952"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1521"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN957"><span class='Ref_to_Member'>parallel_aware</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2952"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1521"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2945"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN532"><span class='Ref_to_Member'>consider_parallel</span></a> <span class='Operator'>&& 
</span>        <a href="pathnode.c.html#LN2946"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2952"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1521"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN959"><span class='Ref_to_Member'>parallel_workers</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2946"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN959"><span class='Ref_to_Member'>parallel_workers</span></a><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* WindowAgg preserves the input sort order */ 
</span>    <a href="pathnode.c.html#LN2952"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1521"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2946"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a><span class='Delimiter'>; 
</span> 
    <a href="pathnode.c.html#LN2952"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1522"><span class='Ref_to_Member'>subpath</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2946"><span class='Ref_to_Parameter'>subpath</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2952"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1523"><span class='Ref_to_Member'>winclause</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2949"><span class='Ref_to_Parameter'>winclause</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2952"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1524"><span class='Ref_to_Member'>winpathkeys</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN2950"><span class='Ref_to_Parameter'>winpathkeys</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * For costing purposes, assume that there are no redundant partitioning 
     * or ordering columns; it's not worth the trouble to deal with that 
     * corner case here.  So we just pass the unmodified list lengths to 
     * cost_windowagg. 
     */ 
</span>    <a href="../../../include/optimizer/cost.h.html#LN119"><span class='Ref_to_Proto'>cost_windowagg</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pathnode.c.html#LN2952"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1521"><span class='Ref_to_Member'>path</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN2944"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, 
</span>                   <a href="pathnode.c.html#LN2948"><span class='Ref_to_Parameter'>windowFuncs</span></a><span class='Delimiter'>, 
</span>                   <a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN2949"><span class='Ref_to_Parameter'>winclause</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1257"><span class='Ref_to_Member'>partitionClause</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                   <a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN2949"><span class='Ref_to_Parameter'>winclause</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1258"><span class='Ref_to_Member'>orderClause</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                   <a href="pathnode.c.html#LN2946"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a><span class='Delimiter'>, 
</span>                   <a href="pathnode.c.html#LN2946"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a><span class='Delimiter'>, 
</span>                   <a href="pathnode.c.html#LN2946"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* add tlist eval cost for each output row */ 
</span>    <a href="pathnode.c.html#LN2952"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1521"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a> <span class='Operator'>+= </span><a href="pathnode.c.html#LN2947"><span class='Ref_to_Parameter'>target</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN884"><span class='Ref_to_Member'>cost</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN44"><span class='Ref_to_Member'>startup</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN2952"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1521"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a> <span class='Operator'>+= </span><a href="pathnode.c.html#LN2947"><span class='Ref_to_Parameter'>target</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN884"><span class='Ref_to_Member'>cost</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN44"><span class='Ref_to_Member'>startup</span></a> <span class='Operator'>+ 
</span>        <a href="pathnode.c.html#LN2947"><span class='Ref_to_Parameter'>target</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN884"><span class='Ref_to_Member'>cost</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN45"><span class='Ref_to_Member'>per_tuple</span></a> <span class='Operator'>* </span><a href="pathnode.c.html#LN2952"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1521"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pathnode.c.html#LN2952"><span class='Ref_To_Local'>pathnode</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end create_windowagg_path &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * create_setop_path 
 *    Creates a pathnode that represents computation of INTERSECT or EXCEPT 
 * 
 * 'rel' is the parent relation associated with the result 
 * 'subpath' is the path representing the source of data 
 * 'cmd' is the specific semantics (INTERSECT or EXCEPT, with/without ALL) 
 * 'strategy' is the implementation strategy (sorted or hashed) 
 * 'distinctList' is a list of SortGroupClause's representing the grouping 
 * 'flagColIdx' is the column number where the flag column will be, if any 
 * 'firstFlag' is the flag value for the first input relation when hashing; 
 *      or -1 when sorting 
 * 'numGroups' is the estimated number of distinct groups 
 * 'outputRows' is the estimated number of output rows 
 */ 
</span><a href="../../../include/nodes/relation.h.html#LN1530"><span class='Ref_to_Struct'>SetOpPath</span></a> <span class='Operator'>* 
</span><a name="LN3008"></a><span class='Declare_Function'>create_setop_path</span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN150"><span class='Ref_to_Struct'>PlannerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>root</span><span class='Delimiter'>, 
</span><a name="LN3009"></a>                  <a href="../../../include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rel</span><span class='Delimiter'>, 
</span><a name="LN3010"></a>                  <a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>subpath</span><span class='Delimiter'>, 
</span><a name="LN3011"></a>                  <a href="../../../include/nodes/nodes.h.html#LN777"><span class='Ref_to_Enum'>SetOpCmd</span></a> <span class='Declare_Parameter'>cmd</span><span class='Delimiter'>, 
</span><a name="LN3012"></a>                  <a href="../../../include/nodes/nodes.h.html#LN785"><span class='Ref_to_Enum'>SetOpStrategy</span></a> <span class='Declare_Parameter'>strategy</span><span class='Delimiter'>, 
</span><a name="LN3013"></a>                  <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>distinctList</span><span class='Delimiter'>, 
</span><a name="LN3014"></a>                  <a href="../../../include/access/attnum.h.html#LN20"><span class='Ref_to_Typedef'>AttrNumber</span></a> <span class='Declare_Parameter'>flagColIdx</span><span class='Delimiter'>, 
</span><a name="LN3015"></a>                  <span class='Keyword'>int </span><span class='Declare_Parameter'>firstFlag</span><span class='Delimiter'>, 
</span><a name="LN3016"></a>                  <span class='Keyword'>double </span><span class='Declare_Parameter'>numGroups</span><span class='Delimiter'>, 
</span><a name="LN3017"></a>                  <span class='Keyword'>double </span><span class='Declare_Parameter'>outputRows</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3019"></a>    <a href="../../../include/nodes/relation.h.html#LN1530"><span class='Ref_to_Struct'>SetOpPath</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>pathnode</span> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN556"><span class='Ref_to_Macro'>makeNode</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN1530"><span class='Ref_to_Struct'>SetOpPath</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pathnode.c.html#LN3019"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1532"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN950"><span class='Ref_to_Member'>pathtype</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN82"><span class='Ref_to_EnumConst'>T_SetOp</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN3019"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1532"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN952"><span class='Ref_to_Member'>parent</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN3009"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* SetOp doesn't project, so use source path's pathtarget */ 
</span>    <a href="pathnode.c.html#LN3019"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1532"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN953"><span class='Ref_to_Member'>pathtarget</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN3010"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN953"><span class='Ref_to_Member'>pathtarget</span></a><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* For now, assume we are above any joins, so no parameterization */ 
</span>    <a href="pathnode.c.html#LN3019"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1532"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN955"><span class='Ref_to_Member'>param_info</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN3019"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1532"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN957"><span class='Ref_to_Member'>parallel_aware</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN3019"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1532"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN3009"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN532"><span class='Ref_to_Member'>consider_parallel</span></a> <span class='Operator'>&& 
</span>        <a href="pathnode.c.html#LN3010"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN3019"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1532"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN959"><span class='Ref_to_Member'>parallel_workers</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN3010"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN959"><span class='Ref_to_Member'>parallel_workers</span></a><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* SetOp preserves the input sort order if in sort mode */ 
</span>    <a href="pathnode.c.html#LN3019"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1532"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a> <span class='Operator'>= 
</span>        <span class='Parentheses'>(</span><a href="pathnode.c.html#LN3012"><span class='Ref_to_Parameter'>strategy</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/nodes.h.html#LN787"><span class='Ref_to_EnumConst'>SETOP_SORTED</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><a href="pathnode.c.html#LN3010"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a> <span class='Operator'>: </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span> 
    <a href="pathnode.c.html#LN3019"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1533"><span class='Ref_to_Member'>subpath</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN3010"><span class='Ref_to_Parameter'>subpath</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN3019"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1534"><span class='Ref_to_Member'>cmd</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN3011"><span class='Ref_to_Parameter'>cmd</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN3019"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1535"><span class='Ref_to_Member'>strategy</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN3012"><span class='Ref_to_Parameter'>strategy</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN3019"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1536"><span class='Ref_to_Member'>distinctList</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN3013"><span class='Ref_to_Parameter'>distinctList</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN3019"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1537"><span class='Ref_to_Member'>flagColIdx</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN3014"><span class='Ref_to_Parameter'>flagColIdx</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN3019"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1538"><span class='Ref_to_Member'>firstFlag</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN3015"><span class='Ref_to_Parameter'>firstFlag</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN3019"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1539"><span class='Ref_to_Member'>numGroups</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN3016"><span class='Ref_to_Parameter'>numGroups</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Charge one cpu_operator_cost per comparison per input tuple. We assume 
     * all columns get compared at most of the tuples. 
     */ 
</span>    <a href="pathnode.c.html#LN3019"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1532"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN3010"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN3019"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1532"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN3010"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a> <span class='Operator'>+ 
</span>        <a href="../path/costsize.c.html#LN107"><span class='Ref_to_Global_Var'>cpu_operator_cost</span></a> <span class='Operator'>* </span><a href="pathnode.c.html#LN3010"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a> <span class='Operator'>* </span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN3013"><span class='Ref_to_Parameter'>distinctList</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN3019"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1532"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN3017"><span class='Ref_to_Parameter'>outputRows</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pathnode.c.html#LN3019"><span class='Ref_To_Local'>pathnode</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end create_setop_path &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * create_recursiveunion_path 
 *    Creates a pathnode that represents a recursive UNION node 
 * 
 * 'rel' is the parent relation associated with the result 
 * 'leftpath' is the source of data for the non-recursive term 
 * 'rightpath' is the source of data for the recursive term 
 * 'target' is the PathTarget to be computed 
 * 'distinctList' is a list of SortGroupClause's representing the grouping 
 * 'wtParam' is the ID of Param representing work table 
 * 'numGroups' is the estimated number of groups 
 * 
 * For recursive UNION ALL, distinctList is empty and numGroups is zero 
 */ 
</span><a href="../../../include/nodes/relation.h.html#LN1545"><span class='Ref_to_Struct'>RecursiveUnionPath</span></a> <span class='Operator'>* 
</span><a name="LN3070"></a><span class='Declare_Function'>create_recursiveunion_path</span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN150"><span class='Ref_to_Struct'>PlannerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>root</span><span class='Delimiter'>, 
</span><a name="LN3071"></a>                           <a href="../../../include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rel</span><span class='Delimiter'>, 
</span><a name="LN3072"></a>                           <a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>leftpath</span><span class='Delimiter'>, 
</span><a name="LN3073"></a>                           <a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rightpath</span><span class='Delimiter'>, 
</span><a name="LN3074"></a>                           <a href="../../../include/nodes/relation.h.html#LN879"><span class='Ref_to_Struct'>PathTarget</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>target</span><span class='Delimiter'>, 
</span><a name="LN3075"></a>                           <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>distinctList</span><span class='Delimiter'>, 
</span><a name="LN3076"></a>                           <span class='Keyword'>int </span><span class='Declare_Parameter'>wtParam</span><span class='Delimiter'>, 
</span><a name="LN3077"></a>                           <span class='Keyword'>double </span><span class='Declare_Parameter'>numGroups</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3079"></a>    <a href="../../../include/nodes/relation.h.html#LN1545"><span class='Ref_to_Struct'>RecursiveUnionPath</span></a> <span class='Operator'>*</span><span class='Declare_Local'>pathnode</span> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN556"><span class='Ref_to_Macro'>makeNode</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN1545"><span class='Ref_to_Struct'>RecursiveUnionPath</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pathnode.c.html#LN3079"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1547"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN950"><span class='Ref_to_Member'>pathtype</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN49"><span class='Ref_to_EnumConst'>T_RecursiveUnion</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN3079"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1547"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN952"><span class='Ref_to_Member'>parent</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN3071"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN3079"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1547"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN953"><span class='Ref_to_Member'>pathtarget</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN3074"><span class='Ref_to_Parameter'>target</span></a><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* For now, assume we are above any joins, so no parameterization */ 
</span>    <a href="pathnode.c.html#LN3079"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1547"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN955"><span class='Ref_to_Member'>param_info</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN3079"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1547"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN957"><span class='Ref_to_Member'>parallel_aware</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN3079"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1547"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN3071"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN532"><span class='Ref_to_Member'>consider_parallel</span></a> <span class='Operator'>&& 
</span>        <a href="pathnode.c.html#LN3072"><span class='Ref_to_Parameter'>leftpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a> <span class='Operator'>&& </span><a href="pathnode.c.html#LN3073"><span class='Ref_to_Parameter'>rightpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* Foolish, but we'll do it like joins for now: */ 
</span>    <a href="pathnode.c.html#LN3079"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1547"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN959"><span class='Ref_to_Member'>parallel_workers</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN3072"><span class='Ref_to_Parameter'>leftpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN959"><span class='Ref_to_Member'>parallel_workers</span></a><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* RecursiveUnion result is always unsorted */ 
</span>    <a href="pathnode.c.html#LN3079"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1547"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span> 
    <a href="pathnode.c.html#LN3079"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1548"><span class='Ref_to_Member'>leftpath</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN3072"><span class='Ref_to_Parameter'>leftpath</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN3079"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1549"><span class='Ref_to_Member'>rightpath</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN3073"><span class='Ref_to_Parameter'>rightpath</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN3079"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1550"><span class='Ref_to_Member'>distinctList</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN3075"><span class='Ref_to_Parameter'>distinctList</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN3079"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1551"><span class='Ref_to_Member'>wtParam</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN3076"><span class='Ref_to_Parameter'>wtParam</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN3079"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1552"><span class='Ref_to_Member'>numGroups</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN3077"><span class='Ref_to_Parameter'>numGroups</span></a><span class='Delimiter'>; 
</span> 
    <a href="../../../include/optimizer/cost.h.html#LN102"><span class='Ref_to_Proto'>cost_recursive_union</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pathnode.c.html#LN3079"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1547"><span class='Ref_to_Member'>path</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN3072"><span class='Ref_to_Parameter'>leftpath</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN3073"><span class='Ref_to_Parameter'>rightpath</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pathnode.c.html#LN3079"><span class='Ref_To_Local'>pathnode</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end create_recursiveunion_path &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * create_lockrows_path 
 *    Creates a pathnode that represents acquiring row locks 
 * 
 * 'rel' is the parent relation associated with the result 
 * 'subpath' is the path representing the source of data 
 * 'rowMarks' is a list of PlanRowMark's 
 * 'epqParam' is the ID of Param for EvalPlanQual re-eval 
 */ 
</span><a href="../../../include/nodes/relation.h.html#LN1558"><span class='Ref_to_Struct'>LockRowsPath</span></a> <span class='Operator'>* 
</span><a name="LN3115"></a><span class='Declare_Function'>create_lockrows_path</span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN150"><span class='Ref_to_Struct'>PlannerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>root</span><span class='Delimiter'>, </span><a href="../../../include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rel</span><span class='Delimiter'>, 
</span><a name="LN3116"></a>                     <a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>subpath</span><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rowMarks</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>epqParam</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3118"></a>    <a href="../../../include/nodes/relation.h.html#LN1558"><span class='Ref_to_Struct'>LockRowsPath</span></a> <span class='Operator'>*</span><span class='Declare_Local'>pathnode</span> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN556"><span class='Ref_to_Macro'>makeNode</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN1558"><span class='Ref_to_Struct'>LockRowsPath</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pathnode.c.html#LN3118"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1560"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN950"><span class='Ref_to_Member'>pathtype</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN83"><span class='Ref_to_EnumConst'>T_LockRows</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN3118"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1560"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN952"><span class='Ref_to_Member'>parent</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN3115"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* LockRows doesn't project, so use source path's pathtarget */ 
</span>    <a href="pathnode.c.html#LN3118"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1560"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN953"><span class='Ref_to_Member'>pathtarget</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN3116"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN953"><span class='Ref_to_Member'>pathtarget</span></a><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* For now, assume we are above any joins, so no parameterization */ 
</span>    <a href="pathnode.c.html#LN3118"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1560"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN955"><span class='Ref_to_Member'>param_info</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN3118"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1560"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN957"><span class='Ref_to_Member'>parallel_aware</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN3118"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1560"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN3118"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1560"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN959"><span class='Ref_to_Member'>parallel_workers</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN3118"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1560"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN3116"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * The result cannot be assumed sorted, since locking might cause the sort 
     * key columns to be replaced with new values. 
     */ 
</span>    <a href="pathnode.c.html#LN3118"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1560"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span> 
    <a href="pathnode.c.html#LN3118"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1561"><span class='Ref_to_Member'>subpath</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN3116"><span class='Ref_to_Parameter'>subpath</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN3118"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1562"><span class='Ref_to_Member'>rowMarks</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN3116"><span class='Ref_to_Parameter'>rowMarks</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN3118"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1563"><span class='Ref_to_Member'>epqParam</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN3116"><span class='Ref_to_Parameter'>epqParam</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * We should charge something extra for the costs of row locking and 
     * possible refetches, but it's hard to say how much.  For now, use 
     * cpu_tuple_cost per row. 
     */ 
</span>    <a href="pathnode.c.html#LN3118"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1560"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN3116"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN3118"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1560"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN3116"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a> <span class='Operator'>+ 
</span>        <a href="../path/costsize.c.html#LN105"><span class='Ref_to_Global_Var'>cpu_tuple_cost</span></a> <span class='Operator'>* </span><a href="pathnode.c.html#LN3116"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pathnode.c.html#LN3118"><span class='Ref_To_Local'>pathnode</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end create_lockrows_path &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * create_modifytable_path 
 *    Creates a pathnode that represents performing INSERT/UPDATE/DELETE mods 
 * 
 * 'rel' is the parent relation associated with the result 
 * 'operation' is the operation type 
 * 'canSetTag' is true if we set the command tag/es_processed 
 * 'nominalRelation' is the parent RT index for use of EXPLAIN 
 * 'resultRelations' is an integer list of actual RT indexes of target rel(s) 
 * 'subpaths' is a list of Path(s) producing source data (one per rel) 
 * 'subroots' is a list of PlannerInfo structs (one per rel) 
 * 'withCheckOptionLists' is a list of WCO lists (one per rel) 
 * 'returningLists' is a list of RETURNING tlists (one per rel) 
 * 'rowMarks' is a list of PlanRowMarks (non-locking only) 
 * 'onconflict' is the ON CONFLICT clause, or NULL 
 * 'epqParam' is the ID of Param for EvalPlanQual re-eval 
 */ 
</span><a href="../../../include/nodes/relation.h.html#LN1573"><span class='Ref_to_Struct'>ModifyTablePath</span></a> <span class='Operator'>* 
</span><a name="LN3171"></a><span class='Declare_Function'>create_modifytable_path</span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN150"><span class='Ref_to_Struct'>PlannerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>root</span><span class='Delimiter'>, </span><a href="../../../include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rel</span><span class='Delimiter'>, 
</span><a name="LN3172"></a>                        <a href="../../../include/nodes/nodes.h.html#LN647"><span class='Ref_to_Enum'>CmdType</span></a> <span class='Declare_Parameter'>operation</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>canSetTag</span><span class='Delimiter'>, 
</span><a name="LN3173"></a>                        <a href="../../../include/c.h.html#LN364"><span class='Ref_to_Typedef'>Index</span></a> <span class='Declare_Parameter'>nominalRelation</span><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>partitioned_rels</span><span class='Delimiter'>, 
</span><a name="LN3174"></a>                        <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>resultRelations</span><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>subpaths</span><span class='Delimiter'>, 
</span><a name="LN3175"></a>                        <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>subroots</span><span class='Delimiter'>, 
</span><a name="LN3176"></a>                        <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>withCheckOptionLists</span><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>returningLists</span><span class='Delimiter'>, 
</span><a name="LN3177"></a>                        <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rowMarks</span><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN1482"><span class='Ref_to_Struct'>OnConflictExpr</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>onconflict</span><span class='Delimiter'>, 
</span><a name="LN3178"></a>                        <span class='Keyword'>int </span><span class='Declare_Parameter'>epqParam</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3180"></a>    <a href="../../../include/nodes/relation.h.html#LN1573"><span class='Ref_to_Struct'>ModifyTablePath</span></a> <span class='Operator'>*</span><span class='Declare_Local'>pathnode</span> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN556"><span class='Ref_to_Macro'>makeNode</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN1573"><span class='Ref_to_Struct'>ModifyTablePath</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3181"></a>    <span class='Keyword'>double</span>      <span class='Declare_Local'>total_size</span><span class='Delimiter'>; 
</span><a name="LN3182"></a>    <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc</span><span class='Delimiter'>; 
</span> 
    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN3174"><span class='Ref_to_Parameter'>resultRelations</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN3174"><span class='Ref_to_Parameter'>subpaths</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN3174"><span class='Ref_to_Parameter'>resultRelations</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN3175"><span class='Ref_to_Parameter'>subroots</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="pathnode.c.html#LN3176"><span class='Ref_to_Parameter'>withCheckOptionLists</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a> <span class='Operator'>|| 
</span>           <a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN3174"><span class='Ref_to_Parameter'>resultRelations</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN3176"><span class='Ref_to_Parameter'>withCheckOptionLists</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="pathnode.c.html#LN3176"><span class='Ref_to_Parameter'>returningLists</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a> <span class='Operator'>|| 
</span>           <a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN3174"><span class='Ref_to_Parameter'>resultRelations</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN3176"><span class='Ref_to_Parameter'>returningLists</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="pathnode.c.html#LN3180"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1575"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN950"><span class='Ref_to_Member'>pathtype</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN46"><span class='Ref_to_EnumConst'>T_ModifyTable</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN3180"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1575"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN952"><span class='Ref_to_Member'>parent</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN3171"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* pathtarget is not interesting, just make it minimally valid */ 
</span>    <a href="pathnode.c.html#LN3180"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1575"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN953"><span class='Ref_to_Member'>pathtarget</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN3171"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN535"><span class='Ref_to_Member'>reltarget</span></a><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* For now, assume we are above any joins, so no parameterization */ 
</span>    <a href="pathnode.c.html#LN3180"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1575"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN955"><span class='Ref_to_Member'>param_info</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN3180"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1575"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN957"><span class='Ref_to_Member'>parallel_aware</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN3180"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1575"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN3180"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1575"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN959"><span class='Ref_to_Member'>parallel_workers</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN3180"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1575"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Compute cost & rowcount as sum of subpath costs & rowcounts. 
     * 
     * Currently, we don't charge anything extra for the actual table 
     * modification work, nor for the WITH CHECK OPTIONS or RETURNING 
     * expressions if any.  It would only be window dressing, since 
     * ModifyTable is always a top-level node and there is no way for the 
     * costs to change any higher-level planning choices.  But we might want 
     * to make it look better sometime. 
     */ 
</span>    <a href="pathnode.c.html#LN3180"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1575"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN3180"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1575"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN3180"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1575"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN3181"><span class='Ref_To_Local'>total_size</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN3182"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN3174"><span class='Ref_to_Parameter'>subpaths</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN3218"></a>        <a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>subpath</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN3182"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN3182"><span class='Ref_To_Local'>lc</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/pg_list.h.html#LN75"><span class='Ref_to_Func'>list_head</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN3174"><span class='Ref_to_Parameter'>subpaths</span></a><span class='Parentheses'>))</span>  <span class='Comment_Single_Line'>/* first node? */ 
</span>            <a href="pathnode.c.html#LN3180"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1575"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN3218"><span class='Ref_To_Local'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a><span class='Delimiter'>; 
</span>        <a href="pathnode.c.html#LN3180"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1575"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a> <span class='Operator'>+= </span><a href="pathnode.c.html#LN3218"><span class='Ref_To_Local'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a><span class='Delimiter'>; 
</span>        <a href="pathnode.c.html#LN3180"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1575"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a> <span class='Operator'>+= </span><a href="pathnode.c.html#LN3218"><span class='Ref_To_Local'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a><span class='Delimiter'>; 
</span>        <a href="pathnode.c.html#LN3181"><span class='Ref_To_Local'>total_size</span></a> <span class='Operator'>+= </span><a href="pathnode.c.html#LN3218"><span class='Ref_To_Local'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN953"><span class='Ref_to_Member'>pathtarget</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN885"><span class='Ref_to_Member'>width</span></a> <span class='Operator'>* </span><a href="pathnode.c.html#LN3218"><span class='Ref_To_Local'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Set width to the average width of the subpath outputs.  XXX this is 
     * totally wrong: we should report zero if no RETURNING, else an average 
     * of the RETURNING tlist widths.  But it's what happened historically, 
     * and improving it is a task for another day. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN3180"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1575"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <a href="pathnode.c.html#LN3181"><span class='Ref_To_Local'>total_size</span></a> <span class='Operator'>/= </span><a href="pathnode.c.html#LN3180"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1575"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN3180"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1575"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN953"><span class='Ref_to_Member'>pathtarget</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN885"><span class='Ref_to_Member'>width</span></a> <span class='Operator'>= </span><a href="../../../port/rint.c.html#LN20"><span class='Ref_to_Func'>rint</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN3181"><span class='Ref_To_Local'>total_size</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pathnode.c.html#LN3180"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1576"><span class='Ref_to_Member'>operation</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN3172"><span class='Ref_to_Parameter'>operation</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN3180"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1577"><span class='Ref_to_Member'>canSetTag</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN3172"><span class='Ref_to_Parameter'>canSetTag</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN3180"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1578"><span class='Ref_to_Member'>nominalRelation</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN3173"><span class='Ref_to_Parameter'>nominalRelation</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN3180"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1580"><span class='Ref_to_Member'>partitioned_rels</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN268"><span class='Ref_to_Proto'>list_copy</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN3173"><span class='Ref_to_Parameter'>partitioned_rels</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN3180"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1581"><span class='Ref_to_Member'>resultRelations</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN3174"><span class='Ref_to_Parameter'>resultRelations</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN3180"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1582"><span class='Ref_to_Member'>subpaths</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN3174"><span class='Ref_to_Parameter'>subpaths</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN3180"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1583"><span class='Ref_to_Member'>subroots</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN3175"><span class='Ref_to_Parameter'>subroots</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN3180"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1584"><span class='Ref_to_Member'>withCheckOptionLists</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN3176"><span class='Ref_to_Parameter'>withCheckOptionLists</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN3180"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1585"><span class='Ref_to_Member'>returningLists</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN3176"><span class='Ref_to_Parameter'>returningLists</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN3180"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1586"><span class='Ref_to_Member'>rowMarks</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN3177"><span class='Ref_to_Parameter'>rowMarks</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN3180"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1587"><span class='Ref_to_Member'>onconflict</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN3177"><span class='Ref_to_Parameter'>onconflict</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN3180"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1588"><span class='Ref_to_Member'>epqParam</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN3178"><span class='Ref_to_Parameter'>epqParam</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pathnode.c.html#LN3180"><span class='Ref_To_Local'>pathnode</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end create_modifytable_path &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * create_limit_path 
 *    Creates a pathnode that represents performing LIMIT/OFFSET 
 * 
 * In addition to providing the actual OFFSET and LIMIT expressions, 
 * the caller must provide estimates of their values for costing purposes. 
 * The estimates are as computed by preprocess_limit(), ie, 0 represents 
 * the clause not being present, and -1 means it's present but we could 
 * not estimate its value. 
 * 
 * 'rel' is the parent relation associated with the result 
 * 'subpath' is the path representing the source of data 
 * 'limitOffset' is the actual OFFSET expression, or NULL 
 * 'limitCount' is the actual LIMIT expression, or NULL 
 * 'offset_est' is the estimated value of the OFFSET expression 
 * 'count_est' is the estimated value of the LIMIT expression 
 */ 
</span><a href="../../../include/nodes/relation.h.html#LN1594"><span class='Ref_to_Struct'>LimitPath</span></a> <span class='Operator'>* 
</span><a name="LN3271"></a><span class='Declare_Function'>create_limit_path</span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN150"><span class='Ref_to_Struct'>PlannerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>root</span><span class='Delimiter'>, </span><a href="../../../include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rel</span><span class='Delimiter'>, 
</span><a name="LN3272"></a>                  <a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>subpath</span><span class='Delimiter'>, 
</span><a name="LN3273"></a>                  <a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>limitOffset</span><span class='Delimiter'>, </span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>limitCount</span><span class='Delimiter'>, 
</span><a name="LN3274"></a>                  <a href="../../../include/c.h.html#LN294"><span class='Ref_to_Typedef'>int64</span></a> <span class='Declare_Parameter'>offset_est</span><span class='Delimiter'>, </span><a href="../../../include/c.h.html#LN294"><span class='Ref_to_Typedef'>int64</span></a> <span class='Declare_Parameter'>count_est</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3276"></a>    <a href="../../../include/nodes/relation.h.html#LN1594"><span class='Ref_to_Struct'>LimitPath</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>pathnode</span> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN556"><span class='Ref_to_Macro'>makeNode</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN1594"><span class='Ref_to_Struct'>LimitPath</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pathnode.c.html#LN3276"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1596"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN950"><span class='Ref_to_Member'>pathtype</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN84"><span class='Ref_to_EnumConst'>T_Limit</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN3276"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1596"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN952"><span class='Ref_to_Member'>parent</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN3271"><span class='Ref_to_Parameter'>rel</span></a><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* Limit doesn't project, so use source path's pathtarget */ 
</span>    <a href="pathnode.c.html#LN3276"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1596"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN953"><span class='Ref_to_Member'>pathtarget</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN3272"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN953"><span class='Ref_to_Member'>pathtarget</span></a><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* For now, assume we are above any joins, so no parameterization */ 
</span>    <a href="pathnode.c.html#LN3276"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1596"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN955"><span class='Ref_to_Member'>param_info</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN3276"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1596"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN957"><span class='Ref_to_Member'>parallel_aware</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN3276"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1596"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN3271"><span class='Ref_to_Parameter'>rel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN532"><span class='Ref_to_Member'>consider_parallel</span></a> <span class='Operator'>&& 
</span>        <a href="pathnode.c.html#LN3272"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN958"><span class='Ref_to_Member'>parallel_safe</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN3276"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1596"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN959"><span class='Ref_to_Member'>parallel_workers</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN3272"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN959"><span class='Ref_to_Member'>parallel_workers</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN3276"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1596"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN3272"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN3276"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1596"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN3272"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN3276"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1596"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN3272"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN3276"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1596"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN3272"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN3276"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1597"><span class='Ref_to_Member'>subpath</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN3272"><span class='Ref_to_Parameter'>subpath</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN3276"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1598"><span class='Ref_to_Member'>limitOffset</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN3273"><span class='Ref_to_Parameter'>limitOffset</span></a><span class='Delimiter'>; 
</span>    <a href="pathnode.c.html#LN3276"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1599"><span class='Ref_to_Member'>limitCount</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN3273"><span class='Ref_to_Parameter'>limitCount</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Adjust the output rows count and costs according to the offset/limit. 
     * This is only a cosmetic issue if we are at top level, but if we are 
     * building a subquery then it's important to report correct info to the 
     * outer planner. 
     * 
     * When the offset or count couldn't be estimated, use 10% of the 
     * estimated number of rows emitted from the subpath. 
     * 
     * XXX we don't bother to add eval costs of the offset/limit expressions 
     * themselves to the path costs.  In theory we should, but in most cases 
     * those expressions are trivial and it's just not worth the trouble. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN3274"><span class='Ref_to_Parameter'>offset_est</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN3311"></a>        <span class='Keyword'>double</span>      <span class='Declare_Local'>offset_rows</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN3274"><span class='Ref_to_Parameter'>offset_est</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <a href="pathnode.c.html#LN3311"><span class='Ref_To_Local'>offset_rows</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>double</span><span class='Parentheses'>) </span><a href="pathnode.c.html#LN3274"><span class='Ref_to_Parameter'>offset_est</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="pathnode.c.html#LN3311"><span class='Ref_To_Local'>offset_rows</span></a> <span class='Operator'>= </span><a href="../../../include/optimizer/cost.h.html#LN71"><span class='Ref_to_Proto'>clamp_row_est</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN3272"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a> <span class='Operator'>* </span><span class='Number'>0</span><span class='Operator'>.</span><span class='Number'>10</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN3311"><span class='Ref_To_Local'>offset_rows</span></a> <span class='Operator'>&GT; </span><a href="pathnode.c.html#LN3276"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1596"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a><span class='Parentheses'>) 
</span>            <a href="pathnode.c.html#LN3311"><span class='Ref_To_Local'>offset_rows</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN3276"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1596"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN3272"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <a href="pathnode.c.html#LN3276"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1596"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a> <span class='Operator'>+= 
</span>                <span class='Parentheses'>(</span><a href="pathnode.c.html#LN3272"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a> <span class='Operator'>- </span><a href="pathnode.c.html#LN3272"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a><span class='Parentheses'>) 
</span>                <span class='Operator'>* </span><a href="pathnode.c.html#LN3311"><span class='Ref_To_Local'>offset_rows</span></a> <span class='Operator'>/ </span><a href="pathnode.c.html#LN3272"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a><span class='Delimiter'>; 
</span>        <a href="pathnode.c.html#LN3276"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1596"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a> <span class='Operator'>-= </span><a href="pathnode.c.html#LN3311"><span class='Ref_To_Local'>offset_rows</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN3276"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1596"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a> <span class='Operator'>&LT; </span><span class='Number'>1</span><span class='Parentheses'>) 
</span>            <a href="pathnode.c.html#LN3276"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1596"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN3274"><span class='Ref_to_Parameter'>count_est</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN3330"></a>        <span class='Keyword'>double</span>      <span class='Declare_Local'>count_rows</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN3274"><span class='Ref_to_Parameter'>count_est</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <a href="pathnode.c.html#LN3330"><span class='Ref_To_Local'>count_rows</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>double</span><span class='Parentheses'>) </span><a href="pathnode.c.html#LN3274"><span class='Ref_to_Parameter'>count_est</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="pathnode.c.html#LN3330"><span class='Ref_To_Local'>count_rows</span></a> <span class='Operator'>= </span><a href="../../../include/optimizer/cost.h.html#LN71"><span class='Ref_to_Proto'>clamp_row_est</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN3272"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a> <span class='Operator'>* </span><span class='Number'>0</span><span class='Operator'>.</span><span class='Number'>10</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN3330"><span class='Ref_To_Local'>count_rows</span></a> <span class='Operator'>&GT; </span><a href="pathnode.c.html#LN3276"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1596"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a><span class='Parentheses'>) 
</span>            <a href="pathnode.c.html#LN3330"><span class='Ref_To_Local'>count_rows</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN3276"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1596"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN3272"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <a href="pathnode.c.html#LN3276"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1596"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN3276"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1596"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a> <span class='Operator'>+ 
</span>                <span class='Parentheses'>(</span><a href="pathnode.c.html#LN3272"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN965"><span class='Ref_to_Member'>total_cost</span></a> <span class='Operator'>- </span><a href="pathnode.c.html#LN3272"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN964"><span class='Ref_to_Member'>startup_cost</span></a><span class='Parentheses'>) 
</span>                <span class='Operator'>* </span><a href="pathnode.c.html#LN3330"><span class='Ref_To_Local'>count_rows</span></a> <span class='Operator'>/ </span><a href="pathnode.c.html#LN3272"><span class='Ref_to_Parameter'>subpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a><span class='Delimiter'>; 
</span>        <a href="pathnode.c.html#LN3276"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1596"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a> <span class='Operator'>= </span><a href="pathnode.c.html#LN3330"><span class='Ref_To_Local'>count_rows</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN3276"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1596"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a> <span class='Operator'>&LT; </span><span class='Number'>1</span><span class='Parentheses'>) 
</span>            <a href="pathnode.c.html#LN3276"><span class='Ref_To_Local'>pathnode</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1596"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN963"><span class='Ref_to_Member'>rows</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>return</span> <a href="pathnode.c.html#LN3276"><span class='Ref_To_Local'>pathnode</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end create_limit_path &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* 
 * reparameterize_path 
 *      Attempt to modify a Path to have greater parameterization 
 * 
 * We use this to attempt to bring all child paths of an appendrel to the 
 * same parameterization level, ensuring that they all enforce the same set 
 * of join quals (and thus that that parameterization can be attributed to 
 * an append path built from such paths).  Currently, only a few path types 
 * are supported here, though more could be added at need.  We return NULL 
 * if we can't reparameterize the given path. 
 * 
 * Note: we intentionally do not pass created paths to add_path(); it would 
 * possibly try to delete them on the grounds of being cost-inferior to the 
 * paths they were made from, and we don't want that.  Paths made here are 
 * not necessarily of general-purpose usefulness, but they can be useful 
 * as members of an append path. 
 */ 
</span><a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>* 
</span><a name="LN3369"></a><span class='Declare_Function'>reparameterize_path</span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN150"><span class='Ref_to_Struct'>PlannerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>root</span><span class='Delimiter'>, </span><a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>path</span><span class='Delimiter'>, 
</span><a name="LN3370"></a>                    <a href="../../../include/nodes/relation.h.html#LN27"><span class='Ref_to_Typedef'>Relids</span></a> <span class='Declare_Parameter'>required_outer</span><span class='Delimiter'>, 
</span><a name="LN3371"></a>                    <span class='Keyword'>double </span><span class='Declare_Parameter'>loop_count</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3373"></a>    <a href="../../../include/nodes/relation.h.html#LN517"><span class='Ref_to_Struct'>RelOptInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>rel</span> <span class='Operator'>= </span><a href="pathnode.c.html#LN3369"><span class='Ref_to_Parameter'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN952"><span class='Ref_to_Member'>parent</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Can only increase, not decrease, path's parameterization */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/nodes/bitmapset.h.html#LN73"><span class='Ref_to_Proto'>bms_is_subset</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN972"><span class='Ref_to_Macro'>PATH_REQ_OUTER</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN3369"><span class='Ref_to_Parameter'>path</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="pathnode.c.html#LN3370"><span class='Ref_to_Parameter'>required_outer</span></a><span class='Parentheses'>))</span> 
        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="pathnode.c.html#LN3369"><span class='Ref_to_Parameter'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN950"><span class='Ref_to_Member'>pathtype</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN53"><span class='Ref_to_EnumConst'>T_SeqScan</span></a><span class='Operator'>: 
</span>            <span class='Control'>return</span> <a href="../../../include/optimizer/pathnode.h.html#LN35"><span class='Ref_to_Proto'>create_seqscan_path</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN3369"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN3373"><span class='Ref_To_Local'>rel</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN3370"><span class='Ref_to_Parameter'>required_outer</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN54"><span class='Ref_to_EnumConst'>T_SampleScan</span></a><span class='Operator'>: 
</span>            <span class='Control'>return</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/optimizer/pathnode.h.html#LN37"><span class='Ref_to_Proto'>create_samplescan_path</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN3369"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN3373"><span class='Ref_To_Local'>rel</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN3370"><span class='Ref_to_Parameter'>required_outer</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN55"><span class='Ref_to_EnumConst'>T_IndexScan</span></a><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN56"><span class='Ref_to_EnumConst'>T_IndexOnlyScan</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN3387"></a>                <a href="../../../include/nodes/relation.h.html#LN1027"><span class='Ref_to_Struct'>IndexPath</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>ipath</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN1027"><span class='Ref_to_Struct'>IndexPath</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pathnode.c.html#LN3369"><span class='Ref_to_Parameter'>path</span></a><span class='Delimiter'>; 
</span><a name="LN3388"></a>                <a href="../../../include/nodes/relation.h.html#LN1027"><span class='Ref_to_Struct'>IndexPath</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>newpath</span> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN556"><span class='Ref_to_Macro'>makeNode</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN1027"><span class='Ref_to_Struct'>IndexPath</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * We can't use create_index_path directly, and would not want 
                 * to because it would re-compute the indexqual conditions 
                 * which is wasted effort.  Instead we hack things a bit: 
                 * flat-copy the path node, revise its param_info, and redo 
                 * the cost estimate. 
                 */ 
</span>                memcpy<span class='Parentheses'>(</span><a href="pathnode.c.html#LN3388"><span class='Ref_To_Local'>newpath</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN3387"><span class='Ref_To_Local'>ipath</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN1027"><span class='Ref_to_Struct'>IndexPath</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="pathnode.c.html#LN3388"><span class='Ref_To_Local'>newpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1029"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN955"><span class='Ref_to_Member'>param_info</span></a> <span class='Operator'>= 
</span>                    <a href="../../../include/optimizer/pathnode.h.html#LN275"><span class='Ref_to_Proto'>get_baserel_parampathinfo</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN3369"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN3373"><span class='Ref_To_Local'>rel</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN3370"><span class='Ref_to_Parameter'>required_outer</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="../../../include/optimizer/cost.h.html#LN78"><span class='Ref_to_Proto'>cost_index</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN3388"><span class='Ref_To_Local'>newpath</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN3369"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, </span><a href="pathnode.c.html#LN3371"><span class='Ref_to_Parameter'>loop_count</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>return</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pathnode.c.html#LN3388"><span class='Ref_To_Local'>newpath</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN58"><span class='Ref_to_EnumConst'>T_BitmapHeapScan</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN3405"></a>                <a href="../../../include/nodes/relation.h.html#LN1058"><span class='Ref_to_Struct'>BitmapHeapPath</span></a> <span class='Operator'>*</span><span class='Declare_Local'>bpath</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN1058"><span class='Ref_to_Struct'>BitmapHeapPath</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pathnode.c.html#LN3369"><span class='Ref_to_Parameter'>path</span></a><span class='Delimiter'>; 
</span> 
                <span class='Control'>return</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/optimizer/pathnode.h.html#LN51"><span class='Ref_to_Proto'>create_bitmap_heap_path</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN3369"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, 
</span>                                                        <a href="pathnode.c.html#LN3373"><span class='Ref_To_Local'>rel</span></a><span class='Delimiter'>, 
</span>                                                        <a href="pathnode.c.html#LN3405"><span class='Ref_To_Local'>bpath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1061"><span class='Ref_to_Member'>bitmapqual</span></a><span class='Delimiter'>, 
</span>                                                        <a href="pathnode.c.html#LN3370"><span class='Ref_to_Parameter'>required_outer</span></a><span class='Delimiter'>, 
</span>                                                        <a href="pathnode.c.html#LN3371"><span class='Ref_to_Parameter'>loop_count</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN60"><span class='Ref_to_EnumConst'>T_SubqueryScan</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN3415"></a>                <a href="../../../include/nodes/relation.h.html#LN1111"><span class='Ref_to_Struct'>SubqueryScanPath</span></a> <span class='Operator'>*</span><span class='Declare_Local'>spath</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN1111"><span class='Ref_to_Struct'>SubqueryScanPath</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pathnode.c.html#LN3369"><span class='Ref_to_Parameter'>path</span></a><span class='Delimiter'>; 
</span> 
                <span class='Control'>return</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/relation.h.html#LN946"><span class='Ref_to_Struct'>Path</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/optimizer/pathnode.h.html#LN89"><span class='Ref_to_Proto'>create_subqueryscan_path</span></a><span class='Parentheses'>(</span><a href="pathnode.c.html#LN3369"><span class='Ref_to_Parameter'>root</span></a><span class='Delimiter'>, 
</span>                                                         <a href="pathnode.c.html#LN3373"><span class='Ref_To_Local'>rel</span></a><span class='Delimiter'>, 
</span>                                                         <a href="pathnode.c.html#LN3415"><span class='Ref_To_Local'>spath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1114"><span class='Ref_to_Member'>subpath</span></a><span class='Delimiter'>, 
</span>                                                         <a href="pathnode.c.html#LN3415"><span class='Ref_To_Local'>spath</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/relation.h.html#LN1113"><span class='Ref_to_Member'>path</span></a><span class='Operator'>.</span><a href="../../../include/nodes/relation.h.html#LN967"><span class='Ref_to_Member'>pathkeys</span></a><span class='Delimiter'>, 
</span>                                                         <a href="pathnode.c.html#LN3370"><span class='Ref_to_Parameter'>required_outer</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Control'>default</span><span class='Operator'>: 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch path-&GT;pathtype &raquo; </span> 
    <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end reparameterize_path &raquo; </span> 
</pre>
<table bgcolor='#c0c0c0' width='100%'><tr><td><a href='../../../../Contents.html'>Contents</a></td></tr>
</table><hr><p class='blurb' align='center'><a href='http://www.sourceinsight.com'>HTML Created by Source Insight Version 4.00.0084 Built on 2017-02-26</a></p>
</body></html>