<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta name="generator" content="Source Insight Version 4.00.0084 Built on 2017-02-26">
<meta charset='UTF-8' />
<style type='text/css'><!--
TD {background-color: #C0C0C0; font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.blurb {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.filename {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 120%; font-weight: bold; }
.dirname {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 100%; font-weight: bold; margin-top: 2.5em;}
--></style>
<title>src\backend\parser\parse_target.c</title>
<LINK REL=StyleSheet HREF="../../../C_Cpp_Source_File.css" TYPE='text/css' MEDIA=screen>
</head>
<body bgcolor=#ffffff>
<table bgcolor='#c0c0c0' width='100%'>
<tr><td><p class='filename'><b>src\backend\parser\parse_target.c</b></p></td>
<td align='right'>
Wed Jun 14 08:25:45 2017
</td></tr>
<tr><td><a href='../../../Contents.html'>Contents</a></td></tr>
</table>
<pre>
<span class='Comment_Multi_Line'>/*------------------------------------------------------------------------- 
 * 
 * parse_target.c 
 *    handle target lists 
 * 
 * Portions Copyright (c) 1996-2017, PostgreSQL Global Development Group 
 * Portions Copyright (c) 1994, Regents of the University of California 
 * 
 * 
 * IDENTIFICATION 
 *    src/backend/parser/parse_target.c 
 * 
 *------------------------------------------------------------------------- 
 */ 
</span><span class='Keyword'>#include </span><span class='String'>"postgres.h"</span> 
 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_type.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"commands/dbcommands.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"funcapi.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"miscadmin.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"nodes/makefuncs.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"nodes/nodeFuncs.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"parser/parsetree.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"parser/parse_coerce.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"parser/parse_expr.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"parser/parse_func.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"parser/parse_relation.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"parser/parse_target.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"parser/parse_type.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/builtins.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/lsyscache.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/rel.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/typcache.h"</span> 
 
 
<a name="LN35"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>markTargetListOrigin</span><span class='Parentheses'>(</span><a href="../../include/parser/parse_node.h.html#LN164"><span class='Ref_to_Struct'>ParseState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pstate</span><span class='Delimiter'>, </span><a href="../../include/nodes/primnodes.h.html#LN1363"><span class='Ref_to_Struct'>TargetEntry</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tle</span><span class='Delimiter'>, 
</span><a name="LN36"></a>                     <a href="../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>var</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>levelsup</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN37"></a><span class='Keyword'>static </span><a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Prototype'>transformAssignmentIndirection</span><span class='Parentheses'>(</span><a href="../../include/parser/parse_node.h.html#LN164"><span class='Ref_to_Struct'>ParseState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pstate</span><span class='Delimiter'>, 
</span><a name="LN38"></a>                               <a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>basenode</span><span class='Delimiter'>, 
</span><a name="LN39"></a>                               <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>targetName</span><span class='Delimiter'>, 
</span><a name="LN40"></a>                               <span class='Keyword'>bool </span><span class='Declare_Parameter'>targetIsArray</span><span class='Delimiter'>, 
</span><a name="LN41"></a>                               <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>targetTypeId</span><span class='Delimiter'>, 
</span><a name="LN42"></a>                               <a href="../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a> <span class='Declare_Parameter'>targetTypMod</span><span class='Delimiter'>, 
</span><a name="LN43"></a>                               <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>targetCollation</span><span class='Delimiter'>, 
</span><a name="LN44"></a>                               <a href="../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>indirection</span><span class='Delimiter'>, 
</span><a name="LN45"></a>                               <a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rhs</span><span class='Delimiter'>, 
</span><a name="LN46"></a>                               <span class='Keyword'>int </span><span class='Declare_Parameter'>location</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN47"></a><span class='Keyword'>static </span><a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Prototype'>transformAssignmentSubscripts</span><span class='Parentheses'>(</span><a href="../../include/parser/parse_node.h.html#LN164"><span class='Ref_to_Struct'>ParseState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pstate</span><span class='Delimiter'>, 
</span><a name="LN48"></a>                              <a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>basenode</span><span class='Delimiter'>, 
</span><a name="LN49"></a>                              <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>targetName</span><span class='Delimiter'>, 
</span><a name="LN50"></a>                              <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>targetTypeId</span><span class='Delimiter'>, 
</span><a name="LN51"></a>                              <a href="../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a> <span class='Declare_Parameter'>targetTypMod</span><span class='Delimiter'>, 
</span><a name="LN52"></a>                              <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>targetCollation</span><span class='Delimiter'>, 
</span><a name="LN53"></a>                              <a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>subscripts</span><span class='Delimiter'>, 
</span><a name="LN54"></a>                              <span class='Keyword'>bool </span><span class='Declare_Parameter'>isSlice</span><span class='Delimiter'>, 
</span><a name="LN55"></a>                              <a href="../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>next_indirection</span><span class='Delimiter'>, 
</span><a name="LN56"></a>                              <a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rhs</span><span class='Delimiter'>, 
</span><a name="LN57"></a>                              <span class='Keyword'>int </span><span class='Declare_Parameter'>location</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN58"></a><span class='Keyword'>static </span><a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Prototype'>ExpandColumnRefStar</span><span class='Parentheses'>(</span><a href="../../include/parser/parse_node.h.html#LN164"><span class='Ref_to_Struct'>ParseState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pstate</span><span class='Delimiter'>, </span><a href="../../include/nodes/parsenodes.h.html#LN231"><span class='Ref_to_Struct'>ColumnRef</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>cref</span><span class='Delimiter'>, 
</span><a name="LN59"></a>                    <span class='Keyword'>bool </span><span class='Declare_Parameter'>make_target_entry</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN60"></a><span class='Keyword'>static </span><a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Prototype'>ExpandAllTables</span><span class='Parentheses'>(</span><a href="../../include/parser/parse_node.h.html#LN164"><span class='Ref_to_Struct'>ParseState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pstate</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>location</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN61"></a><span class='Keyword'>static </span><a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Prototype'>ExpandIndirectionStar</span><span class='Parentheses'>(</span><a href="../../include/parser/parse_node.h.html#LN164"><span class='Ref_to_Struct'>ParseState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pstate</span><span class='Delimiter'>, </span><a href="../../include/nodes/parsenodes.h.html#LN401"><span class='Ref_to_Struct'>A_Indirection</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>ind</span><span class='Delimiter'>, 
</span><a name="LN62"></a>                      <span class='Keyword'>bool </span><span class='Declare_Parameter'>make_target_entry</span><span class='Delimiter'>, </span><a href="../../include/parser/parse_node.h.html#LN32"><span class='Ref_to_Enum'>ParseExprKind</span></a> <span class='Declare_Parameter'>exprKind</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN63"></a><span class='Keyword'>static </span><a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Prototype'>ExpandSingleTable</span><span class='Parentheses'>(</span><a href="../../include/parser/parse_node.h.html#LN164"><span class='Ref_to_Struct'>ParseState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pstate</span><span class='Delimiter'>, </span><a href="../../include/nodes/parsenodes.h.html#LN932"><span class='Ref_to_Struct'>RangeTblEntry</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rte</span><span class='Delimiter'>, 
</span><a name="LN64"></a>                  <span class='Keyword'>int </span><span class='Declare_Parameter'>location</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>make_target_entry</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN65"></a><span class='Keyword'>static </span><a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Prototype'>ExpandRowReference</span><span class='Parentheses'>(</span><a href="../../include/parser/parse_node.h.html#LN164"><span class='Ref_to_Struct'>ParseState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pstate</span><span class='Delimiter'>, </span><a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>expr</span><span class='Delimiter'>, 
</span><a name="LN66"></a>                   <span class='Keyword'>bool </span><span class='Declare_Parameter'>make_target_entry</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN67"></a><span class='Keyword'>static int</span>  <span class='Declare_Prototype'>FigureColnameInternal</span><span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>**</span><span class='Declare_Parameter'>name</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
 
<span class='Comment_Multi_Line'>/* 
 * transformTargetEntry() 
 *  Transform any ordinary "expression-type" node into a targetlist entry. 
 *  This is exported so that parse_clause.c can generate targetlist entries 
 *  for ORDER/GROUP BY items that are not already in the targetlist. 
 * 
 * node     the (untransformed) parse tree for the value expression. 
 * expr     the transformed expression, or NULL if caller didn't do it yet. 
 * exprKind expression kind (EXPR_KIND_SELECT_TARGET, etc) 
 * colname  the column name to be assigned, or NULL if none yet set. 
 * resjunk  true if the target should be marked resjunk, ie, it is not 
 *          wanted in the final projected tuple. 
 */ 
</span><a href="../../include/nodes/primnodes.h.html#LN1363"><span class='Ref_to_Struct'>TargetEntry</span></a> <span class='Operator'>* 
</span><a name="LN84"></a><span class='Declare_Function'>transformTargetEntry</span><span class='Parentheses'>(</span><a href="../../include/parser/parse_node.h.html#LN164"><span class='Ref_to_Struct'>ParseState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pstate</span><span class='Delimiter'>, 
</span><a name="LN85"></a>                     <a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, 
</span><a name="LN86"></a>                     <a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>expr</span><span class='Delimiter'>, 
</span><a name="LN87"></a>                     <a href="../../include/parser/parse_node.h.html#LN32"><span class='Ref_to_Enum'>ParseExprKind</span></a> <span class='Declare_Parameter'>exprKind</span><span class='Delimiter'>, 
</span><a name="LN88"></a>                     <span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>colname</span><span class='Delimiter'>, 
</span><a name="LN89"></a>                     <span class='Keyword'>bool </span><span class='Declare_Parameter'>resjunk</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Comment_Multi_Line'>/* Transform the node if caller didn't do it already */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="parse_target.c.html#LN86"><span class='Ref_to_Parameter'>expr</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * If it's a SetToDefault node and we should allow that, pass it 
         * through unmodified.  (transformExpr will throw the appropriate 
         * error if we're disallowing it.) 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="parse_target.c.html#LN87"><span class='Ref_to_Parameter'>exprKind</span></a> <span class='Operator'>== </span><a href="../../include/parser/parse_node.h.html#LN49"><span class='Ref_to_EnumConst'>EXPR_KIND_UPDATE_SOURCE</span></a> <span class='Operator'>&& </span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN85"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/primnodes.h.html#LN1251"><span class='Ref_to_Struct'>SetToDefault</span></a><span class='Parentheses'>))</span> 
            <a href="parse_target.c.html#LN86"><span class='Ref_to_Parameter'>expr</span></a> <span class='Operator'>= </span><a href="parse_target.c.html#LN85"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="parse_target.c.html#LN86"><span class='Ref_to_Parameter'>expr</span></a> <span class='Operator'>= </span><a href="../../include/parser/parse_expr.h.html#LN21"><span class='Ref_to_Proto'>transformExpr</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN84"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN85"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN87"><span class='Ref_to_Parameter'>exprKind</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="parse_target.c.html#LN88"><span class='Ref_to_Parameter'>colname</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL </span><span class='Operator'>&& !</span><a href="parse_target.c.html#LN89"><span class='Ref_to_Parameter'>resjunk</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * Generate a suitable column name for a column without any explicit 
         * 'AS ColumnName' clause. 
         */ 
</span>        <a href="parse_target.c.html#LN88"><span class='Ref_to_Parameter'>colname</span></a> <span class='Operator'>= </span><a href="../../include/parser/parse_target.h.html#LN42"><span class='Ref_to_Proto'>FigureColname</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN85"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>return</span> <a href="../../include/nodes/makefuncs.h.html#LN40"><span class='Ref_to_Proto'>makeTargetEntry</span></a><span class='Parentheses'>((</span><a href="../../include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="parse_target.c.html#LN86"><span class='Ref_to_Parameter'>expr</span></a><span class='Delimiter'>, 
</span>                           <span class='Parentheses'>(</span><a href="../../include/access/attnum.h.html#LN20"><span class='Ref_to_Typedef'>AttrNumber</span></a><span class='Parentheses'>) </span><a href="parse_target.c.html#LN84"><span class='Ref_to_Parameter'>pstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/parser/parse_node.h.html#LN183"><span class='Ref_to_Member'>p_next_resno</span></a><span class='Operator'>++</span><span class='Delimiter'>, 
</span>                           <a href="parse_target.c.html#LN88"><span class='Ref_to_Parameter'>colname</span></a><span class='Delimiter'>, 
</span>                           <a href="parse_target.c.html#LN89"><span class='Ref_to_Parameter'>resjunk</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end transformTargetEntry &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* 
 * transformTargetList() 
 * Turns a list of ResTarget's into a list of TargetEntry's. 
 * 
 * This code acts mostly the same for SELECT, UPDATE, or RETURNING lists; 
 * the main thing is to transform the given expressions (the "val" fields). 
 * The exprKind parameter distinguishes these cases when necessary. 
 */ 
</span><a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>* 
</span><a name="LN130"></a><span class='Declare_Function'>transformTargetList</span><span class='Parentheses'>(</span><a href="../../include/parser/parse_node.h.html#LN164"><span class='Ref_to_Struct'>ParseState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pstate</span><span class='Delimiter'>, </span><a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>targetlist</span><span class='Delimiter'>, 
</span><a name="LN131"></a>                    <a href="../../include/parser/parse_node.h.html#LN32"><span class='Ref_to_Enum'>ParseExprKind</span></a> <span class='Declare_Parameter'>exprKind</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN133"></a>    <a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>p_target</span> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span><a name="LN134"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>expand_star</span><span class='Delimiter'>; 
</span><a name="LN135"></a>    <a href="../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>o_target</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Shouldn't have any leftover multiassign items at start */ 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="parse_target.c.html#LN130"><span class='Ref_to_Parameter'>pstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/parser/parse_node.h.html#LN184"><span class='Ref_to_Member'>p_multiassign_exprs</span></a> <span class='Operator'>== </span><a href="../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Expand "something.*" in SELECT and RETURNING, but not UPDATE */ 
</span>    <a href="parse_target.c.html#LN134"><span class='Ref_To_Local'>expand_star</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="parse_target.c.html#LN131"><span class='Ref_to_Parameter'>exprKind</span></a> <span class='Operator'>!= </span><a href="../../include/parser/parse_node.h.html#LN49"><span class='Ref_to_EnumConst'>EXPR_KIND_UPDATE_SOURCE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN135"><span class='Ref_To_Local'>o_target</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN130"><span class='Ref_to_Parameter'>targetlist</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN145"></a>        <a href="../../include/nodes/parsenodes.h.html#LN436"><span class='Ref_to_Struct'>ResTarget</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>res</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/parsenodes.h.html#LN436"><span class='Ref_to_Struct'>ResTarget</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN135"><span class='Ref_To_Local'>o_target</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Check for "something.*".  Depending on the complexity of the 
         * "something", the star could appear as the last field in ColumnRef, 
         * or as the last indirection item in A_Indirection. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="parse_target.c.html#LN134"><span class='Ref_To_Local'>expand_star</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN145"><span class='Ref_To_Local'>res</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN441"><span class='Ref_to_Member'>val</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/parsenodes.h.html#LN231"><span class='Ref_to_Struct'>ColumnRef</span></a><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span><a name="LN156"></a>                <a href="../../include/nodes/parsenodes.h.html#LN231"><span class='Ref_to_Struct'>ColumnRef</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>cref</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/parsenodes.h.html#LN231"><span class='Ref_to_Struct'>ColumnRef</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="parse_target.c.html#LN145"><span class='Ref_To_Local'>res</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN441"><span class='Ref_to_Member'>val</span></a><span class='Delimiter'>; 
</span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="../../include/nodes/pg_list.h.html#LN130"><span class='Ref_to_Macro'>llast</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN156"><span class='Ref_To_Local'>cref</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN234"><span class='Ref_to_Member'>fields</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="../../include/nodes/parsenodes.h.html#LN367"><span class='Ref_to_Struct'>A_Star</span></a><span class='Parentheses'>))</span> 
                <span class='Delimiter'>{ 
</span>                    <span class='Comment_Multi_Line'>/* It is something.*, expand into multiple items */ 
</span>                    <a href="parse_target.c.html#LN133"><span class='Ref_To_Local'>p_target</span></a> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN219"><span class='Ref_to_Proto'>list_concat</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN133"><span class='Ref_To_Local'>p_target</span></a><span class='Delimiter'>, 
</span>                                           <a href="parse_target.c.html#LN58"><span class='Ref_to_Proto'>ExpandColumnRefStar</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN130"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, 
</span>                                                               <a href="parse_target.c.html#LN156"><span class='Ref_To_Local'>cref</span></a><span class='Delimiter'>, 
</span>                                                               <span class='Boolean'>true</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                    <span class='Control'>continue</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN145"><span class='Ref_To_Local'>res</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN441"><span class='Ref_to_Member'>val</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/parsenodes.h.html#LN401"><span class='Ref_to_Struct'>A_Indirection</span></a><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span><a name="LN170"></a>                <a href="../../include/nodes/parsenodes.h.html#LN401"><span class='Ref_to_Struct'>A_Indirection</span></a> <span class='Operator'>*</span><span class='Declare_Local'>ind</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/parsenodes.h.html#LN401"><span class='Ref_to_Struct'>A_Indirection</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="parse_target.c.html#LN145"><span class='Ref_To_Local'>res</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN441"><span class='Ref_to_Member'>val</span></a><span class='Delimiter'>; 
</span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="../../include/nodes/pg_list.h.html#LN130"><span class='Ref_to_Macro'>llast</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN170"><span class='Ref_To_Local'>ind</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN405"><span class='Ref_to_Member'>indirection</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="../../include/nodes/parsenodes.h.html#LN367"><span class='Ref_to_Struct'>A_Star</span></a><span class='Parentheses'>))</span> 
                <span class='Delimiter'>{ 
</span>                    <span class='Comment_Multi_Line'>/* It is something.*, expand into multiple items */ 
</span>                    <a href="parse_target.c.html#LN133"><span class='Ref_To_Local'>p_target</span></a> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN219"><span class='Ref_to_Proto'>list_concat</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN133"><span class='Ref_To_Local'>p_target</span></a><span class='Delimiter'>, 
</span>                                           <a href="parse_target.c.html#LN61"><span class='Ref_to_Proto'>ExpandIndirectionStar</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN130"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, 
</span>                                                                 <a href="parse_target.c.html#LN170"><span class='Ref_To_Local'>ind</span></a><span class='Delimiter'>, 
</span>                                                                 <span class='Boolean'>true</span><span class='Delimiter'>, 
</span>                                                                 <a href="parse_target.c.html#LN131"><span class='Ref_to_Parameter'>exprKind</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                    <span class='Control'>continue</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if expand_star &raquo; </span> 
 
        <span class='Comment_Multi_Line'>/* 
         * Not "something.*", or we want to treat that as a plain whole-row 
         * variable, so transform as a single expression 
         */ 
</span>        <a href="parse_target.c.html#LN133"><span class='Ref_To_Local'>p_target</span></a> <span class='Operator'>= </span><a href="../nodes/list.c.html#LN126"><span class='Ref_to_Func'>lappend</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN133"><span class='Ref_To_Local'>p_target</span></a><span class='Delimiter'>, 
</span>                           <a href="../../include/parser/parse_target.h.html#LN25"><span class='Ref_to_Proto'>transformTargetEntry</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN130"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, 
</span>                                                <a href="parse_target.c.html#LN145"><span class='Ref_To_Local'>res</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN441"><span class='Ref_to_Member'>val</span></a><span class='Delimiter'>, 
</span>                                                <span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                                                <a href="parse_target.c.html#LN131"><span class='Ref_to_Parameter'>exprKind</span></a><span class='Delimiter'>, 
</span>                                                <a href="parse_target.c.html#LN145"><span class='Ref_To_Local'>res</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN439"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                                                <span class='Boolean'>false</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If any multiassign resjunk items were created, attach them to the end 
     * of the targetlist.  This should only happen in an UPDATE tlist.  We 
     * don't need to worry about numbering of these items; transformUpdateStmt 
     * will set their resnos. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="parse_target.c.html#LN130"><span class='Ref_to_Parameter'>pstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/parser/parse_node.h.html#LN184"><span class='Ref_to_Member'>p_multiassign_exprs</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="parse_target.c.html#LN131"><span class='Ref_to_Parameter'>exprKind</span></a> <span class='Operator'>== </span><a href="../../include/parser/parse_node.h.html#LN49"><span class='Ref_to_EnumConst'>EXPR_KIND_UPDATE_SOURCE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="parse_target.c.html#LN133"><span class='Ref_To_Local'>p_target</span></a> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN219"><span class='Ref_to_Proto'>list_concat</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN133"><span class='Ref_To_Local'>p_target</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN130"><span class='Ref_to_Parameter'>pstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/parser/parse_node.h.html#LN184"><span class='Ref_to_Member'>p_multiassign_exprs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="parse_target.c.html#LN130"><span class='Ref_to_Parameter'>pstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/parser/parse_node.h.html#LN184"><span class='Ref_to_Member'>p_multiassign_exprs</span></a> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>return</span> <a href="parse_target.c.html#LN133"><span class='Ref_To_Local'>p_target</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end transformTargetList &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* 
 * transformExpressionList() 
 * 
 * This is the identical transformation to transformTargetList, except that 
 * the input list elements are bare expressions without ResTarget decoration, 
 * and the output elements are likewise just expressions without TargetEntry 
 * decoration.  We use this for ROW() and VALUES() constructs. 
 * 
 * exprKind is not enough to tell us whether to allow SetToDefault, so 
 * an additional flag is needed for that. 
 */ 
</span><a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>* 
</span><a name="LN227"></a><span class='Declare_Function'>transformExpressionList</span><span class='Parentheses'>(</span><a href="../../include/parser/parse_node.h.html#LN164"><span class='Ref_to_Struct'>ParseState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pstate</span><span class='Delimiter'>, </span><a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>exprlist</span><span class='Delimiter'>, 
</span><a name="LN228"></a>                        <a href="../../include/parser/parse_node.h.html#LN32"><span class='Ref_to_Enum'>ParseExprKind</span></a> <span class='Declare_Parameter'>exprKind</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>allowDefault</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN230"></a>    <a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>result</span> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span><a name="LN231"></a>    <a href="../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc</span><span class='Delimiter'>; 
</span> 
    <a href="../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN231"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN227"><span class='Ref_to_Parameter'>exprlist</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN235"></a>        <a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>e</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN231"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Check for "something.*".  Depending on the complexity of the 
         * "something", the star could appear as the last field in ColumnRef, 
         * or as the last indirection item in A_Indirection. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN235"><span class='Ref_To_Local'>e</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/parsenodes.h.html#LN231"><span class='Ref_to_Struct'>ColumnRef</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span><a name="LN244"></a>            <a href="../../include/nodes/parsenodes.h.html#LN231"><span class='Ref_to_Struct'>ColumnRef</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>cref</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/parsenodes.h.html#LN231"><span class='Ref_to_Struct'>ColumnRef</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="parse_target.c.html#LN235"><span class='Ref_To_Local'>e</span></a><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="../../include/nodes/pg_list.h.html#LN130"><span class='Ref_to_Macro'>llast</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN244"><span class='Ref_To_Local'>cref</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN234"><span class='Ref_to_Member'>fields</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="../../include/nodes/parsenodes.h.html#LN367"><span class='Ref_to_Struct'>A_Star</span></a><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* It is something.*, expand into multiple items */ 
</span>                <a href="parse_target.c.html#LN230"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN219"><span class='Ref_to_Proto'>list_concat</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN230"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>, 
</span>                                     <a href="parse_target.c.html#LN58"><span class='Ref_to_Proto'>ExpandColumnRefStar</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN227"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN244"><span class='Ref_To_Local'>cref</span></a><span class='Delimiter'>, 
</span>                                                         <span class='Boolean'>false</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <span class='Control'>continue</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN235"><span class='Ref_To_Local'>e</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/parsenodes.h.html#LN401"><span class='Ref_to_Struct'>A_Indirection</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span><a name="LN257"></a>            <a href="../../include/nodes/parsenodes.h.html#LN401"><span class='Ref_to_Struct'>A_Indirection</span></a> <span class='Operator'>*</span><span class='Declare_Local'>ind</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/parsenodes.h.html#LN401"><span class='Ref_to_Struct'>A_Indirection</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="parse_target.c.html#LN235"><span class='Ref_To_Local'>e</span></a><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="../../include/nodes/pg_list.h.html#LN130"><span class='Ref_to_Macro'>llast</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN257"><span class='Ref_To_Local'>ind</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN405"><span class='Ref_to_Member'>indirection</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="../../include/nodes/parsenodes.h.html#LN367"><span class='Ref_to_Struct'>A_Star</span></a><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* It is something.*, expand into multiple items */ 
</span>                <a href="parse_target.c.html#LN230"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN219"><span class='Ref_to_Proto'>list_concat</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN230"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>, 
</span>                                     <a href="parse_target.c.html#LN61"><span class='Ref_to_Proto'>ExpandIndirectionStar</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN227"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN257"><span class='Ref_To_Local'>ind</span></a><span class='Delimiter'>, 
</span>                                                           <span class='Boolean'>false</span><span class='Delimiter'>, </span><a href="parse_target.c.html#LN228"><span class='Ref_to_Parameter'>exprKind</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <span class='Control'>continue</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Not "something.*", so transform as a single expression.  If it's a 
         * SetToDefault node and we should allow that, pass it through 
         * unmodified.  (transformExpr will throw the appropriate error if 
         * we're disallowing it.) 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="parse_target.c.html#LN228"><span class='Ref_to_Parameter'>allowDefault</span></a> <span class='Operator'>&& </span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN235"><span class='Ref_To_Local'>e</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/primnodes.h.html#LN1251"><span class='Ref_to_Struct'>SetToDefault</span></a><span class='Parentheses'>))</span> 
             <span class='Comment_Multi_Line'>/* do nothing */ </span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="parse_target.c.html#LN235"><span class='Ref_To_Local'>e</span></a> <span class='Operator'>= </span><a href="../../include/parser/parse_expr.h.html#LN21"><span class='Ref_to_Proto'>transformExpr</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN227"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN235"><span class='Ref_To_Local'>e</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN228"><span class='Ref_to_Parameter'>exprKind</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="parse_target.c.html#LN230"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../nodes/list.c.html#LN126"><span class='Ref_to_Func'>lappend</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN230"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN235"><span class='Ref_To_Local'>e</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* Shouldn't have any multiassign items here */ 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="parse_target.c.html#LN227"><span class='Ref_to_Parameter'>pstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/parser/parse_node.h.html#LN184"><span class='Ref_to_Member'>p_multiassign_exprs</span></a> <span class='Operator'>== </span><a href="../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="parse_target.c.html#LN230"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end transformExpressionList &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* 
 * resolveTargetListUnknowns() 
 *      Convert any unknown-type targetlist entries to type TEXT. 
 * 
 * We do this after we've exhausted all other ways of identifying the output 
 * column types of a query. 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN298"></a><span class='Declare_Function'>resolveTargetListUnknowns</span><span class='Parentheses'>(</span><a href="../../include/parser/parse_node.h.html#LN164"><span class='Ref_to_Struct'>ParseState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pstate</span><span class='Delimiter'>, </span><a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>targetlist</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN300"></a>    <a href="../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>l</span><span class='Delimiter'>; 
</span> 
    <a href="../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN300"><span class='Ref_To_Local'>l</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN298"><span class='Ref_to_Parameter'>targetlist</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN304"></a>        <a href="../../include/nodes/primnodes.h.html#LN1363"><span class='Ref_to_Struct'>TargetEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>tle</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN1363"><span class='Ref_to_Struct'>TargetEntry</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN300"><span class='Ref_To_Local'>l</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN305"></a>        <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>restype</span> <span class='Operator'>= </span><a href="../../include/nodes/nodeFuncs.h.html#LN31"><span class='Ref_to_Proto'>exprType</span></a><span class='Parentheses'>((</span><a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="parse_target.c.html#LN304"><span class='Ref_To_Local'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1366"><span class='Ref_to_Member'>expr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="parse_target.c.html#LN305"><span class='Ref_To_Local'>restype</span></a> <span class='Operator'>== </span><a href="../../interfaces/ecpg/ecpglib/pg_type.h.html#LN43"><span class='Ref_to_Const'>UNKNOWNOID</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="parse_target.c.html#LN304"><span class='Ref_To_Local'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1366"><span class='Ref_to_Member'>expr</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/parser/parse_coerce.h.html#LN45"><span class='Ref_to_Proto'>coerce_type</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN298"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="parse_target.c.html#LN304"><span class='Ref_To_Local'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1366"><span class='Ref_to_Member'>expr</span></a><span class='Delimiter'>, 
</span>                                             <a href="parse_target.c.html#LN305"><span class='Ref_To_Local'>restype</span></a><span class='Delimiter'>, </span><a href="../../interfaces/ecpg/ecpglib/pg_type.h.html#LN26"><span class='Ref_to_Const'>TEXTOID</span></a><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, 
</span>                                             <a href="../../include/nodes/primnodes.h.html#LN420"><span class='Ref_to_EnumConst'>COERCION_IMPLICIT</span></a><span class='Delimiter'>, 
</span>                                             <a href="../../include/nodes/primnodes.h.html#LN438"><span class='Ref_to_EnumConst'>COERCE_IMPLICIT_CAST</span></a><span class='Delimiter'>, 
</span>                                             <span class='Operator'>-</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
}</span><span class='Auto_Annotations'> &laquo; end resolveTargetListUnknowns &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* 
 * markTargetListOrigins() 
 *      Mark targetlist columns that are simple Vars with the source 
 *      table's OID and column number. 
 * 
 * Currently, this is done only for SELECT targetlists and RETURNING lists, 
 * since we only need the info if we are going to send it to the frontend. 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN328"></a><span class='Declare_Function'>markTargetListOrigins</span><span class='Parentheses'>(</span><a href="../../include/parser/parse_node.h.html#LN164"><span class='Ref_to_Struct'>ParseState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pstate</span><span class='Delimiter'>, </span><a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>targetlist</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN330"></a>    <a href="../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>l</span><span class='Delimiter'>; 
</span> 
    <a href="../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN330"><span class='Ref_To_Local'>l</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN328"><span class='Ref_to_Parameter'>targetlist</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN334"></a>        <a href="../../include/nodes/primnodes.h.html#LN1363"><span class='Ref_to_Struct'>TargetEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>tle</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN1363"><span class='Ref_to_Struct'>TargetEntry</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN330"><span class='Ref_To_Local'>l</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="parse_target.c.html#LN35"><span class='Ref_to_Proto'>markTargetListOrigin</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN328"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN334"><span class='Ref_To_Local'>tle</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="parse_target.c.html#LN334"><span class='Ref_To_Local'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1366"><span class='Ref_to_Member'>expr</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * markTargetListOrigin() 
 *      If 'var' is a Var of a plain relation, mark 'tle' with its origin 
 * 
 * levelsup is an extra offset to interpret the Var's varlevelsup correctly. 
 * 
 * This is split out so it can recurse for join references.  Note that we 
 * do not drill down into views, but report the view as the column owner. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN350"></a><span class='Declare_Function'>markTargetListOrigin</span><span class='Parentheses'>(</span><a href="../../include/parser/parse_node.h.html#LN164"><span class='Ref_to_Struct'>ParseState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pstate</span><span class='Delimiter'>, </span><a href="../../include/nodes/primnodes.h.html#LN1363"><span class='Ref_to_Struct'>TargetEntry</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tle</span><span class='Delimiter'>, 
</span><a name="LN351"></a>                     <a href="../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>var</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>levelsup</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN353"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>netlevelsup</span><span class='Delimiter'>; 
</span><a name="LN354"></a>    <a href="../../include/nodes/parsenodes.h.html#LN932"><span class='Ref_to_Struct'>RangeTblEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>rte</span><span class='Delimiter'>; 
</span><a name="LN355"></a>    <a href="../../include/access/attnum.h.html#LN20"><span class='Ref_to_Typedef'>AttrNumber</span></a>  <span class='Declare_Local'>attnum</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="parse_target.c.html#LN351"><span class='Ref_to_Parameter'>var</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL </span><span class='Operator'>|| !</span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN351"><span class='Ref_to_Parameter'>var</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a><span class='Parentheses'>))</span> 
        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <a href="parse_target.c.html#LN353"><span class='Ref_To_Local'>netlevelsup</span></a> <span class='Operator'>= </span><a href="parse_target.c.html#LN351"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN172"><span class='Ref_to_Member'>varlevelsup</span></a> <span class='Operator'>+ </span><a href="parse_target.c.html#LN351"><span class='Ref_to_Parameter'>levelsup</span></a><span class='Delimiter'>; 
</span>    <a href="parse_target.c.html#LN354"><span class='Ref_To_Local'>rte</span></a> <span class='Operator'>= </span><a href="../../include/parser/parse_relation.h.html#LN50"><span class='Ref_to_Proto'>GetRTEByRangeTablePosn</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN350"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN351"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN165"><span class='Ref_to_Member'>varno</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN353"><span class='Ref_To_Local'>netlevelsup</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="parse_target.c.html#LN355"><span class='Ref_To_Local'>attnum</span></a> <span class='Operator'>= </span><a href="parse_target.c.html#LN351"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN167"><span class='Ref_to_Member'>varattno</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="parse_target.c.html#LN354"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN936"><span class='Ref_to_Member'>rtekind</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>case</span> <a href="../../include/nodes/parsenodes.h.html#LN922"><span class='Ref_to_EnumConst'>RTE_RELATION</span></a><span class='Operator'>: 
</span>            <span class='Comment_Multi_Line'>/* It's a table or view, report it */ 
</span>            <a href="parse_target.c.html#LN350"><span class='Ref_to_Parameter'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1371"><span class='Ref_to_Member'>resorigtbl</span></a> <span class='Operator'>= </span><a href="parse_target.c.html#LN354"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN947"><span class='Ref_to_Member'>relid</span></a><span class='Delimiter'>; 
</span>            <a href="parse_target.c.html#LN350"><span class='Ref_to_Parameter'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1372"><span class='Ref_to_Member'>resorigcol</span></a> <span class='Operator'>= </span><a href="parse_target.c.html#LN355"><span class='Ref_To_Local'>attnum</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../include/nodes/parsenodes.h.html#LN923"><span class='Ref_to_EnumConst'>RTE_SUBQUERY</span></a><span class='Operator'>: 
</span>            <span class='Comment_Multi_Line'>/* Subselect-in-FROM: copy up from the subselect */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="parse_target.c.html#LN355"><span class='Ref_To_Local'>attnum</span></a> <span class='Operator'>!= </span><a href="../../include/access/attnum.h.html#LN22"><span class='Ref_to_Const'>InvalidAttrNumber</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span><a name="LN374"></a>                <a href="../../include/nodes/primnodes.h.html#LN1363"><span class='Ref_to_Struct'>TargetEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>ste</span> <span class='Operator'>= </span><a href="../../include/parser/parsetree.h.html#LN69"><span class='Ref_to_Proto'>get_tle_by_resno</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN354"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN954"><span class='Ref_to_Member'>subquery</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN137"><span class='Ref_to_Member'>targetList</span></a><span class='Delimiter'>, 
</span>                                                    <a href="parse_target.c.html#LN355"><span class='Ref_To_Local'>attnum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="parse_target.c.html#LN374"><span class='Ref_To_Local'>ste</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL </span><span class='Operator'>|| </span><a href="parse_target.c.html#LN374"><span class='Ref_To_Local'>ste</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1373"><span class='Ref_to_Member'>resjunk</span></a><span class='Parentheses'>) 
</span>                    <a href="../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"subquery %s does not have attribute %d"</span><span class='Delimiter'>, 
</span>                         <a href="parse_target.c.html#LN354"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN1023"><span class='Ref_to_Member'>eref</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN41"><span class='Ref_to_Member'>aliasname</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN355"><span class='Ref_To_Local'>attnum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="parse_target.c.html#LN350"><span class='Ref_to_Parameter'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1371"><span class='Ref_to_Member'>resorigtbl</span></a> <span class='Operator'>= </span><a href="parse_target.c.html#LN374"><span class='Ref_To_Local'>ste</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1371"><span class='Ref_to_Member'>resorigtbl</span></a><span class='Delimiter'>; 
</span>                <a href="parse_target.c.html#LN350"><span class='Ref_to_Parameter'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1372"><span class='Ref_to_Member'>resorigcol</span></a> <span class='Operator'>= </span><a href="parse_target.c.html#LN374"><span class='Ref_To_Local'>ste</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1372"><span class='Ref_to_Member'>resorigcol</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../include/nodes/parsenodes.h.html#LN924"><span class='Ref_to_EnumConst'>RTE_JOIN</span></a><span class='Operator'>: 
</span>            <span class='Comment_Multi_Line'>/* Join RTE --- recursively inspect the alias variable */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="parse_target.c.html#LN355"><span class='Ref_To_Local'>attnum</span></a> <span class='Operator'>!= </span><a href="../../include/access/attnum.h.html#LN22"><span class='Ref_to_Const'>InvalidAttrNumber</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span><a name="LN388"></a>                <a href="../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>aliasvar</span><span class='Delimiter'>; 
</span> 
                <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="parse_target.c.html#LN355"><span class='Ref_To_Local'>attnum</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="parse_target.c.html#LN355"><span class='Ref_To_Local'>attnum</span></a> <span class='Operator'>&LT;= </span><a href="../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN354"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN975"><span class='Ref_to_Member'>joinaliasvars</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="parse_target.c.html#LN388"><span class='Ref_To_Local'>aliasvar</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/nodes/pg_list.h.html#LN223"><span class='Ref_to_Proto'>list_nth</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN354"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN975"><span class='Ref_to_Member'>joinaliasvars</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN355"><span class='Ref_To_Local'>attnum</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Comment_Multi_Line'>/* We intentionally don't strip implicit coercions here */ 
</span>                <a href="parse_target.c.html#LN35"><span class='Ref_to_Proto'>markTargetListOrigin</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN350"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN350"><span class='Ref_to_Parameter'>tle</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN388"><span class='Ref_To_Local'>aliasvar</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN353"><span class='Ref_To_Local'>netlevelsup</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../include/nodes/parsenodes.h.html#LN925"><span class='Ref_to_EnumConst'>RTE_FUNCTION</span></a><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="../../include/nodes/parsenodes.h.html#LN927"><span class='Ref_to_EnumConst'>RTE_VALUES</span></a><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="../../include/nodes/parsenodes.h.html#LN926"><span class='Ref_to_EnumConst'>RTE_TABLEFUNC</span></a><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="../../include/nodes/parsenodes.h.html#LN929"><span class='Ref_to_EnumConst'>RTE_NAMEDTUPLESTORE</span></a><span class='Operator'>: 
</span>            <span class='Comment_Multi_Line'>/* not a simple relation, leave it unmarked */ 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../include/nodes/parsenodes.h.html#LN928"><span class='Ref_to_EnumConst'>RTE_CTE</span></a><span class='Operator'>: 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * CTE reference: copy up from the subquery, if possible. If the 
             * RTE is a recursive self-reference then we can't do anything 
             * because we haven't finished analyzing it yet. However, it's no 
             * big loss because we must be down inside the recursive term of a 
             * recursive CTE, and so any markings on the current targetlist 
             * are not going to affect the results anyway. 
             */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="parse_target.c.html#LN355"><span class='Ref_To_Local'>attnum</span></a> <span class='Operator'>!= </span><a href="../../include/access/attnum.h.html#LN22"><span class='Ref_to_Const'>InvalidAttrNumber</span></a> <span class='Operator'>&& !</span><a href="parse_target.c.html#LN354"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN1003"><span class='Ref_to_Member'>self_reference</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span><a name="LN414"></a>                <a href="../../include/nodes/parsenodes.h.html#LN1339"><span class='Ref_to_Struct'>CommonTableExpr</span></a> <span class='Operator'>*</span><span class='Declare_Local'>cte</span> <span class='Operator'>= </span><a href="../../include/parser/parse_relation.h.html#LN53"><span class='Ref_to_Proto'>GetCTEForRTE</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN350"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN354"><span class='Ref_To_Local'>rte</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN353"><span class='Ref_To_Local'>netlevelsup</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN415"></a>                <a href="../../include/nodes/primnodes.h.html#LN1363"><span class='Ref_to_Struct'>TargetEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>ste</span><span class='Delimiter'>; 
</span> 
                <a href="parse_target.c.html#LN415"><span class='Ref_To_Local'>ste</span></a> <span class='Operator'>= </span><a href="../../include/parser/parsetree.h.html#LN69"><span class='Ref_to_Proto'>get_tle_by_resno</span></a><span class='Parentheses'>(</span><a href="../../include/nodes/parsenodes.h.html#LN1358"><span class='Ref_to_Macro'>GetCTETargetList</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN414"><span class='Ref_To_Local'>cte</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="parse_target.c.html#LN355"><span class='Ref_To_Local'>attnum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="parse_target.c.html#LN415"><span class='Ref_To_Local'>ste</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL </span><span class='Operator'>|| </span><a href="parse_target.c.html#LN415"><span class='Ref_To_Local'>ste</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1373"><span class='Ref_to_Member'>resjunk</span></a><span class='Parentheses'>) 
</span>                    <a href="../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"subquery %s does not have attribute %d"</span><span class='Delimiter'>, 
</span>                         <a href="parse_target.c.html#LN354"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN1023"><span class='Ref_to_Member'>eref</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN41"><span class='Ref_to_Member'>aliasname</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN355"><span class='Ref_To_Local'>attnum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="parse_target.c.html#LN350"><span class='Ref_to_Parameter'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1371"><span class='Ref_to_Member'>resorigtbl</span></a> <span class='Operator'>= </span><a href="parse_target.c.html#LN415"><span class='Ref_To_Local'>ste</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1371"><span class='Ref_to_Member'>resorigtbl</span></a><span class='Delimiter'>; 
</span>                <a href="parse_target.c.html#LN350"><span class='Ref_to_Parameter'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1372"><span class='Ref_to_Member'>resorigcol</span></a> <span class='Operator'>= </span><a href="parse_target.c.html#LN415"><span class='Ref_To_Local'>ste</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1372"><span class='Ref_to_Member'>resorigcol</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch rte-&GT;rtekind &raquo; </span> 
<span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end markTargetListOrigin &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* 
 * transformAssignedExpr() 
 *  This is used in INSERT and UPDATE statements only.  It prepares an 
 *  expression for assignment to a column of the target table. 
 *  This includes coercing the given value to the target column's type 
 *  (if necessary), and dealing with any subfield names or subscripts 
 *  attached to the target column itself.  The input expression has 
 *  already been through transformExpr(). 
 * 
 * pstate       parse state 
 * expr         expression to be modified 
 * exprKind     indicates which type of statement we're dealing with 
 * colname      target column name (ie, name of attribute to be assigned to) 
 * attrno       target attribute number 
 * indirection  subscripts/field names for target column, if any 
 * location     error cursor position for the target column, or -1 
 * 
 * Returns the modified expression. 
 * 
 * Note: location points at the target column name (SET target or INSERT 
 * column name list entry), and must therefore be -1 in an INSERT that 
 * omits the column name list.  So we should usually prefer to use 
 * exprLocation(expr) for errors that can happen in a default INSERT. 
 */ 
</span><a href="../../include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a> <span class='Operator'>* 
</span><a name="LN454"></a><span class='Declare_Function'>transformAssignedExpr</span><span class='Parentheses'>(</span><a href="../../include/parser/parse_node.h.html#LN164"><span class='Ref_to_Struct'>ParseState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pstate</span><span class='Delimiter'>, 
</span><a name="LN455"></a>                      <a href="../../include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>expr</span><span class='Delimiter'>, 
</span><a name="LN456"></a>                      <a href="../../include/parser/parse_node.h.html#LN32"><span class='Ref_to_Enum'>ParseExprKind</span></a> <span class='Declare_Parameter'>exprKind</span><span class='Delimiter'>, 
</span><a name="LN457"></a>                      <span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>colname</span><span class='Delimiter'>, 
</span><a name="LN458"></a>                      <span class='Keyword'>int </span><span class='Declare_Parameter'>attrno</span><span class='Delimiter'>, 
</span><a name="LN459"></a>                      <a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>indirection</span><span class='Delimiter'>, 
</span><a name="LN460"></a>                      <span class='Keyword'>int </span><span class='Declare_Parameter'>location</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN462"></a>    <a href="../../include/utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a>    <span class='Declare_Local'>rd</span> <span class='Operator'>= </span><a href="parse_target.c.html#LN454"><span class='Ref_to_Parameter'>pstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/parser/parse_node.h.html#LN178"><span class='Ref_to_Member'>p_target_relation</span></a><span class='Delimiter'>; 
</span><a name="LN463"></a>    <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>type_id</span><span class='Delimiter'>;</span>        <span class='Comment_Single_Line'>/* type of value provided */ 
</span><a name="LN464"></a>    <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>attrtype</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* type of target column */ 
</span><a name="LN465"></a>    <a href="../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>attrtypmod</span><span class='Delimiter'>; 
</span><a name="LN466"></a>    <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>attrcollation</span><span class='Delimiter'>;</span>  <span class='Comment_Single_Line'>/* collation of target column */ 
</span><a name="LN467"></a>    <a href="../../include/parser/parse_node.h.html#LN32"><span class='Ref_to_Enum'>ParseExprKind</span></a> <span class='Declare_Local'>sv_expr_kind</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Save and restore identity of expression type we're parsing.  We must 
     * set p_expr_kind here because we can parse subscripts without going 
     * through transformExpr(). 
     */ 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="parse_target.c.html#LN456"><span class='Ref_to_Parameter'>exprKind</span></a> <span class='Operator'>!= </span><a href="../../include/parser/parse_node.h.html#LN34"><span class='Ref_to_EnumConst'>EXPR_KIND_NONE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="parse_target.c.html#LN467"><span class='Ref_To_Local'>sv_expr_kind</span></a> <span class='Operator'>= </span><a href="parse_target.c.html#LN454"><span class='Ref_to_Parameter'>pstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/parser/parse_node.h.html#LN182"><span class='Ref_to_Member'>p_expr_kind</span></a><span class='Delimiter'>; 
</span>    <a href="parse_target.c.html#LN454"><span class='Ref_to_Parameter'>pstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/parser/parse_node.h.html#LN182"><span class='Ref_to_Member'>p_expr_kind</span></a> <span class='Operator'>= </span><a href="parse_target.c.html#LN456"><span class='Ref_to_Parameter'>exprKind</span></a><span class='Delimiter'>; 
</span> 
    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="parse_target.c.html#LN462"><span class='Ref_To_Local'>rd</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="parse_target.c.html#LN458"><span class='Ref_to_Parameter'>attrno</span></a> <span class='Operator'>&LT;= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_FEATURE_NOT_SUPPORTED<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"cannot assign to system column \"%s\""</span><span class='Delimiter'>, 
</span>                        <a href="parse_target.c.html#LN457"><span class='Ref_to_Parameter'>colname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../../pl/plpgsql/src/pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN454"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN460"><span class='Ref_to_Parameter'>location</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <a href="parse_target.c.html#LN464"><span class='Ref_To_Local'>attrtype</span></a> <span class='Operator'>= </span><a href="../../include/parser/parse_relation.h.html#LN127"><span class='Ref_to_Proto'>attnumTypeId</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN462"><span class='Ref_To_Local'>rd</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN458"><span class='Ref_to_Parameter'>attrno</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="parse_target.c.html#LN465"><span class='Ref_To_Local'>attrtypmod</span></a> <span class='Operator'>= </span><a href="parse_target.c.html#LN462"><span class='Ref_To_Local'>rd</span></a><span class='Operator'>-&GT;</span><a href="../../include/utils/rel.h.html#LN114"><span class='Ref_to_Member'>rd_att</span></a><span class='Operator'>-&GT;</span><a href="../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="parse_target.c.html#LN458"><span class='Ref_to_Parameter'>attrno</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>atttypmod<span class='Delimiter'>; 
</span>    <a href="parse_target.c.html#LN466"><span class='Ref_To_Local'>attrcollation</span></a> <span class='Operator'>= </span><a href="parse_target.c.html#LN462"><span class='Ref_To_Local'>rd</span></a><span class='Operator'>-&GT;</span><a href="../../include/utils/rel.h.html#LN114"><span class='Ref_to_Member'>rd_att</span></a><span class='Operator'>-&GT;</span><a href="../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="parse_target.c.html#LN458"><span class='Ref_to_Parameter'>attrno</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attcollation<span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If the expression is a DEFAULT placeholder, insert the attribute's 
     * type/typmod/collation into it so that exprType etc will report the 
     * right things.  (We expect that the eventually substituted default 
     * expression will in fact have this type and typmod.  The collation 
     * likely doesn't matter, but let's set it correctly anyway.)  Also, 
     * reject trying to update a subfield or array element with DEFAULT, since 
     * there can't be any default for portions of a column. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="parse_target.c.html#LN455"><span class='Ref_to_Parameter'>expr</span></a> <span class='Operator'>&& </span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN455"><span class='Ref_to_Parameter'>expr</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/primnodes.h.html#LN1251"><span class='Ref_to_Struct'>SetToDefault</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN500"></a>        <a href="../../include/nodes/primnodes.h.html#LN1251"><span class='Ref_to_Struct'>SetToDefault</span></a> <span class='Operator'>*</span><span class='Declare_Local'>def</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN1251"><span class='Ref_to_Struct'>SetToDefault</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="parse_target.c.html#LN455"><span class='Ref_to_Parameter'>expr</span></a><span class='Delimiter'>; 
</span> 
        <a href="parse_target.c.html#LN500"><span class='Ref_To_Local'>def</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1254"><span class='Ref_to_Member'>typeId</span></a> <span class='Operator'>= </span><a href="parse_target.c.html#LN464"><span class='Ref_To_Local'>attrtype</span></a><span class='Delimiter'>; 
</span>        <a href="parse_target.c.html#LN500"><span class='Ref_To_Local'>def</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1255"><span class='Ref_to_Member'>typeMod</span></a> <span class='Operator'>= </span><a href="parse_target.c.html#LN465"><span class='Ref_To_Local'>attrtypmod</span></a><span class='Delimiter'>; 
</span>        <a href="parse_target.c.html#LN500"><span class='Ref_To_Local'>def</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1256"><span class='Ref_to_Member'>collation</span></a> <span class='Operator'>= </span><a href="parse_target.c.html#LN466"><span class='Ref_To_Local'>attrcollation</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="parse_target.c.html#LN459"><span class='Ref_to_Parameter'>indirection</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="../../include/nodes/pg_list.h.html#LN110"><span class='Ref_to_Macro'>linitial</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN459"><span class='Ref_to_Parameter'>indirection</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="../../include/nodes/parsenodes.h.html#LN378"><span class='Ref_to_Struct'>A_Indices</span></a><span class='Parentheses'>))</span> 
                <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_FEATURE_NOT_SUPPORTED<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"cannot set an array element to DEFAULT"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../../pl/plpgsql/src/pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN454"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN460"><span class='Ref_to_Parameter'>location</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
                <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_FEATURE_NOT_SUPPORTED<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"cannot set a subfield to DEFAULT"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../../pl/plpgsql/src/pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN454"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN460"><span class='Ref_to_Parameter'>location</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if expr&&IsA(expr,SetToD... &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* Now we can use exprType() safely. */ 
</span>    <a href="parse_target.c.html#LN463"><span class='Ref_To_Local'>type_id</span></a> <span class='Operator'>= </span><a href="../../include/nodes/nodeFuncs.h.html#LN31"><span class='Ref_to_Proto'>exprType</span></a><span class='Parentheses'>((</span><a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="parse_target.c.html#LN455"><span class='Ref_to_Parameter'>expr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If there is indirection on the target column, prepare an array or 
     * subfield assignment expression.  This will generate a new column value 
     * that the source value has been inserted into, which can then be placed 
     * in the new tuple constructed by INSERT or UPDATE. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="parse_target.c.html#LN459"><span class='Ref_to_Parameter'>indirection</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN531"></a>        <a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>colVar</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="parse_target.c.html#LN454"><span class='Ref_to_Parameter'>pstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/parser/parse_node.h.html#LN180"><span class='Ref_to_Member'>p_is_insert</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * The command is INSERT INTO table (col.something) ... so there 
             * is not really a source value to work with. Insert a NULL 
             * constant as the source value. 
             */ 
</span>            <a href="parse_target.c.html#LN531"><span class='Ref_To_Local'>colVar</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/nodes/makefuncs.h.html#LN57"><span class='Ref_to_Proto'>makeNullConst</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN464"><span class='Ref_To_Local'>attrtype</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN465"><span class='Ref_To_Local'>attrtypmod</span></a><span class='Delimiter'>, 
</span>                                            <a href="parse_target.c.html#LN466"><span class='Ref_To_Local'>attrcollation</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * Build a Var for the column to be updated. 
             */ 
</span>            <a href="parse_target.c.html#LN531"><span class='Ref_To_Local'>colVar</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="parse_node.c.html#LN187"><span class='Ref_to_Func'>make_var</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN454"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, 
</span>                                       <a href="parse_target.c.html#LN454"><span class='Ref_to_Parameter'>pstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/parser/parse_node.h.html#LN179"><span class='Ref_to_Member'>p_target_rangetblentry</span></a><span class='Delimiter'>, 
</span>                                       <a href="parse_target.c.html#LN458"><span class='Ref_to_Parameter'>attrno</span></a><span class='Delimiter'>, 
</span>                                       <a href="parse_target.c.html#LN460"><span class='Ref_to_Parameter'>location</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <a href="parse_target.c.html#LN455"><span class='Ref_to_Parameter'>expr</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) 
</span>            <a href="parse_target.c.html#LN37"><span class='Ref_to_Proto'>transformAssignmentIndirection</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN454"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, 
</span>                                           <a href="parse_target.c.html#LN531"><span class='Ref_To_Local'>colVar</span></a><span class='Delimiter'>, 
</span>                                           <a href="parse_target.c.html#LN457"><span class='Ref_to_Parameter'>colname</span></a><span class='Delimiter'>, 
</span>                                           <span class='Boolean'>false</span><span class='Delimiter'>, 
</span>                                           <a href="parse_target.c.html#LN464"><span class='Ref_To_Local'>attrtype</span></a><span class='Delimiter'>, 
</span>                                           <a href="parse_target.c.html#LN465"><span class='Ref_To_Local'>attrtypmod</span></a><span class='Delimiter'>, 
</span>                                           <a href="parse_target.c.html#LN466"><span class='Ref_To_Local'>attrcollation</span></a><span class='Delimiter'>, 
</span>                                           <a href="../../include/nodes/pg_list.h.html#LN75"><span class='Ref_to_Func'>list_head</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN459"><span class='Ref_to_Parameter'>indirection</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                           <span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="parse_target.c.html#LN455"><span class='Ref_to_Parameter'>expr</span></a><span class='Delimiter'>, 
</span>                                           <a href="parse_target.c.html#LN460"><span class='Ref_to_Parameter'>location</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if indirection &raquo; </span> 
    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * For normal non-qualified target column, do type checking and 
         * coercion. 
         */ 
</span><a name="LN572"></a>        <a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>orig_expr</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="parse_target.c.html#LN455"><span class='Ref_to_Parameter'>expr</span></a><span class='Delimiter'>; 
</span> 
        <a href="parse_target.c.html#LN455"><span class='Ref_to_Parameter'>expr</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) 
</span>            <a href="../../include/parser/parse_coerce.h.html#LN37"><span class='Ref_to_Proto'>coerce_to_target_type</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN454"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, 
</span>                                  <a href="parse_target.c.html#LN572"><span class='Ref_To_Local'>orig_expr</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN463"><span class='Ref_To_Local'>type_id</span></a><span class='Delimiter'>, 
</span>                                  <a href="parse_target.c.html#LN464"><span class='Ref_To_Local'>attrtype</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN465"><span class='Ref_To_Local'>attrtypmod</span></a><span class='Delimiter'>, 
</span>                                  <a href="../../include/nodes/primnodes.h.html#LN421"><span class='Ref_to_EnumConst'>COERCION_ASSIGNMENT</span></a><span class='Delimiter'>, 
</span>                                  <a href="../../include/nodes/primnodes.h.html#LN438"><span class='Ref_to_EnumConst'>COERCE_IMPLICIT_CAST</span></a><span class='Delimiter'>, 
</span>                                  <span class='Operator'>-</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="parse_target.c.html#LN455"><span class='Ref_to_Parameter'>expr</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_DATATYPE_MISMATCH<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"column \"%s\" is of type %s"</span> 
                            <span class='String'>" but expression is of type %s"</span><span class='Delimiter'>, 
</span>                            <a href="parse_target.c.html#LN457"><span class='Ref_to_Parameter'>colname</span></a><span class='Delimiter'>, 
</span>                            <a href="../utils/adt/format_type.c.html#LN92"><span class='Ref_to_Func'>format_type_be</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN464"><span class='Ref_To_Local'>attrtype</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                            <a href="../utils/adt/format_type.c.html#LN92"><span class='Ref_to_Func'>format_type_be</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN463"><span class='Ref_To_Local'>type_id</span></a><span class='Parentheses'>))</span><span class='Delimiter'>, 
</span>                 <a href="../utils/error/elog.c.html#LN985"><span class='Ref_to_Func'>errhint</span></a><span class='Parentheses'>(</span><span class='String'>"You will need to rewrite or cast the expression."</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../../pl/plpgsql/src/pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN454"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/nodeFuncs.h.html#LN43"><span class='Ref_to_Proto'>exprLocation</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN572"><span class='Ref_To_Local'>orig_expr</span></a><span class='Parentheses'>))))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
 
    <a href="parse_target.c.html#LN454"><span class='Ref_to_Parameter'>pstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/parser/parse_node.h.html#LN182"><span class='Ref_to_Member'>p_expr_kind</span></a> <span class='Operator'>= </span><a href="parse_target.c.html#LN467"><span class='Ref_To_Local'>sv_expr_kind</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="parse_target.c.html#LN455"><span class='Ref_to_Parameter'>expr</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end transformAssignedExpr &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* 
 * updateTargetListEntry() 
 *  This is used in UPDATE statements (and ON CONFLICT DO UPDATE) 
 *  only.  It prepares an UPDATE TargetEntry for assignment to a 
 *  column of the target table.  This includes coercing the given 
 *  value to the target column's type (if necessary), and dealing with 
 *  any subfield names or subscripts attached to the target column 
 *  itself. 
 * 
 * pstate       parse state 
 * tle          target list entry to be modified 
 * colname      target column name (ie, name of attribute to be assigned to) 
 * attrno       target attribute number 
 * indirection  subscripts/field names for target column, if any 
 * location     error cursor position (should point at column name), or -1 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN616"></a><span class='Declare_Function'>updateTargetListEntry</span><span class='Parentheses'>(</span><a href="../../include/parser/parse_node.h.html#LN164"><span class='Ref_to_Struct'>ParseState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pstate</span><span class='Delimiter'>, 
</span><a name="LN617"></a>                      <a href="../../include/nodes/primnodes.h.html#LN1363"><span class='Ref_to_Struct'>TargetEntry</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tle</span><span class='Delimiter'>, 
</span><a name="LN618"></a>                      <span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>colname</span><span class='Delimiter'>, 
</span><a name="LN619"></a>                      <span class='Keyword'>int </span><span class='Declare_Parameter'>attrno</span><span class='Delimiter'>, 
</span><a name="LN620"></a>                      <a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>indirection</span><span class='Delimiter'>, 
</span><a name="LN621"></a>                      <span class='Keyword'>int </span><span class='Declare_Parameter'>location</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Comment_Multi_Line'>/* Fix up expression as needed */ 
</span>    <a href="parse_target.c.html#LN617"><span class='Ref_to_Parameter'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1366"><span class='Ref_to_Member'>expr</span></a> <span class='Operator'>= </span><a href="../../include/parser/parse_target.h.html#LN28"><span class='Ref_to_Proto'>transformAssignedExpr</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN616"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, 
</span>                                      <a href="parse_target.c.html#LN617"><span class='Ref_to_Parameter'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1366"><span class='Ref_to_Member'>expr</span></a><span class='Delimiter'>, 
</span>                                      <a href="../../include/parser/parse_node.h.html#LN50"><span class='Ref_to_EnumConst'>EXPR_KIND_UPDATE_TARGET</span></a><span class='Delimiter'>, 
</span>                                      <a href="parse_target.c.html#LN618"><span class='Ref_to_Parameter'>colname</span></a><span class='Delimiter'>, 
</span>                                      <a href="parse_target.c.html#LN619"><span class='Ref_to_Parameter'>attrno</span></a><span class='Delimiter'>, 
</span>                                      <a href="parse_target.c.html#LN620"><span class='Ref_to_Parameter'>indirection</span></a><span class='Delimiter'>, 
</span>                                      <a href="parse_target.c.html#LN621"><span class='Ref_to_Parameter'>location</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Set the resno to identify the target column --- the rewriter and 
     * planner depend on this.  We also set the resname to identify the target 
     * column, but this is only for debugging purposes; it should not be 
     * relied on.  (In particular, it might be out of date in a stored rule.) 
     */ 
</span>    <a href="parse_target.c.html#LN617"><span class='Ref_to_Parameter'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1367"><span class='Ref_to_Member'>resno</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/access/attnum.h.html#LN20"><span class='Ref_to_Typedef'>AttrNumber</span></a><span class='Parentheses'>) </span><a href="parse_target.c.html#LN619"><span class='Ref_to_Parameter'>attrno</span></a><span class='Delimiter'>; 
</span>    <a href="parse_target.c.html#LN617"><span class='Ref_to_Parameter'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1368"><span class='Ref_to_Member'>resname</span></a> <span class='Operator'>= </span><a href="parse_target.c.html#LN618"><span class='Ref_to_Parameter'>colname</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end updateTargetListEntry &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* 
 * Process indirection (field selection or subscripting) of the target 
 * column in INSERT/UPDATE.  This routine recurses for multiple levels 
 * of indirection --- but note that several adjacent A_Indices nodes in 
 * the indirection list are treated as a single multidimensional subscript 
 * operation. 
 * 
 * In the initial call, basenode is a Var for the target column in UPDATE, 
 * or a null Const of the target's type in INSERT.  In recursive calls, 
 * basenode is NULL, indicating that a substitute node should be consed up if 
 * needed. 
 * 
 * targetName is the name of the field or subfield we're assigning to, and 
 * targetIsArray is true if we're subscripting it.  These are just for 
 * error reporting. 
 * 
 * targetTypeId, targetTypMod, targetCollation indicate the datatype and 
 * collation of the object to be assigned to (initially the target column, 
 * later some subobject). 
 * 
 * indirection is the sublist remaining to process.  When it's NULL, we're 
 * done recursing and can just coerce and return the RHS. 
 * 
 * rhs is the already-transformed value to be assigned; note it has not been 
 * coerced to any particular type. 
 * 
 * location is the cursor error position for any errors.  (Note: this points 
 * to the head of the target clause, eg "foo" in "foo.bar[baz]".  Later we 
 * might want to decorate indirection cells with their own location info, 
 * in which case the location argument could probably be dropped.) 
 */ 
</span><span class='Keyword'>static </span><a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>* 
</span><a name="LN675"></a><span class='Declare_Function'>transformAssignmentIndirection</span><span class='Parentheses'>(</span><a href="../../include/parser/parse_node.h.html#LN164"><span class='Ref_to_Struct'>ParseState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pstate</span><span class='Delimiter'>, 
</span><a name="LN676"></a>                               <a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>basenode</span><span class='Delimiter'>, 
</span><a name="LN677"></a>                               <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>targetName</span><span class='Delimiter'>, 
</span><a name="LN678"></a>                               <span class='Keyword'>bool </span><span class='Declare_Parameter'>targetIsArray</span><span class='Delimiter'>, 
</span><a name="LN679"></a>                               <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>targetTypeId</span><span class='Delimiter'>, 
</span><a name="LN680"></a>                               <a href="../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a> <span class='Declare_Parameter'>targetTypMod</span><span class='Delimiter'>, 
</span><a name="LN681"></a>                               <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>targetCollation</span><span class='Delimiter'>, 
</span><a name="LN682"></a>                               <a href="../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>indirection</span><span class='Delimiter'>, 
</span><a name="LN683"></a>                               <a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rhs</span><span class='Delimiter'>, 
</span><a name="LN684"></a>                               <span class='Keyword'>int </span><span class='Declare_Parameter'>location</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN686"></a>    <a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span><a name="LN687"></a>    <a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>subscripts</span> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span><a name="LN688"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>isSlice</span> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span><a name="LN689"></a>    <a href="../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="parse_target.c.html#LN682"><span class='Ref_to_Parameter'>indirection</span></a> <span class='Operator'>&& !</span><a href="parse_target.c.html#LN676"><span class='Ref_to_Parameter'>basenode</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Set up a substitution.  We reuse CaseTestExpr for this. */ 
</span><a name="LN694"></a>        <a href="../../include/nodes/primnodes.h.html#LN931"><span class='Ref_to_Struct'>CaseTestExpr</span></a> <span class='Operator'>*</span><span class='Declare_Local'>ctest</span> <span class='Operator'>= </span><a href="../../include/nodes/nodes.h.html#LN556"><span class='Ref_to_Macro'>makeNode</span></a><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN931"><span class='Ref_to_Struct'>CaseTestExpr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="parse_target.c.html#LN694"><span class='Ref_To_Local'>ctest</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN934"><span class='Ref_to_Member'>typeId</span></a> <span class='Operator'>= </span><a href="parse_target.c.html#LN679"><span class='Ref_to_Parameter'>targetTypeId</span></a><span class='Delimiter'>; 
</span>        <a href="parse_target.c.html#LN694"><span class='Ref_To_Local'>ctest</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN935"><span class='Ref_to_Member'>typeMod</span></a> <span class='Operator'>= </span><a href="parse_target.c.html#LN680"><span class='Ref_to_Parameter'>targetTypMod</span></a><span class='Delimiter'>; 
</span>        <a href="parse_target.c.html#LN694"><span class='Ref_To_Local'>ctest</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN936"><span class='Ref_to_Member'>collation</span></a> <span class='Operator'>= </span><a href="parse_target.c.html#LN681"><span class='Ref_to_Parameter'>targetCollation</span></a><span class='Delimiter'>; 
</span>        <a href="parse_target.c.html#LN676"><span class='Ref_to_Parameter'>basenode</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="parse_target.c.html#LN694"><span class='Ref_To_Local'>ctest</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * We have to split any field-selection operations apart from 
     * subscripting.  Adjacent A_Indices nodes have to be treated as a single 
     * multidimensional subscript operation. 
     */ 
</span>    <a href="../../include/nodes/pg_list.h.html#LN168"><span class='Ref_to_Macro'>for_each_cell</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN689"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN682"><span class='Ref_to_Parameter'>indirection</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN709"></a>        <a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>n</span> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN689"><span class='Ref_To_Local'>i</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN709"><span class='Ref_To_Local'>n</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/parsenodes.h.html#LN378"><span class='Ref_to_Struct'>A_Indices</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <a href="parse_target.c.html#LN687"><span class='Ref_To_Local'>subscripts</span></a> <span class='Operator'>= </span><a href="../nodes/list.c.html#LN126"><span class='Ref_to_Func'>lappend</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN687"><span class='Ref_To_Local'>subscripts</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN709"><span class='Ref_To_Local'>n</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(((</span><a href="../../include/nodes/parsenodes.h.html#LN378"><span class='Ref_to_Struct'>A_Indices</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="parse_target.c.html#LN709"><span class='Ref_To_Local'>n</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>is_slice<span class='Parentheses'>)</span> 
                <a href="parse_target.c.html#LN688"><span class='Ref_To_Local'>isSlice</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN709"><span class='Ref_To_Local'>n</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/parsenodes.h.html#LN367"><span class='Ref_to_Struct'>A_Star</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_FEATURE_NOT_SUPPORTED<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"row expansion via \"*\" is not supported here"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../../pl/plpgsql/src/pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN675"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN684"><span class='Ref_to_Parameter'>location</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span><a name="LN726"></a>            <a href="../../include/nodes/primnodes.h.html#LN763"><span class='Ref_to_Struct'>FieldStore</span></a> <span class='Operator'>*</span><span class='Declare_Local'>fstore</span><span class='Delimiter'>; 
</span><a name="LN727"></a>            <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>typrelid</span><span class='Delimiter'>; 
</span><a name="LN728"></a>            <a href="../../include/access/attnum.h.html#LN20"><span class='Ref_to_Typedef'>AttrNumber</span></a>  <span class='Declare_Local'>attnum</span><span class='Delimiter'>; 
</span><a name="LN729"></a>            <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>fieldTypeId</span><span class='Delimiter'>; 
</span><a name="LN730"></a>            <a href="../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>fieldTypMod</span><span class='Delimiter'>; 
</span><a name="LN731"></a>            <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>fieldCollation</span><span class='Delimiter'>; 
</span> 
            <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN709"><span class='Ref_To_Local'>n</span></a><span class='Delimiter'>, </span>String<span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* process subscripts before this field selection */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="parse_target.c.html#LN687"><span class='Ref_To_Local'>subscripts</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* recurse, and then return because we're done */ 
</span>                <span class='Control'>return</span> <a href="parse_target.c.html#LN47"><span class='Ref_to_Proto'>transformAssignmentSubscripts</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN675"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, 
</span>                                                     <a href="parse_target.c.html#LN676"><span class='Ref_to_Parameter'>basenode</span></a><span class='Delimiter'>, 
</span>                                                     <a href="parse_target.c.html#LN677"><span class='Ref_to_Parameter'>targetName</span></a><span class='Delimiter'>, 
</span>                                                     <a href="parse_target.c.html#LN679"><span class='Ref_to_Parameter'>targetTypeId</span></a><span class='Delimiter'>, 
</span>                                                     <a href="parse_target.c.html#LN680"><span class='Ref_to_Parameter'>targetTypMod</span></a><span class='Delimiter'>, 
</span>                                                     <a href="parse_target.c.html#LN681"><span class='Ref_to_Parameter'>targetCollation</span></a><span class='Delimiter'>, 
</span>                                                     <a href="parse_target.c.html#LN687"><span class='Ref_To_Local'>subscripts</span></a><span class='Delimiter'>, 
</span>                                                     <a href="parse_target.c.html#LN688"><span class='Ref_To_Local'>isSlice</span></a><span class='Delimiter'>, 
</span>                                                     <a href="parse_target.c.html#LN689"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, 
</span>                                                     <a href="parse_target.c.html#LN683"><span class='Ref_to_Parameter'>rhs</span></a><span class='Delimiter'>, 
</span>                                                     <a href="parse_target.c.html#LN684"><span class='Ref_to_Parameter'>location</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
            <span class='Comment_Multi_Line'>/* No subscripts, so can process field selection here */ 
</span> 
            <a href="parse_target.c.html#LN727"><span class='Ref_To_Local'>typrelid</span></a> <span class='Operator'>= </span><a href="../../include/parser/parse_type.h.html#LN47"><span class='Ref_to_Proto'>typeidTypeRelid</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN679"><span class='Ref_to_Parameter'>targetTypeId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="parse_target.c.html#LN727"><span class='Ref_To_Local'>typrelid</span></a><span class='Parentheses'>) 
</span>                <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_DATATYPE_MISMATCH<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"cannot assign to field \"%s\" of column \"%s\" because its type %s is not a composite type"</span><span class='Delimiter'>, 
</span>                                <a href="../../include/nodes/value.h.html#LN53"><span class='Ref_to_Macro'>strVal</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN709"><span class='Ref_To_Local'>n</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="parse_target.c.html#LN677"><span class='Ref_to_Parameter'>targetName</span></a><span class='Delimiter'>, 
</span>                                <a href="../utils/adt/format_type.c.html#LN92"><span class='Ref_to_Func'>format_type_be</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN679"><span class='Ref_to_Parameter'>targetTypeId</span></a><span class='Parentheses'>))</span><span class='Delimiter'>, 
</span>                         <a href="../../pl/plpgsql/src/pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN675"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN684"><span class='Ref_to_Parameter'>location</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
            <a href="parse_target.c.html#LN728"><span class='Ref_To_Local'>attnum</span></a> <span class='Operator'>= </span><a href="../../include/utils/lsyscache.h.html#LN87"><span class='Ref_to_Proto'>get_attnum</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN727"><span class='Ref_To_Local'>typrelid</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/value.h.html#LN53"><span class='Ref_to_Macro'>strVal</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN709"><span class='Ref_To_Local'>n</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="parse_target.c.html#LN728"><span class='Ref_To_Local'>attnum</span></a> <span class='Operator'>== </span><a href="../../include/access/attnum.h.html#LN22"><span class='Ref_to_Const'>InvalidAttrNumber</span></a><span class='Parentheses'>) 
</span>                <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_UNDEFINED_COLUMN<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"cannot assign to field \"%s\" of column \"%s\" because there is no such column in data type %s"</span><span class='Delimiter'>, 
</span>                                <a href="../../include/nodes/value.h.html#LN53"><span class='Ref_to_Macro'>strVal</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN709"><span class='Ref_To_Local'>n</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="parse_target.c.html#LN677"><span class='Ref_to_Parameter'>targetName</span></a><span class='Delimiter'>, 
</span>                                <a href="../utils/adt/format_type.c.html#LN92"><span class='Ref_to_Func'>format_type_be</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN679"><span class='Ref_to_Parameter'>targetTypeId</span></a><span class='Parentheses'>))</span><span class='Delimiter'>, 
</span>                         <a href="../../pl/plpgsql/src/pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN675"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN684"><span class='Ref_to_Parameter'>location</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="parse_target.c.html#LN728"><span class='Ref_To_Local'>attnum</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_UNDEFINED_COLUMN<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"cannot assign to system column \"%s\""</span><span class='Delimiter'>, 
</span>                                <a href="../../include/nodes/value.h.html#LN53"><span class='Ref_to_Macro'>strVal</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN709"><span class='Ref_To_Local'>n</span></a><span class='Parentheses'>))</span><span class='Delimiter'>, 
</span>                         <a href="../../pl/plpgsql/src/pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN675"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN684"><span class='Ref_to_Parameter'>location</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
            <a href="../../include/utils/lsyscache.h.html#LN91"><span class='Ref_to_Proto'>get_atttypetypmodcoll</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN727"><span class='Ref_To_Local'>typrelid</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN728"><span class='Ref_To_Local'>attnum</span></a><span class='Delimiter'>, 
</span>                                <span class='Operator'>&</span><a href="parse_target.c.html#LN729"><span class='Ref_To_Local'>fieldTypeId</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="parse_target.c.html#LN730"><span class='Ref_To_Local'>fieldTypMod</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="parse_target.c.html#LN731"><span class='Ref_To_Local'>fieldCollation</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* recurse to create appropriate RHS for field assign */ 
</span>            <a href="parse_target.c.html#LN683"><span class='Ref_to_Parameter'>rhs</span></a> <span class='Operator'>= </span><a href="parse_target.c.html#LN37"><span class='Ref_to_Proto'>transformAssignmentIndirection</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN675"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, 
</span>                                                 <span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                                                 <a href="../../include/nodes/value.h.html#LN53"><span class='Ref_to_Macro'>strVal</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN709"><span class='Ref_To_Local'>n</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                                 <span class='Boolean'>false</span><span class='Delimiter'>, 
</span>                                                 <a href="parse_target.c.html#LN729"><span class='Ref_To_Local'>fieldTypeId</span></a><span class='Delimiter'>, 
</span>                                                 <a href="parse_target.c.html#LN730"><span class='Ref_To_Local'>fieldTypMod</span></a><span class='Delimiter'>, 
</span>                                                 <a href="parse_target.c.html#LN731"><span class='Ref_To_Local'>fieldCollation</span></a><span class='Delimiter'>, 
</span>                                                 <a href="../../include/nodes/pg_list.h.html#LN104"><span class='Ref_to_Macro'>lnext</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN689"><span class='Ref_To_Local'>i</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                                 <a href="parse_target.c.html#LN683"><span class='Ref_to_Parameter'>rhs</span></a><span class='Delimiter'>, 
</span>                                                 <a href="parse_target.c.html#LN684"><span class='Ref_to_Parameter'>location</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* and build a FieldStore node */ 
</span>            <a href="parse_target.c.html#LN726"><span class='Ref_To_Local'>fstore</span></a> <span class='Operator'>= </span><a href="../../include/nodes/nodes.h.html#LN556"><span class='Ref_to_Macro'>makeNode</span></a><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN763"><span class='Ref_to_Struct'>FieldStore</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="parse_target.c.html#LN726"><span class='Ref_To_Local'>fstore</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN766"><span class='Ref_to_Member'>arg</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="parse_target.c.html#LN676"><span class='Ref_to_Parameter'>basenode</span></a><span class='Delimiter'>; 
</span>            <a href="parse_target.c.html#LN726"><span class='Ref_To_Local'>fstore</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN767"><span class='Ref_to_Member'>newvals</span></a> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN138"><span class='Ref_to_Macro'>list_make1</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN683"><span class='Ref_to_Parameter'>rhs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="parse_target.c.html#LN726"><span class='Ref_To_Local'>fstore</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN768"><span class='Ref_to_Member'>fieldnums</span></a> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN144"><span class='Ref_to_Macro'>list_make1_int</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN728"><span class='Ref_To_Local'>attnum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="parse_target.c.html#LN726"><span class='Ref_To_Local'>fstore</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN769"><span class='Ref_to_Member'>resulttype</span></a> <span class='Operator'>= </span><a href="parse_target.c.html#LN679"><span class='Ref_to_Parameter'>targetTypeId</span></a><span class='Delimiter'>; 
</span> 
            <span class='Control'>return</span> <span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="parse_target.c.html#LN726"><span class='Ref_To_Local'>fstore</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* process trailing subscripts, if any */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="parse_target.c.html#LN687"><span class='Ref_To_Local'>subscripts</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* recurse, and then return because we're done */ 
</span>        <span class='Control'>return</span> <a href="parse_target.c.html#LN47"><span class='Ref_to_Proto'>transformAssignmentSubscripts</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN675"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, 
</span>                                             <a href="parse_target.c.html#LN676"><span class='Ref_to_Parameter'>basenode</span></a><span class='Delimiter'>, 
</span>                                             <a href="parse_target.c.html#LN677"><span class='Ref_to_Parameter'>targetName</span></a><span class='Delimiter'>, 
</span>                                             <a href="parse_target.c.html#LN679"><span class='Ref_to_Parameter'>targetTypeId</span></a><span class='Delimiter'>, 
</span>                                             <a href="parse_target.c.html#LN680"><span class='Ref_to_Parameter'>targetTypMod</span></a><span class='Delimiter'>, 
</span>                                             <a href="parse_target.c.html#LN681"><span class='Ref_to_Parameter'>targetCollation</span></a><span class='Delimiter'>, 
</span>                                             <a href="parse_target.c.html#LN687"><span class='Ref_To_Local'>subscripts</span></a><span class='Delimiter'>, 
</span>                                             <a href="parse_target.c.html#LN688"><span class='Ref_To_Local'>isSlice</span></a><span class='Delimiter'>, 
</span>                                             <span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                                             <a href="parse_target.c.html#LN683"><span class='Ref_to_Parameter'>rhs</span></a><span class='Delimiter'>, 
</span>                                             <a href="parse_target.c.html#LN684"><span class='Ref_to_Parameter'>location</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* base case: just coerce RHS to match target type ID */ 
</span> 
    <a href="parse_target.c.html#LN686"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../include/parser/parse_coerce.h.html#LN37"><span class='Ref_to_Proto'>coerce_to_target_type</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN675"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, 
</span>                                   <a href="parse_target.c.html#LN683"><span class='Ref_to_Parameter'>rhs</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/nodeFuncs.h.html#LN31"><span class='Ref_to_Proto'>exprType</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN683"><span class='Ref_to_Parameter'>rhs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                   <a href="parse_target.c.html#LN679"><span class='Ref_to_Parameter'>targetTypeId</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN680"><span class='Ref_to_Parameter'>targetTypMod</span></a><span class='Delimiter'>, 
</span>                                   <a href="../../include/nodes/primnodes.h.html#LN421"><span class='Ref_to_EnumConst'>COERCION_ASSIGNMENT</span></a><span class='Delimiter'>, 
</span>                                   <a href="../../include/nodes/primnodes.h.html#LN438"><span class='Ref_to_EnumConst'>COERCE_IMPLICIT_CAST</span></a><span class='Delimiter'>, 
</span>                                   <span class='Operator'>-</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="parse_target.c.html#LN686"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="parse_target.c.html#LN678"><span class='Ref_to_Parameter'>targetIsArray</span></a><span class='Parentheses'>) 
</span>            <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_DATATYPE_MISMATCH<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"array assignment to \"%s\" requires type %s"</span> 
                            <span class='String'>" but expression is of type %s"</span><span class='Delimiter'>, 
</span>                            <a href="parse_target.c.html#LN677"><span class='Ref_to_Parameter'>targetName</span></a><span class='Delimiter'>, 
</span>                            <a href="../utils/adt/format_type.c.html#LN92"><span class='Ref_to_Func'>format_type_be</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN679"><span class='Ref_to_Parameter'>targetTypeId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                            <a href="../utils/adt/format_type.c.html#LN92"><span class='Ref_to_Func'>format_type_be</span></a><span class='Parentheses'>(</span><a href="../../include/nodes/nodeFuncs.h.html#LN31"><span class='Ref_to_Proto'>exprType</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN683"><span class='Ref_to_Parameter'>rhs</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>, 
</span>                 <a href="../utils/error/elog.c.html#LN985"><span class='Ref_to_Func'>errhint</span></a><span class='Parentheses'>(</span><span class='String'>"You will need to rewrite or cast the expression."</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../../pl/plpgsql/src/pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN675"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN684"><span class='Ref_to_Parameter'>location</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_DATATYPE_MISMATCH<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"subfield \"%s\" is of type %s"</span> 
                            <span class='String'>" but expression is of type %s"</span><span class='Delimiter'>, 
</span>                            <a href="parse_target.c.html#LN677"><span class='Ref_to_Parameter'>targetName</span></a><span class='Delimiter'>, 
</span>                            <a href="../utils/adt/format_type.c.html#LN92"><span class='Ref_to_Func'>format_type_be</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN679"><span class='Ref_to_Parameter'>targetTypeId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                            <a href="../utils/adt/format_type.c.html#LN92"><span class='Ref_to_Func'>format_type_be</span></a><span class='Parentheses'>(</span><a href="../../include/nodes/nodeFuncs.h.html#LN31"><span class='Ref_to_Proto'>exprType</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN683"><span class='Ref_to_Parameter'>rhs</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>, 
</span>                 <a href="../utils/error/elog.c.html#LN985"><span class='Ref_to_Func'>errhint</span></a><span class='Parentheses'>(</span><span class='String'>"You will need to rewrite or cast the expression."</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../../pl/plpgsql/src/pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN675"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN684"><span class='Ref_to_Parameter'>location</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if result==NULL &raquo; </span> 
 
    <span class='Control'>return</span> <a href="parse_target.c.html#LN686"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end transformAssignmentIndirection &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * helper for transformAssignmentIndirection: process array assignment 
 */ 
</span><span class='Keyword'>static </span><a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>* 
</span><a name="LN860"></a><span class='Declare_Function'>transformAssignmentSubscripts</span><span class='Parentheses'>(</span><a href="../../include/parser/parse_node.h.html#LN164"><span class='Ref_to_Struct'>ParseState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pstate</span><span class='Delimiter'>, 
</span><a name="LN861"></a>                              <a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>basenode</span><span class='Delimiter'>, 
</span><a name="LN862"></a>                              <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>targetName</span><span class='Delimiter'>, 
</span><a name="LN863"></a>                              <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>targetTypeId</span><span class='Delimiter'>, 
</span><a name="LN864"></a>                              <a href="../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a> <span class='Declare_Parameter'>targetTypMod</span><span class='Delimiter'>, 
</span><a name="LN865"></a>                              <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>targetCollation</span><span class='Delimiter'>, 
</span><a name="LN866"></a>                              <a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>subscripts</span><span class='Delimiter'>, 
</span><a name="LN867"></a>                              <span class='Keyword'>bool </span><span class='Declare_Parameter'>isSlice</span><span class='Delimiter'>, 
</span><a name="LN868"></a>                              <a href="../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>next_indirection</span><span class='Delimiter'>, 
</span><a name="LN869"></a>                              <a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rhs</span><span class='Delimiter'>, 
</span><a name="LN870"></a>                              <span class='Keyword'>int </span><span class='Declare_Parameter'>location</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN872"></a>    <a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span><a name="LN873"></a>    <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>arrayType</span><span class='Delimiter'>; 
</span><a name="LN874"></a>    <a href="../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>arrayTypMod</span><span class='Delimiter'>; 
</span><a name="LN875"></a>    <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>elementTypeId</span><span class='Delimiter'>; 
</span><a name="LN876"></a>    <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>typeNeeded</span><span class='Delimiter'>; 
</span><a name="LN877"></a>    <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>collationNeeded</span><span class='Delimiter'>; 
</span> 
    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="parse_target.c.html#LN866"><span class='Ref_to_Parameter'>subscripts</span></a> <span class='Operator'>!= </span><a href="../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Identify the actual array type and element type involved */ 
</span>    <a href="parse_target.c.html#LN873"><span class='Ref_To_Local'>arrayType</span></a> <span class='Operator'>= </span><a href="parse_target.c.html#LN863"><span class='Ref_to_Parameter'>targetTypeId</span></a><span class='Delimiter'>; 
</span>    <a href="parse_target.c.html#LN874"><span class='Ref_To_Local'>arrayTypMod</span></a> <span class='Operator'>= </span><a href="parse_target.c.html#LN864"><span class='Ref_to_Parameter'>targetTypMod</span></a><span class='Delimiter'>; 
</span>    <a href="parse_target.c.html#LN875"><span class='Ref_To_Local'>elementTypeId</span></a> <span class='Operator'>= </span><a href="parse_node.c.html#LN214"><span class='Ref_to_Func'>transformArrayType</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="parse_target.c.html#LN873"><span class='Ref_To_Local'>arrayType</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="parse_target.c.html#LN874"><span class='Ref_To_Local'>arrayTypMod</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Identify type that RHS must provide */ 
</span>    <a href="parse_target.c.html#LN876"><span class='Ref_To_Local'>typeNeeded</span></a> <span class='Operator'>= </span><a href="parse_target.c.html#LN867"><span class='Ref_to_Parameter'>isSlice</span></a> <span class='Operator'>? </span><a href="parse_target.c.html#LN873"><span class='Ref_To_Local'>arrayType</span></a> <span class='Operator'>: </span><a href="parse_target.c.html#LN875"><span class='Ref_To_Local'>elementTypeId</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Array normally has same collation as elements, but there's an 
     * exception: we might be subscripting a domain over an array type. In 
     * that case use collation of the base type. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="parse_target.c.html#LN873"><span class='Ref_To_Local'>arrayType</span></a> <span class='Operator'>== </span><a href="parse_target.c.html#LN863"><span class='Ref_to_Parameter'>targetTypeId</span></a><span class='Parentheses'>) 
</span>        <a href="parse_target.c.html#LN877"><span class='Ref_To_Local'>collationNeeded</span></a> <span class='Operator'>= </span><a href="parse_target.c.html#LN865"><span class='Ref_to_Parameter'>targetCollation</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="parse_target.c.html#LN877"><span class='Ref_To_Local'>collationNeeded</span></a> <span class='Operator'>= </span><a href="../../include/utils/lsyscache.h.html#LN166"><span class='Ref_to_Proto'>get_typcollation</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN873"><span class='Ref_To_Local'>arrayType</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* recurse to create appropriate RHS for array assign */ 
</span>    <a href="parse_target.c.html#LN869"><span class='Ref_to_Parameter'>rhs</span></a> <span class='Operator'>= </span><a href="parse_target.c.html#LN37"><span class='Ref_to_Proto'>transformAssignmentIndirection</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN860"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, 
</span>                                         <span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                                         <a href="parse_target.c.html#LN862"><span class='Ref_to_Parameter'>targetName</span></a><span class='Delimiter'>, 
</span>                                         <span class='Boolean'>true</span><span class='Delimiter'>, 
</span>                                         <a href="parse_target.c.html#LN876"><span class='Ref_To_Local'>typeNeeded</span></a><span class='Delimiter'>, 
</span>                                         <a href="parse_target.c.html#LN874"><span class='Ref_To_Local'>arrayTypMod</span></a><span class='Delimiter'>, 
</span>                                         <a href="parse_target.c.html#LN877"><span class='Ref_To_Local'>collationNeeded</span></a><span class='Delimiter'>, 
</span>                                         <a href="parse_target.c.html#LN868"><span class='Ref_to_Parameter'>next_indirection</span></a><span class='Delimiter'>, 
</span>                                         <a href="parse_target.c.html#LN869"><span class='Ref_to_Parameter'>rhs</span></a><span class='Delimiter'>, 
</span>                                         <a href="parse_target.c.html#LN870"><span class='Ref_to_Parameter'>location</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* process subscripts */ 
</span>    <a href="parse_target.c.html#LN872"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/parser/parse_node.h.html#LN268"><span class='Ref_to_Proto'>transformArraySubscripts</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN860"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, 
</span>                                               <a href="parse_target.c.html#LN861"><span class='Ref_to_Parameter'>basenode</span></a><span class='Delimiter'>, 
</span>                                               <a href="parse_target.c.html#LN873"><span class='Ref_To_Local'>arrayType</span></a><span class='Delimiter'>, 
</span>                                               <a href="parse_target.c.html#LN875"><span class='Ref_To_Local'>elementTypeId</span></a><span class='Delimiter'>, 
</span>                                               <a href="parse_target.c.html#LN874"><span class='Ref_To_Local'>arrayTypMod</span></a><span class='Delimiter'>, 
</span>                                               <a href="parse_target.c.html#LN866"><span class='Ref_to_Parameter'>subscripts</span></a><span class='Delimiter'>, 
</span>                                               <a href="parse_target.c.html#LN869"><span class='Ref_to_Parameter'>rhs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* If target was a domain over array, need to coerce up to the domain */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="parse_target.c.html#LN873"><span class='Ref_To_Local'>arrayType</span></a> <span class='Operator'>!= </span><a href="parse_target.c.html#LN863"><span class='Ref_to_Parameter'>targetTypeId</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN923"></a>        <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>resulttype</span> <span class='Operator'>= </span><a href="../../include/nodes/nodeFuncs.h.html#LN31"><span class='Ref_to_Proto'>exprType</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN872"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="parse_target.c.html#LN872"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../include/parser/parse_coerce.h.html#LN37"><span class='Ref_to_Proto'>coerce_to_target_type</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN860"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, 
</span>                                       <a href="parse_target.c.html#LN872"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN923"><span class='Ref_To_Local'>resulttype</span></a><span class='Delimiter'>, 
</span>                                       <a href="parse_target.c.html#LN863"><span class='Ref_to_Parameter'>targetTypeId</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN864"><span class='Ref_to_Parameter'>targetTypMod</span></a><span class='Delimiter'>, 
</span>                                       <a href="../../include/nodes/primnodes.h.html#LN421"><span class='Ref_to_EnumConst'>COERCION_ASSIGNMENT</span></a><span class='Delimiter'>, 
</span>                                       <a href="../../include/nodes/primnodes.h.html#LN438"><span class='Ref_to_EnumConst'>COERCE_IMPLICIT_CAST</span></a><span class='Delimiter'>, 
</span>                                       <span class='Operator'>-</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* can fail if we had int2vector/oidvector, but not for true domains */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="parse_target.c.html#LN872"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_CANNOT_COERCE<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"cannot cast type %s to %s"</span><span class='Delimiter'>, 
</span>                            <a href="../utils/adt/format_type.c.html#LN92"><span class='Ref_to_Func'>format_type_be</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN923"><span class='Ref_To_Local'>resulttype</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                            <a href="../utils/adt/format_type.c.html#LN92"><span class='Ref_to_Func'>format_type_be</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN863"><span class='Ref_to_Parameter'>targetTypeId</span></a><span class='Parentheses'>))</span><span class='Delimiter'>, 
</span>                     <a href="../../pl/plpgsql/src/pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN860"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN870"><span class='Ref_to_Parameter'>location</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>return</span> <a href="parse_target.c.html#LN872"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end transformAssignmentSubscripts &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* 
 * checkInsertTargets - 
 *    generate a list of INSERT column targets if not supplied, or 
 *    test supplied column names to make sure they are in target table. 
 *    Also return an integer list of the columns' attribute numbers. 
 */ 
</span><a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>* 
</span><a name="LN952"></a><span class='Declare_Function'>checkInsertTargets</span><span class='Parentheses'>(</span><a href="../../include/parser/parse_node.h.html#LN164"><span class='Ref_to_Struct'>ParseState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pstate</span><span class='Delimiter'>, </span><a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>cols</span><span class='Delimiter'>, </span><a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>attrnos</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Operator'>*</span><a href="parse_target.c.html#LN952"><span class='Ref_to_Parameter'>attrnos</span></a> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="parse_target.c.html#LN952"><span class='Ref_to_Parameter'>cols</span></a> <span class='Operator'>== </span><a href="../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * Generate default column list for INSERT. 
         */ 
</span><a name="LN961"></a>        <a href="../../include/catalog/pg_attribute.h.html#LN186"><span class='Ref_to_Typedef'>Form_pg_attribute</span></a> <span class='Operator'>*</span><span class='Declare_Local'>attr</span> <span class='Operator'>= </span><a href="parse_target.c.html#LN952"><span class='Ref_to_Parameter'>pstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/parser/parse_node.h.html#LN178"><span class='Ref_to_Member'>p_target_relation</span></a><span class='Operator'>-&GT;</span><a href="../../include/utils/rel.h.html#LN114"><span class='Ref_to_Member'>rd_att</span></a><span class='Operator'>-&GT;</span><a href="../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>; 
</span><a name="LN962"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>numcol</span> <span class='Operator'>= </span><a href="parse_target.c.html#LN952"><span class='Ref_to_Parameter'>pstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/parser/parse_node.h.html#LN178"><span class='Ref_to_Member'>p_target_relation</span></a><span class='Operator'>-&GT;</span><a href="../../include/utils/rel.h.html#LN113"><span class='Ref_to_Member'>rd_rel</span></a><span class='Operator'>-&GT;</span>relnatts<span class='Delimiter'>; 
</span><a name="LN963"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="parse_target.c.html#LN963"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="parse_target.c.html#LN963"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="parse_target.c.html#LN962"><span class='Ref_To_Local'>numcol</span></a><span class='Delimiter'>; </span><a href="parse_target.c.html#LN963"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN967"></a>            <a href="../../include/nodes/parsenodes.h.html#LN436"><span class='Ref_to_Struct'>ResTarget</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>col</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="parse_target.c.html#LN961"><span class='Ref_To_Local'>attr</span></a><span class='Delimiter'>[</span><a href="parse_target.c.html#LN963"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attisdropped<span class='Parentheses'>) 
</span>                <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
            <a href="parse_target.c.html#LN967"><span class='Ref_To_Local'>col</span></a> <span class='Operator'>= </span><a href="../../include/nodes/nodes.h.html#LN556"><span class='Ref_to_Macro'>makeNode</span></a><span class='Parentheses'>(</span><a href="../../include/nodes/parsenodes.h.html#LN436"><span class='Ref_to_Struct'>ResTarget</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="parse_target.c.html#LN967"><span class='Ref_To_Local'>col</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN439"><span class='Ref_to_Member'>name</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN32"><span class='Ref_to_Proto'>pstrdup</span></a><span class='Parentheses'>(</span><a href="../../include/c.h.html#LN498"><span class='Ref_to_Macro'>NameStr</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN961"><span class='Ref_To_Local'>attr</span></a><span class='Delimiter'>[</span><a href="parse_target.c.html#LN963"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attname<span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="parse_target.c.html#LN967"><span class='Ref_To_Local'>col</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN440"><span class='Ref_to_Member'>indirection</span></a> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span>            <a href="parse_target.c.html#LN967"><span class='Ref_To_Local'>col</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN441"><span class='Ref_to_Member'>val</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>            <a href="parse_target.c.html#LN967"><span class='Ref_To_Local'>col</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN442"><span class='Ref_to_Member'>location</span></a> <span class='Operator'>= -</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>            <a href="parse_target.c.html#LN952"><span class='Ref_to_Parameter'>cols</span></a> <span class='Operator'>= </span><a href="../nodes/list.c.html#LN126"><span class='Ref_to_Func'>lappend</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN952"><span class='Ref_to_Parameter'>cols</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN967"><span class='Ref_To_Local'>col</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Operator'>*</span><a href="parse_target.c.html#LN952"><span class='Ref_to_Parameter'>attrnos</span></a> <span class='Operator'>= </span><a href="../nodes/list.c.html#LN144"><span class='Ref_to_Func'>lappend_int</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="parse_target.c.html#LN952"><span class='Ref_to_Parameter'>attrnos</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN963"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if cols==NIL &raquo; </span> 
    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * Do initial validation of user-supplied INSERT column list. 
         */ 
</span><a name="LN986"></a>        <a href="../../include/nodes/bitmapset.h.html#LN36"><span class='Ref_to_Struct'>Bitmapset</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>wholecols</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN987"></a>        <a href="../../include/nodes/bitmapset.h.html#LN36"><span class='Ref_to_Struct'>Bitmapset</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>partialcols</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN988"></a>        <a href="../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>tl</span><span class='Delimiter'>; 
</span> 
        <a href="../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN988"><span class='Ref_To_Local'>tl</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN952"><span class='Ref_to_Parameter'>cols</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN992"></a>            <a href="../../include/nodes/parsenodes.h.html#LN436"><span class='Ref_to_Struct'>ResTarget</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>col</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/parsenodes.h.html#LN436"><span class='Ref_to_Struct'>ResTarget</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN988"><span class='Ref_To_Local'>tl</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN993"></a>            <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>name</span> <span class='Operator'>= </span><a href="parse_target.c.html#LN992"><span class='Ref_To_Local'>col</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN439"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>; 
</span><a name="LN994"></a>            <span class='Keyword'>int</span>         <span class='Declare_Local'>attrno</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* Lookup column name, ereport on failure */ 
</span>            <a href="parse_target.c.html#LN994"><span class='Ref_To_Local'>attrno</span></a> <span class='Operator'>= </span><a href="../../include/parser/parse_relation.h.html#LN125"><span class='Ref_to_Proto'>attnameAttNum</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN952"><span class='Ref_to_Parameter'>pstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/parser/parse_node.h.html#LN178"><span class='Ref_to_Member'>p_target_relation</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN993"><span class='Ref_To_Local'>name</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="parse_target.c.html#LN994"><span class='Ref_To_Local'>attrno</span></a> <span class='Operator'>== </span><a href="../../include/access/attnum.h.html#LN22"><span class='Ref_to_Const'>InvalidAttrNumber</span></a><span class='Parentheses'>) 
</span>                <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_UNDEFINED_COLUMN<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                    <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"column \"%s\" of relation \"%s\" does not exist"</span><span class='Delimiter'>, 
</span>                           <a href="parse_target.c.html#LN993"><span class='Ref_To_Local'>name</span></a><span class='Delimiter'>, 
</span>                         <a href="../../include/utils/rel.h.html#LN436"><span class='Ref_to_Macro'>RelationGetRelationName</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN952"><span class='Ref_to_Parameter'>pstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/parser/parse_node.h.html#LN178"><span class='Ref_to_Member'>p_target_relation</span></a><span class='Parentheses'>))</span><span class='Delimiter'>, 
</span>                         <a href="../../pl/plpgsql/src/pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN952"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN992"><span class='Ref_To_Local'>col</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN442"><span class='Ref_to_Member'>location</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * Check for duplicates, but only of whole columns --- we allow 
             * INSERT INTO foo (col.subcol1, col.subcol2) 
             */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="parse_target.c.html#LN992"><span class='Ref_To_Local'>col</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN440"><span class='Ref_to_Member'>indirection</span></a> <span class='Operator'>== </span><a href="../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* whole column; must not have any other assignment */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/nodes/bitmapset.h.html#LN75"><span class='Ref_to_Proto'>bms_is_member</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN994"><span class='Ref_To_Local'>attrno</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN986"><span class='Ref_To_Local'>wholecols</span></a><span class='Parentheses'>) </span><span class='Operator'>|| 
</span>                    <a href="../../include/nodes/bitmapset.h.html#LN75"><span class='Ref_to_Proto'>bms_is_member</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN994"><span class='Ref_To_Local'>attrno</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN987"><span class='Ref_To_Local'>partialcols</span></a><span class='Parentheses'>))</span> 
                    <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                            <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_DUPLICATE_COLUMN<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                             <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"column \"%s\" specified more than once"</span><span class='Delimiter'>, 
</span>                                    <a href="parse_target.c.html#LN993"><span class='Ref_To_Local'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                             <a href="../../pl/plpgsql/src/pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN952"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN992"><span class='Ref_To_Local'>col</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN442"><span class='Ref_to_Member'>location</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                <a href="parse_target.c.html#LN986"><span class='Ref_To_Local'>wholecols</span></a> <span class='Operator'>= </span><a href="../../include/nodes/bitmapset.h.html#LN89"><span class='Ref_to_Proto'>bms_add_member</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN986"><span class='Ref_To_Local'>wholecols</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN994"><span class='Ref_To_Local'>attrno</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* partial column; must not have any whole assignment */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/nodes/bitmapset.h.html#LN75"><span class='Ref_to_Proto'>bms_is_member</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN994"><span class='Ref_To_Local'>attrno</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN986"><span class='Ref_To_Local'>wholecols</span></a><span class='Parentheses'>))</span> 
                    <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                            <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_DUPLICATE_COLUMN<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                             <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"column \"%s\" specified more than once"</span><span class='Delimiter'>, 
</span>                                    <a href="parse_target.c.html#LN993"><span class='Ref_To_Local'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                             <a href="../../pl/plpgsql/src/pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN952"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN992"><span class='Ref_To_Local'>col</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN442"><span class='Ref_to_Member'>location</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                <a href="parse_target.c.html#LN987"><span class='Ref_To_Local'>partialcols</span></a> <span class='Operator'>= </span><a href="../../include/nodes/bitmapset.h.html#LN89"><span class='Ref_to_Proto'>bms_add_member</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN987"><span class='Ref_To_Local'>partialcols</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN994"><span class='Ref_To_Local'>attrno</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
            <span class='Operator'>*</span><a href="parse_target.c.html#LN952"><span class='Ref_to_Parameter'>attrnos</span></a> <span class='Operator'>= </span><a href="../nodes/list.c.html#LN144"><span class='Ref_to_Func'>lappend_int</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="parse_target.c.html#LN952"><span class='Ref_to_Parameter'>attrnos</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN994"><span class='Ref_To_Local'>attrno</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
 
    <span class='Control'>return</span> <a href="parse_target.c.html#LN952"><span class='Ref_to_Parameter'>cols</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end checkInsertTargets &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * ExpandColumnRefStar() 
 *      Transforms foo.* into a list of expressions or targetlist entries. 
 * 
 * This handles the case where '*' appears as the last or only item in a 
 * ColumnRef.  The code is shared between the case of foo.* at the top level 
 * in a SELECT target list (where we want TargetEntry nodes in the result) 
 * and foo.* in a ROW() or VALUES() construct (where we want just bare 
 * expressions). 
 * 
 * The referenced columns are marked as requiring SELECT access. 
 */ 
</span><span class='Keyword'>static </span><a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>* 
</span><a name="LN1054"></a><span class='Declare_Function'>ExpandColumnRefStar</span><span class='Parentheses'>(</span><a href="../../include/parser/parse_node.h.html#LN164"><span class='Ref_to_Struct'>ParseState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pstate</span><span class='Delimiter'>, </span><a href="../../include/nodes/parsenodes.h.html#LN231"><span class='Ref_to_Struct'>ColumnRef</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>cref</span><span class='Delimiter'>, 
</span><a name="LN1055"></a>                    <span class='Keyword'>bool </span><span class='Declare_Parameter'>make_target_entry</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1057"></a>    <a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>fields</span> <span class='Operator'>= </span><a href="parse_target.c.html#LN1054"><span class='Ref_to_Parameter'>cref</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN234"><span class='Ref_to_Member'>fields</span></a><span class='Delimiter'>; 
</span><a name="LN1058"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>numnames</span> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1057"><span class='Ref_To_Local'>fields</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="parse_target.c.html#LN1058"><span class='Ref_To_Local'>numnames</span></a> <span class='Operator'>== </span><span class='Number'>1</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * Target item is a bare '*', expand all tables 
         * 
         * (e.g., SELECT * FROM emp, dept) 
         * 
         * Since the grammar only accepts bare '*' at top level of SELECT, we 
         * need not handle the make_target_entry==false case here. 
         */ 
</span>        <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1055"><span class='Ref_to_Parameter'>make_target_entry</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <a href="parse_target.c.html#LN60"><span class='Ref_to_Proto'>ExpandAllTables</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1054"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN1054"><span class='Ref_to_Parameter'>cref</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN235"><span class='Ref_to_Member'>location</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * Target item is relation.*, expand that table 
         * 
         * (e.g., SELECT emp.*, dname FROM emp, dept) 
         * 
         * Note: this code is a lot like transformColumnRef; it's tempting to 
         * call that instead and then replace the resulting whole-row Var with 
         * a list of Vars.  However, that would leave us with the RTE's 
         * selectedCols bitmap showing the whole row as needing select 
         * permission, as well as the individual columns.  That would be 
         * incorrect (since columns added later shouldn't need select 
         * permissions).  We could try to remove the whole-row permission bit 
         * after the fact, but duplicating code is less messy. 
         */ 
</span><a name="LN1089"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>nspname</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN1090"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>relname</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN1091"></a>        <a href="../../include/nodes/parsenodes.h.html#LN932"><span class='Ref_to_Struct'>RangeTblEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>rte</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN1092"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>levels_up</span><span class='Delimiter'>; 
</span>        <span class='Control'>enum</span> 
        <span class='Delimiter'>{ 
</span><a name="LN1095"></a>            <span class='Declare_Local'>CRSERR_NO_RTE</span><span class='Delimiter'>, 
</span><a name="LN1096"></a>            <span class='Declare_Local'>CRSERR_WRONG_DB</span><span class='Delimiter'>, 
</span><a name="LN1097"></a>            <span class='Declare_Local'>CRSERR_TOO_MANY</span> 
<a name="LN1098"></a>        <span class='Delimiter'>}</span>           <span class='Declare_Local'>crserr</span> <span class='Operator'>= </span><a href="parse_target.c.html#LN1095"><span class='Ref_to_EnumConst'>CRSERR_NO_RTE</span></a><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Give the PreParseColumnRefHook, if any, first shot.  If it returns 
         * non-null then we should use that expression. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="parse_target.c.html#LN1054"><span class='Ref_to_Parameter'>pstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/parser/parse_node.h.html#LN205"><span class='Ref_to_Member'>p_pre_columnref_hook</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN1106"></a>            <a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>node</span><span class='Delimiter'>; 
</span> 
            <a href="parse_target.c.html#LN1106"><span class='Ref_To_Local'>node</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="parse_target.c.html#LN1054"><span class='Ref_to_Parameter'>pstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/parser/parse_node.h.html#LN205"><span class='Ref_to_Member'>p_pre_columnref_hook</span></a><span class='Parentheses'>) (</span><a href="parse_target.c.html#LN1054"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN1054"><span class='Ref_to_Parameter'>cref</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="parse_target.c.html#LN1106"><span class='Ref_To_Local'>node</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>                <span class='Control'>return</span> <a href="parse_target.c.html#LN65"><span class='Ref_to_Proto'>ExpandRowReference</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1054"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN1106"><span class='Ref_To_Local'>node</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN1055"><span class='Ref_to_Parameter'>make_target_entry</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="parse_target.c.html#LN1058"><span class='Ref_To_Local'>numnames</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>case</span> <span class='Number'>2</span><span class='Operator'>: 
</span>                <a href="parse_target.c.html#LN1090"><span class='Ref_To_Local'>relname</span></a> <span class='Operator'>= </span><a href="../../include/nodes/value.h.html#LN53"><span class='Ref_to_Macro'>strVal</span></a><span class='Parentheses'>(</span><a href="../../include/nodes/pg_list.h.html#LN110"><span class='Ref_to_Macro'>linitial</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1057"><span class='Ref_To_Local'>fields</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="parse_target.c.html#LN1091"><span class='Ref_To_Local'>rte</span></a> <span class='Operator'>= </span><a href="../../include/parser/parse_relation.h.html#LN36"><span class='Ref_to_Proto'>refnameRangeTblEntry</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1054"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN1089"><span class='Ref_To_Local'>nspname</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN1090"><span class='Ref_To_Local'>relname</span></a><span class='Delimiter'>, 
</span>                                           <a href="parse_target.c.html#LN1054"><span class='Ref_to_Parameter'>cref</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN235"><span class='Ref_to_Member'>location</span></a><span class='Delimiter'>, 
</span>                                           <span class='Operator'>&</span><a href="parse_target.c.html#LN1092"><span class='Ref_To_Local'>levels_up</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <span class='Number'>3</span><span class='Operator'>: 
</span>                <a href="parse_target.c.html#LN1089"><span class='Ref_To_Local'>nspname</span></a> <span class='Operator'>= </span><a href="../../include/nodes/value.h.html#LN53"><span class='Ref_to_Macro'>strVal</span></a><span class='Parentheses'>(</span><a href="../../include/nodes/pg_list.h.html#LN110"><span class='Ref_to_Macro'>linitial</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1057"><span class='Ref_To_Local'>fields</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="parse_target.c.html#LN1090"><span class='Ref_To_Local'>relname</span></a> <span class='Operator'>= </span><a href="../../include/nodes/value.h.html#LN53"><span class='Ref_to_Macro'>strVal</span></a><span class='Parentheses'>(</span><a href="../../include/nodes/pg_list.h.html#LN115"><span class='Ref_to_Macro'>lsecond</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1057"><span class='Ref_To_Local'>fields</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="parse_target.c.html#LN1091"><span class='Ref_To_Local'>rte</span></a> <span class='Operator'>= </span><a href="../../include/parser/parse_relation.h.html#LN36"><span class='Ref_to_Proto'>refnameRangeTblEntry</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1054"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN1089"><span class='Ref_To_Local'>nspname</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN1090"><span class='Ref_To_Local'>relname</span></a><span class='Delimiter'>, 
</span>                                           <a href="parse_target.c.html#LN1054"><span class='Ref_to_Parameter'>cref</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN235"><span class='Ref_to_Member'>location</span></a><span class='Delimiter'>, 
</span>                                           <span class='Operator'>&</span><a href="parse_target.c.html#LN1092"><span class='Ref_To_Local'>levels_up</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <span class='Number'>4</span><span class='Operator'>: 
</span>                <span class='Delimiter'>{ 
</span><a name="LN1130"></a>                    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>catname</span> <span class='Operator'>= </span><a href="../../include/nodes/value.h.html#LN53"><span class='Ref_to_Macro'>strVal</span></a><span class='Parentheses'>(</span><a href="../../include/nodes/pg_list.h.html#LN110"><span class='Ref_to_Macro'>linitial</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1057"><span class='Ref_To_Local'>fields</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
                    <span class='Comment_Multi_Line'>/* 
                     * We check the catalog name and then ignore it. 
                     */ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="parse_target.c.html#LN1130"><span class='Ref_To_Local'>catname</span></a><span class='Delimiter'>, </span><a href="../../include/commands/dbcommands.h.html#LN29"><span class='Ref_to_Proto'>get_database_name</span></a><span class='Parentheses'>(</span><a href="../utils/init/globals.c.html#LN76"><span class='Ref_to_Global_Var'>MyDatabaseId</span></a><span class='Parentheses'>))</span> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                    <span class='Delimiter'>{ 
</span>                        <a href="parse_target.c.html#LN1098"><span class='Ref_To_Local'>crserr</span></a> <span class='Operator'>= </span><a href="parse_target.c.html#LN1096"><span class='Ref_to_EnumConst'>CRSERR_WRONG_DB</span></a><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                    <a href="parse_target.c.html#LN1089"><span class='Ref_To_Local'>nspname</span></a> <span class='Operator'>= </span><a href="../../include/nodes/value.h.html#LN53"><span class='Ref_to_Macro'>strVal</span></a><span class='Parentheses'>(</span><a href="../../include/nodes/pg_list.h.html#LN115"><span class='Ref_to_Macro'>lsecond</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1057"><span class='Ref_To_Local'>fields</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                    <a href="parse_target.c.html#LN1090"><span class='Ref_To_Local'>relname</span></a> <span class='Operator'>= </span><a href="../../include/nodes/value.h.html#LN53"><span class='Ref_to_Macro'>strVal</span></a><span class='Parentheses'>(</span><a href="../../include/nodes/pg_list.h.html#LN120"><span class='Ref_to_Macro'>lthird</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1057"><span class='Ref_To_Local'>fields</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                    <a href="parse_target.c.html#LN1091"><span class='Ref_To_Local'>rte</span></a> <span class='Operator'>= </span><a href="../../include/parser/parse_relation.h.html#LN36"><span class='Ref_to_Proto'>refnameRangeTblEntry</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1054"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN1089"><span class='Ref_To_Local'>nspname</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN1090"><span class='Ref_To_Local'>relname</span></a><span class='Delimiter'>, 
</span>                                               <a href="parse_target.c.html#LN1054"><span class='Ref_to_Parameter'>cref</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN235"><span class='Ref_to_Member'>location</span></a><span class='Delimiter'>, 
</span>                                               <span class='Operator'>&</span><a href="parse_target.c.html#LN1092"><span class='Ref_To_Local'>levels_up</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>            <span class='Control'>default</span><span class='Operator'>: 
</span>                <a href="parse_target.c.html#LN1098"><span class='Ref_To_Local'>crserr</span></a> <span class='Operator'>= </span><a href="parse_target.c.html#LN1097"><span class='Ref_to_EnumConst'>CRSERR_TOO_MANY</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch numnames &raquo; </span> 
 
        <span class='Comment_Multi_Line'>/* 
         * Now give the PostParseColumnRefHook, if any, a chance. We cheat a 
         * bit by passing the RangeTblEntry, not a Var, as the planned 
         * translation.  (A single Var wouldn't be strictly correct anyway. 
         * This convention allows hooks that really care to know what is 
         * happening.) 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="parse_target.c.html#LN1054"><span class='Ref_to_Parameter'>pstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/parser/parse_node.h.html#LN206"><span class='Ref_to_Member'>p_post_columnref_hook</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN1161"></a>            <a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>node</span><span class='Delimiter'>; 
</span> 
            <a href="parse_target.c.html#LN1161"><span class='Ref_To_Local'>node</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="parse_target.c.html#LN1054"><span class='Ref_to_Parameter'>pstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/parser/parse_node.h.html#LN206"><span class='Ref_to_Member'>p_post_columnref_hook</span></a><span class='Parentheses'>) (</span><a href="parse_target.c.html#LN1054"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN1054"><span class='Ref_to_Parameter'>cref</span></a><span class='Delimiter'>, 
</span>                                                     <span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="parse_target.c.html#LN1091"><span class='Ref_To_Local'>rte</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="parse_target.c.html#LN1161"><span class='Ref_To_Local'>node</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="parse_target.c.html#LN1091"><span class='Ref_To_Local'>rte</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>                    <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                            <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_AMBIGUOUS_COLUMN<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                             <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"column reference \"%s\" is ambiguous"</span><span class='Delimiter'>, 
</span>                                    <a href="../../include/catalog/namespace.h.html#LN120"><span class='Ref_to_Proto'>NameListToString</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1054"><span class='Ref_to_Parameter'>cref</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN234"><span class='Ref_to_Member'>fields</span></a><span class='Parentheses'>))</span><span class='Delimiter'>, 
</span>                             <a href="../../pl/plpgsql/src/pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1054"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN1054"><span class='Ref_to_Parameter'>cref</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN235"><span class='Ref_to_Member'>location</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                <span class='Control'>return</span> <a href="parse_target.c.html#LN65"><span class='Ref_to_Proto'>ExpandRowReference</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1054"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN1161"><span class='Ref_To_Local'>node</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN1055"><span class='Ref_to_Parameter'>make_target_entry</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Throw error if no translation found. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="parse_target.c.html#LN1091"><span class='Ref_To_Local'>rte</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="parse_target.c.html#LN1098"><span class='Ref_To_Local'>crserr</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Control'>case</span> <a href="parse_target.c.html#LN1095"><span class='Ref_to_EnumConst'>CRSERR_NO_RTE</span></a><span class='Operator'>: 
</span>                    <a href="parse_relation.c.html#LN3153"><span class='Ref_to_Func'>errorMissingRTE</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1054"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/makefuncs.h.html#LN68"><span class='Ref_to_Proto'>makeRangeVar</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1089"><span class='Ref_To_Local'>nspname</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN1090"><span class='Ref_To_Local'>relname</span></a><span class='Delimiter'>, 
</span>                                                         <a href="parse_target.c.html#LN1054"><span class='Ref_to_Parameter'>cref</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN235"><span class='Ref_to_Member'>location</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Control'>case</span> <a href="parse_target.c.html#LN1096"><span class='Ref_to_EnumConst'>CRSERR_WRONG_DB</span></a><span class='Operator'>: 
</span>                    <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                            <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_FEATURE_NOT_SUPPORTED<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                             <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"cross-database references are not implemented: %s"</span><span class='Delimiter'>, 
</span>                                    <a href="../../include/catalog/namespace.h.html#LN120"><span class='Ref_to_Proto'>NameListToString</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1054"><span class='Ref_to_Parameter'>cref</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN234"><span class='Ref_to_Member'>fields</span></a><span class='Parentheses'>))</span><span class='Delimiter'>, 
</span>                             <a href="../../pl/plpgsql/src/pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1054"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN1054"><span class='Ref_to_Parameter'>cref</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN235"><span class='Ref_to_Member'>location</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Control'>case</span> <a href="parse_target.c.html#LN1097"><span class='Ref_to_EnumConst'>CRSERR_TOO_MANY</span></a><span class='Operator'>: 
</span>                    <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                            <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_SYNTAX_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                             <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"improper qualified name (too many dotted names): %s"</span><span class='Delimiter'>, 
</span>                                    <a href="../../include/catalog/namespace.h.html#LN120"><span class='Ref_to_Proto'>NameListToString</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1054"><span class='Ref_to_Parameter'>cref</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN234"><span class='Ref_to_Member'>fields</span></a><span class='Parentheses'>))</span><span class='Delimiter'>, 
</span>                             <a href="../../pl/plpgsql/src/pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1054"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN1054"><span class='Ref_to_Parameter'>cref</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN235"><span class='Ref_to_Member'>location</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch crserr &raquo; </span> 
        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if rte==NULL &raquo; </span> 
 
        <span class='Comment_Multi_Line'>/* 
         * OK, expand the RTE into fields. 
         */ 
</span>        <span class='Control'>return</span> <a href="parse_target.c.html#LN63"><span class='Ref_to_Proto'>ExpandSingleTable</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1054"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN1091"><span class='Ref_To_Local'>rte</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN1054"><span class='Ref_to_Parameter'>cref</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN235"><span class='Ref_to_Member'>location</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN1055"><span class='Ref_to_Parameter'>make_target_entry</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
<span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end ExpandColumnRefStar &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * ExpandAllTables() 
 *      Transforms '*' (in the target list) into a list of targetlist entries. 
 * 
 * tlist entries are generated for each relation visible for unqualified 
 * column name access.  We do not consider qualified-name-only entries because 
 * that would include input tables of aliasless JOINs, NEW/OLD pseudo-entries, 
 * etc. 
 * 
 * The referenced relations/columns are marked as requiring SELECT access. 
 */ 
</span><span class='Keyword'>static </span><a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>* 
</span><a name="LN1224"></a><span class='Declare_Function'>ExpandAllTables</span><span class='Parentheses'>(</span><a href="../../include/parser/parse_node.h.html#LN164"><span class='Ref_to_Struct'>ParseState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pstate</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>location</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1226"></a>    <a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>target</span> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span><a name="LN1227"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>found_table</span> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span><a name="LN1228"></a>    <a href="../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>l</span><span class='Delimiter'>; 
</span> 
    <a href="../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1228"><span class='Ref_To_Local'>l</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN1224"><span class='Ref_to_Parameter'>pstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/parser/parse_node.h.html#LN172"><span class='Ref_to_Member'>p_namespace</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN1232"></a>        <a href="../../include/parser/parse_node.h.html#LN239"><span class='Ref_to_Struct'>ParseNamespaceItem</span></a> <span class='Operator'>*</span><span class='Declare_Local'>nsitem</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/parser/parse_node.h.html#LN239"><span class='Ref_to_Struct'>ParseNamespaceItem</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1228"><span class='Ref_To_Local'>l</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1233"></a>        <a href="../../include/nodes/parsenodes.h.html#LN932"><span class='Ref_to_Struct'>RangeTblEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>rte</span> <span class='Operator'>= </span><a href="parse_target.c.html#LN1232"><span class='Ref_To_Local'>nsitem</span></a><span class='Operator'>-&GT;</span><a href="../../include/parser/parse_node.h.html#LN241"><span class='Ref_to_Member'>p_rte</span></a><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Ignore table-only items */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="parse_target.c.html#LN1232"><span class='Ref_To_Local'>nsitem</span></a><span class='Operator'>-&GT;</span><a href="../../include/parser/parse_node.h.html#LN243"><span class='Ref_to_Member'>p_cols_visible</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* Should not have any lateral-only items when parsing targetlist */ 
</span>        <span class='Debug'>Assert</span><span class='Parentheses'>(</span><span class='Operator'>!</span><a href="parse_target.c.html#LN1232"><span class='Ref_To_Local'>nsitem</span></a><span class='Operator'>-&GT;</span><a href="../../include/parser/parse_node.h.html#LN244"><span class='Ref_to_Member'>p_lateral_only</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* Remember we found a p_cols_visible item */ 
</span>        <a href="parse_target.c.html#LN1227"><span class='Ref_To_Local'>found_table</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
        <a href="parse_target.c.html#LN1226"><span class='Ref_To_Local'>target</span></a> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN219"><span class='Ref_to_Proto'>list_concat</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1226"><span class='Ref_To_Local'>target</span></a><span class='Delimiter'>, 
</span>                             <a href="../../include/parser/parse_relation.h.html#LN123"><span class='Ref_to_Proto'>expandRelAttrs</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1224"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, 
</span>                                            <a href="parse_target.c.html#LN1233"><span class='Ref_To_Local'>rte</span></a><span class='Delimiter'>, 
</span>                                            <a href="../../include/parser/parse_relation.h.html#LN47"><span class='Ref_to_Proto'>RTERangeTablePosn</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1224"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN1233"><span class='Ref_To_Local'>rte</span></a><span class='Delimiter'>, 
</span>                                                              <span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                            <span class='Number'>0</span><span class='Delimiter'>, 
</span>                                            <a href="parse_target.c.html#LN1224"><span class='Ref_to_Parameter'>location</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Check for "SELECT *;".  We do it this way, rather than checking for 
     * target == NIL, because we want to allow SELECT * FROM a zero_column 
     * table. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="parse_target.c.html#LN1227"><span class='Ref_To_Local'>found_table</span></a><span class='Parentheses'>) 
</span>        <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_SYNTAX_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"SELECT * with no tables specified is not valid"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../../pl/plpgsql/src/pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1224"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN1224"><span class='Ref_to_Parameter'>location</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="parse_target.c.html#LN1226"><span class='Ref_To_Local'>target</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end ExpandAllTables &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * ExpandIndirectionStar() 
 *      Transforms foo.* into a list of expressions or targetlist entries. 
 * 
 * This handles the case where '*' appears as the last item in A_Indirection. 
 * The code is shared between the case of foo.* at the top level in a SELECT 
 * target list (where we want TargetEntry nodes in the result) and foo.* in 
 * a ROW() or VALUES() construct (where we want just bare expressions). 
 * For robustness, we use a separate "make_target_entry" flag to control 
 * this rather than relying on exprKind. 
 */ 
</span><span class='Keyword'>static </span><a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>* 
</span><a name="LN1278"></a><span class='Declare_Function'>ExpandIndirectionStar</span><span class='Parentheses'>(</span><a href="../../include/parser/parse_node.h.html#LN164"><span class='Ref_to_Struct'>ParseState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pstate</span><span class='Delimiter'>, </span><a href="../../include/nodes/parsenodes.h.html#LN401"><span class='Ref_to_Struct'>A_Indirection</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>ind</span><span class='Delimiter'>, 
</span><a name="LN1279"></a>                      <span class='Keyword'>bool </span><span class='Declare_Parameter'>make_target_entry</span><span class='Delimiter'>, </span><a href="../../include/parser/parse_node.h.html#LN32"><span class='Ref_to_Enum'>ParseExprKind</span></a> <span class='Declare_Parameter'>exprKind</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1281"></a>    <a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>expr</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Strip off the '*' to create a reference to the rowtype object */ 
</span>    <a href="parse_target.c.html#LN1278"><span class='Ref_to_Parameter'>ind</span></a> <span class='Operator'>= </span><a href="../../include/nodes/nodes.h.html#LN618"><span class='Ref_to_Macro'>copyObject</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1278"><span class='Ref_to_Parameter'>ind</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="parse_target.c.html#LN1278"><span class='Ref_to_Parameter'>ind</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN405"><span class='Ref_to_Member'>indirection</span></a> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN220"><span class='Ref_to_Proto'>list_truncate</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1278"><span class='Ref_to_Parameter'>ind</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN405"><span class='Ref_to_Member'>indirection</span></a><span class='Delimiter'>, 
</span>                                     <a href="../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1278"><span class='Ref_to_Parameter'>ind</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN405"><span class='Ref_to_Member'>indirection</span></a><span class='Parentheses'>) </span><span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* And transform that */ 
</span>    <a href="parse_target.c.html#LN1281"><span class='Ref_To_Local'>expr</span></a> <span class='Operator'>= </span><a href="../../include/parser/parse_expr.h.html#LN21"><span class='Ref_to_Proto'>transformExpr</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1278"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="parse_target.c.html#LN1278"><span class='Ref_to_Parameter'>ind</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN1279"><span class='Ref_to_Parameter'>exprKind</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Expand the rowtype expression into individual fields */ 
</span>    <span class='Control'>return</span> <a href="parse_target.c.html#LN65"><span class='Ref_to_Proto'>ExpandRowReference</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1278"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN1281"><span class='Ref_To_Local'>expr</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN1279"><span class='Ref_to_Parameter'>make_target_entry</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * ExpandSingleTable() 
 *      Transforms foo.* into a list of expressions or targetlist entries. 
 * 
 * This handles the case where foo has been determined to be a simple 
 * reference to an RTE, so we can just generate Vars for the expressions. 
 * 
 * The referenced columns are marked as requiring SELECT access. 
 */ 
</span><span class='Keyword'>static </span><a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>* 
</span><a name="LN1305"></a><span class='Declare_Function'>ExpandSingleTable</span><span class='Parentheses'>(</span><a href="../../include/parser/parse_node.h.html#LN164"><span class='Ref_to_Struct'>ParseState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pstate</span><span class='Delimiter'>, </span><a href="../../include/nodes/parsenodes.h.html#LN932"><span class='Ref_to_Struct'>RangeTblEntry</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rte</span><span class='Delimiter'>, 
</span><a name="LN1306"></a>                  <span class='Keyword'>int </span><span class='Declare_Parameter'>location</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>make_target_entry</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1308"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>sublevels_up</span><span class='Delimiter'>; 
</span><a name="LN1309"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>rtindex</span><span class='Delimiter'>; 
</span> 
    <a href="parse_target.c.html#LN1309"><span class='Ref_To_Local'>rtindex</span></a> <span class='Operator'>= </span><a href="../../include/parser/parse_relation.h.html#LN47"><span class='Ref_to_Proto'>RTERangeTablePosn</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1305"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN1305"><span class='Ref_to_Parameter'>rte</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="parse_target.c.html#LN1308"><span class='Ref_To_Local'>sublevels_up</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="parse_target.c.html#LN1306"><span class='Ref_to_Parameter'>make_target_entry</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* expandRelAttrs handles permissions marking */ 
</span>        <span class='Control'>return</span> <a href="../../include/parser/parse_relation.h.html#LN123"><span class='Ref_to_Proto'>expandRelAttrs</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1305"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN1305"><span class='Ref_to_Parameter'>rte</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN1309"><span class='Ref_To_Local'>rtindex</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN1308"><span class='Ref_To_Local'>sublevels_up</span></a><span class='Delimiter'>, 
</span>                              <a href="parse_target.c.html#LN1306"><span class='Ref_to_Parameter'>location</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span><a name="LN1321"></a>        <a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>vars</span><span class='Delimiter'>; 
</span><a name="LN1322"></a>        <a href="../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>l</span><span class='Delimiter'>; 
</span> 
        <a href="../../include/parser/parse_relation.h.html#LN120"><span class='Ref_to_Proto'>expandRTE</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1305"><span class='Ref_to_Parameter'>rte</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN1309"><span class='Ref_To_Local'>rtindex</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN1308"><span class='Ref_To_Local'>sublevels_up</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN1306"><span class='Ref_to_Parameter'>location</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, 
</span>                  <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="parse_target.c.html#LN1321"><span class='Ref_To_Local'>vars</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Require read access to the table.  This is normally redundant with 
         * the markVarForSelectPriv calls below, but not if the table has zero 
         * columns. 
         */ 
</span>        <a href="parse_target.c.html#LN1305"><span class='Ref_to_Parameter'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN1027"><span class='Ref_to_Member'>requiredPerms</span></a> <span class='Operator'>|= </span><a href="../../include/nodes/parsenodes.h.html#LN72"><span class='Ref_to_Const'>ACL_SELECT</span></a><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Require read access to each column */ 
</span>        <a href="../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1322"><span class='Ref_To_Local'>l</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN1321"><span class='Ref_To_Local'>vars</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN1337"></a>            <a href="../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>var</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1322"><span class='Ref_To_Local'>l</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <a href="../../include/parser/parse_relation.h.html#LN60"><span class='Ref_to_Proto'>markVarForSelectPriv</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1305"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN1337"><span class='Ref_To_Local'>var</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN1305"><span class='Ref_to_Parameter'>rte</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Control'>return</span> <a href="parse_target.c.html#LN1321"><span class='Ref_To_Local'>vars</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
<span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end ExpandSingleTable &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * ExpandRowReference() 
 *      Transforms foo.* into a list of expressions or targetlist entries. 
 * 
 * This handles the case where foo is an arbitrary expression of composite 
 * type. 
 */ 
</span><span class='Keyword'>static </span><a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>* 
</span><a name="LN1354"></a><span class='Declare_Function'>ExpandRowReference</span><span class='Parentheses'>(</span><a href="../../include/parser/parse_node.h.html#LN164"><span class='Ref_to_Struct'>ParseState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pstate</span><span class='Delimiter'>, </span><a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>expr</span><span class='Delimiter'>, 
</span><a name="LN1355"></a>                   <span class='Keyword'>bool </span><span class='Declare_Parameter'>make_target_entry</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1357"></a>    <a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>result</span> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span><a name="LN1358"></a>    <a href="../../include/access/tupdesc.h.html#LN70"><span class='Ref_to_Typedef'>TupleDesc</span></a>   <span class='Declare_Local'>tupleDesc</span><span class='Delimiter'>; 
</span><a name="LN1359"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>numAttrs</span><span class='Delimiter'>; 
</span><a name="LN1360"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If the rowtype expression is a whole-row Var, we can expand the fields 
     * as simple Vars.  Note: if the RTE is a relation, this case leaves us 
     * with the RTE's selectedCols bitmap showing the whole row as needing 
     * select permission, as well as the individual columns.  However, we can 
     * only get here for weird notations like (table.*).*, so it's not worth 
     * trying to clean up --- arguably, the permissions marking is correct 
     * anyway for such cases. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1354"><span class='Ref_to_Parameter'>expr</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a><span class='Parentheses'>)</span> <span class='Operator'>&& 
</span>        <span class='Parentheses'>((</span><a href="../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="parse_target.c.html#LN1354"><span class='Ref_to_Parameter'>expr</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>varattno <span class='Operator'>== </span><a href="../../include/access/attnum.h.html#LN22"><span class='Ref_to_Const'>InvalidAttrNumber</span></a><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span><a name="LN1374"></a>        <a href="../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>var</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="parse_target.c.html#LN1354"><span class='Ref_to_Parameter'>expr</span></a><span class='Delimiter'>; 
</span><a name="LN1375"></a>        <a href="../../include/nodes/parsenodes.h.html#LN932"><span class='Ref_to_Struct'>RangeTblEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>rte</span><span class='Delimiter'>; 
</span> 
        <a href="parse_target.c.html#LN1375"><span class='Ref_To_Local'>rte</span></a> <span class='Operator'>= </span><a href="../../include/parser/parse_relation.h.html#LN50"><span class='Ref_to_Proto'>GetRTEByRangeTablePosn</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1354"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN1374"><span class='Ref_To_Local'>var</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN165"><span class='Ref_to_Member'>varno</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN1374"><span class='Ref_To_Local'>var</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN172"><span class='Ref_to_Member'>varlevelsup</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <a href="parse_target.c.html#LN63"><span class='Ref_to_Proto'>ExpandSingleTable</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1354"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN1375"><span class='Ref_To_Local'>rte</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN1374"><span class='Ref_To_Local'>var</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN177"><span class='Ref_to_Member'>location</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN1355"><span class='Ref_to_Parameter'>make_target_entry</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Otherwise we have to do it the hard way.  Our current implementation is 
     * to generate multiple copies of the expression and do FieldSelects. 
     * (This can be pretty inefficient if the expression involves nontrivial 
     * computation :-(.) 
     * 
     * Verify it's a composite type, and get the tupdesc.  We use 
     * get_expr_result_type() because that can handle references to functions 
     * returning anonymous record types.  If that fails, use 
     * lookup_rowtype_tupdesc(), which will almost certainly fail as well, but 
     * it will give an appropriate error message. 
     * 
     * If it's a Var of type RECORD, we have to work even harder: we have to 
     * find what the Var refers to, and pass that to get_expr_result_type. 
     * That task is handled by expandRecordVariable(). 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1354"><span class='Ref_to_Parameter'>expr</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a><span class='Parentheses'>)</span> <span class='Operator'>&& 
</span>        <span class='Parentheses'>((</span><a href="../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="parse_target.c.html#LN1354"><span class='Ref_to_Parameter'>expr</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>vartype <span class='Operator'>== </span><a href="../../include/catalog/pg_type.h.html#LN679"><span class='Ref_to_Const'>RECORDOID</span></a><span class='Parentheses'>)</span> 
        <a href="parse_target.c.html#LN1358"><span class='Ref_To_Local'>tupleDesc</span></a> <span class='Operator'>= </span><a href="../../include/parser/parse_target.h.html#LN40"><span class='Ref_to_Proto'>expandRecordVariable</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1354"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="parse_target.c.html#LN1354"><span class='Ref_to_Parameter'>expr</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/funcapi.h.html#LN160"><span class='Ref_to_Proto'>get_expr_result_type</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1354"><span class='Ref_to_Parameter'>expr</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="parse_target.c.html#LN1358"><span class='Ref_To_Local'>tupleDesc</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><a href="../../include/funcapi.h.html#LN152"><span class='Ref_to_EnumConst'>TYPEFUNC_COMPOSITE</span></a><span class='Parentheses'>)</span> 
        <a href="parse_target.c.html#LN1358"><span class='Ref_To_Local'>tupleDesc</span></a> <span class='Operator'>= </span><a href="../../include/utils/typcache.h.html#LN156"><span class='Ref_to_Proto'>lookup_rowtype_tupdesc_copy</span></a><span class='Parentheses'>(</span><a href="../../include/nodes/nodeFuncs.h.html#LN31"><span class='Ref_to_Proto'>exprType</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1354"><span class='Ref_to_Parameter'>expr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                                <a href="../../include/nodes/nodeFuncs.h.html#LN32"><span class='Ref_to_Proto'>exprTypmod</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1354"><span class='Ref_to_Parameter'>expr</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1358"><span class='Ref_To_Local'>tupleDesc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Generate a list of references to the individual fields */ 
</span>    <a href="parse_target.c.html#LN1359"><span class='Ref_To_Local'>numAttrs</span></a> <span class='Operator'>= </span><a href="parse_target.c.html#LN1358"><span class='Ref_To_Local'>tupleDesc</span></a><span class='Operator'>-&GT;</span><a href="../../include/access/tupdesc.h.html#LN72"><span class='Ref_to_Member'>natts</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="parse_target.c.html#LN1360"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="parse_target.c.html#LN1360"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="parse_target.c.html#LN1359"><span class='Ref_To_Local'>numAttrs</span></a><span class='Delimiter'>; </span><a href="parse_target.c.html#LN1360"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN1409"></a>        <a href="../../include/catalog/pg_attribute.h.html#LN186"><span class='Ref_to_Typedef'>Form_pg_attribute</span></a> <span class='Declare_Local'>att</span> <span class='Operator'>= </span><a href="parse_target.c.html#LN1358"><span class='Ref_To_Local'>tupleDesc</span></a><span class='Operator'>-&GT;</span><a href="../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="parse_target.c.html#LN1360"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span><a name="LN1410"></a>        <a href="../../include/nodes/primnodes.h.html#LN737"><span class='Ref_to_Struct'>FieldSelect</span></a> <span class='Operator'>*</span><span class='Declare_Local'>fselect</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="parse_target.c.html#LN1409"><span class='Ref_To_Local'>att</span></a><span class='Operator'>-&GT;</span>attisdropped<span class='Parentheses'>) 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
        <a href="parse_target.c.html#LN1410"><span class='Ref_To_Local'>fselect</span></a> <span class='Operator'>= </span><a href="../../include/nodes/nodes.h.html#LN556"><span class='Ref_to_Macro'>makeNode</span></a><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN737"><span class='Ref_to_Struct'>FieldSelect</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="parse_target.c.html#LN1410"><span class='Ref_To_Local'>fselect</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN740"><span class='Ref_to_Member'>arg</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/nodes/nodes.h.html#LN618"><span class='Ref_to_Macro'>copyObject</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1354"><span class='Ref_to_Parameter'>expr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="parse_target.c.html#LN1410"><span class='Ref_To_Local'>fselect</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN741"><span class='Ref_to_Member'>fieldnum</span></a> <span class='Operator'>= </span><a href="parse_target.c.html#LN1360"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <a href="parse_target.c.html#LN1410"><span class='Ref_To_Local'>fselect</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN742"><span class='Ref_to_Member'>resulttype</span></a> <span class='Operator'>= </span><a href="parse_target.c.html#LN1409"><span class='Ref_To_Local'>att</span></a><span class='Operator'>-&GT;</span>atttypid<span class='Delimiter'>; 
</span>        <a href="parse_target.c.html#LN1410"><span class='Ref_To_Local'>fselect</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN744"><span class='Ref_to_Member'>resulttypmod</span></a> <span class='Operator'>= </span><a href="parse_target.c.html#LN1409"><span class='Ref_To_Local'>att</span></a><span class='Operator'>-&GT;</span>atttypmod<span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* save attribute's collation for parse_collate.c */ 
</span>        <a href="parse_target.c.html#LN1410"><span class='Ref_To_Local'>fselect</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN745"><span class='Ref_to_Member'>resultcollid</span></a> <span class='Operator'>= </span><a href="parse_target.c.html#LN1409"><span class='Ref_To_Local'>att</span></a><span class='Operator'>-&GT;</span>attcollation<span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="parse_target.c.html#LN1355"><span class='Ref_to_Parameter'>make_target_entry</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* add TargetEntry decoration */ 
</span><a name="LN1426"></a>            <a href="../../include/nodes/primnodes.h.html#LN1363"><span class='Ref_to_Struct'>TargetEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>te</span><span class='Delimiter'>; 
</span> 
            <a href="parse_target.c.html#LN1426"><span class='Ref_To_Local'>te</span></a> <span class='Operator'>= </span><a href="../../include/nodes/makefuncs.h.html#LN40"><span class='Ref_to_Proto'>makeTargetEntry</span></a><span class='Parentheses'>((</span><a href="../../include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a> <span class='Operator'>*</span><span class='Parentheses'>)</span> <a href="parse_target.c.html#LN1410"><span class='Ref_To_Local'>fselect</span></a><span class='Delimiter'>, 
</span>                                 <span class='Parentheses'>(</span><a href="../../include/access/attnum.h.html#LN20"><span class='Ref_to_Typedef'>AttrNumber</span></a><span class='Parentheses'>)</span> <a href="parse_target.c.html#LN1354"><span class='Ref_to_Parameter'>pstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/parser/parse_node.h.html#LN183"><span class='Ref_to_Member'>p_next_resno</span></a><span class='Operator'>++</span><span class='Delimiter'>, 
</span>                                 <a href="../../include/common/fe_memutils.h.html#LN32"><span class='Ref_to_Proto'>pstrdup</span></a><span class='Parentheses'>(</span><a href="../../include/c.h.html#LN498"><span class='Ref_to_Macro'>NameStr</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1409"><span class='Ref_To_Local'>att</span></a><span class='Operator'>-&GT;</span>attname<span class='Parentheses'>))</span><span class='Delimiter'>, 
</span>                                 <span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="parse_target.c.html#LN1357"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../nodes/list.c.html#LN126"><span class='Ref_to_Func'>lappend</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1357"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN1426"><span class='Ref_To_Local'>te</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
            <a href="parse_target.c.html#LN1357"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../nodes/list.c.html#LN126"><span class='Ref_to_Func'>lappend</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1357"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN1410"><span class='Ref_To_Local'>fselect</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;numAttrs;i++ &raquo; </span> 
 
    <span class='Control'>return</span> <a href="parse_target.c.html#LN1357"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end ExpandRowReference &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * expandRecordVariable 
 *      Get the tuple descriptor for a Var of type RECORD, if possible. 
 * 
 * Since no actual table or view column is allowed to have type RECORD, such 
 * a Var must refer to a JOIN or FUNCTION RTE or to a subquery output.  We 
 * drill down to find the ultimate defining expression and attempt to infer 
 * the tupdesc from it.  We ereport if we can't determine the tupdesc. 
 * 
 * levelsup is an extra offset to interpret the Var's varlevelsup correctly. 
 */ 
</span><a href="../../include/access/tupdesc.h.html#LN70"><span class='Ref_to_Typedef'>TupleDesc</span></a> 
<a name="LN1453"></a><span class='Declare_Function'>expandRecordVariable</span><span class='Parentheses'>(</span><a href="../../include/parser/parse_node.h.html#LN164"><span class='Ref_to_Struct'>ParseState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pstate</span><span class='Delimiter'>, </span><a href="../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>var</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>levelsup</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1455"></a>    <a href="../../include/access/tupdesc.h.html#LN70"><span class='Ref_to_Typedef'>TupleDesc</span></a>   <span class='Declare_Local'>tupleDesc</span><span class='Delimiter'>; 
</span><a name="LN1456"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>netlevelsup</span><span class='Delimiter'>; 
</span><a name="LN1457"></a>    <a href="../../include/nodes/parsenodes.h.html#LN932"><span class='Ref_to_Struct'>RangeTblEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>rte</span><span class='Delimiter'>; 
</span><a name="LN1458"></a>    <a href="../../include/access/attnum.h.html#LN20"><span class='Ref_to_Typedef'>AttrNumber</span></a>  <span class='Declare_Local'>attnum</span><span class='Delimiter'>; 
</span><a name="LN1459"></a>    <a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>expr</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Check my caller didn't mess up */ 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1453"><span class='Ref_to_Parameter'>var</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1453"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN169"><span class='Ref_to_Member'>vartype</span></a> <span class='Operator'>== </span><a href="../../include/catalog/pg_type.h.html#LN679"><span class='Ref_to_Const'>RECORDOID</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="parse_target.c.html#LN1456"><span class='Ref_To_Local'>netlevelsup</span></a> <span class='Operator'>= </span><a href="parse_target.c.html#LN1453"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN172"><span class='Ref_to_Member'>varlevelsup</span></a> <span class='Operator'>+ </span><a href="parse_target.c.html#LN1453"><span class='Ref_to_Parameter'>levelsup</span></a><span class='Delimiter'>; 
</span>    <a href="parse_target.c.html#LN1457"><span class='Ref_To_Local'>rte</span></a> <span class='Operator'>= </span><a href="../../include/parser/parse_relation.h.html#LN50"><span class='Ref_to_Proto'>GetRTEByRangeTablePosn</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1453"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN1453"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN165"><span class='Ref_to_Member'>varno</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN1456"><span class='Ref_To_Local'>netlevelsup</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="parse_target.c.html#LN1458"><span class='Ref_To_Local'>attnum</span></a> <span class='Operator'>= </span><a href="parse_target.c.html#LN1453"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN167"><span class='Ref_to_Member'>varattno</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="parse_target.c.html#LN1458"><span class='Ref_To_Local'>attnum</span></a> <span class='Operator'>== </span><a href="../../include/access/attnum.h.html#LN22"><span class='Ref_to_Const'>InvalidAttrNumber</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Whole-row reference to an RTE, so expand the known fields */ 
</span><a name="LN1472"></a>        <a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>names</span><span class='Delimiter'>, 
</span><a name="LN1473"></a>                   <span class='Operator'>*</span><span class='Declare_Local'>vars</span><span class='Delimiter'>; 
</span><a name="LN1474"></a>        <a href="../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lname</span><span class='Delimiter'>, 
</span><a name="LN1475"></a>                   <span class='Operator'>*</span><span class='Declare_Local'>lvar</span><span class='Delimiter'>; 
</span><a name="LN1476"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
        <a href="../../include/parser/parse_relation.h.html#LN120"><span class='Ref_to_Proto'>expandRTE</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1457"><span class='Ref_To_Local'>rte</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN1453"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN165"><span class='Ref_to_Member'>varno</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="parse_target.c.html#LN1453"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN177"><span class='Ref_to_Member'>location</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, 
</span>                  <span class='Operator'>&</span><a href="parse_target.c.html#LN1472"><span class='Ref_To_Local'>names</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="parse_target.c.html#LN1473"><span class='Ref_To_Local'>vars</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="parse_target.c.html#LN1455"><span class='Ref_To_Local'>tupleDesc</span></a> <span class='Operator'>= </span><a href="../access/common/tupdesc.c.html#LN39"><span class='Ref_to_Func'>CreateTemplateTupleDesc</span></a><span class='Parentheses'>(</span><a href="../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1473"><span class='Ref_To_Local'>vars</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="parse_target.c.html#LN1476"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <a href="../../include/nodes/pg_list.h.html#LN179"><span class='Ref_to_Macro'>forboth</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1474"><span class='Ref_To_Local'>lname</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN1472"><span class='Ref_To_Local'>names</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN1475"><span class='Ref_To_Local'>lvar</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN1473"><span class='Ref_To_Local'>vars</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN1485"></a>            <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>label</span> <span class='Operator'>= </span><a href="../../include/nodes/value.h.html#LN53"><span class='Ref_to_Macro'>strVal</span></a><span class='Parentheses'>(</span><a href="../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1474"><span class='Ref_To_Local'>lname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span><a name="LN1486"></a>            <a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>varnode</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1475"><span class='Ref_To_Local'>lvar</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <a href="../../include/access/tupdesc.h.html#LN114"><span class='Ref_to_Proto'>TupleDescInitEntry</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1455"><span class='Ref_To_Local'>tupleDesc</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN1476"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, 
</span>                               <a href="parse_target.c.html#LN1485"><span class='Ref_To_Local'>label</span></a><span class='Delimiter'>, 
</span>                               <a href="../../include/nodes/nodeFuncs.h.html#LN31"><span class='Ref_to_Proto'>exprType</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1486"><span class='Ref_To_Local'>varnode</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                               <a href="../../include/nodes/nodeFuncs.h.html#LN32"><span class='Ref_to_Proto'>exprTypmod</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1486"><span class='Ref_To_Local'>varnode</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                               <span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../include/access/tupdesc.h.html#LN128"><span class='Ref_to_Proto'>TupleDescInitEntryCollation</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1455"><span class='Ref_To_Local'>tupleDesc</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN1476"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, 
</span>                                        <a href="../../include/nodes/nodeFuncs.h.html#LN38"><span class='Ref_to_Proto'>exprCollation</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1486"><span class='Ref_To_Local'>varnode</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="parse_target.c.html#LN1476"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1474"><span class='Ref_To_Local'>lname</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL </span><span class='Operator'>&& </span><a href="parse_target.c.html#LN1475"><span class='Ref_To_Local'>lvar</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>;</span>  <span class='Comment_Single_Line'>/* lists same length? */ 
</span> 
        <span class='Control'>return</span> <a href="parse_target.c.html#LN1455"><span class='Ref_To_Local'>tupleDesc</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if attnum==InvalidAttrNu... &raquo; </span> 
 
    <a href="parse_target.c.html#LN1459"><span class='Ref_To_Local'>expr</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="parse_target.c.html#LN1453"><span class='Ref_to_Parameter'>var</span></a><span class='Delimiter'>;</span>        <span class='Comment_Single_Line'>/* default if we can't drill down */ 
</span> 
    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="parse_target.c.html#LN1457"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN936"><span class='Ref_to_Member'>rtekind</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>case</span> <a href="../../include/nodes/parsenodes.h.html#LN922"><span class='Ref_to_EnumConst'>RTE_RELATION</span></a><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="../../include/nodes/parsenodes.h.html#LN927"><span class='Ref_to_EnumConst'>RTE_VALUES</span></a><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="../../include/nodes/parsenodes.h.html#LN929"><span class='Ref_to_EnumConst'>RTE_NAMEDTUPLESTORE</span></a><span class='Operator'>: 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * This case should not occur: a column of a table or values list 
             * shouldn't have type RECORD.  Fall through and fail (most 
             * likely) at the bottom. 
             */ 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../include/nodes/parsenodes.h.html#LN923"><span class='Ref_to_EnumConst'>RTE_SUBQUERY</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* Subselect-in-FROM: examine sub-select's output expr */ 
</span><a name="LN1519"></a>                <a href="../../include/nodes/primnodes.h.html#LN1363"><span class='Ref_to_Struct'>TargetEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>ste</span> <span class='Operator'>= </span><a href="../../include/parser/parsetree.h.html#LN69"><span class='Ref_to_Proto'>get_tle_by_resno</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1457"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN954"><span class='Ref_to_Member'>subquery</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN137"><span class='Ref_to_Member'>targetList</span></a><span class='Delimiter'>, 
</span>                                                    <a href="parse_target.c.html#LN1458"><span class='Ref_To_Local'>attnum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="parse_target.c.html#LN1519"><span class='Ref_To_Local'>ste</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL </span><span class='Operator'>|| </span><a href="parse_target.c.html#LN1519"><span class='Ref_To_Local'>ste</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1373"><span class='Ref_to_Member'>resjunk</span></a><span class='Parentheses'>) 
</span>                    <a href="../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"subquery %s does not have attribute %d"</span><span class='Delimiter'>, 
</span>                         <a href="parse_target.c.html#LN1457"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN1023"><span class='Ref_to_Member'>eref</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN41"><span class='Ref_to_Member'>aliasname</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN1458"><span class='Ref_To_Local'>attnum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="parse_target.c.html#LN1459"><span class='Ref_To_Local'>expr</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="parse_target.c.html#LN1519"><span class='Ref_To_Local'>ste</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1366"><span class='Ref_to_Member'>expr</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1459"><span class='Ref_To_Local'>expr</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a><span class='Parentheses'>))</span> 
                <span class='Delimiter'>{ 
</span>                    <span class='Comment_Multi_Line'>/* 
                     * Recurse into the sub-select to see what its Var refers 
                     * to.  We have to build an additional level of ParseState 
                     * to keep in step with varlevelsup in the subselect. 
                     */ 
</span><a name="LN1533"></a>                    <a href="../../include/parser/parse_node.h.html#LN164"><span class='Ref_to_Struct'>ParseState</span></a>  <span class='Declare_Local'>mypstate</span><span class='Delimiter'>; 
</span> 
                    <a href="../../include/c.h.html#LN856"><span class='Ref_to_Macro'>MemSet</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="parse_target.c.html#LN1533"><span class='Ref_To_Local'>mypstate</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1533"><span class='Ref_To_Local'>mypstate</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                    <a href="parse_target.c.html#LN1533"><span class='Ref_To_Local'>mypstate</span></a><span class='Operator'>.</span><a href="../../include/parser/parse_node.h.html#LN166"><span class='Ref_to_Member'>parentParseState</span></a> <span class='Operator'>= </span><a href="parse_target.c.html#LN1453"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>; 
</span>                    <a href="parse_target.c.html#LN1533"><span class='Ref_To_Local'>mypstate</span></a><span class='Operator'>.</span><a href="../../include/parser/parse_node.h.html#LN168"><span class='Ref_to_Member'>p_rtable</span></a> <span class='Operator'>= </span><a href="parse_target.c.html#LN1457"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN954"><span class='Ref_to_Member'>subquery</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN134"><span class='Ref_to_Member'>rtable</span></a><span class='Delimiter'>; 
</span>                    <span class='Comment_Multi_Line'>/* don't bother filling the rest of the fake pstate */ 
</span> 
                    <span class='Control'>return</span> <a href="../../include/parser/parse_target.h.html#LN40"><span class='Ref_to_Proto'>expandRecordVariable</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="parse_target.c.html#LN1533"><span class='Ref_To_Local'>mypstate</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="parse_target.c.html#LN1459"><span class='Ref_To_Local'>expr</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Comment_Multi_Line'>/* else fall through to inspect the expression */ 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../include/nodes/parsenodes.h.html#LN924"><span class='Ref_to_EnumConst'>RTE_JOIN</span></a><span class='Operator'>: 
</span>            <span class='Comment_Multi_Line'>/* Join RTE --- recursively inspect the alias variable */ 
</span>            <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1458"><span class='Ref_To_Local'>attnum</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="parse_target.c.html#LN1458"><span class='Ref_To_Local'>attnum</span></a> <span class='Operator'>&LT;= </span><a href="../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1457"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN975"><span class='Ref_to_Member'>joinaliasvars</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="parse_target.c.html#LN1459"><span class='Ref_To_Local'>expr</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/nodes/pg_list.h.html#LN223"><span class='Ref_to_Proto'>list_nth</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1457"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN975"><span class='Ref_to_Member'>joinaliasvars</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN1458"><span class='Ref_To_Local'>attnum</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1459"><span class='Ref_To_Local'>expr</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Comment_Multi_Line'>/* We intentionally don't strip implicit coercions here */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1459"><span class='Ref_To_Local'>expr</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a><span class='Parentheses'>))</span> 
                <span class='Control'>return</span> <a href="../../include/parser/parse_target.h.html#LN40"><span class='Ref_to_Proto'>expandRecordVariable</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1453"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="parse_target.c.html#LN1459"><span class='Ref_To_Local'>expr</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN1456"><span class='Ref_To_Local'>netlevelsup</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Comment_Multi_Line'>/* else fall through to inspect the expression */ 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../include/nodes/parsenodes.h.html#LN925"><span class='Ref_to_EnumConst'>RTE_FUNCTION</span></a><span class='Operator'>: 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * We couldn't get here unless a function is declared with one of 
             * its result columns as RECORD, which is not allowed. 
             */ 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../include/nodes/parsenodes.h.html#LN926"><span class='Ref_to_EnumConst'>RTE_TABLEFUNC</span></a><span class='Operator'>: 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * Table function cannot have columns with RECORD type. 
             */ 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../include/nodes/parsenodes.h.html#LN928"><span class='Ref_to_EnumConst'>RTE_CTE</span></a><span class='Operator'>: 
</span>            <span class='Comment_Multi_Line'>/* CTE reference: examine subquery's output expr */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="parse_target.c.html#LN1457"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN1003"><span class='Ref_to_Member'>self_reference</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span><a name="LN1572"></a>                <a href="../../include/nodes/parsenodes.h.html#LN1339"><span class='Ref_to_Struct'>CommonTableExpr</span></a> <span class='Operator'>*</span><span class='Declare_Local'>cte</span> <span class='Operator'>= </span><a href="../../include/parser/parse_relation.h.html#LN53"><span class='Ref_to_Proto'>GetCTEForRTE</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1453"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN1457"><span class='Ref_To_Local'>rte</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN1456"><span class='Ref_To_Local'>netlevelsup</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1573"></a>                <a href="../../include/nodes/primnodes.h.html#LN1363"><span class='Ref_to_Struct'>TargetEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>ste</span><span class='Delimiter'>; 
</span> 
                <a href="parse_target.c.html#LN1573"><span class='Ref_To_Local'>ste</span></a> <span class='Operator'>= </span><a href="../../include/parser/parsetree.h.html#LN69"><span class='Ref_to_Proto'>get_tle_by_resno</span></a><span class='Parentheses'>(</span><a href="../../include/nodes/parsenodes.h.html#LN1358"><span class='Ref_to_Macro'>GetCTETargetList</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1572"><span class='Ref_To_Local'>cte</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="parse_target.c.html#LN1458"><span class='Ref_To_Local'>attnum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="parse_target.c.html#LN1573"><span class='Ref_To_Local'>ste</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL </span><span class='Operator'>|| </span><a href="parse_target.c.html#LN1573"><span class='Ref_To_Local'>ste</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1373"><span class='Ref_to_Member'>resjunk</span></a><span class='Parentheses'>) 
</span>                    <a href="../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"subquery %s does not have attribute %d"</span><span class='Delimiter'>, 
</span>                         <a href="parse_target.c.html#LN1457"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN1023"><span class='Ref_to_Member'>eref</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN41"><span class='Ref_to_Member'>aliasname</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN1458"><span class='Ref_To_Local'>attnum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="parse_target.c.html#LN1459"><span class='Ref_To_Local'>expr</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="parse_target.c.html#LN1573"><span class='Ref_To_Local'>ste</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1366"><span class='Ref_to_Member'>expr</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1459"><span class='Ref_To_Local'>expr</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a><span class='Parentheses'>))</span> 
                <span class='Delimiter'>{ 
</span>                    <span class='Comment_Multi_Line'>/* 
                     * Recurse into the CTE to see what its Var refers to. We 
                     * have to build an additional level of ParseState to keep 
                     * in step with varlevelsup in the CTE; furthermore it 
                     * could be an outer CTE. 
                     */ 
</span><a name="LN1588"></a>                    <a href="../../include/parser/parse_node.h.html#LN164"><span class='Ref_to_Struct'>ParseState</span></a>  <span class='Declare_Local'>mypstate</span><span class='Delimiter'>; 
</span><a name="LN1589"></a>                    <a href="../../include/c.h.html#LN364"><span class='Ref_to_Typedef'>Index</span></a>       <span class='Declare_Local'>levelsup</span><span class='Delimiter'>; 
</span> 
                    <a href="../../include/c.h.html#LN856"><span class='Ref_to_Macro'>MemSet</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="parse_target.c.html#LN1588"><span class='Ref_To_Local'>mypstate</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1588"><span class='Ref_To_Local'>mypstate</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                    <span class='Comment_Multi_Line'>/* this loop must work, since GetCTEForRTE did */ 
</span>                    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="parse_target.c.html#LN1589"><span class='Ref_To_Local'>levelsup</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>                         <a href="parse_target.c.html#LN1589"><span class='Ref_To_Local'>levelsup</span></a> <span class='Operator'>&LT; </span><a href="parse_target.c.html#LN1457"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN1002"><span class='Ref_to_Member'>ctelevelsup</span></a> <span class='Operator'>+ </span><a href="parse_target.c.html#LN1456"><span class='Ref_To_Local'>netlevelsup</span></a><span class='Delimiter'>; 
</span>                         <a href="parse_target.c.html#LN1589"><span class='Ref_To_Local'>levelsup</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>                        <a href="parse_target.c.html#LN1453"><span class='Ref_to_Parameter'>pstate</span></a> <span class='Operator'>= </span><a href="parse_target.c.html#LN1453"><span class='Ref_to_Parameter'>pstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/parser/parse_node.h.html#LN166"><span class='Ref_to_Member'>parentParseState</span></a><span class='Delimiter'>; 
</span>                    <a href="parse_target.c.html#LN1588"><span class='Ref_To_Local'>mypstate</span></a><span class='Operator'>.</span><a href="../../include/parser/parse_node.h.html#LN166"><span class='Ref_to_Member'>parentParseState</span></a> <span class='Operator'>= </span><a href="parse_target.c.html#LN1453"><span class='Ref_to_Parameter'>pstate</span></a><span class='Delimiter'>; 
</span>                    <a href="parse_target.c.html#LN1588"><span class='Ref_To_Local'>mypstate</span></a><span class='Operator'>.</span><a href="../../include/parser/parse_node.h.html#LN168"><span class='Ref_to_Member'>p_rtable</span></a> <span class='Operator'>= </span><span class='Parentheses'>((</span><a href="../../include/nodes/parsenodes.h.html#LN105"><span class='Ref_to_Struct'>Query</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="parse_target.c.html#LN1572"><span class='Ref_To_Local'>cte</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN1345"><span class='Ref_to_Member'>ctequery</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>rtable<span class='Delimiter'>; 
</span>                    <span class='Comment_Multi_Line'>/* don't bother filling the rest of the fake pstate */ 
</span> 
                    <span class='Control'>return</span> <a href="../../include/parser/parse_target.h.html#LN40"><span class='Ref_to_Proto'>expandRecordVariable</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="parse_target.c.html#LN1588"><span class='Ref_To_Local'>mypstate</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="parse_target.c.html#LN1459"><span class='Ref_To_Local'>expr</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if IsA(expr,Var) &raquo; </span> 
                <span class='Comment_Multi_Line'>/* else fall through to inspect the expression */ 
</span>            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if !rte-&GT;self_reference &raquo; </span> 
            <span class='Control'>break</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch rte-&GT;rtekind &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* 
     * We now have an expression we can't expand any more, so see if 
     * get_expr_result_type() can do anything with it.  If not, pass to 
     * lookup_rowtype_tupdesc() which will probably fail, but will give an 
     * appropriate error message while failing. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/funcapi.h.html#LN160"><span class='Ref_to_Proto'>get_expr_result_type</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1459"><span class='Ref_To_Local'>expr</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="parse_target.c.html#LN1455"><span class='Ref_To_Local'>tupleDesc</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><a href="../../include/funcapi.h.html#LN152"><span class='Ref_to_EnumConst'>TYPEFUNC_COMPOSITE</span></a><span class='Parentheses'>)</span> 
        <a href="parse_target.c.html#LN1455"><span class='Ref_To_Local'>tupleDesc</span></a> <span class='Operator'>= </span><a href="../../include/utils/typcache.h.html#LN156"><span class='Ref_to_Proto'>lookup_rowtype_tupdesc_copy</span></a><span class='Parentheses'>(</span><a href="../../include/nodes/nodeFuncs.h.html#LN31"><span class='Ref_to_Proto'>exprType</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1459"><span class='Ref_To_Local'>expr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                                <a href="../../include/nodes/nodeFuncs.h.html#LN32"><span class='Ref_to_Proto'>exprTypmod</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1459"><span class='Ref_To_Local'>expr</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="parse_target.c.html#LN1455"><span class='Ref_To_Local'>tupleDesc</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end expandRecordVariable &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* 
 * FigureColname - 
 *    if the name of the resulting column is not specified in the target 
 *    list, we have to guess a suitable name.  The SQL spec provides some 
 *    guidance, but not much... 
 * 
 * Note that the argument is the *untransformed* parse tree for the target 
 * item.  This is a shade easier to work with than the transformed tree. 
 */ 
</span><span class='Keyword'>char </span><span class='Operator'>* 
</span><a name="LN1632"></a><span class='Declare_Function'>FigureColname</span><span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1634"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>name</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>) </span><a href="parse_target.c.html#LN67"><span class='Ref_to_Proto'>FigureColnameInternal</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1632"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="parse_target.c.html#LN1634"><span class='Ref_To_Local'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="parse_target.c.html#LN1634"><span class='Ref_To_Local'>name</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <a href="parse_target.c.html#LN1634"><span class='Ref_To_Local'>name</span></a><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* default result if we can't guess anything */ 
</span>    <span class='Control'>return</span> <span class='String'>"?column?"</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * FigureIndexColname - 
 *    choose the name for an expression column in an index 
 * 
 * This is actually just like FigureColname, except we return NULL if 
 * we can't pick a good name. 
 */ 
</span><span class='Keyword'>char </span><span class='Operator'>* 
</span><a name="LN1651"></a><span class='Declare_Function'>FigureIndexColname</span><span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1653"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>name</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>) </span><a href="parse_target.c.html#LN67"><span class='Ref_to_Proto'>FigureColnameInternal</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1651"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="parse_target.c.html#LN1653"><span class='Ref_To_Local'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="parse_target.c.html#LN1653"><span class='Ref_To_Local'>name</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * FigureColnameInternal - 
 *    internal workhorse for FigureColname 
 * 
 * Return value indicates strength of confidence in result: 
 *      0 - no information 
 *      1 - second-best name choice 
 *      2 - good name choice 
 * The return value is actually only used internally. 
 * If the result isn't zero, *name is set to the chosen name. 
 */ 
</span><span class='Keyword'>static int 
</span><a name="LN1671"></a><span class='Declare_Function'>FigureColnameInternal</span><span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>**</span><span class='Declare_Parameter'>name</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1673"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>strength</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="parse_target.c.html#LN1671"><span class='Ref_to_Parameter'>node</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <a href="parse_target.c.html#LN1673"><span class='Ref_To_Local'>strength</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN513"><span class='Ref_to_Macro'>nodeTag</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1671"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>case</span> <a href="../../include/nodes/nodes.h.html#LN420"><span class='Ref_to_EnumConst'>T_ColumnRef</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN1682"></a>                <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>fname</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN1683"></a>                <a href="../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>l</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* find last field name, if any, ignoring "*" */ 
</span>                <a href="../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1683"><span class='Ref_To_Local'>l</span></a><span class='Delimiter'>, </span><span class='Parentheses'>((</span><a href="../../include/nodes/parsenodes.h.html#LN231"><span class='Ref_to_Struct'>ColumnRef</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="parse_target.c.html#LN1671"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>fields<span class='Parentheses'>)</span> 
                <span class='Delimiter'>{ 
</span><a name="LN1688"></a>                    <a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>i</span> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1683"><span class='Ref_To_Local'>l</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1688"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span>String<span class='Parentheses'>))</span> 
                        <a href="parse_target.c.html#LN1682"><span class='Ref_To_Local'>fname</span></a> <span class='Operator'>= </span><a href="../../include/nodes/value.h.html#LN53"><span class='Ref_to_Macro'>strVal</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1688"><span class='Ref_To_Local'>i</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="parse_target.c.html#LN1682"><span class='Ref_To_Local'>fname</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Operator'>*</span><a href="parse_target.c.html#LN1671"><span class='Ref_to_Parameter'>name</span></a> <span class='Operator'>= </span><a href="parse_target.c.html#LN1682"><span class='Ref_To_Local'>fname</span></a><span class='Delimiter'>; 
</span>                    <span class='Control'>return</span> <span class='Number'>2</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../include/nodes/nodes.h.html#LN426"><span class='Ref_to_EnumConst'>T_A_Indirection</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN1702"></a>                <a href="../../include/nodes/parsenodes.h.html#LN401"><span class='Ref_to_Struct'>A_Indirection</span></a> <span class='Operator'>*</span><span class='Declare_Local'>ind</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/parsenodes.h.html#LN401"><span class='Ref_to_Struct'>A_Indirection</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="parse_target.c.html#LN1671"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span><a name="LN1703"></a>                <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>fname</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN1704"></a>                <a href="../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>l</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* find last field name, if any, ignoring "*" and subscripts */ 
</span>                <a href="../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1704"><span class='Ref_To_Local'>l</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN1702"><span class='Ref_To_Local'>ind</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN405"><span class='Ref_to_Member'>indirection</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span><a name="LN1709"></a>                    <a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>i</span> <span class='Operator'>= </span><a href="../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1704"><span class='Ref_To_Local'>l</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1709"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span>String<span class='Parentheses'>))</span> 
                        <a href="parse_target.c.html#LN1703"><span class='Ref_To_Local'>fname</span></a> <span class='Operator'>= </span><a href="../../include/nodes/value.h.html#LN53"><span class='Ref_to_Macro'>strVal</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1709"><span class='Ref_To_Local'>i</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="parse_target.c.html#LN1703"><span class='Ref_To_Local'>fname</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Operator'>*</span><a href="parse_target.c.html#LN1671"><span class='Ref_to_Parameter'>name</span></a> <span class='Operator'>= </span><a href="parse_target.c.html#LN1703"><span class='Ref_To_Local'>fname</span></a><span class='Delimiter'>; 
</span>                    <span class='Control'>return</span> <span class='Number'>2</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>return</span> <a href="parse_target.c.html#LN67"><span class='Ref_to_Proto'>FigureColnameInternal</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1702"><span class='Ref_To_Local'>ind</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN404"><span class='Ref_to_Member'>arg</span></a><span class='Delimiter'>, </span><a href="parse_target.c.html#LN1671"><span class='Ref_to_Parameter'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../include/nodes/nodes.h.html#LN423"><span class='Ref_to_EnumConst'>T_FuncCall</span></a><span class='Operator'>: 
</span>            <span class='Operator'>*</span><a href="parse_target.c.html#LN1671"><span class='Ref_to_Parameter'>name</span></a> <span class='Operator'>= </span><a href="../../include/nodes/value.h.html#LN53"><span class='Ref_to_Macro'>strVal</span></a><span class='Parentheses'>(</span><a href="../../include/nodes/pg_list.h.html#LN130"><span class='Ref_to_Macro'>llast</span></a><span class='Parentheses'>(((</span><a href="../../include/nodes/parsenodes.h.html#LN346"><span class='Ref_to_Struct'>FuncCall</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="parse_target.c.html#LN1671"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>funcname<span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <span class='Control'>return</span> <span class='Number'>2</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../include/nodes/nodes.h.html#LN419"><span class='Ref_to_EnumConst'>T_A_Expr</span></a><span class='Operator'>: 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(((</span><a href="../../include/nodes/parsenodes.h.html#LN271"><span class='Ref_to_Struct'>A_Expr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="parse_target.c.html#LN1671"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>kind <span class='Operator'>== </span><a href="../../include/nodes/parsenodes.h.html#LN258"><span class='Ref_to_EnumConst'>AEXPR_NULLIF</span></a><span class='Parentheses'>)</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* make nullif() act like a regular function */ 
</span>                <span class='Operator'>*</span><a href="parse_target.c.html#LN1671"><span class='Ref_to_Parameter'>name</span></a> <span class='Operator'>= </span><span class='String'>"nullif"</span><span class='Delimiter'>; 
</span>                <span class='Control'>return</span> <span class='Number'>2</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(((</span><a href="../../include/nodes/parsenodes.h.html#LN271"><span class='Ref_to_Struct'>A_Expr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="parse_target.c.html#LN1671"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>kind <span class='Operator'>== </span><a href="../../include/nodes/parsenodes.h.html#LN268"><span class='Ref_to_EnumConst'>AEXPR_PAREN</span></a><span class='Parentheses'>)</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* look through dummy parenthesis node */ 
</span>                <span class='Control'>return</span> <a href="parse_target.c.html#LN67"><span class='Ref_to_Proto'>FigureColnameInternal</span></a><span class='Parentheses'>(((</span><a href="../../include/nodes/parsenodes.h.html#LN271"><span class='Ref_to_Struct'>A_Expr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="parse_target.c.html#LN1671"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>lexpr<span class='Delimiter'>, </span><a href="parse_target.c.html#LN1671"><span class='Ref_to_Parameter'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../include/nodes/nodes.h.html#LN430"><span class='Ref_to_EnumConst'>T_TypeCast</span></a><span class='Operator'>: 
</span>            <a href="parse_target.c.html#LN1673"><span class='Ref_To_Local'>strength</span></a> <span class='Operator'>= </span><a href="parse_target.c.html#LN67"><span class='Ref_to_Proto'>FigureColnameInternal</span></a><span class='Parentheses'>(((</span><a href="../../include/nodes/parsenodes.h.html#LN294"><span class='Ref_to_Struct'>TypeCast</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="parse_target.c.html#LN1671"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>arg<span class='Delimiter'>, 
</span>                                             <a href="parse_target.c.html#LN1671"><span class='Ref_to_Parameter'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="parse_target.c.html#LN1673"><span class='Ref_To_Local'>strength</span></a> <span class='Operator'>&LT;= </span><span class='Number'>1</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(((</span><a href="../../include/nodes/parsenodes.h.html#LN294"><span class='Ref_to_Struct'>TypeCast</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="parse_target.c.html#LN1671"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>typeName <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
                <span class='Delimiter'>{ 
</span>                    <span class='Operator'>*</span><a href="parse_target.c.html#LN1671"><span class='Ref_to_Parameter'>name</span></a> <span class='Operator'>= </span><a href="../../include/nodes/value.h.html#LN53"><span class='Ref_to_Macro'>strVal</span></a><span class='Parentheses'>(</span><a href="../../include/nodes/pg_list.h.html#LN130"><span class='Ref_to_Macro'>llast</span></a><span class='Parentheses'>(((</span><a href="../../include/nodes/parsenodes.h.html#LN294"><span class='Ref_to_Struct'>TypeCast</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="parse_target.c.html#LN1671"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>typeName<span class='Operator'>-&GT;</span>names<span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                    <span class='Control'>return</span> <span class='Number'>1</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../include/nodes/nodes.h.html#LN431"><span class='Ref_to_EnumConst'>T_CollateClause</span></a><span class='Operator'>: 
</span>            <span class='Control'>return</span> <a href="parse_target.c.html#LN67"><span class='Ref_to_Proto'>FigureColnameInternal</span></a><span class='Parentheses'>(((</span><a href="../../include/nodes/parsenodes.h.html#LN305"><span class='Ref_to_Struct'>CollateClause</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="parse_target.c.html#LN1671"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>arg<span class='Delimiter'>, </span><a href="parse_target.c.html#LN1671"><span class='Ref_to_Parameter'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../include/nodes/nodes.h.html#LN149"><span class='Ref_to_EnumConst'>T_GroupingFunc</span></a><span class='Operator'>: 
</span>            <span class='Comment_Multi_Line'>/* make GROUPING() act like a regular function */ 
</span>            <span class='Operator'>*</span><a href="parse_target.c.html#LN1671"><span class='Ref_to_Parameter'>name</span></a> <span class='Operator'>= </span><span class='String'>"grouping"</span><span class='Delimiter'>; 
</span>            <span class='Control'>return</span> <span class='Number'>2</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../include/nodes/nodes.h.html#LN159"><span class='Ref_to_EnumConst'>T_SubLink</span></a><span class='Operator'>: 
</span>            <span class='Control'>switch</span> <span class='Parentheses'>(((</span><a href="../../include/nodes/primnodes.h.html#LN629"><span class='Ref_to_Struct'>SubLink</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="parse_target.c.html#LN1671"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>subLinkType<span class='Parentheses'>)</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Control'>case</span> <a href="../../include/nodes/primnodes.h.html#LN618"><span class='Ref_to_EnumConst'>EXISTS_SUBLINK</span></a><span class='Operator'>: 
</span>                    <span class='Operator'>*</span><a href="parse_target.c.html#LN1671"><span class='Ref_to_Parameter'>name</span></a> <span class='Operator'>= </span><span class='String'>"exists"</span><span class='Delimiter'>; 
</span>                    <span class='Control'>return</span> <span class='Number'>2</span><span class='Delimiter'>; 
</span>                <span class='Control'>case</span> <a href="../../include/nodes/primnodes.h.html#LN624"><span class='Ref_to_EnumConst'>ARRAY_SUBLINK</span></a><span class='Operator'>: 
</span>                    <span class='Operator'>*</span><a href="parse_target.c.html#LN1671"><span class='Ref_to_Parameter'>name</span></a> <span class='Operator'>= </span><span class='String'>"array"</span><span class='Delimiter'>; 
</span>                    <span class='Control'>return</span> <span class='Number'>2</span><span class='Delimiter'>; 
</span>                <span class='Control'>case</span> <a href="../../include/nodes/primnodes.h.html#LN622"><span class='Ref_to_EnumConst'>EXPR_SUBLINK</span></a><span class='Operator'>: 
</span>                    <span class='Delimiter'>{ 
</span>                        <span class='Comment_Multi_Line'>/* Get column name of the subquery's single target */ 
</span><a name="LN1768"></a>                        <a href="../../include/nodes/primnodes.h.html#LN629"><span class='Ref_to_Struct'>SubLink</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>sublink</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN629"><span class='Ref_to_Struct'>SubLink</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="parse_target.c.html#LN1671"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span><a name="LN1769"></a>                        <a href="../../include/nodes/parsenodes.h.html#LN105"><span class='Ref_to_Struct'>Query</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>query</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/parsenodes.h.html#LN105"><span class='Ref_to_Struct'>Query</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="parse_target.c.html#LN1768"><span class='Ref_To_Local'>sublink</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN636"><span class='Ref_to_Member'>subselect</span></a><span class='Delimiter'>; 
</span> 
                        <span class='Comment_Multi_Line'>/* 
                         * The subquery has probably already been transformed, 
                         * but let's be careful and check that.  (The reason 
                         * we can see a transformed subquery here is that 
                         * transformSubLink is lazy and modifies the SubLink 
                         * node in-place.) 
                         */ 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1769"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><a href="../../include/nodes/parsenodes.h.html#LN105"><span class='Ref_to_Struct'>Query</span></a><span class='Parentheses'>))</span> 
                        <span class='Delimiter'>{ 
</span><a name="LN1780"></a>                            <a href="../../include/nodes/primnodes.h.html#LN1363"><span class='Ref_to_Struct'>TargetEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>te</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/primnodes.h.html#LN1363"><span class='Ref_to_Struct'>TargetEntry</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/nodes/pg_list.h.html#LN110"><span class='Ref_to_Macro'>linitial</span></a><span class='Parentheses'>(</span><a href="parse_target.c.html#LN1769"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN137"><span class='Ref_to_Member'>targetList</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="parse_target.c.html#LN1780"><span class='Ref_To_Local'>te</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1368"><span class='Ref_to_Member'>resname</span></a><span class='Parentheses'>) 
</span>                            <span class='Delimiter'>{ 
</span>                                <span class='Operator'>*</span><a href="parse_target.c.html#LN1671"><span class='Ref_to_Parameter'>name</span></a> <span class='Operator'>= </span><a href="parse_target.c.html#LN1780"><span class='Ref_To_Local'>te</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/primnodes.h.html#LN1368"><span class='Ref_to_Member'>resname</span></a><span class='Delimiter'>; 
</span>                                <span class='Control'>return</span> <span class='Number'>2</span><span class='Delimiter'>; 
</span>                            <span class='Delimiter'>} 
</span>                        <span class='Delimiter'>} 
</span>                    <span class='Delimiter'>} 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Comment_Multi_Line'>/* As with other operator-like nodes, these have no names */ 
</span>                <span class='Control'>case</span> <a href="../../include/nodes/primnodes.h.html#LN623"><span class='Ref_to_EnumConst'>MULTIEXPR_SUBLINK</span></a><span class='Operator'>: 
</span>                <span class='Control'>case</span> <a href="../../include/nodes/primnodes.h.html#LN619"><span class='Ref_to_EnumConst'>ALL_SUBLINK</span></a><span class='Operator'>: 
</span>                <span class='Control'>case</span> <a href="../../include/nodes/primnodes.h.html#LN620"><span class='Ref_to_EnumConst'>ANY_SUBLINK</span></a><span class='Operator'>: 
</span>                <span class='Control'>case</span> <a href="../../include/nodes/primnodes.h.html#LN621"><span class='Ref_to_EnumConst'>ROWCOMPARE_SUBLINK</span></a><span class='Operator'>: 
</span>                <span class='Control'>case</span> <a href="../../include/nodes/primnodes.h.html#LN625"><span class='Ref_to_EnumConst'>CTE_SUBLINK</span></a><span class='Operator'>: 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch ((SubLink*)node)-&GT;sub... &raquo; </span> 
            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../include/nodes/nodes.h.html#LN169"><span class='Ref_to_EnumConst'>T_CaseExpr</span></a><span class='Operator'>: 
</span>            <a href="parse_target.c.html#LN1673"><span class='Ref_To_Local'>strength</span></a> <span class='Operator'>= </span><a href="parse_target.c.html#LN67"><span class='Ref_to_Proto'>FigureColnameInternal</span></a><span class='Parentheses'>((</span><a href="../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>)</span> <span class='Parentheses'>((</span><a href="../../include/nodes/primnodes.h.html#LN901"><span class='Ref_to_Struct'>CaseExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="parse_target.c.html#LN1671"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>defresult<span class='Delimiter'>, 
</span>                                             <a href="parse_target.c.html#LN1671"><span class='Ref_to_Parameter'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="parse_target.c.html#LN1673"><span class='Ref_To_Local'>strength</span></a> <span class='Operator'>&LT;= </span><span class='Number'>1</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Operator'>*</span><a href="parse_target.c.html#LN1671"><span class='Ref_to_Parameter'>name</span></a> <span class='Operator'>= </span><span class='String'>"case"</span><span class='Delimiter'>; 
</span>                <span class='Control'>return</span> <span class='Number'>1</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../include/nodes/nodes.h.html#LN427"><span class='Ref_to_EnumConst'>T_A_ArrayExpr</span></a><span class='Operator'>: 
</span>            <span class='Comment_Multi_Line'>/* make ARRAY[] act like a function */ 
</span>            <span class='Operator'>*</span><a href="parse_target.c.html#LN1671"><span class='Ref_to_Parameter'>name</span></a> <span class='Operator'>= </span><span class='String'>"array"</span><span class='Delimiter'>; 
</span>            <span class='Control'>return</span> <span class='Number'>2</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../include/nodes/nodes.h.html#LN173"><span class='Ref_to_EnumConst'>T_RowExpr</span></a><span class='Operator'>: 
</span>            <span class='Comment_Multi_Line'>/* make ROW() act like a function */ 
</span>            <span class='Operator'>*</span><a href="parse_target.c.html#LN1671"><span class='Ref_to_Parameter'>name</span></a> <span class='Operator'>= </span><span class='String'>"row"</span><span class='Delimiter'>; 
</span>            <span class='Control'>return</span> <span class='Number'>2</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../include/nodes/nodes.h.html#LN175"><span class='Ref_to_EnumConst'>T_CoalesceExpr</span></a><span class='Operator'>: 
</span>            <span class='Comment_Multi_Line'>/* make coalesce() act like a regular function */ 
</span>            <span class='Operator'>*</span><a href="parse_target.c.html#LN1671"><span class='Ref_to_Parameter'>name</span></a> <span class='Operator'>= </span><span class='String'>"coalesce"</span><span class='Delimiter'>; 
</span>            <span class='Control'>return</span> <span class='Number'>2</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../include/nodes/nodes.h.html#LN176"><span class='Ref_to_EnumConst'>T_MinMaxExpr</span></a><span class='Operator'>: 
</span>            <span class='Comment_Multi_Line'>/* make greatest/least act like a regular function */ 
</span>            <span class='Control'>switch</span> <span class='Parentheses'>(((</span><a href="../../include/nodes/primnodes.h.html#LN1058"><span class='Ref_to_Struct'>MinMaxExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="parse_target.c.html#LN1671"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>op<span class='Parentheses'>)</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Control'>case</span> <a href="../../include/nodes/primnodes.h.html#LN1054"><span class='Ref_to_EnumConst'>IS_GREATEST</span></a><span class='Operator'>: 
</span>                    <span class='Operator'>*</span><a href="parse_target.c.html#LN1671"><span class='Ref_to_Parameter'>name</span></a> <span class='Operator'>= </span><span class='String'>"greatest"</span><span class='Delimiter'>; 
</span>                    <span class='Control'>return</span> <span class='Number'>2</span><span class='Delimiter'>; 
</span>                <span class='Control'>case</span> <a href="../../include/nodes/primnodes.h.html#LN1055"><span class='Ref_to_EnumConst'>IS_LEAST</span></a><span class='Operator'>: 
</span>                    <span class='Operator'>*</span><a href="parse_target.c.html#LN1671"><span class='Ref_to_Parameter'>name</span></a> <span class='Operator'>= </span><span class='String'>"least"</span><span class='Delimiter'>; 
</span>                    <span class='Control'>return</span> <span class='Number'>2</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../include/nodes/nodes.h.html#LN177"><span class='Ref_to_EnumConst'>T_SQLValueFunction</span></a><span class='Operator'>: 
</span>            <span class='Comment_Multi_Line'>/* make these act like a function or variable */ 
</span>            <span class='Control'>switch</span> <span class='Parentheses'>(((</span><a href="../../include/nodes/primnodes.h.html#LN1099"><span class='Ref_to_Struct'>SQLValueFunction</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="parse_target.c.html#LN1671"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>op<span class='Parentheses'>)</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Control'>case</span> <a href="../../include/nodes/primnodes.h.html#LN1082"><span class='Ref_to_EnumConst'>SVFOP_CURRENT_DATE</span></a><span class='Operator'>: 
</span>                    <span class='Operator'>*</span><a href="parse_target.c.html#LN1671"><span class='Ref_to_Parameter'>name</span></a> <span class='Operator'>= </span><span class='String'>"current_date"</span><span class='Delimiter'>; 
</span>                    <span class='Control'>return</span> <span class='Number'>2</span><span class='Delimiter'>; 
</span>                <span class='Control'>case</span> <a href="../../include/nodes/primnodes.h.html#LN1083"><span class='Ref_to_EnumConst'>SVFOP_CURRENT_TIME</span></a><span class='Operator'>: 
</span>                <span class='Control'>case</span> <a href="../../include/nodes/primnodes.h.html#LN1084"><span class='Ref_to_EnumConst'>SVFOP_CURRENT_TIME_N</span></a><span class='Operator'>: 
</span>                    <span class='Operator'>*</span><a href="parse_target.c.html#LN1671"><span class='Ref_to_Parameter'>name</span></a> <span class='Operator'>= </span><span class='String'>"current_time"</span><span class='Delimiter'>; 
</span>                    <span class='Control'>return</span> <span class='Number'>2</span><span class='Delimiter'>; 
</span>                <span class='Control'>case</span> <a href="../../include/nodes/primnodes.h.html#LN1085"><span class='Ref_to_EnumConst'>SVFOP_CURRENT_TIMESTAMP</span></a><span class='Operator'>: 
</span>                <span class='Control'>case</span> <a href="../../include/nodes/primnodes.h.html#LN1086"><span class='Ref_to_EnumConst'>SVFOP_CURRENT_TIMESTAMP_N</span></a><span class='Operator'>: 
</span>                    <span class='Operator'>*</span><a href="parse_target.c.html#LN1671"><span class='Ref_to_Parameter'>name</span></a> <span class='Operator'>= </span><span class='String'>"current_timestamp"</span><span class='Delimiter'>; 
</span>                    <span class='Control'>return</span> <span class='Number'>2</span><span class='Delimiter'>; 
</span>                <span class='Control'>case</span> <a href="../../include/nodes/primnodes.h.html#LN1087"><span class='Ref_to_EnumConst'>SVFOP_LOCALTIME</span></a><span class='Operator'>: 
</span>                <span class='Control'>case</span> <a href="../../include/nodes/primnodes.h.html#LN1088"><span class='Ref_to_EnumConst'>SVFOP_LOCALTIME_N</span></a><span class='Operator'>: 
</span>                    <span class='Operator'>*</span><a href="parse_target.c.html#LN1671"><span class='Ref_to_Parameter'>name</span></a> <span class='Operator'>= </span><span class='String'>"localtime"</span><span class='Delimiter'>; 
</span>                    <span class='Control'>return</span> <span class='Number'>2</span><span class='Delimiter'>; 
</span>                <span class='Control'>case</span> <a href="../../include/nodes/primnodes.h.html#LN1089"><span class='Ref_to_EnumConst'>SVFOP_LOCALTIMESTAMP</span></a><span class='Operator'>: 
</span>                <span class='Control'>case</span> <a href="../../include/nodes/primnodes.h.html#LN1090"><span class='Ref_to_EnumConst'>SVFOP_LOCALTIMESTAMP_N</span></a><span class='Operator'>: 
</span>                    <span class='Operator'>*</span><a href="parse_target.c.html#LN1671"><span class='Ref_to_Parameter'>name</span></a> <span class='Operator'>= </span><span class='String'>"localtimestamp"</span><span class='Delimiter'>; 
</span>                    <span class='Control'>return</span> <span class='Number'>2</span><span class='Delimiter'>; 
</span>                <span class='Control'>case</span> <a href="../../include/nodes/primnodes.h.html#LN1091"><span class='Ref_to_EnumConst'>SVFOP_CURRENT_ROLE</span></a><span class='Operator'>: 
</span>                    <span class='Operator'>*</span><a href="parse_target.c.html#LN1671"><span class='Ref_to_Parameter'>name</span></a> <span class='Operator'>= </span><span class='String'>"current_role"</span><span class='Delimiter'>; 
</span>                    <span class='Control'>return</span> <span class='Number'>2</span><span class='Delimiter'>; 
</span>                <span class='Control'>case</span> <a href="../../include/nodes/primnodes.h.html#LN1092"><span class='Ref_to_EnumConst'>SVFOP_CURRENT_USER</span></a><span class='Operator'>: 
</span>                    <span class='Operator'>*</span><a href="parse_target.c.html#LN1671"><span class='Ref_to_Parameter'>name</span></a> <span class='Operator'>= </span><span class='String'>"current_user"</span><span class='Delimiter'>; 
</span>                    <span class='Control'>return</span> <span class='Number'>2</span><span class='Delimiter'>; 
</span>                <span class='Control'>case</span> <a href="../../include/nodes/primnodes.h.html#LN1093"><span class='Ref_to_EnumConst'>SVFOP_USER</span></a><span class='Operator'>: 
</span>                    <span class='Operator'>*</span><a href="parse_target.c.html#LN1671"><span class='Ref_to_Parameter'>name</span></a> <span class='Operator'>= </span><span class='String'>"user"</span><span class='Delimiter'>; 
</span>                    <span class='Control'>return</span> <span class='Number'>2</span><span class='Delimiter'>; 
</span>                <span class='Control'>case</span> <a href="../../include/nodes/primnodes.h.html#LN1094"><span class='Ref_to_EnumConst'>SVFOP_SESSION_USER</span></a><span class='Operator'>: 
</span>                    <span class='Operator'>*</span><a href="parse_target.c.html#LN1671"><span class='Ref_to_Parameter'>name</span></a> <span class='Operator'>= </span><span class='String'>"session_user"</span><span class='Delimiter'>; 
</span>                    <span class='Control'>return</span> <span class='Number'>2</span><span class='Delimiter'>; 
</span>                <span class='Control'>case</span> <a href="../../include/nodes/primnodes.h.html#LN1095"><span class='Ref_to_EnumConst'>SVFOP_CURRENT_CATALOG</span></a><span class='Operator'>: 
</span>                    <span class='Operator'>*</span><a href="parse_target.c.html#LN1671"><span class='Ref_to_Parameter'>name</span></a> <span class='Operator'>= </span><span class='String'>"current_catalog"</span><span class='Delimiter'>; 
</span>                    <span class='Control'>return</span> <span class='Number'>2</span><span class='Delimiter'>; 
</span>                <span class='Control'>case</span> <a href="../../include/nodes/primnodes.h.html#LN1096"><span class='Ref_to_EnumConst'>SVFOP_CURRENT_SCHEMA</span></a><span class='Operator'>: 
</span>                    <span class='Operator'>*</span><a href="parse_target.c.html#LN1671"><span class='Ref_to_Parameter'>name</span></a> <span class='Operator'>= </span><span class='String'>"current_schema"</span><span class='Delimiter'>; 
</span>                    <span class='Control'>return</span> <span class='Number'>2</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch ((SQLValueFunction*)n... &raquo; </span> 
            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../include/nodes/nodes.h.html#LN178"><span class='Ref_to_EnumConst'>T_XmlExpr</span></a><span class='Operator'>: 
</span>            <span class='Comment_Multi_Line'>/* make SQL/XML functions act like a regular function */ 
</span>            <span class='Control'>switch</span> <span class='Parentheses'>(((</span><a href="../../include/nodes/primnodes.h.html#LN1137"><span class='Ref_to_Struct'>XmlExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="parse_target.c.html#LN1671"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>op<span class='Parentheses'>)</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Control'>case</span> <a href="../../include/nodes/primnodes.h.html#LN1121"><span class='Ref_to_EnumConst'>IS_XMLCONCAT</span></a><span class='Operator'>: 
</span>                    <span class='Operator'>*</span><a href="parse_target.c.html#LN1671"><span class='Ref_to_Parameter'>name</span></a> <span class='Operator'>= </span><span class='String'>"xmlconcat"</span><span class='Delimiter'>; 
</span>                    <span class='Control'>return</span> <span class='Number'>2</span><span class='Delimiter'>; 
</span>                <span class='Control'>case</span> <a href="../../include/nodes/primnodes.h.html#LN1122"><span class='Ref_to_EnumConst'>IS_XMLELEMENT</span></a><span class='Operator'>: 
</span>                    <span class='Operator'>*</span><a href="parse_target.c.html#LN1671"><span class='Ref_to_Parameter'>name</span></a> <span class='Operator'>= </span><span class='String'>"xmlelement"</span><span class='Delimiter'>; 
</span>                    <span class='Control'>return</span> <span class='Number'>2</span><span class='Delimiter'>; 
</span>                <span class='Control'>case</span> <a href="../../include/nodes/primnodes.h.html#LN1123"><span class='Ref_to_EnumConst'>IS_XMLFOREST</span></a><span class='Operator'>: 
</span>                    <span class='Operator'>*</span><a href="parse_target.c.html#LN1671"><span class='Ref_to_Parameter'>name</span></a> <span class='Operator'>= </span><span class='String'>"xmlforest"</span><span class='Delimiter'>; 
</span>                    <span class='Control'>return</span> <span class='Number'>2</span><span class='Delimiter'>; 
</span>                <span class='Control'>case</span> <a href="../../include/nodes/primnodes.h.html#LN1124"><span class='Ref_to_EnumConst'>IS_XMLPARSE</span></a><span class='Operator'>: 
</span>                    <span class='Operator'>*</span><a href="parse_target.c.html#LN1671"><span class='Ref_to_Parameter'>name</span></a> <span class='Operator'>= </span><span class='String'>"xmlparse"</span><span class='Delimiter'>; 
</span>                    <span class='Control'>return</span> <span class='Number'>2</span><span class='Delimiter'>; 
</span>                <span class='Control'>case</span> <a href="../../include/nodes/primnodes.h.html#LN1125"><span class='Ref_to_EnumConst'>IS_XMLPI</span></a><span class='Operator'>: 
</span>                    <span class='Operator'>*</span><a href="parse_target.c.html#LN1671"><span class='Ref_to_Parameter'>name</span></a> <span class='Operator'>= </span><span class='String'>"xmlpi"</span><span class='Delimiter'>; 
</span>                    <span class='Control'>return</span> <span class='Number'>2</span><span class='Delimiter'>; 
</span>                <span class='Control'>case</span> <a href="../../include/nodes/primnodes.h.html#LN1126"><span class='Ref_to_EnumConst'>IS_XMLROOT</span></a><span class='Operator'>: 
</span>                    <span class='Operator'>*</span><a href="parse_target.c.html#LN1671"><span class='Ref_to_Parameter'>name</span></a> <span class='Operator'>= </span><span class='String'>"xmlroot"</span><span class='Delimiter'>; 
</span>                    <span class='Control'>return</span> <span class='Number'>2</span><span class='Delimiter'>; 
</span>                <span class='Control'>case</span> <a href="../../include/nodes/primnodes.h.html#LN1127"><span class='Ref_to_EnumConst'>IS_XMLSERIALIZE</span></a><span class='Operator'>: 
</span>                    <span class='Operator'>*</span><a href="parse_target.c.html#LN1671"><span class='Ref_to_Parameter'>name</span></a> <span class='Operator'>= </span><span class='String'>"xmlserialize"</span><span class='Delimiter'>; 
</span>                    <span class='Control'>return</span> <span class='Number'>2</span><span class='Delimiter'>; 
</span>                <span class='Control'>case</span> <a href="../../include/nodes/primnodes.h.html#LN1128"><span class='Ref_to_EnumConst'>IS_DOCUMENT</span></a><span class='Operator'>: 
</span>                    <span class='Comment_Multi_Line'>/* nothing */ 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch ((XmlExpr*)node)-&GT;op &raquo; </span> 
            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../include/nodes/nodes.h.html#LN458"><span class='Ref_to_EnumConst'>T_XmlSerialize</span></a><span class='Operator'>: 
</span>            <span class='Operator'>*</span><a href="parse_target.c.html#LN1671"><span class='Ref_to_Parameter'>name</span></a> <span class='Operator'>= </span><span class='String'>"xmlserialize"</span><span class='Delimiter'>; 
</span>            <span class='Control'>return</span> <span class='Number'>2</span><span class='Delimiter'>; 
</span>        <span class='Control'>default</span><span class='Operator'>: 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch nodeTag(node) &raquo; </span> 
 
    <span class='Control'>return</span> <a href="parse_target.c.html#LN1673"><span class='Ref_To_Local'>strength</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end FigureColnameInternal &raquo; </span> 
</pre>
<table bgcolor='#c0c0c0' width='100%'><tr><td><a href='../../../Contents.html'>Contents</a></td></tr>
</table><hr><p class='blurb' align='center'><a href='http://www.sourceinsight.com'>HTML Created by Source Insight Version 4.00.0084 Built on 2017-02-26</a></p>
</body></html>