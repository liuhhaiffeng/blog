<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta name="generator" content="Source Insight Version 4.00.0084 Built on 2017-02-26">
<meta charset='UTF-8' />
<style type='text/css'><!--
TD {background-color: #C0C0C0; font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.blurb {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.filename {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 120%; font-weight: bold; }
.dirname {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 100%; font-weight: bold; margin-top: 2.5em;}
--></style>
<title>src\backend\regex\regc_nfa.c</title>
<LINK REL=StyleSheet HREF="../../../C_Cpp_Source_File.css" TYPE='text/css' MEDIA=screen>
</head>
<body bgcolor=#ffffff>
<table bgcolor='#c0c0c0' width='100%'>
<tr><td><p class='filename'><b>src\backend\regex\regc_nfa.c</b></p></td>
<td align='right'>
Wed Jun 14 08:25:46 2017
</td></tr>
<tr><td><a href='../../../Contents.html'>Contents</a></td></tr>
</table>
<pre>
</span><span class='Comment_Multi_Line'>/* 
 * NFA utilities. 
 * This file is #included by regcomp.c. 
 * 
 * Copyright (c) 1998, 1999 Henry Spencer.  All rights reserved. 
 * 
 * Development of this software was funded, in part, by Cray Research Inc., 
 * UUNET Communications Services Inc., Sun Microsystems Inc., and Scriptics 
 * Corporation, none of whom are responsible for the results.  The author 
 * thanks all of them. 
 * 
 * Redistribution and use in source and binary forms -- with or without 
 * modification -- are permitted for any purpose, provided that 
 * redistributions in source form retain this entire copyright notice and 
 * indicate the origin and nature of any modifications. 
 * 
 * I'd appreciate being given credit for this package in the documentation 
 * of software which uses it, but that is not a requirement. 
 * 
 * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESS OR IMPLIED WARRANTIES, 
 * INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY 
 * AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL 
 * HENRY SPENCER BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, 
 * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, 
 * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; 
 * OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, 
 * WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR 
 * OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF 
 * ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. 
 * 
 * src/backend/regex/regc_nfa.c 
 * 
 * 
 * One or two things that technically ought to be in here 
 * are actually in color.c, thanks to some incestuous relationships in 
 * the color chains. 
 */ 
</span> 
<a name="LN38"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>NISERR</span><span class='Parentheses'>()</span>    <a href="regexec.c.html#LN122"><span class='Ref_to_Macro'>VISERR</span></a><span class='Parentheses'>(</span><a href="../../include/regex/regguts.h.html#LN314"><span class='Ref_to_Struct'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN327"><span class='Ref_to_Member'>v</span></a><span class='Parentheses'>) 
</span><a name="LN39"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>NERR</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>e</span><span class='Parentheses'>)</span>     <a href="regexec.c.html#LN124"><span class='Ref_to_Macro'>VERR</span></a><span class='Parentheses'>(</span><a href="../../include/regex/regguts.h.html#LN314"><span class='Ref_to_Struct'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN327"><span class='Ref_to_Member'>v</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN39"><span class='Ref_to_Parameter'>e</span></a><span class='Parentheses'>))</span> 
 
 
<span class='Comment_Multi_Line'>/* 
 * newnfa - set up an NFA 
 */ 
</span><span class='Keyword'>static </span><span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN314"><span class='Ref_to_Struct'>nfa</span></a> <span class='Operator'>*</span>             <span class='Comment_Single_Line'>/* the NFA, or NULL */ 
</span><a name="LN46"></a><span class='Declare_Function'>newnfa</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="regexec.c.html#LN102"><span class='Ref_to_Struct'>vars</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>v</span><span class='Delimiter'>, 
</span><a name="LN47"></a>       <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN205"><span class='Ref_to_Struct'>colormap</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>cm</span><span class='Delimiter'>, 
</span><a name="LN48"></a>       <span class='Control'>struct</span> <a href="regc_nfa.c.html#LN50"><span class='Ref_To_Local'>nfa</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>parent</span><span class='Parentheses'>)</span>     <span class='Comment_Single_Line'>/* NULL if primary NFA */ 
</span><span class='Delimiter'>{ 
</span><a name="LN50"></a>    <span class='Control'>struct</span> <a href="regc_nfa.c.html#LN50"><span class='Ref_To_Local'>nfa</span></a> <span class='Operator'>*</span><span class='Declare_Local'>nfa</span><span class='Delimiter'>; 
</span> 
    <a href="regc_nfa.c.html#LN50"><span class='Ref_To_Local'>nfa</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="regc_nfa.c.html#LN50"><span class='Ref_To_Local'>nfa</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/regex/regcustom.h.html#LN61"><span class='Ref_to_Macro'>MALLOC</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="regc_nfa.c.html#LN50"><span class='Ref_To_Local'>nfa</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN50"><span class='Ref_To_Local'>nfa</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="regexec.c.html#LN125"><span class='Ref_to_Macro'>ERR</span></a><span class='Parentheses'>(</span><a href="../../include/regex/regex.h.html#LN148"><span class='Ref_to_Const'>REG_ESPACE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="regc_nfa.c.html#LN50"><span class='Ref_To_Local'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN321"><span class='Ref_to_Member'>states</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN50"><span class='Ref_To_Local'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN322"><span class='Ref_to_Member'>slast</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN50"><span class='Ref_To_Local'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN323"><span class='Ref_to_Member'>free</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN50"><span class='Ref_To_Local'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN320"><span class='Ref_to_Member'>nstates</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN50"><span class='Ref_To_Local'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN324"><span class='Ref_to_Member'>cm</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN47"><span class='Ref_to_Parameter'>cm</span></a><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN50"><span class='Ref_To_Local'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN327"><span class='Ref_to_Member'>v</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN46"><span class='Ref_to_Parameter'>v</span></a><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN50"><span class='Ref_To_Local'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN325"><span class='Ref_to_Member'>bos</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="regc_nfa.c.html#LN50"><span class='Ref_To_Local'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN325"><span class='Ref_to_Member'>bos</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="../../include/regex/regguts.h.html#LN136"><span class='Ref_to_Const'>COLORLESS</span></a><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN50"><span class='Ref_To_Local'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN326"><span class='Ref_to_Member'>eos</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="regc_nfa.c.html#LN50"><span class='Ref_To_Local'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN326"><span class='Ref_to_Member'>eos</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="../../include/regex/regguts.h.html#LN136"><span class='Ref_to_Const'>COLORLESS</span></a><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN50"><span class='Ref_To_Local'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN328"><span class='Ref_to_Member'>parent</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN48"><span class='Ref_to_Parameter'>parent</span></a><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* Precedes newfstate so parent is valid. */ 
</span>    <a href="regc_nfa.c.html#LN50"><span class='Ref_To_Local'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN319"><span class='Ref_to_Member'>post</span></a> <span class='Operator'>= </span><a href="regcomp.c.html#LN122"><span class='Ref_to_Proto'>newfstate</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN50"><span class='Ref_To_Local'>nfa</span></a><span class='Delimiter'>, </span><span class='String'>'@'</span><span class='Parentheses'>)</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* number 0 */ 
</span>    <a href="regc_nfa.c.html#LN50"><span class='Ref_To_Local'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN316"><span class='Ref_to_Member'>pre</span></a> <span class='Operator'>= </span><a href="regcomp.c.html#LN122"><span class='Ref_to_Proto'>newfstate</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN50"><span class='Ref_To_Local'>nfa</span></a><span class='Delimiter'>, </span><span class='String'>'&GT;'</span><span class='Parentheses'>)</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* number 1 */ 
</span> 
    <a href="regc_nfa.c.html#LN50"><span class='Ref_To_Local'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN317"><span class='Ref_to_Member'>init</span></a> <span class='Operator'>= </span><a href="regcomp.c.html#LN121"><span class='Ref_to_Proto'>newstate</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN50"><span class='Ref_To_Local'>nfa</span></a><span class='Parentheses'>)</span><span class='Delimiter'>;</span>  <span class='Comment_Single_Line'>/* may become invalid later */ 
</span>    <a href="regc_nfa.c.html#LN50"><span class='Ref_To_Local'>nfa</span></a><span class='Operator'>-&GT;</span><span class='Keyword'>final </span><span class='Operator'>= </span><a href="regcomp.c.html#LN121"><span class='Ref_to_Proto'>newstate</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN50"><span class='Ref_To_Local'>nfa</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regexec.c.html#LN123"><span class='Ref_to_Macro'>ISERR</span></a><span class='Parentheses'>())</span> 
    <span class='Delimiter'>{ 
</span>        <a href="regc_nfa.c.html#LN96"><span class='Ref_to_Func'>freenfa</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN50"><span class='Ref_To_Local'>nfa</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="regcomp.c.html#LN111"><span class='Ref_to_Proto'>rainbow</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN50"><span class='Ref_To_Local'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN50"><span class='Ref_To_Local'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN324"><span class='Ref_to_Member'>cm</span></a><span class='Delimiter'>, </span><a href="regcomp.c.html#LN275"><span class='Ref_to_Const'>PLAIN</span></a><span class='Delimiter'>, </span><a href="../../include/regex/regguts.h.html#LN136"><span class='Ref_to_Const'>COLORLESS</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN50"><span class='Ref_To_Local'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN316"><span class='Ref_to_Member'>pre</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN50"><span class='Ref_To_Local'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN317"><span class='Ref_to_Member'>init</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="regcomp.c.html#LN126"><span class='Ref_to_Proto'>newarc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN50"><span class='Ref_To_Local'>nfa</span></a><span class='Delimiter'>, </span><span class='String'>'^'</span><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN50"><span class='Ref_To_Local'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN316"><span class='Ref_to_Member'>pre</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN50"><span class='Ref_To_Local'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN317"><span class='Ref_to_Member'>init</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="regcomp.c.html#LN126"><span class='Ref_to_Proto'>newarc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN50"><span class='Ref_To_Local'>nfa</span></a><span class='Delimiter'>, </span><span class='String'>'^'</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN50"><span class='Ref_To_Local'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN316"><span class='Ref_to_Member'>pre</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN50"><span class='Ref_To_Local'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN317"><span class='Ref_to_Member'>init</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="regcomp.c.html#LN111"><span class='Ref_to_Proto'>rainbow</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN50"><span class='Ref_To_Local'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN50"><span class='Ref_To_Local'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN324"><span class='Ref_to_Member'>cm</span></a><span class='Delimiter'>, </span><a href="regcomp.c.html#LN275"><span class='Ref_to_Const'>PLAIN</span></a><span class='Delimiter'>, </span><a href="../../include/regex/regguts.h.html#LN136"><span class='Ref_to_Const'>COLORLESS</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN50"><span class='Ref_To_Local'>nfa</span></a><span class='Operator'>-&GT;</span><span class='Keyword'>final</span><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN50"><span class='Ref_To_Local'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN319"><span class='Ref_to_Member'>post</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="regcomp.c.html#LN126"><span class='Ref_to_Proto'>newarc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN50"><span class='Ref_To_Local'>nfa</span></a><span class='Delimiter'>, </span><span class='String'>'$'</span><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN50"><span class='Ref_To_Local'>nfa</span></a><span class='Operator'>-&GT;</span><span class='Keyword'>final</span><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN50"><span class='Ref_To_Local'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN319"><span class='Ref_to_Member'>post</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="regcomp.c.html#LN126"><span class='Ref_to_Proto'>newarc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN50"><span class='Ref_To_Local'>nfa</span></a><span class='Delimiter'>, </span><span class='String'>'$'</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN50"><span class='Ref_To_Local'>nfa</span></a><span class='Operator'>-&GT;</span><span class='Keyword'>final</span><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN50"><span class='Ref_To_Local'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN319"><span class='Ref_to_Member'>post</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regexec.c.html#LN123"><span class='Ref_to_Macro'>ISERR</span></a><span class='Parentheses'>())</span> 
    <span class='Delimiter'>{ 
</span>        <a href="regc_nfa.c.html#LN96"><span class='Ref_to_Func'>freenfa</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN50"><span class='Ref_To_Local'>nfa</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>return</span> <a href="regc_nfa.c.html#LN50"><span class='Ref_To_Local'>nfa</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end newnfa &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * freenfa - free an entire NFA 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN97"></a><span class='Declare_Function'>freenfa</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="regc_nfa.c.html#LN97"><span class='Ref_to_Parameter'>nfa</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>nfa</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN99"></a>    <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>*</span><span class='Declare_Local'>s</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>while</span> <span class='Parentheses'>((</span><a href="regc_nfa.c.html#LN99"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN97"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN321"><span class='Ref_to_Member'>states</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="regc_nfa.c.html#LN99"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN302"><span class='Ref_to_Member'>nins</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN99"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN304"><span class='Ref_to_Member'>nouts</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><span class='Comment_Single_Line'>/* don't worry about arcs */ 
</span>        <a href="regcomp.c.html#LN124"><span class='Ref_to_Proto'>freestate</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN97"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN99"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>while</span> <span class='Parentheses'>((</span><a href="regc_nfa.c.html#LN99"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN97"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN323"><span class='Ref_to_Member'>free</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="regc_nfa.c.html#LN97"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN323"><span class='Ref_to_Member'>free</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN99"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN308"><span class='Ref_to_Member'>next</span></a><span class='Delimiter'>; 
</span>        <a href="regcomp.c.html#LN125"><span class='Ref_to_Proto'>destroystate</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN97"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN99"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="regc_nfa.c.html#LN97"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN322"><span class='Ref_to_Member'>slast</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN97"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN320"><span class='Ref_to_Member'>nstates</span></a> <span class='Operator'>= -</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN97"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN316"><span class='Ref_to_Member'>pre</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN97"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN319"><span class='Ref_to_Member'>post</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="../../common/unicode_norm.c.html#LN25"><span class='Ref_to_Macro'>FREE</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN97"><span class='Ref_to_Parameter'>nfa</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end freenfa &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * newstate - allocate an NFA state, with zero flag value 
 */ 
</span><span class='Keyword'>static </span><span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>*</span>           <span class='Comment_Single_Line'>/* NULL on error */ 
</span><a name="LN123"></a><span class='Declare_Function'>newstate</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="regc_nfa.c.html#LN123"><span class='Ref_to_Parameter'>nfa</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>nfa</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN125"></a>    <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>*</span><span class='Declare_Local'>s</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * This is a handy place to check for operation cancel during regex 
     * compilation, since no code path will go very long without making a new 
     * state or arc. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/regex/regguts.h.html#LN451"><span class='Ref_to_Macro'>CANCEL_REQUESTED</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN123"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN327"><span class='Ref_to_Member'>v</span></a><span class='Operator'>-&GT;</span><a href="regexec.c.html#LN104"><span class='Ref_to_Member'>re</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="regc_nfa.c.html#LN39"><span class='Ref_to_Macro'>NERR</span></a><span class='Parentheses'>(</span><a href="../../include/regex/regex.h.html#LN156"><span class='Ref_to_Const'>REG_CANCEL</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN123"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN323"><span class='Ref_to_Member'>free</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="regc_nfa.c.html#LN125"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN123"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN323"><span class='Ref_to_Member'>free</span></a><span class='Delimiter'>; 
</span>        <a href="regc_nfa.c.html#LN123"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN323"><span class='Ref_to_Member'>free</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN125"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN308"><span class='Ref_to_Member'>next</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN123"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN327"><span class='Ref_to_Member'>v</span></a><span class='Operator'>-&GT;</span><a href="regcomp.c.html#LN253"><span class='Ref_to_Member'>spaceused</span></a> <span class='Operator'>&GT;= </span><a href="../../include/regex/regguts.h.html#LN382"><span class='Ref_to_Const'>REG_MAX_COMPILE_SPACE</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="regc_nfa.c.html#LN39"><span class='Ref_to_Macro'>NERR</span></a><span class='Parentheses'>(</span><a href="../../include/regex/regex.h.html#LN154"><span class='Ref_to_Const'>REG_ETOOBIG</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <a href="regc_nfa.c.html#LN125"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/regex/regcustom.h.html#LN61"><span class='Ref_to_Macro'>MALLOC</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN125"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="regc_nfa.c.html#LN39"><span class='Ref_to_Macro'>NERR</span></a><span class='Parentheses'>(</span><a href="../../include/regex/regex.h.html#LN148"><span class='Ref_to_Const'>REG_ESPACE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <a href="regc_nfa.c.html#LN123"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN327"><span class='Ref_to_Member'>v</span></a><span class='Operator'>-&GT;</span><a href="regcomp.c.html#LN253"><span class='Ref_to_Member'>spaceused</span></a> <span class='Operator'>+= </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="regc_nfa.c.html#LN125"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN310"><span class='Ref_to_Member'>oas</span></a><span class='Operator'>.</span><a href="../../include/regex/regguts.h.html#LN292"><span class='Ref_to_Member'>next</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>        <a href="regc_nfa.c.html#LN125"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN306"><span class='Ref_to_Member'>free</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>        <a href="regc_nfa.c.html#LN125"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN311"><span class='Ref_to_Member'>noas</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN123"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN320"><span class='Ref_to_Member'>nstates</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN125"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN299"><span class='Ref_to_Member'>no</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN123"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN320"><span class='Ref_to_Member'>nstates</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN125"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN301"><span class='Ref_to_Member'>flag</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN123"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN321"><span class='Ref_to_Member'>states</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="regc_nfa.c.html#LN123"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN321"><span class='Ref_to_Member'>states</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN125"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN125"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN302"><span class='Ref_to_Member'>nins</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN125"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN303"><span class='Ref_to_Member'>ins</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN125"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN304"><span class='Ref_to_Member'>nouts</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN125"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN305"><span class='Ref_to_Member'>outs</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN125"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN307"><span class='Ref_to_Member'>tmp</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN125"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN308"><span class='Ref_to_Member'>next</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN123"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN322"><span class='Ref_to_Member'>slast</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN123"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN322"><span class='Ref_to_Member'>slast</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN308"><span class='Ref_to_Member'>next</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="regc_nfa.c.html#LN123"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN322"><span class='Ref_to_Member'>slast</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN308"><span class='Ref_to_Member'>next</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN125"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="regc_nfa.c.html#LN125"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN309"><span class='Ref_to_Member'>prev</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN123"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN322"><span class='Ref_to_Member'>slast</span></a><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN123"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN322"><span class='Ref_to_Member'>slast</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN125"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="regc_nfa.c.html#LN125"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end newstate &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * newfstate - allocate an NFA state with a specified flag value 
 */ 
</span><span class='Keyword'>static </span><span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>*</span>           <span class='Comment_Single_Line'>/* NULL on error */ 
</span><a name="LN187"></a><span class='Declare_Function'>newfstate</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="regc_nfa.c.html#LN187"><span class='Ref_to_Parameter'>nfa</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>nfa</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>flag</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN189"></a>    <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>*</span><span class='Declare_Local'>s</span><span class='Delimiter'>; 
</span> 
    <a href="regc_nfa.c.html#LN189"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="regcomp.c.html#LN121"><span class='Ref_to_Proto'>newstate</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN187"><span class='Ref_to_Parameter'>nfa</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN189"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="regc_nfa.c.html#LN189"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN301"><span class='Ref_to_Member'>flag</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char</span><span class='Parentheses'>) </span><a href="regc_nfa.c.html#LN187"><span class='Ref_to_Parameter'>flag</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="regc_nfa.c.html#LN189"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * dropstate - delete a state's inarcs and outarcs and free it 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN201"></a><span class='Declare_Function'>dropstate</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="regc_nfa.c.html#LN201"><span class='Ref_to_Parameter'>nfa</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>nfa</span><span class='Delimiter'>, 
</span><a name="LN202"></a>          <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>s</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN204"></a>    <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>a</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>while</span> <span class='Parentheses'>((</span><a href="regc_nfa.c.html#LN204"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN202"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN303"><span class='Ref_to_Member'>ins</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
        <a href="regcomp.c.html#LN129"><span class='Ref_to_Proto'>freearc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN201"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN204"><span class='Ref_To_Local'>a</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>while</span> <span class='Parentheses'>((</span><a href="regc_nfa.c.html#LN204"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN202"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN305"><span class='Ref_to_Member'>outs</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
        <a href="regcomp.c.html#LN129"><span class='Ref_to_Proto'>freearc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN201"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN204"><span class='Ref_To_Local'>a</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="regcomp.c.html#LN124"><span class='Ref_to_Proto'>freestate</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN201"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN202"><span class='Ref_to_Parameter'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * freestate - free a state, which has no in-arcs or out-arcs 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN217"></a><span class='Declare_Function'>freestate</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="regc_nfa.c.html#LN217"><span class='Ref_to_Parameter'>nfa</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>nfa</span><span class='Delimiter'>, 
</span><a name="LN218"></a>          <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>s</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN218"><span class='Ref_to_Parameter'>s</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN218"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN302"><span class='Ref_to_Member'>nins</span></a> <span class='Operator'>== </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="regc_nfa.c.html#LN218"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN304"><span class='Ref_to_Member'>nouts</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="regc_nfa.c.html#LN218"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN299"><span class='Ref_to_Member'>no</span></a> <span class='Operator'>= </span><a href="../../include/regex/regguts.h.html#LN300"><span class='Ref_to_Const'>FREESTATE</span></a><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN218"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN301"><span class='Ref_to_Member'>flag</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN218"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN308"><span class='Ref_to_Member'>next</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="regc_nfa.c.html#LN218"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN308"><span class='Ref_to_Member'>next</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN309"><span class='Ref_to_Member'>prev</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN218"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN309"><span class='Ref_to_Member'>prev</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN218"><span class='Ref_to_Parameter'>s</span></a> <span class='Operator'>== </span><a href="regc_nfa.c.html#LN217"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN322"><span class='Ref_to_Member'>slast</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="regc_nfa.c.html#LN217"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN322"><span class='Ref_to_Member'>slast</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN218"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN309"><span class='Ref_to_Member'>prev</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN218"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN309"><span class='Ref_to_Member'>prev</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="regc_nfa.c.html#LN218"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN309"><span class='Ref_to_Member'>prev</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN308"><span class='Ref_to_Member'>next</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN218"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN308"><span class='Ref_to_Member'>next</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN218"><span class='Ref_to_Parameter'>s</span></a> <span class='Operator'>== </span><a href="regc_nfa.c.html#LN217"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN321"><span class='Ref_to_Member'>states</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="regc_nfa.c.html#LN217"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN321"><span class='Ref_to_Member'>states</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN218"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN308"><span class='Ref_to_Member'>next</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="regc_nfa.c.html#LN218"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN309"><span class='Ref_to_Member'>prev</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN218"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN308"><span class='Ref_to_Member'>next</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN217"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN323"><span class='Ref_to_Member'>free</span></a><span class='Delimiter'>;</span>        <span class='Comment_Single_Line'>/* don't delete it, put it on the free list */ 
</span>    <a href="regc_nfa.c.html#LN217"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN323"><span class='Ref_to_Member'>free</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN218"><span class='Ref_to_Parameter'>s</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end freestate &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * destroystate - really get rid of an already-freed state 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN248"></a><span class='Declare_Function'>destroystate</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="regc_nfa.c.html#LN248"><span class='Ref_to_Parameter'>nfa</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>nfa</span><span class='Delimiter'>, 
</span><a name="LN249"></a>             <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>s</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN251"></a>    <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN290"><span class='Ref_to_Struct'>arcbatch</span></a> <span class='Operator'>*</span><span class='Declare_Local'>ab</span><span class='Delimiter'>; 
</span><a name="LN252"></a>    <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN290"><span class='Ref_to_Struct'>arcbatch</span></a> <span class='Operator'>*</span><span class='Declare_Local'>abnext</span><span class='Delimiter'>; 
</span> 
    <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN249"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN299"><span class='Ref_to_Member'>no</span></a> <span class='Operator'>== </span><a href="../../include/regex/regguts.h.html#LN300"><span class='Ref_to_Const'>FREESTATE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN251"><span class='Ref_To_Local'>ab</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN249"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN310"><span class='Ref_to_Member'>oas</span></a><span class='Operator'>.</span><a href="../../include/regex/regguts.h.html#LN292"><span class='Ref_to_Member'>next</span></a><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN251"><span class='Ref_To_Local'>ab</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN251"><span class='Ref_To_Local'>ab</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN252"><span class='Ref_To_Local'>abnext</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="regc_nfa.c.html#LN252"><span class='Ref_To_Local'>abnext</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN251"><span class='Ref_To_Local'>ab</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN292"><span class='Ref_to_Member'>next</span></a><span class='Delimiter'>; 
</span>        <a href="../../common/unicode_norm.c.html#LN25"><span class='Ref_to_Macro'>FREE</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN251"><span class='Ref_To_Local'>ab</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="regc_nfa.c.html#LN248"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN327"><span class='Ref_to_Member'>v</span></a><span class='Operator'>-&GT;</span><a href="regcomp.c.html#LN253"><span class='Ref_to_Member'>spaceused</span></a> <span class='Operator'>-= </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN290"><span class='Ref_to_Struct'>arcbatch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="regc_nfa.c.html#LN249"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN303"><span class='Ref_to_Member'>ins</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN249"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN305"><span class='Ref_to_Member'>outs</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN249"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN308"><span class='Ref_to_Member'>next</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="../../common/unicode_norm.c.html#LN25"><span class='Ref_to_Macro'>FREE</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN249"><span class='Ref_to_Parameter'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN248"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN327"><span class='Ref_to_Member'>v</span></a><span class='Operator'>-&GT;</span><a href="regcomp.c.html#LN253"><span class='Ref_to_Member'>spaceused</span></a> <span class='Operator'>-= </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end destroystate &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * newarc - set up a new arc within an NFA 
 * 
 * This function checks to make sure that no duplicate arcs are created. 
 * In general we never want duplicates. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN275"></a><span class='Declare_Function'>newarc</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="regc_nfa.c.html#LN275"><span class='Ref_to_Parameter'>nfa</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>nfa</span><span class='Delimiter'>, 
</span><a name="LN276"></a>       <span class='Keyword'>int </span><span class='Declare_Parameter'>t</span><span class='Delimiter'>, 
</span><a name="LN277"></a>       <a href="../../include/regex/regguts.h.html#LN133"><span class='Ref_to_Typedef'>color</span></a> <span class='Declare_Parameter'>co</span><span class='Delimiter'>, 
</span><a name="LN278"></a>       <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>from</span><span class='Delimiter'>, 
</span><a name="LN279"></a>       <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>to</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN281"></a>    <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>a</span><span class='Delimiter'>; 
</span> 
    <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN278"><span class='Ref_to_Parameter'>from</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL </span><span class='Operator'>&& </span><a href="regc_nfa.c.html#LN279"><span class='Ref_to_Parameter'>to</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * This is a handy place to check for operation cancel during regex 
     * compilation, since no code path will go very long without making a new 
     * state or arc. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/regex/regguts.h.html#LN451"><span class='Ref_to_Macro'>CANCEL_REQUESTED</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN275"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN327"><span class='Ref_to_Member'>v</span></a><span class='Operator'>-&GT;</span><a href="regexec.c.html#LN104"><span class='Ref_to_Member'>re</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="regc_nfa.c.html#LN39"><span class='Ref_to_Macro'>NERR</span></a><span class='Parentheses'>(</span><a href="../../include/regex/regex.h.html#LN156"><span class='Ref_to_Const'>REG_CANCEL</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* check for duplicate arc, using whichever chain is shorter */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN278"><span class='Ref_to_Parameter'>from</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN304"><span class='Ref_to_Member'>nouts</span></a> <span class='Operator'>&LT;= </span><a href="regc_nfa.c.html#LN279"><span class='Ref_to_Parameter'>to</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN302"><span class='Ref_to_Member'>nins</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN281"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN278"><span class='Ref_to_Parameter'>from</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN305"><span class='Ref_to_Member'>outs</span></a><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN281"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN281"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN281"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN281"><span class='Ref_to_Member'>outchain</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN281"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN280"><span class='Ref_to_Member'>to</span></a> <span class='Operator'>== </span><a href="regc_nfa.c.html#LN279"><span class='Ref_to_Parameter'>to</span></a> <span class='Operator'>&& </span><a href="regc_nfa.c.html#LN281"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN278"><span class='Ref_to_Member'>co</span></a> <span class='Operator'>== </span><a href="regc_nfa.c.html#LN277"><span class='Ref_to_Parameter'>co</span></a> <span class='Operator'>&& </span><a href="regc_nfa.c.html#LN281"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN277"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>== </span><a href="regc_nfa.c.html#LN276"><span class='Ref_to_Parameter'>t</span></a><span class='Parentheses'>) 
</span>                <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN281"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN279"><span class='Ref_to_Parameter'>to</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN303"><span class='Ref_to_Member'>ins</span></a><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN281"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN281"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN281"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN284"><span class='Ref_to_Member'>inchain</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN281"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN279"><span class='Ref_to_Member'>from</span></a> <span class='Operator'>== </span><a href="regc_nfa.c.html#LN278"><span class='Ref_to_Parameter'>from</span></a> <span class='Operator'>&& </span><a href="regc_nfa.c.html#LN281"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN278"><span class='Ref_to_Member'>co</span></a> <span class='Operator'>== </span><a href="regc_nfa.c.html#LN277"><span class='Ref_to_Parameter'>co</span></a> <span class='Operator'>&& </span><a href="regc_nfa.c.html#LN281"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN277"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>== </span><a href="regc_nfa.c.html#LN276"><span class='Ref_to_Parameter'>t</span></a><span class='Parentheses'>) 
</span>                <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* no dup, so create the arc */ 
</span>    <a href="regcomp.c.html#LN127"><span class='Ref_to_Proto'>createarc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN275"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN276"><span class='Ref_to_Parameter'>t</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN277"><span class='Ref_to_Parameter'>co</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN278"><span class='Ref_to_Parameter'>from</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN279"><span class='Ref_to_Parameter'>to</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end newarc &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * createarc - create a new arc within an NFA 
 * 
 * This function must *only* be used after verifying that there is no existing 
 * identical arc (same type/color/from/to). 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN321"></a><span class='Declare_Function'>createarc</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="regc_nfa.c.html#LN321"><span class='Ref_to_Parameter'>nfa</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>nfa</span><span class='Delimiter'>, 
</span><a name="LN322"></a>          <span class='Keyword'>int </span><span class='Declare_Parameter'>t</span><span class='Delimiter'>, 
</span><a name="LN323"></a>          <a href="../../include/regex/regguts.h.html#LN133"><span class='Ref_to_Typedef'>color</span></a> <span class='Declare_Parameter'>co</span><span class='Delimiter'>, 
</span><a name="LN324"></a>          <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>from</span><span class='Delimiter'>, 
</span><a name="LN325"></a>          <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>to</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN327"></a>    <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>a</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* the arc is physically allocated within its from-state */ 
</span>    <a href="regc_nfa.c.html#LN327"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regcomp.c.html#LN128"><span class='Ref_to_Proto'>allocarc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN321"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN324"><span class='Ref_to_Parameter'>from</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN38"><span class='Ref_to_Macro'>NISERR</span></a><span class='Parentheses'>())</span> 
        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN327"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="regc_nfa.c.html#LN327"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN277"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN322"><span class='Ref_to_Parameter'>t</span></a><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN327"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN278"><span class='Ref_to_Member'>co</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN323"><span class='Ref_to_Parameter'>co</span></a><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN327"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN280"><span class='Ref_to_Member'>to</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN325"><span class='Ref_to_Parameter'>to</span></a><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN327"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN279"><span class='Ref_to_Member'>from</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN324"><span class='Ref_to_Parameter'>from</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Put the new arc on the beginning, not the end, of the chains; it's 
     * simpler here, and freearc() is the same cost either way.  See also the 
     * logic in moveins() and its cohorts, as well as fixempties(). 
     */ 
</span>    <a href="regc_nfa.c.html#LN327"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN284"><span class='Ref_to_Member'>inchain</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN325"><span class='Ref_to_Parameter'>to</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN303"><span class='Ref_to_Member'>ins</span></a><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN327"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN285"><span class='Ref_to_Member'>inchainRev</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN325"><span class='Ref_to_Parameter'>to</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN303"><span class='Ref_to_Member'>ins</span></a><span class='Parentheses'>) 
</span>        <a href="regc_nfa.c.html#LN325"><span class='Ref_to_Parameter'>to</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN303"><span class='Ref_to_Member'>ins</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN285"><span class='Ref_to_Member'>inchainRev</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN327"><span class='Ref_To_Local'>a</span></a><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN325"><span class='Ref_to_Parameter'>to</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN303"><span class='Ref_to_Member'>ins</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN327"><span class='Ref_To_Local'>a</span></a><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN327"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN281"><span class='Ref_to_Member'>outchain</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN324"><span class='Ref_to_Parameter'>from</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN305"><span class='Ref_to_Member'>outs</span></a><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN327"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN282"><span class='Ref_to_Member'>outchainRev</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN324"><span class='Ref_to_Parameter'>from</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN305"><span class='Ref_to_Member'>outs</span></a><span class='Parentheses'>) 
</span>        <a href="regc_nfa.c.html#LN324"><span class='Ref_to_Parameter'>from</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN305"><span class='Ref_to_Member'>outs</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN282"><span class='Ref_to_Member'>outchainRev</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN327"><span class='Ref_To_Local'>a</span></a><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN324"><span class='Ref_to_Parameter'>from</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN305"><span class='Ref_to_Member'>outs</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN327"><span class='Ref_To_Local'>a</span></a><span class='Delimiter'>; 
</span> 
    <a href="regc_nfa.c.html#LN324"><span class='Ref_to_Parameter'>from</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN304"><span class='Ref_to_Member'>nouts</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN325"><span class='Ref_to_Parameter'>to</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN302"><span class='Ref_to_Member'>nins</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regcomp.c.html#LN293"><span class='Ref_to_Macro'>COLORED</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN327"><span class='Ref_To_Local'>a</span></a><span class='Parentheses'>) </span><span class='Operator'>&& </span><a href="regc_nfa.c.html#LN321"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN328"><span class='Ref_to_Member'>parent</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
        <a href="regcomp.c.html#LN109"><span class='Ref_to_Proto'>colorchain</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN321"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN324"><span class='Ref_to_Member'>cm</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN327"><span class='Ref_To_Local'>a</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end createarc &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * allocarc - allocate a new out-arc within a state 
 */ 
</span><span class='Keyword'>static </span><span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span>             <span class='Comment_Single_Line'>/* NULL for failure */ 
</span><a name="LN367"></a><span class='Declare_Function'>allocarc</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="regc_nfa.c.html#LN367"><span class='Ref_to_Parameter'>nfa</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>nfa</span><span class='Delimiter'>, 
</span><a name="LN368"></a>         <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>s</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN370"></a>    <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>a</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* shortcut */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN368"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN306"><span class='Ref_to_Member'>free</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL </span><span class='Operator'>&& </span><a href="regc_nfa.c.html#LN368"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN311"><span class='Ref_to_Member'>noas</span></a> <span class='Operator'>&LT; </span><a href="../../include/regex/regguts.h.html#LN293"><span class='Ref_to_Const'>ABSIZE</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="regc_nfa.c.html#LN370"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= &</span><a href="regc_nfa.c.html#LN368"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN310"><span class='Ref_to_Member'>oas</span></a><span class='Operator'>.</span><a href="../../include/regex/regguts.h.html#LN294"><span class='Ref_to_Member'>a</span></a><span class='Delimiter'>[</span><a href="regc_nfa.c.html#LN368"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN311"><span class='Ref_to_Member'>noas</span></a><span class='Delimiter'>]; 
</span>        <a href="regc_nfa.c.html#LN368"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN311"><span class='Ref_to_Member'>noas</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <a href="regc_nfa.c.html#LN370"><span class='Ref_To_Local'>a</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* if none at hand, get more */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN368"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN306"><span class='Ref_to_Member'>free</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN383"></a>        <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN290"><span class='Ref_to_Struct'>arcbatch</span></a> <span class='Operator'>*</span><span class='Declare_Local'>newAb</span><span class='Delimiter'>; 
</span><a name="LN384"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN367"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN327"><span class='Ref_to_Member'>v</span></a><span class='Operator'>-&GT;</span><a href="regcomp.c.html#LN253"><span class='Ref_to_Member'>spaceused</span></a> <span class='Operator'>&GT;= </span><a href="../../include/regex/regguts.h.html#LN382"><span class='Ref_to_Const'>REG_MAX_COMPILE_SPACE</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="regc_nfa.c.html#LN39"><span class='Ref_to_Macro'>NERR</span></a><span class='Parentheses'>(</span><a href="../../include/regex/regex.h.html#LN154"><span class='Ref_to_Const'>REG_ETOOBIG</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <a href="regc_nfa.c.html#LN383"><span class='Ref_To_Local'>newAb</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN290"><span class='Ref_to_Struct'>arcbatch</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/regex/regcustom.h.html#LN61"><span class='Ref_to_Macro'>MALLOC</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN290"><span class='Ref_to_Struct'>arcbatch</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN383"><span class='Ref_To_Local'>newAb</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="regc_nfa.c.html#LN39"><span class='Ref_to_Macro'>NERR</span></a><span class='Parentheses'>(</span><a href="../../include/regex/regex.h.html#LN148"><span class='Ref_to_Const'>REG_ESPACE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <a href="regc_nfa.c.html#LN367"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN327"><span class='Ref_to_Member'>v</span></a><span class='Operator'>-&GT;</span><a href="regcomp.c.html#LN253"><span class='Ref_to_Member'>spaceused</span></a> <span class='Operator'>+= </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN290"><span class='Ref_to_Struct'>arcbatch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="regc_nfa.c.html#LN383"><span class='Ref_To_Local'>newAb</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN292"><span class='Ref_to_Member'>next</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN368"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN310"><span class='Ref_to_Member'>oas</span></a><span class='Operator'>.</span><a href="../../include/regex/regguts.h.html#LN292"><span class='Ref_to_Member'>next</span></a><span class='Delimiter'>; 
</span>        <a href="regc_nfa.c.html#LN368"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN310"><span class='Ref_to_Member'>oas</span></a><span class='Operator'>.</span><a href="../../include/regex/regguts.h.html#LN292"><span class='Ref_to_Member'>next</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN383"><span class='Ref_To_Local'>newAb</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN384"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN384"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="../../include/regex/regguts.h.html#LN293"><span class='Ref_to_Const'>ABSIZE</span></a><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN384"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="regc_nfa.c.html#LN383"><span class='Ref_To_Local'>newAb</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN294"><span class='Ref_to_Member'>a</span></a><span class='Delimiter'>[</span><a href="regc_nfa.c.html#LN384"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../include/regex/regguts.h.html#LN277"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>            <a href="regc_nfa.c.html#LN383"><span class='Ref_To_Local'>newAb</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN294"><span class='Ref_to_Member'>a</span></a><span class='Delimiter'>[</span><a href="regc_nfa.c.html#LN384"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span>freechain <span class='Operator'>= &</span><a href="regc_nfa.c.html#LN383"><span class='Ref_To_Local'>newAb</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN294"><span class='Ref_to_Member'>a</span></a><span class='Delimiter'>[</span><a href="regc_nfa.c.html#LN384"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>]; 
</span>        <span class='Delimiter'>} 
</span>        <a href="regc_nfa.c.html#LN383"><span class='Ref_To_Local'>newAb</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN294"><span class='Ref_to_Member'>a</span></a><span class='Delimiter'>[</span><a href="../../include/regex/regguts.h.html#LN293"><span class='Ref_to_Const'>ABSIZE</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span>freechain <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>        <a href="regc_nfa.c.html#LN368"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN306"><span class='Ref_to_Member'>free</span></a> <span class='Operator'>= &</span><a href="regc_nfa.c.html#LN383"><span class='Ref_To_Local'>newAb</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN294"><span class='Ref_to_Member'>a</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if s-&GT;free==NULL &raquo; </span> 
    <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN368"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN306"><span class='Ref_to_Member'>free</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="regc_nfa.c.html#LN370"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN368"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN306"><span class='Ref_to_Member'>free</span></a><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN368"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN306"><span class='Ref_to_Member'>free</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN370"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span>freechain<span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="regc_nfa.c.html#LN370"><span class='Ref_To_Local'>a</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end allocarc &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * freearc - free an arc 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN420"></a><span class='Declare_Function'>freearc</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="regc_nfa.c.html#LN420"><span class='Ref_to_Parameter'>nfa</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>nfa</span><span class='Delimiter'>, 
</span><a name="LN421"></a>        <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>victim</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN423"></a>    <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>*</span><span class='Declare_Local'>from</span> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN421"><span class='Ref_to_Parameter'>victim</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN279"><span class='Ref_to_Member'>from</span></a><span class='Delimiter'>; 
</span><a name="LN424"></a>    <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>*</span><span class='Declare_Local'>to</span> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN421"><span class='Ref_to_Parameter'>victim</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN280"><span class='Ref_to_Member'>to</span></a><span class='Delimiter'>; 
</span><a name="LN425"></a>    <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>predecessor</span><span class='Delimiter'>; 
</span> 
    <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN421"><span class='Ref_to_Parameter'>victim</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN277"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* take it off color chain if necessary */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regcomp.c.html#LN293"><span class='Ref_to_Macro'>COLORED</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN421"><span class='Ref_to_Parameter'>victim</span></a><span class='Parentheses'>) </span><span class='Operator'>&& </span><a href="regc_nfa.c.html#LN420"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN328"><span class='Ref_to_Member'>parent</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
        <a href="regcomp.c.html#LN110"><span class='Ref_to_Proto'>uncolorchain</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN420"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN324"><span class='Ref_to_Member'>cm</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN421"><span class='Ref_to_Parameter'>victim</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* take it off source's out-chain */ 
</span>    <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN423"><span class='Ref_To_Local'>from</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN425"><span class='Ref_To_Local'>predecessor</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN421"><span class='Ref_to_Parameter'>victim</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN282"><span class='Ref_to_Member'>outchainRev</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN425"><span class='Ref_To_Local'>predecessor</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN423"><span class='Ref_To_Local'>from</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN305"><span class='Ref_to_Member'>outs</span></a> <span class='Operator'>== </span><a href="regc_nfa.c.html#LN421"><span class='Ref_to_Parameter'>victim</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="regc_nfa.c.html#LN423"><span class='Ref_To_Local'>from</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN305"><span class='Ref_to_Member'>outs</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN421"><span class='Ref_to_Parameter'>victim</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN281"><span class='Ref_to_Member'>outchain</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN425"><span class='Ref_To_Local'>predecessor</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN281"><span class='Ref_to_Member'>outchain</span></a> <span class='Operator'>== </span><a href="regc_nfa.c.html#LN421"><span class='Ref_to_Parameter'>victim</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="regc_nfa.c.html#LN425"><span class='Ref_To_Local'>predecessor</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN281"><span class='Ref_to_Member'>outchain</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN421"><span class='Ref_to_Parameter'>victim</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN281"><span class='Ref_to_Member'>outchain</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN421"><span class='Ref_to_Parameter'>victim</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN281"><span class='Ref_to_Member'>outchain</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN421"><span class='Ref_to_Parameter'>victim</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN281"><span class='Ref_to_Member'>outchain</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN282"><span class='Ref_to_Member'>outchainRev</span></a> <span class='Operator'>== </span><a href="regc_nfa.c.html#LN421"><span class='Ref_to_Parameter'>victim</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="regc_nfa.c.html#LN421"><span class='Ref_to_Parameter'>victim</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN281"><span class='Ref_to_Member'>outchain</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN282"><span class='Ref_to_Member'>outchainRev</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN425"><span class='Ref_To_Local'>predecessor</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="regc_nfa.c.html#LN423"><span class='Ref_To_Local'>from</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN304"><span class='Ref_to_Member'>nouts</span></a><span class='Operator'>--</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* take it off target's in-chain */ 
</span>    <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN424"><span class='Ref_To_Local'>to</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN425"><span class='Ref_To_Local'>predecessor</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN421"><span class='Ref_to_Parameter'>victim</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN285"><span class='Ref_to_Member'>inchainRev</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN425"><span class='Ref_To_Local'>predecessor</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN424"><span class='Ref_To_Local'>to</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN303"><span class='Ref_to_Member'>ins</span></a> <span class='Operator'>== </span><a href="regc_nfa.c.html#LN421"><span class='Ref_to_Parameter'>victim</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="regc_nfa.c.html#LN424"><span class='Ref_To_Local'>to</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN303"><span class='Ref_to_Member'>ins</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN421"><span class='Ref_to_Parameter'>victim</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN284"><span class='Ref_to_Member'>inchain</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN425"><span class='Ref_To_Local'>predecessor</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN284"><span class='Ref_to_Member'>inchain</span></a> <span class='Operator'>== </span><a href="regc_nfa.c.html#LN421"><span class='Ref_to_Parameter'>victim</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="regc_nfa.c.html#LN425"><span class='Ref_To_Local'>predecessor</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN284"><span class='Ref_to_Member'>inchain</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN421"><span class='Ref_to_Parameter'>victim</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN284"><span class='Ref_to_Member'>inchain</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN421"><span class='Ref_to_Parameter'>victim</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN284"><span class='Ref_to_Member'>inchain</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN421"><span class='Ref_to_Parameter'>victim</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN284"><span class='Ref_to_Member'>inchain</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN285"><span class='Ref_to_Member'>inchainRev</span></a> <span class='Operator'>== </span><a href="regc_nfa.c.html#LN421"><span class='Ref_to_Parameter'>victim</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="regc_nfa.c.html#LN421"><span class='Ref_to_Parameter'>victim</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN284"><span class='Ref_to_Member'>inchain</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN285"><span class='Ref_to_Member'>inchainRev</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN425"><span class='Ref_To_Local'>predecessor</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="regc_nfa.c.html#LN424"><span class='Ref_To_Local'>to</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN302"><span class='Ref_to_Member'>nins</span></a><span class='Operator'>--</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* clean up and place on from-state's free list */ 
</span>    <a href="regc_nfa.c.html#LN421"><span class='Ref_to_Parameter'>victim</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN277"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN421"><span class='Ref_to_Parameter'>victim</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN279"><span class='Ref_to_Member'>from</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>;</span>        <span class='Comment_Single_Line'>/* precautions... */ 
</span>    <a href="regc_nfa.c.html#LN421"><span class='Ref_to_Parameter'>victim</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN280"><span class='Ref_to_Member'>to</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN421"><span class='Ref_to_Parameter'>victim</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN284"><span class='Ref_to_Member'>inchain</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN421"><span class='Ref_to_Parameter'>victim</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN285"><span class='Ref_to_Member'>inchainRev</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN421"><span class='Ref_to_Parameter'>victim</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN281"><span class='Ref_to_Member'>outchain</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN421"><span class='Ref_to_Parameter'>victim</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN282"><span class='Ref_to_Member'>outchainRev</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN421"><span class='Ref_to_Parameter'>victim</span></a><span class='Operator'>-&GT;</span>freechain <span class='Operator'>= </span><a href="regc_nfa.c.html#LN423"><span class='Ref_To_Local'>from</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN306"><span class='Ref_to_Member'>free</span></a><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN423"><span class='Ref_To_Local'>from</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN306"><span class='Ref_to_Member'>free</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN421"><span class='Ref_to_Parameter'>victim</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end freearc &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * changearctarget - flip an arc to have a different to state 
 * 
 * Caller must have verified that there is no pre-existing duplicate arc. 
 * 
 * Note that because we store arcs in their from state, we can't easily have 
 * a similar changearcsource function. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN494"></a><span class='Declare_Function'>changearctarget</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>a</span><span class='Delimiter'>, </span><span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>newto</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN496"></a>    <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>*</span><span class='Declare_Local'>oldto</span> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN494"><span class='Ref_to_Parameter'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN280"><span class='Ref_to_Member'>to</span></a><span class='Delimiter'>; 
</span><a name="LN497"></a>    <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>predecessor</span><span class='Delimiter'>; 
</span> 
    <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN496"><span class='Ref_To_Local'>oldto</span></a> <span class='Operator'>!= </span><a href="regc_nfa.c.html#LN494"><span class='Ref_to_Parameter'>newto</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* take it off old target's in-chain */ 
</span>    <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN496"><span class='Ref_To_Local'>oldto</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN497"><span class='Ref_To_Local'>predecessor</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN494"><span class='Ref_to_Parameter'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN285"><span class='Ref_to_Member'>inchainRev</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN497"><span class='Ref_To_Local'>predecessor</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN496"><span class='Ref_To_Local'>oldto</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN303"><span class='Ref_to_Member'>ins</span></a> <span class='Operator'>== </span><a href="regc_nfa.c.html#LN494"><span class='Ref_to_Parameter'>a</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="regc_nfa.c.html#LN496"><span class='Ref_To_Local'>oldto</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN303"><span class='Ref_to_Member'>ins</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN494"><span class='Ref_to_Parameter'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN284"><span class='Ref_to_Member'>inchain</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN497"><span class='Ref_To_Local'>predecessor</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN284"><span class='Ref_to_Member'>inchain</span></a> <span class='Operator'>== </span><a href="regc_nfa.c.html#LN494"><span class='Ref_to_Parameter'>a</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="regc_nfa.c.html#LN497"><span class='Ref_To_Local'>predecessor</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN284"><span class='Ref_to_Member'>inchain</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN494"><span class='Ref_to_Parameter'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN284"><span class='Ref_to_Member'>inchain</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN494"><span class='Ref_to_Parameter'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN284"><span class='Ref_to_Member'>inchain</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN494"><span class='Ref_to_Parameter'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN284"><span class='Ref_to_Member'>inchain</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN285"><span class='Ref_to_Member'>inchainRev</span></a> <span class='Operator'>== </span><a href="regc_nfa.c.html#LN494"><span class='Ref_to_Parameter'>a</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="regc_nfa.c.html#LN494"><span class='Ref_to_Parameter'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN284"><span class='Ref_to_Member'>inchain</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN285"><span class='Ref_to_Member'>inchainRev</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN497"><span class='Ref_To_Local'>predecessor</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="regc_nfa.c.html#LN496"><span class='Ref_To_Local'>oldto</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN302"><span class='Ref_to_Member'>nins</span></a><span class='Operator'>--</span><span class='Delimiter'>; 
</span> 
    <a href="regc_nfa.c.html#LN494"><span class='Ref_to_Parameter'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN280"><span class='Ref_to_Member'>to</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN494"><span class='Ref_to_Parameter'>newto</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* prepend it to new target's in-chain */ 
</span>    <a href="regc_nfa.c.html#LN494"><span class='Ref_to_Parameter'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN284"><span class='Ref_to_Member'>inchain</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN494"><span class='Ref_to_Parameter'>newto</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN303"><span class='Ref_to_Member'>ins</span></a><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN494"><span class='Ref_to_Parameter'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN285"><span class='Ref_to_Member'>inchainRev</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN494"><span class='Ref_to_Parameter'>newto</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN303"><span class='Ref_to_Member'>ins</span></a><span class='Parentheses'>) 
</span>        <a href="regc_nfa.c.html#LN494"><span class='Ref_to_Parameter'>newto</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN303"><span class='Ref_to_Member'>ins</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN285"><span class='Ref_to_Member'>inchainRev</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN494"><span class='Ref_to_Parameter'>a</span></a><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN494"><span class='Ref_to_Parameter'>newto</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN303"><span class='Ref_to_Member'>ins</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN494"><span class='Ref_to_Parameter'>a</span></a><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN494"><span class='Ref_to_Parameter'>newto</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN302"><span class='Ref_to_Member'>nins</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end changearctarget &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * hasnonemptyout - Does state have a non-EMPTY out arc? 
 */ 
</span><span class='Keyword'>static int 
</span><a name="LN536"></a><span class='Declare_Function'>hasnonemptyout</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>s</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN538"></a>    <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>a</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN538"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN536"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN305"><span class='Ref_to_Member'>outs</span></a><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN538"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN538"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN538"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN281"><span class='Ref_to_Member'>outchain</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN538"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN277"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>!= </span><a href="../../interfaces/ecpg/preproc/extern.h.html#LN17"><span class='Ref_to_Const'>EMPTY</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>return</span> <span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * findarc - find arc, if any, from given source with given type and color 
 * If there is more than one such arc, the result is random. 
 */ 
</span><span class='Keyword'>static </span><span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>* 
</span><a name="LN553"></a><span class='Declare_Function'>findarc</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>s</span><span class='Delimiter'>, 
</span><a name="LN554"></a>        <span class='Keyword'>int </span><span class='Declare_Parameter'>type</span><span class='Delimiter'>, 
</span><a name="LN555"></a>        <a href="../../include/regex/regguts.h.html#LN133"><span class='Ref_to_Typedef'>color</span></a> <span class='Declare_Parameter'>co</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN557"></a>    <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>a</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN557"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN553"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN305"><span class='Ref_to_Member'>outs</span></a><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN557"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN557"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN557"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN281"><span class='Ref_to_Member'>outchain</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN557"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN277"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>== </span><a href="regc_nfa.c.html#LN554"><span class='Ref_to_Parameter'>type</span></a> <span class='Operator'>&& </span><a href="regc_nfa.c.html#LN557"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN278"><span class='Ref_to_Member'>co</span></a> <span class='Operator'>== </span><a href="regc_nfa.c.html#LN555"><span class='Ref_to_Parameter'>co</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>return</span> <a href="regc_nfa.c.html#LN557"><span class='Ref_To_Local'>a</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * cparc - allocate a new arc within an NFA, copying details from old one 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN569"></a><span class='Declare_Function'>cparc</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="regc_nfa.c.html#LN569"><span class='Ref_to_Parameter'>nfa</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>nfa</span><span class='Delimiter'>, 
</span><a name="LN570"></a>      <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>oa</span><span class='Delimiter'>, 
</span><a name="LN571"></a>      <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>from</span><span class='Delimiter'>, 
</span><a name="LN572"></a>      <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>to</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <a href="regcomp.c.html#LN126"><span class='Ref_to_Proto'>newarc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN569"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN570"><span class='Ref_to_Parameter'>oa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN277"><span class='Ref_to_Member'>type</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN570"><span class='Ref_to_Parameter'>oa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN278"><span class='Ref_to_Member'>co</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN571"><span class='Ref_to_Parameter'>from</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN572"><span class='Ref_to_Parameter'>to</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * sortins - sort the in arcs of a state by from/color/type 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN581"></a><span class='Declare_Function'>sortins</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="regc_nfa.c.html#LN581"><span class='Ref_to_Parameter'>nfa</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>nfa</span><span class='Delimiter'>, 
</span><a name="LN582"></a>        <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>s</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN584"></a>    <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>**</span><span class='Declare_Local'>sortarray</span><span class='Delimiter'>; 
</span><a name="LN585"></a>    <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>a</span><span class='Delimiter'>; 
</span><a name="LN586"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>n</span> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN582"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN302"><span class='Ref_to_Member'>nins</span></a><span class='Delimiter'>; 
</span><a name="LN587"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN586"><span class='Ref_To_Local'>n</span></a> <span class='Operator'>&LT;= </span><span class='Number'>1</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>;</span>                 <span class='Comment_Single_Line'>/* nothing to do */ 
</span>    <span class='Comment_Multi_Line'>/* make an array of arc pointers ... */ 
</span>    <a href="regc_nfa.c.html#LN584"><span class='Ref_To_Local'>sortarray</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>**</span><span class='Parentheses'>) </span><a href="../../include/regex/regcustom.h.html#LN61"><span class='Ref_to_Macro'>MALLOC</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN586"><span class='Ref_To_Local'>n</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN584"><span class='Ref_To_Local'>sortarray</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="regc_nfa.c.html#LN39"><span class='Ref_to_Macro'>NERR</span></a><span class='Parentheses'>(</span><a href="../../include/regex/regex.h.html#LN148"><span class='Ref_to_Const'>REG_ESPACE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="regc_nfa.c.html#LN587"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN585"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN582"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN303"><span class='Ref_to_Member'>ins</span></a><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN585"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN585"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN585"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN284"><span class='Ref_to_Member'>inchain</span></a><span class='Parentheses'>) 
</span>        <a href="regc_nfa.c.html#LN584"><span class='Ref_To_Local'>sortarray</span></a><span class='Delimiter'>[</span><a href="regc_nfa.c.html#LN587"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="regc_nfa.c.html#LN585"><span class='Ref_To_Local'>a</span></a><span class='Delimiter'>; 
</span>    <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN587"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>== </span><a href="regc_nfa.c.html#LN586"><span class='Ref_To_Local'>n</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* ... sort the array */ 
</span>    <a href="../../include/port.h.html#LN439"><span class='Ref_to_Macro'>qsort</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN584"><span class='Ref_To_Local'>sortarray</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN586"><span class='Ref_To_Local'>n</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="regcomp.c.html#LN135"><span class='Ref_to_Proto'>sortins_cmp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* ... and rebuild arc list in order */ 
</span>    <span class='Comment_Multi_Line'>/* it seems worth special-casing first and last items to simplify loop */ 
</span>    <a href="regc_nfa.c.html#LN585"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN584"><span class='Ref_To_Local'>sortarray</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]; 
</span>    <a href="regc_nfa.c.html#LN582"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN303"><span class='Ref_to_Member'>ins</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN585"><span class='Ref_To_Local'>a</span></a><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN585"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN284"><span class='Ref_to_Member'>inchain</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN584"><span class='Ref_To_Local'>sortarray</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]; 
</span>    <a href="regc_nfa.c.html#LN585"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN285"><span class='Ref_to_Member'>inchainRev</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN587"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN587"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="regc_nfa.c.html#LN586"><span class='Ref_To_Local'>n</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN587"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="regc_nfa.c.html#LN585"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN584"><span class='Ref_To_Local'>sortarray</span></a><span class='Delimiter'>[</span><a href="regc_nfa.c.html#LN587"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span>        <a href="regc_nfa.c.html#LN585"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN284"><span class='Ref_to_Member'>inchain</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN584"><span class='Ref_To_Local'>sortarray</span></a><span class='Delimiter'>[</span><a href="regc_nfa.c.html#LN587"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>]; 
</span>        <a href="regc_nfa.c.html#LN585"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN285"><span class='Ref_to_Member'>inchainRev</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN584"><span class='Ref_To_Local'>sortarray</span></a><span class='Delimiter'>[</span><a href="regc_nfa.c.html#LN587"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>]; 
</span>    <span class='Delimiter'>} 
</span>    <a href="regc_nfa.c.html#LN585"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN584"><span class='Ref_To_Local'>sortarray</span></a><span class='Delimiter'>[</span><a href="regc_nfa.c.html#LN587"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span>    <a href="regc_nfa.c.html#LN585"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN284"><span class='Ref_to_Member'>inchain</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN585"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN285"><span class='Ref_to_Member'>inchainRev</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN584"><span class='Ref_To_Local'>sortarray</span></a><span class='Delimiter'>[</span><a href="regc_nfa.c.html#LN587"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>]; 
</span>    <a href="../../common/unicode_norm.c.html#LN25"><span class='Ref_to_Macro'>FREE</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN584"><span class='Ref_To_Local'>sortarray</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end sortins &raquo; </span> 
 
<span class='Keyword'>static int 
</span><a name="LN623"></a><span class='Declare_Function'>sortins_cmp</span><span class='Parentheses'>(</span><span class='Keyword'>const void </span><span class='Operator'>*</span><span class='Declare_Parameter'>a</span><span class='Delimiter'>, </span><span class='Keyword'>const void </span><span class='Operator'>*</span><span class='Declare_Parameter'>b</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN625"></a>    <span class='Keyword'>const </span><span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>aa</span> <span class='Operator'>= *</span><span class='Parentheses'>((</span><span class='Keyword'>const </span><span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>* </span><span class='Keyword'>const </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="regc_nfa.c.html#LN623"><span class='Ref_to_Parameter'>a</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN626"></a>    <span class='Keyword'>const </span><span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>bb</span> <span class='Operator'>= *</span><span class='Parentheses'>((</span><span class='Keyword'>const </span><span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>* </span><span class='Keyword'>const </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="regc_nfa.c.html#LN623"><span class='Ref_to_Parameter'>b</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* we check the fields in the order they are most likely to be different */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN625"><span class='Ref_To_Local'>aa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN279"><span class='Ref_to_Member'>from</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN299"><span class='Ref_to_Member'>no</span></a> <span class='Operator'>&LT; </span><a href="regc_nfa.c.html#LN626"><span class='Ref_To_Local'>bb</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN279"><span class='Ref_to_Member'>from</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN299"><span class='Ref_to_Member'>no</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN625"><span class='Ref_To_Local'>aa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN279"><span class='Ref_to_Member'>from</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN299"><span class='Ref_to_Member'>no</span></a> <span class='Operator'>&GT; </span><a href="regc_nfa.c.html#LN626"><span class='Ref_To_Local'>bb</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN279"><span class='Ref_to_Member'>from</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN299"><span class='Ref_to_Member'>no</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN625"><span class='Ref_To_Local'>aa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN278"><span class='Ref_to_Member'>co</span></a> <span class='Operator'>&LT; </span><a href="regc_nfa.c.html#LN626"><span class='Ref_To_Local'>bb</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN278"><span class='Ref_to_Member'>co</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN625"><span class='Ref_To_Local'>aa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN278"><span class='Ref_to_Member'>co</span></a> <span class='Operator'>&GT; </span><a href="regc_nfa.c.html#LN626"><span class='Ref_To_Local'>bb</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN278"><span class='Ref_to_Member'>co</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN625"><span class='Ref_To_Local'>aa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN277"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>&LT; </span><a href="regc_nfa.c.html#LN626"><span class='Ref_To_Local'>bb</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN277"><span class='Ref_to_Member'>type</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN625"><span class='Ref_To_Local'>aa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN277"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>&GT; </span><a href="regc_nfa.c.html#LN626"><span class='Ref_To_Local'>bb</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN277"><span class='Ref_to_Member'>type</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end sortins_cmp &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * sortouts - sort the out arcs of a state by to/color/type 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN648"></a><span class='Declare_Function'>sortouts</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="regc_nfa.c.html#LN648"><span class='Ref_to_Parameter'>nfa</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>nfa</span><span class='Delimiter'>, 
</span><a name="LN649"></a>         <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>s</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN651"></a>    <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>**</span><span class='Declare_Local'>sortarray</span><span class='Delimiter'>; 
</span><a name="LN652"></a>    <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>a</span><span class='Delimiter'>; 
</span><a name="LN653"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>n</span> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN649"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN304"><span class='Ref_to_Member'>nouts</span></a><span class='Delimiter'>; 
</span><a name="LN654"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN653"><span class='Ref_To_Local'>n</span></a> <span class='Operator'>&LT;= </span><span class='Number'>1</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>;</span>                 <span class='Comment_Single_Line'>/* nothing to do */ 
</span>    <span class='Comment_Multi_Line'>/* make an array of arc pointers ... */ 
</span>    <a href="regc_nfa.c.html#LN651"><span class='Ref_To_Local'>sortarray</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>**</span><span class='Parentheses'>) </span><a href="../../include/regex/regcustom.h.html#LN61"><span class='Ref_to_Macro'>MALLOC</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN653"><span class='Ref_To_Local'>n</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN651"><span class='Ref_To_Local'>sortarray</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="regc_nfa.c.html#LN39"><span class='Ref_to_Macro'>NERR</span></a><span class='Parentheses'>(</span><a href="../../include/regex/regex.h.html#LN148"><span class='Ref_to_Const'>REG_ESPACE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="regc_nfa.c.html#LN654"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN652"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN649"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN305"><span class='Ref_to_Member'>outs</span></a><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN652"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN652"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN652"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN281"><span class='Ref_to_Member'>outchain</span></a><span class='Parentheses'>) 
</span>        <a href="regc_nfa.c.html#LN651"><span class='Ref_To_Local'>sortarray</span></a><span class='Delimiter'>[</span><a href="regc_nfa.c.html#LN654"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="regc_nfa.c.html#LN652"><span class='Ref_To_Local'>a</span></a><span class='Delimiter'>; 
</span>    <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN654"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>== </span><a href="regc_nfa.c.html#LN653"><span class='Ref_To_Local'>n</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* ... sort the array */ 
</span>    <a href="../../include/port.h.html#LN439"><span class='Ref_to_Macro'>qsort</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN651"><span class='Ref_To_Local'>sortarray</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN653"><span class='Ref_To_Local'>n</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="regcomp.c.html#LN137"><span class='Ref_to_Proto'>sortouts_cmp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* ... and rebuild arc list in order */ 
</span>    <span class='Comment_Multi_Line'>/* it seems worth special-casing first and last items to simplify loop */ 
</span>    <a href="regc_nfa.c.html#LN652"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN651"><span class='Ref_To_Local'>sortarray</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]; 
</span>    <a href="regc_nfa.c.html#LN649"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN305"><span class='Ref_to_Member'>outs</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN652"><span class='Ref_To_Local'>a</span></a><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN652"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN281"><span class='Ref_to_Member'>outchain</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN651"><span class='Ref_To_Local'>sortarray</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]; 
</span>    <a href="regc_nfa.c.html#LN652"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN282"><span class='Ref_to_Member'>outchainRev</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN654"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN654"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="regc_nfa.c.html#LN653"><span class='Ref_To_Local'>n</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN654"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="regc_nfa.c.html#LN652"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN651"><span class='Ref_To_Local'>sortarray</span></a><span class='Delimiter'>[</span><a href="regc_nfa.c.html#LN654"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span>        <a href="regc_nfa.c.html#LN652"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN281"><span class='Ref_to_Member'>outchain</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN651"><span class='Ref_To_Local'>sortarray</span></a><span class='Delimiter'>[</span><a href="regc_nfa.c.html#LN654"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>]; 
</span>        <a href="regc_nfa.c.html#LN652"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN282"><span class='Ref_to_Member'>outchainRev</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN651"><span class='Ref_To_Local'>sortarray</span></a><span class='Delimiter'>[</span><a href="regc_nfa.c.html#LN654"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>]; 
</span>    <span class='Delimiter'>} 
</span>    <a href="regc_nfa.c.html#LN652"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN651"><span class='Ref_To_Local'>sortarray</span></a><span class='Delimiter'>[</span><a href="regc_nfa.c.html#LN654"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span>    <a href="regc_nfa.c.html#LN652"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN281"><span class='Ref_to_Member'>outchain</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN652"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN282"><span class='Ref_to_Member'>outchainRev</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN651"><span class='Ref_To_Local'>sortarray</span></a><span class='Delimiter'>[</span><a href="regc_nfa.c.html#LN654"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>]; 
</span>    <a href="../../common/unicode_norm.c.html#LN25"><span class='Ref_to_Macro'>FREE</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN651"><span class='Ref_To_Local'>sortarray</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end sortouts &raquo; </span> 
 
<span class='Keyword'>static int 
</span><a name="LN690"></a><span class='Declare_Function'>sortouts_cmp</span><span class='Parentheses'>(</span><span class='Keyword'>const void </span><span class='Operator'>*</span><span class='Declare_Parameter'>a</span><span class='Delimiter'>, </span><span class='Keyword'>const void </span><span class='Operator'>*</span><span class='Declare_Parameter'>b</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN692"></a>    <span class='Keyword'>const </span><span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>aa</span> <span class='Operator'>= *</span><span class='Parentheses'>((</span><span class='Keyword'>const </span><span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>* </span><span class='Keyword'>const </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="regc_nfa.c.html#LN690"><span class='Ref_to_Parameter'>a</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN693"></a>    <span class='Keyword'>const </span><span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>bb</span> <span class='Operator'>= *</span><span class='Parentheses'>((</span><span class='Keyword'>const </span><span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>* </span><span class='Keyword'>const </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="regc_nfa.c.html#LN690"><span class='Ref_to_Parameter'>b</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* we check the fields in the order they are most likely to be different */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN692"><span class='Ref_To_Local'>aa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN280"><span class='Ref_to_Member'>to</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN299"><span class='Ref_to_Member'>no</span></a> <span class='Operator'>&LT; </span><a href="regc_nfa.c.html#LN693"><span class='Ref_To_Local'>bb</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN280"><span class='Ref_to_Member'>to</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN299"><span class='Ref_to_Member'>no</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN692"><span class='Ref_To_Local'>aa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN280"><span class='Ref_to_Member'>to</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN299"><span class='Ref_to_Member'>no</span></a> <span class='Operator'>&GT; </span><a href="regc_nfa.c.html#LN693"><span class='Ref_To_Local'>bb</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN280"><span class='Ref_to_Member'>to</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN299"><span class='Ref_to_Member'>no</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN692"><span class='Ref_To_Local'>aa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN278"><span class='Ref_to_Member'>co</span></a> <span class='Operator'>&LT; </span><a href="regc_nfa.c.html#LN693"><span class='Ref_To_Local'>bb</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN278"><span class='Ref_to_Member'>co</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN692"><span class='Ref_To_Local'>aa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN278"><span class='Ref_to_Member'>co</span></a> <span class='Operator'>&GT; </span><a href="regc_nfa.c.html#LN693"><span class='Ref_To_Local'>bb</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN278"><span class='Ref_to_Member'>co</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN692"><span class='Ref_To_Local'>aa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN277"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>&LT; </span><a href="regc_nfa.c.html#LN693"><span class='Ref_To_Local'>bb</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN277"><span class='Ref_to_Member'>type</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN692"><span class='Ref_To_Local'>aa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN277"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>&GT; </span><a href="regc_nfa.c.html#LN693"><span class='Ref_To_Local'>bb</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN277"><span class='Ref_to_Member'>type</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end sortouts_cmp &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Common decision logic about whether to use arc-by-arc operations or 
 * sort/merge.  If there's just a few source arcs we cannot recoup the 
 * cost of sorting the destination arc list, no matter how large it is. 
 * Otherwise, limit the number of arc-by-arc comparisons to about 1000 
 * (a somewhat arbitrary choice, but the breakeven point would probably 
 * be machine dependent anyway). 
 */ 
</span><a name="LN719"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>BULK_ARC_OP_USE_SORT</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>nsrcarcs</span><span class='Delimiter'>, </span><span class='Declare_Parameter'>ndestarcs</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>    <span class='Parentheses'>((</span><a href="regc_nfa.c.html#LN719"><span class='Ref_to_Parameter'>nsrcarcs</span></a><span class='Parentheses'>)</span> <span class='Operator'>&LT; </span><span class='Number'>4</span> <span class='Operator'>? </span><span class='Number'>0</span> <span class='Operator'>: </span><span class='Parentheses'>((</span><a href="regc_nfa.c.html#LN719"><span class='Ref_to_Parameter'>nsrcarcs</span></a><span class='Parentheses'>) </span><span class='Operator'>&GT; </span><span class='Number'>32</span> <span class='Operator'>|| </span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN719"><span class='Ref_to_Parameter'>ndestarcs</span></a><span class='Parentheses'>) </span><span class='Operator'>&GT; </span><span class='Number'>32</span><span class='Parentheses'>))</span> 
 
<span class='Comment_Multi_Line'>/* 
 * moveins - move all in arcs of a state to another state 
 * 
 * You might think this could be done better by just updating the 
 * existing arcs, and you would be right if it weren't for the need 
 * for duplicate suppression, which makes it easier to just make new 
 * ones to exploit the suppression built into newarc. 
 * 
 * However, if we have a whole lot of arcs to deal with, retail duplicate 
 * checks become too slow.  In that case we proceed by sorting and merging 
 * the arc lists, and then we can indeed just update the arcs in-place. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN735"></a><span class='Declare_Function'>moveins</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="regc_nfa.c.html#LN735"><span class='Ref_to_Parameter'>nfa</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>nfa</span><span class='Delimiter'>, 
</span><a name="LN736"></a>        <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>oldState</span><span class='Delimiter'>, 
</span><a name="LN737"></a>        <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>newState</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN736"><span class='Ref_to_Parameter'>oldState</span></a> <span class='Operator'>!= </span><a href="regc_nfa.c.html#LN737"><span class='Ref_to_Parameter'>newState</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="regc_nfa.c.html#LN719"><span class='Ref_to_Macro'>BULK_ARC_OP_USE_SORT</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN736"><span class='Ref_to_Parameter'>oldState</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN302"><span class='Ref_to_Member'>nins</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN737"><span class='Ref_to_Parameter'>newState</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN302"><span class='Ref_to_Member'>nins</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* With not too many arcs, just do them one at a time */ 
</span><a name="LN744"></a>        <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>a</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>while</span> <span class='Parentheses'>((</span><a href="regc_nfa.c.html#LN744"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN736"><span class='Ref_to_Parameter'>oldState</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN303"><span class='Ref_to_Member'>ins</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <a href="regcomp.c.html#LN133"><span class='Ref_to_Proto'>cparc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN735"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN744"><span class='Ref_To_Local'>a</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN744"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN279"><span class='Ref_to_Member'>from</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN737"><span class='Ref_to_Parameter'>newState</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="regcomp.c.html#LN129"><span class='Ref_to_Proto'>freearc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN735"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN744"><span class='Ref_To_Local'>a</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * With many arcs, use a sort-merge approach.  Note changearctarget() 
         * will put the arc onto the front of newState's chain, so it does not 
         * break our walk through the sorted part of the chain. 
         */ 
</span><a name="LN759"></a>        <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>oa</span><span class='Delimiter'>; 
</span><a name="LN760"></a>        <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>na</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Because we bypass newarc() in this code path, we'd better include a 
         * cancel check. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/regex/regguts.h.html#LN451"><span class='Ref_to_Macro'>CANCEL_REQUESTED</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN735"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN327"><span class='Ref_to_Member'>v</span></a><span class='Operator'>-&GT;</span><a href="regexec.c.html#LN104"><span class='Ref_to_Member'>re</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <a href="regc_nfa.c.html#LN39"><span class='Ref_to_Macro'>NERR</span></a><span class='Parentheses'>(</span><a href="../../include/regex/regex.h.html#LN156"><span class='Ref_to_Const'>REG_CANCEL</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>return</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <a href="regcomp.c.html#LN134"><span class='Ref_to_Proto'>sortins</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN735"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN736"><span class='Ref_to_Parameter'>oldState</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="regcomp.c.html#LN134"><span class='Ref_to_Proto'>sortins</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN735"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN737"><span class='Ref_to_Parameter'>newState</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN38"><span class='Ref_to_Macro'>NISERR</span></a><span class='Parentheses'>())</span> 
            <span class='Control'>return</span><span class='Delimiter'>;</span>             <span class='Comment_Single_Line'>/* might have failed to sort */ 
</span>        <a href="regc_nfa.c.html#LN759"><span class='Ref_To_Local'>oa</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN736"><span class='Ref_to_Parameter'>oldState</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN303"><span class='Ref_to_Member'>ins</span></a><span class='Delimiter'>; 
</span>        <a href="regc_nfa.c.html#LN760"><span class='Ref_To_Local'>na</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN737"><span class='Ref_to_Parameter'>newState</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN303"><span class='Ref_to_Member'>ins</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN759"><span class='Ref_To_Local'>oa</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL </span><span class='Operator'>&& </span><a href="regc_nfa.c.html#LN760"><span class='Ref_To_Local'>na</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN780"></a>            <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>a</span> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN759"><span class='Ref_To_Local'>oa</span></a><span class='Delimiter'>; 
</span> 
            <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="regcomp.c.html#LN135"><span class='Ref_to_Proto'>sortins_cmp</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="regc_nfa.c.html#LN759"><span class='Ref_To_Local'>oa</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="regc_nfa.c.html#LN760"><span class='Ref_To_Local'>na</span></a><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Control'>case</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Operator'>: 
</span>                    <span class='Comment_Multi_Line'>/* newState does not have anything matching oa */ 
</span>                    <a href="regc_nfa.c.html#LN759"><span class='Ref_To_Local'>oa</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN759"><span class='Ref_To_Local'>oa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN284"><span class='Ref_to_Member'>inchain</span></a><span class='Delimiter'>; 
</span> 
                    <span class='Comment_Multi_Line'>/* 
                     * Rather than doing createarc+freearc, we can just unlink 
                     * and relink the existing arc struct. 
                     */ 
</span>                    <a href="regcomp.c.html#LN130"><span class='Ref_to_Proto'>changearctarget</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN780"><span class='Ref_To_Local'>a</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN737"><span class='Ref_to_Parameter'>newState</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Control'>case</span> <span class='Number'>0</span><span class='Operator'>: 
</span>                    <span class='Comment_Multi_Line'>/* match, advance in both lists */ 
</span>                    <a href="regc_nfa.c.html#LN759"><span class='Ref_To_Local'>oa</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN759"><span class='Ref_To_Local'>oa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN284"><span class='Ref_to_Member'>inchain</span></a><span class='Delimiter'>; 
</span>                    <a href="regc_nfa.c.html#LN760"><span class='Ref_To_Local'>na</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN760"><span class='Ref_To_Local'>na</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN284"><span class='Ref_to_Member'>inchain</span></a><span class='Delimiter'>; 
</span>                    <span class='Comment_Multi_Line'>/* ... and drop duplicate arc from oldState */ 
</span>                    <a href="regcomp.c.html#LN129"><span class='Ref_to_Proto'>freearc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN735"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN780"><span class='Ref_To_Local'>a</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Control'>case</span> <span class='Operator'>+</span><span class='Number'>1</span><span class='Operator'>: 
</span>                    <span class='Comment_Multi_Line'>/* advance only na; oa might have a match later */ 
</span>                    <a href="regc_nfa.c.html#LN760"><span class='Ref_To_Local'>na</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN760"><span class='Ref_To_Local'>na</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN284"><span class='Ref_to_Member'>inchain</span></a><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Control'>default</span><span class='Operator'>: 
</span>                    <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="../../include/regex/regguts.h.html#LN90"><span class='Ref_to_Const'>NOTREACHED</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch sortins_cmp(&oa,&na) &raquo; </span> 
        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end while oa!=NULL&&na!=NULL &raquo; </span> 
        <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN759"><span class='Ref_To_Local'>oa</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* newState does not have anything matching oa */ 
</span><a name="LN812"></a>            <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>a</span> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN759"><span class='Ref_To_Local'>oa</span></a><span class='Delimiter'>; 
</span> 
            <a href="regc_nfa.c.html#LN759"><span class='Ref_To_Local'>oa</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN759"><span class='Ref_To_Local'>oa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN284"><span class='Ref_to_Member'>inchain</span></a><span class='Delimiter'>; 
</span>            <a href="regcomp.c.html#LN130"><span class='Ref_to_Proto'>changearctarget</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN812"><span class='Ref_To_Local'>a</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN737"><span class='Ref_to_Parameter'>newState</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
 
    <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN736"><span class='Ref_to_Parameter'>oldState</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN302"><span class='Ref_to_Member'>nins</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN736"><span class='Ref_to_Parameter'>oldState</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN303"><span class='Ref_to_Member'>ins</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end moveins &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * copyins - copy in arcs of a state to another state 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN827"></a><span class='Declare_Function'>copyins</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="regc_nfa.c.html#LN827"><span class='Ref_to_Parameter'>nfa</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>nfa</span><span class='Delimiter'>, 
</span><a name="LN828"></a>        <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>oldState</span><span class='Delimiter'>, 
</span><a name="LN829"></a>        <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>newState</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN828"><span class='Ref_to_Parameter'>oldState</span></a> <span class='Operator'>!= </span><a href="regc_nfa.c.html#LN829"><span class='Ref_to_Parameter'>newState</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="regc_nfa.c.html#LN719"><span class='Ref_to_Macro'>BULK_ARC_OP_USE_SORT</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN828"><span class='Ref_to_Parameter'>oldState</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN302"><span class='Ref_to_Member'>nins</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN829"><span class='Ref_to_Parameter'>newState</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN302"><span class='Ref_to_Member'>nins</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* With not too many arcs, just do them one at a time */ 
</span><a name="LN836"></a>        <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>a</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN836"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN828"><span class='Ref_to_Parameter'>oldState</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN303"><span class='Ref_to_Member'>ins</span></a><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN836"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN836"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN836"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN284"><span class='Ref_to_Member'>inchain</span></a><span class='Parentheses'>) 
</span>            <a href="regcomp.c.html#LN133"><span class='Ref_to_Proto'>cparc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN827"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN836"><span class='Ref_To_Local'>a</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN836"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN279"><span class='Ref_to_Member'>from</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN829"><span class='Ref_to_Parameter'>newState</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * With many arcs, use a sort-merge approach.  Note that createarc() 
         * will put new arcs onto the front of newState's chain, so it does 
         * not break our walk through the sorted part of the chain. 
         */ 
</span><a name="LN848"></a>        <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>oa</span><span class='Delimiter'>; 
</span><a name="LN849"></a>        <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>na</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Because we bypass newarc() in this code path, we'd better include a 
         * cancel check. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/regex/regguts.h.html#LN451"><span class='Ref_to_Macro'>CANCEL_REQUESTED</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN827"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN327"><span class='Ref_to_Member'>v</span></a><span class='Operator'>-&GT;</span><a href="regexec.c.html#LN104"><span class='Ref_to_Member'>re</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <a href="regc_nfa.c.html#LN39"><span class='Ref_to_Macro'>NERR</span></a><span class='Parentheses'>(</span><a href="../../include/regex/regex.h.html#LN156"><span class='Ref_to_Const'>REG_CANCEL</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>return</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <a href="regcomp.c.html#LN134"><span class='Ref_to_Proto'>sortins</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN827"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN828"><span class='Ref_to_Parameter'>oldState</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="regcomp.c.html#LN134"><span class='Ref_to_Proto'>sortins</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN827"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN829"><span class='Ref_to_Parameter'>newState</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN38"><span class='Ref_to_Macro'>NISERR</span></a><span class='Parentheses'>())</span> 
            <span class='Control'>return</span><span class='Delimiter'>;</span>             <span class='Comment_Single_Line'>/* might have failed to sort */ 
</span>        <a href="regc_nfa.c.html#LN848"><span class='Ref_To_Local'>oa</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN828"><span class='Ref_to_Parameter'>oldState</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN303"><span class='Ref_to_Member'>ins</span></a><span class='Delimiter'>; 
</span>        <a href="regc_nfa.c.html#LN849"><span class='Ref_To_Local'>na</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN829"><span class='Ref_to_Parameter'>newState</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN303"><span class='Ref_to_Member'>ins</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN848"><span class='Ref_To_Local'>oa</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL </span><span class='Operator'>&& </span><a href="regc_nfa.c.html#LN849"><span class='Ref_To_Local'>na</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN869"></a>            <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>a</span> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN848"><span class='Ref_To_Local'>oa</span></a><span class='Delimiter'>; 
</span> 
            <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="regcomp.c.html#LN135"><span class='Ref_to_Proto'>sortins_cmp</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="regc_nfa.c.html#LN848"><span class='Ref_To_Local'>oa</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="regc_nfa.c.html#LN849"><span class='Ref_To_Local'>na</span></a><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Control'>case</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Operator'>: 
</span>                    <span class='Comment_Multi_Line'>/* newState does not have anything matching oa */ 
</span>                    <a href="regc_nfa.c.html#LN848"><span class='Ref_To_Local'>oa</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN848"><span class='Ref_To_Local'>oa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN284"><span class='Ref_to_Member'>inchain</span></a><span class='Delimiter'>; 
</span>                    <a href="regcomp.c.html#LN127"><span class='Ref_to_Proto'>createarc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN827"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN869"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN277"><span class='Ref_to_Member'>type</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN869"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN278"><span class='Ref_to_Member'>co</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN869"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN279"><span class='Ref_to_Member'>from</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN829"><span class='Ref_to_Parameter'>newState</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Control'>case</span> <span class='Number'>0</span><span class='Operator'>: 
</span>                    <span class='Comment_Multi_Line'>/* match, advance in both lists */ 
</span>                    <a href="regc_nfa.c.html#LN848"><span class='Ref_To_Local'>oa</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN848"><span class='Ref_To_Local'>oa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN284"><span class='Ref_to_Member'>inchain</span></a><span class='Delimiter'>; 
</span>                    <a href="regc_nfa.c.html#LN849"><span class='Ref_To_Local'>na</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN849"><span class='Ref_To_Local'>na</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN284"><span class='Ref_to_Member'>inchain</span></a><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Control'>case</span> <span class='Operator'>+</span><span class='Number'>1</span><span class='Operator'>: 
</span>                    <span class='Comment_Multi_Line'>/* advance only na; oa might have a match later */ 
</span>                    <a href="regc_nfa.c.html#LN849"><span class='Ref_To_Local'>na</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN849"><span class='Ref_To_Local'>na</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN284"><span class='Ref_to_Member'>inchain</span></a><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Control'>default</span><span class='Operator'>: 
</span>                    <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="../../include/regex/regguts.h.html#LN90"><span class='Ref_to_Const'>NOTREACHED</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end while oa!=NULL&&na!=NULL &raquo; </span> 
        <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN848"><span class='Ref_To_Local'>oa</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* newState does not have anything matching oa */ 
</span><a name="LN894"></a>            <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>a</span> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN848"><span class='Ref_To_Local'>oa</span></a><span class='Delimiter'>; 
</span> 
            <a href="regc_nfa.c.html#LN848"><span class='Ref_To_Local'>oa</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN848"><span class='Ref_To_Local'>oa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN284"><span class='Ref_to_Member'>inchain</span></a><span class='Delimiter'>; 
</span>            <a href="regcomp.c.html#LN127"><span class='Ref_to_Proto'>createarc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN827"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN894"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN277"><span class='Ref_to_Member'>type</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN894"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN278"><span class='Ref_to_Member'>co</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN894"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN279"><span class='Ref_to_Member'>from</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN829"><span class='Ref_to_Parameter'>newState</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
<span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end copyins &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * mergeins - merge a list of inarcs into a state 
 * 
 * This is much like copyins, but the source arcs are listed in an array, 
 * and are not guaranteed unique.  It's okay to clobber the array contents. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN909"></a><span class='Declare_Function'>mergeins</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="regc_nfa.c.html#LN909"><span class='Ref_to_Parameter'>nfa</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>nfa</span><span class='Delimiter'>, 
</span><a name="LN910"></a>         <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>s</span><span class='Delimiter'>, 
</span><a name="LN911"></a>         <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>** </span><span class='Declare_Parameter'>arcarray</span><span class='Delimiter'>, 
</span><a name="LN912"></a>         <span class='Keyword'>int </span><span class='Declare_Parameter'>arccount</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN914"></a>    <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>na</span><span class='Delimiter'>; 
</span><a name="LN915"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN916"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>j</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN912"><span class='Ref_to_Parameter'>arccount</span></a> <span class='Operator'>&LT;= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Because we bypass newarc() in this code path, we'd better include a 
     * cancel check. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/regex/regguts.h.html#LN451"><span class='Ref_to_Macro'>CANCEL_REQUESTED</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN909"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN327"><span class='Ref_to_Member'>v</span></a><span class='Operator'>-&GT;</span><a href="regexec.c.html#LN104"><span class='Ref_to_Member'>re</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="regc_nfa.c.html#LN39"><span class='Ref_to_Macro'>NERR</span></a><span class='Parentheses'>(</span><a href="../../include/regex/regex.h.html#LN156"><span class='Ref_to_Const'>REG_CANCEL</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* Sort existing inarcs as well as proposed new ones */ 
</span>    <a href="regcomp.c.html#LN134"><span class='Ref_to_Proto'>sortins</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN909"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN910"><span class='Ref_to_Parameter'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN38"><span class='Ref_to_Macro'>NISERR</span></a><span class='Parentheses'>())</span> 
        <span class='Control'>return</span><span class='Delimiter'>;</span>                 <span class='Comment_Single_Line'>/* might have failed to sort */ 
</span> 
    <a href="../../include/port.h.html#LN439"><span class='Ref_to_Macro'>qsort</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN911"><span class='Ref_to_Parameter'>arcarray</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN912"><span class='Ref_to_Parameter'>arccount</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="regcomp.c.html#LN135"><span class='Ref_to_Proto'>sortins_cmp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * arcarray very likely includes dups, so we must eliminate them.  (This 
     * could be folded into the next loop, but it's not worth the trouble.) 
     */ 
</span>    <a href="regc_nfa.c.html#LN916"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN915"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN915"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="regc_nfa.c.html#LN912"><span class='Ref_to_Parameter'>arccount</span></a><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN915"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="regcomp.c.html#LN135"><span class='Ref_to_Proto'>sortins_cmp</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="regc_nfa.c.html#LN911"><span class='Ref_to_Parameter'>arcarray</span></a><span class='Delimiter'>[</span><a href="regc_nfa.c.html#LN916"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>], </span><span class='Operator'>&</span><a href="regc_nfa.c.html#LN911"><span class='Ref_to_Parameter'>arcarray</span></a><span class='Delimiter'>[</span><a href="regc_nfa.c.html#LN915"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Control'>case</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Operator'>: 
</span>                <span class='Comment_Multi_Line'>/* non-dup */ 
</span>                <a href="regc_nfa.c.html#LN911"><span class='Ref_to_Parameter'>arcarray</span></a><span class='Delimiter'>[</span><span class='Operator'>++</span><a href="regc_nfa.c.html#LN916"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="regc_nfa.c.html#LN911"><span class='Ref_to_Parameter'>arcarray</span></a><span class='Delimiter'>[</span><a href="regc_nfa.c.html#LN915"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <span class='Number'>0</span><span class='Operator'>: 
</span>                <span class='Comment_Multi_Line'>/* dup */ 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>default</span><span class='Operator'>: 
</span>                <span class='Comment_Multi_Line'>/* trouble */ 
</span>                <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="../../include/regex/regguts.h.html#LN90"><span class='Ref_to_Const'>NOTREACHED</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span>    <a href="regc_nfa.c.html#LN912"><span class='Ref_to_Parameter'>arccount</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN916"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Now merge into s' inchain.  Note that createarc() will put new arcs 
     * onto the front of s's chain, so it does not break our walk through the 
     * sorted part of the chain. 
     */ 
</span>    <a href="regc_nfa.c.html#LN915"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN914"><span class='Ref_To_Local'>na</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN910"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN303"><span class='Ref_to_Member'>ins</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN915"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="regc_nfa.c.html#LN912"><span class='Ref_to_Parameter'>arccount</span></a> <span class='Operator'>&& </span><a href="regc_nfa.c.html#LN914"><span class='Ref_To_Local'>na</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN970"></a>        <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>a</span> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN911"><span class='Ref_to_Parameter'>arcarray</span></a><span class='Delimiter'>[</span><a href="regc_nfa.c.html#LN915"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span> 
        <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="regcomp.c.html#LN135"><span class='Ref_to_Proto'>sortins_cmp</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="regc_nfa.c.html#LN970"><span class='Ref_To_Local'>a</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="regc_nfa.c.html#LN914"><span class='Ref_To_Local'>na</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Control'>case</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Operator'>: 
</span>                <span class='Comment_Multi_Line'>/* s does not have anything matching a */ 
</span>                <a href="regcomp.c.html#LN127"><span class='Ref_to_Proto'>createarc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN909"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN970"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN277"><span class='Ref_to_Member'>type</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN970"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN278"><span class='Ref_to_Member'>co</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN970"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN279"><span class='Ref_to_Member'>from</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN910"><span class='Ref_to_Parameter'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="regc_nfa.c.html#LN915"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <span class='Number'>0</span><span class='Operator'>: 
</span>                <span class='Comment_Multi_Line'>/* match, advance in both lists */ 
</span>                <a href="regc_nfa.c.html#LN915"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>                <a href="regc_nfa.c.html#LN914"><span class='Ref_To_Local'>na</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN914"><span class='Ref_To_Local'>na</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN284"><span class='Ref_to_Member'>inchain</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <span class='Operator'>+</span><span class='Number'>1</span><span class='Operator'>: 
</span>                <span class='Comment_Multi_Line'>/* advance only na; array might have a match later */ 
</span>                <a href="regc_nfa.c.html#LN914"><span class='Ref_To_Local'>na</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN914"><span class='Ref_To_Local'>na</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN284"><span class='Ref_to_Member'>inchain</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>default</span><span class='Operator'>: 
</span>                <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="../../include/regex/regguts.h.html#LN90"><span class='Ref_to_Const'>NOTREACHED</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end while i&LT;arccount&&na!=NULL &raquo; </span> 
    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN915"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="regc_nfa.c.html#LN912"><span class='Ref_to_Parameter'>arccount</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* s does not have anything matching a */ 
</span><a name="LN995"></a>        <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>a</span> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN911"><span class='Ref_to_Parameter'>arcarray</span></a><span class='Delimiter'>[</span><a href="regc_nfa.c.html#LN915"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span> 
        <a href="regcomp.c.html#LN127"><span class='Ref_to_Proto'>createarc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN909"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN995"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN277"><span class='Ref_to_Member'>type</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN995"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN278"><span class='Ref_to_Member'>co</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN995"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN279"><span class='Ref_to_Member'>from</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN910"><span class='Ref_to_Parameter'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="regc_nfa.c.html#LN915"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
}</span><span class='Auto_Annotations'> &laquo; end mergeins &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * moveouts - move all out arcs of a state to another state 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN1006"></a><span class='Declare_Function'>moveouts</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="regc_nfa.c.html#LN1006"><span class='Ref_to_Parameter'>nfa</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>nfa</span><span class='Delimiter'>, 
</span><a name="LN1007"></a>         <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>oldState</span><span class='Delimiter'>, 
</span><a name="LN1008"></a>         <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>newState</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1007"><span class='Ref_to_Parameter'>oldState</span></a> <span class='Operator'>!= </span><a href="regc_nfa.c.html#LN1008"><span class='Ref_to_Parameter'>newState</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="regc_nfa.c.html#LN719"><span class='Ref_to_Macro'>BULK_ARC_OP_USE_SORT</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1007"><span class='Ref_to_Parameter'>oldState</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN304"><span class='Ref_to_Member'>nouts</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1008"><span class='Ref_to_Parameter'>newState</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN304"><span class='Ref_to_Member'>nouts</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* With not too many arcs, just do them one at a time */ 
</span><a name="LN1015"></a>        <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>a</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>while</span> <span class='Parentheses'>((</span><a href="regc_nfa.c.html#LN1015"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1007"><span class='Ref_to_Parameter'>oldState</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN305"><span class='Ref_to_Member'>outs</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <a href="regcomp.c.html#LN133"><span class='Ref_to_Proto'>cparc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1006"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1015"><span class='Ref_To_Local'>a</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1008"><span class='Ref_to_Parameter'>newState</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1015"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN280"><span class='Ref_to_Member'>to</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="regcomp.c.html#LN129"><span class='Ref_to_Proto'>freearc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1006"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1015"><span class='Ref_To_Local'>a</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * With many arcs, use a sort-merge approach.  Note that createarc() 
         * will put new arcs onto the front of newState's chain, so it does 
         * not break our walk through the sorted part of the chain. 
         */ 
</span><a name="LN1030"></a>        <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>oa</span><span class='Delimiter'>; 
</span><a name="LN1031"></a>        <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>na</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Because we bypass newarc() in this code path, we'd better include a 
         * cancel check. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/regex/regguts.h.html#LN451"><span class='Ref_to_Macro'>CANCEL_REQUESTED</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1006"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN327"><span class='Ref_to_Member'>v</span></a><span class='Operator'>-&GT;</span><a href="regexec.c.html#LN104"><span class='Ref_to_Member'>re</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <a href="regc_nfa.c.html#LN39"><span class='Ref_to_Macro'>NERR</span></a><span class='Parentheses'>(</span><a href="../../include/regex/regex.h.html#LN156"><span class='Ref_to_Const'>REG_CANCEL</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>return</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <a href="regcomp.c.html#LN136"><span class='Ref_to_Proto'>sortouts</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1006"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1007"><span class='Ref_to_Parameter'>oldState</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="regcomp.c.html#LN136"><span class='Ref_to_Proto'>sortouts</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1006"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1008"><span class='Ref_to_Parameter'>newState</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN38"><span class='Ref_to_Macro'>NISERR</span></a><span class='Parentheses'>())</span> 
            <span class='Control'>return</span><span class='Delimiter'>;</span>             <span class='Comment_Single_Line'>/* might have failed to sort */ 
</span>        <a href="regc_nfa.c.html#LN1030"><span class='Ref_To_Local'>oa</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1007"><span class='Ref_to_Parameter'>oldState</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN305"><span class='Ref_to_Member'>outs</span></a><span class='Delimiter'>; 
</span>        <a href="regc_nfa.c.html#LN1031"><span class='Ref_To_Local'>na</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1008"><span class='Ref_to_Parameter'>newState</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN305"><span class='Ref_to_Member'>outs</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1030"><span class='Ref_To_Local'>oa</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL </span><span class='Operator'>&& </span><a href="regc_nfa.c.html#LN1031"><span class='Ref_To_Local'>na</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN1051"></a>            <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>a</span> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1030"><span class='Ref_To_Local'>oa</span></a><span class='Delimiter'>; 
</span> 
            <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="regcomp.c.html#LN137"><span class='Ref_to_Proto'>sortouts_cmp</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="regc_nfa.c.html#LN1030"><span class='Ref_To_Local'>oa</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="regc_nfa.c.html#LN1031"><span class='Ref_To_Local'>na</span></a><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Control'>case</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Operator'>: 
</span>                    <span class='Comment_Multi_Line'>/* newState does not have anything matching oa */ 
</span>                    <a href="regc_nfa.c.html#LN1030"><span class='Ref_To_Local'>oa</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1030"><span class='Ref_To_Local'>oa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN281"><span class='Ref_to_Member'>outchain</span></a><span class='Delimiter'>; 
</span>                    <a href="regcomp.c.html#LN127"><span class='Ref_to_Proto'>createarc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1006"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1051"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN277"><span class='Ref_to_Member'>type</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1051"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN278"><span class='Ref_to_Member'>co</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1008"><span class='Ref_to_Parameter'>newState</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1051"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN280"><span class='Ref_to_Member'>to</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="regcomp.c.html#LN129"><span class='Ref_to_Proto'>freearc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1006"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1051"><span class='Ref_To_Local'>a</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Control'>case</span> <span class='Number'>0</span><span class='Operator'>: 
</span>                    <span class='Comment_Multi_Line'>/* match, advance in both lists */ 
</span>                    <a href="regc_nfa.c.html#LN1030"><span class='Ref_To_Local'>oa</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1030"><span class='Ref_To_Local'>oa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN281"><span class='Ref_to_Member'>outchain</span></a><span class='Delimiter'>; 
</span>                    <a href="regc_nfa.c.html#LN1031"><span class='Ref_To_Local'>na</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1031"><span class='Ref_To_Local'>na</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN281"><span class='Ref_to_Member'>outchain</span></a><span class='Delimiter'>; 
</span>                    <span class='Comment_Multi_Line'>/* ... and drop duplicate arc from oldState */ 
</span>                    <a href="regcomp.c.html#LN129"><span class='Ref_to_Proto'>freearc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1006"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1051"><span class='Ref_To_Local'>a</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Control'>case</span> <span class='Operator'>+</span><span class='Number'>1</span><span class='Operator'>: 
</span>                    <span class='Comment_Multi_Line'>/* advance only na; oa might have a match later */ 
</span>                    <a href="regc_nfa.c.html#LN1031"><span class='Ref_To_Local'>na</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1031"><span class='Ref_To_Local'>na</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN281"><span class='Ref_to_Member'>outchain</span></a><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Control'>default</span><span class='Operator'>: 
</span>                    <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="../../include/regex/regguts.h.html#LN90"><span class='Ref_to_Const'>NOTREACHED</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch sortouts_cmp(&oa,&na) &raquo; </span> 
        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end while oa!=NULL&&na!=NULL &raquo; </span> 
        <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1030"><span class='Ref_To_Local'>oa</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* newState does not have anything matching oa */ 
</span><a name="LN1079"></a>            <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>a</span> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1030"><span class='Ref_To_Local'>oa</span></a><span class='Delimiter'>; 
</span> 
            <a href="regc_nfa.c.html#LN1030"><span class='Ref_To_Local'>oa</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1030"><span class='Ref_To_Local'>oa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN281"><span class='Ref_to_Member'>outchain</span></a><span class='Delimiter'>; 
</span>            <a href="regcomp.c.html#LN127"><span class='Ref_to_Proto'>createarc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1006"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1079"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN277"><span class='Ref_to_Member'>type</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1079"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN278"><span class='Ref_to_Member'>co</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1008"><span class='Ref_to_Parameter'>newState</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1079"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN280"><span class='Ref_to_Member'>to</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="regcomp.c.html#LN129"><span class='Ref_to_Proto'>freearc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1006"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1079"><span class='Ref_To_Local'>a</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
 
    <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1007"><span class='Ref_to_Parameter'>oldState</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN304"><span class='Ref_to_Member'>nouts</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1007"><span class='Ref_to_Parameter'>oldState</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN305"><span class='Ref_to_Member'>outs</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end moveouts &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * copyouts - copy out arcs of a state to another state 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN1095"></a><span class='Declare_Function'>copyouts</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="regc_nfa.c.html#LN1095"><span class='Ref_to_Parameter'>nfa</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>nfa</span><span class='Delimiter'>, 
</span><a name="LN1096"></a>         <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>oldState</span><span class='Delimiter'>, 
</span><a name="LN1097"></a>         <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>newState</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1096"><span class='Ref_to_Parameter'>oldState</span></a> <span class='Operator'>!= </span><a href="regc_nfa.c.html#LN1097"><span class='Ref_to_Parameter'>newState</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="regc_nfa.c.html#LN719"><span class='Ref_to_Macro'>BULK_ARC_OP_USE_SORT</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1096"><span class='Ref_to_Parameter'>oldState</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN304"><span class='Ref_to_Member'>nouts</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1097"><span class='Ref_to_Parameter'>newState</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN304"><span class='Ref_to_Member'>nouts</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* With not too many arcs, just do them one at a time */ 
</span><a name="LN1104"></a>        <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>a</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1104"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1096"><span class='Ref_to_Parameter'>oldState</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN305"><span class='Ref_to_Member'>outs</span></a><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN1104"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN1104"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1104"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN281"><span class='Ref_to_Member'>outchain</span></a><span class='Parentheses'>) 
</span>            <a href="regcomp.c.html#LN133"><span class='Ref_to_Proto'>cparc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1095"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1104"><span class='Ref_To_Local'>a</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1097"><span class='Ref_to_Parameter'>newState</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1104"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN280"><span class='Ref_to_Member'>to</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * With many arcs, use a sort-merge approach.  Note that createarc() 
         * will put new arcs onto the front of newState's chain, so it does 
         * not break our walk through the sorted part of the chain. 
         */ 
</span><a name="LN1116"></a>        <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>oa</span><span class='Delimiter'>; 
</span><a name="LN1117"></a>        <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>na</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Because we bypass newarc() in this code path, we'd better include a 
         * cancel check. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/regex/regguts.h.html#LN451"><span class='Ref_to_Macro'>CANCEL_REQUESTED</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1095"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN327"><span class='Ref_to_Member'>v</span></a><span class='Operator'>-&GT;</span><a href="regexec.c.html#LN104"><span class='Ref_to_Member'>re</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <a href="regc_nfa.c.html#LN39"><span class='Ref_to_Macro'>NERR</span></a><span class='Parentheses'>(</span><a href="../../include/regex/regex.h.html#LN156"><span class='Ref_to_Const'>REG_CANCEL</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>return</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <a href="regcomp.c.html#LN136"><span class='Ref_to_Proto'>sortouts</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1095"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1096"><span class='Ref_to_Parameter'>oldState</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="regcomp.c.html#LN136"><span class='Ref_to_Proto'>sortouts</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1095"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1097"><span class='Ref_to_Parameter'>newState</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN38"><span class='Ref_to_Macro'>NISERR</span></a><span class='Parentheses'>())</span> 
            <span class='Control'>return</span><span class='Delimiter'>;</span>             <span class='Comment_Single_Line'>/* might have failed to sort */ 
</span>        <a href="regc_nfa.c.html#LN1116"><span class='Ref_To_Local'>oa</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1096"><span class='Ref_to_Parameter'>oldState</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN305"><span class='Ref_to_Member'>outs</span></a><span class='Delimiter'>; 
</span>        <a href="regc_nfa.c.html#LN1117"><span class='Ref_To_Local'>na</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1097"><span class='Ref_to_Parameter'>newState</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN305"><span class='Ref_to_Member'>outs</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1116"><span class='Ref_To_Local'>oa</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL </span><span class='Operator'>&& </span><a href="regc_nfa.c.html#LN1117"><span class='Ref_To_Local'>na</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN1137"></a>            <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>a</span> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1116"><span class='Ref_To_Local'>oa</span></a><span class='Delimiter'>; 
</span> 
            <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="regcomp.c.html#LN137"><span class='Ref_to_Proto'>sortouts_cmp</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="regc_nfa.c.html#LN1116"><span class='Ref_To_Local'>oa</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="regc_nfa.c.html#LN1117"><span class='Ref_To_Local'>na</span></a><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Control'>case</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Operator'>: 
</span>                    <span class='Comment_Multi_Line'>/* newState does not have anything matching oa */ 
</span>                    <a href="regc_nfa.c.html#LN1116"><span class='Ref_To_Local'>oa</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1116"><span class='Ref_To_Local'>oa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN281"><span class='Ref_to_Member'>outchain</span></a><span class='Delimiter'>; 
</span>                    <a href="regcomp.c.html#LN127"><span class='Ref_to_Proto'>createarc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1095"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1137"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN277"><span class='Ref_to_Member'>type</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1137"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN278"><span class='Ref_to_Member'>co</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1097"><span class='Ref_to_Parameter'>newState</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1137"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN280"><span class='Ref_to_Member'>to</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Control'>case</span> <span class='Number'>0</span><span class='Operator'>: 
</span>                    <span class='Comment_Multi_Line'>/* match, advance in both lists */ 
</span>                    <a href="regc_nfa.c.html#LN1116"><span class='Ref_To_Local'>oa</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1116"><span class='Ref_To_Local'>oa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN281"><span class='Ref_to_Member'>outchain</span></a><span class='Delimiter'>; 
</span>                    <a href="regc_nfa.c.html#LN1117"><span class='Ref_To_Local'>na</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1117"><span class='Ref_To_Local'>na</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN281"><span class='Ref_to_Member'>outchain</span></a><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Control'>case</span> <span class='Operator'>+</span><span class='Number'>1</span><span class='Operator'>: 
</span>                    <span class='Comment_Multi_Line'>/* advance only na; oa might have a match later */ 
</span>                    <a href="regc_nfa.c.html#LN1117"><span class='Ref_To_Local'>na</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1117"><span class='Ref_To_Local'>na</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN281"><span class='Ref_to_Member'>outchain</span></a><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Control'>default</span><span class='Operator'>: 
</span>                    <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="../../include/regex/regguts.h.html#LN90"><span class='Ref_to_Const'>NOTREACHED</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end while oa!=NULL&&na!=NULL &raquo; </span> 
        <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1116"><span class='Ref_To_Local'>oa</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* newState does not have anything matching oa */ 
</span><a name="LN1162"></a>            <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>a</span> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1116"><span class='Ref_To_Local'>oa</span></a><span class='Delimiter'>; 
</span> 
            <a href="regc_nfa.c.html#LN1116"><span class='Ref_To_Local'>oa</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1116"><span class='Ref_To_Local'>oa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN281"><span class='Ref_to_Member'>outchain</span></a><span class='Delimiter'>; 
</span>            <a href="regcomp.c.html#LN127"><span class='Ref_to_Proto'>createarc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1095"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1162"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN277"><span class='Ref_to_Member'>type</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1162"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN278"><span class='Ref_to_Member'>co</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1097"><span class='Ref_to_Parameter'>newState</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1162"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN280"><span class='Ref_to_Member'>to</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
<span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end copyouts &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * cloneouts - copy out arcs of a state to another state pair, modifying type 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN1174"></a><span class='Declare_Function'>cloneouts</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="regc_nfa.c.html#LN1174"><span class='Ref_to_Parameter'>nfa</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>nfa</span><span class='Delimiter'>, 
</span><a name="LN1175"></a>          <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>old</span><span class='Delimiter'>, 
</span><a name="LN1176"></a>          <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>from</span><span class='Delimiter'>, 
</span><a name="LN1177"></a>          <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>to</span><span class='Delimiter'>, 
</span><a name="LN1178"></a>          <span class='Keyword'>int </span><span class='Declare_Parameter'>type</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1180"></a>    <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>a</span><span class='Delimiter'>; 
</span> 
    <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1175"><span class='Ref_to_Parameter'>old</span></a> <span class='Operator'>!= </span><a href="regc_nfa.c.html#LN1176"><span class='Ref_to_Parameter'>from</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1180"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1175"><span class='Ref_to_Parameter'>old</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN305"><span class='Ref_to_Member'>outs</span></a><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN1180"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN1180"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1180"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN281"><span class='Ref_to_Member'>outchain</span></a><span class='Parentheses'>) 
</span>        <a href="regcomp.c.html#LN126"><span class='Ref_to_Proto'>newarc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1174"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1178"><span class='Ref_to_Parameter'>type</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1180"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN278"><span class='Ref_to_Member'>co</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1176"><span class='Ref_to_Parameter'>from</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1177"><span class='Ref_to_Parameter'>to</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * delsub - delete a sub-NFA, updating subre pointers if necessary 
 * 
 * This uses a recursive traversal of the sub-NFA, marking already-seen 
 * states using their tmp pointer. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN1195"></a><span class='Declare_Function'>delsub</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="regc_nfa.c.html#LN1195"><span class='Ref_to_Parameter'>nfa</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>nfa</span><span class='Delimiter'>, 
</span><a name="LN1196"></a>       <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>lp</span><span class='Delimiter'>,</span>       <span class='Comment_Single_Line'>/* the sub-NFA goes from here... */ 
</span><a name="LN1197"></a>       <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>rp</span><span class='Parentheses'>)</span>       <span class='Comment_Single_Line'>/* ...to here, *not* inclusive */ 
</span><span class='Delimiter'>{ 
</span>    <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1196"><span class='Ref_to_Parameter'>lp</span></a> <span class='Operator'>!= </span><a href="regc_nfa.c.html#LN1197"><span class='Ref_to_Parameter'>rp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="regc_nfa.c.html#LN1197"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN307"><span class='Ref_to_Member'>tmp</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1197"><span class='Ref_to_Parameter'>rp</span></a><span class='Delimiter'>;</span>               <span class='Comment_Single_Line'>/* mark end */ 
</span> 
    <a href="regcomp.c.html#LN145"><span class='Ref_to_Proto'>deltraverse</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1195"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1196"><span class='Ref_to_Parameter'>lp</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1196"><span class='Ref_to_Parameter'>lp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN38"><span class='Ref_to_Macro'>NISERR</span></a><span class='Parentheses'>())</span> 
        <span class='Control'>return</span><span class='Delimiter'>;</span>                 <span class='Comment_Single_Line'>/* asserts might not hold after failure */ 
</span>    <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1196"><span class='Ref_to_Parameter'>lp</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN304"><span class='Ref_to_Member'>nouts</span></a> <span class='Operator'>== </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="regc_nfa.c.html#LN1197"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN302"><span class='Ref_to_Member'>nins</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* did the job */ 
</span>    <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1196"><span class='Ref_to_Parameter'>lp</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN299"><span class='Ref_to_Member'>no</span></a> <span class='Operator'>!= </span><a href="../../include/regex/regguts.h.html#LN300"><span class='Ref_to_Const'>FREESTATE</span></a> <span class='Operator'>&& </span><a href="regc_nfa.c.html#LN1197"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN299"><span class='Ref_to_Member'>no</span></a> <span class='Operator'>!= </span><a href="../../include/regex/regguts.h.html#LN300"><span class='Ref_to_Const'>FREESTATE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; </span><span class='Comment_Single_Line'>/* no more */ 
</span> 
    <a href="regc_nfa.c.html#LN1197"><span class='Ref_to_Parameter'>rp</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN307"><span class='Ref_to_Member'>tmp</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>;</span>             <span class='Comment_Single_Line'>/* unmark end */ 
</span>    <a href="regc_nfa.c.html#LN1196"><span class='Ref_to_Parameter'>lp</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN307"><span class='Ref_to_Member'>tmp</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>;</span>             <span class='Comment_Single_Line'>/* and begin, marked by deltraverse */ 
</span><span class='Delimiter'>} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * deltraverse - the recursive heart of delsub 
 * This routine's basic job is to destroy all out-arcs of the state. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN1218"></a><span class='Declare_Function'>deltraverse</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="regc_nfa.c.html#LN1218"><span class='Ref_to_Parameter'>nfa</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>nfa</span><span class='Delimiter'>, 
</span><a name="LN1219"></a>            <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>leftend</span><span class='Delimiter'>, 
</span><a name="LN1220"></a>            <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>s</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1222"></a>    <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>a</span><span class='Delimiter'>; 
</span><a name="LN1223"></a>    <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>*</span><span class='Declare_Local'>to</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Since this is recursive, it could be driven to stack overflow */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/regex/regguts.h.html#LN454"><span class='Ref_to_Macro'>STACK_TOO_DEEP</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1218"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN327"><span class='Ref_to_Member'>v</span></a><span class='Operator'>-&GT;</span><a href="regexec.c.html#LN104"><span class='Ref_to_Member'>re</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="regc_nfa.c.html#LN39"><span class='Ref_to_Macro'>NERR</span></a><span class='Parentheses'>(</span><a href="../../include/regex/regex.h.html#LN154"><span class='Ref_to_Const'>REG_ETOOBIG</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1220"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN304"><span class='Ref_to_Member'>nouts</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>;</span>                 <span class='Comment_Single_Line'>/* nothing to do */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1220"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN307"><span class='Ref_to_Member'>tmp</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>;</span>                 <span class='Comment_Single_Line'>/* already in progress */ 
</span> 
    <a href="regc_nfa.c.html#LN1220"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN307"><span class='Ref_to_Member'>tmp</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1220"><span class='Ref_to_Parameter'>s</span></a><span class='Delimiter'>;</span>                 <span class='Comment_Single_Line'>/* mark as in progress */ 
</span> 
    <span class='Control'>while</span> <span class='Parentheses'>((</span><a href="regc_nfa.c.html#LN1222"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1220"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN305"><span class='Ref_to_Member'>outs</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="regc_nfa.c.html#LN1223"><span class='Ref_To_Local'>to</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1222"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN280"><span class='Ref_to_Member'>to</span></a><span class='Delimiter'>; 
</span>        <a href="regcomp.c.html#LN145"><span class='Ref_to_Proto'>deltraverse</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1218"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1219"><span class='Ref_to_Parameter'>leftend</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1223"><span class='Ref_To_Local'>to</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN38"><span class='Ref_to_Macro'>NISERR</span></a><span class='Parentheses'>())</span> 
            <span class='Control'>return</span><span class='Delimiter'>;</span>             <span class='Comment_Single_Line'>/* asserts might not hold after failure */ 
</span>        <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1223"><span class='Ref_To_Local'>to</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN304"><span class='Ref_to_Member'>nouts</span></a> <span class='Operator'>== </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="regc_nfa.c.html#LN1223"><span class='Ref_To_Local'>to</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN307"><span class='Ref_to_Member'>tmp</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="regcomp.c.html#LN129"><span class='Ref_to_Proto'>freearc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1218"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1222"><span class='Ref_To_Local'>a</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1223"><span class='Ref_To_Local'>to</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN302"><span class='Ref_to_Member'>nins</span></a> <span class='Operator'>== </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="regc_nfa.c.html#LN1223"><span class='Ref_To_Local'>to</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN307"><span class='Ref_to_Member'>tmp</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1223"><span class='Ref_To_Local'>to</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN304"><span class='Ref_to_Member'>nouts</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="regcomp.c.html#LN124"><span class='Ref_to_Proto'>freestate</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1218"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1223"><span class='Ref_To_Local'>to</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1220"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN299"><span class='Ref_to_Member'>no</span></a> <span class='Operator'>!= </span><a href="../../include/regex/regguts.h.html#LN300"><span class='Ref_to_Const'>FREESTATE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; </span><span class='Comment_Single_Line'>/* we're still here */ 
</span>    <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1220"><span class='Ref_to_Parameter'>s</span></a> <span class='Operator'>== </span><a href="regc_nfa.c.html#LN1219"><span class='Ref_to_Parameter'>leftend</span></a> <span class='Operator'>|| </span><a href="regc_nfa.c.html#LN1220"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN302"><span class='Ref_to_Member'>nins</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* and still reachable */ 
</span>    <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1220"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN304"><span class='Ref_to_Member'>nouts</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* but have no outarcs */ 
</span> 
    <a href="regc_nfa.c.html#LN1220"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN307"><span class='Ref_to_Member'>tmp</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>;</span>              <span class='Comment_Single_Line'>/* we're done here */ 
</span><span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end deltraverse &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * dupnfa - duplicate sub-NFA 
 * 
 * Another recursive traversal, this time using tmp to point to duplicates 
 * as well as mark already-seen states.  (You knew there was a reason why 
 * it's a state pointer, didn't you? :-)) 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN1269"></a><span class='Declare_Function'>dupnfa</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="regc_nfa.c.html#LN1269"><span class='Ref_to_Parameter'>nfa</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>nfa</span><span class='Delimiter'>, 
</span><a name="LN1270"></a>       <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>start</span><span class='Delimiter'>,</span>    <span class='Comment_Single_Line'>/* duplicate of subNFA starting here */ 
</span><a name="LN1271"></a>       <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>stop</span><span class='Delimiter'>,</span>     <span class='Comment_Single_Line'>/* and stopping here */ 
</span><a name="LN1272"></a>       <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>from</span><span class='Delimiter'>,</span>     <span class='Comment_Single_Line'>/* stringing duplicate from here */ 
</span><a name="LN1273"></a>       <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>to</span><span class='Parentheses'>)</span>       <span class='Comment_Single_Line'>/* to here */ 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1270"><span class='Ref_to_Parameter'>start</span></a> <span class='Operator'>== </span><a href="regc_nfa.c.html#LN1271"><span class='Ref_to_Parameter'>stop</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="regcomp.c.html#LN126"><span class='Ref_to_Proto'>newarc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1269"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="../../interfaces/ecpg/preproc/extern.h.html#LN17"><span class='Ref_to_Const'>EMPTY</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1272"><span class='Ref_to_Parameter'>from</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1273"><span class='Ref_to_Parameter'>to</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="regc_nfa.c.html#LN1271"><span class='Ref_to_Parameter'>stop</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN307"><span class='Ref_to_Member'>tmp</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1273"><span class='Ref_to_Parameter'>to</span></a><span class='Delimiter'>; 
</span>    <a href="regcomp.c.html#LN147"><span class='Ref_to_Proto'>duptraverse</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1269"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1270"><span class='Ref_to_Parameter'>start</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1272"><span class='Ref_to_Parameter'>from</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* done, except for clearing out the tmp pointers */ 
</span> 
    <a href="regc_nfa.c.html#LN1271"><span class='Ref_to_Parameter'>stop</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN307"><span class='Ref_to_Member'>tmp</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="regcomp.c.html#LN148"><span class='Ref_to_Proto'>cleartraverse</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1269"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1270"><span class='Ref_to_Parameter'>start</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dupnfa &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * duptraverse - recursive heart of dupnfa 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN1293"></a><span class='Declare_Function'>duptraverse</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="regc_nfa.c.html#LN1293"><span class='Ref_to_Parameter'>nfa</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>nfa</span><span class='Delimiter'>, 
</span><a name="LN1294"></a>            <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>s</span><span class='Delimiter'>, 
</span><a name="LN1295"></a>            <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>stmp</span><span class='Parentheses'>)</span>    <span class='Comment_Single_Line'>/* s's duplicate, or NULL */ 
</span><span class='Delimiter'>{ 
</span><a name="LN1297"></a>    <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>a</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Since this is recursive, it could be driven to stack overflow */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/regex/regguts.h.html#LN454"><span class='Ref_to_Macro'>STACK_TOO_DEEP</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1293"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN327"><span class='Ref_to_Member'>v</span></a><span class='Operator'>-&GT;</span><a href="regexec.c.html#LN104"><span class='Ref_to_Member'>re</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="regc_nfa.c.html#LN39"><span class='Ref_to_Macro'>NERR</span></a><span class='Parentheses'>(</span><a href="../../include/regex/regex.h.html#LN154"><span class='Ref_to_Const'>REG_ETOOBIG</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1294"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN307"><span class='Ref_to_Member'>tmp</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>;</span>                 <span class='Comment_Single_Line'>/* already done */ 
</span> 
    <a href="regc_nfa.c.html#LN1294"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN307"><span class='Ref_to_Member'>tmp</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1295"><span class='Ref_to_Parameter'>stmp</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) </span><span class='Operator'>? </span><a href="regcomp.c.html#LN121"><span class='Ref_to_Proto'>newstate</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1293"><span class='Ref_to_Parameter'>nfa</span></a><span class='Parentheses'>) </span><span class='Operator'>: </span><a href="regc_nfa.c.html#LN1295"><span class='Ref_to_Parameter'>stmp</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1294"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN307"><span class='Ref_to_Member'>tmp</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN38"><span class='Ref_to_Macro'>NISERR</span></a><span class='Parentheses'>())</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1297"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1294"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN305"><span class='Ref_to_Member'>outs</span></a><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN1297"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL </span><span class='Operator'>&& !</span><a href="regc_nfa.c.html#LN38"><span class='Ref_to_Macro'>NISERR</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN1297"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1297"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN281"><span class='Ref_to_Member'>outchain</span></a><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="regcomp.c.html#LN147"><span class='Ref_to_Proto'>duptraverse</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1293"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1297"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN280"><span class='Ref_to_Member'>to</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN38"><span class='Ref_to_Macro'>NISERR</span></a><span class='Parentheses'>())</span> 
            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1297"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN280"><span class='Ref_to_Member'>to</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN307"><span class='Ref_to_Member'>tmp</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="regcomp.c.html#LN133"><span class='Ref_to_Proto'>cparc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1293"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1297"><span class='Ref_To_Local'>a</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1294"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN307"><span class='Ref_to_Member'>tmp</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1297"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN280"><span class='Ref_to_Member'>to</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN307"><span class='Ref_to_Member'>tmp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
}</span><span class='Auto_Annotations'> &laquo; end duptraverse &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * cleartraverse - recursive cleanup for algorithms that leave tmp ptrs set 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN1330"></a><span class='Declare_Function'>cleartraverse</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="regc_nfa.c.html#LN1330"><span class='Ref_to_Parameter'>nfa</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>nfa</span><span class='Delimiter'>, 
</span><a name="LN1331"></a>              <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>s</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1333"></a>    <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>a</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Since this is recursive, it could be driven to stack overflow */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/regex/regguts.h.html#LN454"><span class='Ref_to_Macro'>STACK_TOO_DEEP</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1330"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN327"><span class='Ref_to_Member'>v</span></a><span class='Operator'>-&GT;</span><a href="regexec.c.html#LN104"><span class='Ref_to_Member'>re</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="regc_nfa.c.html#LN39"><span class='Ref_to_Macro'>NERR</span></a><span class='Parentheses'>(</span><a href="../../include/regex/regex.h.html#LN154"><span class='Ref_to_Const'>REG_ETOOBIG</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1331"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN307"><span class='Ref_to_Member'>tmp</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN1331"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN307"><span class='Ref_to_Member'>tmp</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1333"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1331"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN305"><span class='Ref_to_Member'>outs</span></a><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN1333"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN1333"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1333"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN281"><span class='Ref_to_Member'>outchain</span></a><span class='Parentheses'>) 
</span>        <a href="regcomp.c.html#LN148"><span class='Ref_to_Proto'>cleartraverse</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1330"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1333"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN280"><span class='Ref_to_Member'>to</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end cleartraverse &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * single_color_transition - does getting from s1 to s2 cross one PLAIN arc? 
 * 
 * If traversing from s1 to s2 requires a single PLAIN match (possibly of any 
 * of a set of colors), return a state whose outarc list contains only PLAIN 
 * arcs of those color(s).  Otherwise return NULL. 
 * 
 * This is used before optimizing the NFA, so there may be EMPTY arcs, which 
 * we should ignore; the possibility of an EMPTY is why the result state could 
 * be different from s1. 
 * 
 * It's worth troubling to handle multiple parallel PLAIN arcs here because a 
 * bracket construct such as [abc] might yield either one or several parallel 
 * PLAIN arcs depending on earlier atoms in the expression.  We'd rather that 
 * that implementation detail not create user-visible performance differences. 
 */ 
</span><span class='Keyword'>static </span><span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>* 
</span><a name="LN1367"></a><span class='Declare_Function'>single_color_transition</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>s1</span><span class='Delimiter'>, </span><span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>s2</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1369"></a>    <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>a</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Ignore leading EMPTY arc, if any */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1367"><span class='Ref_to_Parameter'>s1</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN304"><span class='Ref_to_Member'>nouts</span></a> <span class='Operator'>== </span><span class='Number'>1</span> <span class='Operator'>&& </span><a href="regc_nfa.c.html#LN1367"><span class='Ref_to_Parameter'>s1</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN305"><span class='Ref_to_Member'>outs</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN277"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>== </span><a href="../../interfaces/ecpg/preproc/extern.h.html#LN17"><span class='Ref_to_Const'>EMPTY</span></a><span class='Parentheses'>) 
</span>        <a href="regc_nfa.c.html#LN1367"><span class='Ref_to_Parameter'>s1</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1367"><span class='Ref_to_Parameter'>s1</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN305"><span class='Ref_to_Member'>outs</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN280"><span class='Ref_to_Member'>to</span></a><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* Likewise for any trailing EMPTY arc */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1367"><span class='Ref_to_Parameter'>s2</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN302"><span class='Ref_to_Member'>nins</span></a> <span class='Operator'>== </span><span class='Number'>1</span> <span class='Operator'>&& </span><a href="regc_nfa.c.html#LN1367"><span class='Ref_to_Parameter'>s2</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN303"><span class='Ref_to_Member'>ins</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN277"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>== </span><a href="../../interfaces/ecpg/preproc/extern.h.html#LN17"><span class='Ref_to_Const'>EMPTY</span></a><span class='Parentheses'>) 
</span>        <a href="regc_nfa.c.html#LN1367"><span class='Ref_to_Parameter'>s2</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1367"><span class='Ref_to_Parameter'>s2</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN303"><span class='Ref_to_Member'>ins</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN279"><span class='Ref_to_Member'>from</span></a><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* Perhaps we could have a single-state loop in between, if so reject */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1367"><span class='Ref_to_Parameter'>s1</span></a> <span class='Operator'>== </span><a href="regc_nfa.c.html#LN1367"><span class='Ref_to_Parameter'>s2</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* s1 must have at least one outarc... */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1367"><span class='Ref_to_Parameter'>s1</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN305"><span class='Ref_to_Member'>outs</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* ... and they must all be PLAIN arcs to s2 */ 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1369"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1367"><span class='Ref_to_Parameter'>s1</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN305"><span class='Ref_to_Member'>outs</span></a><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN1369"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN1369"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1369"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN281"><span class='Ref_to_Member'>outchain</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1369"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN277"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>!= </span><a href="regcomp.c.html#LN275"><span class='Ref_to_Const'>PLAIN</span></a> <span class='Operator'>|| </span><a href="regc_nfa.c.html#LN1369"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN280"><span class='Ref_to_Member'>to</span></a> <span class='Operator'>!= </span><a href="regc_nfa.c.html#LN1367"><span class='Ref_to_Parameter'>s2</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Comment_Multi_Line'>/* OK, return s1 as the possessor of the relevant outarcs */ 
</span>    <span class='Control'>return</span> <a href="regc_nfa.c.html#LN1367"><span class='Ref_to_Parameter'>s1</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end single_color_transition &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * specialcolors - fill in special colors for an NFA 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN1397"></a><span class='Declare_Function'>specialcolors</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="regc_nfa.c.html#LN1397"><span class='Ref_to_Parameter'>nfa</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>nfa</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Comment_Multi_Line'>/* false colors for BOS, BOL, EOS, EOL */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1397"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN328"><span class='Ref_to_Member'>parent</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="regc_nfa.c.html#LN1397"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN325"><span class='Ref_to_Member'>bos</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="regcomp.c.html#LN98"><span class='Ref_to_Proto'>pseudocolor</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1397"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN324"><span class='Ref_to_Member'>cm</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="regc_nfa.c.html#LN1397"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN325"><span class='Ref_to_Member'>bos</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="regcomp.c.html#LN98"><span class='Ref_to_Proto'>pseudocolor</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1397"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN324"><span class='Ref_to_Member'>cm</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="regc_nfa.c.html#LN1397"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN326"><span class='Ref_to_Member'>eos</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="regcomp.c.html#LN98"><span class='Ref_to_Proto'>pseudocolor</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1397"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN324"><span class='Ref_to_Member'>cm</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="regc_nfa.c.html#LN1397"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN326"><span class='Ref_to_Member'>eos</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="regcomp.c.html#LN98"><span class='Ref_to_Proto'>pseudocolor</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1397"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN324"><span class='Ref_to_Member'>cm</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1397"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN328"><span class='Ref_to_Member'>parent</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN325"><span class='Ref_to_Member'>bos</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>!= </span><a href="../../include/regex/regguts.h.html#LN136"><span class='Ref_to_Const'>COLORLESS</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="regc_nfa.c.html#LN1397"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN325"><span class='Ref_to_Member'>bos</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="regc_nfa.c.html#LN1397"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN328"><span class='Ref_to_Member'>parent</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN325"><span class='Ref_to_Member'>bos</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]; 
</span>        <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1397"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN328"><span class='Ref_to_Member'>parent</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN325"><span class='Ref_to_Member'>bos</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>!= </span><a href="../../include/regex/regguts.h.html#LN136"><span class='Ref_to_Const'>COLORLESS</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="regc_nfa.c.html#LN1397"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN325"><span class='Ref_to_Member'>bos</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="regc_nfa.c.html#LN1397"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN328"><span class='Ref_to_Member'>parent</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN325"><span class='Ref_to_Member'>bos</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]; 
</span>        <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1397"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN328"><span class='Ref_to_Member'>parent</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN326"><span class='Ref_to_Member'>eos</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>!= </span><a href="../../include/regex/regguts.h.html#LN136"><span class='Ref_to_Const'>COLORLESS</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="regc_nfa.c.html#LN1397"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN326"><span class='Ref_to_Member'>eos</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="regc_nfa.c.html#LN1397"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN328"><span class='Ref_to_Member'>parent</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN326"><span class='Ref_to_Member'>eos</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]; 
</span>        <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1397"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN328"><span class='Ref_to_Member'>parent</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN326"><span class='Ref_to_Member'>eos</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>!= </span><a href="../../include/regex/regguts.h.html#LN136"><span class='Ref_to_Const'>COLORLESS</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="regc_nfa.c.html#LN1397"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN326"><span class='Ref_to_Member'>eos</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="regc_nfa.c.html#LN1397"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN328"><span class='Ref_to_Member'>parent</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN326"><span class='Ref_to_Member'>eos</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]; 
</span>    <span class='Delimiter'>} 
}</span><span class='Auto_Annotations'> &laquo; end specialcolors &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * optimize - optimize an NFA 
 * 
 * The main goal of this function is not so much "optimization" (though it 
 * does try to get rid of useless NFA states) as reducing the NFA to a form 
 * the regex executor can handle.  The executor, and indeed the cNFA format 
 * that is its input, can only handle PLAIN and LACON arcs.  The output of 
 * the regex parser also includes EMPTY (do-nothing) arcs, as well as 
 * ^, $, AHEAD, and BEHIND constraint arcs, which we must get rid of here. 
 * We first get rid of EMPTY arcs and then deal with the constraint arcs. 
 * The hardest part of either job is to get rid of circular loops of the 
 * target arc type.  We would have to do that in any case, though, as such a 
 * loop would otherwise allow the executor to cycle through the loop endlessly 
 * without making any progress in the input string. 
 */ 
</span><span class='Keyword'>static long</span>                     <span class='Comment_Single_Line'>/* re_info bits */ 
</span><a name="LN1436"></a><span class='Declare_Function'>optimize</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="regc_nfa.c.html#LN1436"><span class='Ref_to_Parameter'>nfa</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>nfa</span><span class='Delimiter'>, 
</span><a name="LN1437"></a>         FILE <span class='Operator'>*</span><span class='Declare_Parameter'>f</span><span class='Parentheses'>)</span>               <span class='Comment_Single_Line'>/* for debug output; NULL none */ 
</span><span class='Delimiter'>{ 
</span><span class='Directive'>#ifdef</span> REG_DEBUG 
<a name="LN1440"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>verbose</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1437"><span class='Ref_to_Parameter'>f</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='Number'>1</span> <span class='Operator'>: </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1440"><span class='Ref_To_Local'>verbose</span></a><span class='Parentheses'>) 
</span>        <a href="../../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1437"><span class='Ref_to_Parameter'>f</span></a><span class='Delimiter'>, </span><span class='String'>"\ninitial cleanup:\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
    <a href="../../bin/pg_upgrade/pg_upgrade.c.html#LN53"><span class='Ref_to_Proto'>cleanup</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1436"><span class='Ref_to_Parameter'>nfa</span></a><span class='Parentheses'>)</span><span class='Delimiter'>;</span>               <span class='Comment_Single_Line'>/* may simplify situation */ 
</span><span class='Directive'>#ifdef</span> REG_DEBUG 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1440"><span class='Ref_To_Local'>verbose</span></a><span class='Parentheses'>) 
</span>        <a href="regcomp.c.html#LN180"><span class='Ref_to_Proto'>dumpnfa</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1436"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1437"><span class='Ref_to_Parameter'>f</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1440"><span class='Ref_To_Local'>verbose</span></a><span class='Parentheses'>) 
</span>        <a href="../../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1437"><span class='Ref_to_Parameter'>f</span></a><span class='Delimiter'>, </span><span class='String'>"\nempties:\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
    <a href="regcomp.c.html#LN161"><span class='Ref_to_Proto'>fixempties</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1436"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1437"><span class='Ref_to_Parameter'>f</span></a><span class='Parentheses'>)</span><span class='Delimiter'>;</span>         <span class='Comment_Single_Line'>/* get rid of EMPTY arcs */ 
</span><span class='Directive'>#ifdef</span> REG_DEBUG 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1440"><span class='Ref_To_Local'>verbose</span></a><span class='Parentheses'>) 
</span>        <a href="../../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1437"><span class='Ref_to_Parameter'>f</span></a><span class='Delimiter'>, </span><span class='String'>"\nconstraints:\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
    <a href="regcomp.c.html#LN166"><span class='Ref_to_Proto'>fixconstraintloops</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1436"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1437"><span class='Ref_to_Parameter'>f</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; </span><span class='Comment_Single_Line'>/* get rid of constraint loops */ 
</span>    <a href="regcomp.c.html#LN152"><span class='Ref_to_Proto'>pullback</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1436"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1437"><span class='Ref_to_Parameter'>f</span></a><span class='Parentheses'>)</span><span class='Delimiter'>;</span>           <span class='Comment_Single_Line'>/* pull back constraints backward */ 
</span>    <a href="regcomp.c.html#LN154"><span class='Ref_to_Proto'>pushfwd</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1436"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1437"><span class='Ref_to_Parameter'>f</span></a><span class='Parentheses'>)</span><span class='Delimiter'>;</span>            <span class='Comment_Single_Line'>/* push fwd constraints forward */ 
</span><span class='Directive'>#ifdef</span> REG_DEBUG 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1440"><span class='Ref_To_Local'>verbose</span></a><span class='Parentheses'>) 
</span>        <a href="../../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1437"><span class='Ref_to_Parameter'>f</span></a><span class='Delimiter'>, </span><span class='String'>"\nfinal cleanup:\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
    <a href="../../bin/pg_upgrade/pg_upgrade.c.html#LN53"><span class='Ref_to_Proto'>cleanup</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1436"><span class='Ref_to_Parameter'>nfa</span></a><span class='Parentheses'>)</span><span class='Delimiter'>;</span>               <span class='Comment_Single_Line'>/* final tidying */ 
</span><span class='Directive'>#ifdef</span> REG_DEBUG 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1440"><span class='Ref_To_Local'>verbose</span></a><span class='Parentheses'>) 
</span>        <a href="regcomp.c.html#LN180"><span class='Ref_to_Proto'>dumpnfa</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1436"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1437"><span class='Ref_to_Parameter'>f</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
    <span class='Control'>return</span> <a href="regcomp.c.html#LN175"><span class='Ref_to_Proto'>analyze</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1436"><span class='Ref_to_Parameter'>nfa</span></a><span class='Parentheses'>)</span><span class='Delimiter'>;</span>        <span class='Comment_Single_Line'>/* and analysis */ 
</span><span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end optimize &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * pullback - pull back constraints backward to eliminate them 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN1476"></a><span class='Declare_Function'>pullback</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="regc_nfa.c.html#LN1476"><span class='Ref_to_Parameter'>nfa</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>nfa</span><span class='Delimiter'>, 
</span><a name="LN1477"></a>         FILE <span class='Operator'>*</span><span class='Declare_Parameter'>f</span><span class='Parentheses'>)</span>               <span class='Comment_Single_Line'>/* for debug output; NULL none */ 
</span><span class='Delimiter'>{ 
</span><a name="LN1479"></a>    <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>*</span><span class='Declare_Local'>s</span><span class='Delimiter'>; 
</span><a name="LN1480"></a>    <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>*</span><span class='Declare_Local'>nexts</span><span class='Delimiter'>; 
</span><a name="LN1481"></a>    <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>a</span><span class='Delimiter'>; 
</span><a name="LN1482"></a>    <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>nexta</span><span class='Delimiter'>; 
</span><a name="LN1483"></a>    <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>*</span><span class='Declare_Local'>intermediates</span><span class='Delimiter'>; 
</span><a name="LN1484"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>progress</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* find and pull until there are no more */ 
</span>    <span class='Control'>do</span> 
    <span class='Delimiter'>{ 
</span>        <a href="regc_nfa.c.html#LN1484"><span class='Ref_To_Local'>progress</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1479"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1476"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN321"><span class='Ref_to_Member'>states</span></a><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN1479"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL </span><span class='Operator'>&& !</span><a href="regc_nfa.c.html#LN38"><span class='Ref_to_Macro'>NISERR</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN1479"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1480"><span class='Ref_To_Local'>nexts</span></a><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <a href="regc_nfa.c.html#LN1480"><span class='Ref_To_Local'>nexts</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1479"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN308"><span class='Ref_to_Member'>next</span></a><span class='Delimiter'>; 
</span>            <a href="regc_nfa.c.html#LN1483"><span class='Ref_To_Local'>intermediates</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>            <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1481"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1479"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN305"><span class='Ref_to_Member'>outs</span></a><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN1481"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL </span><span class='Operator'>&& !</span><a href="regc_nfa.c.html#LN38"><span class='Ref_to_Macro'>NISERR</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN1481"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1482"><span class='Ref_To_Local'>nexta</span></a><span class='Parentheses'>)</span> 
            <span class='Delimiter'>{ 
</span>                <a href="regc_nfa.c.html#LN1482"><span class='Ref_To_Local'>nexta</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1481"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN281"><span class='Ref_to_Member'>outchain</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1481"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN277"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>== </span><span class='String'>'^'</span> <span class='Operator'>|| </span><a href="regc_nfa.c.html#LN1481"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN277"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>== </span><a href="regcomp.c.html#LN285"><span class='Ref_to_Const'>BEHIND</span></a><span class='Parentheses'>) 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regcomp.c.html#LN153"><span class='Ref_to_Proto'>pull</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1476"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1481"><span class='Ref_To_Local'>a</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="regc_nfa.c.html#LN1483"><span class='Ref_To_Local'>intermediates</span></a><span class='Parentheses'>))</span> 
                        <a href="regc_nfa.c.html#LN1484"><span class='Ref_To_Local'>progress</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Comment_Multi_Line'>/* clear tmp fields of intermediate states created here */ 
</span>            <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1483"><span class='Ref_To_Local'>intermediates</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span><a name="LN1504"></a>                <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>*</span><span class='Declare_Local'>ns</span> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1483"><span class='Ref_To_Local'>intermediates</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN307"><span class='Ref_to_Member'>tmp</span></a><span class='Delimiter'>; 
</span> 
                <a href="regc_nfa.c.html#LN1483"><span class='Ref_To_Local'>intermediates</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN307"><span class='Ref_to_Member'>tmp</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>                <a href="regc_nfa.c.html#LN1483"><span class='Ref_To_Local'>intermediates</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1504"><span class='Ref_To_Local'>ns</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Comment_Multi_Line'>/* if s is now useless, get rid of it */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="regc_nfa.c.html#LN1479"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN302"><span class='Ref_to_Member'>nins</span></a> <span class='Operator'>== </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="regc_nfa.c.html#LN1479"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN304"><span class='Ref_to_Member'>nouts</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) </span><span class='Operator'>&& !</span><a href="regc_nfa.c.html#LN1479"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN301"><span class='Ref_to_Member'>flag</span></a><span class='Parentheses'>)</span> 
                <a href="regcomp.c.html#LN123"><span class='Ref_to_Proto'>dropstate</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1476"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1479"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for s=nfa-&GT;states;s!=NULL... &raquo; </span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1484"><span class='Ref_To_Local'>progress</span></a> <span class='Operator'>&& </span><a href="regc_nfa.c.html#LN1477"><span class='Ref_to_Parameter'>f</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <a href="regcomp.c.html#LN180"><span class='Ref_to_Proto'>dumpnfa</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1476"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1477"><span class='Ref_to_Parameter'>f</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end do &raquo; </span> <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1484"><span class='Ref_To_Local'>progress</span></a> <span class='Operator'>&& !</span><a href="regc_nfa.c.html#LN38"><span class='Ref_to_Macro'>NISERR</span></a><span class='Parentheses'>())</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN38"><span class='Ref_to_Macro'>NISERR</span></a><span class='Parentheses'>())</span> 
        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Any ^ constraints we were able to pull to the start state can now be 
     * replaced by PLAIN arcs referencing the BOS or BOL colors.  There should 
     * be no other ^ or BEHIND arcs left in the NFA, though we do not check 
     * that here (compact() will fail if so). 
     */ 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1481"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1476"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN316"><span class='Ref_to_Member'>pre</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN305"><span class='Ref_to_Member'>outs</span></a><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN1481"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN1481"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1482"><span class='Ref_To_Local'>nexta</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="regc_nfa.c.html#LN1482"><span class='Ref_To_Local'>nexta</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1481"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN281"><span class='Ref_to_Member'>outchain</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1481"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN277"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>== </span><span class='String'>'^'</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1481"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN278"><span class='Ref_to_Member'>co</span></a> <span class='Operator'>== </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="regc_nfa.c.html#LN1481"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN278"><span class='Ref_to_Member'>co</span></a> <span class='Operator'>== </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="regcomp.c.html#LN126"><span class='Ref_to_Proto'>newarc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1476"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regcomp.c.html#LN275"><span class='Ref_to_Const'>PLAIN</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1476"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN325"><span class='Ref_to_Member'>bos</span></a><span class='Delimiter'>[</span><a href="regc_nfa.c.html#LN1481"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN278"><span class='Ref_to_Member'>co</span></a><span class='Delimiter'>], </span><a href="regc_nfa.c.html#LN1481"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN279"><span class='Ref_to_Member'>from</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1481"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN280"><span class='Ref_to_Member'>to</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="regcomp.c.html#LN129"><span class='Ref_to_Proto'>freearc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1476"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1481"><span class='Ref_To_Local'>a</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
}</span><span class='Auto_Annotations'> &laquo; end pullback &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * pull - pull a back constraint backward past its source state 
 * 
 * Returns 1 if successful (which it always is unless the source is the 
 * start state or we have an internal error), 0 if nothing happened. 
 * 
 * A significant property of this function is that it deletes no pre-existing 
 * states, and no outarcs of the constraint's from state other than the given 
 * constraint arc.  This makes the loops in pullback() safe, at the cost that 
 * we may leave useless states behind.  Therefore, we leave it to pullback() 
 * to delete such states. 
 * 
 * If the from state has multiple back-constraint outarcs, and/or multiple 
 * compatible constraint inarcs, we only need to create one new intermediate 
 * state per combination of predecessor and successor states.  *intermediates 
 * points to a list of such intermediate states for this from state (chained 
 * through their tmp fields). 
 */ 
</span><span class='Keyword'>static int 
</span><a name="LN1556"></a><span class='Declare_Function'>pull</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="regc_nfa.c.html#LN1556"><span class='Ref_to_Parameter'>nfa</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>nfa</span><span class='Delimiter'>, 
</span><a name="LN1557"></a>     <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>con</span><span class='Delimiter'>, 
</span><a name="LN1558"></a>     <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>** </span><span class='Declare_Parameter'>intermediates</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1560"></a>    <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>*</span><span class='Declare_Local'>from</span> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1557"><span class='Ref_to_Parameter'>con</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN279"><span class='Ref_to_Member'>from</span></a><span class='Delimiter'>; 
</span><a name="LN1561"></a>    <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>*</span><span class='Declare_Local'>to</span> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1557"><span class='Ref_to_Parameter'>con</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN280"><span class='Ref_to_Member'>to</span></a><span class='Delimiter'>; 
</span><a name="LN1562"></a>    <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>a</span><span class='Delimiter'>; 
</span><a name="LN1563"></a>    <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>nexta</span><span class='Delimiter'>; 
</span><a name="LN1564"></a>    <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>*</span><span class='Declare_Local'>s</span><span class='Delimiter'>; 
</span> 
    <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1560"><span class='Ref_To_Local'>from</span></a> <span class='Operator'>!= </span><a href="regc_nfa.c.html#LN1561"><span class='Ref_To_Local'>to</span></a><span class='Parentheses'>)</span><span class='Delimiter'>;</span>         <span class='Comment_Single_Line'>/* should have gotten rid of this earlier */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1560"><span class='Ref_To_Local'>from</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN301"><span class='Ref_to_Member'>flag</span></a><span class='Parentheses'>)</span>             <span class='Comment_Single_Line'>/* can't pull back beyond start */ 
</span>        <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1560"><span class='Ref_To_Local'>from</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN302"><span class='Ref_to_Member'>nins</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{</span>                           <span class='Comment_Single_Line'>/* unreachable */ 
</span>        <a href="regcomp.c.html#LN129"><span class='Ref_to_Proto'>freearc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1556"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1557"><span class='Ref_to_Parameter'>con</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * First, clone from state if necessary to avoid other outarcs.  This may 
     * seem wasteful, but it simplifies the logic, and we'll get rid of the 
     * clone state again at the bottom. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1560"><span class='Ref_To_Local'>from</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN304"><span class='Ref_to_Member'>nouts</span></a> <span class='Operator'>&GT; </span><span class='Number'>1</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="regc_nfa.c.html#LN1564"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="regcomp.c.html#LN121"><span class='Ref_to_Proto'>newstate</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1556"><span class='Ref_to_Parameter'>nfa</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN38"><span class='Ref_to_Macro'>NISERR</span></a><span class='Parentheses'>())</span> 
            <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
</span>        <a href="regcomp.c.html#LN139"><span class='Ref_to_Proto'>copyins</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1556"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1560"><span class='Ref_To_Local'>from</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1564"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>;</span>  <span class='Comment_Single_Line'>/* duplicate inarcs */ 
</span>        <a href="regcomp.c.html#LN133"><span class='Ref_to_Proto'>cparc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1556"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1557"><span class='Ref_to_Parameter'>con</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1564"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1561"><span class='Ref_To_Local'>to</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; </span><span class='Comment_Single_Line'>/* move constraint arc */ 
</span>        <a href="regcomp.c.html#LN129"><span class='Ref_to_Proto'>freearc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1556"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1557"><span class='Ref_to_Parameter'>con</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN38"><span class='Ref_to_Macro'>NISERR</span></a><span class='Parentheses'>())</span> 
            <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
</span>        <a href="regc_nfa.c.html#LN1560"><span class='Ref_To_Local'>from</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1564"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>; 
</span>        <a href="regc_nfa.c.html#LN1557"><span class='Ref_to_Parameter'>con</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1560"><span class='Ref_To_Local'>from</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN305"><span class='Ref_to_Member'>outs</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1560"><span class='Ref_To_Local'>from</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN304"><span class='Ref_to_Member'>nouts</span></a> <span class='Operator'>== </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* propagate the constraint into the from state's inarcs */ 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1562"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1560"><span class='Ref_To_Local'>from</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN303"><span class='Ref_to_Member'>ins</span></a><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN1562"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL </span><span class='Operator'>&& !</span><a href="regc_nfa.c.html#LN38"><span class='Ref_to_Macro'>NISERR</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN1562"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1563"><span class='Ref_To_Local'>nexta</span></a><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="regc_nfa.c.html#LN1563"><span class='Ref_To_Local'>nexta</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1562"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN284"><span class='Ref_to_Member'>inchain</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="regcomp.c.html#LN160"><span class='Ref_to_Proto'>combine</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1557"><span class='Ref_to_Parameter'>con</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1562"><span class='Ref_To_Local'>a</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Control'>case</span> <a href="regcomp.c.html#LN157"><span class='Ref_to_Const'>INCOMPATIBLE</span></a><span class='Operator'>:</span>  <span class='Comment_Single_Line'>/* destroy the arc */ 
</span>                <a href="regcomp.c.html#LN129"><span class='Ref_to_Proto'>freearc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1556"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1562"><span class='Ref_To_Local'>a</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="regcomp.c.html#LN158"><span class='Ref_to_Const'>SATISFIED</span></a><span class='Operator'>:</span>     <span class='Comment_Single_Line'>/* no action needed */ 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="regcomp.c.html#LN159"><span class='Ref_to_Const'>COMPATIBLE</span></a><span class='Operator'>:</span>    <span class='Comment_Single_Line'>/* swap the two arcs, more or less */ 
</span>                <span class='Comment_Multi_Line'>/* need an intermediate state, but might have one already */ 
</span>                <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1564"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= *</span><a href="regc_nfa.c.html#LN1558"><span class='Ref_to_Parameter'>intermediates</span></a><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN1564"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN1564"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1564"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN307"><span class='Ref_to_Member'>tmp</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1564"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN302"><span class='Ref_to_Member'>nins</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="regc_nfa.c.html#LN1564"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN304"><span class='Ref_to_Member'>nouts</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1564"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN303"><span class='Ref_to_Member'>ins</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN279"><span class='Ref_to_Member'>from</span></a> <span class='Operator'>== </span><a href="regc_nfa.c.html#LN1562"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN279"><span class='Ref_to_Member'>from</span></a> <span class='Operator'>&& </span><a href="regc_nfa.c.html#LN1564"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN305"><span class='Ref_to_Member'>outs</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN280"><span class='Ref_to_Member'>to</span></a> <span class='Operator'>== </span><a href="regc_nfa.c.html#LN1561"><span class='Ref_To_Local'>to</span></a><span class='Parentheses'>) 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1564"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <a href="regc_nfa.c.html#LN1564"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="regcomp.c.html#LN121"><span class='Ref_to_Proto'>newstate</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1556"><span class='Ref_to_Parameter'>nfa</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN38"><span class='Ref_to_Macro'>NISERR</span></a><span class='Parentheses'>())</span> 
                        <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
</span>                    <a href="regc_nfa.c.html#LN1564"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN307"><span class='Ref_to_Member'>tmp</span></a> <span class='Operator'>= *</span><a href="regc_nfa.c.html#LN1558"><span class='Ref_to_Parameter'>intermediates</span></a><span class='Delimiter'>; 
</span>                    <span class='Operator'>*</span><a href="regc_nfa.c.html#LN1558"><span class='Ref_to_Parameter'>intermediates</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1564"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <a href="regcomp.c.html#LN133"><span class='Ref_to_Proto'>cparc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1556"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1557"><span class='Ref_to_Parameter'>con</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1562"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN279"><span class='Ref_to_Member'>from</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1564"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="regcomp.c.html#LN133"><span class='Ref_to_Proto'>cparc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1556"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1562"><span class='Ref_To_Local'>a</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1564"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1561"><span class='Ref_To_Local'>to</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="regcomp.c.html#LN129"><span class='Ref_to_Proto'>freearc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1556"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1562"><span class='Ref_To_Local'>a</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>default</span><span class='Operator'>: 
</span>                <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="../../include/regex/regguts.h.html#LN90"><span class='Ref_to_Const'>NOTREACHED</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch combine(con,a) &raquo; </span> 
    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for a=from-&GT;ins;a!=NULL&&... &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* remaining inarcs, if any, incorporate the constraint */ 
</span>    <a href="regcomp.c.html#LN138"><span class='Ref_to_Proto'>moveins</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1556"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1560"><span class='Ref_To_Local'>from</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1561"><span class='Ref_To_Local'>to</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="regcomp.c.html#LN129"><span class='Ref_to_Proto'>freearc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1556"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1557"><span class='Ref_to_Parameter'>con</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* from state is now useless, but we leave it to pullback() to clean up */ 
</span>    <span class='Control'>return</span> <span class='Number'>1</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end pull &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * pushfwd - push forward constraints forward to eliminate them 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN1643"></a><span class='Declare_Function'>pushfwd</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="regc_nfa.c.html#LN1643"><span class='Ref_to_Parameter'>nfa</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>nfa</span><span class='Delimiter'>, 
</span><a name="LN1644"></a>        FILE <span class='Operator'>*</span><span class='Declare_Parameter'>f</span><span class='Parentheses'>)</span>                <span class='Comment_Single_Line'>/* for debug output; NULL none */ 
</span><span class='Delimiter'>{ 
</span><a name="LN1646"></a>    <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>*</span><span class='Declare_Local'>s</span><span class='Delimiter'>; 
</span><a name="LN1647"></a>    <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>*</span><span class='Declare_Local'>nexts</span><span class='Delimiter'>; 
</span><a name="LN1648"></a>    <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>a</span><span class='Delimiter'>; 
</span><a name="LN1649"></a>    <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>nexta</span><span class='Delimiter'>; 
</span><a name="LN1650"></a>    <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>*</span><span class='Declare_Local'>intermediates</span><span class='Delimiter'>; 
</span><a name="LN1651"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>progress</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* find and push until there are no more */ 
</span>    <span class='Control'>do</span> 
    <span class='Delimiter'>{ 
</span>        <a href="regc_nfa.c.html#LN1651"><span class='Ref_To_Local'>progress</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1646"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1643"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN321"><span class='Ref_to_Member'>states</span></a><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN1646"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL </span><span class='Operator'>&& !</span><a href="regc_nfa.c.html#LN38"><span class='Ref_to_Macro'>NISERR</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN1646"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1647"><span class='Ref_To_Local'>nexts</span></a><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <a href="regc_nfa.c.html#LN1647"><span class='Ref_To_Local'>nexts</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1646"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN308"><span class='Ref_to_Member'>next</span></a><span class='Delimiter'>; 
</span>            <a href="regc_nfa.c.html#LN1650"><span class='Ref_To_Local'>intermediates</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>            <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1648"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1646"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN303"><span class='Ref_to_Member'>ins</span></a><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN1648"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL </span><span class='Operator'>&& !</span><a href="regc_nfa.c.html#LN38"><span class='Ref_to_Macro'>NISERR</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN1648"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1649"><span class='Ref_To_Local'>nexta</span></a><span class='Parentheses'>)</span> 
            <span class='Delimiter'>{ 
</span>                <a href="regc_nfa.c.html#LN1649"><span class='Ref_To_Local'>nexta</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1648"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN284"><span class='Ref_to_Member'>inchain</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1648"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN277"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>== </span><span class='String'>'$'</span> <span class='Operator'>|| </span><a href="regc_nfa.c.html#LN1648"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN277"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>== </span><a href="regcomp.c.html#LN284"><span class='Ref_to_Const'>AHEAD</span></a><span class='Parentheses'>) 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regcomp.c.html#LN155"><span class='Ref_to_Proto'>push</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1643"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1648"><span class='Ref_To_Local'>a</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="regc_nfa.c.html#LN1650"><span class='Ref_To_Local'>intermediates</span></a><span class='Parentheses'>))</span> 
                        <a href="regc_nfa.c.html#LN1651"><span class='Ref_To_Local'>progress</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Comment_Multi_Line'>/* clear tmp fields of intermediate states created here */ 
</span>            <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1650"><span class='Ref_To_Local'>intermediates</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span><a name="LN1671"></a>                <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>*</span><span class='Declare_Local'>ns</span> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1650"><span class='Ref_To_Local'>intermediates</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN307"><span class='Ref_to_Member'>tmp</span></a><span class='Delimiter'>; 
</span> 
                <a href="regc_nfa.c.html#LN1650"><span class='Ref_To_Local'>intermediates</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN307"><span class='Ref_to_Member'>tmp</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>                <a href="regc_nfa.c.html#LN1650"><span class='Ref_To_Local'>intermediates</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1671"><span class='Ref_To_Local'>ns</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Comment_Multi_Line'>/* if s is now useless, get rid of it */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="regc_nfa.c.html#LN1646"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN302"><span class='Ref_to_Member'>nins</span></a> <span class='Operator'>== </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="regc_nfa.c.html#LN1646"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN304"><span class='Ref_to_Member'>nouts</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) </span><span class='Operator'>&& !</span><a href="regc_nfa.c.html#LN1646"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN301"><span class='Ref_to_Member'>flag</span></a><span class='Parentheses'>)</span> 
                <a href="regcomp.c.html#LN123"><span class='Ref_to_Proto'>dropstate</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1643"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1646"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for s=nfa-&GT;states;s!=NULL... &raquo; </span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1651"><span class='Ref_To_Local'>progress</span></a> <span class='Operator'>&& </span><a href="regc_nfa.c.html#LN1644"><span class='Ref_to_Parameter'>f</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <a href="regcomp.c.html#LN180"><span class='Ref_to_Proto'>dumpnfa</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1643"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1644"><span class='Ref_to_Parameter'>f</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end do &raquo; </span> <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1651"><span class='Ref_To_Local'>progress</span></a> <span class='Operator'>&& !</span><a href="regc_nfa.c.html#LN38"><span class='Ref_to_Macro'>NISERR</span></a><span class='Parentheses'>())</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN38"><span class='Ref_to_Macro'>NISERR</span></a><span class='Parentheses'>())</span> 
        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Any $ constraints we were able to push to the post state can now be 
     * replaced by PLAIN arcs referencing the EOS or EOL colors.  There should 
     * be no other $ or AHEAD arcs left in the NFA, though we do not check 
     * that here (compact() will fail if so). 
     */ 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1648"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1643"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN319"><span class='Ref_to_Member'>post</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN303"><span class='Ref_to_Member'>ins</span></a><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN1648"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN1648"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1649"><span class='Ref_To_Local'>nexta</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="regc_nfa.c.html#LN1649"><span class='Ref_To_Local'>nexta</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1648"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN284"><span class='Ref_to_Member'>inchain</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1648"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN277"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>== </span><span class='String'>'$'</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1648"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN278"><span class='Ref_to_Member'>co</span></a> <span class='Operator'>== </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="regc_nfa.c.html#LN1648"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN278"><span class='Ref_to_Member'>co</span></a> <span class='Operator'>== </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="regcomp.c.html#LN126"><span class='Ref_to_Proto'>newarc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1643"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regcomp.c.html#LN275"><span class='Ref_to_Const'>PLAIN</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1643"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN326"><span class='Ref_to_Member'>eos</span></a><span class='Delimiter'>[</span><a href="regc_nfa.c.html#LN1648"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN278"><span class='Ref_to_Member'>co</span></a><span class='Delimiter'>], </span><a href="regc_nfa.c.html#LN1648"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN279"><span class='Ref_to_Member'>from</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1648"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN280"><span class='Ref_to_Member'>to</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="regcomp.c.html#LN129"><span class='Ref_to_Proto'>freearc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1643"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1648"><span class='Ref_To_Local'>a</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
}</span><span class='Auto_Annotations'> &laquo; end pushfwd &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * push - push a forward constraint forward past its destination state 
 * 
 * Returns 1 if successful (which it always is unless the destination is the 
 * post state or we have an internal error), 0 if nothing happened. 
 * 
 * A significant property of this function is that it deletes no pre-existing 
 * states, and no inarcs of the constraint's to state other than the given 
 * constraint arc.  This makes the loops in pushfwd() safe, at the cost that 
 * we may leave useless states behind.  Therefore, we leave it to pushfwd() 
 * to delete such states. 
 * 
 * If the to state has multiple forward-constraint inarcs, and/or multiple 
 * compatible constraint outarcs, we only need to create one new intermediate 
 * state per combination of predecessor and successor states.  *intermediates 
 * points to a list of such intermediate states for this to state (chained 
 * through their tmp fields). 
 */ 
</span><span class='Keyword'>static int 
</span><a name="LN1723"></a><span class='Declare_Function'>push</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="regc_nfa.c.html#LN1723"><span class='Ref_to_Parameter'>nfa</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>nfa</span><span class='Delimiter'>, 
</span><a name="LN1724"></a>     <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>con</span><span class='Delimiter'>, 
</span><a name="LN1725"></a>     <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>** </span><span class='Declare_Parameter'>intermediates</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1727"></a>    <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>*</span><span class='Declare_Local'>from</span> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1724"><span class='Ref_to_Parameter'>con</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN279"><span class='Ref_to_Member'>from</span></a><span class='Delimiter'>; 
</span><a name="LN1728"></a>    <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>*</span><span class='Declare_Local'>to</span> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1724"><span class='Ref_to_Parameter'>con</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN280"><span class='Ref_to_Member'>to</span></a><span class='Delimiter'>; 
</span><a name="LN1729"></a>    <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>a</span><span class='Delimiter'>; 
</span><a name="LN1730"></a>    <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>nexta</span><span class='Delimiter'>; 
</span><a name="LN1731"></a>    <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>*</span><span class='Declare_Local'>s</span><span class='Delimiter'>; 
</span> 
    <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1728"><span class='Ref_To_Local'>to</span></a> <span class='Operator'>!= </span><a href="regc_nfa.c.html#LN1727"><span class='Ref_To_Local'>from</span></a><span class='Parentheses'>)</span><span class='Delimiter'>;</span>         <span class='Comment_Single_Line'>/* should have gotten rid of this earlier */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1728"><span class='Ref_To_Local'>to</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN301"><span class='Ref_to_Member'>flag</span></a><span class='Parentheses'>)</span>               <span class='Comment_Single_Line'>/* can't push forward beyond end */ 
</span>        <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1728"><span class='Ref_To_Local'>to</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN304"><span class='Ref_to_Member'>nouts</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{</span>                           <span class='Comment_Single_Line'>/* dead end */ 
</span>        <a href="regcomp.c.html#LN129"><span class='Ref_to_Proto'>freearc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1723"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1724"><span class='Ref_to_Parameter'>con</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * First, clone to state if necessary to avoid other inarcs.  This may 
     * seem wasteful, but it simplifies the logic, and we'll get rid of the 
     * clone state again at the bottom. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1728"><span class='Ref_To_Local'>to</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN302"><span class='Ref_to_Member'>nins</span></a> <span class='Operator'>&GT; </span><span class='Number'>1</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="regc_nfa.c.html#LN1731"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="regcomp.c.html#LN121"><span class='Ref_to_Proto'>newstate</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1723"><span class='Ref_to_Parameter'>nfa</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN38"><span class='Ref_to_Macro'>NISERR</span></a><span class='Parentheses'>())</span> 
            <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
</span>        <a href="regcomp.c.html#LN142"><span class='Ref_to_Proto'>copyouts</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1723"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1728"><span class='Ref_To_Local'>to</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1731"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>;</span>   <span class='Comment_Single_Line'>/* duplicate outarcs */ 
</span>        <a href="regcomp.c.html#LN133"><span class='Ref_to_Proto'>cparc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1723"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1724"><span class='Ref_to_Parameter'>con</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1727"><span class='Ref_To_Local'>from</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1731"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* move constraint arc */ 
</span>        <a href="regcomp.c.html#LN129"><span class='Ref_to_Proto'>freearc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1723"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1724"><span class='Ref_to_Parameter'>con</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN38"><span class='Ref_to_Macro'>NISERR</span></a><span class='Parentheses'>())</span> 
            <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
</span>        <a href="regc_nfa.c.html#LN1728"><span class='Ref_To_Local'>to</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1731"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>; 
</span>        <a href="regc_nfa.c.html#LN1724"><span class='Ref_to_Parameter'>con</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1728"><span class='Ref_To_Local'>to</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN303"><span class='Ref_to_Member'>ins</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1728"><span class='Ref_To_Local'>to</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN302"><span class='Ref_to_Member'>nins</span></a> <span class='Operator'>== </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* propagate the constraint into the to state's outarcs */ 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1729"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1728"><span class='Ref_To_Local'>to</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN305"><span class='Ref_to_Member'>outs</span></a><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN1729"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL </span><span class='Operator'>&& !</span><a href="regc_nfa.c.html#LN38"><span class='Ref_to_Macro'>NISERR</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN1729"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1730"><span class='Ref_To_Local'>nexta</span></a><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="regc_nfa.c.html#LN1730"><span class='Ref_To_Local'>nexta</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1729"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN281"><span class='Ref_to_Member'>outchain</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="regcomp.c.html#LN160"><span class='Ref_to_Proto'>combine</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1724"><span class='Ref_to_Parameter'>con</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1729"><span class='Ref_To_Local'>a</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Control'>case</span> <a href="regcomp.c.html#LN157"><span class='Ref_to_Const'>INCOMPATIBLE</span></a><span class='Operator'>:</span>  <span class='Comment_Single_Line'>/* destroy the arc */ 
</span>                <a href="regcomp.c.html#LN129"><span class='Ref_to_Proto'>freearc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1723"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1729"><span class='Ref_To_Local'>a</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="regcomp.c.html#LN158"><span class='Ref_to_Const'>SATISFIED</span></a><span class='Operator'>:</span>     <span class='Comment_Single_Line'>/* no action needed */ 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="regcomp.c.html#LN159"><span class='Ref_to_Const'>COMPATIBLE</span></a><span class='Operator'>:</span>    <span class='Comment_Single_Line'>/* swap the two arcs, more or less */ 
</span>                <span class='Comment_Multi_Line'>/* need an intermediate state, but might have one already */ 
</span>                <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1731"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= *</span><a href="regc_nfa.c.html#LN1725"><span class='Ref_to_Parameter'>intermediates</span></a><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN1731"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN1731"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1731"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN307"><span class='Ref_to_Member'>tmp</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1731"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN302"><span class='Ref_to_Member'>nins</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="regc_nfa.c.html#LN1731"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN304"><span class='Ref_to_Member'>nouts</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1731"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN303"><span class='Ref_to_Member'>ins</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN279"><span class='Ref_to_Member'>from</span></a> <span class='Operator'>== </span><a href="regc_nfa.c.html#LN1727"><span class='Ref_To_Local'>from</span></a> <span class='Operator'>&& </span><a href="regc_nfa.c.html#LN1731"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN305"><span class='Ref_to_Member'>outs</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN280"><span class='Ref_to_Member'>to</span></a> <span class='Operator'>== </span><a href="regc_nfa.c.html#LN1729"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN280"><span class='Ref_to_Member'>to</span></a><span class='Parentheses'>) 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1731"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <a href="regc_nfa.c.html#LN1731"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="regcomp.c.html#LN121"><span class='Ref_to_Proto'>newstate</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1723"><span class='Ref_to_Parameter'>nfa</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN38"><span class='Ref_to_Macro'>NISERR</span></a><span class='Parentheses'>())</span> 
                        <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
</span>                    <a href="regc_nfa.c.html#LN1731"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN307"><span class='Ref_to_Member'>tmp</span></a> <span class='Operator'>= *</span><a href="regc_nfa.c.html#LN1725"><span class='Ref_to_Parameter'>intermediates</span></a><span class='Delimiter'>; 
</span>                    <span class='Operator'>*</span><a href="regc_nfa.c.html#LN1725"><span class='Ref_to_Parameter'>intermediates</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1731"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <a href="regcomp.c.html#LN133"><span class='Ref_to_Proto'>cparc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1723"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1724"><span class='Ref_to_Parameter'>con</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1731"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1729"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN280"><span class='Ref_to_Member'>to</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="regcomp.c.html#LN133"><span class='Ref_to_Proto'>cparc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1723"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1729"><span class='Ref_To_Local'>a</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1727"><span class='Ref_To_Local'>from</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1731"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="regcomp.c.html#LN129"><span class='Ref_to_Proto'>freearc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1723"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1729"><span class='Ref_To_Local'>a</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>default</span><span class='Operator'>: 
</span>                <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="../../include/regex/regguts.h.html#LN90"><span class='Ref_to_Const'>NOTREACHED</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch combine(con,a) &raquo; </span> 
    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for a=to-&GT;outs;a!=NULL&&!... &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* remaining outarcs, if any, incorporate the constraint */ 
</span>    <a href="regcomp.c.html#LN141"><span class='Ref_to_Proto'>moveouts</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1723"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1728"><span class='Ref_To_Local'>to</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1727"><span class='Ref_To_Local'>from</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="regcomp.c.html#LN129"><span class='Ref_to_Proto'>freearc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1723"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1724"><span class='Ref_to_Parameter'>con</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* to state is now useless, but we leave it to pushfwd() to clean up */ 
</span>    <span class='Control'>return</span> <span class='Number'>1</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end push &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * combine - constraint lands on an arc, what happens? 
 * 
 * #def INCOMPATIBLE    1   // destroys arc 
 * #def SATISFIED       2   // constraint satisfied 
 * #def COMPATIBLE      3   // compatible but not satisfied yet 
 */ 
</span><span class='Keyword'>static int 
</span><a name="LN1814"></a><span class='Declare_Function'>combine</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>con</span><span class='Delimiter'>, 
</span><a name="LN1815"></a>        <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>a</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1817"></a><span class='Keyword'>#define</span>  <span class='Declare_Macro'>CA</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>ct</span><span class='Delimiter'>,</span><span class='Declare_Parameter'>at</span><span class='Parentheses'>)</span>   <span class='Parentheses'>(((</span>ct<span class='Parentheses'>)</span><span class='Operator'>&LT;&LT;</span>CHAR_BIT<span class='Parentheses'>)</span> <span class='Operator'>| </span><span class='Parentheses'>(</span>at<span class='Parentheses'>))</span> 
 
    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1817"><span class='Ref_to_Macro'>CA</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1814"><span class='Ref_to_Parameter'>con</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN277"><span class='Ref_to_Member'>type</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1815"><span class='Ref_to_Parameter'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN277"><span class='Ref_to_Member'>type</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>case</span> <a href="regc_nfa.c.html#LN1817"><span class='Ref_to_Macro'>CA</span></a><span class='Parentheses'>(</span><span class='String'>'^'</span><span class='Delimiter'>, </span><a href="regcomp.c.html#LN275"><span class='Ref_to_Const'>PLAIN</span></a><span class='Parentheses'>)</span><span class='Operator'>:</span>    <span class='Comment_Single_Line'>/* newlines are handled separately */ 
</span>        <span class='Control'>case</span> <a href="regc_nfa.c.html#LN1817"><span class='Ref_to_Macro'>CA</span></a><span class='Parentheses'>(</span><span class='String'>'$'</span><span class='Delimiter'>, </span><a href="regcomp.c.html#LN275"><span class='Ref_to_Const'>PLAIN</span></a><span class='Parentheses'>)</span><span class='Operator'>: 
</span>            <span class='Control'>return</span> <a href="regcomp.c.html#LN157"><span class='Ref_to_Const'>INCOMPATIBLE</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="regc_nfa.c.html#LN1817"><span class='Ref_to_Macro'>CA</span></a><span class='Parentheses'>(</span><a href="regcomp.c.html#LN284"><span class='Ref_to_Const'>AHEAD</span></a><span class='Delimiter'>, </span><a href="regcomp.c.html#LN275"><span class='Ref_to_Const'>PLAIN</span></a><span class='Parentheses'>)</span><span class='Operator'>:</span>  <span class='Comment_Single_Line'>/* color constraints meet colors */ 
</span>        <span class='Control'>case</span> <a href="regc_nfa.c.html#LN1817"><span class='Ref_to_Macro'>CA</span></a><span class='Parentheses'>(</span><a href="regcomp.c.html#LN285"><span class='Ref_to_Const'>BEHIND</span></a><span class='Delimiter'>, </span><a href="regcomp.c.html#LN275"><span class='Ref_to_Const'>PLAIN</span></a><span class='Parentheses'>)</span><span class='Operator'>: 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1814"><span class='Ref_to_Parameter'>con</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN278"><span class='Ref_to_Member'>co</span></a> <span class='Operator'>== </span><a href="regc_nfa.c.html#LN1815"><span class='Ref_to_Parameter'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN278"><span class='Ref_to_Member'>co</span></a><span class='Parentheses'>) 
</span>                <span class='Control'>return</span> <a href="regcomp.c.html#LN158"><span class='Ref_to_Const'>SATISFIED</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>return</span> <a href="regcomp.c.html#LN157"><span class='Ref_to_Const'>INCOMPATIBLE</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="regc_nfa.c.html#LN1817"><span class='Ref_to_Macro'>CA</span></a><span class='Parentheses'>(</span><span class='String'>'^'</span><span class='Delimiter'>, </span><span class='String'>'^'</span><span class='Parentheses'>)</span><span class='Operator'>:</span>      <span class='Comment_Single_Line'>/* collision, similar constraints */ 
</span>        <span class='Control'>case</span> <a href="regc_nfa.c.html#LN1817"><span class='Ref_to_Macro'>CA</span></a><span class='Parentheses'>(</span><span class='String'>'$'</span><span class='Delimiter'>, </span><span class='String'>'$'</span><span class='Parentheses'>)</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="regc_nfa.c.html#LN1817"><span class='Ref_to_Macro'>CA</span></a><span class='Parentheses'>(</span><a href="regcomp.c.html#LN284"><span class='Ref_to_Const'>AHEAD</span></a><span class='Delimiter'>, </span><a href="regcomp.c.html#LN284"><span class='Ref_to_Const'>AHEAD</span></a><span class='Parentheses'>)</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="regc_nfa.c.html#LN1817"><span class='Ref_to_Macro'>CA</span></a><span class='Parentheses'>(</span><a href="regcomp.c.html#LN285"><span class='Ref_to_Const'>BEHIND</span></a><span class='Delimiter'>, </span><a href="regcomp.c.html#LN285"><span class='Ref_to_Const'>BEHIND</span></a><span class='Parentheses'>)</span><span class='Operator'>: 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1814"><span class='Ref_to_Parameter'>con</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN278"><span class='Ref_to_Member'>co</span></a> <span class='Operator'>== </span><a href="regc_nfa.c.html#LN1815"><span class='Ref_to_Parameter'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN278"><span class='Ref_to_Member'>co</span></a><span class='Parentheses'>)</span>       <span class='Comment_Single_Line'>/* true duplication */ 
</span>                <span class='Control'>return</span> <a href="regcomp.c.html#LN158"><span class='Ref_to_Const'>SATISFIED</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>return</span> <a href="regcomp.c.html#LN157"><span class='Ref_to_Const'>INCOMPATIBLE</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="regc_nfa.c.html#LN1817"><span class='Ref_to_Macro'>CA</span></a><span class='Parentheses'>(</span><span class='String'>'^'</span><span class='Delimiter'>, </span><a href="regcomp.c.html#LN285"><span class='Ref_to_Const'>BEHIND</span></a><span class='Parentheses'>)</span><span class='Operator'>:</span>   <span class='Comment_Single_Line'>/* collision, dissimilar constraints */ 
</span>        <span class='Control'>case</span> <a href="regc_nfa.c.html#LN1817"><span class='Ref_to_Macro'>CA</span></a><span class='Parentheses'>(</span><a href="regcomp.c.html#LN285"><span class='Ref_to_Const'>BEHIND</span></a><span class='Delimiter'>, </span><span class='String'>'^'</span><span class='Parentheses'>)</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="regc_nfa.c.html#LN1817"><span class='Ref_to_Macro'>CA</span></a><span class='Parentheses'>(</span><span class='String'>'$'</span><span class='Delimiter'>, </span><a href="regcomp.c.html#LN284"><span class='Ref_to_Const'>AHEAD</span></a><span class='Parentheses'>)</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="regc_nfa.c.html#LN1817"><span class='Ref_to_Macro'>CA</span></a><span class='Parentheses'>(</span><a href="regcomp.c.html#LN284"><span class='Ref_to_Const'>AHEAD</span></a><span class='Delimiter'>, </span><span class='String'>'$'</span><span class='Parentheses'>)</span><span class='Operator'>: 
</span>            <span class='Control'>return</span> <a href="regcomp.c.html#LN157"><span class='Ref_to_Const'>INCOMPATIBLE</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="regc_nfa.c.html#LN1817"><span class='Ref_to_Macro'>CA</span></a><span class='Parentheses'>(</span><span class='String'>'^'</span><span class='Delimiter'>, </span><span class='String'>'$'</span><span class='Parentheses'>)</span><span class='Operator'>:</span>      <span class='Comment_Single_Line'>/* constraints passing each other */ 
</span>        <span class='Control'>case</span> <a href="regc_nfa.c.html#LN1817"><span class='Ref_to_Macro'>CA</span></a><span class='Parentheses'>(</span><span class='String'>'^'</span><span class='Delimiter'>, </span><a href="regcomp.c.html#LN284"><span class='Ref_to_Const'>AHEAD</span></a><span class='Parentheses'>)</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="regc_nfa.c.html#LN1817"><span class='Ref_to_Macro'>CA</span></a><span class='Parentheses'>(</span><a href="regcomp.c.html#LN285"><span class='Ref_to_Const'>BEHIND</span></a><span class='Delimiter'>, </span><span class='String'>'$'</span><span class='Parentheses'>)</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="regc_nfa.c.html#LN1817"><span class='Ref_to_Macro'>CA</span></a><span class='Parentheses'>(</span><a href="regcomp.c.html#LN285"><span class='Ref_to_Const'>BEHIND</span></a><span class='Delimiter'>, </span><a href="regcomp.c.html#LN284"><span class='Ref_to_Const'>AHEAD</span></a><span class='Parentheses'>)</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="regc_nfa.c.html#LN1817"><span class='Ref_to_Macro'>CA</span></a><span class='Parentheses'>(</span><span class='String'>'$'</span><span class='Delimiter'>, </span><span class='String'>'^'</span><span class='Parentheses'>)</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="regc_nfa.c.html#LN1817"><span class='Ref_to_Macro'>CA</span></a><span class='Parentheses'>(</span><span class='String'>'$'</span><span class='Delimiter'>, </span><a href="regcomp.c.html#LN285"><span class='Ref_to_Const'>BEHIND</span></a><span class='Parentheses'>)</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="regc_nfa.c.html#LN1817"><span class='Ref_to_Macro'>CA</span></a><span class='Parentheses'>(</span><a href="regcomp.c.html#LN284"><span class='Ref_to_Const'>AHEAD</span></a><span class='Delimiter'>, </span><span class='String'>'^'</span><span class='Parentheses'>)</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="regc_nfa.c.html#LN1817"><span class='Ref_to_Macro'>CA</span></a><span class='Parentheses'>(</span><a href="regcomp.c.html#LN284"><span class='Ref_to_Const'>AHEAD</span></a><span class='Delimiter'>, </span><a href="regcomp.c.html#LN285"><span class='Ref_to_Const'>BEHIND</span></a><span class='Parentheses'>)</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="regc_nfa.c.html#LN1817"><span class='Ref_to_Macro'>CA</span></a><span class='Parentheses'>(</span><span class='String'>'^'</span><span class='Delimiter'>, </span><a href="regcomp.c.html#LN283"><span class='Ref_to_Const'>LACON</span></a><span class='Parentheses'>)</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="regc_nfa.c.html#LN1817"><span class='Ref_to_Macro'>CA</span></a><span class='Parentheses'>(</span><a href="regcomp.c.html#LN285"><span class='Ref_to_Const'>BEHIND</span></a><span class='Delimiter'>, </span><a href="regcomp.c.html#LN283"><span class='Ref_to_Const'>LACON</span></a><span class='Parentheses'>)</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="regc_nfa.c.html#LN1817"><span class='Ref_to_Macro'>CA</span></a><span class='Parentheses'>(</span><span class='String'>'$'</span><span class='Delimiter'>, </span><a href="regcomp.c.html#LN283"><span class='Ref_to_Const'>LACON</span></a><span class='Parentheses'>)</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="regc_nfa.c.html#LN1817"><span class='Ref_to_Macro'>CA</span></a><span class='Parentheses'>(</span><a href="regcomp.c.html#LN284"><span class='Ref_to_Const'>AHEAD</span></a><span class='Delimiter'>, </span><a href="regcomp.c.html#LN283"><span class='Ref_to_Const'>LACON</span></a><span class='Parentheses'>)</span><span class='Operator'>: 
</span>            <span class='Control'>return</span> <a href="regcomp.c.html#LN159"><span class='Ref_to_Const'>COMPATIBLE</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch CA(con-&GT;type,a-&GT;type) &raquo; </span> 
    <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="../../include/regex/regguts.h.html#LN90"><span class='Ref_to_Const'>NOTREACHED</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="regcomp.c.html#LN157"><span class='Ref_to_Const'>INCOMPATIBLE</span></a><span class='Delimiter'>;</span>        <span class='Comment_Single_Line'>/* for benefit of blind compilers */ 
</span><span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end combine &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * fixempties - get rid of EMPTY arcs 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN1868"></a><span class='Declare_Function'>fixempties</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="regc_nfa.c.html#LN1868"><span class='Ref_to_Parameter'>nfa</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>nfa</span><span class='Delimiter'>, 
</span><a name="LN1869"></a>           FILE <span class='Operator'>*</span><span class='Declare_Parameter'>f</span><span class='Parentheses'>)</span>             <span class='Comment_Single_Line'>/* for debug output; NULL none */ 
</span><span class='Delimiter'>{ 
</span><a name="LN1871"></a>    <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>*</span><span class='Declare_Local'>s</span><span class='Delimiter'>; 
</span><a name="LN1872"></a>    <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>*</span><span class='Declare_Local'>s2</span><span class='Delimiter'>; 
</span><a name="LN1873"></a>    <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>*</span><span class='Declare_Local'>nexts</span><span class='Delimiter'>; 
</span><a name="LN1874"></a>    <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>a</span><span class='Delimiter'>; 
</span><a name="LN1875"></a>    <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>nexta</span><span class='Delimiter'>; 
</span><a name="LN1876"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>totalinarcs</span><span class='Delimiter'>; 
</span><a name="LN1877"></a>    <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>**</span><span class='Declare_Local'>inarcsorig</span><span class='Delimiter'>; 
</span><a name="LN1878"></a>    <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>**</span><span class='Declare_Local'>arcarray</span><span class='Delimiter'>; 
</span><a name="LN1879"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>arccount</span><span class='Delimiter'>; 
</span><a name="LN1880"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>prevnins</span><span class='Delimiter'>; 
</span><a name="LN1881"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>nskip</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * First, get rid of any states whose sole out-arc is an EMPTY, since 
     * they're basically just aliases for their successor.  The parsing 
     * algorithm creates enough of these that it's worth special-casing this. 
     */ 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1871"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1868"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN321"><span class='Ref_to_Member'>states</span></a><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN1871"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL </span><span class='Operator'>&& !</span><a href="regc_nfa.c.html#LN38"><span class='Ref_to_Macro'>NISERR</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN1871"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1873"><span class='Ref_To_Local'>nexts</span></a><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="regc_nfa.c.html#LN1873"><span class='Ref_To_Local'>nexts</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1871"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN308"><span class='Ref_to_Member'>next</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1871"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN301"><span class='Ref_to_Member'>flag</span></a> <span class='Operator'>|| </span><a href="regc_nfa.c.html#LN1871"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN304"><span class='Ref_to_Member'>nouts</span></a> <span class='Operator'>!= </span><span class='Number'>1</span><span class='Parentheses'>) 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span>        <a href="regc_nfa.c.html#LN1874"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1871"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN305"><span class='Ref_to_Member'>outs</span></a><span class='Delimiter'>; 
</span>        <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1874"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL </span><span class='Operator'>&& </span><a href="regc_nfa.c.html#LN1874"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN281"><span class='Ref_to_Member'>outchain</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1874"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN277"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>!= </span><a href="../../interfaces/ecpg/preproc/extern.h.html#LN17"><span class='Ref_to_Const'>EMPTY</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1871"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>!= </span><a href="regc_nfa.c.html#LN1874"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN280"><span class='Ref_to_Member'>to</span></a><span class='Parentheses'>) 
</span>            <a href="regcomp.c.html#LN138"><span class='Ref_to_Proto'>moveins</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1868"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1871"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1874"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN280"><span class='Ref_to_Member'>to</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="regcomp.c.html#LN123"><span class='Ref_to_Proto'>dropstate</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1868"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1871"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Similarly, get rid of any state with a single EMPTY in-arc, by folding 
     * it into its predecessor. 
     */ 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1871"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1868"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN321"><span class='Ref_to_Member'>states</span></a><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN1871"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL </span><span class='Operator'>&& !</span><a href="regc_nfa.c.html#LN38"><span class='Ref_to_Macro'>NISERR</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN1871"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1873"><span class='Ref_To_Local'>nexts</span></a><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="regc_nfa.c.html#LN1873"><span class='Ref_To_Local'>nexts</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1871"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN308"><span class='Ref_to_Member'>next</span></a><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* while we're at it, ensure tmp fields are clear for next step */ 
</span>        <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1871"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN307"><span class='Ref_to_Member'>tmp</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1871"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN301"><span class='Ref_to_Member'>flag</span></a> <span class='Operator'>|| </span><a href="regc_nfa.c.html#LN1871"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN302"><span class='Ref_to_Member'>nins</span></a> <span class='Operator'>!= </span><span class='Number'>1</span><span class='Parentheses'>) 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span>        <a href="regc_nfa.c.html#LN1874"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1871"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN303"><span class='Ref_to_Member'>ins</span></a><span class='Delimiter'>; 
</span>        <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1874"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL </span><span class='Operator'>&& </span><a href="regc_nfa.c.html#LN1874"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN284"><span class='Ref_to_Member'>inchain</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1874"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN277"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>!= </span><a href="../../interfaces/ecpg/preproc/extern.h.html#LN17"><span class='Ref_to_Const'>EMPTY</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1871"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>!= </span><a href="regc_nfa.c.html#LN1874"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN279"><span class='Ref_to_Member'>from</span></a><span class='Parentheses'>) 
</span>            <a href="regcomp.c.html#LN141"><span class='Ref_to_Proto'>moveouts</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1868"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1871"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1874"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN279"><span class='Ref_to_Member'>from</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="regcomp.c.html#LN123"><span class='Ref_to_Proto'>dropstate</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1868"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1871"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN38"><span class='Ref_to_Macro'>NISERR</span></a><span class='Parentheses'>())</span> 
        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * For each remaining NFA state, find all other states from which it is 
     * reachable by a chain of one or more EMPTY arcs.  Then generate new arcs 
     * that eliminate the need for each such chain. 
     * 
     * We could replace a chain of EMPTY arcs that leads from a "from" state 
     * to a "to" state either by pushing non-EMPTY arcs forward (linking 
     * directly from "from"'s predecessors to "to") or by pulling them back 
     * (linking directly from "from" to "to"'s successors).  We choose to 
     * always do the former; this choice is somewhat arbitrary, but the 
     * approach below requires that we uniformly do one or the other. 
     * 
     * Suppose we have a chain of N successive EMPTY arcs (where N can easily 
     * approach the size of the NFA).  All of the intermediate states must 
     * have additional inarcs and outarcs, else they'd have been removed by 
     * the steps above.  Assuming their inarcs are mostly not empties, we will 
     * add O(N^2) arcs to the NFA, since a non-EMPTY inarc leading to any one 
     * state in the chain must be duplicated to lead to all its successor 
     * states as well.  So there is no hope of doing less than O(N^2) work; 
     * however, we should endeavor to keep the big-O cost from being even 
     * worse than that, which it can easily become without care.  In 
     * particular, suppose we were to copy all S1's inarcs forward to S2, and 
     * then also to S3, and then later we consider pushing S2's inarcs forward 
     * to S3.  If we include the arcs already copied from S1 in that, we'd be 
     * doing O(N^3) work.  (The duplicate-arc elimination built into newarc() 
     * and its cohorts would get rid of the extra arcs, but not without cost.) 
     * 
     * We can avoid this cost by treating only arcs that existed at the start 
     * of this phase as candidates to be pushed forward.  To identify those, 
     * we remember the first inarc each state had to start with.  We rely on 
     * the fact that newarc() and friends put new arcs on the front of their 
     * to-states' inchains, and that this phase never deletes arcs, so that 
     * the original arcs must be the last arcs in their to-states' inchains. 
     * 
     * So the process here is that, for each state in the NFA, we gather up 
     * all non-EMPTY inarcs of states that can reach the target state via 
     * EMPTY arcs.  We then sort, de-duplicate, and merge these arcs into the 
     * target state's inchain.  (We can safely use sort-merge for this as long 
     * as we update each state's original-arcs pointer after we add arcs to 
     * it; the sort step of mergeins probably changed the order of the old 
     * arcs.) 
     * 
     * Another refinement worth making is that, because we only add non-EMPTY 
     * arcs during this phase, and all added arcs have the same from-state as 
     * the non-EMPTY arc they were cloned from, we know ahead of time that any 
     * states having only EMPTY outarcs will be useless for lack of outarcs 
     * after we drop the EMPTY arcs.  (They cannot gain non-EMPTY outarcs if 
     * they had none to start with.)  So we need not bother to update the 
     * inchains of such states at all. 
     */ 
</span> 
    <span class='Comment_Multi_Line'>/* Remember the states' first original inarcs */ 
</span>    <span class='Comment_Multi_Line'>/* ... and while at it, count how many old inarcs there are altogether */ 
</span>    <a href="regc_nfa.c.html#LN1877"><span class='Ref_To_Local'>inarcsorig</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>**</span><span class='Parentheses'>) </span><a href="../../include/regex/regcustom.h.html#LN61"><span class='Ref_to_Macro'>MALLOC</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1868"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN320"><span class='Ref_to_Member'>nstates</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1877"><span class='Ref_To_Local'>inarcsorig</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="regc_nfa.c.html#LN39"><span class='Ref_to_Macro'>NERR</span></a><span class='Parentheses'>(</span><a href="../../include/regex/regex.h.html#LN148"><span class='Ref_to_Const'>REG_ESPACE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="regc_nfa.c.html#LN1876"><span class='Ref_To_Local'>totalinarcs</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1871"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1868"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN321"><span class='Ref_to_Member'>states</span></a><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN1871"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN1871"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1871"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN308"><span class='Ref_to_Member'>next</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="regc_nfa.c.html#LN1877"><span class='Ref_To_Local'>inarcsorig</span></a><span class='Delimiter'>[</span><a href="regc_nfa.c.html#LN1871"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN299"><span class='Ref_to_Member'>no</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="regc_nfa.c.html#LN1871"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN303"><span class='Ref_to_Member'>ins</span></a><span class='Delimiter'>; 
</span>        <a href="regc_nfa.c.html#LN1876"><span class='Ref_To_Local'>totalinarcs</span></a> <span class='Operator'>+= </span><a href="regc_nfa.c.html#LN1871"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN302"><span class='Ref_to_Member'>nins</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Create a workspace for accumulating the inarcs to be added to the 
     * current target state.  totalinarcs is probably a considerable 
     * overestimate of the space needed, but the NFA is unlikely to be large 
     * enough at this point to make it worth being smarter. 
     */ 
</span>    <a href="regc_nfa.c.html#LN1878"><span class='Ref_To_Local'>arcarray</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>**</span><span class='Parentheses'>) </span><a href="../../include/regex/regcustom.h.html#LN61"><span class='Ref_to_Macro'>MALLOC</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1876"><span class='Ref_To_Local'>totalinarcs</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1878"><span class='Ref_To_Local'>arcarray</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="regc_nfa.c.html#LN39"><span class='Ref_to_Macro'>NERR</span></a><span class='Parentheses'>(</span><a href="../../include/regex/regex.h.html#LN148"><span class='Ref_to_Const'>REG_ESPACE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../common/unicode_norm.c.html#LN25"><span class='Ref_to_Macro'>FREE</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1877"><span class='Ref_To_Local'>inarcsorig</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* And iterate over the target states */ 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1871"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1868"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN321"><span class='Ref_to_Member'>states</span></a><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN1871"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL </span><span class='Operator'>&& !</span><a href="regc_nfa.c.html#LN38"><span class='Ref_to_Macro'>NISERR</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN1871"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1871"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN308"><span class='Ref_to_Member'>next</span></a><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Ignore target states without non-EMPTY outarcs, per note above */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="regc_nfa.c.html#LN1871"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN301"><span class='Ref_to_Member'>flag</span></a> <span class='Operator'>&& !</span><a href="regcomp.c.html#LN131"><span class='Ref_to_Proto'>hasnonemptyout</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1871"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>))</span> 
            <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Find predecessor states and accumulate their original inarcs */ 
</span>        <a href="regc_nfa.c.html#LN1879"><span class='Ref_To_Local'>arccount</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1872"><span class='Ref_To_Local'>s2</span></a> <span class='Operator'>= </span><a href="regcomp.c.html#LN162"><span class='Ref_to_Proto'>emptyreachable</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1868"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1871"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1871"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1877"><span class='Ref_To_Local'>inarcsorig</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN1872"><span class='Ref_To_Local'>s2</span></a> <span class='Operator'>!= </span><a href="regc_nfa.c.html#LN1871"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN1872"><span class='Ref_To_Local'>s2</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1873"><span class='Ref_To_Local'>nexts</span></a><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* Add s2's original inarcs to arcarray[], but ignore empties */ 
</span>            <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1874"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1877"><span class='Ref_To_Local'>inarcsorig</span></a><span class='Delimiter'>[</span><a href="regc_nfa.c.html#LN1872"><span class='Ref_To_Local'>s2</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN299"><span class='Ref_to_Member'>no</span></a><span class='Delimiter'>]; </span><a href="regc_nfa.c.html#LN1874"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN1874"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1874"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN284"><span class='Ref_to_Member'>inchain</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1874"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN277"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>!= </span><a href="../../interfaces/ecpg/preproc/extern.h.html#LN17"><span class='Ref_to_Const'>EMPTY</span></a><span class='Parentheses'>) 
</span>                    <a href="regc_nfa.c.html#LN1878"><span class='Ref_To_Local'>arcarray</span></a><span class='Delimiter'>[</span><a href="regc_nfa.c.html#LN1879"><span class='Ref_To_Local'>arccount</span></a><span class='Operator'>++</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="regc_nfa.c.html#LN1874"><span class='Ref_To_Local'>a</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
            <span class='Comment_Multi_Line'>/* Reset the tmp fields as we walk back */ 
</span>            <a href="regc_nfa.c.html#LN1873"><span class='Ref_To_Local'>nexts</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1872"><span class='Ref_To_Local'>s2</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN307"><span class='Ref_to_Member'>tmp</span></a><span class='Delimiter'>; 
</span>            <a href="regc_nfa.c.html#LN1872"><span class='Ref_To_Local'>s2</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN307"><span class='Ref_to_Member'>tmp</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <a href="regc_nfa.c.html#LN1871"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN307"><span class='Ref_to_Member'>tmp</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>        <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1879"><span class='Ref_To_Local'>arccount</span></a> <span class='Operator'>&LT;= </span><a href="regc_nfa.c.html#LN1876"><span class='Ref_To_Local'>totalinarcs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Remember how many original inarcs this state has */ 
</span>        <a href="regc_nfa.c.html#LN1880"><span class='Ref_To_Local'>prevnins</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1871"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN302"><span class='Ref_to_Member'>nins</span></a><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Add non-duplicate inarcs to target state */ 
</span>        <a href="regcomp.c.html#LN140"><span class='Ref_to_Proto'>mergeins</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1868"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1871"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1878"><span class='Ref_To_Local'>arcarray</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1879"><span class='Ref_To_Local'>arccount</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Now we must update the state's inarcsorig pointer */ 
</span>        <a href="regc_nfa.c.html#LN1881"><span class='Ref_To_Local'>nskip</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1871"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN302"><span class='Ref_to_Member'>nins</span></a> <span class='Operator'>- </span><a href="regc_nfa.c.html#LN1880"><span class='Ref_To_Local'>prevnins</span></a><span class='Delimiter'>; 
</span>        <a href="regc_nfa.c.html#LN1874"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1871"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN303"><span class='Ref_to_Member'>ins</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1881"><span class='Ref_To_Local'>nskip</span></a><span class='Operator'>-- &GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <a href="regc_nfa.c.html#LN1874"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1874"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN284"><span class='Ref_to_Member'>inchain</span></a><span class='Delimiter'>; 
</span>        <a href="regc_nfa.c.html#LN1877"><span class='Ref_To_Local'>inarcsorig</span></a><span class='Delimiter'>[</span><a href="regc_nfa.c.html#LN1871"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN299"><span class='Ref_to_Member'>no</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="regc_nfa.c.html#LN1874"><span class='Ref_To_Local'>a</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for s=nfa-&GT;states;s!=NULL... &raquo; </span> 
 
    <a href="../../common/unicode_norm.c.html#LN25"><span class='Ref_to_Macro'>FREE</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1878"><span class='Ref_To_Local'>arcarray</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../common/unicode_norm.c.html#LN25"><span class='Ref_to_Macro'>FREE</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1877"><span class='Ref_To_Local'>inarcsorig</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN38"><span class='Ref_to_Macro'>NISERR</span></a><span class='Parentheses'>())</span> 
        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Now remove all the EMPTY arcs, since we don't need them anymore. 
     */ 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1871"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1868"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN321"><span class='Ref_to_Member'>states</span></a><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN1871"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN1871"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1871"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN308"><span class='Ref_to_Member'>next</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1874"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1871"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN305"><span class='Ref_to_Member'>outs</span></a><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN1874"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN1874"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1875"><span class='Ref_To_Local'>nexta</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="regc_nfa.c.html#LN1875"><span class='Ref_To_Local'>nexta</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1874"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN281"><span class='Ref_to_Member'>outchain</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1874"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN277"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>== </span><a href="../../interfaces/ecpg/preproc/extern.h.html#LN17"><span class='Ref_to_Const'>EMPTY</span></a><span class='Parentheses'>) 
</span>                <a href="regcomp.c.html#LN129"><span class='Ref_to_Proto'>freearc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1868"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1874"><span class='Ref_To_Local'>a</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * And remove any states that have become useless.  (This cleanup is not 
     * very thorough, and would be even less so if we tried to combine it with 
     * the previous step; but cleanup() will take care of anything we miss.) 
     */ 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1871"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1868"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN321"><span class='Ref_to_Member'>states</span></a><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN1871"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN1871"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1873"><span class='Ref_To_Local'>nexts</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="regc_nfa.c.html#LN1873"><span class='Ref_To_Local'>nexts</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN1871"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN308"><span class='Ref_to_Member'>next</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="regc_nfa.c.html#LN1871"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN302"><span class='Ref_to_Member'>nins</span></a> <span class='Operator'>== </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="regc_nfa.c.html#LN1871"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN304"><span class='Ref_to_Member'>nouts</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) </span><span class='Operator'>&& !</span><a href="regc_nfa.c.html#LN1871"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN301"><span class='Ref_to_Member'>flag</span></a><span class='Parentheses'>)</span> 
            <a href="regcomp.c.html#LN123"><span class='Ref_to_Proto'>dropstate</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1868"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1871"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1869"><span class='Ref_to_Parameter'>f</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="regcomp.c.html#LN180"><span class='Ref_to_Proto'>dumpnfa</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN1868"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN1869"><span class='Ref_to_Parameter'>f</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end fixempties &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * emptyreachable - recursively find all states that can reach s by EMPTY arcs 
 * 
 * The return value is the last such state found.  Its tmp field links back 
 * to the next-to-last such state, and so on back to s, so that all these 
 * states can be located without searching the whole NFA. 
 * 
 * Since this is only used in fixempties(), we pass in the inarcsorig[] array 
 * maintained by that function.  This lets us skip over all new inarcs, which 
 * are certainly not EMPTY arcs. 
 * 
 * The maximum recursion depth here is equal to the length of the longest 
 * loop-free chain of EMPTY arcs, which is surely no more than the size of 
 * the NFA ... but that could still be enough to cause trouble. 
 */ 
</span><span class='Keyword'>static </span><span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>* 
</span><a name="LN2095"></a><span class='Declare_Function'>emptyreachable</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="regc_nfa.c.html#LN2095"><span class='Ref_to_Parameter'>nfa</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>nfa</span><span class='Delimiter'>, 
</span><a name="LN2096"></a>               <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>s</span><span class='Delimiter'>, 
</span><a name="LN2097"></a>               <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>lastfound</span><span class='Delimiter'>, 
</span><a name="LN2098"></a>               <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>** </span><span class='Declare_Parameter'>inarcsorig</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2100"></a>    <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>a</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Since this is recursive, it could be driven to stack overflow */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/regex/regguts.h.html#LN454"><span class='Ref_to_Macro'>STACK_TOO_DEEP</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2095"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN327"><span class='Ref_to_Member'>v</span></a><span class='Operator'>-&GT;</span><a href="regexec.c.html#LN104"><span class='Ref_to_Member'>re</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="regc_nfa.c.html#LN39"><span class='Ref_to_Macro'>NERR</span></a><span class='Parentheses'>(</span><a href="../../include/regex/regex.h.html#LN154"><span class='Ref_to_Const'>REG_ETOOBIG</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <a href="regc_nfa.c.html#LN2097"><span class='Ref_to_Parameter'>lastfound</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="regc_nfa.c.html#LN2096"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN307"><span class='Ref_to_Member'>tmp</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2097"><span class='Ref_to_Parameter'>lastfound</span></a><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN2097"><span class='Ref_to_Parameter'>lastfound</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2096"><span class='Ref_to_Parameter'>s</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2100"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2098"><span class='Ref_to_Parameter'>inarcsorig</span></a><span class='Delimiter'>[</span><a href="regc_nfa.c.html#LN2096"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN299"><span class='Ref_to_Member'>no</span></a><span class='Delimiter'>]; </span><a href="regc_nfa.c.html#LN2100"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN2100"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2100"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN284"><span class='Ref_to_Member'>inchain</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2100"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN277"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>== </span><a href="../../interfaces/ecpg/preproc/extern.h.html#LN17"><span class='Ref_to_Const'>EMPTY</span></a> <span class='Operator'>&& </span><a href="regc_nfa.c.html#LN2100"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN279"><span class='Ref_to_Member'>from</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN307"><span class='Ref_to_Member'>tmp</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <a href="regc_nfa.c.html#LN2097"><span class='Ref_to_Parameter'>lastfound</span></a> <span class='Operator'>= </span><a href="regcomp.c.html#LN162"><span class='Ref_to_Proto'>emptyreachable</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2095"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN2100"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN279"><span class='Ref_to_Member'>from</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN2097"><span class='Ref_to_Parameter'>lastfound</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN2098"><span class='Ref_to_Parameter'>inarcsorig</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>return</span> <a href="regc_nfa.c.html#LN2097"><span class='Ref_to_Parameter'>lastfound</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end emptyreachable &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * isconstraintarc - detect whether an arc is of a constraint type 
 */ 
</span><span class='Keyword'>static inline int 
</span><a name="LN2123"></a><span class='Declare_Function'>isconstraintarc</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>a</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2123"><span class='Ref_to_Parameter'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN277"><span class='Ref_to_Member'>type</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>case</span> <span class='String'>'^'</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <span class='String'>'$'</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="regcomp.c.html#LN285"><span class='Ref_to_Const'>BEHIND</span></a><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="regcomp.c.html#LN284"><span class='Ref_to_Const'>AHEAD</span></a><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="regcomp.c.html#LN283"><span class='Ref_to_Const'>LACON</span></a><span class='Operator'>: 
</span>            <span class='Control'>return</span> <span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * hasconstraintout - does state have a constraint out arc? 
 */ 
</span><span class='Keyword'>static int 
</span><a name="LN2141"></a><span class='Declare_Function'>hasconstraintout</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>s</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2143"></a>    <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>a</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2143"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2141"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN305"><span class='Ref_to_Member'>outs</span></a><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN2143"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN2143"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2143"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN281"><span class='Ref_to_Member'>outchain</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regcomp.c.html#LN164"><span class='Ref_to_Proto'>isconstraintarc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2143"><span class='Ref_To_Local'>a</span></a><span class='Parentheses'>))</span> 
            <span class='Control'>return</span> <span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * fixconstraintloops - get rid of loops containing only constraint arcs 
 * 
 * A loop of states that contains only constraint arcs is useless, since 
 * passing around the loop represents no forward progress.  Moreover, it 
 * would cause infinite looping in pullback/pushfwd, so we need to get rid 
 * of such loops before doing that. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN2162"></a><span class='Declare_Function'>fixconstraintloops</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="regc_nfa.c.html#LN2162"><span class='Ref_to_Parameter'>nfa</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>nfa</span><span class='Delimiter'>, 
</span><a name="LN2163"></a>                   FILE <span class='Operator'>*</span><span class='Declare_Parameter'>f</span><span class='Parentheses'>)</span>     <span class='Comment_Single_Line'>/* for debug output; NULL none */ 
</span><span class='Delimiter'>{ 
</span><a name="LN2165"></a>    <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>*</span><span class='Declare_Local'>s</span><span class='Delimiter'>; 
</span><a name="LN2166"></a>    <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>*</span><span class='Declare_Local'>nexts</span><span class='Delimiter'>; 
</span><a name="LN2167"></a>    <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>a</span><span class='Delimiter'>; 
</span><a name="LN2168"></a>    <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>nexta</span><span class='Delimiter'>; 
</span><a name="LN2169"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>hasconstraints</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * In the trivial case of a state that loops to itself, we can just drop 
     * the constraint arc altogether.  This is worth special-casing because 
     * such loops are far more common than loops containing multiple states. 
     * While we're at it, note whether any constraint arcs survive. 
     */ 
</span>    <a href="regc_nfa.c.html#LN2169"><span class='Ref_To_Local'>hasconstraints</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2165"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2162"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN321"><span class='Ref_to_Member'>states</span></a><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN2165"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL </span><span class='Operator'>&& !</span><a href="regc_nfa.c.html#LN38"><span class='Ref_to_Macro'>NISERR</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN2165"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2166"><span class='Ref_To_Local'>nexts</span></a><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="regc_nfa.c.html#LN2166"><span class='Ref_To_Local'>nexts</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2165"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN308"><span class='Ref_to_Member'>next</span></a><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* while we're at it, ensure tmp fields are clear for next step */ 
</span>        <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2165"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN307"><span class='Ref_to_Member'>tmp</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2167"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2165"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN305"><span class='Ref_to_Member'>outs</span></a><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN2167"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL </span><span class='Operator'>&& !</span><a href="regc_nfa.c.html#LN38"><span class='Ref_to_Macro'>NISERR</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN2167"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2168"><span class='Ref_To_Local'>nexta</span></a><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <a href="regc_nfa.c.html#LN2168"><span class='Ref_To_Local'>nexta</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2167"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN281"><span class='Ref_to_Member'>outchain</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regcomp.c.html#LN164"><span class='Ref_to_Proto'>isconstraintarc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2167"><span class='Ref_To_Local'>a</span></a><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2167"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN280"><span class='Ref_to_Member'>to</span></a> <span class='Operator'>== </span><a href="regc_nfa.c.html#LN2165"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>) 
</span>                    <a href="regcomp.c.html#LN129"><span class='Ref_to_Proto'>freearc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2162"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN2167"><span class='Ref_To_Local'>a</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>else</span> 
                    <a href="regc_nfa.c.html#LN2169"><span class='Ref_To_Local'>hasconstraints</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>} 
</span>        <span class='Comment_Multi_Line'>/* If we removed all the outarcs, the state is useless. */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2165"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN304"><span class='Ref_to_Member'>nouts</span></a> <span class='Operator'>== </span><span class='Number'>0</span> <span class='Operator'>&& !</span><a href="regc_nfa.c.html#LN2165"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN301"><span class='Ref_to_Member'>flag</span></a><span class='Parentheses'>) 
</span>            <a href="regcomp.c.html#LN123"><span class='Ref_to_Proto'>dropstate</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2162"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN2165"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for s=nfa-&GT;states;s!=NULL... &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* Nothing to do if no remaining constraint arcs */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN38"><span class='Ref_to_Macro'>NISERR</span></a><span class='Parentheses'>() </span><span class='Operator'>|| !</span><a href="regc_nfa.c.html#LN2169"><span class='Ref_To_Local'>hasconstraints</span></a><span class='Parentheses'>)</span> 
        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Starting from each remaining NFA state, search outwards for a 
     * constraint loop.  If we find a loop, break the loop, then start the 
     * search over.  (We could possibly retain some state from the first scan, 
     * but it would complicate things greatly, and multi-state constraint 
     * loops are rare enough that it's not worth optimizing the case.) 
     */ 
</span><a name="LN2210"></a><span class='Label'>restart</span><span class='Operator'>: 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2165"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2162"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN321"><span class='Ref_to_Member'>states</span></a><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN2165"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL </span><span class='Operator'>&& !</span><a href="regc_nfa.c.html#LN38"><span class='Ref_to_Macro'>NISERR</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN2165"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2165"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN308"><span class='Ref_to_Member'>next</span></a><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regcomp.c.html#LN167"><span class='Ref_to_Proto'>findconstraintloop</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2162"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN2165"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>))</span> 
            <span class='Control'>goto</span> <span class='Symbol_Characters'>&uarr;</span><a href="regc_nfa.c.html#LN2210"><span class='Ref_to_Label'>restart</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN38"><span class='Ref_to_Macro'>NISERR</span></a><span class='Parentheses'>())</span> 
        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Now remove any states that have become useless.  (This cleanup is not 
     * very thorough, and would be even less so if we tried to combine it with 
     * the previous step; but cleanup() will take care of anything we miss.) 
     * 
     * Because findconstraintloop intentionally doesn't reset all tmp fields, 
     * we have to clear them after it's done.  This is a convenient place to 
     * do that, too. 
     */ 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2165"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2162"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN321"><span class='Ref_to_Member'>states</span></a><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN2165"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN2165"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2166"><span class='Ref_To_Local'>nexts</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="regc_nfa.c.html#LN2166"><span class='Ref_To_Local'>nexts</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2165"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN308"><span class='Ref_to_Member'>next</span></a><span class='Delimiter'>; 
</span>        <a href="regc_nfa.c.html#LN2165"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN307"><span class='Ref_to_Member'>tmp</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="regc_nfa.c.html#LN2165"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN302"><span class='Ref_to_Member'>nins</span></a> <span class='Operator'>== </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="regc_nfa.c.html#LN2165"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN304"><span class='Ref_to_Member'>nouts</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) </span><span class='Operator'>&& !</span><a href="regc_nfa.c.html#LN2165"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN301"><span class='Ref_to_Member'>flag</span></a><span class='Parentheses'>)</span> 
            <a href="regcomp.c.html#LN123"><span class='Ref_to_Proto'>dropstate</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2162"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN2165"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2163"><span class='Ref_to_Parameter'>f</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="regcomp.c.html#LN180"><span class='Ref_to_Proto'>dumpnfa</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2162"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN2163"><span class='Ref_to_Parameter'>f</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end fixconstraintloops &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * findconstraintloop - recursively find a loop of constraint arcs 
 * 
 * If we find a loop, break it by calling breakconstraintloop(), then 
 * return 1; otherwise return 0. 
 * 
 * State tmp fields are guaranteed all NULL on a success return, because 
 * breakconstraintloop does that.  After a failure return, any state that 
 * is known not to be part of a loop is marked with s-&GT;tmp == s; this allows 
 * us not to have to re-prove that fact on later calls.  (This convention is 
 * workable because we already eliminated single-state loops.) 
 * 
 * Note that the found loop doesn't necessarily include the first state we 
 * are called on.  Any loop reachable from that state will do. 
 * 
 * The maximum recursion depth here is one more than the length of the longest 
 * loop-free chain of constraint arcs, which is surely no more than the size 
 * of the NFA ... but that could still be enough to cause trouble. 
 */ 
</span><span class='Keyword'>static int 
</span><a name="LN2261"></a><span class='Declare_Function'>findconstraintloop</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="regc_nfa.c.html#LN2261"><span class='Ref_to_Parameter'>nfa</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>nfa</span><span class='Delimiter'>, </span><span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>s</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2263"></a>    <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>a</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Since this is recursive, it could be driven to stack overflow */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/regex/regguts.h.html#LN454"><span class='Ref_to_Macro'>STACK_TOO_DEEP</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2261"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN327"><span class='Ref_to_Member'>v</span></a><span class='Operator'>-&GT;</span><a href="regexec.c.html#LN104"><span class='Ref_to_Member'>re</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="regc_nfa.c.html#LN39"><span class='Ref_to_Macro'>NERR</span></a><span class='Parentheses'>(</span><a href="../../include/regex/regex.h.html#LN154"><span class='Ref_to_Const'>REG_ETOOBIG</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Number'>1</span><span class='Delimiter'>;</span>               <span class='Comment_Single_Line'>/* to exit as quickly as possible */ 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2261"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN307"><span class='Ref_to_Member'>tmp</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Already proven uninteresting? */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2261"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN307"><span class='Ref_to_Member'>tmp</span></a> <span class='Operator'>== </span><a href="regc_nfa.c.html#LN2261"><span class='Ref_to_Parameter'>s</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* Found a loop involving s */ 
</span>        <a href="regcomp.c.html#LN168"><span class='Ref_to_Proto'>breakconstraintloop</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2261"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN2261"><span class='Ref_to_Parameter'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* The tmp fields have been cleaned up by breakconstraintloop */ 
</span>        <span class='Control'>return</span> <span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2263"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2261"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN305"><span class='Ref_to_Member'>outs</span></a><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN2263"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN2263"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2263"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN281"><span class='Ref_to_Member'>outchain</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regcomp.c.html#LN164"><span class='Ref_to_Proto'>isconstraintarc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2263"><span class='Ref_To_Local'>a</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span><a name="LN2286"></a>            <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>*</span><span class='Declare_Local'>sto</span> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2263"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN280"><span class='Ref_to_Member'>to</span></a><span class='Delimiter'>; 
</span> 
            <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2286"><span class='Ref_To_Local'>sto</span></a> <span class='Operator'>!= </span><a href="regc_nfa.c.html#LN2261"><span class='Ref_to_Parameter'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="regc_nfa.c.html#LN2261"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN307"><span class='Ref_to_Member'>tmp</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2286"><span class='Ref_To_Local'>sto</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regcomp.c.html#LN167"><span class='Ref_to_Proto'>findconstraintloop</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2261"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN2286"><span class='Ref_To_Local'>sto</span></a><span class='Parentheses'>))</span> 
                <span class='Control'>return</span> <span class='Number'>1</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If we get here, no constraint loop exists leading out from s.  Mark it 
     * with s-&GT;tmp == s so we need not rediscover that fact again later. 
     */ 
</span>    <a href="regc_nfa.c.html#LN2261"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN307"><span class='Ref_to_Member'>tmp</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2261"><span class='Ref_to_Parameter'>s</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end findconstraintloop &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * breakconstraintloop - break a loop of constraint arcs 
 * 
 * sinitial is any one member state of the loop.  Each loop member's tmp 
 * field links to its successor within the loop.  (Note that this function 
 * will reset all the tmp fields to NULL.) 
 * 
 * We can break the loop by, for any one state S1 in the loop, cloning its 
 * loop successor state S2 (and possibly following states), and then moving 
 * all S1-&GT;S2 constraint arcs to point to the cloned S2.  The cloned S2 should 
 * copy any non-constraint outarcs of S2.  Constraint outarcs should be 
 * dropped if they point back to S1, else they need to be copied as arcs to 
 * similarly cloned states S3, S4, etc.  In general, each cloned state copies 
 * non-constraint outarcs, drops constraint outarcs that would lead to itself 
 * or any earlier cloned state, and sends other constraint outarcs to newly 
 * cloned states.  No cloned state will have any inarcs that aren't constraint 
 * arcs or do not lead from S1 or earlier-cloned states.  It's okay to drop 
 * constraint back-arcs since they would not take us to any state we've not 
 * already been in; therefore, no new constraint loop is created.  In this way 
 * we generate a modified NFA that can still represent every useful state 
 * sequence, but not sequences that represent state loops with no consumption 
 * of input data.  Note that the set of cloned states will certainly include 
 * all of the loop member states other than S1, and it may also include 
 * non-loop states that are reachable from S2 via constraint arcs.  This is 
 * important because there is no guarantee that findconstraintloop found a 
 * maximal loop (and searching for one would be NP-hard, so don't try). 
 * Frequently the "non-loop states" are actually part of a larger loop that 
 * we didn't notice, and indeed there may be several overlapping loops. 
 * This technique ensures convergence in such cases, while considering only 
 * the originally-found loop does not. 
 * 
 * If there is only one S1-&GT;S2 constraint arc, then that constraint is 
 * certainly satisfied when we enter any of the clone states.  This means that 
 * in the common case where many of the constraint arcs are identically 
 * labeled, we can merge together clone states linked by a similarly-labeled 
 * constraint: if we can get to the first one we can certainly get to the 
 * second, so there's no need to distinguish.  This greatly reduces the number 
 * of new states needed, so we preferentially break the given loop at a state 
 * pair where this is true. 
 * 
 * Furthermore, it's fairly common to find that a cloned successor state has 
 * no outarcs, especially if we're a bit aggressive about removing unnecessary 
 * outarcs.  If that happens, then there is simply not any interesting state 
 * that can be reached through the predecessor's loop arcs, which means we can 
 * break the loop just by removing those loop arcs, with no new states added. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN2350"></a><span class='Declare_Function'>breakconstraintloop</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="regc_nfa.c.html#LN2350"><span class='Ref_to_Parameter'>nfa</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>nfa</span><span class='Delimiter'>, </span><span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>sinitial</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2352"></a>    <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>*</span><span class='Declare_Local'>s</span><span class='Delimiter'>; 
</span><a name="LN2353"></a>    <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>*</span><span class='Declare_Local'>shead</span><span class='Delimiter'>; 
</span><a name="LN2354"></a>    <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>*</span><span class='Declare_Local'>stail</span><span class='Delimiter'>; 
</span><a name="LN2355"></a>    <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>*</span><span class='Declare_Local'>sclone</span><span class='Delimiter'>; 
</span><a name="LN2356"></a>    <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>*</span><span class='Declare_Local'>nexts</span><span class='Delimiter'>; 
</span><a name="LN2357"></a>    <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>refarc</span><span class='Delimiter'>; 
</span><a name="LN2358"></a>    <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>a</span><span class='Delimiter'>; 
</span><a name="LN2359"></a>    <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>nexta</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Start by identifying which loop step we want to break at. 
     * Preferentially this is one with only one constraint arc.  (XXX are 
     * there any other secondary heuristics we want to use here?)  Set refarc 
     * to point to the selected lone constraint arc, if there is one. 
     */ 
</span>    <a href="regc_nfa.c.html#LN2357"><span class='Ref_To_Local'>refarc</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN2352"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2350"><span class='Ref_to_Parameter'>sinitial</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>do</span> 
    <span class='Delimiter'>{ 
</span>        <a href="regc_nfa.c.html#LN2356"><span class='Ref_To_Local'>nexts</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2352"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN307"><span class='Ref_to_Member'>tmp</span></a><span class='Delimiter'>; 
</span>        <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2356"><span class='Ref_To_Local'>nexts</span></a> <span class='Operator'>!= </span><a href="regc_nfa.c.html#LN2352"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* should not see any one-element loops */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2357"><span class='Ref_To_Local'>refarc</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN2375"></a>            <span class='Keyword'>int</span>         <span class='Declare_Local'>narcs</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2358"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2352"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN305"><span class='Ref_to_Member'>outs</span></a><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN2358"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN2358"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2358"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN281"><span class='Ref_to_Member'>outchain</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2358"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN280"><span class='Ref_to_Member'>to</span></a> <span class='Operator'>== </span><a href="regc_nfa.c.html#LN2356"><span class='Ref_To_Local'>nexts</span></a> <span class='Operator'>&& </span><a href="regcomp.c.html#LN164"><span class='Ref_to_Proto'>isconstraintarc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2358"><span class='Ref_To_Local'>a</span></a><span class='Parentheses'>))</span> 
                <span class='Delimiter'>{ 
</span>                    <a href="regc_nfa.c.html#LN2357"><span class='Ref_To_Local'>refarc</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2358"><span class='Ref_To_Local'>a</span></a><span class='Delimiter'>; 
</span>                    <a href="regc_nfa.c.html#LN2375"><span class='Ref_To_Local'>narcs</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>            <span class='Delimiter'>} 
</span>            <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2375"><span class='Ref_To_Local'>narcs</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2375"><span class='Ref_To_Local'>narcs</span></a> <span class='Operator'>&GT; </span><span class='Number'>1</span><span class='Parentheses'>) 
</span>                <a href="regc_nfa.c.html#LN2357"><span class='Ref_To_Local'>refarc</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>;</span>  <span class='Comment_Single_Line'>/* multiple constraint arcs here, no good */ 
</span>        <span class='Delimiter'>} 
</span>        <a href="regc_nfa.c.html#LN2352"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2356"><span class='Ref_To_Local'>nexts</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end do &raquo; </span> <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2352"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>!= </span><a href="regc_nfa.c.html#LN2350"><span class='Ref_to_Parameter'>sinitial</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2357"><span class='Ref_To_Local'>refarc</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* break at the refarc */ 
</span>        <a href="regc_nfa.c.html#LN2353"><span class='Ref_To_Local'>shead</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2357"><span class='Ref_To_Local'>refarc</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN279"><span class='Ref_to_Member'>from</span></a><span class='Delimiter'>; 
</span>        <a href="regc_nfa.c.html#LN2354"><span class='Ref_To_Local'>stail</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2357"><span class='Ref_To_Local'>refarc</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN280"><span class='Ref_to_Member'>to</span></a><span class='Delimiter'>; 
</span>        <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2354"><span class='Ref_To_Local'>stail</span></a> <span class='Operator'>== </span><a href="regc_nfa.c.html#LN2353"><span class='Ref_To_Local'>shead</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN307"><span class='Ref_to_Member'>tmp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* for lack of a better idea, break after sinitial */ 
</span>        <a href="regc_nfa.c.html#LN2353"><span class='Ref_To_Local'>shead</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2350"><span class='Ref_to_Parameter'>sinitial</span></a><span class='Delimiter'>; 
</span>        <a href="regc_nfa.c.html#LN2354"><span class='Ref_To_Local'>stail</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2350"><span class='Ref_to_Parameter'>sinitial</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN307"><span class='Ref_to_Member'>tmp</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Reset the tmp fields so that we can use them for local storage in 
     * clonesuccessorstates.  (findconstraintloop won't mind, since it's just 
     * going to abandon its search anyway.) 
     */ 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2352"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2350"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN321"><span class='Ref_to_Member'>states</span></a><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN2352"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN2352"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2352"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN308"><span class='Ref_to_Member'>next</span></a><span class='Parentheses'>) 
</span>        <a href="regc_nfa.c.html#LN2352"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN307"><span class='Ref_to_Member'>tmp</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Recursively build clone state(s) as needed. 
     */ 
</span>    <a href="regc_nfa.c.html#LN2355"><span class='Ref_To_Local'>sclone</span></a> <span class='Operator'>= </span><a href="regcomp.c.html#LN121"><span class='Ref_to_Proto'>newstate</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2350"><span class='Ref_to_Parameter'>nfa</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2355"><span class='Ref_To_Local'>sclone</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN38"><span class='Ref_to_Macro'>NISERR</span></a><span class='Parentheses'>())</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="regcomp.c.html#LN169"><span class='Ref_to_Proto'>clonesuccessorstates</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2350"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN2354"><span class='Ref_To_Local'>stail</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN2355"><span class='Ref_To_Local'>sclone</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN2353"><span class='Ref_To_Local'>shead</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN2357"><span class='Ref_To_Local'>refarc</span></a><span class='Delimiter'>, 
</span>                         <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN2350"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN320"><span class='Ref_to_Member'>nstates</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN38"><span class='Ref_to_Macro'>NISERR</span></a><span class='Parentheses'>())</span> 
        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * It's possible that sclone has no outarcs at all, in which case it's 
     * useless.  (We don't try extremely hard to get rid of useless states 
     * here, but this is an easy and fairly common case.) 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2355"><span class='Ref_To_Local'>sclone</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN304"><span class='Ref_to_Member'>nouts</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="regcomp.c.html#LN124"><span class='Ref_to_Proto'>freestate</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2350"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN2355"><span class='Ref_To_Local'>sclone</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="regc_nfa.c.html#LN2355"><span class='Ref_To_Local'>sclone</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Move shead's constraint-loop arcs to point to sclone, or just drop them 
     * if we discovered we don't need sclone. 
     */ 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2358"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2353"><span class='Ref_To_Local'>shead</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN305"><span class='Ref_to_Member'>outs</span></a><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN2358"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN2358"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2359"><span class='Ref_To_Local'>nexta</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="regc_nfa.c.html#LN2359"><span class='Ref_To_Local'>nexta</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2358"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN281"><span class='Ref_to_Member'>outchain</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2358"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN280"><span class='Ref_to_Member'>to</span></a> <span class='Operator'>== </span><a href="regc_nfa.c.html#LN2354"><span class='Ref_To_Local'>stail</span></a> <span class='Operator'>&& </span><a href="regcomp.c.html#LN164"><span class='Ref_to_Proto'>isconstraintarc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2358"><span class='Ref_To_Local'>a</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2355"><span class='Ref_To_Local'>sclone</span></a><span class='Parentheses'>) 
</span>                <a href="regcomp.c.html#LN133"><span class='Ref_to_Proto'>cparc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2350"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN2358"><span class='Ref_To_Local'>a</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN2353"><span class='Ref_To_Local'>shead</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN2355"><span class='Ref_To_Local'>sclone</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="regcomp.c.html#LN129"><span class='Ref_to_Proto'>freearc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2350"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN2358"><span class='Ref_To_Local'>a</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN38"><span class='Ref_to_Macro'>NISERR</span></a><span class='Parentheses'>())</span> 
                <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
}</span><span class='Auto_Annotations'> &laquo; end breakconstraintloop &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * clonesuccessorstates - create a tree of constraint-arc successor states 
 * 
 * ssource is the state to be cloned, and sclone is the state to copy its 
 * outarcs into.  sclone's inarcs, if any, should already be set up. 
 * 
 * spredecessor is the original predecessor state that we are trying to build 
 * successors for (it may not be the immediate predecessor of ssource). 
 * refarc, if not NULL, is the original constraint arc that is known to have 
 * been traversed out of spredecessor to reach the successor(s). 
 * 
 * For each cloned successor state, we transiently create a "donemap" that is 
 * a boolean array showing which source states we've already visited for this 
 * clone state.  This prevents infinite recursion as well as useless repeat 
 * visits to the same state subtree (which can add up fast, since typical NFAs 
 * have multiple redundant arc pathways).  Each donemap is a char array 
 * indexed by state number.  The donemaps are all of the same size "nstates", 
 * which is nfa-&GT;nstates as of the start of the recursion.  This is enough to 
 * have entries for all pre-existing states, but *not* entries for clone 
 * states created during the recursion.  That's okay since we have no need to 
 * mark those. 
 * 
 * curdonemap is NULL when recursing to a new sclone state, or sclone's 
 * donemap when we are recursing without having created a new state (which we 
 * do when we decide we can merge a successor state into the current clone 
 * state).  outerdonemap is NULL at the top level and otherwise the parent 
 * clone state's donemap. 
 * 
 * The successor states we create and fill here form a strict tree structure, 
 * with each state having exactly one predecessor, except that the toplevel 
 * state has no inarcs as yet (breakconstraintloop will add its inarcs from 
 * spredecessor after we're done).  Thus, we can examine sclone's inarcs back 
 * to the root, plus refarc if any, to identify the set of constraints already 
 * known valid at the current point.  This allows us to avoid generating extra 
 * successor states. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN2496"></a><span class='Declare_Function'>clonesuccessorstates</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="regc_nfa.c.html#LN2496"><span class='Ref_to_Parameter'>nfa</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>nfa</span><span class='Delimiter'>, 
</span><a name="LN2497"></a>                     <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>ssource</span><span class='Delimiter'>, 
</span><a name="LN2498"></a>                     <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>sclone</span><span class='Delimiter'>, 
</span><a name="LN2499"></a>                     <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>spredecessor</span><span class='Delimiter'>, 
</span><a name="LN2500"></a>                     <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>refarc</span><span class='Delimiter'>, 
</span><a name="LN2501"></a>                     <span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>curdonemap</span><span class='Delimiter'>, 
</span><a name="LN2502"></a>                     <span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>outerdonemap</span><span class='Delimiter'>, 
</span><a name="LN2503"></a>                     <span class='Keyword'>int </span><span class='Declare_Parameter'>nstates</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2505"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>donemap</span><span class='Delimiter'>; 
</span><a name="LN2506"></a>    <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>a</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Since this is recursive, it could be driven to stack overflow */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/regex/regguts.h.html#LN454"><span class='Ref_to_Macro'>STACK_TOO_DEEP</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2496"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN327"><span class='Ref_to_Member'>v</span></a><span class='Operator'>-&GT;</span><a href="regexec.c.html#LN104"><span class='Ref_to_Member'>re</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="regc_nfa.c.html#LN39"><span class='Ref_to_Macro'>NERR</span></a><span class='Parentheses'>(</span><a href="../../include/regex/regex.h.html#LN154"><span class='Ref_to_Const'>REG_ETOOBIG</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* If this state hasn't already got a donemap, create one */ 
</span>    <a href="regc_nfa.c.html#LN2505"><span class='Ref_To_Local'>donemap</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2501"><span class='Ref_to_Parameter'>curdonemap</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2505"><span class='Ref_To_Local'>donemap</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="regc_nfa.c.html#LN2505"><span class='Ref_To_Local'>donemap</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/regex/regcustom.h.html#LN61"><span class='Ref_to_Macro'>MALLOC</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2503"><span class='Ref_to_Parameter'>nstates</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>char</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2505"><span class='Ref_To_Local'>donemap</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="regc_nfa.c.html#LN39"><span class='Ref_to_Macro'>NERR</span></a><span class='Parentheses'>(</span><a href="../../include/regex/regex.h.html#LN148"><span class='Ref_to_Const'>REG_ESPACE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>return</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2502"><span class='Ref_to_Parameter'>outerdonemap</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * Not at outermost recursion level, so copy the outer level's 
             * donemap; this ensures that we see states in process of being 
             * visited at outer levels, or already merged into predecessor 
             * states, as ones we shouldn't traverse back to. 
             */ 
</span>            memcpy<span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2505"><span class='Ref_To_Local'>donemap</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN2502"><span class='Ref_to_Parameter'>outerdonemap</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN2503"><span class='Ref_to_Parameter'>nstates</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>char</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* At outermost level, only spredecessor is off-limits */ 
</span>            memset<span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2505"><span class='Ref_To_Local'>donemap</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN2503"><span class='Ref_to_Parameter'>nstates</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>char</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2499"><span class='Ref_to_Parameter'>spredecessor</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN299"><span class='Ref_to_Member'>no</span></a> <span class='Operator'>&LT; </span><a href="regc_nfa.c.html#LN2503"><span class='Ref_to_Parameter'>nstates</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="regc_nfa.c.html#LN2505"><span class='Ref_To_Local'>donemap</span></a><span class='Delimiter'>[</span><a href="regc_nfa.c.html#LN2499"><span class='Ref_to_Parameter'>spredecessor</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN299"><span class='Ref_to_Member'>no</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if donemap==NULL &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* Mark ssource as visited in the donemap */ 
</span>    <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2497"><span class='Ref_to_Parameter'>ssource</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN299"><span class='Ref_to_Member'>no</span></a> <span class='Operator'>&LT; </span><a href="regc_nfa.c.html#LN2503"><span class='Ref_to_Parameter'>nstates</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2505"><span class='Ref_To_Local'>donemap</span></a><span class='Delimiter'>[</span><a href="regc_nfa.c.html#LN2497"><span class='Ref_to_Parameter'>ssource</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN299"><span class='Ref_to_Member'>no</span></a><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN2505"><span class='Ref_To_Local'>donemap</span></a><span class='Delimiter'>[</span><a href="regc_nfa.c.html#LN2497"><span class='Ref_to_Parameter'>ssource</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN299"><span class='Ref_to_Member'>no</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * We proceed by first cloning all of ssource's outarcs, creating new 
     * clone states as needed but not doing more with them than that.  Then in 
     * a second pass, recurse to process the child clone states.  This allows 
     * us to have only one child clone state per reachable source state, even 
     * when there are multiple outarcs leading to the same state.  Also, when 
     * we do visit a child state, its set of inarcs is known exactly, which 
     * makes it safe to apply the constraint-is-already-checked optimization. 
     * Also, this ensures that we've merged all the states we can into the 
     * current clone before we recurse to any children, thus possibly saving 
     * them from making extra images of those states. 
     * 
     * While this function runs, child clone states of the current state are 
     * marked by setting their tmp fields to point to the original state they 
     * were cloned from.  This makes it possible to detect multiple outarcs 
     * leading to the same state, and also makes it easy to distinguish clone 
     * states from original states (which will have tmp == NULL). 
     */ 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2506"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2497"><span class='Ref_to_Parameter'>ssource</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN305"><span class='Ref_to_Member'>outs</span></a><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN2506"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL </span><span class='Operator'>&& !</span><a href="regc_nfa.c.html#LN38"><span class='Ref_to_Macro'>NISERR</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN2506"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2506"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN281"><span class='Ref_to_Member'>outchain</span></a><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span><a name="LN2570"></a>        <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>*</span><span class='Declare_Local'>sto</span> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2506"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN280"><span class='Ref_to_Member'>to</span></a><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * We do not consider cloning successor states that have no constraint 
         * outarcs; just link to them as-is.  They cannot be part of a 
         * constraint loop so there is no need to make copies.  In particular, 
         * this rule keeps us from trying to clone the post state, which would 
         * be a bad idea. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regcomp.c.html#LN164"><span class='Ref_to_Proto'>isconstraintarc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2506"><span class='Ref_To_Local'>a</span></a><span class='Parentheses'>) </span><span class='Operator'>&& </span><a href="regcomp.c.html#LN165"><span class='Ref_to_Proto'>hasconstraintout</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2570"><span class='Ref_To_Local'>sto</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span><a name="LN2581"></a>            <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>*</span><span class='Declare_Local'>prevclone</span><span class='Delimiter'>; 
</span><a name="LN2582"></a>            <span class='Keyword'>int</span>         <span class='Declare_Local'>canmerge</span><span class='Delimiter'>; 
</span><a name="LN2583"></a>            <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>a2</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * Back-link constraint arcs must not be followed.  Nor is there a 
             * need to revisit states previously merged into this clone. 
             */ 
</span>            <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2570"><span class='Ref_To_Local'>sto</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN299"><span class='Ref_to_Member'>no</span></a> <span class='Operator'>&LT; </span><a href="regc_nfa.c.html#LN2503"><span class='Ref_to_Parameter'>nstates</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2505"><span class='Ref_To_Local'>donemap</span></a><span class='Delimiter'>[</span><a href="regc_nfa.c.html#LN2570"><span class='Ref_To_Local'>sto</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN299"><span class='Ref_to_Member'>no</span></a><span class='Delimiter'>] </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * Check whether we already have a child clone state for this 
             * source state. 
             */ 
</span>            <a href="regc_nfa.c.html#LN2581"><span class='Ref_To_Local'>prevclone</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>            <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2583"><span class='Ref_To_Local'>a2</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2498"><span class='Ref_to_Parameter'>sclone</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN305"><span class='Ref_to_Member'>outs</span></a><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN2583"><span class='Ref_To_Local'>a2</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN2583"><span class='Ref_To_Local'>a2</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2583"><span class='Ref_To_Local'>a2</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN281"><span class='Ref_to_Member'>outchain</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2583"><span class='Ref_To_Local'>a2</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN280"><span class='Ref_to_Member'>to</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN307"><span class='Ref_to_Member'>tmp</span></a> <span class='Operator'>== </span><a href="regc_nfa.c.html#LN2570"><span class='Ref_To_Local'>sto</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <a href="regc_nfa.c.html#LN2581"><span class='Ref_To_Local'>prevclone</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2583"><span class='Ref_To_Local'>a2</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN280"><span class='Ref_to_Member'>to</span></a><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>            <span class='Delimiter'>} 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * If this arc is labeled the same as refarc, or the same as any 
             * arc we must have traversed to get to sclone, then no additional 
             * constraints need to be met to get to sto, so we should just 
             * merge its outarcs into sclone. 
             */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2500"><span class='Ref_to_Parameter'>refarc</span></a> <span class='Operator'>&& </span><a href="regc_nfa.c.html#LN2506"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN277"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>== </span><a href="regc_nfa.c.html#LN2500"><span class='Ref_to_Parameter'>refarc</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN277"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>&& </span><a href="regc_nfa.c.html#LN2506"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN278"><span class='Ref_to_Member'>co</span></a> <span class='Operator'>== </span><a href="regc_nfa.c.html#LN2500"><span class='Ref_to_Parameter'>refarc</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN278"><span class='Ref_to_Member'>co</span></a><span class='Parentheses'>) 
</span>                <a href="regc_nfa.c.html#LN2582"><span class='Ref_To_Local'>canmerge</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
            <span class='Delimiter'>{ 
</span><a name="LN2617"></a>                <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>*</span><span class='Declare_Local'>s</span><span class='Delimiter'>; 
</span> 
                <a href="regc_nfa.c.html#LN2582"><span class='Ref_To_Local'>canmerge</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>                <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2617"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2498"><span class='Ref_to_Parameter'>sclone</span></a><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN2617"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN303"><span class='Ref_to_Member'>ins</span></a><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN2617"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2617"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN303"><span class='Ref_to_Member'>ins</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN279"><span class='Ref_to_Member'>from</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2617"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN302"><span class='Ref_to_Member'>nins</span></a> <span class='Operator'>== </span><span class='Number'>1</span> <span class='Operator'>&& 
</span>                        <a href="regc_nfa.c.html#LN2506"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN277"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>== </span><a href="regc_nfa.c.html#LN2617"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN303"><span class='Ref_to_Member'>ins</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN277"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>&& </span><a href="regc_nfa.c.html#LN2506"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN278"><span class='Ref_to_Member'>co</span></a> <span class='Operator'>== </span><a href="regc_nfa.c.html#LN2617"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN303"><span class='Ref_to_Member'>ins</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN278"><span class='Ref_to_Member'>co</span></a><span class='Parentheses'>) 
</span>                    <span class='Delimiter'>{ 
</span>                        <a href="regc_nfa.c.html#LN2582"><span class='Ref_To_Local'>canmerge</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>} 
</span>            <span class='Delimiter'>} 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2582"><span class='Ref_To_Local'>canmerge</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* 
                 * We can merge into sclone.  If we previously made a child 
                 * clone state, drop it; there's no need to visit it.  (This 
                 * can happen if ssource has multiple pathways to sto, and we 
                 * only just now found one that is provably a no-op.) 
                 */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2581"><span class='Ref_To_Local'>prevclone</span></a><span class='Parentheses'>) 
</span>                    <a href="regcomp.c.html#LN123"><span class='Ref_to_Proto'>dropstate</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2496"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN2581"><span class='Ref_To_Local'>prevclone</span></a><span class='Parentheses'>)</span><span class='Delimiter'>;</span>  <span class='Comment_Single_Line'>/* kills our outarc, too */ 
</span> 
                <span class='Comment_Multi_Line'>/* Recurse to merge sto's outarcs into sclone */ 
</span>                <a href="regcomp.c.html#LN169"><span class='Ref_to_Proto'>clonesuccessorstates</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2496"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, 
</span>                                     <a href="regc_nfa.c.html#LN2570"><span class='Ref_To_Local'>sto</span></a><span class='Delimiter'>, 
</span>                                     <a href="regc_nfa.c.html#LN2498"><span class='Ref_to_Parameter'>sclone</span></a><span class='Delimiter'>, 
</span>                                     <a href="regc_nfa.c.html#LN2499"><span class='Ref_to_Parameter'>spredecessor</span></a><span class='Delimiter'>, 
</span>                                     <a href="regc_nfa.c.html#LN2500"><span class='Ref_to_Parameter'>refarc</span></a><span class='Delimiter'>, 
</span>                                     <a href="regc_nfa.c.html#LN2505"><span class='Ref_To_Local'>donemap</span></a><span class='Delimiter'>, 
</span>                                     <a href="regc_nfa.c.html#LN2502"><span class='Ref_to_Parameter'>outerdonemap</span></a><span class='Delimiter'>, 
</span>                                     <a href="regc_nfa.c.html#LN2503"><span class='Ref_to_Parameter'>nstates</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Comment_Multi_Line'>/* sto should now be marked as previously visited */ 
</span>                <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN38"><span class='Ref_to_Macro'>NISERR</span></a><span class='Parentheses'>() </span><span class='Operator'>|| </span><a href="regc_nfa.c.html#LN2505"><span class='Ref_To_Local'>donemap</span></a><span class='Delimiter'>[</span><a href="regc_nfa.c.html#LN2570"><span class='Ref_To_Local'>sto</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN299"><span class='Ref_to_Member'>no</span></a><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if canmerge &raquo; </span> 
            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2581"><span class='Ref_To_Local'>prevclone</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* 
                 * We already have a clone state for this successor, so just 
                 * make another arc to it. 
                 */ 
</span>                <a href="regcomp.c.html#LN133"><span class='Ref_to_Proto'>cparc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2496"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN2506"><span class='Ref_To_Local'>a</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN2498"><span class='Ref_to_Parameter'>sclone</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN2581"><span class='Ref_To_Local'>prevclone</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* 
                 * We need to create a new successor clone state. 
                 */ 
</span><a name="LN2667"></a>                <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>*</span><span class='Declare_Local'>stoclone</span><span class='Delimiter'>; 
</span> 
                <a href="regc_nfa.c.html#LN2667"><span class='Ref_To_Local'>stoclone</span></a> <span class='Operator'>= </span><a href="regcomp.c.html#LN121"><span class='Ref_to_Proto'>newstate</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2496"><span class='Ref_to_Parameter'>nfa</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2667"><span class='Ref_To_Local'>stoclone</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN38"><span class='Ref_to_Macro'>NISERR</span></a><span class='Parentheses'>())</span><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Comment_Multi_Line'>/* Mark it as to what it's a clone of */ 
</span>                <a href="regc_nfa.c.html#LN2667"><span class='Ref_To_Local'>stoclone</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN307"><span class='Ref_to_Member'>tmp</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2570"><span class='Ref_To_Local'>sto</span></a><span class='Delimiter'>; 
</span>                <span class='Comment_Multi_Line'>/* ... and add the outarc leading to it */ 
</span>                <a href="regcomp.c.html#LN133"><span class='Ref_to_Proto'>cparc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2496"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN2506"><span class='Ref_To_Local'>a</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN2498"><span class='Ref_to_Parameter'>sclone</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN2667"><span class='Ref_To_Local'>stoclone</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if isconstraintarc(a)&&h... &raquo; </span> 
        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * Non-constraint outarcs just get copied to sclone, as do outarcs 
             * leading to states with no constraint outarc. 
             */ 
</span>            <a href="regcomp.c.html#LN133"><span class='Ref_to_Proto'>cparc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2496"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN2506"><span class='Ref_To_Local'>a</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN2498"><span class='Ref_to_Parameter'>sclone</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN2570"><span class='Ref_To_Local'>sto</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for a=ssource-&GT;outs;a!=NU... &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* 
     * If we are at outer level for this clone state, recurse to all its child 
     * clone states, clearing their tmp fields as we go.  (If we're not 
     * outermost for sclone, leave this to be done by the outer call level.) 
     * Note that if we have multiple outarcs leading to the same clone state, 
     * it will only be recursed-to once. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2501"><span class='Ref_to_Parameter'>curdonemap</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2506"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2498"><span class='Ref_to_Parameter'>sclone</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN305"><span class='Ref_to_Member'>outs</span></a><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN2506"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL </span><span class='Operator'>&& !</span><a href="regc_nfa.c.html#LN38"><span class='Ref_to_Macro'>NISERR</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN2506"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2506"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN281"><span class='Ref_to_Member'>outchain</span></a><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span><a name="LN2702"></a>            <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>*</span><span class='Declare_Local'>stoclone</span> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2506"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN280"><span class='Ref_to_Member'>to</span></a><span class='Delimiter'>; 
</span><a name="LN2703"></a>            <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>*</span><span class='Declare_Local'>sto</span> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2702"><span class='Ref_To_Local'>stoclone</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN307"><span class='Ref_to_Member'>tmp</span></a><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2703"><span class='Ref_To_Local'>sto</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <a href="regc_nfa.c.html#LN2702"><span class='Ref_To_Local'>stoclone</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN307"><span class='Ref_to_Member'>tmp</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>                <a href="regcomp.c.html#LN169"><span class='Ref_to_Proto'>clonesuccessorstates</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2496"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, 
</span>                                     <a href="regc_nfa.c.html#LN2703"><span class='Ref_To_Local'>sto</span></a><span class='Delimiter'>, 
</span>                                     <a href="regc_nfa.c.html#LN2702"><span class='Ref_To_Local'>stoclone</span></a><span class='Delimiter'>, 
</span>                                     <a href="regc_nfa.c.html#LN2499"><span class='Ref_to_Parameter'>spredecessor</span></a><span class='Delimiter'>, 
</span>                                     <a href="regc_nfa.c.html#LN2500"><span class='Ref_to_Parameter'>refarc</span></a><span class='Delimiter'>, 
</span>                                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                                     <a href="regc_nfa.c.html#LN2505"><span class='Ref_To_Local'>donemap</span></a><span class='Delimiter'>, 
</span>                                     <a href="regc_nfa.c.html#LN2503"><span class='Ref_to_Parameter'>nstates</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Comment_Multi_Line'>/* Don't forget to free sclone's donemap when done with it */ 
</span>        <a href="../../common/unicode_norm.c.html#LN25"><span class='Ref_to_Macro'>FREE</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2505"><span class='Ref_To_Local'>donemap</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if curdonemap==NULL &raquo; </span> 
<span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end clonesuccessorstates &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * cleanup - clean up NFA after optimizations 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN2728"></a><span class='Declare_Function'>cleanup</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="regc_nfa.c.html#LN2728"><span class='Ref_to_Parameter'>nfa</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>nfa</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2730"></a>    <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>*</span><span class='Declare_Local'>s</span><span class='Delimiter'>; 
</span><a name="LN2731"></a>    <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>*</span><span class='Declare_Local'>nexts</span><span class='Delimiter'>; 
</span><a name="LN2732"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>n</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN38"><span class='Ref_to_Macro'>NISERR</span></a><span class='Parentheses'>())</span> 
        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* clear out unreachable or dead-end states */ 
</span>    <span class='Comment_Multi_Line'>/* use pre to mark reachable, then post to mark can-reach-post */ 
</span>    <a href="regcomp.c.html#LN173"><span class='Ref_to_Proto'>markreachable</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2728"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN2728"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN316"><span class='Ref_to_Member'>pre</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN2728"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN316"><span class='Ref_to_Member'>pre</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="regcomp.c.html#LN174"><span class='Ref_to_Proto'>markcanreach</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2728"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN2728"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN319"><span class='Ref_to_Member'>post</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN2728"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN316"><span class='Ref_to_Member'>pre</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN2728"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN319"><span class='Ref_to_Member'>post</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2730"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2728"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN321"><span class='Ref_to_Member'>states</span></a><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN2730"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL </span><span class='Operator'>&& !</span><a href="regc_nfa.c.html#LN38"><span class='Ref_to_Macro'>NISERR</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN2730"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2731"><span class='Ref_To_Local'>nexts</span></a><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="regc_nfa.c.html#LN2731"><span class='Ref_To_Local'>nexts</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2730"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN308"><span class='Ref_to_Member'>next</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2730"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN307"><span class='Ref_to_Member'>tmp</span></a> <span class='Operator'>!= </span><a href="regc_nfa.c.html#LN2728"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN319"><span class='Ref_to_Member'>post</span></a> <span class='Operator'>&& !</span><a href="regc_nfa.c.html#LN2730"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN301"><span class='Ref_to_Member'>flag</span></a><span class='Parentheses'>) 
</span>            <a href="regcomp.c.html#LN123"><span class='Ref_to_Proto'>dropstate</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2728"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN2730"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN38"><span class='Ref_to_Macro'>NISERR</span></a><span class='Parentheses'>() </span><span class='Operator'>|| </span><a href="regc_nfa.c.html#LN2728"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN319"><span class='Ref_to_Member'>post</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN302"><span class='Ref_to_Member'>nins</span></a> <span class='Operator'>== </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="regc_nfa.c.html#LN2728"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN319"><span class='Ref_to_Member'>post</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN307"><span class='Ref_to_Member'>tmp</span></a> <span class='Operator'>== </span><a href="regc_nfa.c.html#LN2728"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN319"><span class='Ref_to_Member'>post</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="regcomp.c.html#LN148"><span class='Ref_to_Proto'>cleartraverse</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2728"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN2728"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN316"><span class='Ref_to_Member'>pre</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN38"><span class='Ref_to_Macro'>NISERR</span></a><span class='Parentheses'>() </span><span class='Operator'>|| </span><a href="regc_nfa.c.html#LN2728"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN319"><span class='Ref_to_Member'>post</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN302"><span class='Ref_to_Member'>nins</span></a> <span class='Operator'>== </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="regc_nfa.c.html#LN2728"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN319"><span class='Ref_to_Member'>post</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN307"><span class='Ref_to_Member'>tmp</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* the nins==0 (final unreachable) case will be caught later */ 
</span> 
    <span class='Comment_Multi_Line'>/* renumber surviving states */ 
</span>    <a href="regc_nfa.c.html#LN2732"><span class='Ref_To_Local'>n</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2730"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2728"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN321"><span class='Ref_to_Member'>states</span></a><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN2730"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN2730"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2730"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN308"><span class='Ref_to_Member'>next</span></a><span class='Parentheses'>) 
</span>        <a href="regc_nfa.c.html#LN2730"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN299"><span class='Ref_to_Member'>no</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2732"><span class='Ref_To_Local'>n</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN2728"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN320"><span class='Ref_to_Member'>nstates</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2732"><span class='Ref_To_Local'>n</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end cleanup &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * markreachable - recursive marking of reachable states 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN2763"></a><span class='Declare_Function'>markreachable</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="regc_nfa.c.html#LN2763"><span class='Ref_to_Parameter'>nfa</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>nfa</span><span class='Delimiter'>, 
</span><a name="LN2764"></a>              <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>s</span><span class='Delimiter'>, 
</span><a name="LN2765"></a>              <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>okay</span><span class='Delimiter'>,</span>      <span class='Comment_Single_Line'>/* consider only states with this mark */ 
</span><a name="LN2766"></a>              <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>mark</span><span class='Parentheses'>)</span>      <span class='Comment_Single_Line'>/* the value to mark with */ 
</span><span class='Delimiter'>{ 
</span><a name="LN2768"></a>    <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>a</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Since this is recursive, it could be driven to stack overflow */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/regex/regguts.h.html#LN454"><span class='Ref_to_Macro'>STACK_TOO_DEEP</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2763"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN327"><span class='Ref_to_Member'>v</span></a><span class='Operator'>-&GT;</span><a href="regexec.c.html#LN104"><span class='Ref_to_Member'>re</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="regc_nfa.c.html#LN39"><span class='Ref_to_Macro'>NERR</span></a><span class='Parentheses'>(</span><a href="../../include/regex/regex.h.html#LN154"><span class='Ref_to_Const'>REG_ETOOBIG</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2764"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN307"><span class='Ref_to_Member'>tmp</span></a> <span class='Operator'>!= </span><a href="regc_nfa.c.html#LN2765"><span class='Ref_to_Parameter'>okay</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN2764"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN307"><span class='Ref_to_Member'>tmp</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2766"><span class='Ref_to_Parameter'>mark</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2768"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2764"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN305"><span class='Ref_to_Member'>outs</span></a><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN2768"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN2768"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2768"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN281"><span class='Ref_to_Member'>outchain</span></a><span class='Parentheses'>) 
</span>        <a href="regcomp.c.html#LN173"><span class='Ref_to_Proto'>markreachable</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2763"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN2768"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN280"><span class='Ref_to_Member'>to</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN2765"><span class='Ref_to_Parameter'>okay</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN2766"><span class='Ref_to_Parameter'>mark</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end markreachable &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * markcanreach - recursive marking of states which can reach here 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN2789"></a><span class='Declare_Function'>markcanreach</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="regc_nfa.c.html#LN2789"><span class='Ref_to_Parameter'>nfa</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>nfa</span><span class='Delimiter'>, 
</span><a name="LN2790"></a>             <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>s</span><span class='Delimiter'>, 
</span><a name="LN2791"></a>             <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>okay</span><span class='Delimiter'>,</span>       <span class='Comment_Single_Line'>/* consider only states with this mark */ 
</span><a name="LN2792"></a>             <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>mark</span><span class='Parentheses'>)</span>       <span class='Comment_Single_Line'>/* the value to mark with */ 
</span><span class='Delimiter'>{ 
</span><a name="LN2794"></a>    <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>a</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Since this is recursive, it could be driven to stack overflow */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/regex/regguts.h.html#LN454"><span class='Ref_to_Macro'>STACK_TOO_DEEP</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2789"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN327"><span class='Ref_to_Member'>v</span></a><span class='Operator'>-&GT;</span><a href="regexec.c.html#LN104"><span class='Ref_to_Member'>re</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="regc_nfa.c.html#LN39"><span class='Ref_to_Macro'>NERR</span></a><span class='Parentheses'>(</span><a href="../../include/regex/regex.h.html#LN154"><span class='Ref_to_Const'>REG_ETOOBIG</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2790"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN307"><span class='Ref_to_Member'>tmp</span></a> <span class='Operator'>!= </span><a href="regc_nfa.c.html#LN2791"><span class='Ref_to_Parameter'>okay</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN2790"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN307"><span class='Ref_to_Member'>tmp</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2792"><span class='Ref_to_Parameter'>mark</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2794"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2790"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN303"><span class='Ref_to_Member'>ins</span></a><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN2794"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN2794"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2794"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN284"><span class='Ref_to_Member'>inchain</span></a><span class='Parentheses'>) 
</span>        <a href="regcomp.c.html#LN174"><span class='Ref_to_Proto'>markcanreach</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2789"><span class='Ref_to_Parameter'>nfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN2794"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN279"><span class='Ref_to_Member'>from</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN2791"><span class='Ref_to_Parameter'>okay</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN2792"><span class='Ref_to_Parameter'>mark</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end markcanreach &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * analyze - ascertain potentially-useful facts about an optimized NFA 
 */ 
</span><span class='Keyword'>static long</span>                     <span class='Comment_Single_Line'>/* re_info bits to be ORed in */ 
</span><a name="LN2815"></a><span class='Declare_Function'>analyze</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="regc_nfa.c.html#LN2815"><span class='Ref_to_Parameter'>nfa</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>nfa</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2817"></a>    <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>a</span><span class='Delimiter'>; 
</span><a name="LN2818"></a>    <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>aa</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN38"><span class='Ref_to_Macro'>NISERR</span></a><span class='Parentheses'>())</span> 
        <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2815"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN316"><span class='Ref_to_Member'>pre</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN305"><span class='Ref_to_Member'>outs</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <a href="../../include/regex/regex.h.html#LN71"><span class='Ref_to_Const'>REG_UIMPOSSIBLE</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2817"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2815"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN316"><span class='Ref_to_Member'>pre</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN305"><span class='Ref_to_Member'>outs</span></a><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN2817"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN2817"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2817"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN281"><span class='Ref_to_Member'>outchain</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2818"><span class='Ref_To_Local'>aa</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2817"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN280"><span class='Ref_to_Member'>to</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN305"><span class='Ref_to_Member'>outs</span></a><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN2818"><span class='Ref_To_Local'>aa</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN2818"><span class='Ref_To_Local'>aa</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2818"><span class='Ref_To_Local'>aa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN281"><span class='Ref_to_Member'>outchain</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2818"><span class='Ref_To_Local'>aa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN280"><span class='Ref_to_Member'>to</span></a> <span class='Operator'>== </span><a href="regc_nfa.c.html#LN2815"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN319"><span class='Ref_to_Member'>post</span></a><span class='Parentheses'>) 
</span>                <span class='Control'>return</span> <a href="../../include/regex/regex.h.html#LN70"><span class='Ref_to_Const'>REG_UEMPTYMATCH</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * compact - construct the compact representation of an NFA 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN2836"></a><span class='Declare_Function'>compact</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="regc_nfa.c.html#LN2836"><span class='Ref_to_Parameter'>nfa</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>nfa</span><span class='Delimiter'>, 
</span><a name="LN2837"></a>        <span class='Control'>struct</span> <a href="regc_nfa.c.html#LN2837"><span class='Ref_to_Parameter'>cnfa</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>cnfa</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2839"></a>    <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>*</span><span class='Declare_Local'>s</span><span class='Delimiter'>; 
</span><a name="LN2840"></a>    <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>a</span><span class='Delimiter'>; 
</span><a name="LN2841"></a>    size_t      <span class='Declare_Local'>nstates</span><span class='Delimiter'>; 
</span><a name="LN2842"></a>    size_t      <span class='Declare_Local'>narcs</span><span class='Delimiter'>; 
</span><a name="LN2843"></a>    <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN347"><span class='Ref_to_Struct'>carc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>ca</span><span class='Delimiter'>; 
</span><a name="LN2844"></a>    <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN347"><span class='Ref_to_Struct'>carc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>first</span><span class='Delimiter'>; 
</span> 
    <span class='Debug'>assert</span><span class='Parentheses'>(</span><span class='Operator'>!</span><a href="regc_nfa.c.html#LN38"><span class='Ref_to_Macro'>NISERR</span></a><span class='Parentheses'>())</span><span class='Delimiter'>; 
</span> 
    <a href="regc_nfa.c.html#LN2841"><span class='Ref_To_Local'>nstates</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN2842"><span class='Ref_To_Local'>narcs</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2839"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2836"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN321"><span class='Ref_to_Member'>states</span></a><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN2839"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN2839"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2839"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN308"><span class='Ref_to_Member'>next</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="regc_nfa.c.html#LN2841"><span class='Ref_To_Local'>nstates</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <a href="regc_nfa.c.html#LN2842"><span class='Ref_To_Local'>narcs</span></a> <span class='Operator'>+= </span><a href="regc_nfa.c.html#LN2839"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN304"><span class='Ref_to_Member'>nouts</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>;</span>  <span class='Comment_Single_Line'>/* need one extra for endmarker */ 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="regc_nfa.c.html#LN2837"><span class='Ref_to_Parameter'>cnfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN363"><span class='Ref_to_Member'>stflags</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/regex/regcustom.h.html#LN61"><span class='Ref_to_Macro'>MALLOC</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2841"><span class='Ref_To_Local'>nstates</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>char</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN2837"><span class='Ref_to_Parameter'>cnfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN365"><span class='Ref_to_Member'>states</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN347"><span class='Ref_to_Struct'>carc</span></a> <span class='Operator'>**</span><span class='Parentheses'>) </span><a href="../../include/regex/regcustom.h.html#LN61"><span class='Ref_to_Macro'>MALLOC</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2841"><span class='Ref_To_Local'>nstates</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN347"><span class='Ref_to_Struct'>carc</span></a> <span class='Operator'>*</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN2837"><span class='Ref_to_Parameter'>cnfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN367"><span class='Ref_to_Member'>arcs</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN347"><span class='Ref_to_Struct'>carc</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/regex/regcustom.h.html#LN61"><span class='Ref_to_Macro'>MALLOC</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2842"><span class='Ref_To_Local'>narcs</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN347"><span class='Ref_to_Struct'>carc</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2837"><span class='Ref_to_Parameter'>cnfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN363"><span class='Ref_to_Member'>stflags</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL </span><span class='Operator'>|| </span><a href="regc_nfa.c.html#LN2837"><span class='Ref_to_Parameter'>cnfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN365"><span class='Ref_to_Member'>states</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL </span><span class='Operator'>|| </span><a href="regc_nfa.c.html#LN2837"><span class='Ref_to_Parameter'>cnfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN367"><span class='Ref_to_Member'>arcs</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2837"><span class='Ref_to_Parameter'>cnfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN363"><span class='Ref_to_Member'>stflags</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <a href="../../common/unicode_norm.c.html#LN25"><span class='Ref_to_Macro'>FREE</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2837"><span class='Ref_to_Parameter'>cnfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN363"><span class='Ref_to_Member'>stflags</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2837"><span class='Ref_to_Parameter'>cnfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN365"><span class='Ref_to_Member'>states</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <a href="../../common/unicode_norm.c.html#LN25"><span class='Ref_to_Macro'>FREE</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2837"><span class='Ref_to_Parameter'>cnfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN365"><span class='Ref_to_Member'>states</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2837"><span class='Ref_to_Parameter'>cnfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN367"><span class='Ref_to_Member'>arcs</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <a href="../../common/unicode_norm.c.html#LN25"><span class='Ref_to_Macro'>FREE</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2837"><span class='Ref_to_Parameter'>cnfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN367"><span class='Ref_to_Member'>arcs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="regc_nfa.c.html#LN39"><span class='Ref_to_Macro'>NERR</span></a><span class='Parentheses'>(</span><a href="../../include/regex/regex.h.html#LN148"><span class='Ref_to_Const'>REG_ESPACE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="regc_nfa.c.html#LN2837"><span class='Ref_to_Parameter'>cnfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN355"><span class='Ref_to_Member'>nstates</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2841"><span class='Ref_To_Local'>nstates</span></a><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN2837"><span class='Ref_to_Parameter'>cnfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN359"><span class='Ref_to_Member'>pre</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2836"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN316"><span class='Ref_to_Member'>pre</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN299"><span class='Ref_to_Member'>no</span></a><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN2837"><span class='Ref_to_Parameter'>cnfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN360"><span class='Ref_to_Member'>post</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2836"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN319"><span class='Ref_to_Member'>post</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN299"><span class='Ref_to_Member'>no</span></a><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN2837"><span class='Ref_to_Parameter'>cnfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN361"><span class='Ref_to_Member'>bos</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="regc_nfa.c.html#LN2836"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN325"><span class='Ref_to_Member'>bos</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]; 
</span>    <a href="regc_nfa.c.html#LN2837"><span class='Ref_to_Parameter'>cnfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN361"><span class='Ref_to_Member'>bos</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="regc_nfa.c.html#LN2836"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN325"><span class='Ref_to_Member'>bos</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]; 
</span>    <a href="regc_nfa.c.html#LN2837"><span class='Ref_to_Parameter'>cnfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN362"><span class='Ref_to_Member'>eos</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="regc_nfa.c.html#LN2836"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN326"><span class='Ref_to_Member'>eos</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]; 
</span>    <a href="regc_nfa.c.html#LN2837"><span class='Ref_to_Parameter'>cnfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN362"><span class='Ref_to_Member'>eos</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="regc_nfa.c.html#LN2836"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN326"><span class='Ref_to_Member'>eos</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]; 
</span>    <a href="regc_nfa.c.html#LN2837"><span class='Ref_to_Parameter'>cnfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN356"><span class='Ref_to_Member'>ncolors</span></a> <span class='Operator'>= </span><a href="regcomp.c.html#LN95"><span class='Ref_to_Proto'>maxcolor</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2836"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN324"><span class='Ref_to_Member'>cm</span></a><span class='Parentheses'>) </span><span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN2837"><span class='Ref_to_Parameter'>cnfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN357"><span class='Ref_to_Member'>flags</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <a href="regc_nfa.c.html#LN2843"><span class='Ref_To_Local'>ca</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2837"><span class='Ref_to_Parameter'>cnfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN367"><span class='Ref_to_Member'>arcs</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2839"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2836"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN321"><span class='Ref_to_Member'>states</span></a><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN2839"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN2839"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2839"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN308"><span class='Ref_to_Member'>next</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Debug'>assert</span><span class='Parentheses'>((</span>size_t<span class='Parentheses'>) </span><a href="regc_nfa.c.html#LN2839"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN299"><span class='Ref_to_Member'>no</span></a> <span class='Operator'>&LT; </span><a href="regc_nfa.c.html#LN2841"><span class='Ref_To_Local'>nstates</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="regc_nfa.c.html#LN2837"><span class='Ref_to_Parameter'>cnfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN363"><span class='Ref_to_Member'>stflags</span></a><span class='Delimiter'>[</span><a href="regc_nfa.c.html#LN2839"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN299"><span class='Ref_to_Member'>no</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <a href="regc_nfa.c.html#LN2837"><span class='Ref_to_Parameter'>cnfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN365"><span class='Ref_to_Member'>states</span></a><span class='Delimiter'>[</span><a href="regc_nfa.c.html#LN2839"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN299"><span class='Ref_to_Member'>no</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="regc_nfa.c.html#LN2843"><span class='Ref_To_Local'>ca</span></a><span class='Delimiter'>; 
</span>        <a href="regc_nfa.c.html#LN2844"><span class='Ref_To_Local'>first</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2843"><span class='Ref_To_Local'>ca</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2840"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2839"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN305"><span class='Ref_to_Member'>outs</span></a><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN2840"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN2840"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2840"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN281"><span class='Ref_to_Member'>outchain</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2840"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN277"><span class='Ref_to_Member'>type</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Control'>case</span> <a href="regcomp.c.html#LN275"><span class='Ref_to_Const'>PLAIN</span></a><span class='Operator'>: 
</span>                    <a href="regc_nfa.c.html#LN2843"><span class='Ref_To_Local'>ca</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN349"><span class='Ref_to_Member'>co</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2840"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN278"><span class='Ref_to_Member'>co</span></a><span class='Delimiter'>; 
</span>                    <a href="regc_nfa.c.html#LN2843"><span class='Ref_To_Local'>ca</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN350"><span class='Ref_to_Member'>to</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2840"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN280"><span class='Ref_to_Member'>to</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN299"><span class='Ref_to_Member'>no</span></a><span class='Delimiter'>; 
</span>                    <a href="regc_nfa.c.html#LN2843"><span class='Ref_To_Local'>ca</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Control'>case</span> <a href="regcomp.c.html#LN283"><span class='Ref_to_Const'>LACON</span></a><span class='Operator'>: 
</span>                    <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2839"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN299"><span class='Ref_to_Member'>no</span></a> <span class='Operator'>!= </span><a href="regc_nfa.c.html#LN2837"><span class='Ref_to_Parameter'>cnfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN359"><span class='Ref_to_Member'>pre</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="regc_nfa.c.html#LN2843"><span class='Ref_To_Local'>ca</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN349"><span class='Ref_to_Member'>co</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/regex/regguts.h.html#LN133"><span class='Ref_to_Typedef'>color</span></a><span class='Parentheses'>) (</span><a href="regc_nfa.c.html#LN2837"><span class='Ref_to_Parameter'>cnfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN356"><span class='Ref_to_Member'>ncolors</span></a> <span class='Operator'>+ </span><a href="regc_nfa.c.html#LN2840"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN278"><span class='Ref_to_Member'>co</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="regc_nfa.c.html#LN2843"><span class='Ref_To_Local'>ca</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN350"><span class='Ref_to_Member'>to</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2840"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN280"><span class='Ref_to_Member'>to</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN299"><span class='Ref_to_Member'>no</span></a><span class='Delimiter'>; 
</span>                    <a href="regc_nfa.c.html#LN2843"><span class='Ref_To_Local'>ca</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>                    <a href="regc_nfa.c.html#LN2837"><span class='Ref_to_Parameter'>cnfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN357"><span class='Ref_to_Member'>flags</span></a> <span class='Operator'>|= </span><a href="../../include/regex/regguts.h.html#LN358"><span class='Ref_to_Const'>HASLACONS</span></a><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Control'>default</span><span class='Operator'>: 
</span>                    <a href="regc_nfa.c.html#LN39"><span class='Ref_to_Macro'>NERR</span></a><span class='Parentheses'>(</span><a href="../../include/regex/regex.h.html#LN150"><span class='Ref_to_Const'>REG_ASSERT</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <a href="regcomp.c.html#LN177"><span class='Ref_to_Proto'>carcsort</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2844"><span class='Ref_To_Local'>first</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN2843"><span class='Ref_To_Local'>ca</span></a> <span class='Operator'>- </span><a href="regc_nfa.c.html#LN2844"><span class='Ref_To_Local'>first</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="regc_nfa.c.html#LN2843"><span class='Ref_To_Local'>ca</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN349"><span class='Ref_to_Member'>co</span></a> <span class='Operator'>= </span><a href="../../include/regex/regguts.h.html#LN136"><span class='Ref_to_Const'>COLORLESS</span></a><span class='Delimiter'>; 
</span>        <a href="regc_nfa.c.html#LN2843"><span class='Ref_To_Local'>ca</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN350"><span class='Ref_to_Member'>to</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <a href="regc_nfa.c.html#LN2843"><span class='Ref_To_Local'>ca</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for s=nfa-&GT;states;s!=NULL... &raquo; </span> 
    <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2843"><span class='Ref_To_Local'>ca</span></a> <span class='Operator'>== &</span><a href="regc_nfa.c.html#LN2837"><span class='Ref_to_Parameter'>cnfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN367"><span class='Ref_to_Member'>arcs</span></a><span class='Delimiter'>[</span><a href="regc_nfa.c.html#LN2842"><span class='Ref_To_Local'>narcs</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2837"><span class='Ref_to_Parameter'>cnfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN355"><span class='Ref_to_Member'>nstates</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* mark no-progress states */ 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2840"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2836"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN316"><span class='Ref_to_Member'>pre</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN305"><span class='Ref_to_Member'>outs</span></a><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN2840"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN2840"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2840"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN281"><span class='Ref_to_Member'>outchain</span></a><span class='Parentheses'>) 
</span>        <a href="regc_nfa.c.html#LN2837"><span class='Ref_to_Parameter'>cnfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN363"><span class='Ref_to_Member'>stflags</span></a><span class='Delimiter'>[</span><a href="regc_nfa.c.html#LN2840"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN280"><span class='Ref_to_Member'>to</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN299"><span class='Ref_to_Member'>no</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="../../include/regex/regguts.h.html#LN364"><span class='Ref_to_Const'>CNFA_NOPROGRESS</span></a><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN2837"><span class='Ref_to_Parameter'>cnfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN363"><span class='Ref_to_Member'>stflags</span></a><span class='Delimiter'>[</span><a href="regc_nfa.c.html#LN2836"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN316"><span class='Ref_to_Member'>pre</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN299"><span class='Ref_to_Member'>no</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="../../include/regex/regguts.h.html#LN364"><span class='Ref_to_Const'>CNFA_NOPROGRESS</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end compact &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * carcsort - sort compacted-NFA arcs by color 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN2924"></a><span class='Declare_Function'>carcsort</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN347"><span class='Ref_to_Struct'>carc</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>first</span><span class='Delimiter'>, </span>size_t <span class='Declare_Parameter'>n</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2924"><span class='Ref_to_Parameter'>n</span></a> <span class='Operator'>&GT; </span><span class='Number'>1</span><span class='Parentheses'>) 
</span>        <a href="../../include/port.h.html#LN439"><span class='Ref_to_Macro'>qsort</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2924"><span class='Ref_to_Parameter'>first</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN2924"><span class='Ref_to_Parameter'>n</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN347"><span class='Ref_to_Struct'>carc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="regcomp.c.html#LN178"><span class='Ref_to_Proto'>carc_cmp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>static int 
</span><a name="LN2931"></a><span class='Declare_Function'>carc_cmp</span><span class='Parentheses'>(</span><span class='Keyword'>const void </span><span class='Operator'>*</span><span class='Declare_Parameter'>a</span><span class='Delimiter'>, </span><span class='Keyword'>const void </span><span class='Operator'>*</span><span class='Declare_Parameter'>b</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2933"></a>    <span class='Keyword'>const </span><span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN347"><span class='Ref_to_Struct'>carc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>aa</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>const </span><span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN347"><span class='Ref_to_Struct'>carc</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="regc_nfa.c.html#LN2931"><span class='Ref_to_Parameter'>a</span></a><span class='Delimiter'>; 
</span><a name="LN2934"></a>    <span class='Keyword'>const </span><span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN347"><span class='Ref_to_Struct'>carc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>bb</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>const </span><span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN347"><span class='Ref_to_Struct'>carc</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="regc_nfa.c.html#LN2931"><span class='Ref_to_Parameter'>b</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2933"><span class='Ref_To_Local'>aa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN349"><span class='Ref_to_Member'>co</span></a> <span class='Operator'>&LT; </span><a href="regc_nfa.c.html#LN2934"><span class='Ref_To_Local'>bb</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN349"><span class='Ref_to_Member'>co</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2933"><span class='Ref_To_Local'>aa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN349"><span class='Ref_to_Member'>co</span></a> <span class='Operator'>&GT; </span><a href="regc_nfa.c.html#LN2934"><span class='Ref_To_Local'>bb</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN349"><span class='Ref_to_Member'>co</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Operator'>+</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2933"><span class='Ref_To_Local'>aa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN350"><span class='Ref_to_Member'>to</span></a> <span class='Operator'>&LT; </span><a href="regc_nfa.c.html#LN2934"><span class='Ref_To_Local'>bb</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN350"><span class='Ref_to_Member'>to</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2933"><span class='Ref_To_Local'>aa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN350"><span class='Ref_to_Member'>to</span></a> <span class='Operator'>&GT; </span><a href="regc_nfa.c.html#LN2934"><span class='Ref_To_Local'>bb</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN350"><span class='Ref_to_Member'>to</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Operator'>+</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * freecnfa - free a compacted NFA 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN2951"></a><span class='Declare_Function'>freecnfa</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="regc_nfa.c.html#LN2951"><span class='Ref_to_Parameter'>cnfa</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>cnfa</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2951"><span class='Ref_to_Parameter'>cnfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN355"><span class='Ref_to_Member'>nstates</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; </span><span class='Comment_Single_Line'>/* not empty already */ 
</span>    <a href="regc_nfa.c.html#LN2951"><span class='Ref_to_Parameter'>cnfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN355"><span class='Ref_to_Member'>nstates</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="../../common/unicode_norm.c.html#LN25"><span class='Ref_to_Macro'>FREE</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2951"><span class='Ref_to_Parameter'>cnfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN363"><span class='Ref_to_Member'>stflags</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../common/unicode_norm.c.html#LN25"><span class='Ref_to_Macro'>FREE</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2951"><span class='Ref_to_Parameter'>cnfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN365"><span class='Ref_to_Member'>states</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../common/unicode_norm.c.html#LN25"><span class='Ref_to_Macro'>FREE</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2951"><span class='Ref_to_Parameter'>cnfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN367"><span class='Ref_to_Member'>arcs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * dumpnfa - dump an NFA in human-readable form 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN2964"></a><span class='Declare_Function'>dumpnfa</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="regc_nfa.c.html#LN2964"><span class='Ref_to_Parameter'>nfa</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>nfa</span><span class='Delimiter'>, 
</span><a name="LN2965"></a>        FILE <span class='Operator'>*</span><span class='Declare_Parameter'>f</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><span class='Directive'>#ifdef</span> REG_DEBUG 
<a name="LN2968"></a>    <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>*</span><span class='Declare_Local'>s</span><span class='Delimiter'>; 
</span><a name="LN2969"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>nstates</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN2970"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>narcs</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <a href="../../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2965"><span class='Ref_to_Parameter'>f</span></a><span class='Delimiter'>, </span><span class='String'>"pre %d, post %d"</span><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN2964"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN316"><span class='Ref_to_Member'>pre</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN299"><span class='Ref_to_Member'>no</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN2964"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN319"><span class='Ref_to_Member'>post</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN299"><span class='Ref_to_Member'>no</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2964"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN325"><span class='Ref_to_Member'>bos</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>!= </span><a href="../../include/regex/regguts.h.html#LN136"><span class='Ref_to_Const'>COLORLESS</span></a><span class='Parentheses'>) 
</span>        <a href="../../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2965"><span class='Ref_to_Parameter'>f</span></a><span class='Delimiter'>, </span><span class='String'>", bos [%ld]"</span><span class='Delimiter'>, </span><span class='Parentheses'>(</span><span class='Keyword'>long</span><span class='Parentheses'>) </span><a href="regc_nfa.c.html#LN2964"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN325"><span class='Ref_to_Member'>bos</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2964"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN325"><span class='Ref_to_Member'>bos</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>!= </span><a href="../../include/regex/regguts.h.html#LN136"><span class='Ref_to_Const'>COLORLESS</span></a><span class='Parentheses'>) 
</span>        <a href="../../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2965"><span class='Ref_to_Parameter'>f</span></a><span class='Delimiter'>, </span><span class='String'>", bol [%ld]"</span><span class='Delimiter'>, </span><span class='Parentheses'>(</span><span class='Keyword'>long</span><span class='Parentheses'>) </span><a href="regc_nfa.c.html#LN2964"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN325"><span class='Ref_to_Member'>bos</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2964"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN326"><span class='Ref_to_Member'>eos</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>!= </span><a href="../../include/regex/regguts.h.html#LN136"><span class='Ref_to_Const'>COLORLESS</span></a><span class='Parentheses'>) 
</span>        <a href="../../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2965"><span class='Ref_to_Parameter'>f</span></a><span class='Delimiter'>, </span><span class='String'>", eos [%ld]"</span><span class='Delimiter'>, </span><span class='Parentheses'>(</span><span class='Keyword'>long</span><span class='Parentheses'>) </span><a href="regc_nfa.c.html#LN2964"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN326"><span class='Ref_to_Member'>eos</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2964"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN326"><span class='Ref_to_Member'>eos</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>!= </span><a href="../../include/regex/regguts.h.html#LN136"><span class='Ref_to_Const'>COLORLESS</span></a><span class='Parentheses'>) 
</span>        <a href="../../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2965"><span class='Ref_to_Parameter'>f</span></a><span class='Delimiter'>, </span><span class='String'>", eol [%ld]"</span><span class='Delimiter'>, </span><span class='Parentheses'>(</span><span class='Keyword'>long</span><span class='Parentheses'>) </span><a href="regc_nfa.c.html#LN2964"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN326"><span class='Ref_to_Member'>eos</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2965"><span class='Ref_to_Parameter'>f</span></a><span class='Delimiter'>, </span><span class='String'>"\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2968"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2964"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN321"><span class='Ref_to_Member'>states</span></a><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN2968"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN2968"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN2968"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN308"><span class='Ref_to_Member'>next</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="regcomp.c.html#LN183"><span class='Ref_to_Proto'>dumpstate</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2968"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN2965"><span class='Ref_to_Parameter'>f</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="regc_nfa.c.html#LN2969"><span class='Ref_To_Local'>nstates</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <a href="regc_nfa.c.html#LN2970"><span class='Ref_To_Local'>narcs</span></a> <span class='Operator'>+= </span><a href="regc_nfa.c.html#LN2968"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN304"><span class='Ref_to_Member'>nouts</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="../../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2965"><span class='Ref_to_Parameter'>f</span></a><span class='Delimiter'>, </span><span class='String'>"total of %d states, %d arcs\n"</span><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN2969"><span class='Ref_To_Local'>nstates</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN2970"><span class='Ref_To_Local'>narcs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2964"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN328"><span class='Ref_to_Member'>parent</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="regcomp.c.html#LN115"><span class='Ref_to_Proto'>dumpcolors</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2964"><span class='Ref_to_Parameter'>nfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN324"><span class='Ref_to_Member'>cm</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN2965"><span class='Ref_to_Parameter'>f</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    fflush<span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN2965"><span class='Ref_to_Parameter'>f</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
<span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end dumpnfa &raquo; </span> 
 
<span class='Directive'>#ifdef</span> REG_DEBUG                <span class='Comment_Single_Line'>/* subordinates of dumpnfa */ 
</span> 
<span class='Comment_Multi_Line'>/* 
 * dumpstate - dump an NFA state in human-readable form 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN3001"></a><span class='Declare_Function'>dumpstate</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>s</span><span class='Delimiter'>, 
</span><a name="LN3002"></a>          FILE <span class='Operator'>*</span><span class='Declare_Parameter'>f</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3004"></a>    <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>a</span><span class='Delimiter'>; 
</span> 
    <a href="../../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3002"><span class='Ref_to_Parameter'>f</span></a><span class='Delimiter'>, </span><span class='String'>"%d%s%c"</span><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN3001"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN299"><span class='Ref_to_Member'>no</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3001"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN307"><span class='Ref_to_Member'>tmp</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='String'>"T"</span> <span class='Operator'>: </span><span class='String'>""</span><span class='Delimiter'>, 
</span>            <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3001"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN301"><span class='Ref_to_Member'>flag</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><a href="regc_nfa.c.html#LN3001"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN301"><span class='Ref_to_Member'>flag</span></a> <span class='Operator'>: </span><span class='String'>'.'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3001"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN309"><span class='Ref_to_Member'>prev</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL </span><span class='Operator'>&& </span><a href="regc_nfa.c.html#LN3001"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN309"><span class='Ref_to_Member'>prev</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN308"><span class='Ref_to_Member'>next</span></a> <span class='Operator'>!= </span><a href="regc_nfa.c.html#LN3001"><span class='Ref_to_Parameter'>s</span></a><span class='Parentheses'>) 
</span>        <a href="../../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3002"><span class='Ref_to_Parameter'>f</span></a><span class='Delimiter'>, </span><span class='String'>"\tstate chain bad\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3001"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN304"><span class='Ref_to_Member'>nouts</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <a href="../../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3002"><span class='Ref_to_Parameter'>f</span></a><span class='Delimiter'>, </span><span class='String'>"\tno out arcs\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="regcomp.c.html#LN184"><span class='Ref_to_Proto'>dumparcs</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3001"><span class='Ref_to_Parameter'>s</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN3002"><span class='Ref_to_Parameter'>f</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    fflush<span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3002"><span class='Ref_to_Parameter'>f</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3004"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN3001"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN303"><span class='Ref_to_Member'>ins</span></a><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN3004"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN3004"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN3004"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN284"><span class='Ref_to_Member'>inchain</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3004"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN280"><span class='Ref_to_Member'>to</span></a> <span class='Operator'>!= </span><a href="regc_nfa.c.html#LN3001"><span class='Ref_to_Parameter'>s</span></a><span class='Parentheses'>) 
</span>            <a href="../../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3002"><span class='Ref_to_Parameter'>f</span></a><span class='Delimiter'>, </span><span class='String'>"\tlink from %d to %d on %d's in-chain\n"</span><span class='Delimiter'>, 
</span>                    <a href="regc_nfa.c.html#LN3004"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN279"><span class='Ref_to_Member'>from</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN299"><span class='Ref_to_Member'>no</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN3004"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN280"><span class='Ref_to_Member'>to</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN299"><span class='Ref_to_Member'>no</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN3001"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN299"><span class='Ref_to_Member'>no</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
}</span><span class='Auto_Annotations'> &laquo; end dumpstate &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * dumparcs - dump out-arcs in human-readable form 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN3027"></a><span class='Declare_Function'>dumparcs</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>s</span><span class='Delimiter'>, 
</span><a name="LN3028"></a>         FILE <span class='Operator'>*</span><span class='Declare_Parameter'>f</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3030"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>pos</span><span class='Delimiter'>; 
</span><a name="LN3031"></a>    <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>a</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* printing oldest arcs first is usually clearer */ 
</span>    <a href="regc_nfa.c.html#LN3031"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN3027"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN305"><span class='Ref_to_Member'>outs</span></a><span class='Delimiter'>; 
</span>    <span class='Debug'>assert</span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3031"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3031"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN281"><span class='Ref_to_Member'>outchain</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="regc_nfa.c.html#LN3031"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN3031"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN281"><span class='Ref_to_Member'>outchain</span></a><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN3030"><span class='Ref_To_Local'>pos</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>do</span> 
    <span class='Delimiter'>{ 
</span>        <a href="regcomp.c.html#LN185"><span class='Ref_to_Proto'>dumparc</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3031"><span class='Ref_To_Local'>a</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN3027"><span class='Ref_to_Parameter'>s</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN3028"><span class='Ref_to_Parameter'>f</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3030"><span class='Ref_To_Local'>pos</span></a> <span class='Operator'>== </span><span class='Number'>5</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="../../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3028"><span class='Ref_to_Parameter'>f</span></a><span class='Delimiter'>, </span><span class='String'>"\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="regc_nfa.c.html#LN3030"><span class='Ref_To_Local'>pos</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
            <a href="regc_nfa.c.html#LN3030"><span class='Ref_To_Local'>pos</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <a href="regc_nfa.c.html#LN3031"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN3031"><span class='Ref_To_Local'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN282"><span class='Ref_to_Member'>outchainRev</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} </span><span class='Control'>while</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3031"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3030"><span class='Ref_To_Local'>pos</span></a> <span class='Operator'>!= </span><span class='Number'>1</span><span class='Parentheses'>) 
</span>        <a href="../../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3028"><span class='Ref_to_Parameter'>f</span></a><span class='Delimiter'>, </span><span class='String'>"\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dumparcs &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * dumparc - dump one outarc in readable form, including prefixing tab 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN3059"></a><span class='Declare_Function'>dumparc</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>a</span><span class='Delimiter'>, 
</span><a name="LN3060"></a>        <span class='Control'>struct</span> <a href="../../timezone/pgtz.h.html#LN40"><span class='Ref_to_Struct'>state</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>s</span><span class='Delimiter'>, 
</span><a name="LN3061"></a>        FILE <span class='Operator'>*</span><span class='Declare_Parameter'>f</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3063"></a>    <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN275"><span class='Ref_to_Struct'>arc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>aa</span><span class='Delimiter'>; 
</span><a name="LN3064"></a>    <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN290"><span class='Ref_to_Struct'>arcbatch</span></a> <span class='Operator'>*</span><span class='Declare_Local'>ab</span><span class='Delimiter'>; 
</span> 
    <a href="../../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3061"><span class='Ref_to_Parameter'>f</span></a><span class='Delimiter'>, </span><span class='String'>"\t"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3059"><span class='Ref_to_Parameter'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN277"><span class='Ref_to_Member'>type</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>case</span> <a href="regcomp.c.html#LN275"><span class='Ref_to_Const'>PLAIN</span></a><span class='Operator'>: 
</span>            <a href="../../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3061"><span class='Ref_to_Parameter'>f</span></a><span class='Delimiter'>, </span><span class='String'>"[%ld]"</span><span class='Delimiter'>, </span><span class='Parentheses'>(</span><span class='Keyword'>long</span><span class='Parentheses'>) </span><a href="regc_nfa.c.html#LN3059"><span class='Ref_to_Parameter'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN278"><span class='Ref_to_Member'>co</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="regcomp.c.html#LN284"><span class='Ref_to_Const'>AHEAD</span></a><span class='Operator'>: 
</span>            <a href="../../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3061"><span class='Ref_to_Parameter'>f</span></a><span class='Delimiter'>, </span><span class='String'>"&GT;%ld&GT;"</span><span class='Delimiter'>, </span><span class='Parentheses'>(</span><span class='Keyword'>long</span><span class='Parentheses'>) </span><a href="regc_nfa.c.html#LN3059"><span class='Ref_to_Parameter'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN278"><span class='Ref_to_Member'>co</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="regcomp.c.html#LN285"><span class='Ref_to_Const'>BEHIND</span></a><span class='Operator'>: 
</span>            <a href="../../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3061"><span class='Ref_to_Parameter'>f</span></a><span class='Delimiter'>, </span><span class='String'>"&LT;%ld&LT;"</span><span class='Delimiter'>, </span><span class='Parentheses'>(</span><span class='Keyword'>long</span><span class='Parentheses'>) </span><a href="regc_nfa.c.html#LN3059"><span class='Ref_to_Parameter'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN278"><span class='Ref_to_Member'>co</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="regcomp.c.html#LN283"><span class='Ref_to_Const'>LACON</span></a><span class='Operator'>: 
</span>            <a href="../../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3061"><span class='Ref_to_Parameter'>f</span></a><span class='Delimiter'>, </span><span class='String'>":%ld:"</span><span class='Delimiter'>, </span><span class='Parentheses'>(</span><span class='Keyword'>long</span><span class='Parentheses'>) </span><a href="regc_nfa.c.html#LN3059"><span class='Ref_to_Parameter'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN278"><span class='Ref_to_Member'>co</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <span class='String'>'^'</span><span class='Operator'>: 
</span>        <span class='Control'>case</span> <span class='String'>'$'</span><span class='Operator'>: 
</span>            <a href="../../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3061"><span class='Ref_to_Parameter'>f</span></a><span class='Delimiter'>, </span><span class='String'>"%c%d"</span><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN3059"><span class='Ref_to_Parameter'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN277"><span class='Ref_to_Member'>type</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>) </span><a href="regc_nfa.c.html#LN3059"><span class='Ref_to_Parameter'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN278"><span class='Ref_to_Member'>co</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../interfaces/ecpg/preproc/extern.h.html#LN17"><span class='Ref_to_Const'>EMPTY</span></a><span class='Operator'>: 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>default</span><span class='Operator'>: 
</span>            <a href="../../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3061"><span class='Ref_to_Parameter'>f</span></a><span class='Delimiter'>, </span><span class='String'>"0x%x/0%lo"</span><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN3059"><span class='Ref_to_Parameter'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN277"><span class='Ref_to_Member'>type</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><span class='Keyword'>long</span><span class='Parentheses'>) </span><a href="regc_nfa.c.html#LN3059"><span class='Ref_to_Parameter'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN278"><span class='Ref_to_Member'>co</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch a-&GT;type &raquo; </span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3059"><span class='Ref_to_Parameter'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN279"><span class='Ref_to_Member'>from</span></a> <span class='Operator'>!= </span><a href="regc_nfa.c.html#LN3060"><span class='Ref_to_Parameter'>s</span></a><span class='Parentheses'>) 
</span>        <a href="../../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3061"><span class='Ref_to_Parameter'>f</span></a><span class='Delimiter'>, </span><span class='String'>"?%d?"</span><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN3059"><span class='Ref_to_Parameter'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN279"><span class='Ref_to_Member'>from</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN299"><span class='Ref_to_Member'>no</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3064"><span class='Ref_To_Local'>ab</span></a> <span class='Operator'>= &</span><a href="regc_nfa.c.html#LN3059"><span class='Ref_to_Parameter'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN279"><span class='Ref_to_Member'>from</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN310"><span class='Ref_to_Member'>oas</span></a><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN3064"><span class='Ref_To_Local'>ab</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN3064"><span class='Ref_To_Local'>ab</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN3064"><span class='Ref_To_Local'>ab</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN292"><span class='Ref_to_Member'>next</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3063"><span class='Ref_To_Local'>aa</span></a> <span class='Operator'>= &</span><a href="regc_nfa.c.html#LN3064"><span class='Ref_To_Local'>ab</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN294"><span class='Ref_to_Member'>a</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]; </span><a href="regc_nfa.c.html#LN3063"><span class='Ref_To_Local'>aa</span></a> <span class='Operator'>&LT; &</span><a href="regc_nfa.c.html#LN3064"><span class='Ref_To_Local'>ab</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN294"><span class='Ref_to_Member'>a</span></a><span class='Delimiter'>[</span><a href="../../include/regex/regguts.h.html#LN293"><span class='Ref_to_Const'>ABSIZE</span></a><span class='Delimiter'>]; </span><a href="regc_nfa.c.html#LN3063"><span class='Ref_To_Local'>aa</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3063"><span class='Ref_To_Local'>aa</span></a> <span class='Operator'>== </span><a href="regc_nfa.c.html#LN3059"><span class='Ref_to_Parameter'>a</span></a><span class='Parentheses'>) 
</span>                <span class='Control'>break</span><span class='Delimiter'>;</span>          <span class='Comment_Single_Line'>/* NOTE BREAK OUT */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3063"><span class='Ref_To_Local'>aa</span></a> <span class='Operator'>&LT; &</span><a href="regc_nfa.c.html#LN3064"><span class='Ref_To_Local'>ab</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN294"><span class='Ref_to_Member'>a</span></a><span class='Delimiter'>[</span><a href="../../include/regex/regguts.h.html#LN293"><span class='Ref_to_Const'>ABSIZE</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span>    <span class='Comment_Single_Line'>/* propagate break */ 
</span>            <span class='Control'>break</span><span class='Delimiter'>;</span>              <span class='Comment_Single_Line'>/* NOTE BREAK OUT */ 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3064"><span class='Ref_To_Local'>ab</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="../../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3061"><span class='Ref_to_Parameter'>f</span></a><span class='Delimiter'>, </span><span class='String'>"?!?"</span><span class='Parentheses'>)</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* not in allocated space */ 
</span>    <a href="../../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3061"><span class='Ref_to_Parameter'>f</span></a><span class='Delimiter'>, </span><span class='String'>"-&GT;"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3059"><span class='Ref_to_Parameter'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN280"><span class='Ref_to_Member'>to</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3061"><span class='Ref_to_Parameter'>f</span></a><span class='Delimiter'>, </span><span class='String'>"NULL"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="../../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3061"><span class='Ref_to_Parameter'>f</span></a><span class='Delimiter'>, </span><span class='String'>"%d"</span><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN3059"><span class='Ref_to_Parameter'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN280"><span class='Ref_to_Member'>to</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN299"><span class='Ref_to_Member'>no</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3063"><span class='Ref_To_Local'>aa</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN3059"><span class='Ref_to_Parameter'>a</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN280"><span class='Ref_to_Member'>to</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN303"><span class='Ref_to_Member'>ins</span></a><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN3063"><span class='Ref_To_Local'>aa</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN3063"><span class='Ref_To_Local'>aa</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN3063"><span class='Ref_To_Local'>aa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN284"><span class='Ref_to_Member'>inchain</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3063"><span class='Ref_To_Local'>aa</span></a> <span class='Operator'>== </span><a href="regc_nfa.c.html#LN3059"><span class='Ref_to_Parameter'>a</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>break</span><span class='Delimiter'>;</span>              <span class='Comment_Single_Line'>/* NOTE BREAK OUT */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3063"><span class='Ref_To_Local'>aa</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="../../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3061"><span class='Ref_to_Parameter'>f</span></a><span class='Delimiter'>, </span><span class='String'>"?!?"</span><span class='Parentheses'>)</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* missing from in-chain */ 
</span><span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end dumparc &raquo; </span> 
<span class='Directive'>#endif</span>   <span class='Comment_Single_Line'>/* REG_DEBUG */ 
</span> 
<span class='Comment_Multi_Line'>/* 
 * dumpcnfa - dump a compacted NFA in human-readable form 
 */ 
</span><span class='Directive'>#ifdef</span> REG_DEBUG 
<span class='Keyword'>static void 
</span><a name="LN3123"></a><span class='Declare_Function'>dumpcnfa</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="regc_nfa.c.html#LN3123"><span class='Ref_to_Parameter'>cnfa</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>cnfa</span><span class='Delimiter'>, 
</span><a name="LN3124"></a>         FILE <span class='Operator'>*</span><span class='Declare_Parameter'>f</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3126"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>st</span><span class='Delimiter'>; 
</span> 
    <a href="../../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3124"><span class='Ref_to_Parameter'>f</span></a><span class='Delimiter'>, </span><span class='String'>"pre %d, post %d"</span><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN3123"><span class='Ref_to_Parameter'>cnfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN359"><span class='Ref_to_Member'>pre</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN3123"><span class='Ref_to_Parameter'>cnfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN360"><span class='Ref_to_Member'>post</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3123"><span class='Ref_to_Parameter'>cnfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN361"><span class='Ref_to_Member'>bos</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>!= </span><a href="../../include/regex/regguts.h.html#LN136"><span class='Ref_to_Const'>COLORLESS</span></a><span class='Parentheses'>) 
</span>        <a href="../../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3124"><span class='Ref_to_Parameter'>f</span></a><span class='Delimiter'>, </span><span class='String'>", bos [%ld]"</span><span class='Delimiter'>, </span><span class='Parentheses'>(</span><span class='Keyword'>long</span><span class='Parentheses'>) </span><a href="regc_nfa.c.html#LN3123"><span class='Ref_to_Parameter'>cnfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN361"><span class='Ref_to_Member'>bos</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3123"><span class='Ref_to_Parameter'>cnfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN361"><span class='Ref_to_Member'>bos</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>!= </span><a href="../../include/regex/regguts.h.html#LN136"><span class='Ref_to_Const'>COLORLESS</span></a><span class='Parentheses'>) 
</span>        <a href="../../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3124"><span class='Ref_to_Parameter'>f</span></a><span class='Delimiter'>, </span><span class='String'>", bol [%ld]"</span><span class='Delimiter'>, </span><span class='Parentheses'>(</span><span class='Keyword'>long</span><span class='Parentheses'>) </span><a href="regc_nfa.c.html#LN3123"><span class='Ref_to_Parameter'>cnfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN361"><span class='Ref_to_Member'>bos</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3123"><span class='Ref_to_Parameter'>cnfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN362"><span class='Ref_to_Member'>eos</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>!= </span><a href="../../include/regex/regguts.h.html#LN136"><span class='Ref_to_Const'>COLORLESS</span></a><span class='Parentheses'>) 
</span>        <a href="../../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3124"><span class='Ref_to_Parameter'>f</span></a><span class='Delimiter'>, </span><span class='String'>", eos [%ld]"</span><span class='Delimiter'>, </span><span class='Parentheses'>(</span><span class='Keyword'>long</span><span class='Parentheses'>) </span><a href="regc_nfa.c.html#LN3123"><span class='Ref_to_Parameter'>cnfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN362"><span class='Ref_to_Member'>eos</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3123"><span class='Ref_to_Parameter'>cnfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN362"><span class='Ref_to_Member'>eos</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>!= </span><a href="../../include/regex/regguts.h.html#LN136"><span class='Ref_to_Const'>COLORLESS</span></a><span class='Parentheses'>) 
</span>        <a href="../../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3124"><span class='Ref_to_Parameter'>f</span></a><span class='Delimiter'>, </span><span class='String'>", eol [%ld]"</span><span class='Delimiter'>, </span><span class='Parentheses'>(</span><span class='Keyword'>long</span><span class='Parentheses'>) </span><a href="regc_nfa.c.html#LN3123"><span class='Ref_to_Parameter'>cnfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN362"><span class='Ref_to_Member'>eos</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3123"><span class='Ref_to_Parameter'>cnfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN357"><span class='Ref_to_Member'>flags</span></a> <span class='Operator'>& </span><a href="../../include/regex/regguts.h.html#LN358"><span class='Ref_to_Const'>HASLACONS</span></a><span class='Parentheses'>) 
</span>        <a href="../../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3124"><span class='Ref_to_Parameter'>f</span></a><span class='Delimiter'>, </span><span class='String'>", haslacons"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3124"><span class='Ref_to_Parameter'>f</span></a><span class='Delimiter'>, </span><span class='String'>"\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3126"><span class='Ref_To_Local'>st</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN3126"><span class='Ref_To_Local'>st</span></a> <span class='Operator'>&LT; </span><a href="regc_nfa.c.html#LN3123"><span class='Ref_to_Parameter'>cnfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN355"><span class='Ref_to_Member'>nstates</span></a><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN3126"><span class='Ref_To_Local'>st</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <a href="regcomp.c.html#LN187"><span class='Ref_to_Proto'>dumpcstate</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3126"><span class='Ref_To_Local'>st</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN3123"><span class='Ref_to_Parameter'>cnfa</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN3124"><span class='Ref_to_Parameter'>f</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    fflush<span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3124"><span class='Ref_to_Parameter'>f</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dumpcnfa &raquo; </span> 
<span class='Directive'>#endif</span> 
 
<span class='Directive'>#ifdef</span> REG_DEBUG                <span class='Comment_Single_Line'>/* subordinates of dumpcnfa */ 
</span> 
<span class='Comment_Multi_Line'>/* 
 * dumpcstate - dump a compacted-NFA state in human-readable form 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN3152"></a><span class='Declare_Function'>dumpcstate</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>st</span><span class='Delimiter'>, 
</span><a name="LN3153"></a>           <span class='Control'>struct</span> <a href="regc_nfa.c.html#LN3153"><span class='Ref_to_Parameter'>cnfa</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>cnfa</span><span class='Delimiter'>, 
</span><a name="LN3154"></a>           FILE <span class='Operator'>*</span><span class='Declare_Parameter'>f</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3156"></a>    <span class='Control'>struct</span> <a href="../../include/regex/regguts.h.html#LN347"><span class='Ref_to_Struct'>carc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>ca</span><span class='Delimiter'>; 
</span><a name="LN3157"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>pos</span><span class='Delimiter'>; 
</span> 
    <a href="../../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3154"><span class='Ref_to_Parameter'>f</span></a><span class='Delimiter'>, </span><span class='String'>"%d%s"</span><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN3152"><span class='Ref_to_Parameter'>st</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3153"><span class='Ref_to_Parameter'>cnfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN363"><span class='Ref_to_Member'>stflags</span></a><span class='Delimiter'>[</span><a href="regc_nfa.c.html#LN3152"><span class='Ref_to_Parameter'>st</span></a><span class='Delimiter'>] </span><span class='Operator'>& </span><a href="../../include/regex/regguts.h.html#LN364"><span class='Ref_to_Const'>CNFA_NOPROGRESS</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='String'>":"</span> <span class='Operator'>: </span><span class='String'>"."</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="regc_nfa.c.html#LN3157"><span class='Ref_To_Local'>pos</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3156"><span class='Ref_To_Local'>ca</span></a> <span class='Operator'>= </span><a href="regc_nfa.c.html#LN3153"><span class='Ref_to_Parameter'>cnfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN365"><span class='Ref_to_Member'>states</span></a><span class='Delimiter'>[</span><a href="regc_nfa.c.html#LN3152"><span class='Ref_to_Parameter'>st</span></a><span class='Delimiter'>]; </span><a href="regc_nfa.c.html#LN3156"><span class='Ref_To_Local'>ca</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN349"><span class='Ref_to_Member'>co</span></a> <span class='Operator'>!= </span><a href="../../include/regex/regguts.h.html#LN136"><span class='Ref_to_Const'>COLORLESS</span></a><span class='Delimiter'>; </span><a href="regc_nfa.c.html#LN3156"><span class='Ref_To_Local'>ca</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3156"><span class='Ref_To_Local'>ca</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN349"><span class='Ref_to_Member'>co</span></a> <span class='Operator'>&LT; </span><a href="regc_nfa.c.html#LN3153"><span class='Ref_to_Parameter'>cnfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN356"><span class='Ref_to_Member'>ncolors</span></a><span class='Parentheses'>) 
</span>            <a href="../../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3154"><span class='Ref_to_Parameter'>f</span></a><span class='Delimiter'>, </span><span class='String'>"\t[%ld]-&GT;%d"</span><span class='Delimiter'>, </span><span class='Parentheses'>(</span><span class='Keyword'>long</span><span class='Parentheses'>) </span><a href="regc_nfa.c.html#LN3156"><span class='Ref_To_Local'>ca</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN349"><span class='Ref_to_Member'>co</span></a><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN3156"><span class='Ref_To_Local'>ca</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN350"><span class='Ref_to_Member'>to</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="../../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3154"><span class='Ref_to_Parameter'>f</span></a><span class='Delimiter'>, </span><span class='String'>"\t:%ld:-&GT;%d"</span><span class='Delimiter'>, </span><span class='Parentheses'>(</span><span class='Keyword'>long</span><span class='Parentheses'>) (</span><a href="regc_nfa.c.html#LN3156"><span class='Ref_To_Local'>ca</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN349"><span class='Ref_to_Member'>co</span></a> <span class='Operator'>- </span><a href="regc_nfa.c.html#LN3153"><span class='Ref_to_Parameter'>cnfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN356"><span class='Ref_to_Member'>ncolors</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="regc_nfa.c.html#LN3156"><span class='Ref_To_Local'>ca</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN350"><span class='Ref_to_Member'>to</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3157"><span class='Ref_To_Local'>pos</span></a> <span class='Operator'>== </span><span class='Number'>5</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="../../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3154"><span class='Ref_to_Parameter'>f</span></a><span class='Delimiter'>, </span><span class='String'>"\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="regc_nfa.c.html#LN3157"><span class='Ref_To_Local'>pos</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
            <a href="regc_nfa.c.html#LN3157"><span class='Ref_To_Local'>pos</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3156"><span class='Ref_To_Local'>ca</span></a> <span class='Operator'>== </span><a href="regc_nfa.c.html#LN3153"><span class='Ref_to_Parameter'>cnfa</span></a><span class='Operator'>-&GT;</span><a href="../../include/regex/regguts.h.html#LN365"><span class='Ref_to_Member'>states</span></a><span class='Delimiter'>[</span><a href="regc_nfa.c.html#LN3152"><span class='Ref_to_Parameter'>st</span></a><span class='Delimiter'>] </span><span class='Operator'>|| </span><a href="regc_nfa.c.html#LN3157"><span class='Ref_To_Local'>pos</span></a> <span class='Operator'>!= </span><span class='Number'>1</span><span class='Parentheses'>) 
</span>        <a href="../../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3154"><span class='Ref_to_Parameter'>f</span></a><span class='Delimiter'>, </span><span class='String'>"\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    fflush<span class='Parentheses'>(</span><a href="regc_nfa.c.html#LN3154"><span class='Ref_to_Parameter'>f</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dumpcstate &raquo; </span> 
 
<span class='Directive'>#endif</span>   <span class='Comment_Single_Line'>/* REG_DEBUG */ 
</span></pre>
<table bgcolor='#c0c0c0' width='100%'><tr><td><a href='../../../Contents.html'>Contents</a></td></tr>
</table><hr><p class='blurb' align='center'><a href='http://www.sourceinsight.com'>HTML Created by Source Insight Version 4.00.0084 Built on 2017-02-26</a></p>
</body></html>