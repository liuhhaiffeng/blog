<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta name="generator" content="Source Insight Version 4.00.0084 Built on 2017-02-26">
<meta charset='UTF-8' />
<style type='text/css'><!--
TD {background-color: #C0C0C0; font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.blurb {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.filename {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 120%; font-weight: bold; }
.dirname {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 100%; font-weight: bold; margin-top: 2.5em;}
--></style>
<title>src\backend\tsearch\dict_thesaurus.c</title>
<LINK REL=StyleSheet HREF="../../../C_Cpp_Source_File.css" TYPE='text/css' MEDIA=screen>
</head>
<body bgcolor=#ffffff>
<table bgcolor='#c0c0c0' width='100%'>
<tr><td><p class='filename'><b>src\backend\tsearch\dict_thesaurus.c</b></p></td>
<td align='right'>
Wed Jun 14 08:25:50 2017
</td></tr>
<tr><td><a href='../../../Contents.html'>Contents</a></td></tr>
</table>
<pre>
<span class='Comment_Multi_Line'>/*------------------------------------------------------------------------- 
 * 
 * dict_thesaurus.c 
 *      Thesaurus dictionary: phrase to phrase substitution 
 * 
 * Portions Copyright (c) 1996-2017, PostgreSQL Global Development Group 
 * 
 * 
 * IDENTIFICATION 
 *    src/backend/tsearch/dict_thesaurus.c 
 * 
 *------------------------------------------------------------------------- 
 */ 
</span><span class='Keyword'>#include </span><span class='String'>"postgres.h"</span> 
 
<span class='Keyword'>#include </span><span class='String'>"catalog/namespace.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"commands/defrem.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"tsearch/ts_cache.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"tsearch/ts_locale.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"tsearch/ts_utils.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/builtins.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/regproc.h"</span> 
 
 
<span class='Comment_Multi_Line'>/* 
 * Temporary we use TSLexeme.flags for inner use... 
 */ 
</span><a name="LN27"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>DT_USEASIS</span>      <span class='Number'>0x1000</span> 
 
<a name="LN29"></a><span class='Control'>typedef</span> <span class='Control'>struct</span> <span class='Declare_Struct'>LexemeInfo</span> 
<span class='Delimiter'>{ 
</span><a name="LN31"></a>    <a href="../../include/c.h.html#LN267"><span class='Ref_to_Typedef'>uint32</span></a>      <span class='Declare_Member'>idsubst</span><span class='Delimiter'>;</span>        <span class='Comment_Single_Line'>/* entry's number in DictThesaurus-&GT;subst */ 
</span><a name="LN32"></a>    <a href="../../include/c.h.html#LN266"><span class='Ref_to_Typedef'>uint16</span></a>      <span class='Declare_Member'>posinsubst</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* pos info in entry */ 
</span><a name="LN33"></a>    <a href="../../include/c.h.html#LN266"><span class='Ref_to_Typedef'>uint16</span></a>      <span class='Declare_Member'>tnvariant</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* total num lexemes in one variant */ 
</span><a name="LN34"></a>    <span class='Control'>struct</span> <a href="dict_thesaurus.c.html#LN29"><span class='Ref_to_Struct'>LexemeInfo</span></a> <span class='Operator'>*</span><span class='Declare_Member'>nextentry</span><span class='Delimiter'>; 
</span><a name="LN35"></a>    <span class='Control'>struct</span> <a href="dict_thesaurus.c.html#LN29"><span class='Ref_to_Struct'>LexemeInfo</span></a> <span class='Operator'>*</span><span class='Declare_Member'>nextvariant</span><span class='Delimiter'>; 
</span><a name="LN36"></a>} <span class='Declare_Typedef'>LexemeInfo</span><span class='Delimiter'>; 
</span> 
<span class='Control'>typedef</span> <span class='Control'>struct</span> 
<span class='Delimiter'>{ 
</span><a name="LN40"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Member'>lexeme</span><span class='Delimiter'>; 
</span><a name="LN41"></a>    <a href="dict_thesaurus.c.html#LN29"><span class='Ref_to_Struct'>LexemeInfo</span></a> <span class='Operator'>*</span><span class='Declare_Member'>entries</span><span class='Delimiter'>; 
</span><a name="LN42"></a>} <span class='Declare_Typedef'>TheLexeme</span><span class='Delimiter'>; 
</span> 
<span class='Control'>typedef</span> <span class='Control'>struct</span> 
<span class='Delimiter'>{ 
</span><a name="LN46"></a>    <a href="../../include/c.h.html#LN266"><span class='Ref_to_Typedef'>uint16</span></a>      <span class='Declare_Member'>lastlexeme</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* number lexemes to substitute */ 
</span><a name="LN47"></a>    <a href="../../include/c.h.html#LN266"><span class='Ref_to_Typedef'>uint16</span></a>      <span class='Declare_Member'>reslen</span><span class='Delimiter'>; 
</span><a name="LN48"></a>    <a href="../../include/tsearch/ts_public.h.html#LN87"><span class='Ref_to_Typedef'>TSLexeme</span></a>   <span class='Operator'>*</span><span class='Declare_Member'>res</span><span class='Delimiter'>;</span>            <span class='Comment_Single_Line'>/* prepared substituted result */ 
</span><a name="LN49"></a><span class='Delimiter'>} </span><span class='Declare_Typedef'>TheSubstitute</span><span class='Delimiter'>; 
</span> 
<span class='Control'>typedef</span> <span class='Control'>struct</span> 
<span class='Delimiter'>{ 
</span>    <span class='Comment_Multi_Line'>/* subdictionary to normalize lexemes */ 
</span><a name="LN54"></a>    <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Member'>subdictOid</span><span class='Delimiter'>; 
</span><a name="LN55"></a>    <a href="../../include/tsearch/ts_cache.h.html#LN50"><span class='Ref_to_Struct'>TSDictionaryCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Member'>subdict</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Array to search lexeme by exact match */ 
</span><a name="LN58"></a>    <a href="dict_thesaurus.c.html#LN38"><span class='Ref_to_Typedef'>TheLexeme</span></a>  <span class='Operator'>*</span><span class='Declare_Member'>wrds</span><span class='Delimiter'>; 
</span><a name="LN59"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>nwrds</span><span class='Delimiter'>;</span>          <span class='Comment_Single_Line'>/* current number of words */ 
</span><a name="LN60"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>ntwrds</span><span class='Delimiter'>;</span>         <span class='Comment_Single_Line'>/* allocated array length */ 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Storage of substituted result, n-th element is for n-th expression 
     */ 
</span><a name="LN65"></a>    <a href="dict_thesaurus.c.html#LN44"><span class='Ref_to_Typedef'>TheSubstitute</span></a> <span class='Operator'>*</span><span class='Declare_Member'>subst</span><span class='Delimiter'>; 
</span><a name="LN66"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>nsubst</span><span class='Delimiter'>; 
</span><a name="LN67"></a>} <span class='Declare_Typedef'>DictThesaurus</span><span class='Delimiter'>; 
</span> 
 
<span class='Keyword'>static void 
</span><a name="LN71"></a><span class='Declare_Function'>newLexeme</span><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN51"><span class='Ref_to_Typedef'>DictThesaurus</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>d</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>b</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>e</span><span class='Delimiter'>, </span><a href="../../include/c.h.html#LN267"><span class='Ref_to_Typedef'>uint32</span></a> <span class='Declare_Parameter'>idsubst</span><span class='Delimiter'>, </span><a href="../../include/c.h.html#LN266"><span class='Ref_to_Typedef'>uint16</span></a> <span class='Declare_Parameter'>posinsubst</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN73"></a>    <a href="dict_thesaurus.c.html#LN38"><span class='Ref_to_Typedef'>TheLexeme</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>ptr</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN71"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN59"><span class='Ref_to_Member'>nwrds</span></a> <span class='Operator'>&GT;= </span><a href="dict_thesaurus.c.html#LN71"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN60"><span class='Ref_to_Member'>ntwrds</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN71"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN60"><span class='Ref_to_Member'>ntwrds</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="dict_thesaurus.c.html#LN71"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN60"><span class='Ref_to_Member'>ntwrds</span></a> <span class='Operator'>= </span><span class='Number'>16</span><span class='Delimiter'>; 
</span>            <a href="dict_thesaurus.c.html#LN71"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN58"><span class='Ref_to_Member'>wrds</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN38"><span class='Ref_to_Typedef'>TheLexeme</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN38"><span class='Ref_to_Typedef'>TheLexeme</span></a><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="dict_thesaurus.c.html#LN71"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN60"><span class='Ref_to_Member'>ntwrds</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <a href="dict_thesaurus.c.html#LN71"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN60"><span class='Ref_to_Member'>ntwrds</span></a> <span class='Operator'>*= </span><span class='Number'>2</span><span class='Delimiter'>; 
</span>            <a href="dict_thesaurus.c.html#LN71"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN58"><span class='Ref_to_Member'>wrds</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN38"><span class='Ref_to_Typedef'>TheLexeme</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN36"><span class='Ref_to_Proto'>repalloc</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN71"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN58"><span class='Ref_to_Member'>wrds</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN38"><span class='Ref_to_Typedef'>TheLexeme</span></a><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="dict_thesaurus.c.html#LN71"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN60"><span class='Ref_to_Member'>ntwrds</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="dict_thesaurus.c.html#LN73"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN71"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN58"><span class='Ref_to_Member'>wrds</span></a> <span class='Operator'>+ </span><a href="dict_thesaurus.c.html#LN71"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN59"><span class='Ref_to_Member'>nwrds</span></a><span class='Delimiter'>; 
</span>    <a href="dict_thesaurus.c.html#LN71"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN59"><span class='Ref_to_Member'>nwrds</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span> 
    <a href="dict_thesaurus.c.html#LN73"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN40"><span class='Ref_to_Member'>lexeme</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN71"><span class='Ref_to_Parameter'>e</span></a> <span class='Operator'>- </span><a href="dict_thesaurus.c.html#LN71"><span class='Ref_to_Parameter'>b</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    memcpy<span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN73"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN40"><span class='Ref_to_Member'>lexeme</span></a><span class='Delimiter'>, </span><a href="dict_thesaurus.c.html#LN71"><span class='Ref_to_Parameter'>b</span></a><span class='Delimiter'>, </span><a href="dict_thesaurus.c.html#LN71"><span class='Ref_to_Parameter'>e</span></a> <span class='Operator'>- </span><a href="dict_thesaurus.c.html#LN71"><span class='Ref_to_Parameter'>b</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="dict_thesaurus.c.html#LN73"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN40"><span class='Ref_to_Member'>lexeme</span></a><span class='Delimiter'>[</span><a href="dict_thesaurus.c.html#LN71"><span class='Ref_to_Parameter'>e</span></a> <span class='Operator'>- </span><a href="dict_thesaurus.c.html#LN71"><span class='Ref_to_Parameter'>b</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span> 
    <a href="dict_thesaurus.c.html#LN73"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN41"><span class='Ref_to_Member'>entries</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN29"><span class='Ref_to_Struct'>LexemeInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN29"><span class='Ref_to_Struct'>LexemeInfo</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="dict_thesaurus.c.html#LN73"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN41"><span class='Ref_to_Member'>entries</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN34"><span class='Ref_to_Member'>nextentry</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="dict_thesaurus.c.html#LN73"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN41"><span class='Ref_to_Member'>entries</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN31"><span class='Ref_to_Member'>idsubst</span></a> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN71"><span class='Ref_to_Parameter'>idsubst</span></a><span class='Delimiter'>; 
</span>    <a href="dict_thesaurus.c.html#LN73"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN41"><span class='Ref_to_Member'>entries</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN32"><span class='Ref_to_Member'>posinsubst</span></a> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN71"><span class='Ref_to_Parameter'>posinsubst</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end newLexeme &raquo; </span> 
 
<span class='Keyword'>static void 
</span><a name="LN105"></a><span class='Declare_Function'>addWrd</span><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN51"><span class='Ref_to_Typedef'>DictThesaurus</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>d</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>b</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>e</span><span class='Delimiter'>, </span><a href="../../include/c.h.html#LN267"><span class='Ref_to_Typedef'>uint32</span></a> <span class='Declare_Parameter'>idsubst</span><span class='Delimiter'>, </span><a href="../../include/c.h.html#LN266"><span class='Ref_to_Typedef'>uint16</span></a> <span class='Declare_Parameter'>nwrd</span><span class='Delimiter'>, </span><a href="../../include/c.h.html#LN266"><span class='Ref_to_Typedef'>uint16</span></a> <span class='Declare_Parameter'>posinsubst</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>useasis</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN107"></a>    <span class='Keyword'>static int</span>  <span class='Declare_Local'>nres</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN108"></a>    <span class='Keyword'>static int</span>  <span class='Declare_Local'>ntres</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN109"></a>    <a href="dict_thesaurus.c.html#LN44"><span class='Ref_to_Typedef'>TheSubstitute</span></a> <span class='Operator'>*</span><span class='Declare_Local'>ptr</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN105"><span class='Ref_to_Parameter'>nwrd</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="dict_thesaurus.c.html#LN107"><span class='Ref_To_Local'>nres</span></a> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN108"><span class='Ref_To_Local'>ntres</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN105"><span class='Ref_to_Parameter'>idsubst</span></a> <span class='Operator'>&GT;= </span><a href="dict_thesaurus.c.html#LN105"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN66"><span class='Ref_to_Member'>nsubst</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN105"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN66"><span class='Ref_to_Member'>nsubst</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <a href="dict_thesaurus.c.html#LN105"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN66"><span class='Ref_to_Member'>nsubst</span></a> <span class='Operator'>= </span><span class='Number'>16</span><span class='Delimiter'>; 
</span>                <a href="dict_thesaurus.c.html#LN105"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN65"><span class='Ref_to_Member'>subst</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN44"><span class='Ref_to_Typedef'>TheSubstitute</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN44"><span class='Ref_to_Typedef'>TheSubstitute</span></a><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="dict_thesaurus.c.html#LN105"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN66"><span class='Ref_to_Member'>nsubst</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> 
            <span class='Delimiter'>{ 
</span>                <a href="dict_thesaurus.c.html#LN105"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN66"><span class='Ref_to_Member'>nsubst</span></a> <span class='Operator'>*= </span><span class='Number'>2</span><span class='Delimiter'>; 
</span>                <a href="dict_thesaurus.c.html#LN105"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN65"><span class='Ref_to_Member'>subst</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN44"><span class='Ref_to_Typedef'>TheSubstitute</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN36"><span class='Ref_to_Proto'>repalloc</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN105"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN65"><span class='Ref_to_Member'>subst</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN44"><span class='Ref_to_Typedef'>TheSubstitute</span></a><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="dict_thesaurus.c.html#LN105"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN66"><span class='Ref_to_Member'>nsubst</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="dict_thesaurus.c.html#LN109"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN105"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN65"><span class='Ref_to_Member'>subst</span></a> <span class='Operator'>+ </span><a href="dict_thesaurus.c.html#LN105"><span class='Ref_to_Parameter'>idsubst</span></a><span class='Delimiter'>; 
</span> 
    <a href="dict_thesaurus.c.html#LN109"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN46"><span class='Ref_to_Member'>lastlexeme</span></a> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN105"><span class='Ref_to_Parameter'>posinsubst</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN107"><span class='Ref_To_Local'>nres</span></a> <span class='Operator'>+ </span><span class='Number'>1</span> <span class='Operator'>&GT;= </span><a href="dict_thesaurus.c.html#LN108"><span class='Ref_To_Local'>ntres</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN108"><span class='Ref_To_Local'>ntres</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="dict_thesaurus.c.html#LN108"><span class='Ref_To_Local'>ntres</span></a> <span class='Operator'>= </span><span class='Number'>2</span><span class='Delimiter'>; 
</span>            <a href="dict_thesaurus.c.html#LN109"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN48"><span class='Ref_to_Member'>res</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/tsearch/ts_public.h.html#LN87"><span class='Ref_to_Typedef'>TSLexeme</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/tsearch/ts_public.h.html#LN87"><span class='Ref_to_Typedef'>TSLexeme</span></a><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="dict_thesaurus.c.html#LN108"><span class='Ref_To_Local'>ntres</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <a href="dict_thesaurus.c.html#LN108"><span class='Ref_To_Local'>ntres</span></a> <span class='Operator'>*= </span><span class='Number'>2</span><span class='Delimiter'>; 
</span>            <a href="dict_thesaurus.c.html#LN109"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN48"><span class='Ref_to_Member'>res</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/tsearch/ts_public.h.html#LN87"><span class='Ref_to_Typedef'>TSLexeme</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN36"><span class='Ref_to_Proto'>repalloc</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN109"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN48"><span class='Ref_to_Member'>res</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/tsearch/ts_public.h.html#LN87"><span class='Ref_to_Typedef'>TSLexeme</span></a><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="dict_thesaurus.c.html#LN108"><span class='Ref_To_Local'>ntres</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="dict_thesaurus.c.html#LN109"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN48"><span class='Ref_to_Member'>res</span></a><span class='Delimiter'>[</span><a href="dict_thesaurus.c.html#LN107"><span class='Ref_To_Local'>nres</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../include/tsearch/ts_public.h.html#LN110"><span class='Ref_to_Member'>lexeme</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN105"><span class='Ref_to_Parameter'>e</span></a> <span class='Operator'>- </span><a href="dict_thesaurus.c.html#LN105"><span class='Ref_to_Parameter'>b</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    memcpy<span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN109"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN48"><span class='Ref_to_Member'>res</span></a><span class='Delimiter'>[</span><a href="dict_thesaurus.c.html#LN107"><span class='Ref_To_Local'>nres</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../include/tsearch/ts_public.h.html#LN110"><span class='Ref_to_Member'>lexeme</span></a><span class='Delimiter'>, </span><a href="dict_thesaurus.c.html#LN105"><span class='Ref_to_Parameter'>b</span></a><span class='Delimiter'>, </span><a href="dict_thesaurus.c.html#LN105"><span class='Ref_to_Parameter'>e</span></a> <span class='Operator'>- </span><a href="dict_thesaurus.c.html#LN105"><span class='Ref_to_Parameter'>b</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="dict_thesaurus.c.html#LN109"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN48"><span class='Ref_to_Member'>res</span></a><span class='Delimiter'>[</span><a href="dict_thesaurus.c.html#LN107"><span class='Ref_To_Local'>nres</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../include/tsearch/ts_public.h.html#LN110"><span class='Ref_to_Member'>lexeme</span></a><span class='Delimiter'>[</span><a href="dict_thesaurus.c.html#LN105"><span class='Ref_to_Parameter'>e</span></a> <span class='Operator'>- </span><a href="dict_thesaurus.c.html#LN105"><span class='Ref_to_Parameter'>b</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span> 
    <a href="dict_thesaurus.c.html#LN109"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN48"><span class='Ref_to_Member'>res</span></a><span class='Delimiter'>[</span><a href="dict_thesaurus.c.html#LN107"><span class='Ref_To_Local'>nres</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../include/tsearch/ts_public.h.html#LN106"><span class='Ref_to_Member'>nvariant</span></a> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN105"><span class='Ref_to_Parameter'>nwrd</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN105"><span class='Ref_to_Parameter'>useasis</span></a><span class='Parentheses'>) 
</span>        <a href="dict_thesaurus.c.html#LN109"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN48"><span class='Ref_to_Member'>res</span></a><span class='Delimiter'>[</span><a href="dict_thesaurus.c.html#LN107"><span class='Ref_To_Local'>nres</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../include/tsearch/ts_public.h.html#LN108"><span class='Ref_to_Member'>flags</span></a> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN27"><span class='Ref_to_Const'>DT_USEASIS</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="dict_thesaurus.c.html#LN109"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN48"><span class='Ref_to_Member'>res</span></a><span class='Delimiter'>[</span><a href="dict_thesaurus.c.html#LN107"><span class='Ref_To_Local'>nres</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../include/tsearch/ts_public.h.html#LN108"><span class='Ref_to_Member'>flags</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <a href="dict_thesaurus.c.html#LN109"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN48"><span class='Ref_to_Member'>res</span></a><span class='Delimiter'>[</span><span class='Operator'>++</span><a href="dict_thesaurus.c.html#LN107"><span class='Ref_To_Local'>nres</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../include/tsearch/ts_public.h.html#LN110"><span class='Ref_to_Member'>lexeme</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end addWrd &raquo; </span> 
 
<a name="LN161"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>TR_WAITLEX</span>  <span class='Number'>1</span> 
<a name="LN162"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>TR_INLEX</span>    <span class='Number'>2</span> 
<a name="LN163"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>TR_WAITSUBS</span> <span class='Number'>3</span> 
<a name="LN164"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>TR_INSUBS</span>   <span class='Number'>4</span> 
 
<span class='Keyword'>static void 
</span><a name="LN167"></a><span class='Declare_Function'>thesaurusRead</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>filename</span><span class='Delimiter'>, </span><a href="dict_thesaurus.c.html#LN51"><span class='Ref_to_Typedef'>DictThesaurus</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>d</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN169"></a>    <a href="../../include/tsearch/ts_locale.h.html#LN32"><span class='Ref_to_Typedef'>tsearch_readline_state</span></a> <span class='Declare_Local'>trst</span><span class='Delimiter'>; 
</span><a name="LN170"></a>    <a href="../../include/c.h.html#LN267"><span class='Ref_to_Typedef'>uint32</span></a>      <span class='Declare_Local'>idsubst</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN171"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>useasis</span> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span><a name="LN172"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>line</span><span class='Delimiter'>; 
</span> 
    <a href="dict_thesaurus.c.html#LN167"><span class='Ref_to_Parameter'>filename</span></a> <span class='Operator'>= </span><a href="ts_utils.c.html#LN31"><span class='Ref_to_Func'>get_tsearch_config_filename</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN167"><span class='Ref_to_Parameter'>filename</span></a><span class='Delimiter'>, </span><span class='String'>"ths"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../include/tsearch/ts_locale.h.html#LN68"><span class='Ref_to_Proto'>tsearch_readline_begin</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="dict_thesaurus.c.html#LN169"><span class='Ref_To_Local'>trst</span></a><span class='Delimiter'>, </span><a href="dict_thesaurus.c.html#LN167"><span class='Ref_to_Parameter'>filename</span></a><span class='Parentheses'>))</span> 
        <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_CONFIG_FILE_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"could not open thesaurus file \"%s\": %m"</span><span class='Delimiter'>, 
</span>                        <a href="dict_thesaurus.c.html#LN167"><span class='Ref_to_Parameter'>filename</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>while</span> <span class='Parentheses'>((</span><a href="dict_thesaurus.c.html#LN172"><span class='Ref_To_Local'>line</span></a> <span class='Operator'>= </span><a href="../../include/tsearch/ts_locale.h.html#LN70"><span class='Ref_to_Proto'>tsearch_readline</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="dict_thesaurus.c.html#LN169"><span class='Ref_To_Local'>trst</span></a><span class='Parentheses'>))</span> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span><a name="LN183"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>ptr</span><span class='Delimiter'>; 
</span><a name="LN184"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>state</span> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN161"><span class='Ref_to_Const'>TR_WAITLEX</span></a><span class='Delimiter'>; 
</span><a name="LN185"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>beginwrd</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN186"></a>        <a href="../../include/c.h.html#LN267"><span class='Ref_to_Typedef'>uint32</span></a>      <span class='Declare_Local'>posinsubst</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN187"></a>        <a href="../../include/c.h.html#LN267"><span class='Ref_to_Typedef'>uint32</span></a>      <span class='Declare_Local'>nwrd</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
        <a href="dict_thesaurus.c.html#LN183"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN172"><span class='Ref_To_Local'>line</span></a><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* is it a comment? */ 
</span>        <span class='Control'>while</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="dict_thesaurus.c.html#LN183"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>&& </span><a href="ts_locale.c.html#LN41"><span class='Ref_to_Func'>t_isspace</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN183"><span class='Ref_To_Local'>ptr</span></a><span class='Parentheses'>))</span> 
            <a href="dict_thesaurus.c.html#LN183"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>+= </span><a href="../../include/mb/pg_wchar.h.html#LN521"><span class='Ref_to_Proto'>pg_mblen</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN183"><span class='Ref_To_Local'>ptr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/tsearch/ts_locale.h.html#LN51"><span class='Ref_to_Macro'>t_iseq</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN183"><span class='Ref_To_Local'>ptr</span></a><span class='Delimiter'>, </span><span class='String'>'#'</span><span class='Parentheses'>) </span><span class='Operator'>|| *</span><a href="dict_thesaurus.c.html#LN183"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>== </span><span class='String'>'\0'</span> <span class='Operator'>|| 
</span>            <a href="../../include/tsearch/ts_locale.h.html#LN51"><span class='Ref_to_Macro'>t_iseq</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN183"><span class='Ref_To_Local'>ptr</span></a><span class='Delimiter'>, </span><span class='String'>'\n'</span><span class='Parentheses'>) </span><span class='Operator'>|| </span><a href="../../include/tsearch/ts_locale.h.html#LN51"><span class='Ref_to_Macro'>t_iseq</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN183"><span class='Ref_To_Local'>ptr</span></a><span class='Delimiter'>, </span><span class='String'>'\r'</span><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <a href="../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN172"><span class='Ref_To_Local'>line</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Control'>while</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="dict_thesaurus.c.html#LN183"><span class='Ref_To_Local'>ptr</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN184"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>== </span><a href="dict_thesaurus.c.html#LN161"><span class='Ref_to_Const'>TR_WAITLEX</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/tsearch/ts_locale.h.html#LN51"><span class='Ref_to_Macro'>t_iseq</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN183"><span class='Ref_To_Local'>ptr</span></a><span class='Delimiter'>, </span><span class='String'>':'</span><span class='Parentheses'>))</span> 
                <span class='Delimiter'>{ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN186"><span class='Ref_To_Local'>posinsubst</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                        <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                                <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_CONFIG_FILE_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                 <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"unexpected delimiter"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                    <a href="dict_thesaurus.c.html#LN184"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN163"><span class='Ref_to_Const'>TR_WAITSUBS</span></a><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ts_locale.c.html#LN41"><span class='Ref_to_Func'>t_isspace</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN183"><span class='Ref_To_Local'>ptr</span></a><span class='Parentheses'>))</span> 
                <span class='Delimiter'>{ 
</span>                    <a href="dict_thesaurus.c.html#LN185"><span class='Ref_To_Local'>beginwrd</span></a> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN183"><span class='Ref_To_Local'>ptr</span></a><span class='Delimiter'>; 
</span>                    <a href="dict_thesaurus.c.html#LN184"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN162"><span class='Ref_to_Const'>TR_INLEX</span></a><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN184"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>== </span><a href="dict_thesaurus.c.html#LN162"><span class='Ref_to_Const'>TR_INLEX</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/tsearch/ts_locale.h.html#LN51"><span class='Ref_to_Macro'>t_iseq</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN183"><span class='Ref_To_Local'>ptr</span></a><span class='Delimiter'>, </span><span class='String'>':'</span><span class='Parentheses'>))</span> 
                <span class='Delimiter'>{ 
</span>                    <a href="dict_thesaurus.c.html#LN70"><span class='Ref_to_Func'>newLexeme</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN167"><span class='Ref_to_Parameter'>d</span></a><span class='Delimiter'>, </span><a href="dict_thesaurus.c.html#LN185"><span class='Ref_To_Local'>beginwrd</span></a><span class='Delimiter'>, </span><a href="dict_thesaurus.c.html#LN183"><span class='Ref_To_Local'>ptr</span></a><span class='Delimiter'>, </span><a href="dict_thesaurus.c.html#LN170"><span class='Ref_To_Local'>idsubst</span></a><span class='Delimiter'>, </span><a href="dict_thesaurus.c.html#LN186"><span class='Ref_To_Local'>posinsubst</span></a><span class='Operator'>++</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="dict_thesaurus.c.html#LN184"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN163"><span class='Ref_to_Const'>TR_WAITSUBS</span></a><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ts_locale.c.html#LN41"><span class='Ref_to_Func'>t_isspace</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN183"><span class='Ref_To_Local'>ptr</span></a><span class='Parentheses'>))</span> 
                <span class='Delimiter'>{ 
</span>                    <a href="dict_thesaurus.c.html#LN70"><span class='Ref_to_Func'>newLexeme</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN167"><span class='Ref_to_Parameter'>d</span></a><span class='Delimiter'>, </span><a href="dict_thesaurus.c.html#LN185"><span class='Ref_To_Local'>beginwrd</span></a><span class='Delimiter'>, </span><a href="dict_thesaurus.c.html#LN183"><span class='Ref_To_Local'>ptr</span></a><span class='Delimiter'>, </span><a href="dict_thesaurus.c.html#LN170"><span class='Ref_To_Local'>idsubst</span></a><span class='Delimiter'>, </span><a href="dict_thesaurus.c.html#LN186"><span class='Ref_To_Local'>posinsubst</span></a><span class='Operator'>++</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="dict_thesaurus.c.html#LN184"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN161"><span class='Ref_to_Const'>TR_WAITLEX</span></a><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN184"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>== </span><a href="dict_thesaurus.c.html#LN163"><span class='Ref_to_Const'>TR_WAITSUBS</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/tsearch/ts_locale.h.html#LN51"><span class='Ref_to_Macro'>t_iseq</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN183"><span class='Ref_To_Local'>ptr</span></a><span class='Delimiter'>, </span><span class='String'>'*'</span><span class='Parentheses'>))</span> 
                <span class='Delimiter'>{ 
</span>                    <a href="dict_thesaurus.c.html#LN171"><span class='Ref_To_Local'>useasis</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>                    <a href="dict_thesaurus.c.html#LN184"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN164"><span class='Ref_to_Const'>TR_INSUBS</span></a><span class='Delimiter'>; 
</span>                    <a href="dict_thesaurus.c.html#LN185"><span class='Ref_To_Local'>beginwrd</span></a> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN183"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>+ </span><a href="../../include/mb/pg_wchar.h.html#LN521"><span class='Ref_to_Proto'>pg_mblen</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN183"><span class='Ref_To_Local'>ptr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/tsearch/ts_locale.h.html#LN51"><span class='Ref_to_Macro'>t_iseq</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN183"><span class='Ref_To_Local'>ptr</span></a><span class='Delimiter'>, </span><span class='String'>'\\'</span><span class='Parentheses'>))</span> 
                <span class='Delimiter'>{ 
</span>                    <a href="dict_thesaurus.c.html#LN171"><span class='Ref_To_Local'>useasis</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>                    <a href="dict_thesaurus.c.html#LN184"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN164"><span class='Ref_to_Const'>TR_INSUBS</span></a><span class='Delimiter'>; 
</span>                    <a href="dict_thesaurus.c.html#LN185"><span class='Ref_To_Local'>beginwrd</span></a> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN183"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>+ </span><a href="../../include/mb/pg_wchar.h.html#LN521"><span class='Ref_to_Proto'>pg_mblen</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN183"><span class='Ref_To_Local'>ptr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ts_locale.c.html#LN41"><span class='Ref_to_Func'>t_isspace</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN183"><span class='Ref_To_Local'>ptr</span></a><span class='Parentheses'>))</span> 
                <span class='Delimiter'>{ 
</span>                    <a href="dict_thesaurus.c.html#LN171"><span class='Ref_To_Local'>useasis</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>                    <a href="dict_thesaurus.c.html#LN185"><span class='Ref_To_Local'>beginwrd</span></a> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN183"><span class='Ref_To_Local'>ptr</span></a><span class='Delimiter'>; 
</span>                    <a href="dict_thesaurus.c.html#LN184"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN164"><span class='Ref_to_Const'>TR_INSUBS</span></a><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if state==TR_WAITSUBS &raquo; </span> 
            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN184"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>== </span><a href="dict_thesaurus.c.html#LN164"><span class='Ref_to_Const'>TR_INSUBS</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ts_locale.c.html#LN41"><span class='Ref_to_Func'>t_isspace</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN183"><span class='Ref_To_Local'>ptr</span></a><span class='Parentheses'>))</span> 
                <span class='Delimiter'>{ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN183"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>== </span><a href="dict_thesaurus.c.html#LN185"><span class='Ref_To_Local'>beginwrd</span></a><span class='Parentheses'>) 
</span>                        <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                                <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_CONFIG_FILE_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                 <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"unexpected end of line or lexeme"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                    <a href="dict_thesaurus.c.html#LN104"><span class='Ref_to_Func'>addWrd</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN167"><span class='Ref_to_Parameter'>d</span></a><span class='Delimiter'>, </span><a href="dict_thesaurus.c.html#LN185"><span class='Ref_To_Local'>beginwrd</span></a><span class='Delimiter'>, </span><a href="dict_thesaurus.c.html#LN183"><span class='Ref_To_Local'>ptr</span></a><span class='Delimiter'>, </span><a href="dict_thesaurus.c.html#LN170"><span class='Ref_To_Local'>idsubst</span></a><span class='Delimiter'>, </span><a href="dict_thesaurus.c.html#LN187"><span class='Ref_To_Local'>nwrd</span></a><span class='Operator'>++</span><span class='Delimiter'>, </span><a href="dict_thesaurus.c.html#LN186"><span class='Ref_To_Local'>posinsubst</span></a><span class='Delimiter'>, </span><a href="dict_thesaurus.c.html#LN171"><span class='Ref_To_Local'>useasis</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="dict_thesaurus.c.html#LN184"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN163"><span class='Ref_to_Const'>TR_WAITSUBS</span></a><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> 
                <a href="../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"unrecognized thesaurus state: %d"</span><span class='Delimiter'>, </span><a href="dict_thesaurus.c.html#LN184"><span class='Ref_To_Local'>state</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <a href="dict_thesaurus.c.html#LN183"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>+= </span><a href="../../include/mb/pg_wchar.h.html#LN521"><span class='Ref_to_Proto'>pg_mblen</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN183"><span class='Ref_To_Local'>ptr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end while *ptr &raquo; </span> 
 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN184"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>== </span><a href="dict_thesaurus.c.html#LN164"><span class='Ref_to_Const'>TR_INSUBS</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN183"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>== </span><a href="dict_thesaurus.c.html#LN185"><span class='Ref_To_Local'>beginwrd</span></a><span class='Parentheses'>) 
</span>                <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_CONFIG_FILE_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"unexpected end of line or lexeme"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>            <a href="dict_thesaurus.c.html#LN104"><span class='Ref_to_Func'>addWrd</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN167"><span class='Ref_to_Parameter'>d</span></a><span class='Delimiter'>, </span><a href="dict_thesaurus.c.html#LN185"><span class='Ref_To_Local'>beginwrd</span></a><span class='Delimiter'>, </span><a href="dict_thesaurus.c.html#LN183"><span class='Ref_To_Local'>ptr</span></a><span class='Delimiter'>, </span><a href="dict_thesaurus.c.html#LN170"><span class='Ref_To_Local'>idsubst</span></a><span class='Delimiter'>, </span><a href="dict_thesaurus.c.html#LN187"><span class='Ref_To_Local'>nwrd</span></a><span class='Operator'>++</span><span class='Delimiter'>, </span><a href="dict_thesaurus.c.html#LN186"><span class='Ref_To_Local'>posinsubst</span></a><span class='Delimiter'>, </span><a href="dict_thesaurus.c.html#LN171"><span class='Ref_To_Local'>useasis</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <a href="dict_thesaurus.c.html#LN170"><span class='Ref_To_Local'>idsubst</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN187"><span class='Ref_To_Local'>nwrd</span></a> <span class='Operator'>&& </span><a href="dict_thesaurus.c.html#LN186"><span class='Ref_To_Local'>posinsubst</span></a><span class='Parentheses'>))</span> 
            <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_CONFIG_FILE_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"unexpected end of line"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Note: currently, tsearch_readline can't return lines exceeding 4KB, 
         * so overflow of the word counts is impossible.  But that may not 
         * always be true, so let's check. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN187"><span class='Ref_To_Local'>nwrd</span></a> <span class='Operator'>!= </span><span class='Parentheses'>(</span><a href="../../include/c.h.html#LN266"><span class='Ref_to_Typedef'>uint16</span></a><span class='Parentheses'>) </span><a href="dict_thesaurus.c.html#LN187"><span class='Ref_To_Local'>nwrd</span></a> <span class='Operator'>|| </span><a href="dict_thesaurus.c.html#LN186"><span class='Ref_To_Local'>posinsubst</span></a> <span class='Operator'>!= </span><span class='Parentheses'>(</span><a href="../../include/c.h.html#LN266"><span class='Ref_to_Typedef'>uint16</span></a><span class='Parentheses'>) </span><a href="dict_thesaurus.c.html#LN186"><span class='Ref_To_Local'>posinsubst</span></a><span class='Parentheses'>)</span> 
            <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_CONFIG_FILE_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"too many lexemes in thesaurus entry"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
        <a href="../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN172"><span class='Ref_To_Local'>line</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end while (line=tsearch_readlin... &raquo; </span> 
 
    <a href="dict_thesaurus.c.html#LN167"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN66"><span class='Ref_to_Member'>nsubst</span></a> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN170"><span class='Ref_To_Local'>idsubst</span></a><span class='Delimiter'>; 
</span> 
    <a href="../../include/tsearch/ts_locale.h.html#LN71"><span class='Ref_to_Proto'>tsearch_readline_end</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="dict_thesaurus.c.html#LN169"><span class='Ref_To_Local'>trst</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end thesaurusRead &raquo; </span> 
 
<span class='Keyword'>static </span><a href="dict_thesaurus.c.html#LN38"><span class='Ref_to_Typedef'>TheLexeme</span></a> <span class='Operator'>* 
</span><a name="LN307"></a><span class='Declare_Function'>addCompiledLexeme</span><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN38"><span class='Ref_to_Typedef'>TheLexeme</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>newwrds</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>nnw</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>tnm</span><span class='Delimiter'>, </span><a href="../../include/tsearch/ts_public.h.html#LN87"><span class='Ref_to_Typedef'>TSLexeme</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>lexeme</span><span class='Delimiter'>, </span><a href="dict_thesaurus.c.html#LN29"><span class='Ref_to_Struct'>LexemeInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>src</span><span class='Delimiter'>, </span><a href="../../include/c.h.html#LN266"><span class='Ref_to_Typedef'>uint16</span></a> <span class='Declare_Parameter'>tnvariant</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="dict_thesaurus.c.html#LN307"><span class='Ref_to_Parameter'>nnw</span></a> <span class='Operator'>&GT;= *</span><a href="dict_thesaurus.c.html#LN307"><span class='Ref_to_Parameter'>tnm</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Operator'>*</span><a href="dict_thesaurus.c.html#LN307"><span class='Ref_to_Parameter'>tnm</span></a> <span class='Operator'>*= </span><span class='Number'>2</span><span class='Delimiter'>; 
</span>        <a href="dict_thesaurus.c.html#LN307"><span class='Ref_to_Parameter'>newwrds</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN38"><span class='Ref_to_Typedef'>TheLexeme</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN36"><span class='Ref_to_Proto'>repalloc</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN307"><span class='Ref_to_Parameter'>newwrds</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN38"><span class='Ref_to_Typedef'>TheLexeme</span></a><span class='Parentheses'>) </span><span class='Operator'>* *</span><a href="dict_thesaurus.c.html#LN307"><span class='Ref_to_Parameter'>tnm</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="dict_thesaurus.c.html#LN307"><span class='Ref_to_Parameter'>newwrds</span></a><span class='Delimiter'>[</span><span class='Operator'>*</span><a href="dict_thesaurus.c.html#LN307"><span class='Ref_to_Parameter'>nnw</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="dict_thesaurus.c.html#LN41"><span class='Ref_to_Member'>entries</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN29"><span class='Ref_to_Struct'>LexemeInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN29"><span class='Ref_to_Struct'>LexemeInfo</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN307"><span class='Ref_to_Parameter'>lexeme</span></a> <span class='Operator'>&& </span><a href="dict_thesaurus.c.html#LN307"><span class='Ref_to_Parameter'>lexeme</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/ts_public.h.html#LN110"><span class='Ref_to_Member'>lexeme</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="dict_thesaurus.c.html#LN307"><span class='Ref_to_Parameter'>newwrds</span></a><span class='Delimiter'>[</span><span class='Operator'>*</span><a href="dict_thesaurus.c.html#LN307"><span class='Ref_to_Parameter'>nnw</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="dict_thesaurus.c.html#LN40"><span class='Ref_to_Member'>lexeme</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN32"><span class='Ref_to_Proto'>pstrdup</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN307"><span class='Ref_to_Parameter'>lexeme</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/ts_public.h.html#LN110"><span class='Ref_to_Member'>lexeme</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="dict_thesaurus.c.html#LN307"><span class='Ref_to_Parameter'>newwrds</span></a><span class='Delimiter'>[</span><span class='Operator'>*</span><a href="dict_thesaurus.c.html#LN307"><span class='Ref_to_Parameter'>nnw</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="dict_thesaurus.c.html#LN41"><span class='Ref_to_Member'>entries</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN33"><span class='Ref_to_Member'>tnvariant</span></a> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN307"><span class='Ref_to_Parameter'>tnvariant</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="dict_thesaurus.c.html#LN307"><span class='Ref_to_Parameter'>newwrds</span></a><span class='Delimiter'>[</span><span class='Operator'>*</span><a href="dict_thesaurus.c.html#LN307"><span class='Ref_to_Parameter'>nnw</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="dict_thesaurus.c.html#LN40"><span class='Ref_to_Member'>lexeme</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>        <a href="dict_thesaurus.c.html#LN307"><span class='Ref_to_Parameter'>newwrds</span></a><span class='Delimiter'>[</span><span class='Operator'>*</span><a href="dict_thesaurus.c.html#LN307"><span class='Ref_to_Parameter'>nnw</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="dict_thesaurus.c.html#LN41"><span class='Ref_to_Member'>entries</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN33"><span class='Ref_to_Member'>tnvariant</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="dict_thesaurus.c.html#LN307"><span class='Ref_to_Parameter'>newwrds</span></a><span class='Delimiter'>[</span><span class='Operator'>*</span><a href="dict_thesaurus.c.html#LN307"><span class='Ref_to_Parameter'>nnw</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="dict_thesaurus.c.html#LN41"><span class='Ref_to_Member'>entries</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN31"><span class='Ref_to_Member'>idsubst</span></a> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN307"><span class='Ref_to_Parameter'>src</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN31"><span class='Ref_to_Member'>idsubst</span></a><span class='Delimiter'>; 
</span>    <a href="dict_thesaurus.c.html#LN307"><span class='Ref_to_Parameter'>newwrds</span></a><span class='Delimiter'>[</span><span class='Operator'>*</span><a href="dict_thesaurus.c.html#LN307"><span class='Ref_to_Parameter'>nnw</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="dict_thesaurus.c.html#LN41"><span class='Ref_to_Member'>entries</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN32"><span class='Ref_to_Member'>posinsubst</span></a> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN307"><span class='Ref_to_Parameter'>src</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN32"><span class='Ref_to_Member'>posinsubst</span></a><span class='Delimiter'>; 
</span> 
    <a href="dict_thesaurus.c.html#LN307"><span class='Ref_to_Parameter'>newwrds</span></a><span class='Delimiter'>[</span><span class='Operator'>*</span><a href="dict_thesaurus.c.html#LN307"><span class='Ref_to_Parameter'>nnw</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="dict_thesaurus.c.html#LN41"><span class='Ref_to_Member'>entries</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN34"><span class='Ref_to_Member'>nextentry</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="dict_thesaurus.c.html#LN307"><span class='Ref_to_Parameter'>nnw</span></a><span class='Parentheses'>)</span><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="dict_thesaurus.c.html#LN307"><span class='Ref_to_Parameter'>newwrds</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end addCompiledLexeme &raquo; </span> 
 
<span class='Keyword'>static int 
</span><a name="LN338"></a><span class='Declare_Function'>cmpLexemeInfo</span><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN29"><span class='Ref_to_Struct'>LexemeInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>a</span><span class='Delimiter'>, </span><a href="dict_thesaurus.c.html#LN29"><span class='Ref_to_Struct'>LexemeInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>b</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN338"><span class='Ref_to_Parameter'>a</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL </span><span class='Operator'>|| </span><a href="dict_thesaurus.c.html#LN338"><span class='Ref_to_Parameter'>b</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN338"><span class='Ref_to_Parameter'>a</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN31"><span class='Ref_to_Member'>idsubst</span></a> <span class='Operator'>== </span><a href="dict_thesaurus.c.html#LN338"><span class='Ref_to_Parameter'>b</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN31"><span class='Ref_to_Member'>idsubst</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN338"><span class='Ref_to_Parameter'>a</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN32"><span class='Ref_to_Member'>posinsubst</span></a> <span class='Operator'>== </span><a href="dict_thesaurus.c.html#LN338"><span class='Ref_to_Parameter'>b</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN32"><span class='Ref_to_Member'>posinsubst</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN338"><span class='Ref_to_Parameter'>a</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN33"><span class='Ref_to_Member'>tnvariant</span></a> <span class='Operator'>== </span><a href="dict_thesaurus.c.html#LN338"><span class='Ref_to_Parameter'>b</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN33"><span class='Ref_to_Member'>tnvariant</span></a><span class='Parentheses'>) 
</span>                <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>return</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN338"><span class='Ref_to_Parameter'>a</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN33"><span class='Ref_to_Member'>tnvariant</span></a> <span class='Operator'>&GT; </span><a href="dict_thesaurus.c.html#LN338"><span class='Ref_to_Parameter'>b</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN33"><span class='Ref_to_Member'>tnvariant</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='Number'>1</span> <span class='Operator'>: -</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Control'>return</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN338"><span class='Ref_to_Parameter'>a</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN32"><span class='Ref_to_Member'>posinsubst</span></a> <span class='Operator'>&GT; </span><a href="dict_thesaurus.c.html#LN338"><span class='Ref_to_Parameter'>b</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN32"><span class='Ref_to_Member'>posinsubst</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='Number'>1</span> <span class='Operator'>: -</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>return</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN338"><span class='Ref_to_Parameter'>a</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN31"><span class='Ref_to_Member'>idsubst</span></a> <span class='Operator'>&GT; </span><a href="dict_thesaurus.c.html#LN338"><span class='Ref_to_Parameter'>b</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN31"><span class='Ref_to_Member'>idsubst</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='Number'>1</span> <span class='Operator'>: -</span><span class='Number'>1</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end cmpLexemeInfo &raquo; </span> 
 
<span class='Keyword'>static int 
</span><a name="LN360"></a><span class='Declare_Function'>cmpLexeme</span><span class='Parentheses'>(</span><span class='Keyword'>const </span><a href="dict_thesaurus.c.html#LN38"><span class='Ref_to_Typedef'>TheLexeme</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>a</span><span class='Delimiter'>, </span><span class='Keyword'>const </span><a href="dict_thesaurus.c.html#LN38"><span class='Ref_to_Typedef'>TheLexeme</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>b</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN360"><span class='Ref_to_Parameter'>a</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN40"><span class='Ref_to_Member'>lexeme</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN360"><span class='Ref_to_Parameter'>b</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN40"><span class='Ref_to_Member'>lexeme</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <span class='Control'>return</span> <span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN360"><span class='Ref_to_Parameter'>b</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN40"><span class='Ref_to_Member'>lexeme</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> strcmp<span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN360"><span class='Ref_to_Parameter'>a</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN40"><span class='Ref_to_Member'>lexeme</span></a><span class='Delimiter'>, </span><a href="dict_thesaurus.c.html#LN360"><span class='Ref_to_Parameter'>b</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN40"><span class='Ref_to_Member'>lexeme</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>static int 
</span><a name="LN376"></a><span class='Declare_Function'>cmpLexemeQ</span><span class='Parentheses'>(</span><span class='Keyword'>const void </span><span class='Operator'>*</span><span class='Declare_Parameter'>a</span><span class='Delimiter'>, </span><span class='Keyword'>const void </span><span class='Operator'>*</span><span class='Declare_Parameter'>b</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> <a href="dict_thesaurus.c.html#LN359"><span class='Ref_to_Func'>cmpLexeme</span></a><span class='Parentheses'>((</span><span class='Keyword'>const </span><a href="dict_thesaurus.c.html#LN38"><span class='Ref_to_Typedef'>TheLexeme</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="dict_thesaurus.c.html#LN376"><span class='Ref_to_Parameter'>a</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><span class='Keyword'>const </span><a href="dict_thesaurus.c.html#LN38"><span class='Ref_to_Typedef'>TheLexeme</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="dict_thesaurus.c.html#LN376"><span class='Ref_to_Parameter'>b</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>static int 
</span><a name="LN382"></a><span class='Declare_Function'>cmpTheLexeme</span><span class='Parentheses'>(</span><span class='Keyword'>const void </span><span class='Operator'>*</span><span class='Declare_Parameter'>a</span><span class='Delimiter'>, </span><span class='Keyword'>const void </span><span class='Operator'>*</span><span class='Declare_Parameter'>b</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN384"></a>    <span class='Keyword'>const </span><a href="dict_thesaurus.c.html#LN38"><span class='Ref_to_Typedef'>TheLexeme</span></a> <span class='Operator'>*</span><span class='Declare_Local'>la</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>const </span><a href="dict_thesaurus.c.html#LN38"><span class='Ref_to_Typedef'>TheLexeme</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="dict_thesaurus.c.html#LN382"><span class='Ref_to_Parameter'>a</span></a><span class='Delimiter'>; 
</span><a name="LN385"></a>    <span class='Keyword'>const </span><a href="dict_thesaurus.c.html#LN38"><span class='Ref_to_Typedef'>TheLexeme</span></a> <span class='Operator'>*</span><span class='Declare_Local'>lb</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>const </span><a href="dict_thesaurus.c.html#LN38"><span class='Ref_to_Typedef'>TheLexeme</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="dict_thesaurus.c.html#LN382"><span class='Ref_to_Parameter'>b</span></a><span class='Delimiter'>; 
</span><a name="LN386"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="dict_thesaurus.c.html#LN386"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN359"><span class='Ref_to_Func'>cmpLexeme</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN384"><span class='Ref_To_Local'>la</span></a><span class='Delimiter'>, </span><a href="dict_thesaurus.c.html#LN385"><span class='Ref_To_Local'>lb</span></a><span class='Parentheses'>))</span> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <span class='Control'>return</span> <a href="dict_thesaurus.c.html#LN386"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <span class='Operator'>-</span><a href="dict_thesaurus.c.html#LN337"><span class='Ref_to_Func'>cmpLexemeInfo</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN384"><span class='Ref_To_Local'>la</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN41"><span class='Ref_to_Member'>entries</span></a><span class='Delimiter'>, </span><a href="dict_thesaurus.c.html#LN385"><span class='Ref_To_Local'>lb</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN41"><span class='Ref_to_Member'>entries</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>static void 
</span><a name="LN395"></a><span class='Declare_Function'>compileTheLexeme</span><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN51"><span class='Ref_to_Typedef'>DictThesaurus</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>d</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN397"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>, 
</span><a name="LN398"></a>                <span class='Declare_Local'>nnw</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>, 
</span><a name="LN399"></a>                <span class='Declare_Local'>tnm</span> <span class='Operator'>= </span><span class='Number'>16</span><span class='Delimiter'>; 
</span><a name="LN400"></a>    <a href="dict_thesaurus.c.html#LN38"><span class='Ref_to_Typedef'>TheLexeme</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>newwrds</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN38"><span class='Ref_to_Typedef'>TheLexeme</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN38"><span class='Ref_to_Typedef'>TheLexeme</span></a><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="dict_thesaurus.c.html#LN399"><span class='Ref_To_Local'>tnm</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span><a name="LN401"></a>               <span class='Operator'>*</span><span class='Declare_Local'>ptrwrds</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN397"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="dict_thesaurus.c.html#LN397"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="dict_thesaurus.c.html#LN395"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN59"><span class='Ref_to_Member'>nwrds</span></a><span class='Delimiter'>; </span><a href="dict_thesaurus.c.html#LN397"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN405"></a>        <a href="../../include/tsearch/ts_public.h.html#LN87"><span class='Ref_to_Typedef'>TSLexeme</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>ptr</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN395"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN58"><span class='Ref_to_Member'>wrds</span></a><span class='Delimiter'>[</span><a href="dict_thesaurus.c.html#LN397"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="dict_thesaurus.c.html#LN40"><span class='Ref_to_Member'>lexeme</span></a><span class='Delimiter'>, </span><span class='String'>"?"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span>        <span class='Comment_Single_Line'>/* Is stop word marker? */ 
</span>            <a href="dict_thesaurus.c.html#LN400"><span class='Ref_To_Local'>newwrds</span></a> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN306"><span class='Ref_to_Func'>addCompiledLexeme</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN400"><span class='Ref_To_Local'>newwrds</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="dict_thesaurus.c.html#LN398"><span class='Ref_To_Local'>nnw</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="dict_thesaurus.c.html#LN399"><span class='Ref_To_Local'>tnm</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="dict_thesaurus.c.html#LN395"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN58"><span class='Ref_to_Member'>wrds</span></a><span class='Delimiter'>[</span><a href="dict_thesaurus.c.html#LN397"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="dict_thesaurus.c.html#LN41"><span class='Ref_to_Member'>entries</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <a href="dict_thesaurus.c.html#LN405"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/tsearch/ts_public.h.html#LN87"><span class='Ref_to_Typedef'>TSLexeme</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/postgres.h.html#LN554"><span class='Ref_to_Macro'>DatumGetPointer</span></a><span class='Parentheses'>(</span><a href="../../include/fmgr.h.html#LN607"><span class='Ref_to_Macro'>FunctionCall4</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN395"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN55"><span class='Ref_to_Member'>subdict</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/ts_cache.h.html#LN58"><span class='Ref_to_Member'>lexize</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                       <a href="../../include/postgres.h.html#LN561"><span class='Ref_to_Macro'>PointerGetDatum</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN395"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN55"><span class='Ref_to_Member'>subdict</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/ts_cache.h.html#LN61"><span class='Ref_to_Member'>dictData</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                          <a href="../../include/postgres.h.html#LN561"><span class='Ref_to_Macro'>PointerGetDatum</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN395"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN58"><span class='Ref_to_Member'>wrds</span></a><span class='Delimiter'>[</span><a href="dict_thesaurus.c.html#LN397"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="dict_thesaurus.c.html#LN40"><span class='Ref_to_Member'>lexeme</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                    <a href="../../include/postgres.h.html#LN484"><span class='Ref_to_Macro'>Int32GetDatum</span></a><span class='Parentheses'>(</span>strlen<span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN395"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN58"><span class='Ref_to_Member'>wrds</span></a><span class='Delimiter'>[</span><a href="dict_thesaurus.c.html#LN397"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="dict_thesaurus.c.html#LN40"><span class='Ref_to_Member'>lexeme</span></a><span class='Parentheses'>))</span><span class='Delimiter'>, 
</span>                                                     <a href="../../include/postgres.h.html#LN561"><span class='Ref_to_Macro'>PointerGetDatum</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="dict_thesaurus.c.html#LN405"><span class='Ref_To_Local'>ptr</span></a><span class='Parentheses'>) 
</span>                <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_CONFIG_FILE_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"thesaurus sample word \"%s\" isn't recognized by subdictionary (rule %d)"</span><span class='Delimiter'>, 
</span>                                <a href="dict_thesaurus.c.html#LN395"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN58"><span class='Ref_to_Member'>wrds</span></a><span class='Delimiter'>[</span><a href="dict_thesaurus.c.html#LN397"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="dict_thesaurus.c.html#LN40"><span class='Ref_to_Member'>lexeme</span></a><span class='Delimiter'>, 
</span>                                <a href="dict_thesaurus.c.html#LN395"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN58"><span class='Ref_to_Member'>wrds</span></a><span class='Delimiter'>[</span><a href="dict_thesaurus.c.html#LN397"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="dict_thesaurus.c.html#LN41"><span class='Ref_to_Member'>entries</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN31"><span class='Ref_to_Member'>idsubst</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN405"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/ts_public.h.html#LN110"><span class='Ref_to_Member'>lexeme</span></a><span class='Parentheses'>))</span> 
                <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_CONFIG_FILE_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"thesaurus sample word \"%s\" is a stop word (rule %d)"</span><span class='Delimiter'>, 
</span>                                <a href="dict_thesaurus.c.html#LN395"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN58"><span class='Ref_to_Member'>wrds</span></a><span class='Delimiter'>[</span><a href="dict_thesaurus.c.html#LN397"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="dict_thesaurus.c.html#LN40"><span class='Ref_to_Member'>lexeme</span></a><span class='Delimiter'>, 
</span>                                <a href="dict_thesaurus.c.html#LN395"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN58"><span class='Ref_to_Member'>wrds</span></a><span class='Delimiter'>[</span><a href="dict_thesaurus.c.html#LN397"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="dict_thesaurus.c.html#LN41"><span class='Ref_to_Member'>entries</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN31"><span class='Ref_to_Member'>idsubst</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../utils/error/elog.c.html#LN985"><span class='Ref_to_Func'>errhint</span></a><span class='Parentheses'>(</span><span class='String'>"Use \"?\" to represent a stop word within a sample phrase."</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN405"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/ts_public.h.html#LN110"><span class='Ref_to_Member'>lexeme</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span><a name="LN434"></a>                    <a href="../../include/tsearch/ts_public.h.html#LN87"><span class='Ref_to_Typedef'>TSLexeme</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>remptr</span> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN405"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; 
</span><a name="LN435"></a>                    <span class='Keyword'>int</span>         <span class='Declare_Local'>tnvar</span> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span><a name="LN436"></a>                    <span class='Keyword'>int</span>         <span class='Declare_Local'>curvar</span> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN405"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/ts_public.h.html#LN106"><span class='Ref_to_Member'>nvariant</span></a><span class='Delimiter'>; 
</span> 
                    <span class='Comment_Multi_Line'>/* compute n words in one variant */ 
</span>                    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN434"><span class='Ref_To_Local'>remptr</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/ts_public.h.html#LN110"><span class='Ref_to_Member'>lexeme</span></a><span class='Parentheses'>) 
</span>                    <span class='Delimiter'>{ 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN434"><span class='Ref_To_Local'>remptr</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/ts_public.h.html#LN106"><span class='Ref_to_Member'>nvariant</span></a> <span class='Operator'>!= </span><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN434"><span class='Ref_To_Local'>remptr</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>nvariant<span class='Parentheses'>)</span> 
                            <span class='Control'>break</span><span class='Delimiter'>; 
</span>                        <a href="dict_thesaurus.c.html#LN435"><span class='Ref_To_Local'>tnvar</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>                        <a href="dict_thesaurus.c.html#LN434"><span class='Ref_To_Local'>remptr</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span> 
                    <a href="dict_thesaurus.c.html#LN434"><span class='Ref_To_Local'>remptr</span></a> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN405"><span class='Ref_To_Local'>ptr</span></a><span class='Delimiter'>; 
</span>                    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN434"><span class='Ref_To_Local'>remptr</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/ts_public.h.html#LN110"><span class='Ref_to_Member'>lexeme</span></a> <span class='Operator'>&& </span><a href="dict_thesaurus.c.html#LN434"><span class='Ref_To_Local'>remptr</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/ts_public.h.html#LN106"><span class='Ref_to_Member'>nvariant</span></a> <span class='Operator'>== </span><a href="dict_thesaurus.c.html#LN436"><span class='Ref_To_Local'>curvar</span></a><span class='Parentheses'>) 
</span>                    <span class='Delimiter'>{ 
</span>                        <a href="dict_thesaurus.c.html#LN400"><span class='Ref_To_Local'>newwrds</span></a> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN306"><span class='Ref_to_Func'>addCompiledLexeme</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN400"><span class='Ref_To_Local'>newwrds</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="dict_thesaurus.c.html#LN398"><span class='Ref_To_Local'>nnw</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="dict_thesaurus.c.html#LN399"><span class='Ref_To_Local'>tnm</span></a><span class='Delimiter'>, </span><a href="dict_thesaurus.c.html#LN434"><span class='Ref_To_Local'>remptr</span></a><span class='Delimiter'>, </span><a href="dict_thesaurus.c.html#LN395"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN58"><span class='Ref_to_Member'>wrds</span></a><span class='Delimiter'>[</span><a href="dict_thesaurus.c.html#LN397"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="dict_thesaurus.c.html#LN41"><span class='Ref_to_Member'>entries</span></a><span class='Delimiter'>, </span><a href="dict_thesaurus.c.html#LN435"><span class='Ref_To_Local'>tnvar</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <a href="dict_thesaurus.c.html#LN434"><span class='Ref_To_Local'>remptr</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span> 
                    <a href="dict_thesaurus.c.html#LN405"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN434"><span class='Ref_To_Local'>remptr</span></a><span class='Delimiter'>; 
</span>                <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end while ptr-&GT;lexeme &raquo; </span> 
            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
 
        <a href="../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN395"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN58"><span class='Ref_to_Member'>wrds</span></a><span class='Delimiter'>[</span><a href="dict_thesaurus.c.html#LN397"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="dict_thesaurus.c.html#LN40"><span class='Ref_to_Member'>lexeme</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN395"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN58"><span class='Ref_to_Member'>wrds</span></a><span class='Delimiter'>[</span><a href="dict_thesaurus.c.html#LN397"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="dict_thesaurus.c.html#LN41"><span class='Ref_to_Member'>entries</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;d-&GT;nwrds;i++ &raquo; </span> 
 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN395"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN58"><span class='Ref_to_Member'>wrds</span></a><span class='Parentheses'>) 
</span>        <a href="../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN395"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN58"><span class='Ref_to_Member'>wrds</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="dict_thesaurus.c.html#LN395"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN58"><span class='Ref_to_Member'>wrds</span></a> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN400"><span class='Ref_To_Local'>newwrds</span></a><span class='Delimiter'>; 
</span>    <a href="dict_thesaurus.c.html#LN395"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN59"><span class='Ref_to_Member'>nwrds</span></a> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN398"><span class='Ref_To_Local'>nnw</span></a><span class='Delimiter'>; 
</span>    <a href="dict_thesaurus.c.html#LN395"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN60"><span class='Ref_to_Member'>ntwrds</span></a> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN399"><span class='Ref_To_Local'>tnm</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN395"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN59"><span class='Ref_to_Member'>nwrds</span></a> <span class='Operator'>&GT; </span><span class='Number'>1</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../include/port.h.html#LN439"><span class='Ref_to_Macro'>qsort</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN395"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN58"><span class='Ref_to_Member'>wrds</span></a><span class='Delimiter'>, </span><a href="dict_thesaurus.c.html#LN395"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN59"><span class='Ref_to_Member'>nwrds</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN38"><span class='Ref_to_Typedef'>TheLexeme</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="dict_thesaurus.c.html#LN381"><span class='Ref_to_Func'>cmpTheLexeme</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* uniq */ 
</span>        <a href="dict_thesaurus.c.html#LN400"><span class='Ref_To_Local'>newwrds</span></a> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN395"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN58"><span class='Ref_to_Member'>wrds</span></a><span class='Delimiter'>; 
</span>        <a href="dict_thesaurus.c.html#LN401"><span class='Ref_To_Local'>ptrwrds</span></a> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN395"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN58"><span class='Ref_to_Member'>wrds</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN401"><span class='Ref_To_Local'>ptrwrds</span></a> <span class='Operator'>- </span><a href="dict_thesaurus.c.html#LN395"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN58"><span class='Ref_to_Member'>wrds</span></a> <span class='Operator'>&LT; </span><a href="dict_thesaurus.c.html#LN395"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN59"><span class='Ref_to_Member'>nwrds</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN359"><span class='Ref_to_Func'>cmpLexeme</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN401"><span class='Ref_To_Local'>ptrwrds</span></a><span class='Delimiter'>, </span><a href="dict_thesaurus.c.html#LN400"><span class='Ref_To_Local'>newwrds</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN337"><span class='Ref_to_Func'>cmpLexemeInfo</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN401"><span class='Ref_To_Local'>ptrwrds</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN41"><span class='Ref_to_Member'>entries</span></a><span class='Delimiter'>, </span><a href="dict_thesaurus.c.html#LN400"><span class='Ref_To_Local'>newwrds</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN41"><span class='Ref_to_Member'>entries</span></a><span class='Parentheses'>))</span> 
                <span class='Delimiter'>{ 
</span>                    <a href="dict_thesaurus.c.html#LN401"><span class='Ref_To_Local'>ptrwrds</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN41"><span class='Ref_to_Member'>entries</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN34"><span class='Ref_to_Member'>nextentry</span></a> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN400"><span class='Ref_To_Local'>newwrds</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN41"><span class='Ref_to_Member'>entries</span></a><span class='Delimiter'>; 
</span>                    <a href="dict_thesaurus.c.html#LN400"><span class='Ref_To_Local'>newwrds</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN41"><span class='Ref_to_Member'>entries</span></a> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN401"><span class='Ref_To_Local'>ptrwrds</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN41"><span class='Ref_to_Member'>entries</span></a><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>else</span> 
                    <a href="../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN401"><span class='Ref_To_Local'>ptrwrds</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN41"><span class='Ref_to_Member'>entries</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN401"><span class='Ref_To_Local'>ptrwrds</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN40"><span class='Ref_to_Member'>lexeme</span></a><span class='Parentheses'>) 
</span>                    <a href="../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN401"><span class='Ref_To_Local'>ptrwrds</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN40"><span class='Ref_to_Member'>lexeme</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> 
            <span class='Delimiter'>{ 
</span>                <a href="dict_thesaurus.c.html#LN400"><span class='Ref_To_Local'>newwrds</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>                <span class='Operator'>*</span><a href="dict_thesaurus.c.html#LN400"><span class='Ref_To_Local'>newwrds</span></a> <span class='Operator'>= *</span><a href="dict_thesaurus.c.html#LN401"><span class='Ref_To_Local'>ptrwrds</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
            <a href="dict_thesaurus.c.html#LN401"><span class='Ref_To_Local'>ptrwrds</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end while ptrwrds-d-&GT;wrds&LT;d-&GT;nw... &raquo; </span> 
 
        <a href="dict_thesaurus.c.html#LN395"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN59"><span class='Ref_to_Member'>nwrds</span></a> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN400"><span class='Ref_To_Local'>newwrds</span></a> <span class='Operator'>- </span><a href="dict_thesaurus.c.html#LN395"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN58"><span class='Ref_to_Member'>wrds</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <a href="dict_thesaurus.c.html#LN395"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN58"><span class='Ref_to_Member'>wrds</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN38"><span class='Ref_to_Typedef'>TheLexeme</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN36"><span class='Ref_to_Proto'>repalloc</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN395"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN58"><span class='Ref_to_Member'>wrds</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN38"><span class='Ref_to_Typedef'>TheLexeme</span></a><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="dict_thesaurus.c.html#LN395"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN59"><span class='Ref_to_Member'>nwrds</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if d-&GT;nwrds&GT;1 &raquo; </span> 
<span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end compileTheLexeme &raquo; </span> 
 
<span class='Keyword'>static void 
</span><a name="LN506"></a><span class='Declare_Function'>compileTheSubstitute</span><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN51"><span class='Ref_to_Typedef'>DictThesaurus</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>d</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN508"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN508"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="dict_thesaurus.c.html#LN508"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="dict_thesaurus.c.html#LN506"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN66"><span class='Ref_to_Member'>nsubst</span></a><span class='Delimiter'>; </span><a href="dict_thesaurus.c.html#LN508"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN512"></a>        <a href="../../include/tsearch/ts_public.h.html#LN87"><span class='Ref_to_Typedef'>TSLexeme</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>rem</span> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN506"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN65"><span class='Ref_to_Member'>subst</span></a><span class='Delimiter'>[</span><a href="dict_thesaurus.c.html#LN508"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="dict_thesaurus.c.html#LN48"><span class='Ref_to_Member'>res</span></a><span class='Delimiter'>, 
</span><a name="LN513"></a>                   <span class='Operator'>*</span><span class='Declare_Local'>outptr</span><span class='Delimiter'>, 
</span><a name="LN514"></a>                   <span class='Operator'>*</span><span class='Declare_Local'>inptr</span><span class='Delimiter'>; 
</span><a name="LN515"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>n</span> <span class='Operator'>= </span><span class='Number'>2</span><span class='Delimiter'>; 
</span> 
        <a href="dict_thesaurus.c.html#LN513"><span class='Ref_To_Local'>outptr</span></a> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN506"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN65"><span class='Ref_to_Member'>subst</span></a><span class='Delimiter'>[</span><a href="dict_thesaurus.c.html#LN508"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="dict_thesaurus.c.html#LN48"><span class='Ref_to_Member'>res</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/tsearch/ts_public.h.html#LN87"><span class='Ref_to_Typedef'>TSLexeme</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/tsearch/ts_public.h.html#LN87"><span class='Ref_to_Typedef'>TSLexeme</span></a><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="dict_thesaurus.c.html#LN515"><span class='Ref_To_Local'>n</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="dict_thesaurus.c.html#LN513"><span class='Ref_To_Local'>outptr</span></a><span class='Operator'>-&GT;</span>lexeme <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>        <a href="dict_thesaurus.c.html#LN514"><span class='Ref_To_Local'>inptr</span></a> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN512"><span class='Ref_To_Local'>rem</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN514"><span class='Ref_To_Local'>inptr</span></a> <span class='Operator'>&& </span><a href="dict_thesaurus.c.html#LN514"><span class='Ref_To_Local'>inptr</span></a><span class='Operator'>-&GT;</span>lexeme<span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN523"></a>            <a href="../../include/tsearch/ts_public.h.html#LN87"><span class='Ref_to_Typedef'>TSLexeme</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lexized</span><span class='Delimiter'>, 
</span><a name="LN524"></a>                        <span class='Declare_Local'>tmplex</span><span class='Delimiter'>[</span><span class='Number'>2</span><span class='Delimiter'>]; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN514"><span class='Ref_To_Local'>inptr</span></a><span class='Operator'>-&GT;</span>flags <span class='Operator'>& </span><a href="dict_thesaurus.c.html#LN27"><span class='Ref_to_Const'>DT_USEASIS</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{</span>                   <span class='Comment_Single_Line'>/* do not lexize */ 
</span>                <a href="dict_thesaurus.c.html#LN524"><span class='Ref_To_Local'>tmplex</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>= *</span><a href="dict_thesaurus.c.html#LN514"><span class='Ref_To_Local'>inptr</span></a><span class='Delimiter'>; 
</span>                <a href="dict_thesaurus.c.html#LN524"><span class='Ref_To_Local'>tmplex</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../include/tsearch/ts_public.h.html#LN108"><span class='Ref_to_Member'>flags</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>                <a href="dict_thesaurus.c.html#LN524"><span class='Ref_To_Local'>tmplex</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../include/tsearch/ts_public.h.html#LN110"><span class='Ref_to_Member'>lexeme</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>                <a href="dict_thesaurus.c.html#LN523"><span class='Ref_To_Local'>lexized</span></a> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN524"><span class='Ref_To_Local'>tmplex</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> 
            <span class='Delimiter'>{ 
</span>                <a href="dict_thesaurus.c.html#LN523"><span class='Ref_To_Local'>lexized</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/tsearch/ts_public.h.html#LN87"><span class='Ref_to_Typedef'>TSLexeme</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/postgres.h.html#LN554"><span class='Ref_to_Macro'>DatumGetPointer</span></a><span class='Parentheses'>(</span> 
                                                       <a href="../../include/fmgr.h.html#LN607"><span class='Ref_to_Macro'>FunctionCall4</span></a><span class='Parentheses'>(</span> 
                                                       <span class='Operator'>&</span><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN506"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN55"><span class='Ref_to_Member'>subdict</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/ts_cache.h.html#LN58"><span class='Ref_to_Member'>lexize</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                       <a href="../../include/postgres.h.html#LN561"><span class='Ref_to_Macro'>PointerGetDatum</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN506"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN55"><span class='Ref_to_Member'>subdict</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/ts_cache.h.html#LN61"><span class='Ref_to_Member'>dictData</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                              <a href="../../include/postgres.h.html#LN561"><span class='Ref_to_Macro'>PointerGetDatum</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN514"><span class='Ref_To_Local'>inptr</span></a><span class='Operator'>-&GT;</span>lexeme<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                        <a href="../../include/postgres.h.html#LN484"><span class='Ref_to_Macro'>Int32GetDatum</span></a><span class='Parentheses'>(</span>strlen<span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN514"><span class='Ref_To_Local'>inptr</span></a><span class='Operator'>-&GT;</span>lexeme<span class='Parentheses'>))</span><span class='Delimiter'>, 
</span>                                                        <a href="../../include/postgres.h.html#LN561"><span class='Ref_to_Macro'>PointerGetDatum</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
                                                                     <span class='Parentheses'>)</span> 
                    <span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN523"><span class='Ref_To_Local'>lexized</span></a> <span class='Operator'>&& </span><a href="dict_thesaurus.c.html#LN523"><span class='Ref_To_Local'>lexized</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/ts_public.h.html#LN110"><span class='Ref_to_Member'>lexeme</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span><a name="LN548"></a>                <span class='Keyword'>int</span>         <span class='Declare_Local'>toset</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN523"><span class='Ref_To_Local'>lexized</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/ts_public.h.html#LN110"><span class='Ref_to_Member'>lexeme</span></a> <span class='Operator'>&& </span><a href="dict_thesaurus.c.html#LN513"><span class='Ref_To_Local'>outptr</span></a> <span class='Operator'>!= </span><a href="dict_thesaurus.c.html#LN506"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN65"><span class='Ref_to_Member'>subst</span></a><span class='Delimiter'>[</span><a href="dict_thesaurus.c.html#LN508"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="dict_thesaurus.c.html#LN48"><span class='Ref_to_Member'>res</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN513"><span class='Ref_To_Local'>outptr</span></a> <span class='Operator'>- </span><a href="dict_thesaurus.c.html#LN506"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN65"><span class='Ref_to_Member'>subst</span></a><span class='Delimiter'>[</span><a href="dict_thesaurus.c.html#LN508"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="dict_thesaurus.c.html#LN48"><span class='Ref_to_Member'>res</span></a><span class='Parentheses'>) </span><span class='Operator'>: -</span><span class='Number'>1</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN523"><span class='Ref_To_Local'>lexized</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/ts_public.h.html#LN110"><span class='Ref_to_Member'>lexeme</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN513"><span class='Ref_To_Local'>outptr</span></a> <span class='Operator'>- </span><a href="dict_thesaurus.c.html#LN506"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN65"><span class='Ref_to_Member'>subst</span></a><span class='Delimiter'>[</span><a href="dict_thesaurus.c.html#LN508"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="dict_thesaurus.c.html#LN48"><span class='Ref_to_Member'>res</span></a> <span class='Operator'>+ </span><span class='Number'>1</span> <span class='Operator'>&GT;= </span><a href="dict_thesaurus.c.html#LN515"><span class='Ref_To_Local'>n</span></a><span class='Parentheses'>) 
</span>                    <span class='Delimiter'>{ 
</span><a name="LN554"></a>                        <span class='Keyword'>int</span>         <span class='Declare_Local'>diff</span> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN513"><span class='Ref_To_Local'>outptr</span></a> <span class='Operator'>- </span><a href="dict_thesaurus.c.html#LN506"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN65"><span class='Ref_to_Member'>subst</span></a><span class='Delimiter'>[</span><a href="dict_thesaurus.c.html#LN508"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="dict_thesaurus.c.html#LN48"><span class='Ref_to_Member'>res</span></a><span class='Delimiter'>; 
</span> 
                        <a href="dict_thesaurus.c.html#LN515"><span class='Ref_To_Local'>n</span></a> <span class='Operator'>*= </span><span class='Number'>2</span><span class='Delimiter'>; 
</span>                        <a href="dict_thesaurus.c.html#LN506"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN65"><span class='Ref_to_Member'>subst</span></a><span class='Delimiter'>[</span><a href="dict_thesaurus.c.html#LN508"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="dict_thesaurus.c.html#LN48"><span class='Ref_to_Member'>res</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/tsearch/ts_public.h.html#LN87"><span class='Ref_to_Typedef'>TSLexeme</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN36"><span class='Ref_to_Proto'>repalloc</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN506"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN65"><span class='Ref_to_Member'>subst</span></a><span class='Delimiter'>[</span><a href="dict_thesaurus.c.html#LN508"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="dict_thesaurus.c.html#LN48"><span class='Ref_to_Member'>res</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/tsearch/ts_public.h.html#LN87"><span class='Ref_to_Typedef'>TSLexeme</span></a><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="dict_thesaurus.c.html#LN515"><span class='Ref_To_Local'>n</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <a href="dict_thesaurus.c.html#LN513"><span class='Ref_To_Local'>outptr</span></a> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN506"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN65"><span class='Ref_to_Member'>subst</span></a><span class='Delimiter'>[</span><a href="dict_thesaurus.c.html#LN508"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="dict_thesaurus.c.html#LN48"><span class='Ref_to_Member'>res</span></a> <span class='Operator'>+ </span><a href="dict_thesaurus.c.html#LN554"><span class='Ref_To_Local'>diff</span></a><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span> 
                    <span class='Operator'>*</span><a href="dict_thesaurus.c.html#LN513"><span class='Ref_To_Local'>outptr</span></a> <span class='Operator'>= *</span><a href="dict_thesaurus.c.html#LN523"><span class='Ref_To_Local'>lexized</span></a><span class='Delimiter'>; 
</span>                    <a href="dict_thesaurus.c.html#LN513"><span class='Ref_To_Local'>outptr</span></a><span class='Operator'>-&GT;</span>lexeme <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN32"><span class='Ref_to_Proto'>pstrdup</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN523"><span class='Ref_To_Local'>lexized</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/ts_public.h.html#LN110"><span class='Ref_to_Member'>lexeme</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <a href="dict_thesaurus.c.html#LN513"><span class='Ref_To_Local'>outptr</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>                    <a href="dict_thesaurus.c.html#LN523"><span class='Ref_To_Local'>lexized</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN548"><span class='Ref_To_Local'>toset</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                    <a href="dict_thesaurus.c.html#LN506"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN65"><span class='Ref_to_Member'>subst</span></a><span class='Delimiter'>[</span><a href="dict_thesaurus.c.html#LN508"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="dict_thesaurus.c.html#LN48"><span class='Ref_to_Member'>res</span></a><span class='Delimiter'>[</span><a href="dict_thesaurus.c.html#LN548"><span class='Ref_To_Local'>toset</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../include/tsearch/ts_public.h.html#LN108"><span class='Ref_to_Member'>flags</span></a> <span class='Operator'>|= </span><a href="../../include/tsearch/ts_public.h.html#LN114"><span class='Ref_to_Const'>TSL_ADDPOS</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if lexized&&lexized-&GT;lex... &raquo; </span> 
            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN523"><span class='Ref_To_Local'>lexized</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_CONFIG_FILE_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"thesaurus substitute word \"%s\" is a stop word (rule %d)"</span><span class='Delimiter'>, 
</span>                                <a href="dict_thesaurus.c.html#LN514"><span class='Ref_To_Local'>inptr</span></a><span class='Operator'>-&GT;</span>lexeme<span class='Delimiter'>, </span><a href="dict_thesaurus.c.html#LN508"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> 
            <span class='Delimiter'>{ 
</span>                <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_CONFIG_FILE_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"thesaurus substitute word \"%s\" isn't recognized by subdictionary (rule %d)"</span><span class='Delimiter'>, 
</span>                                <a href="dict_thesaurus.c.html#LN514"><span class='Ref_To_Local'>inptr</span></a><span class='Operator'>-&GT;</span>lexeme<span class='Delimiter'>, </span><a href="dict_thesaurus.c.html#LN508"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN514"><span class='Ref_To_Local'>inptr</span></a><span class='Operator'>-&GT;</span>lexeme<span class='Parentheses'>) 
</span>                <a href="../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN514"><span class='Ref_To_Local'>inptr</span></a><span class='Operator'>-&GT;</span>lexeme<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="dict_thesaurus.c.html#LN514"><span class='Ref_To_Local'>inptr</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end while inptr&&inptr-&GT;lexeme &raquo; </span> 
 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN513"><span class='Ref_To_Local'>outptr</span></a> <span class='Operator'>== </span><a href="dict_thesaurus.c.html#LN506"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN65"><span class='Ref_to_Member'>subst</span></a><span class='Delimiter'>[</span><a href="dict_thesaurus.c.html#LN508"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="dict_thesaurus.c.html#LN48"><span class='Ref_to_Member'>res</span></a><span class='Parentheses'>) 
</span>            <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_CONFIG_FILE_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"thesaurus substitute phrase is empty (rule %d)"</span><span class='Delimiter'>, 
</span>                            <a href="dict_thesaurus.c.html#LN508"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
        <a href="dict_thesaurus.c.html#LN506"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN65"><span class='Ref_to_Member'>subst</span></a><span class='Delimiter'>[</span><a href="dict_thesaurus.c.html#LN508"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="dict_thesaurus.c.html#LN47"><span class='Ref_to_Member'>reslen</span></a> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN513"><span class='Ref_To_Local'>outptr</span></a> <span class='Operator'>- </span><a href="dict_thesaurus.c.html#LN506"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN65"><span class='Ref_to_Member'>subst</span></a><span class='Delimiter'>[</span><a href="dict_thesaurus.c.html#LN508"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="dict_thesaurus.c.html#LN48"><span class='Ref_to_Member'>res</span></a><span class='Delimiter'>; 
</span> 
        <a href="../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN512"><span class='Ref_To_Local'>rem</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;d-&GT;nsubst;i++ &raquo; </span> 
<span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end compileTheSubstitute &raquo; </span> 
 
<a href="../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN604"></a><span class='Declare_Function'>thesaurus_init</span><span class='Parentheses'>(</span><a href="../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN606"></a>    <a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>dictoptions</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/fmgr.h.html#LN240"><span class='Ref_to_Macro'>PG_GETARG_POINTER</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN607"></a>    <a href="dict_thesaurus.c.html#LN51"><span class='Ref_to_Typedef'>DictThesaurus</span></a> <span class='Operator'>*</span><span class='Declare_Local'>d</span><span class='Delimiter'>; 
</span><a name="LN608"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>subdictname</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN609"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>fileloaded</span> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span><a name="LN610"></a>    <a href="../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>l</span><span class='Delimiter'>; 
</span> 
    <a href="dict_thesaurus.c.html#LN607"><span class='Ref_To_Local'>d</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN51"><span class='Ref_to_Typedef'>DictThesaurus</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN51"><span class='Ref_to_Typedef'>DictThesaurus</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN610"><span class='Ref_To_Local'>l</span></a><span class='Delimiter'>, </span><a href="dict_thesaurus.c.html#LN606"><span class='Ref_To_Local'>dictoptions</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN616"></a>        <a href="../../include/nodes/parsenodes.h.html#LN715"><span class='Ref_to_Struct'>DefElem</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>defel</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/nodes/parsenodes.h.html#LN715"><span class='Ref_to_Struct'>DefElem</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN610"><span class='Ref_To_Local'>l</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../port/pgstrcasecmp.c.html#LN34"><span class='Ref_to_Func'>pg_strcasecmp</span></a><span class='Parentheses'>(</span><span class='String'>"DictFile"</span><span class='Delimiter'>, </span><a href="dict_thesaurus.c.html#LN616"><span class='Ref_To_Local'>defel</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN719"><span class='Ref_to_Member'>defname</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN609"><span class='Ref_To_Local'>fileloaded</span></a><span class='Parentheses'>) 
</span>                <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INVALID_PARAMETER_VALUE<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"multiple DictFile parameters"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>            <a href="dict_thesaurus.c.html#LN166"><span class='Ref_to_Func'>thesaurusRead</span></a><span class='Parentheses'>(</span><a href="../commands/define.c.html#LN47"><span class='Ref_to_Func'>defGetString</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN616"><span class='Ref_To_Local'>defel</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="dict_thesaurus.c.html#LN607"><span class='Ref_To_Local'>d</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="dict_thesaurus.c.html#LN609"><span class='Ref_To_Local'>fileloaded</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../port/pgstrcasecmp.c.html#LN34"><span class='Ref_to_Func'>pg_strcasecmp</span></a><span class='Parentheses'>(</span><span class='String'>"Dictionary"</span><span class='Delimiter'>, </span><a href="dict_thesaurus.c.html#LN616"><span class='Ref_To_Local'>defel</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN719"><span class='Ref_to_Member'>defname</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN608"><span class='Ref_To_Local'>subdictname</span></a><span class='Parentheses'>) 
</span>                <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INVALID_PARAMETER_VALUE<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"multiple Dictionary parameters"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>            <a href="dict_thesaurus.c.html#LN608"><span class='Ref_To_Local'>subdictname</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN32"><span class='Ref_to_Proto'>pstrdup</span></a><span class='Parentheses'>(</span><a href="../commands/define.c.html#LN47"><span class='Ref_to_Func'>defGetString</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN616"><span class='Ref_To_Local'>defel</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INVALID_PARAMETER_VALUE<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"unrecognized Thesaurus parameter: \"%s\""</span><span class='Delimiter'>, 
</span>                            <a href="dict_thesaurus.c.html#LN616"><span class='Ref_To_Local'>defel</span></a><span class='Operator'>-&GT;</span><a href="../../include/nodes/parsenodes.h.html#LN719"><span class='Ref_to_Member'>defname</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="dict_thesaurus.c.html#LN609"><span class='Ref_To_Local'>fileloaded</span></a><span class='Parentheses'>) 
</span>        <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INVALID_PARAMETER_VALUE<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"missing DictFile parameter"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="dict_thesaurus.c.html#LN608"><span class='Ref_To_Local'>subdictname</span></a><span class='Parentheses'>) 
</span>        <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INVALID_PARAMETER_VALUE<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"missing Dictionary parameter"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <a href="dict_thesaurus.c.html#LN607"><span class='Ref_To_Local'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN54"><span class='Ref_to_Member'>subdictOid</span></a> <span class='Operator'>= </span><a href="../../include/catalog/namespace.h.html#LN100"><span class='Ref_to_Proto'>get_ts_dict_oid</span></a><span class='Parentheses'>(</span><a href="../../include/utils/regproc.h.html#LN17"><span class='Ref_to_Proto'>stringToQualifiedNameList</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN608"><span class='Ref_To_Local'>subdictname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="dict_thesaurus.c.html#LN607"><span class='Ref_To_Local'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN55"><span class='Ref_to_Member'>subdict</span></a> <span class='Operator'>= </span><a href="../../include/tsearch/ts_cache.h.html#LN90"><span class='Ref_to_Proto'>lookup_ts_dictionary_cache</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN607"><span class='Ref_To_Local'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN54"><span class='Ref_to_Member'>subdictOid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="dict_thesaurus.c.html#LN394"><span class='Ref_to_Func'>compileTheLexeme</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN607"><span class='Ref_To_Local'>d</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="dict_thesaurus.c.html#LN505"><span class='Ref_to_Func'>compileTheSubstitute</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN607"><span class='Ref_To_Local'>d</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../include/fmgr.h.html#LN320"><span class='Ref_to_Macro'>PG_RETURN_POINTER</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN607"><span class='Ref_To_Local'>d</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end thesaurus_init &raquo; </span> 
 
<span class='Keyword'>static </span><a href="dict_thesaurus.c.html#LN29"><span class='Ref_to_Struct'>LexemeInfo</span></a> <span class='Operator'>* 
</span><a name="LN663"></a><span class='Declare_Function'>findTheLexeme</span><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN51"><span class='Ref_to_Typedef'>DictThesaurus</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>d</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>lexeme</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN665"></a>    <a href="dict_thesaurus.c.html#LN38"><span class='Ref_to_Typedef'>TheLexeme</span></a>   <span class='Declare_Local'>key</span><span class='Delimiter'>, 
</span><a name="LN666"></a>               <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN663"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN59"><span class='Ref_to_Member'>nwrds</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <a href="dict_thesaurus.c.html#LN665"><span class='Ref_To_Local'>key</span></a><span class='Operator'>.</span><a href="dict_thesaurus.c.html#LN40"><span class='Ref_to_Member'>lexeme</span></a> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN663"><span class='Ref_to_Parameter'>lexeme</span></a><span class='Delimiter'>; 
</span>    <a href="dict_thesaurus.c.html#LN665"><span class='Ref_To_Local'>key</span></a><span class='Operator'>.</span><a href="dict_thesaurus.c.html#LN41"><span class='Ref_to_Member'>entries</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <a href="dict_thesaurus.c.html#LN666"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span>bsearch<span class='Parentheses'>(</span><span class='Operator'>&</span><a href="dict_thesaurus.c.html#LN665"><span class='Ref_To_Local'>key</span></a><span class='Delimiter'>, </span><a href="dict_thesaurus.c.html#LN663"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN58"><span class='Ref_to_Member'>wrds</span></a><span class='Delimiter'>, </span><a href="dict_thesaurus.c.html#LN663"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN59"><span class='Ref_to_Member'>nwrds</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN38"><span class='Ref_to_Typedef'>TheLexeme</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="dict_thesaurus.c.html#LN375"><span class='Ref_to_Func'>cmpLexemeQ</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN666"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="dict_thesaurus.c.html#LN666"><span class='Ref_To_Local'>res</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN41"><span class='Ref_to_Member'>entries</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>static bool 
</span><a name="LN682"></a><span class='Declare_Function'>matchIdSubst</span><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN29"><span class='Ref_to_Struct'>LexemeInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>stored</span><span class='Delimiter'>, </span><a href="../../include/c.h.html#LN267"><span class='Ref_to_Typedef'>uint32</span></a> <span class='Declare_Parameter'>idsubst</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN684"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>res</span> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN682"><span class='Ref_to_Parameter'>stored</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="dict_thesaurus.c.html#LN684"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>for</span> <span class='Parentheses'>(</span><span class='Delimiter'>; </span><a href="dict_thesaurus.c.html#LN682"><span class='Ref_to_Parameter'>stored</span></a><span class='Delimiter'>; </span><a href="dict_thesaurus.c.html#LN682"><span class='Ref_to_Parameter'>stored</span></a> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN682"><span class='Ref_to_Parameter'>stored</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN35"><span class='Ref_to_Member'>nextvariant</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN682"><span class='Ref_to_Parameter'>stored</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN31"><span class='Ref_to_Member'>idsubst</span></a> <span class='Operator'>== </span><a href="dict_thesaurus.c.html#LN682"><span class='Ref_to_Parameter'>idsubst</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <a href="dict_thesaurus.c.html#LN684"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>return</span> <a href="dict_thesaurus.c.html#LN684"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>static </span><a href="dict_thesaurus.c.html#LN29"><span class='Ref_to_Struct'>LexemeInfo</span></a> <span class='Operator'>* 
</span><a name="LN702"></a><span class='Declare_Function'>findVariant</span><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN29"><span class='Ref_to_Struct'>LexemeInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>in</span><span class='Delimiter'>, </span><a href="dict_thesaurus.c.html#LN29"><span class='Ref_to_Struct'>LexemeInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>stored</span><span class='Delimiter'>, </span><a href="../../include/c.h.html#LN266"><span class='Ref_to_Typedef'>uint16</span></a> <span class='Declare_Parameter'>curpos</span><span class='Delimiter'>, </span><a href="dict_thesaurus.c.html#LN29"><span class='Ref_to_Struct'>LexemeInfo</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>newin</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>newn</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><span class='Delimiter'>;;</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN706"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN707"></a>        <a href="dict_thesaurus.c.html#LN29"><span class='Ref_to_Struct'>LexemeInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>ptr</span> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN702"><span class='Ref_to_Parameter'>newin</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]; 
</span> 
        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN706"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="dict_thesaurus.c.html#LN706"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="dict_thesaurus.c.html#LN702"><span class='Ref_to_Parameter'>newn</span></a><span class='Delimiter'>; </span><a href="dict_thesaurus.c.html#LN706"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN702"><span class='Ref_to_Parameter'>newin</span></a><span class='Delimiter'>[</span><a href="dict_thesaurus.c.html#LN706"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>&& </span><a href="dict_thesaurus.c.html#LN702"><span class='Ref_to_Parameter'>newin</span></a><span class='Delimiter'>[</span><a href="dict_thesaurus.c.html#LN706"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN31"><span class='Ref_to_Member'>idsubst</span></a> <span class='Operator'>&LT; </span><a href="dict_thesaurus.c.html#LN707"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN31"><span class='Ref_to_Member'>idsubst</span></a><span class='Parentheses'>) 
</span>                <a href="dict_thesaurus.c.html#LN702"><span class='Ref_to_Parameter'>newin</span></a><span class='Delimiter'>[</span><a href="dict_thesaurus.c.html#LN706"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN702"><span class='Ref_to_Parameter'>newin</span></a><span class='Delimiter'>[</span><a href="dict_thesaurus.c.html#LN706"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN34"><span class='Ref_to_Member'>nextentry</span></a><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN702"><span class='Ref_to_Parameter'>newin</span></a><span class='Delimiter'>[</span><a href="dict_thesaurus.c.html#LN706"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>                <span class='Control'>return</span> <a href="dict_thesaurus.c.html#LN702"><span class='Ref_to_Parameter'>in</span></a><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN702"><span class='Ref_to_Parameter'>newin</span></a><span class='Delimiter'>[</span><a href="dict_thesaurus.c.html#LN706"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN31"><span class='Ref_to_Member'>idsubst</span></a> <span class='Operator'>&GT; </span><a href="dict_thesaurus.c.html#LN707"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN31"><span class='Ref_to_Member'>idsubst</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <a href="dict_thesaurus.c.html#LN707"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN702"><span class='Ref_to_Parameter'>newin</span></a><span class='Delimiter'>[</span><a href="dict_thesaurus.c.html#LN706"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span>                <a href="dict_thesaurus.c.html#LN706"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= -</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>                <span class='Control'>continue</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
            <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN702"><span class='Ref_to_Parameter'>newin</span></a><span class='Delimiter'>[</span><a href="dict_thesaurus.c.html#LN706"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN31"><span class='Ref_to_Member'>idsubst</span></a> <span class='Operator'>== </span><a href="dict_thesaurus.c.html#LN707"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN31"><span class='Ref_to_Member'>idsubst</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN702"><span class='Ref_to_Parameter'>newin</span></a><span class='Delimiter'>[</span><a href="dict_thesaurus.c.html#LN706"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN32"><span class='Ref_to_Member'>posinsubst</span></a> <span class='Operator'>== </span><a href="dict_thesaurus.c.html#LN702"><span class='Ref_to_Parameter'>curpos</span></a> <span class='Operator'>&& </span><a href="dict_thesaurus.c.html#LN702"><span class='Ref_to_Parameter'>newin</span></a><span class='Delimiter'>[</span><a href="dict_thesaurus.c.html#LN706"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN33"><span class='Ref_to_Member'>tnvariant</span></a> <span class='Operator'>== </span><a href="dict_thesaurus.c.html#LN702"><span class='Ref_to_Parameter'>newn</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <a href="dict_thesaurus.c.html#LN707"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN702"><span class='Ref_to_Parameter'>newin</span></a><span class='Delimiter'>[</span><a href="dict_thesaurus.c.html#LN706"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span> 
                <a href="dict_thesaurus.c.html#LN702"><span class='Ref_to_Parameter'>newin</span></a><span class='Delimiter'>[</span><a href="dict_thesaurus.c.html#LN706"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN702"><span class='Ref_to_Parameter'>newin</span></a><span class='Delimiter'>[</span><a href="dict_thesaurus.c.html#LN706"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN34"><span class='Ref_to_Member'>nextentry</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN702"><span class='Ref_to_Parameter'>newin</span></a><span class='Delimiter'>[</span><a href="dict_thesaurus.c.html#LN706"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>                    <span class='Control'>return</span> <a href="dict_thesaurus.c.html#LN702"><span class='Ref_to_Parameter'>in</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN702"><span class='Ref_to_Parameter'>newin</span></a><span class='Delimiter'>[</span><a href="dict_thesaurus.c.html#LN706"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN31"><span class='Ref_to_Member'>idsubst</span></a> <span class='Operator'>!= </span><a href="dict_thesaurus.c.html#LN707"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN31"><span class='Ref_to_Member'>idsubst</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <a href="dict_thesaurus.c.html#LN707"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN702"><span class='Ref_to_Parameter'>newin</span></a><span class='Delimiter'>[</span><a href="dict_thesaurus.c.html#LN706"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span>                <a href="dict_thesaurus.c.html#LN706"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= -</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>                <span class='Control'>continue</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;newn;i++ &raquo; </span> 
 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN706"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>== </span><a href="dict_thesaurus.c.html#LN702"><span class='Ref_to_Parameter'>newn</span></a> <span class='Operator'>&& </span><a href="dict_thesaurus.c.html#LN681"><span class='Ref_to_Func'>matchIdSubst</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN702"><span class='Ref_to_Parameter'>stored</span></a><span class='Delimiter'>, </span><a href="dict_thesaurus.c.html#LN707"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN31"><span class='Ref_to_Member'>idsubst</span></a><span class='Parentheses'>)</span> <span class='Operator'>&& </span><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN702"><span class='Ref_to_Parameter'>in</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL </span><span class='Operator'>|| !</span><a href="dict_thesaurus.c.html#LN681"><span class='Ref_to_Func'>matchIdSubst</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN702"><span class='Ref_to_Parameter'>in</span></a><span class='Delimiter'>, </span><a href="dict_thesaurus.c.html#LN707"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN31"><span class='Ref_to_Member'>idsubst</span></a><span class='Parentheses'>)))</span> 
        <span class='Delimiter'>{</span>                       <span class='Comment_Single_Line'>/* found */ 
</span> 
            <a href="dict_thesaurus.c.html#LN707"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN35"><span class='Ref_to_Member'>nextvariant</span></a> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN702"><span class='Ref_to_Parameter'>in</span></a><span class='Delimiter'>; 
</span>            <a href="dict_thesaurus.c.html#LN702"><span class='Ref_to_Parameter'>in</span></a> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN707"><span class='Ref_To_Local'>ptr</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Comment_Multi_Line'>/* step forward */ 
</span>        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN706"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="dict_thesaurus.c.html#LN706"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="dict_thesaurus.c.html#LN702"><span class='Ref_to_Parameter'>newn</span></a><span class='Delimiter'>; </span><a href="dict_thesaurus.c.html#LN706"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>            <a href="dict_thesaurus.c.html#LN702"><span class='Ref_to_Parameter'>newin</span></a><span class='Delimiter'>[</span><a href="dict_thesaurus.c.html#LN706"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN702"><span class='Ref_to_Parameter'>newin</span></a><span class='Delimiter'>[</span><a href="dict_thesaurus.c.html#LN706"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN34"><span class='Ref_to_Member'>nextentry</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for ;; &raquo; </span> 
<span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end findVariant &raquo; </span> 
 
<span class='Keyword'>static </span><a href="../../include/tsearch/ts_public.h.html#LN87"><span class='Ref_to_Typedef'>TSLexeme</span></a> <span class='Operator'>* 
</span><a name="LN759"></a><span class='Declare_Function'>copyTSLexeme</span><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN44"><span class='Ref_to_Typedef'>TheSubstitute</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>ts</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN761"></a>    <a href="../../include/tsearch/ts_public.h.html#LN87"><span class='Ref_to_Typedef'>TSLexeme</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN762"></a>    <a href="../../include/c.h.html#LN266"><span class='Ref_to_Typedef'>uint16</span></a>      <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <a href="dict_thesaurus.c.html#LN761"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/tsearch/ts_public.h.html#LN87"><span class='Ref_to_Typedef'>TSLexeme</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/tsearch/ts_public.h.html#LN87"><span class='Ref_to_Typedef'>TSLexeme</span></a><span class='Parentheses'>) </span><span class='Operator'>* </span><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN759"><span class='Ref_to_Parameter'>ts</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN47"><span class='Ref_to_Member'>reslen</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN762"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="dict_thesaurus.c.html#LN762"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="dict_thesaurus.c.html#LN759"><span class='Ref_to_Parameter'>ts</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN47"><span class='Ref_to_Member'>reslen</span></a><span class='Delimiter'>; </span><a href="dict_thesaurus.c.html#LN762"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="dict_thesaurus.c.html#LN761"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>[</span><a href="dict_thesaurus.c.html#LN762"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN759"><span class='Ref_to_Parameter'>ts</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN48"><span class='Ref_to_Member'>res</span></a><span class='Delimiter'>[</span><a href="dict_thesaurus.c.html#LN762"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span>        <a href="dict_thesaurus.c.html#LN761"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>[</span><a href="dict_thesaurus.c.html#LN762"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../include/tsearch/ts_public.h.html#LN110"><span class='Ref_to_Member'>lexeme</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN32"><span class='Ref_to_Proto'>pstrdup</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN759"><span class='Ref_to_Parameter'>ts</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN48"><span class='Ref_to_Member'>res</span></a><span class='Delimiter'>[</span><a href="dict_thesaurus.c.html#LN762"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../include/tsearch/ts_public.h.html#LN110"><span class='Ref_to_Member'>lexeme</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="dict_thesaurus.c.html#LN761"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>[</span><a href="dict_thesaurus.c.html#LN759"><span class='Ref_to_Parameter'>ts</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN47"><span class='Ref_to_Member'>reslen</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../include/tsearch/ts_public.h.html#LN110"><span class='Ref_to_Member'>lexeme</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="dict_thesaurus.c.html#LN761"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>static </span><a href="../../include/tsearch/ts_public.h.html#LN87"><span class='Ref_to_Typedef'>TSLexeme</span></a> <span class='Operator'>* 
</span><a name="LN777"></a><span class='Declare_Function'>checkMatch</span><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN51"><span class='Ref_to_Typedef'>DictThesaurus</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>d</span><span class='Delimiter'>, </span><a href="dict_thesaurus.c.html#LN29"><span class='Ref_to_Struct'>LexemeInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>info</span><span class='Delimiter'>, </span><a href="../../include/c.h.html#LN266"><span class='Ref_to_Typedef'>uint16</span></a> <span class='Declare_Parameter'>curpos</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Declare_Parameter'>moreres</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Operator'>*</span><a href="dict_thesaurus.c.html#LN777"><span class='Ref_to_Parameter'>moreres</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN777"><span class='Ref_to_Parameter'>info</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN777"><span class='Ref_to_Parameter'>info</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN31"><span class='Ref_to_Member'>idsubst</span></a> <span class='Operator'>&LT; </span><a href="dict_thesaurus.c.html#LN777"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN66"><span class='Ref_to_Member'>nsubst</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN777"><span class='Ref_to_Parameter'>info</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN35"><span class='Ref_to_Member'>nextvariant</span></a><span class='Parentheses'>) 
</span>            <span class='Operator'>*</span><a href="dict_thesaurus.c.html#LN777"><span class='Ref_to_Parameter'>moreres</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN777"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN65"><span class='Ref_to_Member'>subst</span></a><span class='Delimiter'>[</span><a href="dict_thesaurus.c.html#LN777"><span class='Ref_to_Parameter'>info</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN31"><span class='Ref_to_Member'>idsubst</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="dict_thesaurus.c.html#LN46"><span class='Ref_to_Member'>lastlexeme</span></a> <span class='Operator'>== </span><a href="dict_thesaurus.c.html#LN777"><span class='Ref_to_Parameter'>curpos</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>return</span> <a href="dict_thesaurus.c.html#LN758"><span class='Ref_to_Func'>copyTSLexeme</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN777"><span class='Ref_to_Parameter'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN65"><span class='Ref_to_Member'>subst</span></a> <span class='Operator'>+ </span><a href="dict_thesaurus.c.html#LN777"><span class='Ref_to_Parameter'>info</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN31"><span class='Ref_to_Member'>idsubst</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="dict_thesaurus.c.html#LN777"><span class='Ref_to_Parameter'>info</span></a> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN777"><span class='Ref_to_Parameter'>info</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN35"><span class='Ref_to_Member'>nextvariant</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN794"></a><span class='Declare_Function'>thesaurus_lexize</span><span class='Parentheses'>(</span><a href="../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN796"></a>    <a href="dict_thesaurus.c.html#LN51"><span class='Ref_to_Typedef'>DictThesaurus</span></a> <span class='Operator'>*</span><span class='Declare_Local'>d</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN51"><span class='Ref_to_Typedef'>DictThesaurus</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/fmgr.h.html#LN240"><span class='Ref_to_Macro'>PG_GETARG_POINTER</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN797"></a>    <a href="../../include/tsearch/ts_public.h.html#LN122"><span class='Ref_to_Typedef'>DictSubState</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dstate</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/tsearch/ts_public.h.html#LN122"><span class='Ref_to_Typedef'>DictSubState</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/fmgr.h.html#LN240"><span class='Ref_to_Macro'>PG_GETARG_POINTER</span></a><span class='Parentheses'>(</span><span class='Number'>3</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN798"></a>    <a href="../../include/tsearch/ts_public.h.html#LN87"><span class='Ref_to_Typedef'>TSLexeme</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN799"></a>    <a href="dict_thesaurus.c.html#LN29"><span class='Ref_to_Struct'>LexemeInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>stored</span><span class='Delimiter'>, 
</span><a name="LN800"></a>               <span class='Operator'>*</span><span class='Declare_Local'>info</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN801"></a>    <a href="../../include/c.h.html#LN266"><span class='Ref_to_Typedef'>uint16</span></a>      <span class='Declare_Local'>curpos</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN802"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>moreres</span> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/fmgr.h.html#LN167"><span class='Ref_to_Macro'>PG_NARGS</span></a><span class='Parentheses'>() </span><span class='Operator'>!= </span><span class='Number'>4</span> <span class='Operator'>|| </span><a href="dict_thesaurus.c.html#LN797"><span class='Ref_To_Local'>dstate</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
        <a href="../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"forbidden call of thesaurus or nested call"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN797"><span class='Ref_To_Local'>dstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/ts_public.h.html#LN124"><span class='Ref_to_Member'>isend</span></a><span class='Parentheses'>) 
</span>        <a href="../../include/fmgr.h.html#LN320"><span class='Ref_to_Macro'>PG_RETURN_POINTER</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="dict_thesaurus.c.html#LN799"><span class='Ref_To_Local'>stored</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN29"><span class='Ref_to_Struct'>LexemeInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="dict_thesaurus.c.html#LN797"><span class='Ref_To_Local'>dstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/ts_public.h.html#LN127"><span class='Ref_to_Member'>private_state</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN799"><span class='Ref_To_Local'>stored</span></a><span class='Parentheses'>) 
</span>        <a href="dict_thesaurus.c.html#LN801"><span class='Ref_To_Local'>curpos</span></a> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN799"><span class='Ref_To_Local'>stored</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN32"><span class='Ref_to_Member'>posinsubst</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="dict_thesaurus.c.html#LN796"><span class='Ref_To_Local'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN55"><span class='Ref_to_Member'>subdict</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/ts_cache.h.html#LN54"><span class='Ref_to_Member'>isvalid</span></a><span class='Parentheses'>) 
</span>        <a href="dict_thesaurus.c.html#LN796"><span class='Ref_To_Local'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN55"><span class='Ref_to_Member'>subdict</span></a> <span class='Operator'>= </span><a href="../../include/tsearch/ts_cache.h.html#LN90"><span class='Ref_to_Proto'>lookup_ts_dictionary_cache</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN796"><span class='Ref_To_Local'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN54"><span class='Ref_to_Member'>subdictOid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="dict_thesaurus.c.html#LN798"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/tsearch/ts_public.h.html#LN87"><span class='Ref_to_Typedef'>TSLexeme</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/postgres.h.html#LN554"><span class='Ref_to_Macro'>DatumGetPointer</span></a><span class='Parentheses'>(</span><a href="../../include/fmgr.h.html#LN607"><span class='Ref_to_Macro'>FunctionCall4</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN796"><span class='Ref_To_Local'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN55"><span class='Ref_to_Member'>subdict</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/ts_cache.h.html#LN58"><span class='Ref_to_Member'>lexize</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                       <a href="../../include/postgres.h.html#LN561"><span class='Ref_to_Macro'>PointerGetDatum</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN796"><span class='Ref_To_Local'>d</span></a><span class='Operator'>-&GT;</span><a href="dict_thesaurus.c.html#LN55"><span class='Ref_to_Member'>subdict</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/ts_cache.h.html#LN61"><span class='Ref_to_Member'>dictData</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                                     <a href="../../include/fmgr.h.html#LN232"><span class='Ref_to_Macro'>PG_GETARG_DATUM</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                                     <a href="../../include/fmgr.h.html#LN232"><span class='Ref_to_Macro'>PG_GETARG_DATUM</span></a><span class='Parentheses'>(</span><span class='Number'>2</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                                     <a href="../../include/postgres.h.html#LN561"><span class='Ref_to_Macro'>PointerGetDatum</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN798"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>&& </span><a href="dict_thesaurus.c.html#LN798"><span class='Ref_To_Local'>res</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/ts_public.h.html#LN110"><span class='Ref_to_Member'>lexeme</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN825"></a>        <a href="../../include/tsearch/ts_public.h.html#LN87"><span class='Ref_to_Typedef'>TSLexeme</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>ptr</span> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN798"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, 
</span><a name="LN826"></a>                   <span class='Operator'>*</span><span class='Declare_Local'>basevar</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN825"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/ts_public.h.html#LN110"><span class='Ref_to_Member'>lexeme</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN830"></a>            <a href="../../include/c.h.html#LN266"><span class='Ref_to_Typedef'>uint16</span></a>      <span class='Declare_Local'>nv</span> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN825"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/ts_public.h.html#LN106"><span class='Ref_to_Member'>nvariant</span></a><span class='Delimiter'>; 
</span><a name="LN831"></a>            <a href="../../include/c.h.html#LN266"><span class='Ref_to_Typedef'>uint16</span></a>      <span class='Declare_Local'>i</span><span class='Delimiter'>, 
</span><a name="LN832"></a>                        <span class='Declare_Local'>nlex</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN833"></a>            <a href="dict_thesaurus.c.html#LN29"><span class='Ref_to_Struct'>LexemeInfo</span></a> <span class='Operator'>**</span><span class='Declare_Local'>infos</span><span class='Delimiter'>; 
</span> 
            <a href="dict_thesaurus.c.html#LN826"><span class='Ref_To_Local'>basevar</span></a> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN825"><span class='Ref_To_Local'>ptr</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN825"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/ts_public.h.html#LN110"><span class='Ref_to_Member'>lexeme</span></a> <span class='Operator'>&& </span><a href="dict_thesaurus.c.html#LN830"><span class='Ref_To_Local'>nv</span></a> <span class='Operator'>== </span><a href="dict_thesaurus.c.html#LN825"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/ts_public.h.html#LN106"><span class='Ref_to_Member'>nvariant</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <a href="dict_thesaurus.c.html#LN832"><span class='Ref_To_Local'>nlex</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>                <a href="dict_thesaurus.c.html#LN825"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
            <a href="dict_thesaurus.c.html#LN833"><span class='Ref_To_Local'>infos</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN29"><span class='Ref_to_Struct'>LexemeInfo</span></a> <span class='Operator'>**</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN29"><span class='Ref_to_Struct'>LexemeInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="dict_thesaurus.c.html#LN832"><span class='Ref_To_Local'>nlex</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN831"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="dict_thesaurus.c.html#LN831"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="dict_thesaurus.c.html#LN832"><span class='Ref_To_Local'>nlex</span></a><span class='Delimiter'>; </span><a href="dict_thesaurus.c.html#LN831"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>                <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="dict_thesaurus.c.html#LN833"><span class='Ref_To_Local'>infos</span></a><span class='Delimiter'>[</span><a href="dict_thesaurus.c.html#LN831"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN662"><span class='Ref_to_Func'>findTheLexeme</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN796"><span class='Ref_To_Local'>d</span></a><span class='Delimiter'>, </span><a href="dict_thesaurus.c.html#LN826"><span class='Ref_To_Local'>basevar</span></a><span class='Delimiter'>[</span><a href="dict_thesaurus.c.html#LN831"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../include/tsearch/ts_public.h.html#LN110"><span class='Ref_to_Member'>lexeme</span></a><span class='Parentheses'>))</span> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
                    <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN831"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="dict_thesaurus.c.html#LN832"><span class='Ref_To_Local'>nlex</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* no chance to find */ 
</span>                <a href="../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN833"><span class='Ref_To_Local'>infos</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>continue</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
            <a href="dict_thesaurus.c.html#LN800"><span class='Ref_To_Local'>info</span></a> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN701"><span class='Ref_to_Func'>findVariant</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN800"><span class='Ref_To_Local'>info</span></a><span class='Delimiter'>, </span><a href="dict_thesaurus.c.html#LN799"><span class='Ref_To_Local'>stored</span></a><span class='Delimiter'>, </span><a href="dict_thesaurus.c.html#LN801"><span class='Ref_To_Local'>curpos</span></a><span class='Delimiter'>, </span><a href="dict_thesaurus.c.html#LN833"><span class='Ref_To_Local'>infos</span></a><span class='Delimiter'>, </span><a href="dict_thesaurus.c.html#LN832"><span class='Ref_To_Local'>nlex</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end while ptr-&GT;lexeme &raquo; </span> 
    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if res&&res-&GT;lexeme &raquo; </span> 
    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN798"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{</span>                           <span class='Comment_Single_Line'>/* stop-word */ 
</span><a name="LN859"></a>        <a href="dict_thesaurus.c.html#LN29"><span class='Ref_to_Struct'>LexemeInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>infos</span> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN662"><span class='Ref_to_Func'>findTheLexeme</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN796"><span class='Ref_To_Local'>d</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="dict_thesaurus.c.html#LN800"><span class='Ref_To_Local'>info</span></a> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN701"><span class='Ref_to_Func'>findVariant</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="dict_thesaurus.c.html#LN799"><span class='Ref_To_Local'>stored</span></a><span class='Delimiter'>, </span><a href="dict_thesaurus.c.html#LN801"><span class='Ref_To_Local'>curpos</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="dict_thesaurus.c.html#LN859"><span class='Ref_To_Local'>infos</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="dict_thesaurus.c.html#LN800"><span class='Ref_To_Local'>info</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>;</span>            <span class='Comment_Single_Line'>/* word isn't recognized */ 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="dict_thesaurus.c.html#LN797"><span class='Ref_To_Local'>dstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/ts_public.h.html#LN127"><span class='Ref_to_Member'>private_state</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>void </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="dict_thesaurus.c.html#LN800"><span class='Ref_To_Local'>info</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="dict_thesaurus.c.html#LN800"><span class='Ref_To_Local'>info</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="dict_thesaurus.c.html#LN797"><span class='Ref_To_Local'>dstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/ts_public.h.html#LN126"><span class='Ref_to_Member'>getnext</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>        <a href="../../include/fmgr.h.html#LN320"><span class='Ref_to_Macro'>PG_RETURN_POINTER</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="dict_thesaurus.c.html#LN798"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN776"><span class='Ref_to_Func'>checkMatch</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN796"><span class='Ref_To_Local'>d</span></a><span class='Delimiter'>, </span><a href="dict_thesaurus.c.html#LN800"><span class='Ref_To_Local'>info</span></a><span class='Delimiter'>, </span><a href="dict_thesaurus.c.html#LN801"><span class='Ref_To_Local'>curpos</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="dict_thesaurus.c.html#LN802"><span class='Ref_To_Local'>moreres</span></a><span class='Parentheses'>))</span> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="dict_thesaurus.c.html#LN797"><span class='Ref_To_Local'>dstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/ts_public.h.html#LN126"><span class='Ref_to_Member'>getnext</span></a> <span class='Operator'>= </span><a href="dict_thesaurus.c.html#LN802"><span class='Ref_To_Local'>moreres</span></a><span class='Delimiter'>; 
</span>        <a href="../../include/fmgr.h.html#LN320"><span class='Ref_to_Macro'>PG_RETURN_POINTER</span></a><span class='Parentheses'>(</span><a href="dict_thesaurus.c.html#LN798"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="dict_thesaurus.c.html#LN797"><span class='Ref_To_Local'>dstate</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/ts_public.h.html#LN126"><span class='Ref_to_Member'>getnext</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
    <a href="../../include/fmgr.h.html#LN320"><span class='Ref_to_Macro'>PG_RETURN_POINTER</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end thesaurus_lexize &raquo; </span> 
</pre>
<table bgcolor='#c0c0c0' width='100%'><tr><td><a href='../../../Contents.html'>Contents</a></td></tr>
</table><hr><p class='blurb' align='center'><a href='http://www.sourceinsight.com'>HTML Created by Source Insight Version 4.00.0084 Built on 2017-02-26</a></p>
</body></html>