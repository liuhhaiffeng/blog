<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta name="generator" content="Source Insight Version 4.00.0084 Built on 2017-02-26">
<meta charset='UTF-8' />
<style type='text/css'><!--
TD {background-color: #C0C0C0; font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.blurb {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.filename {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 120%; font-weight: bold; }
.dirname {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 100%; font-weight: bold; margin-top: 2.5em;}
--></style>
<title>src\backend\tsearch\spell.c</title>
<LINK REL=StyleSheet HREF="../../../C_Cpp_Source_File.css" TYPE='text/css' MEDIA=screen>
</head>
<body bgcolor=#ffffff>
<table bgcolor='#c0c0c0' width='100%'>
<tr><td><p class='filename'><b>src\backend\tsearch\spell.c</b></p></td>
<td align='right'>
Wed Jun 14 08:25:50 2017
</td></tr>
<tr><td><a href='../../../Contents.html'>Contents</a></td></tr>
</table>
<pre>
<span class='Comment_Multi_Line'>/*------------------------------------------------------------------------- 
 * 
 * spell.c 
 *      Normalizing word with ISpell 
 * 
 * Portions Copyright (c) 1996-2017, PostgreSQL Global Development Group 
 * 
 * Ispell dictionary 
 * ----------------- 
 * 
 * Rules of dictionaries are defined in two files with .affix and .dict 
 * extensions. They are used by spell checker programs Ispell and Hunspell. 
 * 
 * An .affix file declares morphological rules to get a basic form of words. 
 * The format of an .affix file has different structure for Ispell and Hunspell 
 * dictionaries. The Hunspell format is more complicated. But when an .affix 
 * file is imported and compiled, it is stored in the same structure AffixNode. 
 * 
 * A .dict file stores a list of basic forms of words with references to 
 * affix rules. The format of a .dict file has the same structure for Ispell 
 * and Hunspell dictionaries. 
 * 
 * Compilation of a dictionary 
 * --------------------------- 
 * 
 * A compiled dictionary is stored in the IspellDict structure. Compilation of 
 * a dictionary is divided into the several steps: 
 *  - NIImportDictionary() - stores each word of a .dict file in the 
 *    temporary Spell field. 
 *  - NIImportAffixes() - stores affix rules of an .affix file in the 
 *    Affix field (not temporary) if an .affix file has the Ispell format. 
 *    -&GT; NIImportOOAffixes() - stores affix rules if an .affix file has the 
 *       Hunspell format. The AffixData field is initialized if AF parameter 
 *       is defined. 
 *  - NISortDictionary() - builds a prefix tree (Trie) from the words list 
 *    and stores it in the Dictionary field. The words list is got from the 
 *    Spell field. The AffixData field is initialized if AF parameter is not 
 *    defined. 
 *  - NISortAffixes(): 
 *    - builds a list of compound affixes from the affix list and stores it 
 *      in the CompoundAffix. 
 *    - builds prefix trees (Trie) from the affix list for prefixes and suffixes 
 *      and stores them in Suffix and Prefix fields. 
 *    The affix list is got from the Affix field. 
 * 
 * Memory management 
 * ----------------- 
 * 
 * The IspellDict structure has the Spell field which is used only in compile 
 * time. The Spell field stores a words list. It can take a lot of memory. 
 * Therefore when a dictionary is compiled this field is cleared by 
 * NIFinishBuild(). 
 * 
 * All resources which should cleared by NIFinishBuild() is initialized using 
 * tmpalloc() and tmpalloc0(). 
 * 
 * IDENTIFICATION 
 *    src/backend/tsearch/spell.c 
 * 
 *------------------------------------------------------------------------- 
 */ 
</span> 
<span class='Keyword'>#include </span><span class='String'>"postgres.h"</span> 
 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_collation.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"tsearch/dicts/spell.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"tsearch/ts_locale.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/memutils.h"</span> 
 
 
<span class='Comment_Multi_Line'>/* 
 * Initialization requires a lot of memory that's not needed 
 * after the initialization is done.  During initialization, 
 * CurrentMemoryContext is the long-lived memory context associated 
 * with the dictionary cache entry.  We keep the short-lived stuff 
 * in the Conf-&GT;buildCxt context. 
 */ 
</span><a name="LN77"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>tmpalloc</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>sz</span><span class='Parentheses'>)</span>  <a href="../../include/utils/palloc.h.html#LN70"><span class='Ref_to_Proto'>MemoryContextAlloc</span></a><span class='Parentheses'>(</span>Conf<span class='Operator'>-&GT;</span>buildCxt<span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="spell.c.html#LN77"><span class='Ref_to_Parameter'>sz</span></a><span class='Parentheses'>))</span> 
<a name="LN78"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>tmpalloc0</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>sz</span><span class='Parentheses'>)</span>  <a href="../../include/utils/palloc.h.html#LN71"><span class='Ref_to_Proto'>MemoryContextAllocZero</span></a><span class='Parentheses'>(</span>Conf<span class='Operator'>-&GT;</span>buildCxt<span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="spell.c.html#LN78"><span class='Ref_to_Parameter'>sz</span></a><span class='Parentheses'>))</span> 
 
<span class='Comment_Multi_Line'>/* 
 * Prepare for constructing an ISpell dictionary. 
 * 
 * The IspellDict struct is assumed to be zeroed when allocated. 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN86"></a><span class='Declare_Function'>NIStartBuild</span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN178"><span class='Ref_to_Typedef'>IspellDict</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>Conf</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Comment_Multi_Line'>/* 
     * The temp context is a child of CurTransactionContext, so that it will 
     * go away automatically on error. 
     */ 
</span>    <a href="spell.c.html#LN86"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN214"><span class='Ref_to_Member'>buildCxt</span></a> <span class='Operator'>= </span><a href="../../include/utils/memutils.h.html#LN145"><span class='Ref_to_Proto'>AllocSetContextCreate</span></a><span class='Parentheses'>(</span><a href="../utils/mmgr/mcxt.c.html#LN48"><span class='Ref_to_Global_Var'>CurTransactionContext</span></a><span class='Delimiter'>, 
</span>                                           <span class='String'>"Ispell dictionary init context"</span><span class='Delimiter'>, 
</span>                                           <a href="../../include/utils/memutils.h.html#LN164"><span class='Ref_to_Const'>ALLOCSET_DEFAULT_SIZES</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Clean up when dictionary construction is complete. 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN101"></a><span class='Declare_Function'>NIFinishBuild</span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN178"><span class='Ref_to_Typedef'>IspellDict</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>Conf</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Comment_Multi_Line'>/* Release no-longer-needed temp memory */ 
</span>    <a href="../../include/utils/memutils.h.html#LN74"><span class='Ref_to_Proto'>MemoryContextDelete</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN101"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN214"><span class='Ref_to_Member'>buildCxt</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* Just for cleanliness, zero the now-dangling pointers */ 
</span>    <a href="spell.c.html#LN101"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN214"><span class='Ref_to_Member'>buildCxt</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="spell.c.html#LN101"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN217"><span class='Ref_to_Member'>Spell</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="spell.c.html#LN101"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN222"><span class='Ref_to_Member'>firstfree</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="spell.c.html#LN101"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN204"><span class='Ref_to_Member'>CompoundAffixFlags</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/* 
 * "Compact" palloc: allocate without extra palloc overhead. 
 * 
 * Since we have no need to free the ispell data items individually, there's 
 * not much value in the per-chunk overhead normally consumed by palloc. 
 * Getting rid of it is helpful since ispell can allocate a lot of small nodes. 
 * 
 * We currently pre-zero all data allocated this way, even though some of it 
 * doesn't need that.  The cpalloc and cpalloc0 macros are just documentation 
 * to indicate which allocations actually require zeroing. 
 */ 
</span><a name="LN124"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>COMPACT_ALLOC_CHUNK</span> <span class='Number'>8192</span>    <span class='Comment_Single_Line'>/* amount to get from palloc at once */ 
</span><a name="LN125"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>COMPACT_MAX_REQ</span>     <span class='Number'>1024</span>    <span class='Comment_Single_Line'>/* must be &LT; COMPACT_ALLOC_CHUNK */ 
</span> 
<span class='Keyword'>static void </span><span class='Operator'>* 
</span><a name="LN128"></a><span class='Declare_Function'>compact_palloc0</span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN178"><span class='Ref_to_Typedef'>IspellDict</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>Conf</span><span class='Delimiter'>, </span>size_t <span class='Declare_Parameter'>size</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN130"></a>    <span class='Keyword'>void</span>       <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Should only be called during init */ 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="spell.c.html#LN128"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN214"><span class='Ref_to_Member'>buildCxt</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* No point in this for large chunks */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN128"><span class='Ref_to_Parameter'>size</span></a> <span class='Operator'>&GT; </span><a href="spell.c.html#LN125"><span class='Ref_to_Const'>COMPACT_MAX_REQ</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <a href="../../include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN128"><span class='Ref_to_Parameter'>size</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Keep everything maxaligned */ 
</span>    <a href="spell.c.html#LN128"><span class='Ref_to_Parameter'>size</span></a> <span class='Operator'>= </span><a href="../../include/c.h.html#LN587"><span class='Ref_to_Macro'>MAXALIGN</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN128"><span class='Ref_to_Parameter'>size</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Need more space? */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN128"><span class='Ref_to_Parameter'>size</span></a> <span class='Operator'>&GT; </span><a href="spell.c.html#LN128"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN223"><span class='Ref_to_Member'>avail</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="spell.c.html#LN128"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN222"><span class='Ref_to_Member'>firstfree</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN124"><span class='Ref_to_Const'>COMPACT_ALLOC_CHUNK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="spell.c.html#LN128"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN223"><span class='Ref_to_Member'>avail</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN124"><span class='Ref_to_Const'>COMPACT_ALLOC_CHUNK</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="spell.c.html#LN130"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>void </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="spell.c.html#LN128"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN222"><span class='Ref_to_Member'>firstfree</span></a><span class='Delimiter'>; 
</span>    <a href="spell.c.html#LN128"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN222"><span class='Ref_to_Member'>firstfree</span></a> <span class='Operator'>+= </span><a href="spell.c.html#LN128"><span class='Ref_to_Parameter'>size</span></a><span class='Delimiter'>; 
</span>    <a href="spell.c.html#LN128"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN223"><span class='Ref_to_Member'>avail</span></a> <span class='Operator'>-= </span><a href="spell.c.html#LN128"><span class='Ref_to_Parameter'>size</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="spell.c.html#LN130"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end compact_palloc0 &raquo; </span> 
 
<a name="LN156"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>cpalloc</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>size</span><span class='Parentheses'>) </span><a href="spell.c.html#LN127"><span class='Ref_to_Func'>compact_palloc0</span></a><span class='Parentheses'>(</span>Conf<span class='Delimiter'>, </span><a href="spell.c.html#LN156"><span class='Ref_to_Parameter'>size</span></a><span class='Parentheses'>) 
</span><a name="LN157"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>cpalloc0</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>size</span><span class='Parentheses'>) </span><a href="spell.c.html#LN127"><span class='Ref_to_Func'>compact_palloc0</span></a><span class='Parentheses'>(</span>Conf<span class='Delimiter'>, </span><a href="spell.c.html#LN157"><span class='Ref_to_Parameter'>size</span></a><span class='Parentheses'>) 
</span> 
<span class='Keyword'>static char </span><span class='Operator'>* 
</span><a name="LN160"></a><span class='Declare_Function'>cpstrdup</span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN178"><span class='Ref_to_Typedef'>IspellDict</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>Conf</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>str</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN162"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>res</span> <span class='Operator'>= </span><a href="spell.c.html#LN156"><span class='Ref_to_Macro'>cpalloc</span></a><span class='Parentheses'>(</span>strlen<span class='Parentheses'>(</span><a href="spell.c.html#LN160"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>) </span><span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN162"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN160"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="spell.c.html#LN162"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/* 
 * Apply lowerstr(), producing a temporary result (in the buildCxt). 
 */ 
</span><span class='Keyword'>static char </span><span class='Operator'>* 
</span><a name="LN173"></a><span class='Declare_Function'>lowerstr_ctx</span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN178"><span class='Ref_to_Typedef'>IspellDict</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>Conf</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>src</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN175"></a>    <a href="../../include/utils/palloc.h.html#LN35"><span class='Ref_to_Typedef'>MemoryContext</span></a> <span class='Declare_Local'>saveCtx</span><span class='Delimiter'>; 
</span><a name="LN176"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>dst</span><span class='Delimiter'>; 
</span> 
    <a href="spell.c.html#LN175"><span class='Ref_To_Local'>saveCtx</span></a> <span class='Operator'>= </span><a href="../../include/utils/palloc.h.html#LN107"><span class='Ref_to_Func'>MemoryContextSwitchTo</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN173"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN214"><span class='Ref_to_Member'>buildCxt</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="spell.c.html#LN176"><span class='Ref_To_Local'>dst</span></a> <span class='Operator'>= </span><a href="../../include/tsearch/ts_locale.h.html#LN65"><span class='Ref_to_Proto'>lowerstr</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN173"><span class='Ref_to_Parameter'>src</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../include/utils/palloc.h.html#LN107"><span class='Ref_to_Func'>MemoryContextSwitchTo</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN175"><span class='Ref_To_Local'>saveCtx</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="spell.c.html#LN176"><span class='Ref_To_Local'>dst</span></a><span class='Delimiter'>; 
} 
</span> 
<a name="LN185"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>MAX_NORM</span> <span class='Number'>1024</span> 
<a name="LN186"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>MAXNORMLEN</span> <span class='Number'>256</span> 
 
<a name="LN188"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>STRNCMP</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>s</span><span class='Delimiter'>,</span><span class='Declare_Parameter'>p</span><span class='Parentheses'>)</span>    strncmp<span class='Parentheses'>(</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN188"><span class='Ref_to_Parameter'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="spell.c.html#LN188"><span class='Ref_to_Parameter'>p</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span>strlen<span class='Parentheses'>(</span><a href="spell.c.html#LN188"><span class='Ref_to_Parameter'>p</span></a><span class='Parentheses'>) )</span> 
<a name="LN189"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>GETWCHAR</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>W</span><span class='Delimiter'>,</span><span class='Declare_Parameter'>L</span><span class='Delimiter'>,</span><span class='Declare_Parameter'>N</span><span class='Delimiter'>,</span><span class='Declare_Parameter'>T</span><span class='Parentheses'>) (</span> <span class='Parentheses'>((</span><span class='Keyword'>const </span><a href="../../include/c.h.html#LN265"><span class='Ref_to_Typedef'>uint8</span></a><span class='Operator'>*</span><span class='Parentheses'>)(</span><a href="spell.c.html#LN189"><span class='Ref_to_Parameter'>W</span></a><span class='Parentheses'>))</span><span class='Delimiter'>[ </span><span class='Parentheses'>((</span><a href="spell.c.html#LN189"><span class='Ref_to_Parameter'>T</span></a><span class='Parentheses'>)</span><span class='Operator'>==</span><a href="../../include/tsearch/dicts/spell.h.html#LN116"><span class='Ref_to_Const'>FF_PREFIX</span></a><span class='Parentheses'>)</span> <span class='Operator'>? </span><span class='Parentheses'>(</span><a href="spell.c.html#LN189"><span class='Ref_to_Parameter'>N</span></a><span class='Parentheses'>)</span> <span class='Operator'>: </span><span class='Parentheses'>(</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN189"><span class='Ref_to_Parameter'>L</span></a><span class='Parentheses'>) </span><span class='Operator'>- </span><span class='Number'>1</span> <span class='Operator'>- </span><span class='Parentheses'>(</span><a href="spell.c.html#LN189"><span class='Ref_to_Parameter'>N</span></a><span class='Parentheses'>) )</span> <span class='Delimiter'>] </span><span class='Parentheses'>)</span> 
<a name="LN190"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>GETCHAR</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>A</span><span class='Delimiter'>,</span><span class='Declare_Parameter'>N</span><span class='Delimiter'>,</span><span class='Declare_Parameter'>T</span><span class='Parentheses'>)</span>    <a href="spell.c.html#LN189"><span class='Ref_to_Macro'>GETWCHAR</span></a><span class='Parentheses'>(</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN190"><span class='Ref_to_Parameter'>A</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>repl<span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="spell.c.html#LN190"><span class='Ref_to_Parameter'>A</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>replen<span class='Delimiter'>, </span><a href="spell.c.html#LN190"><span class='Ref_to_Parameter'>N</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN190"><span class='Ref_to_Parameter'>T</span></a> <span class='Parentheses'>)</span> 
 
<a name="LN192"></a><span class='Keyword'>static char </span><span class='Operator'>*</span><span class='Declare_Var'>VoidString</span> <span class='Operator'>= </span><span class='String'>""</span><span class='Delimiter'>; 
</span> 
<span class='Keyword'>static int 
</span><a name="LN195"></a><span class='Declare_Function'>cmpspell</span><span class='Parentheses'>(</span><span class='Keyword'>const void </span><span class='Operator'>*</span><span class='Declare_Parameter'>s1</span><span class='Delimiter'>, </span><span class='Keyword'>const void </span><span class='Operator'>*</span><span class='Declare_Parameter'>s2</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>((</span><span class='Operator'>*</span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN60"><span class='Ref_to_Typedef'>SPELL</span></a> <span class='Operator'>*</span><span class='Keyword'>const </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="spell.c.html#LN195"><span class='Ref_to_Parameter'>s1</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>word<span class='Delimiter'>, </span><span class='Parentheses'>(</span><span class='Operator'>*</span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN60"><span class='Ref_to_Typedef'>SPELL</span></a> <span class='Operator'>*</span><span class='Keyword'>const </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="spell.c.html#LN195"><span class='Ref_to_Parameter'>s2</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>word<span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>static int 
</span><a name="LN201"></a><span class='Declare_Function'>cmpspellaffix</span><span class='Parentheses'>(</span><span class='Keyword'>const void </span><span class='Operator'>*</span><span class='Declare_Parameter'>s1</span><span class='Delimiter'>, </span><span class='Keyword'>const void </span><span class='Operator'>*</span><span class='Declare_Parameter'>s2</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>((</span><span class='Operator'>*</span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN60"><span class='Ref_to_Typedef'>SPELL</span></a> <span class='Operator'>*</span><span class='Keyword'>const </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="spell.c.html#LN201"><span class='Ref_to_Parameter'>s1</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>p<span class='Operator'>.</span>flag<span class='Delimiter'>, 
</span>                   <span class='Parentheses'>(</span><span class='Operator'>*</span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN60"><span class='Ref_to_Typedef'>SPELL</span></a> <span class='Operator'>*</span><span class='Keyword'>const </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="spell.c.html#LN201"><span class='Ref_to_Parameter'>s2</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>p<span class='Operator'>.</span>flag<span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>static int 
</span><a name="LN208"></a><span class='Declare_Function'>cmpcmdflag</span><span class='Parentheses'>(</span><span class='Keyword'>const void </span><span class='Operator'>*</span><span class='Declare_Parameter'>f1</span><span class='Delimiter'>, </span><span class='Keyword'>const void </span><span class='Operator'>*</span><span class='Declare_Parameter'>f2</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN210"></a>    <a href="../../include/tsearch/dicts/spell.h.html#LN162"><span class='Ref_to_Struct'>CompoundAffixFlag</span></a> <span class='Operator'>*</span><span class='Declare_Local'>fv1</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN162"><span class='Ref_to_Struct'>CompoundAffixFlag</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="spell.c.html#LN208"><span class='Ref_to_Parameter'>f1</span></a><span class='Delimiter'>, 
</span><a name="LN211"></a>               <span class='Operator'>*</span><span class='Declare_Local'>fv2</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN162"><span class='Ref_to_Struct'>CompoundAffixFlag</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="spell.c.html#LN208"><span class='Ref_to_Parameter'>f2</span></a><span class='Delimiter'>; 
</span> 
    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="spell.c.html#LN210"><span class='Ref_To_Local'>fv1</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN172"><span class='Ref_to_Member'>flagMode</span></a> <span class='Operator'>== </span><a href="spell.c.html#LN211"><span class='Ref_To_Local'>fv2</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN172"><span class='Ref_to_Member'>flagMode</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN210"><span class='Ref_To_Local'>fv1</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN172"><span class='Ref_to_Member'>flagMode</span></a> <span class='Operator'>== </span><a href="../../include/tsearch/dicts/spell.h.html#LN155"><span class='Ref_to_EnumConst'>FM_NUM</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN210"><span class='Ref_To_Local'>fv1</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN170"><span class='Ref_to_Member'>flag</span></a><span class='Operator'>.</span>i <span class='Operator'>== </span><a href="spell.c.html#LN211"><span class='Ref_To_Local'>fv2</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN170"><span class='Ref_to_Member'>flag</span></a><span class='Operator'>.</span>i<span class='Parentheses'>) 
</span>            <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>return</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN210"><span class='Ref_To_Local'>fv1</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN170"><span class='Ref_to_Member'>flag</span></a><span class='Operator'>.</span>i <span class='Operator'>&GT; </span><a href="spell.c.html#LN211"><span class='Ref_To_Local'>fv2</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN170"><span class='Ref_to_Member'>flag</span></a><span class='Operator'>.</span>i<span class='Parentheses'>) </span><span class='Operator'>? </span><span class='Number'>1</span> <span class='Operator'>: -</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>return</span> strcmp<span class='Parentheses'>(</span><a href="spell.c.html#LN210"><span class='Ref_To_Local'>fv1</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN170"><span class='Ref_to_Member'>flag</span></a><span class='Operator'>.</span>s<span class='Delimiter'>, </span><a href="spell.c.html#LN211"><span class='Ref_To_Local'>fv2</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN170"><span class='Ref_to_Member'>flag</span></a><span class='Operator'>.</span>s<span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>static char </span><span class='Operator'>* 
</span><a name="LN227"></a><span class='Declare_Function'>findchar</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>str</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>c</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>while</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN227"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/tsearch/ts_locale.h.html#LN51"><span class='Ref_to_Macro'>t_iseq</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN227"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN227"><span class='Ref_to_Parameter'>c</span></a><span class='Parentheses'>))</span> 
            <span class='Control'>return</span> <a href="spell.c.html#LN227"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>; 
</span>        <a href="spell.c.html#LN227"><span class='Ref_to_Parameter'>str</span></a> <span class='Operator'>+= </span><a href="../../include/mb/pg_wchar.h.html#LN521"><span class='Ref_to_Proto'>pg_mblen</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN227"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>static char </span><span class='Operator'>* 
</span><a name="LN240"></a><span class='Declare_Function'>findchar2</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>str</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>c1</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>c2</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>while</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN240"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/tsearch/ts_locale.h.html#LN51"><span class='Ref_to_Macro'>t_iseq</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN240"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN240"><span class='Ref_to_Parameter'>c1</span></a><span class='Parentheses'>) </span><span class='Operator'>|| </span><a href="../../include/tsearch/ts_locale.h.html#LN51"><span class='Ref_to_Macro'>t_iseq</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN240"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN240"><span class='Ref_to_Parameter'>c2</span></a><span class='Parentheses'>))</span> 
            <span class='Control'>return</span> <a href="spell.c.html#LN240"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>; 
</span>        <a href="spell.c.html#LN240"><span class='Ref_to_Parameter'>str</span></a> <span class='Operator'>+= </span><a href="../../include/mb/pg_wchar.h.html#LN521"><span class='Ref_to_Proto'>pg_mblen</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN240"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/* backward string compare for suffix tree operations */ 
</span><span class='Keyword'>static int 
</span><a name="LN255"></a><span class='Declare_Function'>strbcmp</span><span class='Parentheses'>(</span><span class='Keyword'>const unsigned char </span><span class='Operator'>*</span><span class='Declare_Parameter'>s1</span><span class='Delimiter'>, </span><span class='Keyword'>const unsigned char </span><span class='Operator'>*</span><span class='Declare_Parameter'>s2</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN257"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>l1</span> <span class='Operator'>= </span>strlen<span class='Parentheses'>((</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="spell.c.html#LN255"><span class='Ref_to_Parameter'>s1</span></a><span class='Parentheses'>)</span> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>, 
</span><a name="LN258"></a>                <span class='Declare_Local'>l2</span> <span class='Operator'>= </span>strlen<span class='Parentheses'>((</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="spell.c.html#LN255"><span class='Ref_to_Parameter'>s2</span></a><span class='Parentheses'>)</span> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN257"><span class='Ref_To_Local'>l1</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="spell.c.html#LN258"><span class='Ref_To_Local'>l2</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN255"><span class='Ref_to_Parameter'>s1</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN257"><span class='Ref_To_Local'>l1</span></a><span class='Delimiter'>] </span><span class='Operator'>&LT; </span><a href="spell.c.html#LN255"><span class='Ref_to_Parameter'>s2</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN258"><span class='Ref_To_Local'>l2</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) 
</span>            <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN255"><span class='Ref_to_Parameter'>s1</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN257"><span class='Ref_To_Local'>l1</span></a><span class='Delimiter'>] </span><span class='Operator'>&GT; </span><a href="spell.c.html#LN255"><span class='Ref_to_Parameter'>s2</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN258"><span class='Ref_To_Local'>l2</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) 
</span>            <span class='Control'>return</span> <span class='Number'>1</span><span class='Delimiter'>; 
</span>        <a href="spell.c.html#LN257"><span class='Ref_To_Local'>l1</span></a><span class='Operator'>--</span><span class='Delimiter'>; 
</span>        <a href="spell.c.html#LN258"><span class='Ref_To_Local'>l2</span></a><span class='Operator'>--</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN257"><span class='Ref_To_Local'>l1</span></a> <span class='Operator'>&LT; </span><a href="spell.c.html#LN258"><span class='Ref_To_Local'>l2</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN257"><span class='Ref_To_Local'>l1</span></a> <span class='Operator'>&GT; </span><a href="spell.c.html#LN258"><span class='Ref_To_Local'>l2</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Number'>1</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end strbcmp &raquo; </span> 
 
<span class='Keyword'>static int 
</span><a name="LN278"></a><span class='Declare_Function'>strbncmp</span><span class='Parentheses'>(</span><span class='Keyword'>const unsigned char </span><span class='Operator'>*</span><span class='Declare_Parameter'>s1</span><span class='Delimiter'>, </span><span class='Keyword'>const unsigned char </span><span class='Operator'>*</span><span class='Declare_Parameter'>s2</span><span class='Delimiter'>, </span>size_t <span class='Declare_Parameter'>count</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN280"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>l1</span> <span class='Operator'>= </span>strlen<span class='Parentheses'>((</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="spell.c.html#LN278"><span class='Ref_to_Parameter'>s1</span></a><span class='Parentheses'>)</span> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>, 
</span><a name="LN281"></a>                <span class='Declare_Local'>l2</span> <span class='Operator'>= </span>strlen<span class='Parentheses'>((</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="spell.c.html#LN278"><span class='Ref_to_Parameter'>s2</span></a><span class='Parentheses'>)</span> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>, 
</span><a name="LN282"></a>                <span class='Declare_Local'>l</span> <span class='Operator'>= </span><a href="spell.c.html#LN278"><span class='Ref_to_Parameter'>count</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN280"><span class='Ref_To_Local'>l1</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="spell.c.html#LN281"><span class='Ref_To_Local'>l2</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="spell.c.html#LN282"><span class='Ref_To_Local'>l</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN278"><span class='Ref_to_Parameter'>s1</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN280"><span class='Ref_To_Local'>l1</span></a><span class='Delimiter'>] </span><span class='Operator'>&LT; </span><a href="spell.c.html#LN278"><span class='Ref_to_Parameter'>s2</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN281"><span class='Ref_To_Local'>l2</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) 
</span>            <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN278"><span class='Ref_to_Parameter'>s1</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN280"><span class='Ref_To_Local'>l1</span></a><span class='Delimiter'>] </span><span class='Operator'>&GT; </span><a href="spell.c.html#LN278"><span class='Ref_to_Parameter'>s2</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN281"><span class='Ref_To_Local'>l2</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) 
</span>            <span class='Control'>return</span> <span class='Number'>1</span><span class='Delimiter'>; 
</span>        <a href="spell.c.html#LN280"><span class='Ref_To_Local'>l1</span></a><span class='Operator'>--</span><span class='Delimiter'>; 
</span>        <a href="spell.c.html#LN281"><span class='Ref_To_Local'>l2</span></a><span class='Operator'>--</span><span class='Delimiter'>; 
</span>        <a href="spell.c.html#LN282"><span class='Ref_To_Local'>l</span></a><span class='Operator'>--</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN282"><span class='Ref_To_Local'>l</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN280"><span class='Ref_To_Local'>l1</span></a> <span class='Operator'>&LT; </span><a href="spell.c.html#LN281"><span class='Ref_To_Local'>l2</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN280"><span class='Ref_To_Local'>l1</span></a> <span class='Operator'>&GT; </span><a href="spell.c.html#LN281"><span class='Ref_To_Local'>l2</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end strbncmp &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Compares affixes. 
 * First compares the type of an affix. Prefixes should go before affixes. 
 * If types are equal then compares replaceable string. 
 */ 
</span><span class='Keyword'>static int 
</span><a name="LN309"></a><span class='Declare_Function'>cmpaffix</span><span class='Parentheses'>(</span><span class='Keyword'>const void </span><span class='Operator'>*</span><span class='Declare_Parameter'>s1</span><span class='Delimiter'>, </span><span class='Keyword'>const void </span><span class='Operator'>*</span><span class='Declare_Parameter'>s2</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN311"></a>    <span class='Keyword'>const </span><a href="../../include/tsearch/dicts/spell.h.html#LN86"><span class='Ref_to_Typedef'>AFFIX</span></a> <span class='Operator'>*</span><span class='Declare_Local'>a1</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>const </span><a href="../../include/tsearch/dicts/spell.h.html#LN86"><span class='Ref_to_Typedef'>AFFIX</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="spell.c.html#LN309"><span class='Ref_to_Parameter'>s1</span></a><span class='Delimiter'>; 
</span><a name="LN312"></a>    <span class='Keyword'>const </span><a href="../../include/tsearch/dicts/spell.h.html#LN86"><span class='Ref_to_Typedef'>AFFIX</span></a> <span class='Operator'>*</span><span class='Declare_Local'>a2</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>const </span><a href="../../include/tsearch/dicts/spell.h.html#LN86"><span class='Ref_to_Typedef'>AFFIX</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="spell.c.html#LN309"><span class='Ref_to_Parameter'>s2</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN311"><span class='Ref_To_Local'>a1</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN90"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>&LT; </span><a href="spell.c.html#LN312"><span class='Ref_To_Local'>a2</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN90"><span class='Ref_to_Member'>type</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN311"><span class='Ref_To_Local'>a1</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN90"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>&GT; </span><a href="spell.c.html#LN312"><span class='Ref_To_Local'>a2</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN90"><span class='Ref_to_Member'>type</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN311"><span class='Ref_To_Local'>a1</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN90"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>== </span><a href="../../include/tsearch/dicts/spell.h.html#LN116"><span class='Ref_to_Const'>FF_PREFIX</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> strcmp<span class='Parentheses'>(</span><a href="spell.c.html#LN311"><span class='Ref_To_Local'>a1</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN96"><span class='Ref_to_Member'>repl</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN312"><span class='Ref_To_Local'>a2</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN96"><span class='Ref_to_Member'>repl</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <span class='Control'>return</span> <a href="spell.c.html#LN254"><span class='Ref_to_Func'>strbcmp</span></a><span class='Parentheses'>((</span><span class='Keyword'>const unsigned char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="spell.c.html#LN311"><span class='Ref_To_Local'>a1</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN96"><span class='Ref_to_Member'>repl</span></a><span class='Delimiter'>, 
</span>                       <span class='Parentheses'>(</span><span class='Keyword'>const unsigned char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="spell.c.html#LN312"><span class='Ref_To_Local'>a2</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN96"><span class='Ref_to_Member'>repl</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Gets an affix flag from the set of affix flags (sflagset). 
 * 
 * Several flags can be stored in a single string. Flags can be represented by: 
 * - 1 character (FM_CHAR). A character may be Unicode. 
 * - 2 characters (FM_LONG). A character may be Unicode. 
 * - numbers from 1 to 65000 (FM_NUM). 
 * 
 * Depending on the flagMode an affix string can have the following format: 
 * - FM_CHAR: ABCD 
 *   Here we have 4 flags: A, B, C and D 
 * - FM_LONG: ABCDE* 
 *   Here we have 3 flags: AB, CD and E* 
 * - FM_NUM: 200,205,50 
 *   Here we have 3 flags: 200, 205 and 50 
 * 
 * Conf: current dictionary. 
 * sflagset: the set of affix flags. Returns a reference to the start of a next 
 *           affix flag. 
 * sflag: returns an affix flag from sflagset. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN347"></a><span class='Declare_Function'>getNextFlagFromString</span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN178"><span class='Ref_to_Typedef'>IspellDict</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>Conf</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>**</span><span class='Declare_Parameter'>sflagset</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>sflag</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN349"></a>    <a href="../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>s</span><span class='Delimiter'>; 
</span><a name="LN350"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>next</span><span class='Delimiter'>, 
</span><a name="LN351"></a>               <span class='Operator'>*</span><span class='Declare_Local'>sbuf</span> <span class='Operator'>= *</span><a href="spell.c.html#LN347"><span class='Ref_to_Parameter'>sflagset</span></a><span class='Delimiter'>; 
</span><a name="LN352"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>maxstep</span><span class='Delimiter'>; 
</span><a name="LN353"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>stop</span> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span><a name="LN354"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>met_comma</span> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
    <a href="spell.c.html#LN352"><span class='Ref_To_Local'>maxstep</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="spell.c.html#LN347"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN197"><span class='Ref_to_Member'>flagMode</span></a> <span class='Operator'>== </span><a href="../../include/tsearch/dicts/spell.h.html#LN154"><span class='Ref_to_EnumConst'>FM_LONG</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='Number'>2</span> <span class='Operator'>: </span><span class='Number'>1</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>while</span> <span class='Parentheses'>(</span><span class='Operator'>**</span><a href="spell.c.html#LN347"><span class='Ref_to_Parameter'>sflagset</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN347"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN197"><span class='Ref_to_Member'>flagMode</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>case</span> <a href="../../include/tsearch/dicts/spell.h.html#LN154"><span class='Ref_to_EnumConst'>FM_LONG</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="../../include/tsearch/dicts/spell.h.html#LN153"><span class='Ref_to_EnumConst'>FM_CHAR</span></a><span class='Operator'>: 
</span>                <a href="../../include/tsearch/ts_locale.h.html#LN53"><span class='Ref_to_Macro'>COPYCHAR</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN347"><span class='Ref_to_Parameter'>sflag</span></a><span class='Delimiter'>, </span><span class='Operator'>*</span><a href="spell.c.html#LN347"><span class='Ref_to_Parameter'>sflagset</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="spell.c.html#LN347"><span class='Ref_to_Parameter'>sflag</span></a> <span class='Operator'>+= </span><a href="../../include/mb/pg_wchar.h.html#LN521"><span class='Ref_to_Proto'>pg_mblen</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN347"><span class='Ref_to_Parameter'>sflagset</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* Go to start of the next flag */ 
</span>                <span class='Operator'>*</span><a href="spell.c.html#LN347"><span class='Ref_to_Parameter'>sflagset</span></a> <span class='Operator'>+= </span><a href="../../include/mb/pg_wchar.h.html#LN521"><span class='Ref_to_Proto'>pg_mblen</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN347"><span class='Ref_to_Parameter'>sflagset</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* Check if we get all characters of flag */ 
</span>                <a href="spell.c.html#LN352"><span class='Ref_To_Local'>maxstep</span></a><span class='Operator'>--</span><span class='Delimiter'>; 
</span>                <a href="spell.c.html#LN353"><span class='Ref_To_Local'>stop</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="spell.c.html#LN352"><span class='Ref_To_Local'>maxstep</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="../../include/tsearch/dicts/spell.h.html#LN155"><span class='Ref_to_EnumConst'>FM_NUM</span></a><span class='Operator'>: 
</span>                <a href="spell.c.html#LN349"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span>strtol<span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN347"><span class='Ref_to_Parameter'>sflagset</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="spell.c.html#LN350"><span class='Ref_To_Local'>next</span></a><span class='Delimiter'>, </span><span class='Number'>10</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN347"><span class='Ref_to_Parameter'>sflagset</span></a> <span class='Operator'>== </span><a href="spell.c.html#LN350"><span class='Ref_To_Local'>next</span></a> <span class='Operator'>|| </span>errno <span class='Operator'>== </span>ERANGE<span class='Parentheses'>) 
</span>                    <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                            <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_CONFIG_FILE_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                             <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"invalid affix flag \"%s\""</span><span class='Delimiter'>, </span><span class='Operator'>*</span><a href="spell.c.html#LN347"><span class='Ref_to_Parameter'>sflagset</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN349"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="spell.c.html#LN349"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>&GT; </span><a href="../../include/tsearch/dicts/spell.h.html#LN176"><span class='Ref_to_Const'>FLAGNUM_MAXSIZE</span></a><span class='Parentheses'>) 
</span>                    <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                            <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_CONFIG_FILE_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                             <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"affix flag \"%s\" is out of range"</span><span class='Delimiter'>, 
</span>                                    <span class='Operator'>*</span><a href="spell.c.html#LN347"><span class='Ref_to_Parameter'>sflagset</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                <a href="spell.c.html#LN347"><span class='Ref_to_Parameter'>sflag</span></a> <span class='Operator'>+= </span><a href="../../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN347"><span class='Ref_to_Parameter'>sflag</span></a><span class='Delimiter'>, </span><span class='String'>"%0d"</span><span class='Delimiter'>, </span><a href="spell.c.html#LN349"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* Go to start of the next flag */ 
</span>                <span class='Operator'>*</span><a href="spell.c.html#LN347"><span class='Ref_to_Parameter'>sflagset</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN350"><span class='Ref_To_Local'>next</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>while</span> <span class='Parentheses'>(</span><span class='Operator'>**</span><a href="spell.c.html#LN347"><span class='Ref_to_Parameter'>sflagset</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ts_locale.c.html#LN25"><span class='Ref_to_Func'>t_isdigit</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN347"><span class='Ref_to_Parameter'>sflagset</span></a><span class='Parentheses'>))</span> 
                    <span class='Delimiter'>{ 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="spell.c.html#LN354"><span class='Ref_To_Local'>met_comma</span></a><span class='Parentheses'>) 
</span>                            <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                                    <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_CONFIG_FILE_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                     <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"invalid affix flag \"%s\""</span><span class='Delimiter'>, 
</span>                                            <span class='Operator'>*</span><a href="spell.c.html#LN347"><span class='Ref_to_Parameter'>sflagset</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/tsearch/ts_locale.h.html#LN51"><span class='Ref_to_Macro'>t_iseq</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN347"><span class='Ref_to_Parameter'>sflagset</span></a><span class='Delimiter'>, </span><span class='String'>','</span><span class='Parentheses'>))</span> 
                    <span class='Delimiter'>{ 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN354"><span class='Ref_To_Local'>met_comma</span></a><span class='Parentheses'>) 
</span>                            <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                                    <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_CONFIG_FILE_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                     <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"invalid affix flag \"%s\""</span><span class='Delimiter'>, 
</span>                                            <span class='Operator'>*</span><a href="spell.c.html#LN347"><span class='Ref_to_Parameter'>sflagset</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                        <a href="spell.c.html#LN354"><span class='Ref_To_Local'>met_comma</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ts_locale.c.html#LN41"><span class='Ref_to_Func'>t_isspace</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN347"><span class='Ref_to_Parameter'>sflagset</span></a><span class='Parentheses'>))</span> 
                    <span class='Delimiter'>{ 
</span>                        <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                                <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_CONFIG_FILE_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                             <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"invalid character in affix flag \"%s\""</span><span class='Delimiter'>, 
</span>                                    <span class='Operator'>*</span><a href="spell.c.html#LN347"><span class='Ref_to_Parameter'>sflagset</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span> 
                    <span class='Operator'>*</span><a href="spell.c.html#LN347"><span class='Ref_to_Parameter'>sflagset</span></a> <span class='Operator'>+= </span><a href="../../include/mb/pg_wchar.h.html#LN521"><span class='Ref_to_Proto'>pg_mblen</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN347"><span class='Ref_to_Parameter'>sflagset</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end while **sflagset &raquo; </span> 
                <a href="spell.c.html#LN353"><span class='Ref_To_Local'>stop</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>default</span><span class='Operator'>: 
</span>                <a href="../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"unrecognized type of Conf-&GT;flagMode: %d"</span><span class='Delimiter'>, 
</span>                     <a href="spell.c.html#LN347"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN197"><span class='Ref_to_Member'>flagMode</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch Conf-&GT;flagMode &raquo; </span> 
 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN353"><span class='Ref_To_Local'>stop</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end while **sflagset &raquo; </span> 
 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN347"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN197"><span class='Ref_to_Member'>flagMode</span></a> <span class='Operator'>== </span><a href="../../include/tsearch/dicts/spell.h.html#LN154"><span class='Ref_to_EnumConst'>FM_LONG</span></a> <span class='Operator'>&& </span><a href="spell.c.html#LN352"><span class='Ref_To_Local'>maxstep</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_CONFIG_FILE_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"invalid affix flag \"%s\" with \"long\" flag value"</span><span class='Delimiter'>, 
</span>                        <a href="spell.c.html#LN351"><span class='Ref_To_Local'>sbuf</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <span class='Operator'>*</span><a href="spell.c.html#LN347"><span class='Ref_to_Parameter'>sflag</span></a> <span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end getNextFlagFromString &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Checks if the affix set Conf-&GT;AffixData[affix] contains affixflag. 
 * Conf-&GT;AffixData[affix] does not contain affixflag if this flag is not used 
 * actually by the .dict file. 
 * 
 * Conf: current dictionary. 
 * affix: index of the Conf-&GT;AffixData array. 
 * affixflag: the affix flag. 
 * 
 * Returns true if the string Conf-&GT;AffixData[affix] contains affixflag, 
 * otherwise returns false. 
 */ 
</span><span class='Keyword'>static bool 
</span><a name="LN452"></a><span class='Declare_Function'>IsAffixFlagInUse</span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN178"><span class='Ref_to_Typedef'>IspellDict</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>Conf</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>affix</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>affixflag</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN454"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>flagcur</span><span class='Delimiter'>; 
</span><a name="LN455"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>flag</span><span class='Delimiter'>[</span>BUFSIZ<span class='Delimiter'>]; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN452"><span class='Ref_to_Parameter'>affixflag</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
    <a href="spell.c.html#LN454"><span class='Ref_To_Local'>flagcur</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN452"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN189"><span class='Ref_to_Member'>AffixData</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN452"><span class='Ref_to_Parameter'>affix</span></a><span class='Delimiter'>]; 
</span> 
    <span class='Control'>while</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN454"><span class='Ref_To_Local'>flagcur</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="spell.c.html#LN346"><span class='Ref_to_Func'>getNextFlagFromString</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN452"><span class='Ref_to_Parameter'>Conf</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="spell.c.html#LN454"><span class='Ref_To_Local'>flagcur</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN455"><span class='Ref_To_Local'>flag</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* Compare first affix flag in flagcur with affixflag */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="spell.c.html#LN455"><span class='Ref_To_Local'>flag</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN452"><span class='Ref_to_Parameter'>affixflag</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* Could not find affixflag */ 
</span>    <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end IsAffixFlagInUse &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Adds the new word into the temporary array Spell. 
 * 
 * Conf: current dictionary. 
 * word: new word. 
 * flag: set of affix flags. Single flag can be get by getNextFlagFromString(). 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN482"></a><span class='Declare_Function'>NIAddSpell</span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN178"><span class='Ref_to_Typedef'>IspellDict</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>Conf</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>word</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>flag</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN482"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN218"><span class='Ref_to_Member'>nspell</span></a> <span class='Operator'>&GT;= </span><a href="spell.c.html#LN482"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN219"><span class='Ref_to_Member'>mspell</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN482"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN219"><span class='Ref_to_Member'>mspell</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="spell.c.html#LN482"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN219"><span class='Ref_to_Member'>mspell</span></a> <span class='Operator'>*= </span><span class='Number'>2</span><span class='Delimiter'>; 
</span>            <a href="spell.c.html#LN482"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN217"><span class='Ref_to_Member'>Spell</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN60"><span class='Ref_to_Typedef'>SPELL</span></a> <span class='Operator'>**</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN36"><span class='Ref_to_Proto'>repalloc</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN482"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN217"><span class='Ref_to_Member'>Spell</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN482"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN219"><span class='Ref_to_Member'>mspell</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN60"><span class='Ref_to_Typedef'>SPELL</span></a> <span class='Operator'>*</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <a href="spell.c.html#LN482"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN219"><span class='Ref_to_Member'>mspell</span></a> <span class='Operator'>= </span><span class='Number'>1024</span> <span class='Operator'>* </span><span class='Number'>20</span><span class='Delimiter'>; 
</span>            <a href="spell.c.html#LN482"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN217"><span class='Ref_to_Member'>Spell</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN60"><span class='Ref_to_Typedef'>SPELL</span></a> <span class='Operator'>**</span><span class='Parentheses'>) </span><a href="spell.c.html#LN77"><span class='Ref_to_Macro'>tmpalloc</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN482"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN219"><span class='Ref_to_Member'>mspell</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN60"><span class='Ref_to_Typedef'>SPELL</span></a> <span class='Operator'>*</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span>    <a href="spell.c.html#LN482"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN217"><span class='Ref_to_Member'>Spell</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN482"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN218"><span class='Ref_to_Member'>nspell</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN60"><span class='Ref_to_Typedef'>SPELL</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="spell.c.html#LN77"><span class='Ref_to_Macro'>tmpalloc</span></a><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN81"><span class='Ref_to_Const'>SPELLHDRSZ</span></a> <span class='Operator'>+ </span>strlen<span class='Parentheses'>(</span><a href="spell.c.html#LN482"><span class='Ref_to_Parameter'>word</span></a><span class='Parentheses'>) </span><span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN482"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN217"><span class='Ref_to_Member'>Spell</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN482"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN218"><span class='Ref_to_Member'>nspell</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN78"><span class='Ref_to_Member'>word</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN482"><span class='Ref_to_Parameter'>word</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="spell.c.html#LN482"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN217"><span class='Ref_to_Member'>Spell</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN482"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN218"><span class='Ref_to_Member'>nspell</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN77"><span class='Ref_to_Member'>p</span></a><span class='Operator'>.</span>flag <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN482"><span class='Ref_to_Parameter'>flag</span></a> <span class='Operator'>!= </span><span class='String'>'\0'</span><span class='Parentheses'>) 
</span>        <span class='Operator'>? </span><a href="spell.c.html#LN159"><span class='Ref_to_Func'>cpstrdup</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN482"><span class='Ref_to_Parameter'>Conf</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN482"><span class='Ref_to_Parameter'>flag</span></a><span class='Parentheses'>) </span><span class='Operator'>: </span><a href="spell.c.html#LN192"><span class='Ref_to_Global_Var'>VoidString</span></a><span class='Delimiter'>; 
</span>    <a href="spell.c.html#LN482"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN218"><span class='Ref_to_Member'>nspell</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end NIAddSpell &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Imports dictionary into the temporary array Spell. 
 * 
 * Note caller must already have applied get_tsearch_config_filename. 
 * 
 * Conf: current dictionary. 
 * filename: path to the .dict file. 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN513"></a><span class='Declare_Function'>NIImportDictionary</span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN178"><span class='Ref_to_Typedef'>IspellDict</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>Conf</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>filename</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN515"></a>    <a href="../../include/tsearch/ts_locale.h.html#LN32"><span class='Ref_to_Typedef'>tsearch_readline_state</span></a> <span class='Declare_Local'>trst</span><span class='Delimiter'>; 
</span><a name="LN516"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>line</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../include/tsearch/ts_locale.h.html#LN68"><span class='Ref_to_Proto'>tsearch_readline_begin</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="spell.c.html#LN515"><span class='Ref_To_Local'>trst</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN513"><span class='Ref_to_Parameter'>filename</span></a><span class='Parentheses'>))</span> 
        <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_CONFIG_FILE_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"could not open dictionary file \"%s\": %m"</span><span class='Delimiter'>, 
</span>                        <a href="spell.c.html#LN513"><span class='Ref_to_Parameter'>filename</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>while</span> <span class='Parentheses'>((</span><a href="spell.c.html#LN516"><span class='Ref_To_Local'>line</span></a> <span class='Operator'>= </span><a href="../../include/tsearch/ts_locale.h.html#LN70"><span class='Ref_to_Proto'>tsearch_readline</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="spell.c.html#LN515"><span class='Ref_To_Local'>trst</span></a><span class='Parentheses'>))</span> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span><a name="LN526"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>s</span><span class='Delimiter'>, 
</span><a name="LN527"></a>                   <span class='Operator'>*</span><span class='Declare_Local'>pstr</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Set of affix flags */ 
</span><a name="LN530"></a>        <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>flag</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Extract flag from the line */ 
</span>        <a href="spell.c.html#LN530"><span class='Ref_To_Local'>flag</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="spell.c.html#LN526"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN226"><span class='Ref_to_Func'>findchar</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN516"><span class='Ref_To_Local'>line</span></a><span class='Delimiter'>, </span><span class='String'>'/'</span><span class='Parentheses'>)))</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Operator'>*</span><a href="spell.c.html#LN526"><span class='Ref_To_Local'>s</span></a><span class='Operator'>++ = </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span>            <a href="spell.c.html#LN530"><span class='Ref_To_Local'>flag</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN526"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>while</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN526"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* we allow only single encoded flags for faster works */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/mb/pg_wchar.h.html#LN521"><span class='Ref_to_Proto'>pg_mblen</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN526"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>1</span> <span class='Operator'>&& </span><a href="../../include/tsearch/ts_locale.h.html#LN48"><span class='Ref_to_Proto'>t_isprint</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN526"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>) </span><span class='Operator'>&& !</span><a href="ts_locale.c.html#LN41"><span class='Ref_to_Func'>t_isspace</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN526"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>))</span> 
                    <a href="spell.c.html#LN526"><span class='Ref_To_Local'>s</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>                <span class='Control'>else</span> 
                <span class='Delimiter'>{ 
</span>                    <span class='Operator'>*</span><a href="spell.c.html#LN526"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
            <a href="spell.c.html#LN530"><span class='Ref_To_Local'>flag</span></a> <span class='Operator'>= </span><span class='String'>""</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Remove trailing spaces */ 
</span>        <a href="spell.c.html#LN526"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN516"><span class='Ref_To_Local'>line</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>while</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN526"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ts_locale.c.html#LN41"><span class='Ref_to_Func'>t_isspace</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN526"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Operator'>*</span><a href="spell.c.html#LN526"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <a href="spell.c.html#LN526"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>+= </span><a href="../../include/mb/pg_wchar.h.html#LN521"><span class='Ref_to_Proto'>pg_mblen</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN526"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <a href="spell.c.html#LN527"><span class='Ref_To_Local'>pstr</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN172"><span class='Ref_to_Func'>lowerstr_ctx</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN513"><span class='Ref_to_Parameter'>Conf</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN516"><span class='Ref_To_Local'>line</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="spell.c.html#LN481"><span class='Ref_to_Func'>NIAddSpell</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN513"><span class='Ref_to_Parameter'>Conf</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN527"><span class='Ref_To_Local'>pstr</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN530"><span class='Ref_To_Local'>flag</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN527"><span class='Ref_To_Local'>pstr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN516"><span class='Ref_To_Local'>line</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end while (line=tsearch_readlin... &raquo; </span> 
    <a href="../../include/tsearch/ts_locale.h.html#LN71"><span class='Ref_to_Proto'>tsearch_readline_end</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="spell.c.html#LN515"><span class='Ref_To_Local'>trst</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end NIImportDictionary &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Searches a basic form of word in the prefix tree. This word was generated 
 * using an affix rule. This rule may not be presented in an affix set of 
 * a basic form of word. 
 * 
 * For example, we have the entry in the .dict file: 
 * meter/GMD 
 * 
 * The affix rule with the flag S: 
 * SFX S   y     ies        [^aeiou]y 
 * is not presented here. 
 * 
 * The affix rule with the flag M: 
 * SFX M   0     's         . 
 * is presented here. 
 * 
 * Conf: current dictionary. 
 * word: basic form of word. 
 * affixflag: affix flag, by which a basic form of word was generated. 
 * flag: compound flag used to compare with StopMiddle-&GT;compoundflag. 
 * 
 * Returns 1 if the word was found in the prefix tree, else returns 0. 
 */ 
</span><span class='Keyword'>static int 
</span><a name="LN598"></a><span class='Declare_Function'>FindWord</span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN178"><span class='Ref_to_Typedef'>IspellDict</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>Conf</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>word</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>affixflag</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>flag</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN600"></a>    <a href="../../include/tsearch/dicts/spell.h.html#LN49"><span class='Ref_to_Struct'>SPNode</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>node</span> <span class='Operator'>= </span><a href="spell.c.html#LN598"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN187"><span class='Ref_to_Member'>Dictionary</span></a><span class='Delimiter'>; 
</span><a name="LN601"></a>    <a href="../../include/tsearch/dicts/spell.h.html#LN26"><span class='Ref_to_Typedef'>SPNodeData</span></a> <span class='Operator'>*</span><span class='Declare_Local'>StopLow</span><span class='Delimiter'>, 
</span><a name="LN602"></a>               <span class='Operator'>*</span><span class='Declare_Local'>StopHigh</span><span class='Delimiter'>, 
</span><a name="LN603"></a>               <span class='Operator'>*</span><span class='Declare_Local'>StopMiddle</span><span class='Delimiter'>; 
</span><a name="LN604"></a>    <span class='Keyword'>const </span><a href="../../include/c.h.html#LN265"><span class='Ref_to_Typedef'>uint8</span></a> <span class='Operator'>*</span><span class='Declare_Local'>ptr</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>const </span><a href="../../include/c.h.html#LN265"><span class='Ref_to_Typedef'>uint8</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="spell.c.html#LN598"><span class='Ref_to_Parameter'>word</span></a><span class='Delimiter'>; 
</span> 
    <a href="spell.c.html#LN598"><span class='Ref_to_Parameter'>flag</span></a> <span class='Operator'>&= </span><a href="../../include/tsearch/dicts/spell.h.html#LN47"><span class='Ref_to_Const'>FF_COMPOUNDFLAGMASK</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN600"><span class='Ref_To_Local'>node</span></a> <span class='Operator'>&& *</span><a href="spell.c.html#LN604"><span class='Ref_To_Local'>ptr</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="spell.c.html#LN601"><span class='Ref_To_Local'>StopLow</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN600"><span class='Ref_To_Local'>node</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN52"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>; 
</span>        <a href="spell.c.html#LN602"><span class='Ref_To_Local'>StopHigh</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN600"><span class='Ref_To_Local'>node</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN52"><span class='Ref_to_Member'>data</span></a> <span class='Operator'>+ </span><a href="spell.c.html#LN600"><span class='Ref_To_Local'>node</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN51"><span class='Ref_to_Member'>length</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN601"><span class='Ref_To_Local'>StopLow</span></a> <span class='Operator'>&LT; </span><a href="spell.c.html#LN602"><span class='Ref_To_Local'>StopHigh</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="spell.c.html#LN603"><span class='Ref_To_Local'>StopMiddle</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN601"><span class='Ref_To_Local'>StopLow</span></a> <span class='Operator'>+ </span><span class='Parentheses'>((</span><a href="spell.c.html#LN602"><span class='Ref_To_Local'>StopHigh</span></a> <span class='Operator'>- </span><a href="spell.c.html#LN601"><span class='Ref_To_Local'>StopLow</span></a><span class='Parentheses'>) </span><span class='Operator'>&GT;&GT; </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN603"><span class='Ref_To_Local'>StopMiddle</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN28"><span class='Ref_to_Member'>val</span></a> <span class='Operator'>== *</span><a href="spell.c.html#LN604"><span class='Ref_To_Local'>ptr</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><span class='Parentheses'>(</span><a href="spell.c.html#LN604"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='String'>'\0'</span> <span class='Operator'>&& </span><a href="spell.c.html#LN603"><span class='Ref_To_Local'>StopMiddle</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN29"><span class='Ref_to_Member'>isword</span></a><span class='Parentheses'>)</span> 
                <span class='Delimiter'>{ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN598"><span class='Ref_to_Parameter'>flag</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                    <span class='Delimiter'>{ 
</span>                        <span class='Comment_Multi_Line'>/* 
                         * The word can be formed only with another word. And 
                         * in the flag parameter there is not a sign that we 
                         * search compound words. 
                         */ 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN603"><span class='Ref_To_Local'>StopMiddle</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN31"><span class='Ref_to_Member'>compoundflag</span></a> <span class='Operator'>& </span><a href="../../include/tsearch/dicts/spell.h.html#LN41"><span class='Ref_to_Const'>FF_COMPOUNDONLY</span></a><span class='Parentheses'>) 
</span>                            <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="spell.c.html#LN598"><span class='Ref_to_Parameter'>flag</span></a> <span class='Operator'>& </span><a href="spell.c.html#LN603"><span class='Ref_To_Local'>StopMiddle</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN31"><span class='Ref_to_Member'>compoundflag</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                        <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
</span> 
                    <span class='Comment_Multi_Line'>/* 
                     * Check if this affix rule is presented in the affix set 
                     * with index StopMiddle-&GT;affix. 
                     */ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN451"><span class='Ref_to_Func'>IsAffixFlagInUse</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN598"><span class='Ref_to_Parameter'>Conf</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN603"><span class='Ref_To_Local'>StopMiddle</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN33"><span class='Ref_to_Member'>affix</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN598"><span class='Ref_to_Parameter'>affixflag</span></a><span class='Parentheses'>))</span> 
                        <span class='Control'>return</span> <span class='Number'>1</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if *(ptr+1)=='\0'&&StopM... &raquo; </span> 
                <a href="spell.c.html#LN600"><span class='Ref_To_Local'>node</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN603"><span class='Ref_To_Local'>StopMiddle</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN34"><span class='Ref_to_Member'>node</span></a><span class='Delimiter'>; 
</span>                <a href="spell.c.html#LN604"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if StopMiddle-&GT;val==*ptr &raquo; </span> 
            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN603"><span class='Ref_To_Local'>StopMiddle</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN28"><span class='Ref_to_Member'>val</span></a> <span class='Operator'>&LT; *</span><a href="spell.c.html#LN604"><span class='Ref_To_Local'>ptr</span></a><span class='Parentheses'>) 
</span>                <a href="spell.c.html#LN601"><span class='Ref_To_Local'>StopLow</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN603"><span class='Ref_To_Local'>StopMiddle</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
                <a href="spell.c.html#LN602"><span class='Ref_To_Local'>StopHigh</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN603"><span class='Ref_To_Local'>StopMiddle</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end while StopLow&LT;StopHigh &raquo; </span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN601"><span class='Ref_To_Local'>StopLow</span></a> <span class='Operator'>&GT;= </span><a href="spell.c.html#LN602"><span class='Ref_To_Local'>StopHigh</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end while node&&*ptr &raquo; </span> 
    <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end FindWord &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Adds a new affix rule to the Affix field. 
 * 
 * Conf: current dictionary. 
 * flag: affix flag ('\' in the below example). 
 * flagflags: set of flags from the flagval field for this affix rule. This set 
 *            is listed after '/' character in the added string (repl). 
 * 
 *            For example L flag in the hunspell_sample.affix: 
 *            SFX \   0 Y/L [^Y] 
 * 
 * mask: condition for search ('[^Y]' in the above example). 
 * find: stripping characters from beginning (at prefix) or end (at suffix) 
 *       of the word ('0' in the above example, 0 means that there is not 
 *       stripping character). 
 * repl: adding string after stripping ('Y' in the above example). 
 * type: FF_SUFFIX or FF_PREFIX. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN673"></a><span class='Declare_Function'>NIAddAffix</span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN178"><span class='Ref_to_Typedef'>IspellDict</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>Conf</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>flag</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Declare_Parameter'>flagflags</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>mask</span><span class='Delimiter'>, 
</span><a name="LN674"></a>           <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>find</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>repl</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>type</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN676"></a>    <a href="../../include/tsearch/dicts/spell.h.html#LN86"><span class='Ref_to_Typedef'>AFFIX</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>Affix</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN673"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN181"><span class='Ref_to_Member'>naffixes</span></a> <span class='Operator'>&GT;= </span><a href="spell.c.html#LN673"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN180"><span class='Ref_to_Member'>maffixes</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN673"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN180"><span class='Ref_to_Member'>maffixes</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="spell.c.html#LN673"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN180"><span class='Ref_to_Member'>maffixes</span></a> <span class='Operator'>*= </span><span class='Number'>2</span><span class='Delimiter'>; 
</span>            <a href="spell.c.html#LN673"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN182"><span class='Ref_to_Member'>Affix</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN86"><span class='Ref_to_Typedef'>AFFIX</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN36"><span class='Ref_to_Proto'>repalloc</span></a><span class='Parentheses'>((</span><span class='Keyword'>void </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="spell.c.html#LN673"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN182"><span class='Ref_to_Member'>Affix</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN673"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN180"><span class='Ref_to_Member'>maffixes</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN86"><span class='Ref_to_Typedef'>AFFIX</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <a href="spell.c.html#LN673"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN180"><span class='Ref_to_Member'>maffixes</span></a> <span class='Operator'>= </span><span class='Number'>16</span><span class='Delimiter'>; 
</span>            <a href="spell.c.html#LN673"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN182"><span class='Ref_to_Member'>Affix</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN86"><span class='Ref_to_Typedef'>AFFIX</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN673"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN180"><span class='Ref_to_Member'>maffixes</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN86"><span class='Ref_to_Typedef'>AFFIX</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="spell.c.html#LN676"><span class='Ref_To_Local'>Affix</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN673"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN182"><span class='Ref_to_Member'>Affix</span></a> <span class='Operator'>+ </span><a href="spell.c.html#LN673"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN181"><span class='Ref_to_Member'>naffixes</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* This affix rule can be applied for words with any ending */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="spell.c.html#LN673"><span class='Ref_to_Parameter'>mask</span></a><span class='Delimiter'>, </span><span class='String'>"."</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span> <span class='Operator'>|| *</span><a href="spell.c.html#LN673"><span class='Ref_to_Parameter'>mask</span></a> <span class='Operator'>== </span><span class='String'>'\0'</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="spell.c.html#LN676"><span class='Ref_To_Local'>Affix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN92"><span class='Ref_to_Member'>issimple</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <a href="spell.c.html#LN676"><span class='Ref_To_Local'>Affix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN93"><span class='Ref_to_Member'>isregis</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Comment_Multi_Line'>/* This affix rule will use regis to search word ending */ 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="regis.c.html#LN29"><span class='Ref_to_Func'>RS_isRegis</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN673"><span class='Ref_to_Parameter'>mask</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="spell.c.html#LN676"><span class='Ref_To_Local'>Affix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN92"><span class='Ref_to_Member'>issimple</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <a href="spell.c.html#LN676"><span class='Ref_To_Local'>Affix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN93"><span class='Ref_to_Member'>isregis</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <a href="../../include/tsearch/dicts/regis.h.html#LN42"><span class='Ref_to_Proto'>RS_compile</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="spell.c.html#LN676"><span class='Ref_To_Local'>Affix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN101"><span class='Ref_to_Member'>reg</span></a><span class='Operator'>.</span>regis<span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="spell.c.html#LN674"><span class='Ref_to_Parameter'>type</span></a> <span class='Operator'>== </span><a href="../../include/tsearch/dicts/spell.h.html#LN115"><span class='Ref_to_Const'>FF_SUFFIX</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                   <span class='Operator'>*</span><a href="spell.c.html#LN673"><span class='Ref_to_Parameter'>mask</span></a> <span class='Operator'>? </span><a href="spell.c.html#LN673"><span class='Ref_to_Parameter'>mask</span></a> <span class='Operator'>: </span><a href="spell.c.html#LN192"><span class='Ref_to_Global_Var'>VoidString</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Comment_Multi_Line'>/* This affix rule will use regex_t to search word ending */ 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span><a name="LN711"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>masklen</span><span class='Delimiter'>; 
</span><a name="LN712"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>wmasklen</span><span class='Delimiter'>; 
</span><a name="LN713"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>err</span><span class='Delimiter'>; 
</span><a name="LN714"></a>        <a href="../../include/mb/pg_wchar.h.html#LN24"><span class='Ref_to_Typedef'>pg_wchar</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>wmask</span><span class='Delimiter'>; 
</span><a name="LN715"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>tmask</span><span class='Delimiter'>; 
</span> 
        <a href="spell.c.html#LN676"><span class='Ref_To_Local'>Affix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN92"><span class='Ref_to_Member'>issimple</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <a href="spell.c.html#LN676"><span class='Ref_To_Local'>Affix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN93"><span class='Ref_to_Member'>isregis</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <a href="spell.c.html#LN715"><span class='Ref_To_Local'>tmask</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="spell.c.html#LN77"><span class='Ref_to_Macro'>tmpalloc</span></a><span class='Parentheses'>(</span>strlen<span class='Parentheses'>(</span><a href="spell.c.html#LN673"><span class='Ref_to_Parameter'>mask</span></a><span class='Parentheses'>) </span><span class='Operator'>+ </span><span class='Number'>3</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN674"><span class='Ref_to_Parameter'>type</span></a> <span class='Operator'>== </span><a href="../../include/tsearch/dicts/spell.h.html#LN115"><span class='Ref_to_Const'>FF_SUFFIX</span></a><span class='Parentheses'>) 
</span>            <a href="../../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN715"><span class='Ref_To_Local'>tmask</span></a><span class='Delimiter'>, </span><span class='String'>"%s$"</span><span class='Delimiter'>, </span><a href="spell.c.html#LN673"><span class='Ref_to_Parameter'>mask</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="../../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN715"><span class='Ref_To_Local'>tmask</span></a><span class='Delimiter'>, </span><span class='String'>"^%s"</span><span class='Delimiter'>, </span><a href="spell.c.html#LN673"><span class='Ref_to_Parameter'>mask</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="spell.c.html#LN711"><span class='Ref_To_Local'>masklen</span></a> <span class='Operator'>= </span>strlen<span class='Parentheses'>(</span><a href="spell.c.html#LN715"><span class='Ref_To_Local'>tmask</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="spell.c.html#LN714"><span class='Ref_To_Local'>wmask</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/mb/pg_wchar.h.html#LN24"><span class='Ref_to_Typedef'>pg_wchar</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="spell.c.html#LN77"><span class='Ref_to_Macro'>tmpalloc</span></a><span class='Parentheses'>((</span><a href="spell.c.html#LN711"><span class='Ref_To_Local'>masklen</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>) </span><span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/mb/pg_wchar.h.html#LN24"><span class='Ref_to_Typedef'>pg_wchar</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="spell.c.html#LN712"><span class='Ref_To_Local'>wmasklen</span></a> <span class='Operator'>= </span><a href="../../include/mb/pg_wchar.h.html#LN510"><span class='Ref_to_Proto'>pg_mb2wchar_with_len</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN715"><span class='Ref_To_Local'>tmask</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN714"><span class='Ref_To_Local'>wmask</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN711"><span class='Ref_To_Local'>masklen</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="spell.c.html#LN713"><span class='Ref_To_Local'>err</span></a> <span class='Operator'>= </span><a href="../../include/regex/regex.h.html#LN169"><span class='Ref_to_Proto'>pg_regcomp</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="spell.c.html#LN676"><span class='Ref_To_Local'>Affix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN101"><span class='Ref_to_Member'>reg</span></a><span class='Operator'>.</span>regex<span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="spell.c.html#LN714"><span class='Ref_To_Local'>wmask</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN712"><span class='Ref_To_Local'>wmasklen</span></a><span class='Delimiter'>, 
</span>                         <a href="../../include/regex/regex.h.html#LN102"><span class='Ref_to_Const'>REG_ADVANCED</span></a> <span class='Operator'>| </span><a href="../../include/regex/regex.h.html#LN106"><span class='Ref_to_Const'>REG_NOSUB</span></a><span class='Delimiter'>, 
</span>                         <a href="../../include/catalog/pg_collation.h.html#LN74"><span class='Ref_to_Const'>DEFAULT_COLLATION_OID</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN713"><span class='Ref_To_Local'>err</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN734"></a>            <span class='Keyword'>char</span>        <span class='Declare_Local'>errstr</span><span class='Delimiter'>[</span><span class='Number'>100</span><span class='Delimiter'>]; 
</span> 
            <a href="../regex/regerror.c.html#LN58"><span class='Ref_to_Func'>pg_regerror</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN713"><span class='Ref_To_Local'>err</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="spell.c.html#LN676"><span class='Ref_To_Local'>Affix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN101"><span class='Ref_to_Member'>reg</span></a><span class='Operator'>.</span>regex<span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="spell.c.html#LN734"><span class='Ref_To_Local'>errstr</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="spell.c.html#LN734"><span class='Ref_To_Local'>errstr</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INVALID_REGULAR_EXPRESSION<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"invalid regular expression: %s"</span><span class='Delimiter'>, </span><a href="spell.c.html#LN734"><span class='Ref_To_Local'>errstr</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
 
    <a href="spell.c.html#LN676"><span class='Ref_To_Local'>Affix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN91"><span class='Ref_to_Member'>flagflags</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN673"><span class='Ref_to_Parameter'>flagflags</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="spell.c.html#LN676"><span class='Ref_To_Local'>Affix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN91"><span class='Ref_to_Member'>flagflags</span></a> <span class='Operator'>& </span><a href="../../include/tsearch/dicts/spell.h.html#LN41"><span class='Ref_to_Const'>FF_COMPOUNDONLY</span></a><span class='Parentheses'>) </span><span class='Operator'>|| </span><span class='Parentheses'>(</span><a href="spell.c.html#LN676"><span class='Ref_To_Local'>Affix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN91"><span class='Ref_to_Member'>flagflags</span></a> <span class='Operator'>& </span><a href="../../include/tsearch/dicts/spell.h.html#LN107"><span class='Ref_to_Const'>FF_COMPOUNDPERMITFLAG</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="spell.c.html#LN676"><span class='Ref_To_Local'>Affix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN91"><span class='Ref_to_Member'>flagflags</span></a> <span class='Operator'>& </span><a href="../../include/tsearch/dicts/spell.h.html#LN45"><span class='Ref_to_Const'>FF_COMPOUNDFLAG</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <a href="spell.c.html#LN676"><span class='Ref_To_Local'>Affix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN91"><span class='Ref_to_Member'>flagflags</span></a> <span class='Operator'>|= </span><a href="../../include/tsearch/dicts/spell.h.html#LN45"><span class='Ref_to_Const'>FF_COMPOUNDFLAG</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="spell.c.html#LN676"><span class='Ref_To_Local'>Affix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN88"><span class='Ref_to_Member'>flag</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN159"><span class='Ref_to_Func'>cpstrdup</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN673"><span class='Ref_to_Parameter'>Conf</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN673"><span class='Ref_to_Parameter'>flag</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="spell.c.html#LN676"><span class='Ref_To_Local'>Affix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN90"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN674"><span class='Ref_to_Parameter'>type</span></a><span class='Delimiter'>; 
</span> 
    <a href="spell.c.html#LN676"><span class='Ref_To_Local'>Affix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN95"><span class='Ref_to_Member'>find</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="spell.c.html#LN674"><span class='Ref_to_Parameter'>find</span></a> <span class='Operator'>&& *</span><a href="spell.c.html#LN674"><span class='Ref_to_Parameter'>find</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><a href="spell.c.html#LN159"><span class='Ref_to_Func'>cpstrdup</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN673"><span class='Ref_to_Parameter'>Conf</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN674"><span class='Ref_to_Parameter'>find</span></a><span class='Parentheses'>) </span><span class='Operator'>: </span><a href="spell.c.html#LN192"><span class='Ref_to_Global_Var'>VoidString</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="spell.c.html#LN676"><span class='Ref_To_Local'>Affix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN94"><span class='Ref_to_Member'>replen</span></a> <span class='Operator'>= </span>strlen<span class='Parentheses'>(</span><a href="spell.c.html#LN674"><span class='Ref_to_Parameter'>repl</span></a><span class='Parentheses'>))</span> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <a href="spell.c.html#LN676"><span class='Ref_To_Local'>Affix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN96"><span class='Ref_to_Member'>repl</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN159"><span class='Ref_to_Func'>cpstrdup</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN673"><span class='Ref_to_Parameter'>Conf</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN674"><span class='Ref_to_Parameter'>repl</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="spell.c.html#LN676"><span class='Ref_To_Local'>Affix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN96"><span class='Ref_to_Member'>repl</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN192"><span class='Ref_to_Global_Var'>VoidString</span></a><span class='Delimiter'>; 
</span>    <a href="spell.c.html#LN673"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN181"><span class='Ref_to_Member'>naffixes</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end NIAddAffix &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* Parsing states for parse_affentry() and friends */ 
</span><a name="LN761"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>PAE_WAIT_MASK</span>   <span class='Number'>0</span> 
<a name="LN762"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>PAE_INMASK</span>      <span class='Number'>1</span> 
<a name="LN763"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>PAE_WAIT_FIND</span>   <span class='Number'>2</span> 
<a name="LN764"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>PAE_INFIND</span>      <span class='Number'>3</span> 
<a name="LN765"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>PAE_WAIT_REPL</span>   <span class='Number'>4</span> 
<a name="LN766"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>PAE_INREPL</span>      <span class='Number'>5</span> 
<a name="LN767"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>PAE_WAIT_TYPE</span>   <span class='Number'>6</span> 
<a name="LN768"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>PAE_WAIT_FLAG</span>   <span class='Number'>7</span> 
 
<span class='Comment_Multi_Line'>/* 
 * Parse next space-separated field of an .affix file line. 
 * 
 * *str is the input pointer (will be advanced past field) 
 * next is where to copy the field value to, with null termination 
 * 
 * The buffer at "next" must be of size BUFSIZ; we truncate the input to fit. 
 * 
 * Returns TRUE if we found a field, FALSE if not. 
 */ 
</span><span class='Keyword'>static bool 
</span><a name="LN781"></a><span class='Declare_Function'>get_nextfield</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>**</span><span class='Declare_Parameter'>str</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>next</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN783"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>state</span> <span class='Operator'>= </span><a href="spell.c.html#LN761"><span class='Ref_to_Const'>PAE_WAIT_MASK</span></a><span class='Delimiter'>; 
</span><a name="LN784"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>avail</span> <span class='Operator'>= </span>BUFSIZ<span class='Delimiter'>; 
</span> 
    <span class='Control'>while</span> <span class='Parentheses'>(</span><span class='Operator'>**</span><a href="spell.c.html#LN781"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN783"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>== </span><a href="spell.c.html#LN761"><span class='Ref_to_Const'>PAE_WAIT_MASK</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/tsearch/ts_locale.h.html#LN51"><span class='Ref_to_Macro'>t_iseq</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN781"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>, </span><span class='String'>'#'</span><span class='Parentheses'>))</span> 
                <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ts_locale.c.html#LN41"><span class='Ref_to_Func'>t_isspace</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN781"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span><a name="LN794"></a>                <span class='Keyword'>int</span>         <span class='Declare_Local'>clen</span> <span class='Operator'>= </span><a href="../../include/mb/pg_wchar.h.html#LN521"><span class='Ref_to_Proto'>pg_mblen</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN781"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN794"><span class='Ref_To_Local'>clen</span></a> <span class='Operator'>&LT; </span><a href="spell.c.html#LN784"><span class='Ref_To_Local'>avail</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <a href="../../include/tsearch/ts_locale.h.html#LN53"><span class='Ref_to_Macro'>COPYCHAR</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN781"><span class='Ref_to_Parameter'>next</span></a><span class='Delimiter'>, </span><span class='Operator'>*</span><a href="spell.c.html#LN781"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="spell.c.html#LN781"><span class='Ref_to_Parameter'>next</span></a> <span class='Operator'>+= </span><a href="spell.c.html#LN794"><span class='Ref_To_Local'>clen</span></a><span class='Delimiter'>; 
</span>                    <a href="spell.c.html#LN784"><span class='Ref_To_Local'>avail</span></a> <span class='Operator'>-= </span><a href="spell.c.html#LN794"><span class='Ref_To_Local'>clen</span></a><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <a href="spell.c.html#LN783"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN762"><span class='Ref_to_Const'>PAE_INMASK</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span>    <span class='Comment_Single_Line'>/* state == PAE_INMASK */ 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ts_locale.c.html#LN41"><span class='Ref_to_Func'>t_isspace</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN781"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Operator'>*</span><a href="spell.c.html#LN781"><span class='Ref_to_Parameter'>next</span></a> <span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span>                <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> 
            <span class='Delimiter'>{ 
</span><a name="LN814"></a>                <span class='Keyword'>int</span>         <span class='Declare_Local'>clen</span> <span class='Operator'>= </span><a href="../../include/mb/pg_wchar.h.html#LN521"><span class='Ref_to_Proto'>pg_mblen</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN781"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN814"><span class='Ref_To_Local'>clen</span></a> <span class='Operator'>&LT; </span><a href="spell.c.html#LN784"><span class='Ref_To_Local'>avail</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <a href="../../include/tsearch/ts_locale.h.html#LN53"><span class='Ref_to_Macro'>COPYCHAR</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN781"><span class='Ref_to_Parameter'>next</span></a><span class='Delimiter'>, </span><span class='Operator'>*</span><a href="spell.c.html#LN781"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="spell.c.html#LN781"><span class='Ref_to_Parameter'>next</span></a> <span class='Operator'>+= </span><a href="spell.c.html#LN814"><span class='Ref_To_Local'>clen</span></a><span class='Delimiter'>; 
</span>                    <a href="spell.c.html#LN784"><span class='Ref_To_Local'>avail</span></a> <span class='Operator'>-= </span><a href="spell.c.html#LN814"><span class='Ref_To_Local'>clen</span></a><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>} 
</span>        <span class='Operator'>*</span><a href="spell.c.html#LN781"><span class='Ref_to_Parameter'>str</span></a> <span class='Operator'>+= </span><a href="../../include/mb/pg_wchar.h.html#LN521"><span class='Ref_to_Proto'>pg_mblen</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN781"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end while **str &raquo; </span> 
 
    <span class='Operator'>*</span><a href="spell.c.html#LN781"><span class='Ref_to_Parameter'>next</span></a> <span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN783"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>== </span><a href="spell.c.html#LN762"><span class='Ref_to_Const'>PAE_INMASK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* OK if we got a nonempty field */ 
</span><span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end get_nextfield &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Parses entry of an .affix file of MySpell or Hunspell format. 
 * 
 * An .affix file entry has the following format: 
 * - header 
 *   &LT;type&GT;  &LT;flag&GT;  &LT;cross_flag&GT;  &LT;flag_count&GT; 
 * - fields after header: 
 *   &LT;type&GT;  &LT;flag&GT;  &LT;find&GT;  &LT;replace&GT;  &LT;mask&GT; 
 * 
 * str is the input line 
 * field values are returned to type etc, which must be buffers of size BUFSIZ. 
 * 
 * Returns number of fields found; any omitted fields are set to empty strings. 
 */ 
</span><span class='Keyword'>static int 
</span><a name="LN847"></a><span class='Declare_Function'>parse_ooaffentry</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>str</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>type</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>flag</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>find</span><span class='Delimiter'>, 
</span><a name="LN848"></a>                 <span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>repl</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>mask</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN850"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>state</span> <span class='Operator'>= </span><a href="spell.c.html#LN767"><span class='Ref_to_Const'>PAE_WAIT_TYPE</span></a><span class='Delimiter'>; 
</span><a name="LN851"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>fields_read</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN852"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>valid</span> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
    <span class='Operator'>*</span><a href="spell.c.html#LN847"><span class='Ref_to_Parameter'>type</span></a> <span class='Operator'>= *</span><a href="spell.c.html#LN847"><span class='Ref_to_Parameter'>flag</span></a> <span class='Operator'>= *</span><a href="spell.c.html#LN847"><span class='Ref_to_Parameter'>find</span></a> <span class='Operator'>= *</span><a href="spell.c.html#LN848"><span class='Ref_to_Parameter'>repl</span></a> <span class='Operator'>= *</span><a href="spell.c.html#LN848"><span class='Ref_to_Parameter'>mask</span></a> <span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>while</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN847"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN850"><span class='Ref_To_Local'>state</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>case</span> <a href="spell.c.html#LN767"><span class='Ref_to_Const'>PAE_WAIT_TYPE</span></a><span class='Operator'>: 
</span>                <a href="spell.c.html#LN852"><span class='Ref_To_Local'>valid</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN780"><span class='Ref_to_Func'>get_nextfield</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="spell.c.html#LN847"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN847"><span class='Ref_to_Parameter'>type</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="spell.c.html#LN850"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN768"><span class='Ref_to_Const'>PAE_WAIT_FLAG</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="spell.c.html#LN768"><span class='Ref_to_Const'>PAE_WAIT_FLAG</span></a><span class='Operator'>: 
</span>                <a href="spell.c.html#LN852"><span class='Ref_To_Local'>valid</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN780"><span class='Ref_to_Func'>get_nextfield</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="spell.c.html#LN847"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN847"><span class='Ref_to_Parameter'>flag</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="spell.c.html#LN850"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN763"><span class='Ref_to_Const'>PAE_WAIT_FIND</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="spell.c.html#LN763"><span class='Ref_to_Const'>PAE_WAIT_FIND</span></a><span class='Operator'>: 
</span>                <a href="spell.c.html#LN852"><span class='Ref_To_Local'>valid</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN780"><span class='Ref_to_Func'>get_nextfield</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="spell.c.html#LN847"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN847"><span class='Ref_to_Parameter'>find</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="spell.c.html#LN850"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN765"><span class='Ref_to_Const'>PAE_WAIT_REPL</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="spell.c.html#LN765"><span class='Ref_to_Const'>PAE_WAIT_REPL</span></a><span class='Operator'>: 
</span>                <a href="spell.c.html#LN852"><span class='Ref_To_Local'>valid</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN780"><span class='Ref_to_Func'>get_nextfield</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="spell.c.html#LN847"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN848"><span class='Ref_to_Parameter'>repl</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="spell.c.html#LN850"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN761"><span class='Ref_to_Const'>PAE_WAIT_MASK</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="spell.c.html#LN761"><span class='Ref_to_Const'>PAE_WAIT_MASK</span></a><span class='Operator'>: 
</span>                <a href="spell.c.html#LN852"><span class='Ref_To_Local'>valid</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN780"><span class='Ref_to_Func'>get_nextfield</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="spell.c.html#LN847"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN848"><span class='Ref_to_Parameter'>mask</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="spell.c.html#LN850"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>= -</span><span class='Number'>1</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* force loop exit */ 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>default</span><span class='Operator'>: 
</span>                <a href="../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"unrecognized state in parse_ooaffentry: %d"</span><span class='Delimiter'>, 
</span>                     <a href="spell.c.html#LN850"><span class='Ref_To_Local'>state</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch state &raquo; </span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN852"><span class='Ref_To_Local'>valid</span></a><span class='Parentheses'>) 
</span>            <a href="spell.c.html#LN851"><span class='Ref_To_Local'>fields_read</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <span class='Control'>break</span><span class='Delimiter'>;</span>              <span class='Comment_Single_Line'>/* early EOL */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN850"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <span class='Control'>break</span><span class='Delimiter'>;</span>              <span class='Comment_Single_Line'>/* got all fields */ 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end while *str &raquo; </span> 
 
    <span class='Control'>return</span> <a href="spell.c.html#LN851"><span class='Ref_To_Local'>fields_read</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end parse_ooaffentry &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Parses entry of an .affix file of Ispell format 
 * 
 * An .affix file entry has the following format: 
 * &LT;mask&GT;  &GT;  [-&LT;find&GT;,]&LT;replace&GT; 
 */ 
</span><span class='Keyword'>static bool 
</span><a name="LN903"></a><span class='Declare_Function'>parse_affentry</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>str</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>mask</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>find</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>repl</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN905"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>state</span> <span class='Operator'>= </span><a href="spell.c.html#LN761"><span class='Ref_to_Const'>PAE_WAIT_MASK</span></a><span class='Delimiter'>; 
</span><a name="LN906"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>pmask</span> <span class='Operator'>= </span><a href="spell.c.html#LN903"><span class='Ref_to_Parameter'>mask</span></a><span class='Delimiter'>, 
</span><a name="LN907"></a>               <span class='Operator'>*</span><span class='Declare_Local'>pfind</span> <span class='Operator'>= </span><a href="spell.c.html#LN903"><span class='Ref_to_Parameter'>find</span></a><span class='Delimiter'>, 
</span><a name="LN908"></a>               <span class='Operator'>*</span><span class='Declare_Local'>prepl</span> <span class='Operator'>= </span><a href="spell.c.html#LN903"><span class='Ref_to_Parameter'>repl</span></a><span class='Delimiter'>; 
</span> 
    <span class='Operator'>*</span><a href="spell.c.html#LN903"><span class='Ref_to_Parameter'>mask</span></a> <span class='Operator'>= *</span><a href="spell.c.html#LN903"><span class='Ref_to_Parameter'>find</span></a> <span class='Operator'>= *</span><a href="spell.c.html#LN903"><span class='Ref_to_Parameter'>repl</span></a> <span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>while</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN903"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN905"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>== </span><a href="spell.c.html#LN761"><span class='Ref_to_Const'>PAE_WAIT_MASK</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/tsearch/ts_locale.h.html#LN51"><span class='Ref_to_Macro'>t_iseq</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN903"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>, </span><span class='String'>'#'</span><span class='Parentheses'>))</span> 
                <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ts_locale.c.html#LN41"><span class='Ref_to_Func'>t_isspace</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN903"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span>                <a href="../../include/tsearch/ts_locale.h.html#LN53"><span class='Ref_to_Macro'>COPYCHAR</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN906"><span class='Ref_To_Local'>pmask</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN903"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="spell.c.html#LN906"><span class='Ref_To_Local'>pmask</span></a> <span class='Operator'>+= </span><a href="../../include/mb/pg_wchar.h.html#LN521"><span class='Ref_to_Proto'>pg_mblen</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN903"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="spell.c.html#LN905"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN762"><span class='Ref_to_Const'>PAE_INMASK</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN905"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>== </span><a href="spell.c.html#LN762"><span class='Ref_to_Const'>PAE_INMASK</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/tsearch/ts_locale.h.html#LN51"><span class='Ref_to_Macro'>t_iseq</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN903"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>, </span><span class='String'>'&GT;'</span><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Operator'>*</span><a href="spell.c.html#LN906"><span class='Ref_To_Local'>pmask</span></a> <span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span>                <a href="spell.c.html#LN905"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN763"><span class='Ref_to_Const'>PAE_WAIT_FIND</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ts_locale.c.html#LN41"><span class='Ref_to_Func'>t_isspace</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN903"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span>                <a href="../../include/tsearch/ts_locale.h.html#LN53"><span class='Ref_to_Macro'>COPYCHAR</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN906"><span class='Ref_To_Local'>pmask</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN903"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="spell.c.html#LN906"><span class='Ref_To_Local'>pmask</span></a> <span class='Operator'>+= </span><a href="../../include/mb/pg_wchar.h.html#LN521"><span class='Ref_to_Proto'>pg_mblen</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN903"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN905"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>== </span><a href="spell.c.html#LN763"><span class='Ref_to_Const'>PAE_WAIT_FIND</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/tsearch/ts_locale.h.html#LN51"><span class='Ref_to_Macro'>t_iseq</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN903"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>, </span><span class='String'>'-'</span><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span>                <a href="spell.c.html#LN905"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN764"><span class='Ref_to_Const'>PAE_INFIND</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/tsearch/ts_locale.h.html#LN47"><span class='Ref_to_Proto'>t_isalpha</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN903"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>) </span><span class='Operator'>|| </span><a href="../../include/tsearch/ts_locale.h.html#LN51"><span class='Ref_to_Macro'>t_iseq</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN903"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>, </span><span class='String'>'\''</span><span class='Parentheses'>) </span><span class='Comment_Multi_Line'>/* english 's */ </span><span class='Parentheses'>)</span> 
            <span class='Delimiter'>{ 
</span>                <a href="../../include/tsearch/ts_locale.h.html#LN53"><span class='Ref_to_Macro'>COPYCHAR</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN908"><span class='Ref_To_Local'>prepl</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN903"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="spell.c.html#LN908"><span class='Ref_To_Local'>prepl</span></a> <span class='Operator'>+= </span><a href="../../include/mb/pg_wchar.h.html#LN521"><span class='Ref_to_Proto'>pg_mblen</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN903"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="spell.c.html#LN905"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN766"><span class='Ref_to_Const'>PAE_INREPL</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ts_locale.c.html#LN41"><span class='Ref_to_Func'>t_isspace</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN903"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>))</span> 
                <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_CONFIG_FILE_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"syntax error"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN905"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>== </span><a href="spell.c.html#LN764"><span class='Ref_to_Const'>PAE_INFIND</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/tsearch/ts_locale.h.html#LN51"><span class='Ref_to_Macro'>t_iseq</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN903"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>, </span><span class='String'>','</span><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Operator'>*</span><a href="spell.c.html#LN907"><span class='Ref_To_Local'>pfind</span></a> <span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span>                <a href="spell.c.html#LN905"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN765"><span class='Ref_to_Const'>PAE_WAIT_REPL</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/tsearch/ts_locale.h.html#LN47"><span class='Ref_to_Proto'>t_isalpha</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN903"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span>                <a href="../../include/tsearch/ts_locale.h.html#LN53"><span class='Ref_to_Macro'>COPYCHAR</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN907"><span class='Ref_To_Local'>pfind</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN903"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="spell.c.html#LN907"><span class='Ref_To_Local'>pfind</span></a> <span class='Operator'>+= </span><a href="../../include/mb/pg_wchar.h.html#LN521"><span class='Ref_to_Proto'>pg_mblen</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN903"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ts_locale.c.html#LN41"><span class='Ref_to_Func'>t_isspace</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN903"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>))</span> 
                <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_CONFIG_FILE_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"syntax error"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN905"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>== </span><a href="spell.c.html#LN765"><span class='Ref_to_Const'>PAE_WAIT_REPL</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/tsearch/ts_locale.h.html#LN51"><span class='Ref_to_Macro'>t_iseq</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN903"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>, </span><span class='String'>'-'</span><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Control'>break</span><span class='Delimiter'>;</span>          <span class='Comment_Single_Line'>/* void repl */ 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/tsearch/ts_locale.h.html#LN47"><span class='Ref_to_Proto'>t_isalpha</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN903"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span>                <a href="../../include/tsearch/ts_locale.h.html#LN53"><span class='Ref_to_Macro'>COPYCHAR</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN908"><span class='Ref_To_Local'>prepl</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN903"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="spell.c.html#LN908"><span class='Ref_To_Local'>prepl</span></a> <span class='Operator'>+= </span><a href="../../include/mb/pg_wchar.h.html#LN521"><span class='Ref_to_Proto'>pg_mblen</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN903"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="spell.c.html#LN905"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN766"><span class='Ref_to_Const'>PAE_INREPL</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ts_locale.c.html#LN41"><span class='Ref_to_Func'>t_isspace</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN903"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>))</span> 
                <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_CONFIG_FILE_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"syntax error"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN905"><span class='Ref_To_Local'>state</span></a> <span class='Operator'>== </span><a href="spell.c.html#LN766"><span class='Ref_to_Const'>PAE_INREPL</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/tsearch/ts_locale.h.html#LN51"><span class='Ref_to_Macro'>t_iseq</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN903"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>, </span><span class='String'>'#'</span><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Operator'>*</span><a href="spell.c.html#LN908"><span class='Ref_To_Local'>prepl</span></a> <span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/tsearch/ts_locale.h.html#LN47"><span class='Ref_to_Proto'>t_isalpha</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN903"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span>                <a href="../../include/tsearch/ts_locale.h.html#LN53"><span class='Ref_to_Macro'>COPYCHAR</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN908"><span class='Ref_To_Local'>prepl</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN903"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="spell.c.html#LN908"><span class='Ref_To_Local'>prepl</span></a> <span class='Operator'>+= </span><a href="../../include/mb/pg_wchar.h.html#LN521"><span class='Ref_to_Proto'>pg_mblen</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN903"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ts_locale.c.html#LN41"><span class='Ref_to_Func'>t_isspace</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN903"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>))</span> 
                <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_CONFIG_FILE_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"syntax error"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
            <a href="../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"unrecognized state in parse_affentry: %d"</span><span class='Delimiter'>, </span><a href="spell.c.html#LN905"><span class='Ref_To_Local'>state</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="spell.c.html#LN903"><span class='Ref_to_Parameter'>str</span></a> <span class='Operator'>+= </span><a href="../../include/mb/pg_wchar.h.html#LN521"><span class='Ref_to_Proto'>pg_mblen</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN903"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end while *str &raquo; </span> 
 
    <span class='Operator'>*</span><a href="spell.c.html#LN906"><span class='Ref_To_Local'>pmask</span></a> <span class='Operator'>= *</span><a href="spell.c.html#LN907"><span class='Ref_To_Local'>pfind</span></a> <span class='Operator'>= *</span><a href="spell.c.html#LN908"><span class='Ref_To_Local'>prepl</span></a> <span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN903"><span class='Ref_to_Parameter'>mask</span></a> <span class='Operator'>&& </span><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN903"><span class='Ref_to_Parameter'>find</span></a> <span class='Operator'>|| *</span><a href="spell.c.html#LN903"><span class='Ref_to_Parameter'>repl</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end parse_affentry &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Sets a Hunspell options depending on flag type. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN1021"></a><span class='Declare_Function'>setCompoundAffixFlagValue</span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN178"><span class='Ref_to_Typedef'>IspellDict</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>Conf</span><span class='Delimiter'>, </span><a href="../../include/tsearch/dicts/spell.h.html#LN162"><span class='Ref_to_Struct'>CompoundAffixFlag</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>entry</span><span class='Delimiter'>, 
</span><a name="LN1022"></a>                          <span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>s</span><span class='Delimiter'>, </span><a href="../../include/c.h.html#LN267"><span class='Ref_to_Typedef'>uint32</span></a> <span class='Declare_Parameter'>val</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1021"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN197"><span class='Ref_to_Member'>flagMode</span></a> <span class='Operator'>== </span><a href="../../include/tsearch/dicts/spell.h.html#LN155"><span class='Ref_to_EnumConst'>FM_NUM</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN1026"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>next</span><span class='Delimiter'>; 
</span><a name="LN1027"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
        <a href="spell.c.html#LN1027"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span>strtol<span class='Parentheses'>(</span><a href="spell.c.html#LN1022"><span class='Ref_to_Parameter'>s</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="spell.c.html#LN1026"><span class='Ref_To_Local'>next</span></a><span class='Delimiter'>, </span><span class='Number'>10</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1022"><span class='Ref_to_Parameter'>s</span></a> <span class='Operator'>== </span><a href="spell.c.html#LN1026"><span class='Ref_To_Local'>next</span></a> <span class='Operator'>|| </span>errno <span class='Operator'>== </span>ERANGE<span class='Parentheses'>) 
</span>            <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_CONFIG_FILE_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"invalid affix flag \"%s\""</span><span class='Delimiter'>, </span><a href="spell.c.html#LN1022"><span class='Ref_to_Parameter'>s</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1027"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="spell.c.html#LN1027"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&GT; </span><a href="../../include/tsearch/dicts/spell.h.html#LN176"><span class='Ref_to_Const'>FLAGNUM_MAXSIZE</span></a><span class='Parentheses'>) 
</span>            <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_CONFIG_FILE_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"affix flag \"%s\" is out of range"</span><span class='Delimiter'>, </span><a href="spell.c.html#LN1022"><span class='Ref_to_Parameter'>s</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
        <a href="spell.c.html#LN1021"><span class='Ref_to_Parameter'>entry</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN170"><span class='Ref_to_Member'>flag</span></a><span class='Operator'>.</span>i <span class='Operator'>= </span><a href="spell.c.html#LN1027"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
        <a href="spell.c.html#LN1021"><span class='Ref_to_Parameter'>entry</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN170"><span class='Ref_to_Member'>flag</span></a><span class='Operator'>.</span>s <span class='Operator'>= </span><a href="spell.c.html#LN159"><span class='Ref_to_Func'>cpstrdup</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1021"><span class='Ref_to_Parameter'>Conf</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1022"><span class='Ref_to_Parameter'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="spell.c.html#LN1021"><span class='Ref_to_Parameter'>entry</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN172"><span class='Ref_to_Member'>flagMode</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN1021"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN197"><span class='Ref_to_Member'>flagMode</span></a><span class='Delimiter'>; 
</span>    <a href="spell.c.html#LN1021"><span class='Ref_to_Parameter'>entry</span></a><span class='Operator'>-&GT;</span><span class='Keyword'>value </span><span class='Operator'>= </span><a href="spell.c.html#LN1022"><span class='Ref_to_Parameter'>val</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end setCompoundAffixFlagValue &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Sets up a correspondence for the affix parameter with the affix flag. 
 * 
 * Conf: current dictionary. 
 * s: affix flag in string. 
 * val: affix parameter. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN1056"></a><span class='Declare_Function'>addCompoundAffixFlagValue</span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN178"><span class='Ref_to_Typedef'>IspellDict</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>Conf</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>s</span><span class='Delimiter'>, </span><a href="../../include/c.h.html#LN267"><span class='Ref_to_Typedef'>uint32</span></a> <span class='Declare_Parameter'>val</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1058"></a>    <a href="../../include/tsearch/dicts/spell.h.html#LN162"><span class='Ref_to_Struct'>CompoundAffixFlag</span></a> <span class='Operator'>*</span><span class='Declare_Local'>newValue</span><span class='Delimiter'>; 
</span><a name="LN1059"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>sbuf</span><span class='Delimiter'>[</span>BUFSIZ<span class='Delimiter'>]; 
</span><a name="LN1060"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>sflag</span><span class='Delimiter'>; 
</span><a name="LN1061"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>clen</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>while</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN1056"><span class='Ref_to_Parameter'>s</span></a> <span class='Operator'>&& </span><a href="ts_locale.c.html#LN41"><span class='Ref_to_Func'>t_isspace</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1056"><span class='Ref_to_Parameter'>s</span></a><span class='Parentheses'>))</span> 
        <a href="spell.c.html#LN1056"><span class='Ref_to_Parameter'>s</span></a> <span class='Operator'>+= </span><a href="../../include/mb/pg_wchar.h.html#LN521"><span class='Ref_to_Proto'>pg_mblen</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1056"><span class='Ref_to_Parameter'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!*</span><a href="spell.c.html#LN1056"><span class='Ref_to_Parameter'>s</span></a><span class='Parentheses'>) 
</span>        <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_CONFIG_FILE_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"syntax error"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Get flag without \n */ 
</span>    <a href="spell.c.html#LN1060"><span class='Ref_To_Local'>sflag</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN1059"><span class='Ref_To_Local'>sbuf</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>while</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN1056"><span class='Ref_to_Parameter'>s</span></a> <span class='Operator'>&& !</span><a href="ts_locale.c.html#LN41"><span class='Ref_to_Func'>t_isspace</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1056"><span class='Ref_to_Parameter'>s</span></a><span class='Parentheses'>) </span><span class='Operator'>&& *</span><a href="spell.c.html#LN1056"><span class='Ref_to_Parameter'>s</span></a> <span class='Operator'>!= </span><span class='String'>'\n'</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="spell.c.html#LN1061"><span class='Ref_To_Local'>clen</span></a> <span class='Operator'>= </span><a href="../../include/mb/pg_wchar.h.html#LN521"><span class='Ref_to_Proto'>pg_mblen</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1056"><span class='Ref_to_Parameter'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../include/tsearch/ts_locale.h.html#LN53"><span class='Ref_to_Macro'>COPYCHAR</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1060"><span class='Ref_To_Local'>sflag</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1056"><span class='Ref_to_Parameter'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="spell.c.html#LN1060"><span class='Ref_To_Local'>sflag</span></a> <span class='Operator'>+= </span><a href="spell.c.html#LN1061"><span class='Ref_To_Local'>clen</span></a><span class='Delimiter'>; 
</span>        <a href="spell.c.html#LN1056"><span class='Ref_to_Parameter'>s</span></a> <span class='Operator'>+= </span><a href="spell.c.html#LN1061"><span class='Ref_To_Local'>clen</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Operator'>*</span><a href="spell.c.html#LN1060"><span class='Ref_To_Local'>sflag</span></a> <span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Resize array or allocate memory for array CompoundAffixFlag */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1056"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN206"><span class='Ref_to_Member'>nCompoundAffixFlag</span></a> <span class='Operator'>&GT;= </span><a href="spell.c.html#LN1056"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN208"><span class='Ref_to_Member'>mCompoundAffixFlag</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1056"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN208"><span class='Ref_to_Member'>mCompoundAffixFlag</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="spell.c.html#LN1056"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN208"><span class='Ref_to_Member'>mCompoundAffixFlag</span></a> <span class='Operator'>*= </span><span class='Number'>2</span><span class='Delimiter'>; 
</span>            <a href="spell.c.html#LN1056"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN204"><span class='Ref_to_Member'>CompoundAffixFlags</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN162"><span class='Ref_to_Struct'>CompoundAffixFlag</span></a> <span class='Operator'>*</span><span class='Parentheses'>) 
</span>                <a href="../../include/common/fe_memutils.h.html#LN36"><span class='Ref_to_Proto'>repalloc</span></a><span class='Parentheses'>((</span><span class='Keyword'>void </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="spell.c.html#LN1056"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN204"><span class='Ref_to_Member'>CompoundAffixFlags</span></a><span class='Delimiter'>, 
</span>                       <a href="spell.c.html#LN1056"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN208"><span class='Ref_to_Member'>mCompoundAffixFlag</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN162"><span class='Ref_to_Struct'>CompoundAffixFlag</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <a href="spell.c.html#LN1056"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN208"><span class='Ref_to_Member'>mCompoundAffixFlag</span></a> <span class='Operator'>= </span><span class='Number'>10</span><span class='Delimiter'>; 
</span>            <a href="spell.c.html#LN1056"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN204"><span class='Ref_to_Member'>CompoundAffixFlags</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN162"><span class='Ref_to_Struct'>CompoundAffixFlag</span></a> <span class='Operator'>*</span><span class='Parentheses'>) 
</span>                <a href="spell.c.html#LN77"><span class='Ref_to_Macro'>tmpalloc</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1056"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN208"><span class='Ref_to_Member'>mCompoundAffixFlag</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN162"><span class='Ref_to_Struct'>CompoundAffixFlag</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="spell.c.html#LN1058"><span class='Ref_To_Local'>newValue</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN1056"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN204"><span class='Ref_to_Member'>CompoundAffixFlags</span></a> <span class='Operator'>+ </span><a href="spell.c.html#LN1056"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN206"><span class='Ref_to_Member'>nCompoundAffixFlag</span></a><span class='Delimiter'>; 
</span> 
    <a href="spell.c.html#LN1020"><span class='Ref_to_Func'>setCompoundAffixFlagValue</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1056"><span class='Ref_to_Parameter'>Conf</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1058"><span class='Ref_To_Local'>newValue</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1059"><span class='Ref_To_Local'>sbuf</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1056"><span class='Ref_to_Parameter'>val</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="spell.c.html#LN1056"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN196"><span class='Ref_to_Member'>usecompound</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <a href="spell.c.html#LN1056"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN206"><span class='Ref_to_Member'>nCompoundAffixFlag</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end addCompoundAffixFlagValue &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Returns a set of affix parameters which correspondence to the set of affix 
 * flags s. 
 */ 
</span><span class='Keyword'>static int 
</span><a name="LN1113"></a><span class='Declare_Function'>getCompoundAffixFlagValue</span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN178"><span class='Ref_to_Typedef'>IspellDict</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>Conf</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>s</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1115"></a>    <a href="../../include/c.h.html#LN267"><span class='Ref_to_Typedef'>uint32</span></a>      <span class='Declare_Local'>flag</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN1116"></a>    <a href="../../include/tsearch/dicts/spell.h.html#LN162"><span class='Ref_to_Struct'>CompoundAffixFlag</span></a> <span class='Operator'>*</span><span class='Declare_Local'>found</span><span class='Delimiter'>, 
</span><a name="LN1117"></a>                <span class='Declare_Local'>key</span><span class='Delimiter'>; 
</span><a name="LN1118"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>sflag</span><span class='Delimiter'>[</span>BUFSIZ<span class='Delimiter'>]; 
</span><a name="LN1119"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>flagcur</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1113"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN206"><span class='Ref_to_Member'>nCompoundAffixFlag</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <a href="spell.c.html#LN1119"><span class='Ref_To_Local'>flagcur</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN1113"><span class='Ref_to_Parameter'>s</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>while</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN1119"><span class='Ref_To_Local'>flagcur</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="spell.c.html#LN346"><span class='Ref_to_Func'>getNextFlagFromString</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1113"><span class='Ref_to_Parameter'>Conf</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="spell.c.html#LN1119"><span class='Ref_To_Local'>flagcur</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1118"><span class='Ref_To_Local'>sflag</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="spell.c.html#LN1020"><span class='Ref_to_Func'>setCompoundAffixFlagValue</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1113"><span class='Ref_to_Parameter'>Conf</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="spell.c.html#LN1117"><span class='Ref_To_Local'>key</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1118"><span class='Ref_To_Local'>sflag</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="spell.c.html#LN1116"><span class='Ref_To_Local'>found</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN162"><span class='Ref_to_Struct'>CompoundAffixFlag</span></a> <span class='Operator'>*</span><span class='Parentheses'>) 
</span>            bsearch<span class='Parentheses'>(</span><span class='Operator'>&</span><a href="spell.c.html#LN1117"><span class='Ref_To_Local'>key</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><span class='Keyword'>void </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="spell.c.html#LN1113"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN204"><span class='Ref_to_Member'>CompoundAffixFlags</span></a><span class='Delimiter'>, 
</span>                    <a href="spell.c.html#LN1113"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN206"><span class='Ref_to_Member'>nCompoundAffixFlag</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN162"><span class='Ref_to_Struct'>CompoundAffixFlag</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                    <a href="spell.c.html#LN207"><span class='Ref_to_Func'>cmpcmdflag</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1116"><span class='Ref_To_Local'>found</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <a href="spell.c.html#LN1115"><span class='Ref_To_Local'>flag</span></a> <span class='Operator'>|= </span><a href="spell.c.html#LN1116"><span class='Ref_To_Local'>found</span></a><span class='Operator'>-&GT;</span><span class='Keyword'>value</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>return</span> <a href="spell.c.html#LN1115"><span class='Ref_To_Local'>flag</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end getCompoundAffixFlagValue &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Returns a flag set using the s parameter. 
 * 
 * If Conf-&GT;useFlagAliases is true then the s parameter is index of the 
 * Conf-&GT;AffixData array and function returns its entry. 
 * Else function returns the s parameter. 
 */ 
</span><span class='Keyword'>static char </span><span class='Operator'>* 
</span><a name="LN1149"></a><span class='Declare_Function'>getAffixFlagSet</span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN178"><span class='Ref_to_Typedef'>IspellDict</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>Conf</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>s</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1149"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN192"><span class='Ref_to_Member'>useFlagAliases</span></a> <span class='Operator'>&& *</span><a href="spell.c.html#LN1149"><span class='Ref_to_Parameter'>s</span></a> <span class='Operator'>!= </span><span class='String'>'\0'</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN1153"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>curaffix</span><span class='Delimiter'>; 
</span><a name="LN1154"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>end</span><span class='Delimiter'>; 
</span> 
        <a href="spell.c.html#LN1153"><span class='Ref_To_Local'>curaffix</span></a> <span class='Operator'>= </span>strtol<span class='Parentheses'>(</span><a href="spell.c.html#LN1149"><span class='Ref_to_Parameter'>s</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="spell.c.html#LN1154"><span class='Ref_To_Local'>end</span></a><span class='Delimiter'>, </span><span class='Number'>10</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1149"><span class='Ref_to_Parameter'>s</span></a> <span class='Operator'>== </span><a href="spell.c.html#LN1154"><span class='Ref_To_Local'>end</span></a> <span class='Operator'>|| </span>errno <span class='Operator'>== </span>ERANGE<span class='Parentheses'>) 
</span>            <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_CONFIG_FILE_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"invalid affix alias \"%s\""</span><span class='Delimiter'>, </span><a href="spell.c.html#LN1149"><span class='Ref_to_Parameter'>s</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1153"><span class='Ref_To_Local'>curaffix</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="spell.c.html#LN1153"><span class='Ref_To_Local'>curaffix</span></a> <span class='Operator'>&LT;= </span><a href="spell.c.html#LN1149"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN191"><span class='Ref_to_Member'>nAffixData</span></a><span class='Parentheses'>) 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * Do not subtract 1 from curaffix because empty string was added 
             * in NIImportOOAffixes 
             */ 
</span>            <span class='Control'>return</span> <a href="spell.c.html#LN1149"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN189"><span class='Ref_to_Member'>AffixData</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN1153"><span class='Ref_To_Local'>curaffix</span></a><span class='Delimiter'>]; 
</span>        <span class='Control'>else</span> 
            <span class='Control'>return</span> <a href="spell.c.html#LN192"><span class='Ref_to_Global_Var'>VoidString</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if Conf-&GT;useFlagAliases&... &raquo; </span> 
    <span class='Control'>else</span> 
        <span class='Control'>return</span> <a href="spell.c.html#LN1149"><span class='Ref_to_Parameter'>s</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end getAffixFlagSet &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Import an affix file that follows MySpell or Hunspell format. 
 * 
 * Conf: current dictionary. 
 * filename: path to the .affix file. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN1183"></a><span class='Declare_Function'>NIImportOOAffixes</span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN178"><span class='Ref_to_Typedef'>IspellDict</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>Conf</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>filename</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1185"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>type</span><span class='Delimiter'>[</span>BUFSIZ<span class='Delimiter'>], 
</span><a name="LN1186"></a>               <span class='Operator'>*</span><span class='Declare_Local'>ptype</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN1187"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>sflag</span><span class='Delimiter'>[</span>BUFSIZ<span class='Delimiter'>]; 
</span><a name="LN1188"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>mask</span><span class='Delimiter'>[</span>BUFSIZ<span class='Delimiter'>], 
</span><a name="LN1189"></a>               <span class='Operator'>*</span><span class='Declare_Local'>pmask</span><span class='Delimiter'>; 
</span><a name="LN1190"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>find</span><span class='Delimiter'>[</span>BUFSIZ<span class='Delimiter'>], 
</span><a name="LN1191"></a>               <span class='Operator'>*</span><span class='Declare_Local'>pfind</span><span class='Delimiter'>; 
</span><a name="LN1192"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>repl</span><span class='Delimiter'>[</span>BUFSIZ<span class='Delimiter'>], 
</span><a name="LN1193"></a>               <span class='Operator'>*</span><span class='Declare_Local'>prepl</span><span class='Delimiter'>; 
</span><a name="LN1194"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>isSuffix</span> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span><a name="LN1195"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>naffix</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>, 
</span><a name="LN1196"></a>                <span class='Declare_Local'>curaffix</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN1197"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>sflaglen</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN1198"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>flagflags</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN1199"></a>    <a href="../../include/tsearch/ts_locale.h.html#LN32"><span class='Ref_to_Typedef'>tsearch_readline_state</span></a> <span class='Declare_Local'>trst</span><span class='Delimiter'>; 
</span><a name="LN1200"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>recoded</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* read file to find any flag */ 
</span>    <a href="spell.c.html#LN1183"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN196"><span class='Ref_to_Member'>usecompound</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="spell.c.html#LN1183"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN192"><span class='Ref_to_Member'>useFlagAliases</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="spell.c.html#LN1183"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN197"><span class='Ref_to_Member'>flagMode</span></a> <span class='Operator'>= </span><a href="../../include/tsearch/dicts/spell.h.html#LN153"><span class='Ref_to_EnumConst'>FM_CHAR</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../include/tsearch/ts_locale.h.html#LN68"><span class='Ref_to_Proto'>tsearch_readline_begin</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="spell.c.html#LN1199"><span class='Ref_To_Local'>trst</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1183"><span class='Ref_to_Parameter'>filename</span></a><span class='Parentheses'>))</span> 
        <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_CONFIG_FILE_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"could not open affix file \"%s\": %m"</span><span class='Delimiter'>, 
</span>                        <a href="spell.c.html#LN1183"><span class='Ref_to_Parameter'>filename</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>while</span> <span class='Parentheses'>((</span><a href="spell.c.html#LN1200"><span class='Ref_To_Local'>recoded</span></a> <span class='Operator'>= </span><a href="../../include/tsearch/ts_locale.h.html#LN70"><span class='Ref_to_Proto'>tsearch_readline</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="spell.c.html#LN1199"><span class='Ref_To_Local'>trst</span></a><span class='Parentheses'>))</span> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN1200"><span class='Ref_To_Local'>recoded</span></a> <span class='Operator'>== </span><span class='String'>'\0'</span> <span class='Operator'>|| </span><a href="ts_locale.c.html#LN41"><span class='Ref_to_Func'>t_isspace</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1200"><span class='Ref_To_Local'>recoded</span></a><span class='Parentheses'>) </span><span class='Operator'>|| </span><a href="../../include/tsearch/ts_locale.h.html#LN51"><span class='Ref_to_Macro'>t_iseq</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1200"><span class='Ref_To_Local'>recoded</span></a><span class='Delimiter'>, </span><span class='String'>'#'</span><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <a href="../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1200"><span class='Ref_To_Local'>recoded</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN188"><span class='Ref_to_Macro'>STRNCMP</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1200"><span class='Ref_To_Local'>recoded</span></a><span class='Delimiter'>, </span><span class='String'>"COMPOUNDFLAG"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <a href="spell.c.html#LN1055"><span class='Ref_to_Func'>addCompoundAffixFlagValue</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1183"><span class='Ref_to_Parameter'>Conf</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1200"><span class='Ref_To_Local'>recoded</span></a> <span class='Operator'>+ </span>strlen<span class='Parentheses'>(</span><span class='String'>"COMPOUNDFLAG"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                      <a href="../../include/tsearch/dicts/spell.h.html#LN45"><span class='Ref_to_Const'>FF_COMPOUNDFLAG</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN188"><span class='Ref_to_Macro'>STRNCMP</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1200"><span class='Ref_To_Local'>recoded</span></a><span class='Delimiter'>, </span><span class='String'>"COMPOUNDBEGIN"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <a href="spell.c.html#LN1055"><span class='Ref_to_Func'>addCompoundAffixFlagValue</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1183"><span class='Ref_to_Parameter'>Conf</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1200"><span class='Ref_To_Local'>recoded</span></a> <span class='Operator'>+ </span>strlen<span class='Parentheses'>(</span><span class='String'>"COMPOUNDBEGIN"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                      <a href="../../include/tsearch/dicts/spell.h.html#LN42"><span class='Ref_to_Const'>FF_COMPOUNDBEGIN</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN188"><span class='Ref_to_Macro'>STRNCMP</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1200"><span class='Ref_To_Local'>recoded</span></a><span class='Delimiter'>, </span><span class='String'>"COMPOUNDLAST"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <a href="spell.c.html#LN1055"><span class='Ref_to_Func'>addCompoundAffixFlagValue</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1183"><span class='Ref_to_Parameter'>Conf</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1200"><span class='Ref_To_Local'>recoded</span></a> <span class='Operator'>+ </span>strlen<span class='Parentheses'>(</span><span class='String'>"COMPOUNDLAST"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                      <a href="../../include/tsearch/dicts/spell.h.html#LN44"><span class='Ref_to_Const'>FF_COMPOUNDLAST</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* COMPOUNDLAST and COMPOUNDEND are synonyms */ 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN188"><span class='Ref_to_Macro'>STRNCMP</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1200"><span class='Ref_To_Local'>recoded</span></a><span class='Delimiter'>, </span><span class='String'>"COMPOUNDEND"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <a href="spell.c.html#LN1055"><span class='Ref_to_Func'>addCompoundAffixFlagValue</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1183"><span class='Ref_to_Parameter'>Conf</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1200"><span class='Ref_To_Local'>recoded</span></a> <span class='Operator'>+ </span>strlen<span class='Parentheses'>(</span><span class='String'>"COMPOUNDEND"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                      <a href="../../include/tsearch/dicts/spell.h.html#LN44"><span class='Ref_to_Const'>FF_COMPOUNDLAST</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN188"><span class='Ref_to_Macro'>STRNCMP</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1200"><span class='Ref_To_Local'>recoded</span></a><span class='Delimiter'>, </span><span class='String'>"COMPOUNDMIDDLE"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <a href="spell.c.html#LN1055"><span class='Ref_to_Func'>addCompoundAffixFlagValue</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1183"><span class='Ref_to_Parameter'>Conf</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1200"><span class='Ref_To_Local'>recoded</span></a> <span class='Operator'>+ </span>strlen<span class='Parentheses'>(</span><span class='String'>"COMPOUNDMIDDLE"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                      <a href="../../include/tsearch/dicts/spell.h.html#LN43"><span class='Ref_to_Const'>FF_COMPOUNDMIDDLE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN188"><span class='Ref_to_Macro'>STRNCMP</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1200"><span class='Ref_To_Local'>recoded</span></a><span class='Delimiter'>, </span><span class='String'>"ONLYINCOMPOUND"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <a href="spell.c.html#LN1055"><span class='Ref_to_Func'>addCompoundAffixFlagValue</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1183"><span class='Ref_to_Parameter'>Conf</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1200"><span class='Ref_To_Local'>recoded</span></a> <span class='Operator'>+ </span>strlen<span class='Parentheses'>(</span><span class='String'>"ONLYINCOMPOUND"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                      <a href="../../include/tsearch/dicts/spell.h.html#LN41"><span class='Ref_to_Const'>FF_COMPOUNDONLY</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN188"><span class='Ref_to_Macro'>STRNCMP</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1200"><span class='Ref_To_Local'>recoded</span></a><span class='Delimiter'>, </span><span class='String'>"COMPOUNDPERMITFLAG"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <a href="spell.c.html#LN1055"><span class='Ref_to_Func'>addCompoundAffixFlagValue</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1183"><span class='Ref_to_Parameter'>Conf</span></a><span class='Delimiter'>, 
</span>                                      <a href="spell.c.html#LN1200"><span class='Ref_To_Local'>recoded</span></a> <span class='Operator'>+ </span>strlen<span class='Parentheses'>(</span><span class='String'>"COMPOUNDPERMITFLAG"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                      <a href="../../include/tsearch/dicts/spell.h.html#LN107"><span class='Ref_to_Const'>FF_COMPOUNDPERMITFLAG</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN188"><span class='Ref_to_Macro'>STRNCMP</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1200"><span class='Ref_To_Local'>recoded</span></a><span class='Delimiter'>, </span><span class='String'>"COMPOUNDFORBIDFLAG"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <a href="spell.c.html#LN1055"><span class='Ref_to_Func'>addCompoundAffixFlagValue</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1183"><span class='Ref_to_Parameter'>Conf</span></a><span class='Delimiter'>, 
</span>                                      <a href="spell.c.html#LN1200"><span class='Ref_To_Local'>recoded</span></a> <span class='Operator'>+ </span>strlen<span class='Parentheses'>(</span><span class='String'>"COMPOUNDFORBIDFLAG"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                      <a href="../../include/tsearch/dicts/spell.h.html#LN108"><span class='Ref_to_Const'>FF_COMPOUNDFORBIDFLAG</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN188"><span class='Ref_to_Macro'>STRNCMP</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1200"><span class='Ref_To_Local'>recoded</span></a><span class='Delimiter'>, </span><span class='String'>"FLAG"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span><a name="LN1250"></a>            <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>s</span> <span class='Operator'>= </span><a href="spell.c.html#LN1200"><span class='Ref_To_Local'>recoded</span></a> <span class='Operator'>+ </span>strlen<span class='Parentheses'>(</span><span class='String'>"FLAG"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>while</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN1250"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>&& </span><a href="ts_locale.c.html#LN41"><span class='Ref_to_Func'>t_isspace</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1250"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>))</span> 
                <a href="spell.c.html#LN1250"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>+= </span><a href="../../include/mb/pg_wchar.h.html#LN521"><span class='Ref_to_Proto'>pg_mblen</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1250"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN1250"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN188"><span class='Ref_to_Macro'>STRNCMP</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1250"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><span class='String'>"long"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                    <a href="spell.c.html#LN1183"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN197"><span class='Ref_to_Member'>flagMode</span></a> <span class='Operator'>= </span><a href="../../include/tsearch/dicts/spell.h.html#LN154"><span class='Ref_to_EnumConst'>FM_LONG</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN188"><span class='Ref_to_Macro'>STRNCMP</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1250"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><span class='String'>"num"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                    <a href="spell.c.html#LN1183"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN197"><span class='Ref_to_Member'>flagMode</span></a> <span class='Operator'>= </span><a href="../../include/tsearch/dicts/spell.h.html#LN155"><span class='Ref_to_EnumConst'>FM_NUM</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN188"><span class='Ref_to_Macro'>STRNCMP</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1250"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><span class='String'>"default"</span><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                    <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                            <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_CONFIG_FILE_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                             <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"Ispell dictionary supports only "</span> 
                                    <span class='String'>"\"default\", \"long\", "</span> 
                                    <span class='String'>"and \"num\" flag values"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if STRNCMP(recoded,"FLAG... &raquo; </span> 
 
        <a href="../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1200"><span class='Ref_To_Local'>recoded</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end while (recoded=tsearch_read... &raquo; </span> 
    <a href="../../include/tsearch/ts_locale.h.html#LN71"><span class='Ref_to_Proto'>tsearch_readline_end</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="spell.c.html#LN1199"><span class='Ref_To_Local'>trst</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1183"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN206"><span class='Ref_to_Member'>nCompoundAffixFlag</span></a> <span class='Operator'>&GT; </span><span class='Number'>1</span><span class='Parentheses'>) 
</span>        <a href="../../include/port.h.html#LN439"><span class='Ref_to_Macro'>qsort</span></a><span class='Parentheses'>((</span><span class='Keyword'>void </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="spell.c.html#LN1183"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN204"><span class='Ref_to_Member'>CompoundAffixFlags</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1183"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN206"><span class='Ref_to_Member'>nCompoundAffixFlag</span></a><span class='Delimiter'>, 
</span>              <span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN162"><span class='Ref_to_Struct'>CompoundAffixFlag</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="spell.c.html#LN207"><span class='Ref_to_Func'>cmpcmdflag</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../include/tsearch/ts_locale.h.html#LN68"><span class='Ref_to_Proto'>tsearch_readline_begin</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="spell.c.html#LN1199"><span class='Ref_To_Local'>trst</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1183"><span class='Ref_to_Parameter'>filename</span></a><span class='Parentheses'>))</span> 
        <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_CONFIG_FILE_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"could not open affix file \"%s\": %m"</span><span class='Delimiter'>, 
</span>                        <a href="spell.c.html#LN1183"><span class='Ref_to_Parameter'>filename</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>while</span> <span class='Parentheses'>((</span><a href="spell.c.html#LN1200"><span class='Ref_To_Local'>recoded</span></a> <span class='Operator'>= </span><a href="../../include/tsearch/ts_locale.h.html#LN70"><span class='Ref_to_Proto'>tsearch_readline</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="spell.c.html#LN1199"><span class='Ref_To_Local'>trst</span></a><span class='Parentheses'>))</span> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span><a name="LN1286"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>fields_read</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN1200"><span class='Ref_To_Local'>recoded</span></a> <span class='Operator'>== </span><span class='String'>'\0'</span> <span class='Operator'>|| </span><a href="ts_locale.c.html#LN41"><span class='Ref_to_Func'>t_isspace</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1200"><span class='Ref_To_Local'>recoded</span></a><span class='Parentheses'>) </span><span class='Operator'>|| </span><a href="../../include/tsearch/ts_locale.h.html#LN51"><span class='Ref_to_Macro'>t_iseq</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1200"><span class='Ref_To_Local'>recoded</span></a><span class='Delimiter'>, </span><span class='String'>'#'</span><span class='Parentheses'>))</span> 
            <span class='Control'>goto</span> <span class='Symbol_Characters'>&darr;</span><a href="spell.c.html#LN1388"><span class='Ref_to_Label'>nextline</span></a><span class='Delimiter'>; 
</span> 
        <a href="spell.c.html#LN1286"><span class='Ref_To_Local'>fields_read</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN846"><span class='Ref_to_Func'>parse_ooaffentry</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1200"><span class='Ref_To_Local'>recoded</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1185"><span class='Ref_To_Local'>type</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1187"><span class='Ref_To_Local'>sflag</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1190"><span class='Ref_To_Local'>find</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1192"><span class='Ref_To_Local'>repl</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1188"><span class='Ref_To_Local'>mask</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1186"><span class='Ref_To_Local'>ptype</span></a><span class='Parentheses'>) 
</span>            <a href="../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1186"><span class='Ref_To_Local'>ptype</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="spell.c.html#LN1186"><span class='Ref_To_Local'>ptype</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN172"><span class='Ref_to_Func'>lowerstr_ctx</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1183"><span class='Ref_to_Parameter'>Conf</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1185"><span class='Ref_To_Local'>type</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* First try to parse AF parameter (alias compression) */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN188"><span class='Ref_to_Macro'>STRNCMP</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1186"><span class='Ref_To_Local'>ptype</span></a><span class='Delimiter'>, </span><span class='String'>"af"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* First line is the number of aliases */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="spell.c.html#LN1183"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN192"><span class='Ref_to_Member'>useFlagAliases</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <a href="spell.c.html#LN1183"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN192"><span class='Ref_to_Member'>useFlagAliases</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>                <a href="spell.c.html#LN1195"><span class='Ref_To_Local'>naffix</span></a> <span class='Operator'>= </span>atoi<span class='Parentheses'>(</span><a href="spell.c.html#LN1187"><span class='Ref_To_Local'>sflag</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1195"><span class='Ref_To_Local'>naffix</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                    <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                            <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_CONFIG_FILE_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                           <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"invalid number of flag vector aliases"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* Also reserve place for empty flag set */ 
</span>                <a href="spell.c.html#LN1195"><span class='Ref_To_Local'>naffix</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span> 
                <a href="spell.c.html#LN1183"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN189"><span class='Ref_to_Member'>AffixData</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>**</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1195"><span class='Ref_To_Local'>naffix</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="spell.c.html#LN1183"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN190"><span class='Ref_to_Member'>lenAffixData</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN1183"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN191"><span class='Ref_to_Member'>nAffixData</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN1195"><span class='Ref_To_Local'>naffix</span></a><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* Add empty flag set into AffixData */ 
</span>                <a href="spell.c.html#LN1183"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN189"><span class='Ref_to_Member'>AffixData</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN1196"><span class='Ref_To_Local'>curaffix</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="spell.c.html#LN192"><span class='Ref_to_Global_Var'>VoidString</span></a><span class='Delimiter'>; 
</span>                <a href="spell.c.html#LN1196"><span class='Ref_To_Local'>curaffix</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Comment_Multi_Line'>/* Other lines is aliases */ 
</span>            <span class='Control'>else</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1196"><span class='Ref_To_Local'>curaffix</span></a> <span class='Operator'>&LT; </span><a href="spell.c.html#LN1195"><span class='Ref_To_Local'>naffix</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <a href="spell.c.html#LN1183"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN189"><span class='Ref_to_Member'>AffixData</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN1196"><span class='Ref_To_Local'>curaffix</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="spell.c.html#LN159"><span class='Ref_to_Func'>cpstrdup</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1183"><span class='Ref_to_Parameter'>Conf</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1187"><span class='Ref_To_Local'>sflag</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="spell.c.html#LN1196"><span class='Ref_To_Local'>curaffix</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>goto</span> <span class='Symbol_Characters'>&darr;</span><a href="spell.c.html#LN1388"><span class='Ref_to_Label'>nextline</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if STRNCMP(ptype,"af")==... &raquo; </span> 
        <span class='Comment_Multi_Line'>/* Else try to parse prefixes and suffixes */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1286"><span class='Ref_To_Local'>fields_read</span></a> <span class='Operator'>&LT; </span><span class='Number'>4</span> <span class='Operator'>|| 
</span>            <span class='Parentheses'>(</span><a href="spell.c.html#LN188"><span class='Ref_to_Macro'>STRNCMP</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1186"><span class='Ref_To_Local'>ptype</span></a><span class='Delimiter'>, </span><span class='String'>"sfx"</span><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="spell.c.html#LN188"><span class='Ref_to_Macro'>STRNCMP</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1186"><span class='Ref_To_Local'>ptype</span></a><span class='Delimiter'>, </span><span class='String'>"pfx"</span><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>))</span> 
            <span class='Control'>goto</span> <span class='Symbol_Characters'>&darr;</span><a href="spell.c.html#LN1388"><span class='Ref_to_Label'>nextline</span></a><span class='Delimiter'>; 
</span> 
        <a href="spell.c.html#LN1197"><span class='Ref_To_Local'>sflaglen</span></a> <span class='Operator'>= </span>strlen<span class='Parentheses'>(</span><a href="spell.c.html#LN1187"><span class='Ref_To_Local'>sflag</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1197"><span class='Ref_To_Local'>sflaglen</span></a> <span class='Operator'>== </span><span class='Number'>0</span> 
            <span class='Operator'>|| </span><span class='Parentheses'>(</span><a href="spell.c.html#LN1197"><span class='Ref_To_Local'>sflaglen</span></a> <span class='Operator'>&GT; </span><span class='Number'>1</span> <span class='Operator'>&& </span><a href="spell.c.html#LN1183"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN197"><span class='Ref_to_Member'>flagMode</span></a> <span class='Operator'>== </span><a href="../../include/tsearch/dicts/spell.h.html#LN153"><span class='Ref_to_EnumConst'>FM_CHAR</span></a><span class='Parentheses'>) 
</span>            <span class='Operator'>|| </span><span class='Parentheses'>(</span><a href="spell.c.html#LN1197"><span class='Ref_To_Local'>sflaglen</span></a> <span class='Operator'>&GT; </span><span class='Number'>2</span> <span class='Operator'>&& </span><a href="spell.c.html#LN1183"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN197"><span class='Ref_to_Member'>flagMode</span></a> <span class='Operator'>== </span><a href="../../include/tsearch/dicts/spell.h.html#LN154"><span class='Ref_to_EnumConst'>FM_LONG</span></a><span class='Parentheses'>))</span> 
            <span class='Control'>goto</span> <span class='Symbol_Characters'>&darr;</span><a href="spell.c.html#LN1388"><span class='Ref_to_Label'>nextline</span></a><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/*-------- 
         * Affix header. For example: 
         * SFX \ N 1 
         *-------- 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1286"><span class='Ref_To_Local'>fields_read</span></a> <span class='Operator'>== </span><span class='Number'>4</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="spell.c.html#LN1194"><span class='Ref_To_Local'>isSuffix</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="spell.c.html#LN188"><span class='Ref_to_Macro'>STRNCMP</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1186"><span class='Ref_To_Local'>ptype</span></a><span class='Delimiter'>, </span><span class='String'>"sfx"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/tsearch/ts_locale.h.html#LN51"><span class='Ref_to_Macro'>t_iseq</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1190"><span class='Ref_To_Local'>find</span></a><span class='Delimiter'>, </span><span class='String'>'y'</span><span class='Parentheses'>) </span><span class='Operator'>|| </span><a href="../../include/tsearch/ts_locale.h.html#LN51"><span class='Ref_to_Macro'>t_iseq</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1190"><span class='Ref_To_Local'>find</span></a><span class='Delimiter'>, </span><span class='String'>'Y'</span><span class='Parentheses'>))</span> 
                <a href="spell.c.html#LN1198"><span class='Ref_To_Local'>flagflags</span></a> <span class='Operator'>= </span><a href="../../include/tsearch/dicts/spell.h.html#LN109"><span class='Ref_to_Const'>FF_CROSSPRODUCT</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
                <a href="spell.c.html#LN1198"><span class='Ref_To_Local'>flagflags</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Comment_Multi_Line'>/*-------- 
         * Affix fields. For example: 
         * SFX \   0    Y/L [^Y] 
         *-------- 
         */ 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span><a name="LN1362"></a>            <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>ptr</span><span class='Delimiter'>; 
</span><a name="LN1363"></a>            <span class='Keyword'>int</span>         <span class='Declare_Local'>aflg</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* Get flags after '/' (flags are case sensitive) */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="spell.c.html#LN1362"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>= </span>strchr<span class='Parentheses'>(</span><a href="spell.c.html#LN1192"><span class='Ref_To_Local'>repl</span></a><span class='Delimiter'>, </span><span class='String'>'/'</span><span class='Parentheses'>))</span> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
                <a href="spell.c.html#LN1363"><span class='Ref_To_Local'>aflg</span></a> <span class='Operator'>|= </span><a href="spell.c.html#LN1112"><span class='Ref_to_Func'>getCompoundAffixFlagValue</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1183"><span class='Ref_to_Parameter'>Conf</span></a><span class='Delimiter'>, 
</span>                                                  <a href="spell.c.html#LN1148"><span class='Ref_to_Func'>getAffixFlagSet</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1183"><span class='Ref_to_Parameter'>Conf</span></a><span class='Delimiter'>, 
</span>                                                                  <a href="spell.c.html#LN1362"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <span class='Comment_Multi_Line'>/* Get lowercased version of string before '/' */ 
</span>            <a href="spell.c.html#LN1193"><span class='Ref_To_Local'>prepl</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN172"><span class='Ref_to_Func'>lowerstr_ctx</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1183"><span class='Ref_to_Parameter'>Conf</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1192"><span class='Ref_To_Local'>repl</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="spell.c.html#LN1362"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>= </span>strchr<span class='Parentheses'>(</span><a href="spell.c.html#LN1193"><span class='Ref_To_Local'>prepl</span></a><span class='Delimiter'>, </span><span class='String'>'/'</span><span class='Parentheses'>))</span> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
                <span class='Operator'>*</span><a href="spell.c.html#LN1362"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span>            <a href="spell.c.html#LN1191"><span class='Ref_To_Local'>pfind</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN172"><span class='Ref_to_Func'>lowerstr_ctx</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1183"><span class='Ref_to_Parameter'>Conf</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1190"><span class='Ref_To_Local'>find</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="spell.c.html#LN1189"><span class='Ref_To_Local'>pmask</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN172"><span class='Ref_to_Func'>lowerstr_ctx</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1183"><span class='Ref_to_Parameter'>Conf</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1188"><span class='Ref_To_Local'>mask</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/tsearch/ts_locale.h.html#LN51"><span class='Ref_to_Macro'>t_iseq</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1190"><span class='Ref_To_Local'>find</span></a><span class='Delimiter'>, </span><span class='String'>'0'</span><span class='Parentheses'>))</span> 
                <span class='Operator'>*</span><a href="spell.c.html#LN1191"><span class='Ref_To_Local'>pfind</span></a> <span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/tsearch/ts_locale.h.html#LN51"><span class='Ref_to_Macro'>t_iseq</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1192"><span class='Ref_To_Local'>repl</span></a><span class='Delimiter'>, </span><span class='String'>'0'</span><span class='Parentheses'>))</span> 
                <span class='Operator'>*</span><a href="spell.c.html#LN1193"><span class='Ref_To_Local'>prepl</span></a> <span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span> 
            <a href="spell.c.html#LN672"><span class='Ref_to_Func'>NIAddAffix</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1183"><span class='Ref_to_Parameter'>Conf</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1187"><span class='Ref_To_Local'>sflag</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1198"><span class='Ref_To_Local'>flagflags</span></a> <span class='Operator'>| </span><a href="spell.c.html#LN1363"><span class='Ref_To_Local'>aflg</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1189"><span class='Ref_To_Local'>pmask</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1191"><span class='Ref_To_Local'>pfind</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1193"><span class='Ref_To_Local'>prepl</span></a><span class='Delimiter'>, 
</span>                       <a href="spell.c.html#LN1194"><span class='Ref_To_Local'>isSuffix</span></a> <span class='Operator'>? </span><a href="../../include/tsearch/dicts/spell.h.html#LN115"><span class='Ref_to_Const'>FF_SUFFIX</span></a> <span class='Operator'>: </span><a href="../../include/tsearch/dicts/spell.h.html#LN116"><span class='Ref_to_Const'>FF_PREFIX</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1193"><span class='Ref_To_Local'>prepl</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1191"><span class='Ref_To_Local'>pfind</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1189"><span class='Ref_To_Local'>pmask</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
 
<a name="LN1388"></a><span class='Label'>nextline</span><span class='Operator'>: 
</span>        <a href="../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1200"><span class='Ref_To_Local'>recoded</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end while (recoded=tsearch_read... &raquo; </span> 
 
    <a href="../../include/tsearch/ts_locale.h.html#LN71"><span class='Ref_to_Proto'>tsearch_readline_end</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="spell.c.html#LN1199"><span class='Ref_To_Local'>trst</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1186"><span class='Ref_To_Local'>ptype</span></a><span class='Parentheses'>) 
</span>        <a href="../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1186"><span class='Ref_To_Local'>ptype</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end NIImportOOAffixes &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * import affixes 
 * 
 * Note caller must already have applied get_tsearch_config_filename 
 * 
 * This function is responsible for parsing ispell ("old format") affix files. 
 * If we realize that the file contains new-format commands, we pass off the 
 * work to NIImportOOAffixes(), which will re-read the whole file. 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN1407"></a><span class='Declare_Function'>NIImportAffixes</span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN178"><span class='Ref_to_Typedef'>IspellDict</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>Conf</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>filename</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1409"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>pstr</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN1410"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>flag</span><span class='Delimiter'>[</span>BUFSIZ<span class='Delimiter'>]; 
</span><a name="LN1411"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>mask</span><span class='Delimiter'>[</span>BUFSIZ<span class='Delimiter'>]; 
</span><a name="LN1412"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>find</span><span class='Delimiter'>[</span>BUFSIZ<span class='Delimiter'>]; 
</span><a name="LN1413"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>repl</span><span class='Delimiter'>[</span>BUFSIZ<span class='Delimiter'>]; 
</span><a name="LN1414"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>s</span><span class='Delimiter'>; 
</span><a name="LN1415"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>suffixes</span> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span><a name="LN1416"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>prefixes</span> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span><a name="LN1417"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>flagflags</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN1418"></a>    <a href="../../include/tsearch/ts_locale.h.html#LN32"><span class='Ref_to_Typedef'>tsearch_readline_state</span></a> <span class='Declare_Local'>trst</span><span class='Delimiter'>; 
</span><a name="LN1419"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>oldformat</span> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span><a name="LN1420"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>recoded</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../include/tsearch/ts_locale.h.html#LN68"><span class='Ref_to_Proto'>tsearch_readline_begin</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="spell.c.html#LN1418"><span class='Ref_To_Local'>trst</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1407"><span class='Ref_to_Parameter'>filename</span></a><span class='Parentheses'>))</span> 
        <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_CONFIG_FILE_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"could not open affix file \"%s\": %m"</span><span class='Delimiter'>, 
</span>                        <a href="spell.c.html#LN1407"><span class='Ref_to_Parameter'>filename</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <a href="spell.c.html#LN1407"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN196"><span class='Ref_to_Member'>usecompound</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="spell.c.html#LN1407"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN192"><span class='Ref_to_Member'>useFlagAliases</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="spell.c.html#LN1407"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN197"><span class='Ref_to_Member'>flagMode</span></a> <span class='Operator'>= </span><a href="../../include/tsearch/dicts/spell.h.html#LN153"><span class='Ref_to_EnumConst'>FM_CHAR</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>while</span> <span class='Parentheses'>((</span><a href="spell.c.html#LN1420"><span class='Ref_To_Local'>recoded</span></a> <span class='Operator'>= </span><a href="../../include/tsearch/ts_locale.h.html#LN70"><span class='Ref_to_Proto'>tsearch_readline</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="spell.c.html#LN1418"><span class='Ref_To_Local'>trst</span></a><span class='Parentheses'>))</span> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="spell.c.html#LN1409"><span class='Ref_To_Local'>pstr</span></a> <span class='Operator'>= </span><a href="../../include/tsearch/ts_locale.h.html#LN65"><span class='Ref_to_Proto'>lowerstr</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1420"><span class='Ref_To_Local'>recoded</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Skip comments and empty lines */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN1409"><span class='Ref_To_Local'>pstr</span></a> <span class='Operator'>== </span><span class='String'>'#'</span> <span class='Operator'>|| *</span><a href="spell.c.html#LN1409"><span class='Ref_To_Local'>pstr</span></a> <span class='Operator'>== </span><span class='String'>'\n'</span><span class='Parentheses'>) 
</span>            <span class='Control'>goto</span> <span class='Symbol_Characters'>&darr;</span><a href="spell.c.html#LN1530"><span class='Ref_to_Label'>nextline</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN188"><span class='Ref_to_Macro'>STRNCMP</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1409"><span class='Ref_To_Local'>pstr</span></a><span class='Delimiter'>, </span><span class='String'>"compoundwords"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* Find case-insensitive L flag in non-lowercased string */ 
</span>            <a href="spell.c.html#LN1414"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN239"><span class='Ref_to_Func'>findchar2</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1420"><span class='Ref_To_Local'>recoded</span></a><span class='Delimiter'>, </span><span class='String'>'l'</span><span class='Delimiter'>, </span><span class='String'>'L'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1414"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Control'>while</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN1414"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>&& !</span><a href="ts_locale.c.html#LN41"><span class='Ref_to_Func'>t_isspace</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1414"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>))</span> 
                    <a href="spell.c.html#LN1414"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>+= </span><a href="../../include/mb/pg_wchar.h.html#LN521"><span class='Ref_to_Proto'>pg_mblen</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1414"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>while</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN1414"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>&& </span><a href="ts_locale.c.html#LN41"><span class='Ref_to_Func'>t_isspace</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1414"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>))</span> 
                    <a href="spell.c.html#LN1414"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>+= </span><a href="../../include/mb/pg_wchar.h.html#LN521"><span class='Ref_to_Proto'>pg_mblen</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1414"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN1414"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>&& </span><a href="../../include/mb/pg_wchar.h.html#LN521"><span class='Ref_to_Proto'>pg_mblen</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1414"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>1</span><span class='Parentheses'>)</span> 
                <span class='Delimiter'>{ 
</span>                    <a href="spell.c.html#LN1055"><span class='Ref_to_Func'>addCompoundAffixFlagValue</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1407"><span class='Ref_to_Parameter'>Conf</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1414"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="../../include/tsearch/dicts/spell.h.html#LN45"><span class='Ref_to_Const'>FF_COMPOUNDFLAG</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="spell.c.html#LN1407"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN196"><span class='Ref_to_Member'>usecompound</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <a href="spell.c.html#LN1419"><span class='Ref_To_Local'>oldformat</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>                <span class='Control'>goto</span> <span class='Symbol_Characters'>&darr;</span><a href="spell.c.html#LN1530"><span class='Ref_to_Label'>nextline</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if STRNCMP(pstr,"compoun... &raquo; </span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN188"><span class='Ref_to_Macro'>STRNCMP</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1409"><span class='Ref_To_Local'>pstr</span></a><span class='Delimiter'>, </span><span class='String'>"suffixes"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <a href="spell.c.html#LN1415"><span class='Ref_To_Local'>suffixes</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>            <a href="spell.c.html#LN1416"><span class='Ref_To_Local'>prefixes</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>            <a href="spell.c.html#LN1419"><span class='Ref_To_Local'>oldformat</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>            <span class='Control'>goto</span> <span class='Symbol_Characters'>&darr;</span><a href="spell.c.html#LN1530"><span class='Ref_to_Label'>nextline</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN188"><span class='Ref_to_Macro'>STRNCMP</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1409"><span class='Ref_To_Local'>pstr</span></a><span class='Delimiter'>, </span><span class='String'>"prefixes"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <a href="spell.c.html#LN1415"><span class='Ref_To_Local'>suffixes</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>            <a href="spell.c.html#LN1416"><span class='Ref_To_Local'>prefixes</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>            <a href="spell.c.html#LN1419"><span class='Ref_To_Local'>oldformat</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>            <span class='Control'>goto</span> <span class='Symbol_Characters'>&darr;</span><a href="spell.c.html#LN1530"><span class='Ref_to_Label'>nextline</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN188"><span class='Ref_to_Macro'>STRNCMP</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1409"><span class='Ref_To_Local'>pstr</span></a><span class='Delimiter'>, </span><span class='String'>"flag"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <a href="spell.c.html#LN1414"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN1420"><span class='Ref_To_Local'>recoded</span></a> <span class='Operator'>+ </span><span class='Number'>4</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* we need non-lowercased string */ 
</span>            <a href="spell.c.html#LN1417"><span class='Ref_To_Local'>flagflags</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>while</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN1414"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>&& </span><a href="ts_locale.c.html#LN41"><span class='Ref_to_Func'>t_isspace</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1414"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>))</span> 
                <a href="spell.c.html#LN1414"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>+= </span><a href="../../include/mb/pg_wchar.h.html#LN521"><span class='Ref_to_Proto'>pg_mblen</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1414"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN1414"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>== </span><span class='String'>'*'</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <a href="spell.c.html#LN1417"><span class='Ref_To_Local'>flagflags</span></a> <span class='Operator'>|= </span><a href="../../include/tsearch/dicts/spell.h.html#LN109"><span class='Ref_to_Const'>FF_CROSSPRODUCT</span></a><span class='Delimiter'>; 
</span>                <a href="spell.c.html#LN1414"><span class='Ref_To_Local'>s</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN1414"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>== </span><span class='String'>'~'</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <a href="spell.c.html#LN1417"><span class='Ref_To_Local'>flagflags</span></a> <span class='Operator'>|= </span><a href="../../include/tsearch/dicts/spell.h.html#LN41"><span class='Ref_to_Const'>FF_COMPOUNDONLY</span></a><span class='Delimiter'>; 
</span>                <a href="spell.c.html#LN1414"><span class='Ref_To_Local'>s</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN1414"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>== </span><span class='String'>'\\'</span><span class='Parentheses'>) 
</span>                <a href="spell.c.html#LN1414"><span class='Ref_To_Local'>s</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * An old-format flag is a single ASCII character; we expect it to 
             * be followed by EOL, whitespace, or ':'.  Otherwise this is a 
             * new-format flag command. 
             */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN1414"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>&& </span><a href="../../include/mb/pg_wchar.h.html#LN521"><span class='Ref_to_Proto'>pg_mblen</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1414"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>1</span><span class='Parentheses'>)</span> 
            <span class='Delimiter'>{ 
</span>                <a href="../../include/tsearch/ts_locale.h.html#LN53"><span class='Ref_to_Macro'>COPYCHAR</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1410"><span class='Ref_To_Local'>flag</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1414"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="spell.c.html#LN1410"><span class='Ref_To_Local'>flag</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span> 
                <a href="spell.c.html#LN1414"><span class='Ref_To_Local'>s</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN1414"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>== </span><span class='String'>'\0'</span> <span class='Operator'>|| *</span><a href="spell.c.html#LN1414"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>== </span><span class='String'>'#'</span> <span class='Operator'>|| *</span><a href="spell.c.html#LN1414"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>== </span><span class='String'>'\n'</span> <span class='Operator'>|| *</span><a href="spell.c.html#LN1414"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>== </span><span class='String'>':'</span> <span class='Operator'>|| 
</span>                    <a href="ts_locale.c.html#LN41"><span class='Ref_to_Func'>t_isspace</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1414"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>))</span> 
                <span class='Delimiter'>{ 
</span>                    <a href="spell.c.html#LN1419"><span class='Ref_To_Local'>oldformat</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>                    <span class='Control'>goto</span> <span class='Symbol_Characters'>&darr;</span><a href="spell.c.html#LN1530"><span class='Ref_to_Label'>nextline</span></a><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>goto</span> <span class='Symbol_Characters'>&darr;</span><a href="spell.c.html#LN1537"><span class='Ref_to_Label'>isnewformat</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if STRNCMP(pstr,"flag")=... &raquo; </span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN188"><span class='Ref_to_Macro'>STRNCMP</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1420"><span class='Ref_To_Local'>recoded</span></a><span class='Delimiter'>, </span><span class='String'>"COMPOUNDFLAG"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span> <span class='Operator'>|| 
</span>            <a href="spell.c.html#LN188"><span class='Ref_to_Macro'>STRNCMP</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1420"><span class='Ref_To_Local'>recoded</span></a><span class='Delimiter'>, </span><span class='String'>"COMPOUNDMIN"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span> <span class='Operator'>|| 
</span>            <a href="spell.c.html#LN188"><span class='Ref_to_Macro'>STRNCMP</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1420"><span class='Ref_To_Local'>recoded</span></a><span class='Delimiter'>, </span><span class='String'>"PFX"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span> <span class='Operator'>|| 
</span>            <a href="spell.c.html#LN188"><span class='Ref_to_Macro'>STRNCMP</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1420"><span class='Ref_To_Local'>recoded</span></a><span class='Delimiter'>, </span><span class='String'>"SFX"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <span class='Control'>goto</span> <span class='Symbol_Characters'>&darr;</span><a href="spell.c.html#LN1537"><span class='Ref_to_Label'>isnewformat</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>((</span><span class='Operator'>!</span><a href="spell.c.html#LN1415"><span class='Ref_To_Local'>suffixes</span></a><span class='Parentheses'>) </span><span class='Operator'>&& </span><span class='Parentheses'>(</span><span class='Operator'>!</span><a href="spell.c.html#LN1416"><span class='Ref_To_Local'>prefixes</span></a><span class='Parentheses'>))</span> 
            <span class='Control'>goto</span> <span class='Symbol_Characters'>&darr;</span><a href="spell.c.html#LN1530"><span class='Ref_to_Label'>nextline</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="spell.c.html#LN902"><span class='Ref_to_Func'>parse_affentry</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1409"><span class='Ref_To_Local'>pstr</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1411"><span class='Ref_To_Local'>mask</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1412"><span class='Ref_To_Local'>find</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1413"><span class='Ref_To_Local'>repl</span></a><span class='Parentheses'>))</span> 
            <span class='Control'>goto</span> <span class='Symbol_Characters'>&darr;</span><a href="spell.c.html#LN1530"><span class='Ref_to_Label'>nextline</span></a><span class='Delimiter'>; 
</span> 
        <a href="spell.c.html#LN672"><span class='Ref_to_Func'>NIAddAffix</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1407"><span class='Ref_to_Parameter'>Conf</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1410"><span class='Ref_To_Local'>flag</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1417"><span class='Ref_To_Local'>flagflags</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1411"><span class='Ref_To_Local'>mask</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1412"><span class='Ref_To_Local'>find</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1413"><span class='Ref_To_Local'>repl</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1415"><span class='Ref_To_Local'>suffixes</span></a> <span class='Operator'>? </span><a href="../../include/tsearch/dicts/spell.h.html#LN115"><span class='Ref_to_Const'>FF_SUFFIX</span></a> <span class='Operator'>: </span><a href="../../include/tsearch/dicts/spell.h.html#LN116"><span class='Ref_to_Const'>FF_PREFIX</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<a name="LN1530"></a><span class='Label'>nextline</span><span class='Operator'>: 
</span>        <a href="../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1420"><span class='Ref_To_Local'>recoded</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1409"><span class='Ref_To_Local'>pstr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end while (recoded=tsearch_read... &raquo; </span> 
    <a href="../../include/tsearch/ts_locale.h.html#LN71"><span class='Ref_to_Proto'>tsearch_readline_end</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="spell.c.html#LN1418"><span class='Ref_To_Local'>trst</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
<a name="LN1537"></a><span class='Label'>isnewformat</span><span class='Operator'>: 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1419"><span class='Ref_To_Local'>oldformat</span></a><span class='Parentheses'>) 
</span>        <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_CONFIG_FILE_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>        <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"affix file contains both old-style and new-style commands"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <a href="../../include/tsearch/ts_locale.h.html#LN71"><span class='Ref_to_Proto'>tsearch_readline_end</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="spell.c.html#LN1418"><span class='Ref_To_Local'>trst</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="spell.c.html#LN1182"><span class='Ref_to_Func'>NIImportOOAffixes</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1407"><span class='Ref_to_Parameter'>Conf</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1407"><span class='Ref_to_Parameter'>filename</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end NIImportAffixes &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Merges two affix flag sets and stores a new affix flag set into 
 * Conf-&GT;AffixData. 
 * 
 * Returns index of a new affix flag set. 
 */ 
</span><span class='Keyword'>static int 
</span><a name="LN1554"></a><span class='Declare_Function'>MergeAffix</span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN178"><span class='Ref_to_Typedef'>IspellDict</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>Conf</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>a1</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>a2</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1556"></a>    <span class='Keyword'>char</span>      <span class='Operator'>**</span><span class='Declare_Local'>ptr</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Do not merge affix flags if one of affix flags is empty */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN1554"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN189"><span class='Ref_to_Member'>AffixData</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN1554"><span class='Ref_to_Parameter'>a1</span></a><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='String'>'\0'</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <a href="spell.c.html#LN1554"><span class='Ref_to_Parameter'>a2</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN1554"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN189"><span class='Ref_to_Member'>AffixData</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN1554"><span class='Ref_to_Parameter'>a2</span></a><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='String'>'\0'</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <a href="spell.c.html#LN1554"><span class='Ref_to_Parameter'>a1</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1554"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN191"><span class='Ref_to_Member'>nAffixData</span></a> <span class='Operator'>+ </span><span class='Number'>1</span> <span class='Operator'>&GT;= </span><a href="spell.c.html#LN1554"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN190"><span class='Ref_to_Member'>lenAffixData</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="spell.c.html#LN1554"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN190"><span class='Ref_to_Member'>lenAffixData</span></a> <span class='Operator'>*= </span><span class='Number'>2</span><span class='Delimiter'>; 
</span>        <a href="spell.c.html#LN1554"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN189"><span class='Ref_to_Member'>AffixData</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>**</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN36"><span class='Ref_to_Proto'>repalloc</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1554"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN189"><span class='Ref_to_Member'>AffixData</span></a><span class='Delimiter'>, 
</span>                                        <span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="spell.c.html#LN1554"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN190"><span class='Ref_to_Member'>lenAffixData</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="spell.c.html#LN1556"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN1554"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN189"><span class='Ref_to_Member'>AffixData</span></a> <span class='Operator'>+ </span><a href="spell.c.html#LN1554"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN191"><span class='Ref_to_Member'>nAffixData</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1554"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN197"><span class='Ref_to_Member'>flagMode</span></a> <span class='Operator'>== </span><a href="../../include/tsearch/dicts/spell.h.html#LN155"><span class='Ref_to_EnumConst'>FM_NUM</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Operator'>*</span><a href="spell.c.html#LN1556"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN156"><span class='Ref_to_Macro'>cpalloc</span></a><span class='Parentheses'>(</span>strlen<span class='Parentheses'>(</span><a href="spell.c.html#LN1554"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN189"><span class='Ref_to_Member'>AffixData</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN1554"><span class='Ref_to_Parameter'>a1</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) </span><span class='Operator'>+ 
</span>                       strlen<span class='Parentheses'>(</span><a href="spell.c.html#LN1554"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN189"><span class='Ref_to_Member'>AffixData</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN1554"><span class='Ref_to_Parameter'>a2</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) </span><span class='Operator'>+ 
</span>                       <span class='Number'>1</span> <span class='Comment_Multi_Line'>/* comma */ </span><span class='Operator'>+ </span><span class='Number'>1</span> <span class='Comment_Multi_Line'>/* \0 */ </span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN1556"><span class='Ref_To_Local'>ptr</span></a><span class='Delimiter'>, </span><span class='String'>"%s,%s"</span><span class='Delimiter'>, </span><a href="spell.c.html#LN1554"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN189"><span class='Ref_to_Member'>AffixData</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN1554"><span class='Ref_to_Parameter'>a1</span></a><span class='Delimiter'>], </span><a href="spell.c.html#LN1554"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN189"><span class='Ref_to_Member'>AffixData</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN1554"><span class='Ref_to_Parameter'>a2</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Operator'>*</span><a href="spell.c.html#LN1556"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN156"><span class='Ref_to_Macro'>cpalloc</span></a><span class='Parentheses'>(</span>strlen<span class='Parentheses'>(</span><a href="spell.c.html#LN1554"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN189"><span class='Ref_to_Member'>AffixData</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN1554"><span class='Ref_to_Parameter'>a1</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) </span><span class='Operator'>+ 
</span>                       strlen<span class='Parentheses'>(</span><a href="spell.c.html#LN1554"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN189"><span class='Ref_to_Member'>AffixData</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN1554"><span class='Ref_to_Parameter'>a2</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) </span><span class='Operator'>+ 
</span>                       <span class='Number'>1</span> <span class='Comment_Multi_Line'>/* \0 */ </span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN1556"><span class='Ref_To_Local'>ptr</span></a><span class='Delimiter'>, </span><span class='String'>"%s%s"</span><span class='Delimiter'>, </span><a href="spell.c.html#LN1554"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN189"><span class='Ref_to_Member'>AffixData</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN1554"><span class='Ref_to_Parameter'>a1</span></a><span class='Delimiter'>], </span><a href="spell.c.html#LN1554"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN189"><span class='Ref_to_Member'>AffixData</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN1554"><span class='Ref_to_Parameter'>a2</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="spell.c.html#LN1556"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="spell.c.html#LN1556"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="spell.c.html#LN1554"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN191"><span class='Ref_to_Member'>nAffixData</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="spell.c.html#LN1554"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN191"><span class='Ref_to_Member'>nAffixData</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end MergeAffix &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Returns a set of affix parameters which correspondence to the set of affix 
 * flags with the given index. 
 */ 
</span><span class='Keyword'>static </span><a href="../../include/c.h.html#LN267"><span class='Ref_to_Typedef'>uint32</span></a> 
<a name="LN1598"></a><span class='Declare_Function'>makeCompoundFlags</span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN178"><span class='Ref_to_Typedef'>IspellDict</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>Conf</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>affix</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1600"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>str</span> <span class='Operator'>= </span><a href="spell.c.html#LN1598"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN189"><span class='Ref_to_Member'>AffixData</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN1598"><span class='Ref_to_Parameter'>affix</span></a><span class='Delimiter'>]; 
</span> 
    <span class='Control'>return</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1112"><span class='Ref_to_Func'>getCompoundAffixFlagValue</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1598"><span class='Ref_to_Parameter'>Conf</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1600"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>) </span><span class='Operator'>& </span><a href="../../include/tsearch/dicts/spell.h.html#LN47"><span class='Ref_to_Const'>FF_COMPOUNDFLAGMASK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Makes a prefix tree for the given level. 
 * 
 * Conf: current dictionary. 
 * low: lower index of the Conf-&GT;Spell array. 
 * high: upper index of the Conf-&GT;Spell array. 
 * level: current prefix tree level. 
 */ 
</span><span class='Keyword'>static </span><a href="../../include/tsearch/dicts/spell.h.html#LN49"><span class='Ref_to_Struct'>SPNode</span></a> <span class='Operator'>* 
</span><a name="LN1614"></a><span class='Declare_Function'>mkSPNode</span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN178"><span class='Ref_to_Typedef'>IspellDict</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>Conf</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>low</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>high</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>level</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1616"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN1617"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>nchar</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN1618"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>lastchar</span> <span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span><a name="LN1619"></a>    <a href="../../include/tsearch/dicts/spell.h.html#LN49"><span class='Ref_to_Struct'>SPNode</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>rs</span><span class='Delimiter'>; 
</span><a name="LN1620"></a>    <a href="../../include/tsearch/dicts/spell.h.html#LN26"><span class='Ref_to_Typedef'>SPNodeData</span></a> <span class='Operator'>*</span><span class='Declare_Local'>data</span><span class='Delimiter'>; 
</span><a name="LN1621"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>lownew</span> <span class='Operator'>= </span><a href="spell.c.html#LN1614"><span class='Ref_to_Parameter'>low</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1616"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN1614"><span class='Ref_to_Parameter'>low</span></a><span class='Delimiter'>; </span><a href="spell.c.html#LN1616"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="spell.c.html#LN1614"><span class='Ref_to_Parameter'>high</span></a><span class='Delimiter'>; </span><a href="spell.c.html#LN1616"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1614"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN217"><span class='Ref_to_Member'>Spell</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN1616"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN77"><span class='Ref_to_Member'>p</span></a><span class='Operator'>.</span>d<span class='Operator'>.</span>len <span class='Operator'>&GT; </span><a href="spell.c.html#LN1614"><span class='Ref_to_Parameter'>level</span></a> <span class='Operator'>&& </span><a href="spell.c.html#LN1618"><span class='Ref_To_Local'>lastchar</span></a> <span class='Operator'>!= </span><a href="spell.c.html#LN1614"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN217"><span class='Ref_to_Member'>Spell</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN1616"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN78"><span class='Ref_to_Member'>word</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN1614"><span class='Ref_to_Parameter'>level</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="spell.c.html#LN1617"><span class='Ref_To_Local'>nchar</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>            <a href="spell.c.html#LN1618"><span class='Ref_To_Local'>lastchar</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN1614"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN217"><span class='Ref_to_Member'>Spell</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN1616"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN78"><span class='Ref_to_Member'>word</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN1614"><span class='Ref_to_Parameter'>level</span></a><span class='Delimiter'>]; 
</span>        <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="spell.c.html#LN1617"><span class='Ref_To_Local'>nchar</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <a href="spell.c.html#LN1619"><span class='Ref_To_Local'>rs</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN49"><span class='Ref_to_Struct'>SPNode</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="spell.c.html#LN157"><span class='Ref_to_Macro'>cpalloc0</span></a><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN55"><span class='Ref_to_Const'>SPNHDRSZ</span></a> <span class='Operator'>+ </span><a href="spell.c.html#LN1617"><span class='Ref_To_Local'>nchar</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN26"><span class='Ref_to_Typedef'>SPNodeData</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="spell.c.html#LN1619"><span class='Ref_To_Local'>rs</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN51"><span class='Ref_to_Member'>length</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN1617"><span class='Ref_To_Local'>nchar</span></a><span class='Delimiter'>; 
</span>    <a href="spell.c.html#LN1620"><span class='Ref_To_Local'>data</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN1619"><span class='Ref_To_Local'>rs</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN52"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>; 
</span> 
    <a href="spell.c.html#LN1618"><span class='Ref_To_Local'>lastchar</span></a> <span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1616"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN1614"><span class='Ref_to_Parameter'>low</span></a><span class='Delimiter'>; </span><a href="spell.c.html#LN1616"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="spell.c.html#LN1614"><span class='Ref_to_Parameter'>high</span></a><span class='Delimiter'>; </span><a href="spell.c.html#LN1616"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1614"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN217"><span class='Ref_to_Member'>Spell</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN1616"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN77"><span class='Ref_to_Member'>p</span></a><span class='Operator'>.</span>d<span class='Operator'>.</span>len <span class='Operator'>&GT; </span><a href="spell.c.html#LN1614"><span class='Ref_to_Parameter'>level</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1618"><span class='Ref_To_Local'>lastchar</span></a> <span class='Operator'>!= </span><a href="spell.c.html#LN1614"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN217"><span class='Ref_to_Member'>Spell</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN1616"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN78"><span class='Ref_to_Member'>word</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN1614"><span class='Ref_to_Parameter'>level</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1618"><span class='Ref_To_Local'>lastchar</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Comment_Multi_Line'>/* Next level of the prefix tree */ 
</span>                    <a href="spell.c.html#LN1620"><span class='Ref_To_Local'>data</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN34"><span class='Ref_to_Member'>node</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN1613"><span class='Ref_to_Func'>mkSPNode</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1614"><span class='Ref_to_Parameter'>Conf</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1621"><span class='Ref_To_Local'>lownew</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1616"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1614"><span class='Ref_to_Parameter'>level</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="spell.c.html#LN1621"><span class='Ref_To_Local'>lownew</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN1616"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>; 
</span>                    <a href="spell.c.html#LN1620"><span class='Ref_To_Local'>data</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <a href="spell.c.html#LN1618"><span class='Ref_To_Local'>lastchar</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN1614"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN217"><span class='Ref_to_Member'>Spell</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN1616"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN78"><span class='Ref_to_Member'>word</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN1614"><span class='Ref_to_Parameter'>level</span></a><span class='Delimiter'>]; 
</span>            <span class='Delimiter'>} 
</span>            <a href="spell.c.html#LN1620"><span class='Ref_To_Local'>data</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN28"><span class='Ref_to_Member'>val</span></a> <span class='Operator'>= </span><span class='Parentheses'>((</span><a href="../../include/c.h.html#LN265"><span class='Ref_to_Typedef'>uint8</span></a> <span class='Operator'>*</span><span class='Parentheses'>) (</span><a href="spell.c.html#LN1614"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN217"><span class='Ref_to_Member'>Spell</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN1616"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN78"><span class='Ref_to_Member'>word</span></a><span class='Parentheses'>))</span><span class='Delimiter'>[</span><a href="spell.c.html#LN1614"><span class='Ref_to_Parameter'>level</span></a><span class='Delimiter'>]; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1614"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN217"><span class='Ref_to_Member'>Spell</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN1616"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN77"><span class='Ref_to_Member'>p</span></a><span class='Operator'>.</span>d<span class='Operator'>.</span>len <span class='Operator'>== </span><a href="spell.c.html#LN1614"><span class='Ref_to_Parameter'>level</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span><a name="LN1655"></a>                <span class='Keyword'>bool</span>        <span class='Declare_Local'>clearCompoundOnly</span> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1620"><span class='Ref_To_Local'>data</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN29"><span class='Ref_to_Member'>isword</span></a> <span class='Operator'>&& </span><a href="spell.c.html#LN1620"><span class='Ref_To_Local'>data</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN33"><span class='Ref_to_Member'>affix</span></a> <span class='Operator'>!= </span><a href="spell.c.html#LN1614"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN217"><span class='Ref_to_Member'>Spell</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN1616"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN77"><span class='Ref_to_Member'>p</span></a><span class='Operator'>.</span>d<span class='Operator'>.</span>affix<span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Comment_Multi_Line'>/* 
                     * MergeAffix called a few times. If one of word is 
                     * allowed to be in compound word and another isn't, then 
                     * clear FF_COMPOUNDONLY flag. 
                     */ 
</span> 
                    <a href="spell.c.html#LN1655"><span class='Ref_To_Local'>clearCompoundOnly</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN41"><span class='Ref_to_Const'>FF_COMPOUNDONLY</span></a> <span class='Operator'>& </span><a href="spell.c.html#LN1620"><span class='Ref_To_Local'>data</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN31"><span class='Ref_to_Member'>compoundflag</span></a> 
                        <span class='Operator'>& </span><a href="spell.c.html#LN1597"><span class='Ref_to_Func'>makeCompoundFlags</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1614"><span class='Ref_to_Parameter'>Conf</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1614"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN217"><span class='Ref_to_Member'>Spell</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN1616"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN77"><span class='Ref_to_Member'>p</span></a><span class='Operator'>.</span>d<span class='Operator'>.</span>affix<span class='Parentheses'>))</span> 
                        <span class='Operator'>? </span><span class='Boolean'>false </span><span class='Operator'>: </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>                    <a href="spell.c.html#LN1620"><span class='Ref_To_Local'>data</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN33"><span class='Ref_to_Member'>affix</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN1553"><span class='Ref_to_Func'>MergeAffix</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1614"><span class='Ref_to_Parameter'>Conf</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1620"><span class='Ref_To_Local'>data</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN33"><span class='Ref_to_Member'>affix</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1614"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN217"><span class='Ref_to_Member'>Spell</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN1616"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN77"><span class='Ref_to_Member'>p</span></a><span class='Operator'>.</span>d<span class='Operator'>.</span>affix<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>else</span> 
                    <a href="spell.c.html#LN1620"><span class='Ref_To_Local'>data</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN33"><span class='Ref_to_Member'>affix</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN1614"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN217"><span class='Ref_to_Member'>Spell</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN1616"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN77"><span class='Ref_to_Member'>p</span></a><span class='Operator'>.</span>d<span class='Operator'>.</span>affix<span class='Delimiter'>; 
</span>                <a href="spell.c.html#LN1620"><span class='Ref_To_Local'>data</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN29"><span class='Ref_to_Member'>isword</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span> 
                <a href="spell.c.html#LN1620"><span class='Ref_To_Local'>data</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN31"><span class='Ref_to_Member'>compoundflag</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN1597"><span class='Ref_to_Func'>makeCompoundFlags</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1614"><span class='Ref_to_Parameter'>Conf</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1620"><span class='Ref_To_Local'>data</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN33"><span class='Ref_to_Member'>affix</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="spell.c.html#LN1620"><span class='Ref_To_Local'>data</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN31"><span class='Ref_to_Member'>compoundflag</span></a> <span class='Operator'>& </span><a href="../../include/tsearch/dicts/spell.h.html#LN41"><span class='Ref_to_Const'>FF_COMPOUNDONLY</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>                    <span class='Parentheses'>(</span><a href="spell.c.html#LN1620"><span class='Ref_To_Local'>data</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN31"><span class='Ref_to_Member'>compoundflag</span></a> <span class='Operator'>& </span><a href="../../include/tsearch/dicts/spell.h.html#LN45"><span class='Ref_to_Const'>FF_COMPOUNDFLAG</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                    <a href="spell.c.html#LN1620"><span class='Ref_To_Local'>data</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN31"><span class='Ref_to_Member'>compoundflag</span></a> <span class='Operator'>|= </span><a href="../../include/tsearch/dicts/spell.h.html#LN45"><span class='Ref_to_Const'>FF_COMPOUNDFLAG</span></a><span class='Delimiter'>; 
</span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1655"><span class='Ref_To_Local'>clearCompoundOnly</span></a><span class='Parentheses'>) 
</span>                    <a href="spell.c.html#LN1620"><span class='Ref_To_Local'>data</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN31"><span class='Ref_to_Member'>compoundflag</span></a> <span class='Operator'>&= ~</span><a href="../../include/tsearch/dicts/spell.h.html#LN41"><span class='Ref_to_Const'>FF_COMPOUNDONLY</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if Conf-&GT;Spell[i]-&GT;p.d.l... &raquo; </span> 
        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if Conf-&GT;Spell[i]-&GT;p.d.l... &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* Next level of the prefix tree */ 
</span>    <a href="spell.c.html#LN1620"><span class='Ref_To_Local'>data</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN34"><span class='Ref_to_Member'>node</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN1613"><span class='Ref_to_Func'>mkSPNode</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1614"><span class='Ref_to_Parameter'>Conf</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1621"><span class='Ref_To_Local'>lownew</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1614"><span class='Ref_to_Parameter'>high</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1614"><span class='Ref_to_Parameter'>level</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="spell.c.html#LN1619"><span class='Ref_To_Local'>rs</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end mkSPNode &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Builds the Conf-&GT;Dictionary tree and AffixData from the imported dictionary 
 * and affixes. 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN1696"></a><span class='Declare_Function'>NISortDictionary</span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN178"><span class='Ref_to_Typedef'>IspellDict</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>Conf</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1698"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN1699"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>naffix</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN1700"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>curaffix</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* compress affixes */ 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If we use flag aliases then we need to use Conf-&GT;AffixData filled in 
     * the NIImportOOAffixes(). 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1696"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN192"><span class='Ref_to_Member'>useFlagAliases</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1698"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="spell.c.html#LN1698"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="spell.c.html#LN1696"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN218"><span class='Ref_to_Member'>nspell</span></a><span class='Delimiter'>; </span><a href="spell.c.html#LN1698"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN1712"></a>            <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>end</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN1696"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN217"><span class='Ref_to_Member'>Spell</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN1698"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN77"><span class='Ref_to_Member'>p</span></a><span class='Operator'>.</span>flag <span class='Operator'>!= </span><span class='String'>'\0'</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <a href="spell.c.html#LN1700"><span class='Ref_To_Local'>curaffix</span></a> <span class='Operator'>= </span>strtol<span class='Parentheses'>(</span><a href="spell.c.html#LN1696"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN217"><span class='Ref_to_Member'>Spell</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN1698"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN77"><span class='Ref_to_Member'>p</span></a><span class='Operator'>.</span>flag<span class='Delimiter'>, </span><span class='Operator'>&</span><a href="spell.c.html#LN1712"><span class='Ref_To_Local'>end</span></a><span class='Delimiter'>, </span><span class='Number'>10</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1696"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN217"><span class='Ref_to_Member'>Spell</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN1698"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN77"><span class='Ref_to_Member'>p</span></a><span class='Operator'>.</span>flag <span class='Operator'>== </span><a href="spell.c.html#LN1712"><span class='Ref_To_Local'>end</span></a> <span class='Operator'>|| </span>errno <span class='Operator'>== </span>ERANGE<span class='Parentheses'>) 
</span>                    <a href="../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                            <span class='Parentheses'>(</span><a href="../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_CONFIG_FILE_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                             <a href="../utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"invalid affix alias \"%s\""</span><span class='Delimiter'>, 
</span>                                    <a href="spell.c.html#LN1696"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN217"><span class='Ref_to_Member'>Spell</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN1698"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN77"><span class='Ref_to_Member'>p</span></a><span class='Operator'>.</span>flag<span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* 
                 * If Conf-&GT;Spell[i]-&GT;p.flag is empty, then get empty value of 
                 * Conf-&GT;AffixData (0 index). 
                 */ 
</span>                <a href="spell.c.html#LN1700"><span class='Ref_To_Local'>curaffix</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
            <a href="spell.c.html#LN1696"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN217"><span class='Ref_to_Member'>Spell</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN1698"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN77"><span class='Ref_to_Member'>p</span></a><span class='Operator'>.</span>d<span class='Operator'>.</span>affix <span class='Operator'>= </span><a href="spell.c.html#LN1700"><span class='Ref_To_Local'>curaffix</span></a><span class='Delimiter'>; 
</span>            <a href="spell.c.html#LN1696"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN217"><span class='Ref_to_Member'>Spell</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN1698"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN77"><span class='Ref_to_Member'>p</span></a><span class='Operator'>.</span>d<span class='Operator'>.</span>len <span class='Operator'>= </span>strlen<span class='Parentheses'>(</span><a href="spell.c.html#LN1696"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN217"><span class='Ref_to_Member'>Spell</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN1698"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN78"><span class='Ref_to_Member'>word</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;Conf-&GT;nspell;i+... &raquo; </span> 
    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if Conf-&GT;useFlagAliases &raquo; </span> 
    <span class='Comment_Multi_Line'>/* Otherwise fill Conf-&GT;AffixData here */ 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Count the number of different flags used in the dictionary */ 
</span>        <a href="../../include/port.h.html#LN439"><span class='Ref_to_Macro'>qsort</span></a><span class='Parentheses'>((</span><span class='Keyword'>void </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="spell.c.html#LN1696"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN217"><span class='Ref_to_Member'>Spell</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1696"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN218"><span class='Ref_to_Member'>nspell</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN60"><span class='Ref_to_Typedef'>SPELL</span></a> <span class='Operator'>*</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>              <a href="spell.c.html#LN200"><span class='Ref_to_Func'>cmpspellaffix</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="spell.c.html#LN1699"><span class='Ref_To_Local'>naffix</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1698"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="spell.c.html#LN1698"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="spell.c.html#LN1696"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN218"><span class='Ref_to_Member'>nspell</span></a><span class='Delimiter'>; </span><a href="spell.c.html#LN1698"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1698"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>== </span><span class='Number'>0</span> 
                <span class='Operator'>|| </span>strcmp<span class='Parentheses'>(</span><a href="spell.c.html#LN1696"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN217"><span class='Ref_to_Member'>Spell</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN1698"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN77"><span class='Ref_to_Member'>p</span></a><span class='Operator'>.</span>flag<span class='Delimiter'>, </span><a href="spell.c.html#LN1696"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN217"><span class='Ref_to_Member'>Spell</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN1698"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN77"><span class='Ref_to_Member'>p</span></a><span class='Operator'>.</span>flag<span class='Parentheses'>))</span> 
                <a href="spell.c.html#LN1699"><span class='Ref_To_Local'>naffix</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Fill in Conf-&GT;AffixData with the affixes that were used in the 
         * dictionary. Replace textual flag-field of Conf-&GT;Spell entries with 
         * indexes into Conf-&GT;AffixData array. 
         */ 
</span>        <a href="spell.c.html#LN1696"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN189"><span class='Ref_to_Member'>AffixData</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>**</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1699"><span class='Ref_To_Local'>naffix</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <a href="spell.c.html#LN1700"><span class='Ref_To_Local'>curaffix</span></a> <span class='Operator'>= -</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1698"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="spell.c.html#LN1698"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="spell.c.html#LN1696"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN218"><span class='Ref_to_Member'>nspell</span></a><span class='Delimiter'>; </span><a href="spell.c.html#LN1698"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1698"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>== </span><span class='Number'>0</span> 
                <span class='Operator'>|| </span>strcmp<span class='Parentheses'>(</span><a href="spell.c.html#LN1696"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN217"><span class='Ref_to_Member'>Spell</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN1698"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN77"><span class='Ref_to_Member'>p</span></a><span class='Operator'>.</span>flag<span class='Delimiter'>, </span><a href="spell.c.html#LN1696"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN189"><span class='Ref_to_Member'>AffixData</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN1700"><span class='Ref_To_Local'>curaffix</span></a><span class='Delimiter'>]</span><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span>                <a href="spell.c.html#LN1700"><span class='Ref_To_Local'>curaffix</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>                <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="spell.c.html#LN1700"><span class='Ref_To_Local'>curaffix</span></a> <span class='Operator'>&LT; </span><a href="spell.c.html#LN1699"><span class='Ref_To_Local'>naffix</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="spell.c.html#LN1696"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN189"><span class='Ref_to_Member'>AffixData</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN1700"><span class='Ref_To_Local'>curaffix</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="spell.c.html#LN159"><span class='Ref_to_Func'>cpstrdup</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1696"><span class='Ref_to_Parameter'>Conf</span></a><span class='Delimiter'>, 
</span>                                                     <a href="spell.c.html#LN1696"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN217"><span class='Ref_to_Member'>Spell</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN1698"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN77"><span class='Ref_to_Member'>p</span></a><span class='Operator'>.</span>flag<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
            <a href="spell.c.html#LN1696"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN217"><span class='Ref_to_Member'>Spell</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN1698"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN77"><span class='Ref_to_Member'>p</span></a><span class='Operator'>.</span>d<span class='Operator'>.</span>affix <span class='Operator'>= </span><a href="spell.c.html#LN1700"><span class='Ref_To_Local'>curaffix</span></a><span class='Delimiter'>; 
</span>            <a href="spell.c.html#LN1696"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN217"><span class='Ref_to_Member'>Spell</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN1698"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN77"><span class='Ref_to_Member'>p</span></a><span class='Operator'>.</span>d<span class='Operator'>.</span>len <span class='Operator'>= </span>strlen<span class='Parentheses'>(</span><a href="spell.c.html#LN1696"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN217"><span class='Ref_to_Member'>Spell</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN1698"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN78"><span class='Ref_to_Member'>word</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <a href="spell.c.html#LN1696"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN190"><span class='Ref_to_Member'>lenAffixData</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN1696"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN191"><span class='Ref_to_Member'>nAffixData</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN1699"><span class='Ref_To_Local'>naffix</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* Start build a prefix tree */ 
</span>    <a href="../../include/port.h.html#LN439"><span class='Ref_to_Macro'>qsort</span></a><span class='Parentheses'>((</span><span class='Keyword'>void </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="spell.c.html#LN1696"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN217"><span class='Ref_to_Member'>Spell</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1696"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN218"><span class='Ref_to_Member'>nspell</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN60"><span class='Ref_to_Typedef'>SPELL</span></a> <span class='Operator'>*</span><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="spell.c.html#LN194"><span class='Ref_to_Func'>cmpspell</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="spell.c.html#LN1696"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN187"><span class='Ref_to_Member'>Dictionary</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN1613"><span class='Ref_to_Func'>mkSPNode</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1696"><span class='Ref_to_Parameter'>Conf</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="spell.c.html#LN1696"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN218"><span class='Ref_to_Member'>nspell</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end NISortDictionary &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Makes a prefix tree for the given level using the repl string of an affix 
 * rule. Affixes with empty replace string do not include in the prefix tree. 
 * This affixes are included by mkVoidAffix(). 
 * 
 * Conf: current dictionary. 
 * low: lower index of the Conf-&GT;Affix array. 
 * high: upper index of the Conf-&GT;Affix array. 
 * level: current prefix tree level. 
 * type: FF_SUFFIX or FF_PREFIX. 
 */ 
</span><span class='Keyword'>static </span><a href="../../include/tsearch/dicts/spell.h.html#LN132"><span class='Ref_to_Struct'>AffixNode</span></a> <span class='Operator'>* 
</span><a name="LN1794"></a><span class='Declare_Function'>mkANode</span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN178"><span class='Ref_to_Typedef'>IspellDict</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>Conf</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>low</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>high</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>level</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>type</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1796"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN1797"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>nchar</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN1798"></a>    <a href="../../include/c.h.html#LN265"><span class='Ref_to_Typedef'>uint8</span></a>       <span class='Declare_Local'>lastchar</span> <span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span><a name="LN1799"></a>    <a href="../../include/tsearch/dicts/spell.h.html#LN132"><span class='Ref_to_Struct'>AffixNode</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>rs</span><span class='Delimiter'>; 
</span><a name="LN1800"></a>    <a href="../../include/tsearch/dicts/spell.h.html#LN124"><span class='Ref_to_Typedef'>AffixNodeData</span></a> <span class='Operator'>*</span><span class='Declare_Local'>data</span><span class='Delimiter'>; 
</span><a name="LN1801"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>lownew</span> <span class='Operator'>= </span><a href="spell.c.html#LN1794"><span class='Ref_to_Parameter'>low</span></a><span class='Delimiter'>; 
</span><a name="LN1802"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>naff</span><span class='Delimiter'>; 
</span><a name="LN1803"></a>    <a href="../../include/tsearch/dicts/spell.h.html#LN86"><span class='Ref_to_Typedef'>AFFIX</span></a>     <span class='Operator'>**</span><span class='Declare_Local'>aff</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1796"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN1794"><span class='Ref_to_Parameter'>low</span></a><span class='Delimiter'>; </span><a href="spell.c.html#LN1796"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="spell.c.html#LN1794"><span class='Ref_to_Parameter'>high</span></a><span class='Delimiter'>; </span><a href="spell.c.html#LN1796"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1794"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN182"><span class='Ref_to_Member'>Affix</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN1796"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../include/tsearch/dicts/spell.h.html#LN94"><span class='Ref_to_Member'>replen</span></a> <span class='Operator'>&GT; </span><a href="spell.c.html#LN1794"><span class='Ref_to_Parameter'>level</span></a> <span class='Operator'>&& </span><a href="spell.c.html#LN1798"><span class='Ref_To_Local'>lastchar</span></a> <span class='Operator'>!= </span><a href="../utils/adt/like_match.c.html#LN72"><span class='Ref_to_Macro'>GETCHAR</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1794"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN182"><span class='Ref_to_Member'>Affix</span></a> <span class='Operator'>+ </span><a href="spell.c.html#LN1796"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1794"><span class='Ref_to_Parameter'>level</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1794"><span class='Ref_to_Parameter'>type</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <a href="spell.c.html#LN1797"><span class='Ref_To_Local'>nchar</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>            <a href="spell.c.html#LN1798"><span class='Ref_To_Local'>lastchar</span></a> <span class='Operator'>= </span><a href="../utils/adt/like_match.c.html#LN72"><span class='Ref_to_Macro'>GETCHAR</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1794"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN182"><span class='Ref_to_Member'>Affix</span></a> <span class='Operator'>+ </span><a href="spell.c.html#LN1796"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1794"><span class='Ref_to_Parameter'>level</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1794"><span class='Ref_to_Parameter'>type</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="spell.c.html#LN1797"><span class='Ref_To_Local'>nchar</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <a href="spell.c.html#LN1803"><span class='Ref_To_Local'>aff</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN86"><span class='Ref_to_Typedef'>AFFIX</span></a> <span class='Operator'>**</span><span class='Parentheses'>) </span><a href="spell.c.html#LN77"><span class='Ref_to_Macro'>tmpalloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN86"><span class='Ref_to_Typedef'>AFFIX</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><span class='Operator'>* </span><span class='Parentheses'>(</span><a href="spell.c.html#LN1794"><span class='Ref_to_Parameter'>high</span></a> <span class='Operator'>- </span><a href="spell.c.html#LN1794"><span class='Ref_to_Parameter'>low</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="spell.c.html#LN1802"><span class='Ref_To_Local'>naff</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <a href="spell.c.html#LN1799"><span class='Ref_To_Local'>rs</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN132"><span class='Ref_to_Struct'>AffixNode</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="spell.c.html#LN157"><span class='Ref_to_Macro'>cpalloc0</span></a><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN139"><span class='Ref_to_Const'>ANHRDSZ</span></a> <span class='Operator'>+ </span><a href="spell.c.html#LN1797"><span class='Ref_To_Local'>nchar</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN124"><span class='Ref_to_Typedef'>AffixNodeData</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="spell.c.html#LN1799"><span class='Ref_To_Local'>rs</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN135"><span class='Ref_to_Member'>length</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN1797"><span class='Ref_To_Local'>nchar</span></a><span class='Delimiter'>; 
</span>    <a href="spell.c.html#LN1800"><span class='Ref_To_Local'>data</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN1799"><span class='Ref_To_Local'>rs</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN136"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>; 
</span> 
    <a href="spell.c.html#LN1798"><span class='Ref_To_Local'>lastchar</span></a> <span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1796"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN1794"><span class='Ref_to_Parameter'>low</span></a><span class='Delimiter'>; </span><a href="spell.c.html#LN1796"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="spell.c.html#LN1794"><span class='Ref_to_Parameter'>high</span></a><span class='Delimiter'>; </span><a href="spell.c.html#LN1796"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1794"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN182"><span class='Ref_to_Member'>Affix</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN1796"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../include/tsearch/dicts/spell.h.html#LN94"><span class='Ref_to_Member'>replen</span></a> <span class='Operator'>&GT; </span><a href="spell.c.html#LN1794"><span class='Ref_to_Parameter'>level</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1798"><span class='Ref_To_Local'>lastchar</span></a> <span class='Operator'>!= </span><a href="../utils/adt/like_match.c.html#LN72"><span class='Ref_to_Macro'>GETCHAR</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1794"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN182"><span class='Ref_to_Member'>Affix</span></a> <span class='Operator'>+ </span><a href="spell.c.html#LN1796"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1794"><span class='Ref_to_Parameter'>level</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1794"><span class='Ref_to_Parameter'>type</span></a><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1798"><span class='Ref_To_Local'>lastchar</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Comment_Multi_Line'>/* Next level of the prefix tree */ 
</span>                    <a href="spell.c.html#LN1800"><span class='Ref_To_Local'>data</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN129"><span class='Ref_to_Member'>node</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN1793"><span class='Ref_to_Func'>mkANode</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1794"><span class='Ref_to_Parameter'>Conf</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1801"><span class='Ref_To_Local'>lownew</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1796"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1794"><span class='Ref_to_Parameter'>level</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="spell.c.html#LN1794"><span class='Ref_to_Parameter'>type</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1802"><span class='Ref_To_Local'>naff</span></a><span class='Parentheses'>) 
</span>                    <span class='Delimiter'>{ 
</span>                        <a href="spell.c.html#LN1800"><span class='Ref_To_Local'>data</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN127"><span class='Ref_to_Member'>naff</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN1802"><span class='Ref_To_Local'>naff</span></a><span class='Delimiter'>; 
</span>                        <a href="spell.c.html#LN1800"><span class='Ref_To_Local'>data</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN128"><span class='Ref_to_Member'>aff</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN86"><span class='Ref_to_Typedef'>AFFIX</span></a> <span class='Operator'>**</span><span class='Parentheses'>) </span><a href="spell.c.html#LN156"><span class='Ref_to_Macro'>cpalloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN86"><span class='Ref_to_Typedef'>AFFIX</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="spell.c.html#LN1802"><span class='Ref_To_Local'>naff</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        memcpy<span class='Parentheses'>(</span><a href="spell.c.html#LN1800"><span class='Ref_To_Local'>data</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN128"><span class='Ref_to_Member'>aff</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1803"><span class='Ref_To_Local'>aff</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN86"><span class='Ref_to_Typedef'>AFFIX</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="spell.c.html#LN1802"><span class='Ref_To_Local'>naff</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <a href="spell.c.html#LN1802"><span class='Ref_To_Local'>naff</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                    <a href="spell.c.html#LN1800"><span class='Ref_To_Local'>data</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>                    <a href="spell.c.html#LN1801"><span class='Ref_To_Local'>lownew</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN1796"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <a href="spell.c.html#LN1798"><span class='Ref_To_Local'>lastchar</span></a> <span class='Operator'>= </span><a href="../utils/adt/like_match.c.html#LN72"><span class='Ref_to_Macro'>GETCHAR</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1794"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN182"><span class='Ref_to_Member'>Affix</span></a> <span class='Operator'>+ </span><a href="spell.c.html#LN1796"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1794"><span class='Ref_to_Parameter'>level</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1794"><span class='Ref_to_Parameter'>type</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <a href="spell.c.html#LN1800"><span class='Ref_To_Local'>data</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN126"><span class='Ref_to_Member'>val</span></a> <span class='Operator'>= </span><a href="../utils/adt/like_match.c.html#LN72"><span class='Ref_to_Macro'>GETCHAR</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1794"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN182"><span class='Ref_to_Member'>Affix</span></a> <span class='Operator'>+ </span><a href="spell.c.html#LN1796"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1794"><span class='Ref_to_Parameter'>level</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1794"><span class='Ref_to_Parameter'>type</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1794"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN182"><span class='Ref_to_Member'>Affix</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN1796"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../include/tsearch/dicts/spell.h.html#LN94"><span class='Ref_to_Member'>replen</span></a> <span class='Operator'>== </span><a href="spell.c.html#LN1794"><span class='Ref_to_Parameter'>level</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{</span>                   <span class='Comment_Single_Line'>/* affix stopped */ 
</span>                <a href="spell.c.html#LN1803"><span class='Ref_To_Local'>aff</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN1802"><span class='Ref_To_Local'>naff</span></a><span class='Operator'>++</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="spell.c.html#LN1794"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN182"><span class='Ref_to_Member'>Affix</span></a> <span class='Operator'>+ </span><a href="spell.c.html#LN1796"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if Conf-&GT;Affix[i].replen... &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* Next level of the prefix tree */ 
</span>    <a href="spell.c.html#LN1800"><span class='Ref_To_Local'>data</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN129"><span class='Ref_to_Member'>node</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN1793"><span class='Ref_to_Func'>mkANode</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1794"><span class='Ref_to_Parameter'>Conf</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1801"><span class='Ref_To_Local'>lownew</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1794"><span class='Ref_to_Parameter'>high</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1794"><span class='Ref_to_Parameter'>level</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="spell.c.html#LN1794"><span class='Ref_to_Parameter'>type</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1802"><span class='Ref_To_Local'>naff</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="spell.c.html#LN1800"><span class='Ref_To_Local'>data</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN127"><span class='Ref_to_Member'>naff</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN1802"><span class='Ref_To_Local'>naff</span></a><span class='Delimiter'>; 
</span>        <a href="spell.c.html#LN1800"><span class='Ref_To_Local'>data</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN128"><span class='Ref_to_Member'>aff</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN86"><span class='Ref_to_Typedef'>AFFIX</span></a> <span class='Operator'>**</span><span class='Parentheses'>) </span><a href="spell.c.html#LN156"><span class='Ref_to_Macro'>cpalloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN86"><span class='Ref_to_Typedef'>AFFIX</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="spell.c.html#LN1802"><span class='Ref_To_Local'>naff</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        memcpy<span class='Parentheses'>(</span><a href="spell.c.html#LN1800"><span class='Ref_To_Local'>data</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN128"><span class='Ref_to_Member'>aff</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1803"><span class='Ref_To_Local'>aff</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN86"><span class='Ref_to_Typedef'>AFFIX</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="spell.c.html#LN1802"><span class='Ref_To_Local'>naff</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="spell.c.html#LN1802"><span class='Ref_To_Local'>naff</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1803"><span class='Ref_To_Local'>aff</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="spell.c.html#LN1799"><span class='Ref_To_Local'>rs</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end mkANode &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Makes the root void node in the prefix tree. The root void node is created 
 * for affixes which have empty replace string ("repl" field). 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN1871"></a><span class='Declare_Function'>mkVoidAffix</span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN178"><span class='Ref_to_Typedef'>IspellDict</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>Conf</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>issuffix</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>startsuffix</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1873"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>, 
</span><a name="LN1874"></a>                <span class='Declare_Local'>cnt</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN1875"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>start</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="spell.c.html#LN1871"><span class='Ref_to_Parameter'>issuffix</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><a href="spell.c.html#LN1871"><span class='Ref_to_Parameter'>startsuffix</span></a> <span class='Operator'>: </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN1876"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>end</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="spell.c.html#LN1871"><span class='Ref_to_Parameter'>issuffix</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><a href="spell.c.html#LN1871"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN181"><span class='Ref_to_Member'>naffixes</span></a> <span class='Operator'>: </span><a href="spell.c.html#LN1871"><span class='Ref_to_Parameter'>startsuffix</span></a><span class='Delimiter'>; 
</span><a name="LN1877"></a>    <a href="../../include/tsearch/dicts/spell.h.html#LN132"><span class='Ref_to_Struct'>AffixNode</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>Affix</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN132"><span class='Ref_to_Struct'>AffixNode</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN139"><span class='Ref_to_Const'>ANHRDSZ</span></a> <span class='Operator'>+ </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN124"><span class='Ref_to_Typedef'>AffixNodeData</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="spell.c.html#LN1877"><span class='Ref_To_Local'>Affix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN135"><span class='Ref_to_Member'>length</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <a href="spell.c.html#LN1877"><span class='Ref_To_Local'>Affix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN134"><span class='Ref_to_Member'>isvoid</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1871"><span class='Ref_to_Parameter'>issuffix</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="spell.c.html#LN1877"><span class='Ref_To_Local'>Affix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN136"><span class='Ref_to_Member'>data</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN129"><span class='Ref_to_Member'>node</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN1871"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN184"><span class='Ref_to_Member'>Suffix</span></a><span class='Delimiter'>; 
</span>        <a href="spell.c.html#LN1871"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN184"><span class='Ref_to_Member'>Suffix</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN1877"><span class='Ref_To_Local'>Affix</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="spell.c.html#LN1877"><span class='Ref_To_Local'>Affix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN136"><span class='Ref_to_Member'>data</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN129"><span class='Ref_to_Member'>node</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN1871"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN185"><span class='Ref_to_Member'>Prefix</span></a><span class='Delimiter'>; 
</span>        <a href="spell.c.html#LN1871"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN185"><span class='Ref_to_Member'>Prefix</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN1877"><span class='Ref_To_Local'>Affix</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* Count affixes with empty replace string */ 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1873"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN1875"><span class='Ref_To_Local'>start</span></a><span class='Delimiter'>; </span><a href="spell.c.html#LN1873"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="spell.c.html#LN1876"><span class='Ref_To_Local'>end</span></a><span class='Delimiter'>; </span><a href="spell.c.html#LN1873"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1871"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN182"><span class='Ref_to_Member'>Affix</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN1873"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../include/tsearch/dicts/spell.h.html#LN94"><span class='Ref_to_Member'>replen</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <a href="spell.c.html#LN1874"><span class='Ref_To_Local'>cnt</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* There is not affixes with empty replace string */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1874"><span class='Ref_To_Local'>cnt</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <a href="spell.c.html#LN1877"><span class='Ref_To_Local'>Affix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN136"><span class='Ref_to_Member'>data</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN128"><span class='Ref_to_Member'>aff</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN86"><span class='Ref_to_Typedef'>AFFIX</span></a> <span class='Operator'>**</span><span class='Parentheses'>) </span><a href="spell.c.html#LN156"><span class='Ref_to_Macro'>cpalloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN86"><span class='Ref_to_Typedef'>AFFIX</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="spell.c.html#LN1874"><span class='Ref_To_Local'>cnt</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="spell.c.html#LN1877"><span class='Ref_To_Local'>Affix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN136"><span class='Ref_to_Member'>data</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN127"><span class='Ref_to_Member'>naff</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/c.h.html#LN267"><span class='Ref_to_Typedef'>uint32</span></a><span class='Parentheses'>) </span><a href="spell.c.html#LN1874"><span class='Ref_To_Local'>cnt</span></a><span class='Delimiter'>; 
</span> 
    <a href="spell.c.html#LN1874"><span class='Ref_To_Local'>cnt</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1873"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN1875"><span class='Ref_To_Local'>start</span></a><span class='Delimiter'>; </span><a href="spell.c.html#LN1873"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="spell.c.html#LN1876"><span class='Ref_To_Local'>end</span></a><span class='Delimiter'>; </span><a href="spell.c.html#LN1873"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1871"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN182"><span class='Ref_to_Member'>Affix</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN1873"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../include/tsearch/dicts/spell.h.html#LN94"><span class='Ref_to_Member'>replen</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="spell.c.html#LN1877"><span class='Ref_To_Local'>Affix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN136"><span class='Ref_to_Member'>data</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN128"><span class='Ref_to_Member'>aff</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN1874"><span class='Ref_To_Local'>cnt</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="spell.c.html#LN1871"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN182"><span class='Ref_to_Member'>Affix</span></a> <span class='Operator'>+ </span><a href="spell.c.html#LN1873"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>; 
</span>            <a href="spell.c.html#LN1874"><span class='Ref_To_Local'>cnt</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
}</span><span class='Auto_Annotations'> &laquo; end mkVoidAffix &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Checks if the affixflag is used by dictionary. Conf-&GT;AffixData does not 
 * contain affixflag if this flag is not used actually by the .dict file. 
 * 
 * Conf: current dictionary. 
 * affixflag: affix flag. 
 * 
 * Returns true if the Conf-&GT;AffixData array contains affixflag, otherwise 
 * returns false. 
 */ 
</span><span class='Keyword'>static bool 
</span><a name="LN1925"></a><span class='Declare_Function'>isAffixInUse</span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN178"><span class='Ref_to_Typedef'>IspellDict</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>Conf</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>affixflag</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1927"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1927"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="spell.c.html#LN1927"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="spell.c.html#LN1925"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN191"><span class='Ref_to_Member'>nAffixData</span></a><span class='Delimiter'>; </span><a href="spell.c.html#LN1927"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN451"><span class='Ref_to_Func'>IsAffixFlagInUse</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1925"><span class='Ref_to_Parameter'>Conf</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1927"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1925"><span class='Ref_to_Parameter'>affixflag</span></a><span class='Parentheses'>))</span> 
            <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Builds Conf-&GT;Prefix and Conf-&GT;Suffix trees from the imported affixes. 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN1940"></a><span class='Declare_Function'>NISortAffixes</span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN178"><span class='Ref_to_Typedef'>IspellDict</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>Conf</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1942"></a>    <a href="../../include/tsearch/dicts/spell.h.html#LN86"><span class='Ref_to_Typedef'>AFFIX</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>Affix</span><span class='Delimiter'>; 
</span><a name="LN1943"></a>    size_t      <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN1944"></a>    <a href="../../include/tsearch/dicts/spell.h.html#LN141"><span class='Ref_to_Typedef'>CMPDAffix</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>ptr</span><span class='Delimiter'>; 
</span><a name="LN1945"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>firstsuffix</span> <span class='Operator'>= </span><a href="spell.c.html#LN1940"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN181"><span class='Ref_to_Member'>naffixes</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1940"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN181"><span class='Ref_to_Member'>naffixes</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Store compound affixes in the Conf-&GT;CompoundAffix array */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1940"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN181"><span class='Ref_to_Member'>naffixes</span></a> <span class='Operator'>&GT; </span><span class='Number'>1</span><span class='Parentheses'>) 
</span>        <a href="../../include/port.h.html#LN439"><span class='Ref_to_Macro'>qsort</span></a><span class='Parentheses'>((</span><span class='Keyword'>void </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="spell.c.html#LN1940"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN182"><span class='Ref_to_Member'>Affix</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1940"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN181"><span class='Ref_to_Member'>naffixes</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN86"><span class='Ref_to_Typedef'>AFFIX</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="spell.c.html#LN308"><span class='Ref_to_Func'>cmpaffix</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="spell.c.html#LN1940"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN194"><span class='Ref_to_Member'>CompoundAffix</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN1944"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN141"><span class='Ref_to_Typedef'>CMPDAffix</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN141"><span class='Ref_to_Typedef'>CMPDAffix</span></a><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="spell.c.html#LN1940"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN181"><span class='Ref_to_Member'>naffixes</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="spell.c.html#LN1944"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN143"><span class='Ref_to_Member'>affix</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1943"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="spell.c.html#LN1943"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="spell.c.html#LN1940"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN181"><span class='Ref_to_Member'>naffixes</span></a><span class='Delimiter'>; </span><a href="spell.c.html#LN1943"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="spell.c.html#LN1942"><span class='Ref_To_Local'>Affix</span></a> <span class='Operator'>= &</span><span class='Parentheses'>(((</span><a href="../../include/tsearch/dicts/spell.h.html#LN86"><span class='Ref_to_Typedef'>AFFIX</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="spell.c.html#LN1940"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN182"><span class='Ref_to_Member'>Affix</span></a><span class='Parentheses'>)</span><span class='Delimiter'>[</span><a href="spell.c.html#LN1943"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1942"><span class='Ref_To_Local'>Affix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN90"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>== </span><a href="../../include/tsearch/dicts/spell.h.html#LN115"><span class='Ref_to_Const'>FF_SUFFIX</span></a> <span class='Operator'>&& </span><a href="spell.c.html#LN1943"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="spell.c.html#LN1945"><span class='Ref_To_Local'>firstsuffix</span></a><span class='Parentheses'>) 
</span>            <a href="spell.c.html#LN1945"><span class='Ref_To_Local'>firstsuffix</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN1943"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="spell.c.html#LN1942"><span class='Ref_To_Local'>Affix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN91"><span class='Ref_to_Member'>flagflags</span></a> <span class='Operator'>& </span><a href="../../include/tsearch/dicts/spell.h.html#LN45"><span class='Ref_to_Const'>FF_COMPOUNDFLAG</span></a><span class='Parentheses'>) </span><span class='Operator'>&& </span><a href="spell.c.html#LN1942"><span class='Ref_To_Local'>Affix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN94"><span class='Ref_to_Member'>replen</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span> <span class='Operator'>&& 
</span>            <a href="spell.c.html#LN1924"><span class='Ref_to_Func'>isAffixInUse</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1940"><span class='Ref_to_Parameter'>Conf</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1942"><span class='Ref_To_Local'>Affix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN88"><span class='Ref_to_Member'>flag</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1944"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>== </span><a href="spell.c.html#LN1940"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN194"><span class='Ref_to_Member'>CompoundAffix</span></a> <span class='Operator'>|| 
</span>                <a href="spell.c.html#LN1944"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN145"><span class='Ref_to_Member'>issuffix</span></a> <span class='Operator'>!= </span><span class='Parentheses'>(</span><a href="spell.c.html#LN1944"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>issuffix <span class='Operator'>|| 
</span>                <a href="spell.c.html#LN277"><span class='Ref_to_Func'>strbncmp</span></a><span class='Parentheses'>((</span><span class='Keyword'>const unsigned char </span><span class='Operator'>*</span><span class='Parentheses'>) (</span><a href="spell.c.html#LN1944"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>affix<span class='Delimiter'>, 
</span>                         <span class='Parentheses'>(</span><span class='Keyword'>const unsigned char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="spell.c.html#LN1942"><span class='Ref_To_Local'>Affix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN96"><span class='Ref_to_Member'>repl</span></a><span class='Delimiter'>, 
</span>                         <span class='Parentheses'>(</span><a href="spell.c.html#LN1944"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>len<span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* leave only unique and minimals suffixes */ 
</span>                <a href="spell.c.html#LN1944"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN143"><span class='Ref_to_Member'>affix</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN1942"><span class='Ref_To_Local'>Affix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN96"><span class='Ref_to_Member'>repl</span></a><span class='Delimiter'>; 
</span>                <a href="spell.c.html#LN1944"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN144"><span class='Ref_to_Member'>len</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN1942"><span class='Ref_To_Local'>Affix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN94"><span class='Ref_to_Member'>replen</span></a><span class='Delimiter'>; 
</span>                <a href="spell.c.html#LN1944"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN145"><span class='Ref_to_Member'>issuffix</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="spell.c.html#LN1942"><span class='Ref_To_Local'>Affix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN90"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>== </span><a href="../../include/tsearch/dicts/spell.h.html#LN115"><span class='Ref_to_Const'>FF_SUFFIX</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="spell.c.html#LN1944"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;Conf-&GT;naffixes;... &raquo; </span> 
    <a href="spell.c.html#LN1944"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN143"><span class='Ref_to_Member'>affix</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="spell.c.html#LN1940"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN194"><span class='Ref_to_Member'>CompoundAffix</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN141"><span class='Ref_to_Typedef'>CMPDAffix</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN36"><span class='Ref_to_Proto'>repalloc</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1940"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN194"><span class='Ref_to_Member'>CompoundAffix</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN141"><span class='Ref_to_Typedef'>CMPDAffix</span></a><span class='Parentheses'>) </span><span class='Operator'>* </span><span class='Parentheses'>(</span><a href="spell.c.html#LN1944"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>- </span><a href="spell.c.html#LN1940"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN194"><span class='Ref_to_Member'>CompoundAffix</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Start build a prefix tree */ 
</span>    <a href="spell.c.html#LN1940"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN185"><span class='Ref_to_Member'>Prefix</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN1793"><span class='Ref_to_Func'>mkANode</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1940"><span class='Ref_to_Parameter'>Conf</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="spell.c.html#LN1945"><span class='Ref_To_Local'>firstsuffix</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../include/tsearch/dicts/spell.h.html#LN116"><span class='Ref_to_Const'>FF_PREFIX</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="spell.c.html#LN1940"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN184"><span class='Ref_to_Member'>Suffix</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN1793"><span class='Ref_to_Func'>mkANode</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1940"><span class='Ref_to_Parameter'>Conf</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1945"><span class='Ref_To_Local'>firstsuffix</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1940"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN181"><span class='Ref_to_Member'>naffixes</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../include/tsearch/dicts/spell.h.html#LN115"><span class='Ref_to_Const'>FF_SUFFIX</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="spell.c.html#LN1870"><span class='Ref_to_Func'>mkVoidAffix</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1940"><span class='Ref_to_Parameter'>Conf</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span><a href="spell.c.html#LN1945"><span class='Ref_To_Local'>firstsuffix</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="spell.c.html#LN1870"><span class='Ref_to_Func'>mkVoidAffix</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1940"><span class='Ref_to_Parameter'>Conf</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span><a href="spell.c.html#LN1945"><span class='Ref_To_Local'>firstsuffix</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end NISortAffixes &raquo; </span> 
 
<span class='Keyword'>static </span><a href="../../include/tsearch/dicts/spell.h.html#LN124"><span class='Ref_to_Typedef'>AffixNodeData</span></a> <span class='Operator'>* 
</span><a name="LN1990"></a><span class='Declare_Function'>FindAffixes</span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN132"><span class='Ref_to_Struct'>AffixNode</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>word</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>wrdlen</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>level</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>type</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1992"></a>    <a href="../../include/tsearch/dicts/spell.h.html#LN124"><span class='Ref_to_Typedef'>AffixNodeData</span></a> <span class='Operator'>*</span><span class='Declare_Local'>StopLow</span><span class='Delimiter'>, 
</span><a name="LN1993"></a>               <span class='Operator'>*</span><span class='Declare_Local'>StopHigh</span><span class='Delimiter'>, 
</span><a name="LN1994"></a>               <span class='Operator'>*</span><span class='Declare_Local'>StopMiddle</span><span class='Delimiter'>; 
</span><a name="LN1995"></a>    <a href="../../include/c.h.html#LN265"><span class='Ref_to_Typedef'>uint8</span></a> <span class='Declare_Local'>symbol</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1990"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN134"><span class='Ref_to_Member'>isvoid</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{</span>                           <span class='Comment_Single_Line'>/* search void affixes */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1990"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN136"><span class='Ref_to_Member'>data</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN127"><span class='Ref_to_Member'>naff</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>return</span> <a href="spell.c.html#LN1990"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN136"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>; 
</span>        <a href="spell.c.html#LN1990"><span class='Ref_to_Parameter'>node</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN1990"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN136"><span class='Ref_to_Member'>data</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN129"><span class='Ref_to_Member'>node</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1990"><span class='Ref_to_Parameter'>node</span></a> <span class='Operator'>&& *</span><a href="spell.c.html#LN1990"><span class='Ref_to_Parameter'>level</span></a> <span class='Operator'>&LT; </span><a href="spell.c.html#LN1990"><span class='Ref_to_Parameter'>wrdlen</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="spell.c.html#LN1992"><span class='Ref_To_Local'>StopLow</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN1990"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN136"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>; 
</span>        <a href="spell.c.html#LN1993"><span class='Ref_To_Local'>StopHigh</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN1990"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN136"><span class='Ref_to_Member'>data</span></a> <span class='Operator'>+ </span><a href="spell.c.html#LN1990"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN135"><span class='Ref_to_Member'>length</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1992"><span class='Ref_To_Local'>StopLow</span></a> <span class='Operator'>&LT; </span><a href="spell.c.html#LN1993"><span class='Ref_To_Local'>StopHigh</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="spell.c.html#LN1994"><span class='Ref_To_Local'>StopMiddle</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN1992"><span class='Ref_To_Local'>StopLow</span></a> <span class='Operator'>+ </span><span class='Parentheses'>((</span><a href="spell.c.html#LN1993"><span class='Ref_To_Local'>StopHigh</span></a> <span class='Operator'>- </span><a href="spell.c.html#LN1992"><span class='Ref_To_Local'>StopLow</span></a><span class='Parentheses'>) </span><span class='Operator'>&GT;&GT; </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="spell.c.html#LN1995"><span class='Ref_To_Local'>symbol</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN189"><span class='Ref_to_Macro'>GETWCHAR</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN1990"><span class='Ref_to_Parameter'>word</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1990"><span class='Ref_to_Parameter'>wrdlen</span></a><span class='Delimiter'>, </span><span class='Operator'>*</span><a href="spell.c.html#LN1990"><span class='Ref_to_Parameter'>level</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN1990"><span class='Ref_to_Parameter'>type</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1994"><span class='Ref_To_Local'>StopMiddle</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN126"><span class='Ref_to_Member'>val</span></a> <span class='Operator'>== </span><a href="spell.c.html#LN1995"><span class='Ref_To_Local'>symbol</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN1990"><span class='Ref_to_Parameter'>level</span></a><span class='Parentheses'>)</span><span class='Operator'>++</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1994"><span class='Ref_To_Local'>StopMiddle</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN127"><span class='Ref_to_Member'>naff</span></a><span class='Parentheses'>) 
</span>                    <span class='Control'>return</span> <a href="spell.c.html#LN1994"><span class='Ref_To_Local'>StopMiddle</span></a><span class='Delimiter'>; 
</span>                <a href="spell.c.html#LN1990"><span class='Ref_to_Parameter'>node</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN1994"><span class='Ref_To_Local'>StopMiddle</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN129"><span class='Ref_to_Member'>node</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1994"><span class='Ref_To_Local'>StopMiddle</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN126"><span class='Ref_to_Member'>val</span></a> <span class='Operator'>&LT; </span><a href="spell.c.html#LN1995"><span class='Ref_To_Local'>symbol</span></a><span class='Parentheses'>) 
</span>                <a href="spell.c.html#LN1992"><span class='Ref_To_Local'>StopLow</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN1994"><span class='Ref_To_Local'>StopMiddle</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
                <a href="spell.c.html#LN1993"><span class='Ref_To_Local'>StopHigh</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN1994"><span class='Ref_To_Local'>StopMiddle</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN1992"><span class='Ref_To_Local'>StopLow</span></a> <span class='Operator'>&GT;= </span><a href="spell.c.html#LN1993"><span class='Ref_To_Local'>StopHigh</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end while node&&*level&LT;wrdlen &raquo; </span> 
    <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end FindAffixes &raquo; </span> 
 
<span class='Keyword'>static char </span><span class='Operator'>* 
</span><a name="LN2033"></a><span class='Declare_Function'>CheckAffix</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>word</span><span class='Delimiter'>, </span>size_t <span class='Declare_Parameter'>len</span><span class='Delimiter'>, </span><a href="../../include/tsearch/dicts/spell.h.html#LN86"><span class='Ref_to_Typedef'>AFFIX</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>Affix</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>flagflags</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>newword</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>baselen</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Comment_Multi_Line'>/* 
     * Check compound allow flags 
     */ 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN2033"><span class='Ref_to_Parameter'>flagflags</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN2033"><span class='Ref_to_Parameter'>Affix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN91"><span class='Ref_to_Member'>flagflags</span></a> <span class='Operator'>& </span><a href="../../include/tsearch/dicts/spell.h.html#LN41"><span class='Ref_to_Const'>FF_COMPOUNDONLY</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN2033"><span class='Ref_to_Parameter'>flagflags</span></a> <span class='Operator'>& </span><a href="../../include/tsearch/dicts/spell.h.html#LN42"><span class='Ref_to_Const'>FF_COMPOUNDBEGIN</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN2033"><span class='Ref_to_Parameter'>Affix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN91"><span class='Ref_to_Member'>flagflags</span></a> <span class='Operator'>& </span><a href="../../include/tsearch/dicts/spell.h.html#LN108"><span class='Ref_to_Const'>FF_COMPOUNDFORBIDFLAG</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="spell.c.html#LN2033"><span class='Ref_to_Parameter'>Affix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN91"><span class='Ref_to_Member'>flagflags</span></a> <span class='Operator'>& </span><a href="../../include/tsearch/dicts/spell.h.html#LN42"><span class='Ref_to_Const'>FF_COMPOUNDBEGIN</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN2033"><span class='Ref_to_Parameter'>Affix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN90"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>== </span><a href="../../include/tsearch/dicts/spell.h.html#LN115"><span class='Ref_to_Const'>FF_SUFFIX</span></a><span class='Parentheses'>) 
</span>                <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN2033"><span class='Ref_to_Parameter'>flagflags</span></a> <span class='Operator'>& </span><a href="../../include/tsearch/dicts/spell.h.html#LN43"><span class='Ref_to_Const'>FF_COMPOUNDMIDDLE</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="spell.c.html#LN2033"><span class='Ref_to_Parameter'>Affix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN91"><span class='Ref_to_Member'>flagflags</span></a> <span class='Operator'>& </span><a href="../../include/tsearch/dicts/spell.h.html#LN43"><span class='Ref_to_Const'>FF_COMPOUNDMIDDLE</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span> <span class='Operator'>|| 
</span>            <span class='Parentheses'>(</span><a href="spell.c.html#LN2033"><span class='Ref_to_Parameter'>Affix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN91"><span class='Ref_to_Member'>flagflags</span></a> <span class='Operator'>& </span><a href="../../include/tsearch/dicts/spell.h.html#LN108"><span class='Ref_to_Const'>FF_COMPOUNDFORBIDFLAG</span></a><span class='Parentheses'>))</span> 
            <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN2033"><span class='Ref_to_Parameter'>flagflags</span></a> <span class='Operator'>& </span><a href="../../include/tsearch/dicts/spell.h.html#LN44"><span class='Ref_to_Const'>FF_COMPOUNDLAST</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN2033"><span class='Ref_to_Parameter'>Affix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN91"><span class='Ref_to_Member'>flagflags</span></a> <span class='Operator'>& </span><a href="../../include/tsearch/dicts/spell.h.html#LN108"><span class='Ref_to_Const'>FF_COMPOUNDFORBIDFLAG</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="spell.c.html#LN2033"><span class='Ref_to_Parameter'>Affix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN91"><span class='Ref_to_Member'>flagflags</span></a> <span class='Operator'>& </span><a href="../../include/tsearch/dicts/spell.h.html#LN44"><span class='Ref_to_Const'>FF_COMPOUNDLAST</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN2033"><span class='Ref_to_Parameter'>Affix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN90"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>== </span><a href="../../include/tsearch/dicts/spell.h.html#LN116"><span class='Ref_to_Const'>FF_PREFIX</span></a><span class='Parentheses'>) 
</span>                <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * make replace pattern of affix 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN2033"><span class='Ref_to_Parameter'>Affix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN90"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>== </span><a href="../../include/tsearch/dicts/spell.h.html#LN115"><span class='Ref_to_Const'>FF_SUFFIX</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN2033"><span class='Ref_to_Parameter'>newword</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN2033"><span class='Ref_to_Parameter'>word</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN2033"><span class='Ref_to_Parameter'>newword</span></a> <span class='Operator'>+ </span><a href="spell.c.html#LN2033"><span class='Ref_to_Parameter'>len</span></a> <span class='Operator'>- </span><a href="spell.c.html#LN2033"><span class='Ref_to_Parameter'>Affix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN94"><span class='Ref_to_Member'>replen</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN2033"><span class='Ref_to_Parameter'>Affix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN95"><span class='Ref_to_Member'>find</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN2033"><span class='Ref_to_Parameter'>baselen</span></a><span class='Parentheses'>)</span>            <span class='Comment_Single_Line'>/* store length of non-changed part of word */ 
</span>            <span class='Operator'>*</span><a href="spell.c.html#LN2033"><span class='Ref_to_Parameter'>baselen</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN2033"><span class='Ref_to_Parameter'>len</span></a> <span class='Operator'>- </span><a href="spell.c.html#LN2033"><span class='Ref_to_Parameter'>Affix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN94"><span class='Ref_to_Member'>replen</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * if prefix is an all non-changed part's length then all word 
         * contains only prefix and suffix, so out 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN2033"><span class='Ref_to_Parameter'>baselen</span></a> <span class='Operator'>&& *</span><a href="spell.c.html#LN2033"><span class='Ref_to_Parameter'>baselen</span></a> <span class='Operator'>+ </span>strlen<span class='Parentheses'>(</span><a href="spell.c.html#LN2033"><span class='Ref_to_Parameter'>Affix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN95"><span class='Ref_to_Member'>find</span></a><span class='Parentheses'>) </span><span class='Operator'>&LT;= </span><a href="spell.c.html#LN2033"><span class='Ref_to_Parameter'>Affix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN94"><span class='Ref_to_Member'>replen</span></a><span class='Parentheses'>)</span> 
            <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>        <a href="../../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN2033"><span class='Ref_to_Parameter'>newword</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN2033"><span class='Ref_to_Parameter'>Affix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN95"><span class='Ref_to_Member'>find</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        strcat<span class='Parentheses'>(</span><a href="spell.c.html#LN2033"><span class='Ref_to_Parameter'>newword</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN2033"><span class='Ref_to_Parameter'>word</span></a> <span class='Operator'>+ </span><a href="spell.c.html#LN2033"><span class='Ref_to_Parameter'>Affix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN94"><span class='Ref_to_Member'>replen</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * check resulting word 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN2033"><span class='Ref_to_Parameter'>Affix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN92"><span class='Ref_to_Member'>issimple</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <a href="spell.c.html#LN2033"><span class='Ref_to_Parameter'>newword</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN2033"><span class='Ref_to_Parameter'>Affix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN93"><span class='Ref_to_Member'>isregis</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/regis.h.html#LN46"><span class='Ref_to_Proto'>RS_execute</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="spell.c.html#LN2033"><span class='Ref_to_Parameter'>Affix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN101"><span class='Ref_to_Member'>reg</span></a><span class='Operator'>.</span>regis<span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="spell.c.html#LN2033"><span class='Ref_to_Parameter'>newword</span></a><span class='Parentheses'>))</span> 
            <span class='Control'>return</span> <a href="spell.c.html#LN2033"><span class='Ref_to_Parameter'>newword</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span><a name="LN2101"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>err</span><span class='Delimiter'>; 
</span><a name="LN2102"></a>        <a href="../../include/mb/pg_wchar.h.html#LN24"><span class='Ref_to_Typedef'>pg_wchar</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>data</span><span class='Delimiter'>; 
</span><a name="LN2103"></a>        size_t      <span class='Declare_Local'>data_len</span><span class='Delimiter'>; 
</span><a name="LN2104"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>newword_len</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Convert data string to wide characters */ 
</span>        <a href="spell.c.html#LN2104"><span class='Ref_To_Local'>newword_len</span></a> <span class='Operator'>= </span>strlen<span class='Parentheses'>(</span><a href="spell.c.html#LN2033"><span class='Ref_to_Parameter'>newword</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="spell.c.html#LN2102"><span class='Ref_To_Local'>data</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/mb/pg_wchar.h.html#LN24"><span class='Ref_to_Typedef'>pg_wchar</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>((</span><a href="spell.c.html#LN2104"><span class='Ref_To_Local'>newword_len</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>) </span><span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/mb/pg_wchar.h.html#LN24"><span class='Ref_to_Typedef'>pg_wchar</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="spell.c.html#LN2103"><span class='Ref_To_Local'>data_len</span></a> <span class='Operator'>= </span><a href="../../include/mb/pg_wchar.h.html#LN510"><span class='Ref_to_Proto'>pg_mb2wchar_with_len</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN2033"><span class='Ref_to_Parameter'>newword</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN2102"><span class='Ref_To_Local'>data</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN2104"><span class='Ref_To_Local'>newword_len</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><span class='Parentheses'>(</span><a href="spell.c.html#LN2101"><span class='Ref_To_Local'>err</span></a> <span class='Operator'>= </span><a href="../regex/regexec.c.html#LN170"><span class='Ref_to_Func'>pg_regexec</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="spell.c.html#LN2033"><span class='Ref_to_Parameter'>Affix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN101"><span class='Ref_to_Member'>reg</span></a><span class='Operator'>.</span>regex<span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="spell.c.html#LN2102"><span class='Ref_To_Local'>data</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN2103"><span class='Ref_To_Local'>data_len</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)))</span> 
        <span class='Delimiter'>{ 
</span>            <a href="../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN2102"><span class='Ref_To_Local'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>return</span> <a href="spell.c.html#LN2033"><span class='Ref_to_Parameter'>newword</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <a href="../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN2102"><span class='Ref_To_Local'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end CheckAffix &raquo; </span> 
 
<span class='Keyword'>static int 
</span><a name="LN2123"></a><span class='Declare_Function'>addToResult</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>**</span><span class='Declare_Parameter'>forms</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>**</span><span class='Declare_Parameter'>cur</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>word</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN2123"><span class='Ref_to_Parameter'>cur</span></a> <span class='Operator'>- </span><a href="spell.c.html#LN2123"><span class='Ref_to_Parameter'>forms</span></a> <span class='Operator'>&GT;= </span><a href="spell.c.html#LN185"><span class='Ref_to_Const'>MAX_NORM</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN2123"><span class='Ref_to_Parameter'>forms</span></a> <span class='Operator'>== </span><a href="spell.c.html#LN2123"><span class='Ref_to_Parameter'>cur</span></a> <span class='Operator'>|| </span>strcmp<span class='Parentheses'>(</span><a href="spell.c.html#LN2123"><span class='Ref_to_Parameter'>word</span></a><span class='Delimiter'>, </span><span class='Operator'>*</span><span class='Parentheses'>(</span><a href="spell.c.html#LN2123"><span class='Ref_to_Parameter'>cur</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>))</span> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Operator'>*</span><a href="spell.c.html#LN2123"><span class='Ref_to_Parameter'>cur</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN32"><span class='Ref_to_Proto'>pstrdup</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN2123"><span class='Ref_to_Parameter'>word</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Operator'>*</span><span class='Parentheses'>(</span><a href="spell.c.html#LN2123"><span class='Ref_to_Parameter'>cur</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>) </span><span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>static char </span><span class='Operator'>** 
</span><a name="LN2138"></a><span class='Declare_Function'>NormalizeSubWord</span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN178"><span class='Ref_to_Typedef'>IspellDict</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>Conf</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>word</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>flag</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2140"></a>    <a href="../../include/tsearch/dicts/spell.h.html#LN124"><span class='Ref_to_Typedef'>AffixNodeData</span></a> <span class='Operator'>*</span><span class='Declare_Local'>suffix</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span><a name="LN2141"></a>               <span class='Operator'>*</span><span class='Declare_Local'>prefix</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN2142"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>slevel</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>, 
</span><a name="LN2143"></a>                <span class='Declare_Local'>plevel</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN2144"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>wrdlen</span> <span class='Operator'>= </span>strlen<span class='Parentheses'>(</span><a href="spell.c.html#LN2138"><span class='Ref_to_Parameter'>word</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span><a name="LN2145"></a>                <span class='Declare_Local'>swrdlen</span><span class='Delimiter'>; 
</span><a name="LN2146"></a>    <span class='Keyword'>char</span>      <span class='Operator'>**</span><span class='Declare_Local'>forms</span><span class='Delimiter'>; 
</span><a name="LN2147"></a>    <span class='Keyword'>char</span>      <span class='Operator'>**</span><span class='Declare_Local'>cur</span><span class='Delimiter'>; 
</span><a name="LN2148"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>newword</span><span class='Delimiter'>[</span><span class='Number'>2</span> <span class='Operator'>* </span><a href="spell.c.html#LN186"><span class='Ref_to_Const'>MAXNORMLEN</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='String'>""</span><span class='Delimiter'>; 
</span><a name="LN2149"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>pnewword</span><span class='Delimiter'>[</span><span class='Number'>2</span> <span class='Operator'>* </span><a href="spell.c.html#LN186"><span class='Ref_to_Const'>MAXNORMLEN</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='String'>""</span><span class='Delimiter'>; 
</span><a name="LN2150"></a>    <a href="../../include/tsearch/dicts/spell.h.html#LN132"><span class='Ref_to_Struct'>AffixNode</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>snode</span> <span class='Operator'>= </span><a href="spell.c.html#LN2138"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN184"><span class='Ref_to_Member'>Suffix</span></a><span class='Delimiter'>, 
</span><a name="LN2151"></a>               <span class='Operator'>*</span><span class='Declare_Local'>pnode</span><span class='Delimiter'>; 
</span><a name="LN2152"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>, 
</span><a name="LN2153"></a>                <span class='Declare_Local'>j</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN2144"><span class='Ref_To_Local'>wrdlen</span></a> <span class='Operator'>&GT; </span><a href="spell.c.html#LN186"><span class='Ref_to_Const'>MAXNORMLEN</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="spell.c.html#LN2147"><span class='Ref_To_Local'>cur</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN2146"><span class='Ref_To_Local'>forms</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>**</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN185"><span class='Ref_to_Const'>MAX_NORM</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="spell.c.html#LN2147"><span class='Ref_To_Local'>cur</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
 
    <span class='Comment_Multi_Line'>/* Check that the word itself is normal form */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN597"><span class='Ref_to_Func'>FindWord</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN2138"><span class='Ref_to_Parameter'>Conf</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN2138"><span class='Ref_to_Parameter'>word</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN192"><span class='Ref_to_Global_Var'>VoidString</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN2138"><span class='Ref_to_Parameter'>flag</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Operator'>*</span><a href="spell.c.html#LN2147"><span class='Ref_To_Local'>cur</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN32"><span class='Ref_to_Proto'>pstrdup</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN2138"><span class='Ref_to_Parameter'>word</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="spell.c.html#LN2147"><span class='Ref_To_Local'>cur</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <span class='Operator'>*</span><a href="spell.c.html#LN2147"><span class='Ref_To_Local'>cur</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* Find all other NORMAL forms of the 'word' (check only prefix) */ 
</span>    <a href="spell.c.html#LN2151"><span class='Ref_To_Local'>pnode</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN2138"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN185"><span class='Ref_to_Member'>Prefix</span></a><span class='Delimiter'>; 
</span>    <a href="spell.c.html#LN2143"><span class='Ref_To_Local'>plevel</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN2151"><span class='Ref_To_Local'>pnode</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="spell.c.html#LN2141"><span class='Ref_To_Local'>prefix</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN1989"><span class='Ref_to_Func'>FindAffixes</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN2151"><span class='Ref_To_Local'>pnode</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN2138"><span class='Ref_to_Parameter'>word</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN2144"><span class='Ref_To_Local'>wrdlen</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="spell.c.html#LN2143"><span class='Ref_To_Local'>plevel</span></a><span class='Delimiter'>, </span><a href="../../include/tsearch/dicts/spell.h.html#LN116"><span class='Ref_to_Const'>FF_PREFIX</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="spell.c.html#LN2141"><span class='Ref_To_Local'>prefix</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN2153"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="spell.c.html#LN2153"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>&LT; </span><a href="spell.c.html#LN2141"><span class='Ref_To_Local'>prefix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN127"><span class='Ref_to_Member'>naff</span></a><span class='Delimiter'>; </span><a href="spell.c.html#LN2153"><span class='Ref_To_Local'>j</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN2032"><span class='Ref_to_Func'>CheckAffix</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN2138"><span class='Ref_to_Parameter'>word</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN2144"><span class='Ref_To_Local'>wrdlen</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN2141"><span class='Ref_To_Local'>prefix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN128"><span class='Ref_to_Member'>aff</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN2153"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>], </span><a href="spell.c.html#LN2138"><span class='Ref_to_Parameter'>flag</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN2148"><span class='Ref_To_Local'>newword</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* prefix success */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN597"><span class='Ref_to_Func'>FindWord</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN2138"><span class='Ref_to_Parameter'>Conf</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN2148"><span class='Ref_To_Local'>newword</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN2141"><span class='Ref_To_Local'>prefix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN128"><span class='Ref_to_Member'>aff</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN2153"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN88"><span class='Ref_to_Member'>flag</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN2138"><span class='Ref_to_Parameter'>flag</span></a><span class='Parentheses'>))</span> 
                    <a href="spell.c.html#LN2147"><span class='Ref_To_Local'>cur</span></a> <span class='Operator'>+= </span><a href="spell.c.html#LN2122"><span class='Ref_to_Func'>addToResult</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN2146"><span class='Ref_To_Local'>forms</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN2147"><span class='Ref_To_Local'>cur</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN2148"><span class='Ref_To_Local'>newword</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>} 
</span>        <a href="spell.c.html#LN2151"><span class='Ref_To_Local'>pnode</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN2141"><span class='Ref_To_Local'>prefix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN129"><span class='Ref_to_Member'>node</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Find all other NORMAL forms of the 'word' (check suffix and then 
     * prefix) 
     */ 
</span>    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN2150"><span class='Ref_To_Local'>snode</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN2195"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>baselen</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* find possible suffix */ 
</span>        <a href="spell.c.html#LN2140"><span class='Ref_To_Local'>suffix</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN1989"><span class='Ref_to_Func'>FindAffixes</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN2150"><span class='Ref_To_Local'>snode</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN2138"><span class='Ref_to_Parameter'>word</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN2144"><span class='Ref_To_Local'>wrdlen</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="spell.c.html#LN2142"><span class='Ref_To_Local'>slevel</span></a><span class='Delimiter'>, </span><a href="../../include/tsearch/dicts/spell.h.html#LN115"><span class='Ref_to_Const'>FF_SUFFIX</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="spell.c.html#LN2140"><span class='Ref_To_Local'>suffix</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* foreach suffix check affix */ 
</span>        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN2152"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="spell.c.html#LN2152"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="spell.c.html#LN2140"><span class='Ref_To_Local'>suffix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN127"><span class='Ref_to_Member'>naff</span></a><span class='Delimiter'>; </span><a href="spell.c.html#LN2152"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN2032"><span class='Ref_to_Func'>CheckAffix</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN2138"><span class='Ref_to_Parameter'>word</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN2144"><span class='Ref_To_Local'>wrdlen</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN2140"><span class='Ref_To_Local'>suffix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN128"><span class='Ref_to_Member'>aff</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN2152"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>], </span><a href="spell.c.html#LN2138"><span class='Ref_to_Parameter'>flag</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN2148"><span class='Ref_To_Local'>newword</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="spell.c.html#LN2195"><span class='Ref_To_Local'>baselen</span></a><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* suffix success */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN597"><span class='Ref_to_Func'>FindWord</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN2138"><span class='Ref_to_Parameter'>Conf</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN2148"><span class='Ref_To_Local'>newword</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN2140"><span class='Ref_To_Local'>suffix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN128"><span class='Ref_to_Member'>aff</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN2152"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN88"><span class='Ref_to_Member'>flag</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN2138"><span class='Ref_to_Parameter'>flag</span></a><span class='Parentheses'>))</span> 
                    <a href="spell.c.html#LN2147"><span class='Ref_To_Local'>cur</span></a> <span class='Operator'>+= </span><a href="spell.c.html#LN2122"><span class='Ref_to_Func'>addToResult</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN2146"><span class='Ref_To_Local'>forms</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN2147"><span class='Ref_To_Local'>cur</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN2148"><span class='Ref_To_Local'>newword</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* now we will look changed word with prefixes */ 
</span>                <a href="spell.c.html#LN2151"><span class='Ref_To_Local'>pnode</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN2138"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN185"><span class='Ref_to_Member'>Prefix</span></a><span class='Delimiter'>; 
</span>                <a href="spell.c.html#LN2143"><span class='Ref_To_Local'>plevel</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>                <a href="spell.c.html#LN2145"><span class='Ref_To_Local'>swrdlen</span></a> <span class='Operator'>= </span>strlen<span class='Parentheses'>(</span><a href="spell.c.html#LN2148"><span class='Ref_To_Local'>newword</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN2151"><span class='Ref_To_Local'>pnode</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <a href="spell.c.html#LN2141"><span class='Ref_To_Local'>prefix</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN1989"><span class='Ref_to_Func'>FindAffixes</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN2151"><span class='Ref_To_Local'>pnode</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN2148"><span class='Ref_To_Local'>newword</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN2145"><span class='Ref_To_Local'>swrdlen</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="spell.c.html#LN2143"><span class='Ref_To_Local'>plevel</span></a><span class='Delimiter'>, </span><a href="../../include/tsearch/dicts/spell.h.html#LN116"><span class='Ref_to_Const'>FF_PREFIX</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="spell.c.html#LN2141"><span class='Ref_To_Local'>prefix</span></a><span class='Parentheses'>) 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN2153"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="spell.c.html#LN2153"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>&LT; </span><a href="spell.c.html#LN2141"><span class='Ref_To_Local'>prefix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN127"><span class='Ref_to_Member'>naff</span></a><span class='Delimiter'>; </span><a href="spell.c.html#LN2153"><span class='Ref_To_Local'>j</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>                    <span class='Delimiter'>{ 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN2032"><span class='Ref_to_Func'>CheckAffix</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN2148"><span class='Ref_To_Local'>newword</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN2145"><span class='Ref_To_Local'>swrdlen</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN2141"><span class='Ref_To_Local'>prefix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN128"><span class='Ref_to_Member'>aff</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN2153"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>], </span><a href="spell.c.html#LN2138"><span class='Ref_to_Parameter'>flag</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN2149"><span class='Ref_To_Local'>pnewword</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="spell.c.html#LN2195"><span class='Ref_To_Local'>baselen</span></a><span class='Parentheses'>))</span> 
                        <span class='Delimiter'>{ 
</span>                            <span class='Comment_Multi_Line'>/* prefix success */ 
</span><a name="LN2224"></a>                            <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>ff</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="spell.c.html#LN2141"><span class='Ref_To_Local'>prefix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN128"><span class='Ref_to_Member'>aff</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN2153"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN91"><span class='Ref_to_Member'>flagflags</span></a> <span class='Operator'>& </span><a href="spell.c.html#LN2140"><span class='Ref_To_Local'>suffix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN128"><span class='Ref_to_Member'>aff</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN2152"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN91"><span class='Ref_to_Member'>flagflags</span></a> <span class='Operator'>& </span><a href="../../include/tsearch/dicts/spell.h.html#LN109"><span class='Ref_to_Const'>FF_CROSSPRODUCT</span></a><span class='Parentheses'>) </span><span class='Operator'>? 
</span>                            <a href="spell.c.html#LN192"><span class='Ref_to_Global_Var'>VoidString</span></a> <span class='Operator'>: </span><a href="spell.c.html#LN2141"><span class='Ref_To_Local'>prefix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN128"><span class='Ref_to_Member'>aff</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN2153"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN88"><span class='Ref_to_Member'>flag</span></a><span class='Delimiter'>; 
</span> 
                            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN597"><span class='Ref_to_Func'>FindWord</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN2138"><span class='Ref_to_Parameter'>Conf</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN2149"><span class='Ref_To_Local'>pnewword</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN2224"><span class='Ref_To_Local'>ff</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN2138"><span class='Ref_to_Parameter'>flag</span></a><span class='Parentheses'>))</span> 
                                <a href="spell.c.html#LN2147"><span class='Ref_To_Local'>cur</span></a> <span class='Operator'>+= </span><a href="spell.c.html#LN2122"><span class='Ref_to_Func'>addToResult</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN2146"><span class='Ref_To_Local'>forms</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN2147"><span class='Ref_To_Local'>cur</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN2149"><span class='Ref_To_Local'>pnewword</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Delimiter'>} 
</span>                    <span class='Delimiter'>} 
</span>                    <a href="spell.c.html#LN2151"><span class='Ref_To_Local'>pnode</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN2141"><span class='Ref_To_Local'>prefix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN129"><span class='Ref_to_Member'>node</span></a><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if CheckAffix(word,wrdle... &raquo; </span> 
        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;suffix-&GT;naff;i+... &raquo; </span> 
 
        <a href="spell.c.html#LN2150"><span class='Ref_To_Local'>snode</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN2140"><span class='Ref_To_Local'>suffix</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN129"><span class='Ref_to_Member'>node</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end while snode &raquo; </span> 
 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN2147"><span class='Ref_To_Local'>cur</span></a> <span class='Operator'>== </span><a href="spell.c.html#LN2146"><span class='Ref_To_Local'>forms</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN2146"><span class='Ref_To_Local'>forms</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>return</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN2146"><span class='Ref_To_Local'>forms</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end NormalizeSubWord &raquo; </span> 
 
<a name="LN2247"></a><span class='Control'>typedef</span> <span class='Control'>struct</span> <span class='Declare_Struct'>SplitVar</span> 
<span class='Delimiter'>{ 
</span><a name="LN2249"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>nstem</span><span class='Delimiter'>; 
</span><a name="LN2250"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>lenstem</span><span class='Delimiter'>; 
</span><a name="LN2251"></a>    <span class='Keyword'>char</span>      <span class='Operator'>**</span><span class='Declare_Member'>stem</span><span class='Delimiter'>; 
</span><a name="LN2252"></a>    <span class='Control'>struct</span> <a href="spell.c.html#LN2247"><span class='Ref_to_Struct'>SplitVar</span></a> <span class='Operator'>*</span><span class='Declare_Member'>next</span><span class='Delimiter'>; 
</span><a name="LN2253"></a>} <span class='Declare_Typedef'>SplitVar</span><span class='Delimiter'>; 
</span> 
<span class='Keyword'>static int 
</span><a name="LN2256"></a><span class='Declare_Function'>CheckCompoundAffixes</span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN141"><span class='Ref_to_Typedef'>CMPDAffix</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>ptr</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>word</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>len</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>CheckInPlace</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2258"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>issuffix</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* in case CompoundAffix is null: */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN2256"><span class='Ref_to_Parameter'>ptr</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN2256"><span class='Ref_to_Parameter'>CheckInPlace</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>while</span> <span class='Parentheses'>((</span><span class='Operator'>*</span><a href="spell.c.html#LN2256"><span class='Ref_to_Parameter'>ptr</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN143"><span class='Ref_to_Member'>affix</span></a><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN2256"><span class='Ref_to_Parameter'>len</span></a> <span class='Operator'>&GT; </span><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN2256"><span class='Ref_to_Parameter'>ptr</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN144"><span class='Ref_to_Member'>len</span></a> <span class='Operator'>&& </span>strncmp<span class='Parentheses'>((</span><span class='Operator'>*</span><a href="spell.c.html#LN2256"><span class='Ref_to_Parameter'>ptr</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN143"><span class='Ref_to_Member'>affix</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN2256"><span class='Ref_to_Parameter'>word</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN2256"><span class='Ref_to_Parameter'>ptr</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN144"><span class='Ref_to_Member'>len</span></a><span class='Parentheses'>)</span> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <span class='Delimiter'>{ 
</span>                <a href="spell.c.html#LN2256"><span class='Ref_to_Parameter'>len</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN2256"><span class='Ref_to_Parameter'>ptr</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN144"><span class='Ref_to_Member'>len</span></a><span class='Delimiter'>; 
</span>                <a href="spell.c.html#LN2258"><span class='Ref_To_Local'>issuffix</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN2256"><span class='Ref_to_Parameter'>ptr</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN145"><span class='Ref_to_Member'>issuffix</span></a><span class='Delimiter'>; 
</span>                <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN2256"><span class='Ref_to_Parameter'>ptr</span></a><span class='Parentheses'>)</span><span class='Operator'>++</span><span class='Delimiter'>; 
</span>                <span class='Control'>return</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN2258"><span class='Ref_To_Local'>issuffix</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><a href="spell.c.html#LN2256"><span class='Ref_to_Parameter'>len</span></a> <span class='Operator'>: </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN2256"><span class='Ref_to_Parameter'>ptr</span></a><span class='Parentheses'>)</span><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span><a name="LN2280"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>affbegin</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>while</span> <span class='Parentheses'>((</span><span class='Operator'>*</span><a href="spell.c.html#LN2256"><span class='Ref_to_Parameter'>ptr</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN143"><span class='Ref_to_Member'>affix</span></a><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN2256"><span class='Ref_to_Parameter'>len</span></a> <span class='Operator'>&GT; </span><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN2256"><span class='Ref_to_Parameter'>ptr</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN144"><span class='Ref_to_Member'>len</span></a> <span class='Operator'>&& </span><span class='Parentheses'>(</span><a href="spell.c.html#LN2280"><span class='Ref_To_Local'>affbegin</span></a> <span class='Operator'>= </span>strstr<span class='Parentheses'>(</span><a href="spell.c.html#LN2256"><span class='Ref_to_Parameter'>word</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN2256"><span class='Ref_to_Parameter'>ptr</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN143"><span class='Ref_to_Member'>affix</span></a><span class='Parentheses'>))</span> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
            <span class='Delimiter'>{ 
</span>                <a href="spell.c.html#LN2256"><span class='Ref_to_Parameter'>len</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN2256"><span class='Ref_to_Parameter'>ptr</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN144"><span class='Ref_to_Member'>len</span></a> <span class='Operator'>+ </span><span class='Parentheses'>(</span><a href="spell.c.html#LN2280"><span class='Ref_To_Local'>affbegin</span></a> <span class='Operator'>- </span><a href="spell.c.html#LN2256"><span class='Ref_to_Parameter'>word</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="spell.c.html#LN2258"><span class='Ref_To_Local'>issuffix</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN2256"><span class='Ref_to_Parameter'>ptr</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN145"><span class='Ref_to_Member'>issuffix</span></a><span class='Delimiter'>; 
</span>                <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN2256"><span class='Ref_to_Parameter'>ptr</span></a><span class='Parentheses'>)</span><span class='Operator'>++</span><span class='Delimiter'>; 
</span>                <span class='Control'>return</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN2258"><span class='Ref_To_Local'>issuffix</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><a href="spell.c.html#LN2256"><span class='Ref_to_Parameter'>len</span></a> <span class='Operator'>: </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN2256"><span class='Ref_to_Parameter'>ptr</span></a><span class='Parentheses'>)</span><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end CheckCompoundAffixes &raquo; </span> 
 
<span class='Keyword'>static </span><a href="spell.c.html#LN2247"><span class='Ref_to_Struct'>SplitVar</span></a> <span class='Operator'>* 
</span><a name="LN2298"></a><span class='Declare_Function'>CopyVar</span><span class='Parentheses'>(</span><a href="spell.c.html#LN2247"><span class='Ref_to_Struct'>SplitVar</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>s</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>makedup</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2300"></a>    <a href="spell.c.html#LN2247"><span class='Ref_to_Struct'>SplitVar</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>v</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="spell.c.html#LN2247"><span class='Ref_to_Struct'>SplitVar</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="spell.c.html#LN2247"><span class='Ref_to_Struct'>SplitVar</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="spell.c.html#LN2300"><span class='Ref_To_Local'>v</span></a><span class='Operator'>-&GT;</span><a href="spell.c.html#LN2252"><span class='Ref_to_Member'>next</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN2298"><span class='Ref_to_Parameter'>s</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN2305"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
        <a href="spell.c.html#LN2300"><span class='Ref_To_Local'>v</span></a><span class='Operator'>-&GT;</span><a href="spell.c.html#LN2250"><span class='Ref_to_Member'>lenstem</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN2298"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="spell.c.html#LN2250"><span class='Ref_to_Member'>lenstem</span></a><span class='Delimiter'>; 
</span>        <a href="spell.c.html#LN2300"><span class='Ref_To_Local'>v</span></a><span class='Operator'>-&GT;</span><a href="spell.c.html#LN2251"><span class='Ref_to_Member'>stem</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>**</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="spell.c.html#LN2300"><span class='Ref_To_Local'>v</span></a><span class='Operator'>-&GT;</span><a href="spell.c.html#LN2250"><span class='Ref_to_Member'>lenstem</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="spell.c.html#LN2300"><span class='Ref_To_Local'>v</span></a><span class='Operator'>-&GT;</span><a href="spell.c.html#LN2249"><span class='Ref_to_Member'>nstem</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN2298"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="spell.c.html#LN2249"><span class='Ref_to_Member'>nstem</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN2305"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="spell.c.html#LN2305"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="spell.c.html#LN2298"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="spell.c.html#LN2249"><span class='Ref_to_Member'>nstem</span></a><span class='Delimiter'>; </span><a href="spell.c.html#LN2305"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>            <a href="spell.c.html#LN2300"><span class='Ref_To_Local'>v</span></a><span class='Operator'>-&GT;</span><a href="spell.c.html#LN2251"><span class='Ref_to_Member'>stem</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN2305"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='Parentheses'>(</span><a href="spell.c.html#LN2298"><span class='Ref_to_Parameter'>makedup</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><a href="../../include/common/fe_memutils.h.html#LN32"><span class='Ref_to_Proto'>pstrdup</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN2298"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="spell.c.html#LN2251"><span class='Ref_to_Member'>stem</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN2305"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) </span><span class='Operator'>: </span><a href="spell.c.html#LN2298"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="spell.c.html#LN2251"><span class='Ref_to_Member'>stem</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN2305"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="spell.c.html#LN2300"><span class='Ref_To_Local'>v</span></a><span class='Operator'>-&GT;</span><a href="spell.c.html#LN2250"><span class='Ref_to_Member'>lenstem</span></a> <span class='Operator'>= </span><span class='Number'>16</span><span class='Delimiter'>; 
</span>        <a href="spell.c.html#LN2300"><span class='Ref_To_Local'>v</span></a><span class='Operator'>-&GT;</span><a href="spell.c.html#LN2251"><span class='Ref_to_Member'>stem</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>**</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="spell.c.html#LN2300"><span class='Ref_To_Local'>v</span></a><span class='Operator'>-&GT;</span><a href="spell.c.html#LN2250"><span class='Ref_to_Member'>lenstem</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="spell.c.html#LN2300"><span class='Ref_To_Local'>v</span></a><span class='Operator'>-&GT;</span><a href="spell.c.html#LN2249"><span class='Ref_to_Member'>nstem</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>return</span> <a href="spell.c.html#LN2300"><span class='Ref_To_Local'>v</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end CopyVar &raquo; </span> 
 
<span class='Keyword'>static void 
</span><a name="LN2323"></a><span class='Declare_Function'>AddStem</span><span class='Parentheses'>(</span><a href="spell.c.html#LN2247"><span class='Ref_to_Struct'>SplitVar</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>v</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>word</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN2323"><span class='Ref_to_Parameter'>v</span></a><span class='Operator'>-&GT;</span><a href="spell.c.html#LN2249"><span class='Ref_to_Member'>nstem</span></a> <span class='Operator'>&GT;= </span><a href="spell.c.html#LN2323"><span class='Ref_to_Parameter'>v</span></a><span class='Operator'>-&GT;</span><a href="spell.c.html#LN2250"><span class='Ref_to_Member'>lenstem</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="spell.c.html#LN2323"><span class='Ref_to_Parameter'>v</span></a><span class='Operator'>-&GT;</span><a href="spell.c.html#LN2250"><span class='Ref_to_Member'>lenstem</span></a> <span class='Operator'>*= </span><span class='Number'>2</span><span class='Delimiter'>; 
</span>        <a href="spell.c.html#LN2323"><span class='Ref_to_Parameter'>v</span></a><span class='Operator'>-&GT;</span><a href="spell.c.html#LN2251"><span class='Ref_to_Member'>stem</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>**</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN36"><span class='Ref_to_Proto'>repalloc</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN2323"><span class='Ref_to_Parameter'>v</span></a><span class='Operator'>-&GT;</span><a href="spell.c.html#LN2251"><span class='Ref_to_Member'>stem</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="spell.c.html#LN2323"><span class='Ref_to_Parameter'>v</span></a><span class='Operator'>-&GT;</span><a href="spell.c.html#LN2250"><span class='Ref_to_Member'>lenstem</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="spell.c.html#LN2323"><span class='Ref_to_Parameter'>v</span></a><span class='Operator'>-&GT;</span><a href="spell.c.html#LN2251"><span class='Ref_to_Member'>stem</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN2323"><span class='Ref_to_Parameter'>v</span></a><span class='Operator'>-&GT;</span><a href="spell.c.html#LN2249"><span class='Ref_to_Member'>nstem</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="spell.c.html#LN2323"><span class='Ref_to_Parameter'>word</span></a><span class='Delimiter'>; 
</span>    <a href="spell.c.html#LN2323"><span class='Ref_to_Parameter'>v</span></a><span class='Operator'>-&GT;</span><a href="spell.c.html#LN2249"><span class='Ref_to_Member'>nstem</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>static </span><a href="spell.c.html#LN2247"><span class='Ref_to_Struct'>SplitVar</span></a> <span class='Operator'>* 
</span><a name="LN2336"></a><span class='Declare_Function'>SplitToVariants</span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN178"><span class='Ref_to_Typedef'>IspellDict</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>Conf</span><span class='Delimiter'>, </span><a href="../../include/tsearch/dicts/spell.h.html#LN49"><span class='Ref_to_Struct'>SPNode</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>snode</span><span class='Delimiter'>, </span><a href="spell.c.html#LN2247"><span class='Ref_to_Struct'>SplitVar</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>orig</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>word</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>wordlen</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>startpos</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>minpos</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2338"></a>    <a href="spell.c.html#LN2247"><span class='Ref_to_Struct'>SplitVar</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>var</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN2339"></a>    <a href="../../include/tsearch/dicts/spell.h.html#LN26"><span class='Ref_to_Typedef'>SPNodeData</span></a> <span class='Operator'>*</span><span class='Declare_Local'>StopLow</span><span class='Delimiter'>, 
</span><a name="LN2340"></a>               <span class='Operator'>*</span><span class='Declare_Local'>StopHigh</span><span class='Delimiter'>, 
</span><a name="LN2341"></a>               <span class='Operator'>*</span><span class='Declare_Local'>StopMiddle</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN2342"></a>    <a href="../../include/tsearch/dicts/spell.h.html#LN49"><span class='Ref_to_Struct'>SPNode</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>node</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="spell.c.html#LN2336"><span class='Ref_to_Parameter'>snode</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><a href="spell.c.html#LN2336"><span class='Ref_to_Parameter'>snode</span></a> <span class='Operator'>: </span><a href="spell.c.html#LN2336"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN187"><span class='Ref_to_Member'>Dictionary</span></a><span class='Delimiter'>; 
</span><a name="LN2343"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>level</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="spell.c.html#LN2336"><span class='Ref_to_Parameter'>snode</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><a href="spell.c.html#LN2336"><span class='Ref_to_Parameter'>minpos</span></a> <span class='Operator'>: </span><a href="spell.c.html#LN2336"><span class='Ref_to_Parameter'>startpos</span></a><span class='Delimiter'>;</span>    <span class='Comment_Multi_Line'>/* recursive 
                                                         * minpos==level */ 
</span><a name="LN2345"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>lenaff</span><span class='Delimiter'>; 
</span><a name="LN2346"></a>    <a href="../../include/tsearch/dicts/spell.h.html#LN141"><span class='Ref_to_Typedef'>CMPDAffix</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>caff</span><span class='Delimiter'>; 
</span><a name="LN2347"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>notprobed</span><span class='Delimiter'>; 
</span><a name="LN2348"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>compoundflag</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <a href="spell.c.html#LN2347"><span class='Ref_To_Local'>notprobed</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN2336"><span class='Ref_to_Parameter'>wordlen</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    memset<span class='Parentheses'>(</span><a href="spell.c.html#LN2347"><span class='Ref_To_Local'>notprobed</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="spell.c.html#LN2336"><span class='Ref_to_Parameter'>wordlen</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="spell.c.html#LN2338"><span class='Ref_To_Local'>var</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN2297"><span class='Ref_to_Func'>CopyVar</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN2336"><span class='Ref_to_Parameter'>orig</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN2343"><span class='Ref_To_Local'>level</span></a> <span class='Operator'>&LT; </span><a href="spell.c.html#LN2336"><span class='Ref_to_Parameter'>wordlen</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* find word with epenthetic or/and compound affix */ 
</span>        <a href="spell.c.html#LN2346"><span class='Ref_To_Local'>caff</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN2336"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN194"><span class='Ref_to_Member'>CompoundAffix</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN2343"><span class='Ref_To_Local'>level</span></a> <span class='Operator'>&GT; </span><a href="spell.c.html#LN2336"><span class='Ref_to_Parameter'>startpos</span></a> <span class='Operator'>&& </span><span class='Parentheses'>(</span><a href="spell.c.html#LN2345"><span class='Ref_To_Local'>lenaff</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN2255"><span class='Ref_to_Func'>CheckCompoundAffixes</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="spell.c.html#LN2346"><span class='Ref_To_Local'>caff</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN2336"><span class='Ref_to_Parameter'>word</span></a> <span class='Operator'>+ </span><a href="spell.c.html#LN2343"><span class='Ref_To_Local'>level</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN2336"><span class='Ref_to_Parameter'>wordlen</span></a> <span class='Operator'>- </span><a href="spell.c.html#LN2343"><span class='Ref_To_Local'>level</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="spell.c.html#LN2342"><span class='Ref_To_Local'>node</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='Boolean'>true </span><span class='Operator'>: </span><span class='Boolean'>false</span><span class='Parentheses'>))</span> <span class='Operator'>&GT;= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * there is one of compound affixes, so check word for existings 
             */ 
</span><a name="LN2363"></a>            <span class='Keyword'>char</span>        <span class='Declare_Local'>buf</span><span class='Delimiter'>[</span><a href="spell.c.html#LN186"><span class='Ref_to_Const'>MAXNORMLEN</span></a><span class='Delimiter'>]; 
</span><a name="LN2364"></a>            <span class='Keyword'>char</span>      <span class='Operator'>**</span><span class='Declare_Local'>subres</span><span class='Delimiter'>; 
</span> 
            <a href="spell.c.html#LN2345"><span class='Ref_To_Local'>lenaff</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN2343"><span class='Ref_To_Local'>level</span></a> <span class='Operator'>- </span><a href="spell.c.html#LN2336"><span class='Ref_to_Parameter'>startpos</span></a> <span class='Operator'>+ </span><a href="spell.c.html#LN2345"><span class='Ref_To_Local'>lenaff</span></a><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="spell.c.html#LN2347"><span class='Ref_To_Local'>notprobed</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN2336"><span class='Ref_to_Parameter'>startpos</span></a> <span class='Operator'>+ </span><a href="spell.c.html#LN2345"><span class='Ref_To_Local'>lenaff</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>) 
</span>                <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN2343"><span class='Ref_To_Local'>level</span></a> <span class='Operator'>+ </span><a href="spell.c.html#LN2345"><span class='Ref_To_Local'>lenaff</span></a> <span class='Operator'>- </span><span class='Number'>1</span> <span class='Operator'>&LT;= </span><a href="spell.c.html#LN2336"><span class='Ref_to_Parameter'>minpos</span></a><span class='Parentheses'>) 
</span>                <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN2345"><span class='Ref_To_Local'>lenaff</span></a> <span class='Operator'>&GT;= </span><a href="spell.c.html#LN186"><span class='Ref_to_Const'>MAXNORMLEN</span></a><span class='Parentheses'>) 
</span>                <span class='Control'>continue</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* skip too big value */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN2345"><span class='Ref_To_Local'>lenaff</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                memcpy<span class='Parentheses'>(</span><a href="spell.c.html#LN2363"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN2336"><span class='Ref_to_Parameter'>word</span></a> <span class='Operator'>+ </span><a href="spell.c.html#LN2336"><span class='Ref_to_Parameter'>startpos</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN2345"><span class='Ref_To_Local'>lenaff</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="spell.c.html#LN2363"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN2345"><span class='Ref_To_Local'>lenaff</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN2343"><span class='Ref_To_Local'>level</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                <a href="spell.c.html#LN2348"><span class='Ref_To_Local'>compoundflag</span></a> <span class='Operator'>= </span><a href="../../include/tsearch/dicts/spell.h.html#LN42"><span class='Ref_to_Const'>FF_COMPOUNDBEGIN</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN2343"><span class='Ref_To_Local'>level</span></a> <span class='Operator'>== </span><a href="spell.c.html#LN2336"><span class='Ref_to_Parameter'>wordlen</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>) 
</span>                <a href="spell.c.html#LN2348"><span class='Ref_To_Local'>compoundflag</span></a> <span class='Operator'>= </span><a href="../../include/tsearch/dicts/spell.h.html#LN44"><span class='Ref_to_Const'>FF_COMPOUNDLAST</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
                <a href="spell.c.html#LN2348"><span class='Ref_To_Local'>compoundflag</span></a> <span class='Operator'>= </span><a href="../../include/tsearch/dicts/spell.h.html#LN43"><span class='Ref_to_Const'>FF_COMPOUNDMIDDLE</span></a><span class='Delimiter'>; 
</span>            <a href="spell.c.html#LN2364"><span class='Ref_To_Local'>subres</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN2137"><span class='Ref_to_Func'>NormalizeSubWord</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN2336"><span class='Ref_to_Parameter'>Conf</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN2363"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN2348"><span class='Ref_To_Local'>compoundflag</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN2364"><span class='Ref_To_Local'>subres</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* Yes, it was a word from dictionary */ 
</span><a name="LN2390"></a>                <a href="spell.c.html#LN2247"><span class='Ref_to_Struct'>SplitVar</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>new</span> <span class='Operator'>= </span><a href="spell.c.html#LN2297"><span class='Ref_to_Func'>CopyVar</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN2338"><span class='Ref_To_Local'>var</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2391"></a>                <a href="spell.c.html#LN2247"><span class='Ref_to_Struct'>SplitVar</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>ptr</span> <span class='Operator'>= </span><a href="spell.c.html#LN2338"><span class='Ref_To_Local'>var</span></a><span class='Delimiter'>; 
</span><a name="LN2392"></a>                <span class='Keyword'>char</span>      <span class='Operator'>**</span><span class='Declare_Local'>sptr</span> <span class='Operator'>= </span><a href="spell.c.html#LN2364"><span class='Ref_To_Local'>subres</span></a><span class='Delimiter'>; 
</span> 
                <a href="spell.c.html#LN2347"><span class='Ref_To_Local'>notprobed</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN2336"><span class='Ref_to_Parameter'>startpos</span></a> <span class='Operator'>+ </span><a href="spell.c.html#LN2345"><span class='Ref_To_Local'>lenaff</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>while</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN2392"><span class='Ref_To_Local'>sptr</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <a href="spell.c.html#LN2322"><span class='Ref_to_Func'>AddStem</span></a><span class='Parentheses'>(</span><span class='Control'>new</span><span class='Delimiter'>, </span><span class='Operator'>*</span><a href="spell.c.html#LN2392"><span class='Ref_To_Local'>sptr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="spell.c.html#LN2392"><span class='Ref_To_Local'>sptr</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <a href="../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN2364"><span class='Ref_To_Local'>subres</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN2391"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>-&GT;</span><a href="spell.c.html#LN2252"><span class='Ref_to_Member'>next</span></a><span class='Parentheses'>) 
</span>                    <a href="spell.c.html#LN2391"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN2391"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>-&GT;</span><a href="spell.c.html#LN2252"><span class='Ref_to_Member'>next</span></a><span class='Delimiter'>; 
</span>                <a href="spell.c.html#LN2391"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>-&GT;</span><a href="spell.c.html#LN2252"><span class='Ref_to_Member'>next</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN2335"><span class='Ref_to_Func'>SplitToVariants</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN2336"><span class='Ref_to_Parameter'>Conf</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Control'>new</span><span class='Delimiter'>, </span><a href="spell.c.html#LN2336"><span class='Ref_to_Parameter'>word</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN2336"><span class='Ref_to_Parameter'>wordlen</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN2336"><span class='Ref_to_Parameter'>startpos</span></a> <span class='Operator'>+ </span><a href="spell.c.html#LN2345"><span class='Ref_To_Local'>lenaff</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN2336"><span class='Ref_to_Parameter'>startpos</span></a> <span class='Operator'>+ </span><a href="spell.c.html#LN2345"><span class='Ref_To_Local'>lenaff</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <a href="../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><span class='Control'>new</span><span class='Operator'>-&GT;</span><a href="spell.c.html#LN2251"><span class='Ref_to_Member'>stem</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><span class='Control'>new</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if subres &raquo; </span> 
        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end while level&GT;startpos&&(lena... &raquo; </span> 
 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="spell.c.html#LN2342"><span class='Ref_To_Local'>node</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <a href="spell.c.html#LN2339"><span class='Ref_To_Local'>StopLow</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN2342"><span class='Ref_To_Local'>node</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN52"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>; 
</span>        <a href="spell.c.html#LN2340"><span class='Ref_To_Local'>StopHigh</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN2342"><span class='Ref_To_Local'>node</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN52"><span class='Ref_to_Member'>data</span></a> <span class='Operator'>+ </span><a href="spell.c.html#LN2342"><span class='Ref_To_Local'>node</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN51"><span class='Ref_to_Member'>length</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN2339"><span class='Ref_To_Local'>StopLow</span></a> <span class='Operator'>&LT; </span><a href="spell.c.html#LN2340"><span class='Ref_To_Local'>StopHigh</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="spell.c.html#LN2341"><span class='Ref_To_Local'>StopMiddle</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN2339"><span class='Ref_To_Local'>StopLow</span></a> <span class='Operator'>+ </span><span class='Parentheses'>((</span><a href="spell.c.html#LN2340"><span class='Ref_To_Local'>StopHigh</span></a> <span class='Operator'>- </span><a href="spell.c.html#LN2339"><span class='Ref_To_Local'>StopLow</span></a><span class='Parentheses'>) </span><span class='Operator'>&GT;&GT; </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN2341"><span class='Ref_To_Local'>StopMiddle</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN28"><span class='Ref_to_Member'>val</span></a> <span class='Operator'>== </span><span class='Parentheses'>((</span><a href="../../include/c.h.html#LN265"><span class='Ref_to_Typedef'>uint8</span></a> <span class='Operator'>*</span><span class='Parentheses'>) (</span><a href="spell.c.html#LN2336"><span class='Ref_to_Parameter'>word</span></a><span class='Parentheses'>))</span><span class='Delimiter'>[</span><a href="spell.c.html#LN2343"><span class='Ref_To_Local'>level</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span> 
                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN2341"><span class='Ref_To_Local'>StopMiddle</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN28"><span class='Ref_to_Member'>val</span></a> <span class='Operator'>&LT; </span><span class='Parentheses'>((</span><a href="../../include/c.h.html#LN265"><span class='Ref_to_Typedef'>uint8</span></a> <span class='Operator'>*</span><span class='Parentheses'>) (</span><a href="spell.c.html#LN2336"><span class='Ref_to_Parameter'>word</span></a><span class='Parentheses'>))</span><span class='Delimiter'>[</span><a href="spell.c.html#LN2343"><span class='Ref_To_Local'>level</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span> 
                <a href="spell.c.html#LN2339"><span class='Ref_To_Local'>StopLow</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN2341"><span class='Ref_To_Local'>StopMiddle</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
                <a href="spell.c.html#LN2340"><span class='Ref_To_Local'>StopHigh</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN2341"><span class='Ref_To_Local'>StopMiddle</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN2339"><span class='Ref_To_Local'>StopLow</span></a> <span class='Operator'>&LT; </span><a href="spell.c.html#LN2340"><span class='Ref_To_Local'>StopHigh</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN2336"><span class='Ref_to_Parameter'>startpos</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                <a href="spell.c.html#LN2348"><span class='Ref_To_Local'>compoundflag</span></a> <span class='Operator'>= </span><a href="../../include/tsearch/dicts/spell.h.html#LN42"><span class='Ref_to_Const'>FF_COMPOUNDBEGIN</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN2343"><span class='Ref_To_Local'>level</span></a> <span class='Operator'>== </span><a href="spell.c.html#LN2336"><span class='Ref_to_Parameter'>wordlen</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>) 
</span>                <a href="spell.c.html#LN2348"><span class='Ref_To_Local'>compoundflag</span></a> <span class='Operator'>= </span><a href="../../include/tsearch/dicts/spell.h.html#LN44"><span class='Ref_to_Const'>FF_COMPOUNDLAST</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
                <a href="spell.c.html#LN2348"><span class='Ref_To_Local'>compoundflag</span></a> <span class='Operator'>= </span><a href="../../include/tsearch/dicts/spell.h.html#LN43"><span class='Ref_to_Const'>FF_COMPOUNDMIDDLE</span></a><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* find infinitive */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN2341"><span class='Ref_To_Local'>StopMiddle</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN29"><span class='Ref_to_Member'>isword</span></a> <span class='Operator'>&& 
</span>                <span class='Parentheses'>(</span><a href="spell.c.html#LN2341"><span class='Ref_To_Local'>StopMiddle</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN31"><span class='Ref_to_Member'>compoundflag</span></a> <span class='Operator'>& </span><a href="spell.c.html#LN2348"><span class='Ref_To_Local'>compoundflag</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>                <a href="spell.c.html#LN2347"><span class='Ref_To_Local'>notprobed</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN2343"><span class='Ref_To_Local'>level</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* ok, we found full compoundallowed word */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN2343"><span class='Ref_To_Local'>level</span></a> <span class='Operator'>&GT; </span><a href="spell.c.html#LN2336"><span class='Ref_to_Parameter'>minpos</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Comment_Multi_Line'>/* and its length more than minimal */ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN2336"><span class='Ref_to_Parameter'>wordlen</span></a> <span class='Operator'>== </span><a href="spell.c.html#LN2343"><span class='Ref_To_Local'>level</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>) 
</span>                    <span class='Delimiter'>{ 
</span>                        <span class='Comment_Multi_Line'>/* well, it was last word */ 
</span>                        <a href="spell.c.html#LN2322"><span class='Ref_to_Func'>AddStem</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN2338"><span class='Ref_To_Local'>var</span></a><span class='Delimiter'>, </span><a href="../../include/utils/palloc.h.html#LN127"><span class='Ref_to_Proto'>pnstrdup</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN2336"><span class='Ref_to_Parameter'>word</span></a> <span class='Operator'>+ </span><a href="spell.c.html#LN2336"><span class='Ref_to_Parameter'>startpos</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN2336"><span class='Ref_to_Parameter'>wordlen</span></a> <span class='Operator'>- </span><a href="spell.c.html#LN2336"><span class='Ref_to_Parameter'>startpos</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                        <a href="../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN2347"><span class='Ref_To_Local'>notprobed</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>return</span> <a href="spell.c.html#LN2338"><span class='Ref_To_Local'>var</span></a><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                    <span class='Control'>else</span> 
                    <span class='Delimiter'>{ 
</span>                        <span class='Comment_Multi_Line'>/* then we will search more big word at the same point */ 
</span><a name="LN2456"></a>                        <a href="spell.c.html#LN2247"><span class='Ref_to_Struct'>SplitVar</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>ptr</span> <span class='Operator'>= </span><a href="spell.c.html#LN2338"><span class='Ref_To_Local'>var</span></a><span class='Delimiter'>; 
</span> 
                        <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN2456"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>-&GT;</span><a href="spell.c.html#LN2252"><span class='Ref_to_Member'>next</span></a><span class='Parentheses'>) 
</span>                            <a href="spell.c.html#LN2456"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN2456"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>-&GT;</span><a href="spell.c.html#LN2252"><span class='Ref_to_Member'>next</span></a><span class='Delimiter'>; 
</span>                        <a href="spell.c.html#LN2456"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>-&GT;</span><a href="spell.c.html#LN2252"><span class='Ref_to_Member'>next</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN2335"><span class='Ref_to_Func'>SplitToVariants</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN2336"><span class='Ref_to_Parameter'>Conf</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN2342"><span class='Ref_To_Local'>node</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN2338"><span class='Ref_To_Local'>var</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN2336"><span class='Ref_to_Parameter'>word</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN2336"><span class='Ref_to_Parameter'>wordlen</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN2336"><span class='Ref_to_Parameter'>startpos</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN2343"><span class='Ref_To_Local'>level</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Comment_Multi_Line'>/* we can find next word */ 
</span>                        <a href="spell.c.html#LN2343"><span class='Ref_To_Local'>level</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>                        <a href="spell.c.html#LN2322"><span class='Ref_to_Func'>AddStem</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN2338"><span class='Ref_To_Local'>var</span></a><span class='Delimiter'>, </span><a href="../../include/utils/palloc.h.html#LN127"><span class='Ref_to_Proto'>pnstrdup</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN2336"><span class='Ref_to_Parameter'>word</span></a> <span class='Operator'>+ </span><a href="spell.c.html#LN2336"><span class='Ref_to_Parameter'>startpos</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN2343"><span class='Ref_To_Local'>level</span></a> <span class='Operator'>- </span><a href="spell.c.html#LN2336"><span class='Ref_to_Parameter'>startpos</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                        <a href="spell.c.html#LN2342"><span class='Ref_To_Local'>node</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN2336"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN187"><span class='Ref_to_Member'>Dictionary</span></a><span class='Delimiter'>; 
</span>                        <a href="spell.c.html#LN2336"><span class='Ref_to_Parameter'>startpos</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN2343"><span class='Ref_To_Local'>level</span></a><span class='Delimiter'>; 
</span>                        <span class='Control'>continue</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if level&GT;minpos &raquo; </span> 
            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if StopMiddle-&GT;isword&&(... &raquo; </span> 
            <a href="spell.c.html#LN2342"><span class='Ref_To_Local'>node</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN2341"><span class='Ref_To_Local'>StopMiddle</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN34"><span class='Ref_to_Member'>node</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if StopLow&LT;StopHigh &raquo; </span> 
        <span class='Control'>else</span> 
            <a href="spell.c.html#LN2342"><span class='Ref_To_Local'>node</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>        <a href="spell.c.html#LN2343"><span class='Ref_To_Local'>level</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end while level&LT;wordlen &raquo; </span> 
 
    <a href="spell.c.html#LN2322"><span class='Ref_to_Func'>AddStem</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN2338"><span class='Ref_To_Local'>var</span></a><span class='Delimiter'>, </span><a href="../../include/utils/palloc.h.html#LN127"><span class='Ref_to_Proto'>pnstrdup</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN2336"><span class='Ref_to_Parameter'>word</span></a> <span class='Operator'>+ </span><a href="spell.c.html#LN2336"><span class='Ref_to_Parameter'>startpos</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN2336"><span class='Ref_to_Parameter'>wordlen</span></a> <span class='Operator'>- </span><a href="spell.c.html#LN2336"><span class='Ref_to_Parameter'>startpos</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN2347"><span class='Ref_To_Local'>notprobed</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="spell.c.html#LN2338"><span class='Ref_To_Local'>var</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end SplitToVariants &raquo; </span> 
 
<span class='Keyword'>static void 
</span><a name="LN2483"></a><span class='Declare_Function'>addNorm</span><span class='Parentheses'>(</span><a href="../../include/tsearch/ts_public.h.html#LN87"><span class='Ref_to_Typedef'>TSLexeme</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>lres</span><span class='Delimiter'>, </span><a href="../../include/tsearch/ts_public.h.html#LN87"><span class='Ref_to_Typedef'>TSLexeme</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>lcur</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>word</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>flags</span><span class='Delimiter'>, </span><a href="../../include/c.h.html#LN266"><span class='Ref_to_Typedef'>uint16</span></a> <span class='Declare_Parameter'>NVariant</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN2483"><span class='Ref_to_Parameter'>lres</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Operator'>*</span><a href="spell.c.html#LN2483"><span class='Ref_to_Parameter'>lcur</span></a> <span class='Operator'>= *</span><a href="spell.c.html#LN2483"><span class='Ref_to_Parameter'>lres</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/tsearch/ts_public.h.html#LN87"><span class='Ref_to_Typedef'>TSLexeme</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN185"><span class='Ref_to_Const'>MAX_NORM</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/tsearch/ts_public.h.html#LN87"><span class='Ref_to_Typedef'>TSLexeme</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN2483"><span class='Ref_to_Parameter'>lcur</span></a> <span class='Operator'>- *</span><a href="spell.c.html#LN2483"><span class='Ref_to_Parameter'>lres</span></a> <span class='Operator'>&LT; </span><a href="spell.c.html#LN185"><span class='Ref_to_Const'>MAX_NORM</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN2483"><span class='Ref_to_Parameter'>lcur</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span><a href="../../include/tsearch/ts_public.h.html#LN110"><span class='Ref_to_Member'>lexeme</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN2483"><span class='Ref_to_Parameter'>word</span></a><span class='Delimiter'>; 
</span>        <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN2483"><span class='Ref_to_Parameter'>lcur</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span><a href="../../include/tsearch/ts_public.h.html#LN108"><span class='Ref_to_Member'>flags</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN2483"><span class='Ref_to_Parameter'>flags</span></a><span class='Delimiter'>; 
</span>        <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN2483"><span class='Ref_to_Parameter'>lcur</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span><a href="../../include/tsearch/ts_public.h.html#LN106"><span class='Ref_to_Member'>nvariant</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN2483"><span class='Ref_to_Parameter'>NVariant</span></a><span class='Delimiter'>; 
</span>        <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN2483"><span class='Ref_to_Parameter'>lcur</span></a><span class='Parentheses'>)</span><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN2483"><span class='Ref_to_Parameter'>lcur</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span><a href="../../include/tsearch/ts_public.h.html#LN110"><span class='Ref_to_Member'>lexeme</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
} 
</span> 
<a href="../../include/tsearch/ts_public.h.html#LN87"><span class='Ref_to_Typedef'>TSLexeme</span></a> <span class='Operator'>* 
</span><a name="LN2499"></a><span class='Declare_Function'>NINormalizeWord</span><span class='Parentheses'>(</span><a href="../../include/tsearch/dicts/spell.h.html#LN178"><span class='Ref_to_Typedef'>IspellDict</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>Conf</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>word</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2501"></a>    <span class='Keyword'>char</span>      <span class='Operator'>**</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN2502"></a>    <a href="../../include/tsearch/ts_public.h.html#LN87"><span class='Ref_to_Typedef'>TSLexeme</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lcur</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span><a name="LN2503"></a>               <span class='Operator'>*</span><span class='Declare_Local'>lres</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN2504"></a>    <a href="../../include/c.h.html#LN266"><span class='Ref_to_Typedef'>uint16</span></a>      <span class='Declare_Local'>NVariant</span> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span> 
    <a href="spell.c.html#LN2501"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN2137"><span class='Ref_to_Func'>NormalizeSubWord</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN2499"><span class='Ref_to_Parameter'>Conf</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN2499"><span class='Ref_to_Parameter'>word</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN2501"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN2510"></a>        <span class='Keyword'>char</span>      <span class='Operator'>**</span><span class='Declare_Local'>ptr</span> <span class='Operator'>= </span><a href="spell.c.html#LN2501"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>while</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN2510"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>&& </span><span class='Parentheses'>(</span><a href="spell.c.html#LN2502"><span class='Ref_To_Local'>lcur</span></a> <span class='Operator'>- </span><a href="spell.c.html#LN2503"><span class='Ref_To_Local'>lres</span></a><span class='Parentheses'>) </span><span class='Operator'>&LT; </span><a href="spell.c.html#LN185"><span class='Ref_to_Const'>MAX_NORM</span></a><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <a href="spell.c.html#LN2482"><span class='Ref_to_Func'>addNorm</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="spell.c.html#LN2503"><span class='Ref_To_Local'>lres</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="spell.c.html#LN2502"><span class='Ref_To_Local'>lcur</span></a><span class='Delimiter'>, </span><span class='Operator'>*</span><a href="spell.c.html#LN2510"><span class='Ref_To_Local'>ptr</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="spell.c.html#LN2504"><span class='Ref_To_Local'>NVariant</span></a><span class='Operator'>++</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="spell.c.html#LN2510"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <a href="../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN2501"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN2499"><span class='Ref_to_Parameter'>Conf</span></a><span class='Operator'>-&GT;</span><a href="../../include/tsearch/dicts/spell.h.html#LN196"><span class='Ref_to_Member'>usecompound</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN2522"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>wordlen</span> <span class='Operator'>= </span>strlen<span class='Parentheses'>(</span><a href="spell.c.html#LN2499"><span class='Ref_to_Parameter'>word</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2523"></a>        <a href="spell.c.html#LN2247"><span class='Ref_to_Struct'>SplitVar</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>ptr</span><span class='Delimiter'>, 
</span><a name="LN2524"></a>                   <span class='Operator'>*</span><span class='Declare_Local'>var</span> <span class='Operator'>= </span><a href="spell.c.html#LN2335"><span class='Ref_to_Func'>SplitToVariants</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN2499"><span class='Ref_to_Parameter'>Conf</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="spell.c.html#LN2499"><span class='Ref_to_Parameter'>word</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN2522"><span class='Ref_To_Local'>wordlen</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2525"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN2524"><span class='Ref_To_Local'>var</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN2524"><span class='Ref_To_Local'>var</span></a><span class='Operator'>-&GT;</span><a href="spell.c.html#LN2249"><span class='Ref_to_Member'>nstem</span></a> <span class='Operator'>&GT; </span><span class='Number'>1</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span><a name="LN2531"></a>                <span class='Keyword'>char</span>      <span class='Operator'>**</span><span class='Declare_Local'>subres</span> <span class='Operator'>= </span><a href="spell.c.html#LN2137"><span class='Ref_to_Func'>NormalizeSubWord</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN2499"><span class='Ref_to_Parameter'>Conf</span></a><span class='Delimiter'>, </span><a href="spell.c.html#LN2524"><span class='Ref_To_Local'>var</span></a><span class='Operator'>-&GT;</span><a href="spell.c.html#LN2251"><span class='Ref_to_Member'>stem</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN2524"><span class='Ref_To_Local'>var</span></a><span class='Operator'>-&GT;</span><a href="spell.c.html#LN2249"><span class='Ref_to_Member'>nstem</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>], </span><a href="../../include/tsearch/dicts/spell.h.html#LN44"><span class='Ref_to_Const'>FF_COMPOUNDLAST</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN2531"><span class='Ref_To_Local'>subres</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span><a name="LN2535"></a>                    <span class='Keyword'>char</span>      <span class='Operator'>**</span><span class='Declare_Local'>subptr</span> <span class='Operator'>= </span><a href="spell.c.html#LN2531"><span class='Ref_To_Local'>subres</span></a><span class='Delimiter'>; 
</span> 
                    <span class='Control'>while</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="spell.c.html#LN2535"><span class='Ref_To_Local'>subptr</span></a><span class='Parentheses'>) 
</span>                    <span class='Delimiter'>{ 
</span>                        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN2525"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="spell.c.html#LN2525"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="spell.c.html#LN2524"><span class='Ref_To_Local'>var</span></a><span class='Operator'>-&GT;</span><a href="spell.c.html#LN2249"><span class='Ref_to_Member'>nstem</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>; </span><a href="spell.c.html#LN2525"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>                        <span class='Delimiter'>{ 
</span>                            <a href="spell.c.html#LN2482"><span class='Ref_to_Func'>addNorm</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="spell.c.html#LN2503"><span class='Ref_To_Local'>lres</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="spell.c.html#LN2502"><span class='Ref_To_Local'>lcur</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="spell.c.html#LN2535"><span class='Ref_To_Local'>subptr</span></a> <span class='Operator'>== </span><a href="spell.c.html#LN2531"><span class='Ref_To_Local'>subres</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><a href="spell.c.html#LN2524"><span class='Ref_To_Local'>var</span></a><span class='Operator'>-&GT;</span><a href="spell.c.html#LN2251"><span class='Ref_to_Member'>stem</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN2525"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>: </span><a href="../../include/common/fe_memutils.h.html#LN32"><span class='Ref_to_Proto'>pstrdup</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN2524"><span class='Ref_To_Local'>var</span></a><span class='Operator'>-&GT;</span><a href="spell.c.html#LN2251"><span class='Ref_to_Member'>stem</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN2525"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="spell.c.html#LN2504"><span class='Ref_To_Local'>NVariant</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Delimiter'>} 
</span> 
                        <a href="spell.c.html#LN2482"><span class='Ref_to_Func'>addNorm</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="spell.c.html#LN2503"><span class='Ref_To_Local'>lres</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="spell.c.html#LN2502"><span class='Ref_To_Local'>lcur</span></a><span class='Delimiter'>, </span><span class='Operator'>*</span><a href="spell.c.html#LN2535"><span class='Ref_To_Local'>subptr</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="spell.c.html#LN2504"><span class='Ref_To_Local'>NVariant</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <a href="spell.c.html#LN2535"><span class='Ref_To_Local'>subptr</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>                        <a href="spell.c.html#LN2504"><span class='Ref_To_Local'>NVariant</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span> 
                    <a href="../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN2531"><span class='Ref_To_Local'>subres</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="spell.c.html#LN2524"><span class='Ref_To_Local'>var</span></a><span class='Operator'>-&GT;</span><a href="spell.c.html#LN2251"><span class='Ref_to_Member'>stem</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>                    <a href="../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN2524"><span class='Ref_To_Local'>var</span></a><span class='Operator'>-&GT;</span><a href="spell.c.html#LN2251"><span class='Ref_to_Member'>stem</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN2524"><span class='Ref_To_Local'>var</span></a><span class='Operator'>-&GT;</span><a href="spell.c.html#LN2249"><span class='Ref_to_Member'>nstem</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if subres &raquo; </span> 
            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if var-&GT;nstem&GT;1 &raquo; </span> 
 
            <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="spell.c.html#LN2525"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="spell.c.html#LN2525"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="spell.c.html#LN2524"><span class='Ref_To_Local'>var</span></a><span class='Operator'>-&GT;</span><a href="spell.c.html#LN2249"><span class='Ref_to_Member'>nstem</span></a> <span class='Operator'>&& </span><a href="spell.c.html#LN2524"><span class='Ref_To_Local'>var</span></a><span class='Operator'>-&GT;</span><a href="spell.c.html#LN2251"><span class='Ref_to_Member'>stem</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN2525"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; </span><a href="spell.c.html#LN2525"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>                <a href="../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN2524"><span class='Ref_To_Local'>var</span></a><span class='Operator'>-&GT;</span><a href="spell.c.html#LN2251"><span class='Ref_to_Member'>stem</span></a><span class='Delimiter'>[</span><a href="spell.c.html#LN2525"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="spell.c.html#LN2523"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN2524"><span class='Ref_To_Local'>var</span></a><span class='Operator'>-&GT;</span><a href="spell.c.html#LN2252"><span class='Ref_to_Member'>next</span></a><span class='Delimiter'>; 
</span>            <a href="../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN2524"><span class='Ref_To_Local'>var</span></a><span class='Operator'>-&GT;</span><a href="spell.c.html#LN2251"><span class='Ref_to_Member'>stem</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="spell.c.html#LN2524"><span class='Ref_To_Local'>var</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="spell.c.html#LN2524"><span class='Ref_To_Local'>var</span></a> <span class='Operator'>= </span><a href="spell.c.html#LN2523"><span class='Ref_To_Local'>ptr</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end while var &raquo; </span> 
    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if Conf-&GT;usecompound &raquo; </span> 
 
    <span class='Control'>return</span> <a href="spell.c.html#LN2503"><span class='Ref_To_Local'>lres</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end NINormalizeWord &raquo; </span> 
</pre>
<table bgcolor='#c0c0c0' width='100%'><tr><td><a href='../../../Contents.html'>Contents</a></td></tr>
</table><hr><p class='blurb' align='center'><a href='http://www.sourceinsight.com'>HTML Created by Source Insight Version 4.00.0084 Built on 2017-02-26</a></p>
</body></html>