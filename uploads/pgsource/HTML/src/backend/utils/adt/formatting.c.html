<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta name="generator" content="Source Insight Version 4.00.0084 Built on 2017-02-26">
<meta charset='UTF-8' />
<style type='text/css'><!--
TD {background-color: #C0C0C0; font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.blurb {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.filename {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 120%; font-weight: bold; }
.dirname {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 100%; font-weight: bold; margin-top: 2.5em;}
--></style>
<title>src\backend\utils\adt\formatting.c</title>
<LINK REL=StyleSheet HREF="../../../../C_Cpp_Source_File.css" TYPE='text/css' MEDIA=screen>
</head>
<body bgcolor=#ffffff>
<table bgcolor='#c0c0c0' width='100%'>
<tr><td><p class='filename'><b>src\backend\utils\adt\formatting.c</b></p></td>
<td align='right'>
Wed Jun 14 08:25:51 2017
</td></tr>
<tr><td><a href='../../../../Contents.html'>Contents</a></td></tr>
</table>
<pre>
</span><span class='Comment_Multi_Line'>/* ----------------------------------------------------------------------- 
 * formatting.c 
 * 
 * src/backend/utils/adt/formatting.c 
 * 
 * 
 *   Portions Copyright (c) 1999-2017, PostgreSQL Global Development Group 
 * 
 * 
 *   TO_CHAR(); TO_TIMESTAMP(); TO_DATE(); TO_NUMBER(); 
 * 
 *   The PostgreSQL routines for a timestamp/int/float/numeric formatting, 
 *   inspired by the Oracle TO_CHAR() / TO_DATE() / TO_NUMBER() routines. 
 * 
 * 
 *   Cache & Memory: 
 *  Routines use (itself) internal cache for format pictures. 
 * 
 *  The cache uses a static buffer and is persistent across transactions.  If 
 *  the format-picture is bigger than the cache buffer, the parser is called 
 *  always. 
 * 
 *   NOTE for Number version: 
 *  All in this version is implemented as keywords ( =&GT; not used 
 *  suffixes), because a format picture is for *one* item (number) 
 *  only. It not is as a timestamp version, where each keyword (can) 
 *  has suffix. 
 * 
 *   NOTE for Timestamp routines: 
 *  In this module the POSIX 'struct tm' type is *not* used, but rather 
 *  PgSQL type, which has tm_mon based on one (*non* zero) and 
 *  year *not* based on 1900, but is used full year number. 
 *  Module supports AD / BC / AM / PM. 
 * 
 *  Supported types for to_char(): 
 * 
 *      Timestamp, Numeric, int4, int8, float4, float8 
 * 
 *  Supported types for reverse conversion: 
 * 
 *      Timestamp   - to_timestamp() 
 *      Date        - to_date() 
 *      Numeric     - to_number() 
 * 
 * 
 *  Karel Zak 
 * 
 * TODO 
 *  - better number building (formatting) / parsing, now it isn't 
 *        ideal code 
 *  - use Assert() 
 *  - add support for abstime 
 *  - add support for roman number to standard number conversion 
 *  - add support for number spelling 
 *  - add support for string to string formatting (we must be better 
 *    than Oracle :-), 
 *      to_char('Hello', 'X X X X X') -&GT; 'H e l l o' 
 * 
 * ----------------------------------------------------------------------- 
 */ 
</span> 
<span class='Directive'>#ifdef</span> DEBUG_TO_FROM_CHAR 
<a name="LN62"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>DEBUG_elog_output</span>   <a href="../../../include/utils/elog.h.html#LN22"><span class='Ref_to_Const'>DEBUG3</span></a> 
<span class='Directive'>#endif</span> 
 
<span class='Keyword'>#include </span><span class='String'>"postgres.h"</span> 
 
<span class='Keyword'>#include </span><span class='String'>&LT;ctype.h&GT;</span> 
<span class='Keyword'>#include </span><span class='String'>&LT;unistd.h&GT;</span> 
<span class='Keyword'>#include </span><span class='String'>&LT;math.h&GT;</span> 
<span class='Keyword'>#include </span><span class='String'>&LT;float.h&GT;</span> 
<span class='Keyword'>#include </span><span class='String'>&LT;limits.h&GT;</span> 
 
<span class='Comment_Multi_Line'>/* 
 * towlower() and friends should be in &LT;wctype.h&GT;, but some pre-C99 systems 
 * declare them in &LT;wchar.h&GT;. 
 */ 
</span><span class='Directive'>#ifdef</span> HAVE_WCHAR_H 
<span class='Keyword'>#include </span><span class='String'>&LT;wchar.h&GT;</span> 
<span class='Directive'>#endif</span> 
<span class='Directive'>#ifdef</span> HAVE_WCTYPE_H 
<span class='Keyword'>#include </span><span class='String'>&LT;wctype.h&GT;</span> 
<span class='Directive'>#endif</span> 
 
<span class='Directive'>#ifdef</span> USE_ICU 
<span class='Keyword'>#include </span><span class='String'>&LT;unicode/ustring.h&GT;</span> 
<span class='Directive'>#endif</span> 
 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_collation.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"mb/pg_wchar.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/builtins.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/date.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/datetime.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/formatting.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/int8.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/numeric.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/pg_locale.h"</span> 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * Routines type 
 * ---------- 
 */ 
</span><a name="LN102"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>DCH_TYPE</span>        <span class='Number'>1</span>       <span class='Comment_Single_Line'>/* DATE-TIME version    */ 
</span><a name="LN103"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>NUM_TYPE</span>        <span class='Number'>2</span>       <span class='Comment_Single_Line'>/* NUMBER version   */ 
</span> 
<span class='Comment_Multi_Line'>/* ---------- 
 * KeyWord Index (ascii from position 32 (' ') to 126 (~)) 
 * ---------- 
 */ 
</span><a name="LN109"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>KeyWord_INDEX_SIZE</span>      <span class='Parentheses'>(</span><span class='String'>'~'</span> <span class='Operator'>- </span><span class='String'>' '</span><span class='Parentheses'>) 
</span><a name="LN110"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>KeyWord_INDEX_FILTER</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>_c</span><span class='Parentheses'>)</span>    <span class='Parentheses'>((</span><a href="formatting.c.html#LN110"><span class='Ref_to_Parameter'>_c</span></a><span class='Parentheses'>) </span><span class='Operator'>&LT;= </span><span class='String'>' '</span> <span class='Operator'>|| </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN110"><span class='Ref_to_Parameter'>_c</span></a><span class='Parentheses'>) </span><span class='Operator'>&GT;= </span><span class='String'>'~'</span> <span class='Operator'>? </span><span class='Number'>0</span> <span class='Operator'>: </span><span class='Number'>1</span><span class='Parentheses'>)</span> 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * Maximal length of one node 
 * ---------- 
 */ 
</span><a name="LN116"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>DCH_MAX_ITEM_SIZ</span>       <span class='Number'>12</span>       <span class='Comment_Single_Line'>/* max localized day name       */ 
</span><a name="LN117"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>NUM_MAX_ITEM_SIZ</span>        <span class='Number'>8</span>       <span class='Comment_Single_Line'>/* roman number (RN has 15 chars)   */ 
</span> 
<span class='Comment_Multi_Line'>/* ---------- 
 * More is in float.c 
 * ---------- 
 */ 
</span><a name="LN123"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>MAXFLOATWIDTH</span>   <span class='Number'>60</span> 
<a name="LN124"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>MAXDOUBLEWIDTH</span>  <span class='Number'>500</span> 
 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * Format parser structs 
 * ---------- 
 */ 
</span><span class='Control'>typedef</span> <span class='Control'>struct</span> 
<span class='Delimiter'>{ 
</span><a name="LN133"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Member'>name</span><span class='Delimiter'>;</span>           <span class='Comment_Single_Line'>/* suffix string        */ 
</span><a name="LN134"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>len</span><span class='Delimiter'>,</span>            <span class='Comment_Single_Line'>/* suffix length        */ 
</span><a name="LN135"></a>                <span class='Declare_Member'>id</span><span class='Delimiter'>,</span>             <span class='Comment_Single_Line'>/* used in node-&GT;suffix */ 
</span><a name="LN136"></a>                <span class='Declare_Member'>type</span><span class='Delimiter'>;</span>           <span class='Comment_Single_Line'>/* prefix / postfix         */ 
</span><a name="LN137"></a><span class='Delimiter'>} </span><span class='Declare_Typedef'>KeySuffix</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* ---------- 
 * FromCharDateMode 
 * ---------- 
 * 
 * This value is used to nominate one of several distinct (and mutually 
 * exclusive) date conventions that a keyword can belong to. 
 */ 
</span><span class='Control'>typedef</span> <span class='Control'>enum</span> 
<span class='Delimiter'>{ 
</span><a name="LN148"></a>    <span class='Declare_Enum_Const'>FROM_CHAR_DATE_NONE</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>,</span>    <span class='Comment_Single_Line'>/* Value does not affect date mode. */ 
</span><a name="LN149"></a>    <span class='Declare_Enum_Const'>FROM_CHAR_DATE_GREGORIAN</span><span class='Delimiter'>,</span>   <span class='Comment_Single_Line'>/* Gregorian (day, month, year) style date */ 
</span><a name="LN150"></a>    <span class='Declare_Enum_Const'>FROM_CHAR_DATE_ISOWEEK</span>      <span class='Comment_Single_Line'>/* ISO 8601 week date */ 
</span><a name="LN151"></a><span class='Delimiter'>} </span><span class='Declare_Typedef'>FromCharDateMode</span><span class='Delimiter'>; 
</span> 
<a name="LN153"></a><span class='Control'>typedef</span> <span class='Control'>struct</span> <a href="formatting.c.html#LN164"><span class='Ref_to_Struct'>FormatNode</span></a> <span class='Declare_Typedef'>FormatNode</span><span class='Delimiter'>; 
</span> 
<span class='Control'>typedef</span> <span class='Control'>struct</span> 
<span class='Delimiter'>{ 
</span><a name="LN157"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Member'>name</span><span class='Delimiter'>; 
</span><a name="LN158"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>len</span><span class='Delimiter'>; 
</span><a name="LN159"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>id</span><span class='Delimiter'>; 
</span><a name="LN160"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Member'>is_digit</span><span class='Delimiter'>; 
</span><a name="LN161"></a>    <a href="formatting.c.html#LN146"><span class='Ref_to_Typedef'>FromCharDateMode</span></a> <span class='Declare_Member'>date_mode</span><span class='Delimiter'>; 
</span><a name="LN162"></a>} <span class='Declare_Typedef'>KeyWord</span><span class='Delimiter'>; 
</span> 
<a name="LN164"></a><span class='Control'>struct</span> <span class='Declare_Struct'>FormatNode</span> 
<span class='Delimiter'>{ 
</span><a name="LN166"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>type</span><span class='Delimiter'>;</span>           <span class='Comment_Single_Line'>/* node type            */ 
</span><a name="LN167"></a>    <span class='Keyword'>const </span><a href="formatting.c.html#LN155"><span class='Ref_to_Typedef'>KeyWord</span></a> <span class='Operator'>*</span><span class='Declare_Member'>key</span><span class='Delimiter'>;</span>         <span class='Comment_Single_Line'>/* if node type is KEYWORD  */ 
</span><a name="LN168"></a>    <span class='Keyword'>char</span>        <span class='Declare_Member'>character</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* if node type is CHAR     */ 
</span><a name="LN169"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>suffix</span><span class='Delimiter'>;</span>         <span class='Comment_Single_Line'>/* keyword suffix       */ 
</span><span class='Delimiter'>}; 
</span> 
<a name="LN172"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>NODE_TYPE_END</span>       <span class='Number'>1</span> 
<a name="LN173"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>NODE_TYPE_ACTION</span>    <span class='Number'>2</span> 
<a name="LN174"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>NODE_TYPE_CHAR</span>      <span class='Number'>3</span> 
 
<a name="LN176"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>SUFFTYPE_PREFIX</span>     <span class='Number'>1</span> 
<a name="LN177"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>SUFFTYPE_POSTFIX</span>    <span class='Number'>2</span> 
 
<a name="LN179"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>CLOCK_24_HOUR</span>       <span class='Number'>0</span> 
<a name="LN180"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>CLOCK_12_HOUR</span>       <span class='Number'>1</span> 
 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * Full months 
 * ---------- 
 */ 
</span><a name="LN187"></a><span class='Keyword'>static const char </span><span class='Operator'>*</span><span class='Keyword'>const </span><span class='Declare_Var'>months_full</span><span class='Delimiter'>[] </span><span class='Operator'>= </span><span class='Delimiter'>{ 
</span>    <span class='String'>"January"</span><span class='Delimiter'>, </span><span class='String'>"February"</span><span class='Delimiter'>, </span><span class='String'>"March"</span><span class='Delimiter'>, </span><span class='String'>"April"</span><span class='Delimiter'>, </span><span class='String'>"May"</span><span class='Delimiter'>, </span><span class='String'>"June"</span><span class='Delimiter'>, </span><span class='String'>"July"</span><span class='Delimiter'>, 
</span>    <span class='String'>"August"</span><span class='Delimiter'>, </span><span class='String'>"September"</span><span class='Delimiter'>, </span><span class='String'>"October"</span><span class='Delimiter'>, </span><span class='String'>"November"</span><span class='Delimiter'>, </span><span class='String'>"December"</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL 
</span><span class='Delimiter'>}; 
</span> 
<a name="LN192"></a><span class='Keyword'>static const char </span><span class='Operator'>*</span><span class='Keyword'>const </span><span class='Declare_Var'>days_short</span><span class='Delimiter'>[] </span><span class='Operator'>= </span><span class='Delimiter'>{ 
</span>    <span class='String'>"Sun"</span><span class='Delimiter'>, </span><span class='String'>"Mon"</span><span class='Delimiter'>, </span><span class='String'>"Tue"</span><span class='Delimiter'>, </span><span class='String'>"Wed"</span><span class='Delimiter'>, </span><span class='String'>"Thu"</span><span class='Delimiter'>, </span><span class='String'>"Fri"</span><span class='Delimiter'>, </span><span class='String'>"Sat"</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL 
</span><span class='Delimiter'>}; 
</span> 
<span class='Comment_Multi_Line'>/* ---------- 
 * AD / BC 
 * ---------- 
 *  There is no 0 AD.  Years go from 1 BC to 1 AD, so we make it 
 *  positive and map year == -1 to year zero, and shift all negative 
 *  years up one.  For interval years, we just return the year. 
 */ 
</span><a name="LN203"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>ADJUST_YEAR</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>year</span><span class='Delimiter'>, </span><span class='Declare_Parameter'>is_interval</span><span class='Parentheses'>)</span>  <span class='Parentheses'>((</span><a href="formatting.c.html#LN203"><span class='Ref_to_Parameter'>is_interval</span></a><span class='Parentheses'>)</span> <span class='Operator'>? </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN203"><span class='Ref_to_Parameter'>year</span></a><span class='Parentheses'>)</span> <span class='Operator'>: </span><span class='Parentheses'>((</span><a href="formatting.c.html#LN203"><span class='Ref_to_Parameter'>year</span></a><span class='Parentheses'>)</span> <span class='Operator'>&LT;= </span><span class='Number'>0</span> <span class='Operator'>? -</span><span class='Parentheses'>((</span><a href="formatting.c.html#LN203"><span class='Ref_to_Parameter'>year</span></a><span class='Parentheses'>) </span><span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>)</span> <span class='Operator'>: </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN203"><span class='Ref_to_Parameter'>year</span></a><span class='Parentheses'>)))</span> 
 
<a name="LN205"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>A_D_STR</span>     <span class='String'>"A.D."</span> 
<a name="LN206"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>a_d_STR</span>     <span class='String'>"a.d."</span> 
<a name="LN207"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>AD_STR</span>      <span class='String'>"AD"</span> 
<a name="LN208"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>ad_STR</span>      <span class='String'>"ad"</span> 
 
<a name="LN210"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>B_C_STR</span>     <span class='String'>"B.C."</span> 
<a name="LN211"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>b_c_STR</span>     <span class='String'>"b.c."</span> 
<a name="LN212"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>BC_STR</span>      <span class='String'>"BC"</span> 
<a name="LN213"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>bc_STR</span>      <span class='String'>"bc"</span> 
 
<span class='Comment_Multi_Line'>/* 
 * AD / BC strings for seq_search. 
 * 
 * These are given in two variants, a long form with periods and a standard 
 * form without. 
 * 
 * The array is laid out such that matches for AD have an even index, and 
 * matches for BC have an odd index.  So the boolean value for BC is given by 
 * taking the array index of the match, modulo 2. 
 */ 
</span><a name="LN225"></a><span class='Keyword'>static const char </span><span class='Operator'>*</span><span class='Keyword'>const </span><span class='Declare_Var'>adbc_strings</span><span class='Delimiter'>[] </span><span class='Operator'>= </span><span class='Delimiter'>{</span><a href="formatting.c.html#LN208"><span class='Ref_to_Const'>ad_STR</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN213"><span class='Ref_to_Const'>bc_STR</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN207"><span class='Ref_to_Const'>AD_STR</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN212"><span class='Ref_to_Const'>BC_STR</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>}; 
</span><a name="LN226"></a><span class='Keyword'>static const char </span><span class='Operator'>*</span><span class='Keyword'>const </span><span class='Declare_Var'>adbc_strings_long</span><span class='Delimiter'>[] </span><span class='Operator'>= </span><span class='Delimiter'>{</span><a href="formatting.c.html#LN206"><span class='Ref_to_Const'>a_d_STR</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN211"><span class='Ref_to_Const'>b_c_STR</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN205"><span class='Ref_to_Const'>A_D_STR</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN210"><span class='Ref_to_Const'>B_C_STR</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>}; 
</span> 
<span class='Comment_Multi_Line'>/* ---------- 
 * AM / PM 
 * ---------- 
 */ 
</span><a name="LN232"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>A_M_STR</span>     <span class='String'>"A.M."</span> 
<a name="LN233"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>a_m_STR</span>     <span class='String'>"a.m."</span> 
<a name="LN234"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>AM_STR</span>      <span class='String'>"AM"</span> 
<a name="LN235"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>am_STR</span>      <span class='String'>"am"</span> 
 
<a name="LN237"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>P_M_STR</span>     <span class='String'>"P.M."</span> 
<a name="LN238"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>p_m_STR</span>     <span class='String'>"p.m."</span> 
<a name="LN239"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>PM_STR</span>      <span class='String'>"PM"</span> 
<a name="LN240"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>pm_STR</span>      <span class='String'>"pm"</span> 
 
<span class='Comment_Multi_Line'>/* 
 * AM / PM strings for seq_search. 
 * 
 * These are given in two variants, a long form with periods and a standard 
 * form without. 
 * 
 * The array is laid out such that matches for AM have an even index, and 
 * matches for PM have an odd index.  So the boolean value for PM is given by 
 * taking the array index of the match, modulo 2. 
 */ 
</span><a name="LN252"></a><span class='Keyword'>static const char </span><span class='Operator'>*</span><span class='Keyword'>const </span><span class='Declare_Var'>ampm_strings</span><span class='Delimiter'>[] </span><span class='Operator'>= </span><span class='Delimiter'>{</span><a href="formatting.c.html#LN235"><span class='Ref_to_Const'>am_STR</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN240"><span class='Ref_to_Const'>pm_STR</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN234"><span class='Ref_to_Const'>AM_STR</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN239"><span class='Ref_to_Const'>PM_STR</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>}; 
</span><a name="LN253"></a><span class='Keyword'>static const char </span><span class='Operator'>*</span><span class='Keyword'>const </span><span class='Declare_Var'>ampm_strings_long</span><span class='Delimiter'>[] </span><span class='Operator'>= </span><span class='Delimiter'>{</span><a href="formatting.c.html#LN233"><span class='Ref_to_Const'>a_m_STR</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN238"><span class='Ref_to_Const'>p_m_STR</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN232"><span class='Ref_to_Const'>A_M_STR</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN237"><span class='Ref_to_Const'>P_M_STR</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>}; 
</span> 
<span class='Comment_Multi_Line'>/* ---------- 
 * Months in roman-numeral 
 * (Must be in reverse order for seq_search (in FROM_CHAR), because 
 *  'VIII' must have higher precedence than 'V') 
 * ---------- 
 */ 
</span><a name="LN261"></a><span class='Keyword'>static const char </span><span class='Operator'>*</span><span class='Keyword'>const </span><span class='Declare_Var'>rm_months_upper</span><span class='Delimiter'>[] </span><span class='Operator'>= 
</span><span class='Delimiter'>{</span><span class='String'>"XII"</span><span class='Delimiter'>, </span><span class='String'>"XI"</span><span class='Delimiter'>, </span><span class='String'>"X"</span><span class='Delimiter'>, </span><span class='String'>"IX"</span><span class='Delimiter'>, </span><span class='String'>"VIII"</span><span class='Delimiter'>, </span><span class='String'>"VII"</span><span class='Delimiter'>, </span><span class='String'>"VI"</span><span class='Delimiter'>, </span><span class='String'>"V"</span><span class='Delimiter'>, </span><span class='String'>"IV"</span><span class='Delimiter'>, </span><span class='String'>"III"</span><span class='Delimiter'>, </span><span class='String'>"II"</span><span class='Delimiter'>, </span><span class='String'>"I"</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>}; 
</span> 
<a name="LN264"></a><span class='Keyword'>static const char </span><span class='Operator'>*</span><span class='Keyword'>const </span><span class='Declare_Var'>rm_months_lower</span><span class='Delimiter'>[] </span><span class='Operator'>= 
</span><span class='Delimiter'>{</span><span class='String'>"xii"</span><span class='Delimiter'>, </span><span class='String'>"xi"</span><span class='Delimiter'>, </span><span class='String'>"x"</span><span class='Delimiter'>, </span><span class='String'>"ix"</span><span class='Delimiter'>, </span><span class='String'>"viii"</span><span class='Delimiter'>, </span><span class='String'>"vii"</span><span class='Delimiter'>, </span><span class='String'>"vi"</span><span class='Delimiter'>, </span><span class='String'>"v"</span><span class='Delimiter'>, </span><span class='String'>"iv"</span><span class='Delimiter'>, </span><span class='String'>"iii"</span><span class='Delimiter'>, </span><span class='String'>"ii"</span><span class='Delimiter'>, </span><span class='String'>"i"</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>}; 
</span> 
<span class='Comment_Multi_Line'>/* ---------- 
 * Roman numbers 
 * ---------- 
 */ 
</span><a name="LN271"></a><span class='Keyword'>static const char </span><span class='Operator'>*</span><span class='Keyword'>const </span><span class='Declare_Var'>rm1</span><span class='Delimiter'>[] </span><span class='Operator'>= </span><span class='Delimiter'>{</span><span class='String'>"I"</span><span class='Delimiter'>, </span><span class='String'>"II"</span><span class='Delimiter'>, </span><span class='String'>"III"</span><span class='Delimiter'>, </span><span class='String'>"IV"</span><span class='Delimiter'>, </span><span class='String'>"V"</span><span class='Delimiter'>, </span><span class='String'>"VI"</span><span class='Delimiter'>, </span><span class='String'>"VII"</span><span class='Delimiter'>, </span><span class='String'>"VIII"</span><span class='Delimiter'>, </span><span class='String'>"IX"</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>}; 
</span><a name="LN272"></a><span class='Keyword'>static const char </span><span class='Operator'>*</span><span class='Keyword'>const </span><span class='Declare_Var'>rm10</span><span class='Delimiter'>[] </span><span class='Operator'>= </span><span class='Delimiter'>{</span><span class='String'>"X"</span><span class='Delimiter'>, </span><span class='String'>"XX"</span><span class='Delimiter'>, </span><span class='String'>"XXX"</span><span class='Delimiter'>, </span><span class='String'>"XL"</span><span class='Delimiter'>, </span><span class='String'>"L"</span><span class='Delimiter'>, </span><span class='String'>"LX"</span><span class='Delimiter'>, </span><span class='String'>"LXX"</span><span class='Delimiter'>, </span><span class='String'>"LXXX"</span><span class='Delimiter'>, </span><span class='String'>"XC"</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>}; 
</span><a name="LN273"></a><span class='Keyword'>static const char </span><span class='Operator'>*</span><span class='Keyword'>const </span><span class='Declare_Var'>rm100</span><span class='Delimiter'>[] </span><span class='Operator'>= </span><span class='Delimiter'>{</span><span class='String'>"C"</span><span class='Delimiter'>, </span><span class='String'>"CC"</span><span class='Delimiter'>, </span><span class='String'>"CCC"</span><span class='Delimiter'>, </span><span class='String'>"CD"</span><span class='Delimiter'>, </span><span class='String'>"D"</span><span class='Delimiter'>, </span><span class='String'>"DC"</span><span class='Delimiter'>, </span><span class='String'>"DCC"</span><span class='Delimiter'>, </span><span class='String'>"DCCC"</span><span class='Delimiter'>, </span><span class='String'>"CM"</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>}; 
</span> 
<span class='Comment_Multi_Line'>/* ---------- 
 * Ordinal postfixes 
 * ---------- 
 */ 
</span><a name="LN279"></a><span class='Keyword'>static const char </span><span class='Operator'>*</span><span class='Keyword'>const </span><span class='Declare_Var'>numTH</span><span class='Delimiter'>[] </span><span class='Operator'>= </span><span class='Delimiter'>{</span><span class='String'>"ST"</span><span class='Delimiter'>, </span><span class='String'>"ND"</span><span class='Delimiter'>, </span><span class='String'>"RD"</span><span class='Delimiter'>, </span><span class='String'>"TH"</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>}; 
</span><a name="LN280"></a><span class='Keyword'>static const char </span><span class='Operator'>*</span><span class='Keyword'>const </span><span class='Declare_Var'>numth</span><span class='Delimiter'>[] </span><span class='Operator'>= </span><span class='Delimiter'>{</span><span class='String'>"st"</span><span class='Delimiter'>, </span><span class='String'>"nd"</span><span class='Delimiter'>, </span><span class='String'>"rd"</span><span class='Delimiter'>, </span><span class='String'>"th"</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>}; 
</span> 
<span class='Comment_Multi_Line'>/* ---------- 
 * Flags & Options: 
 * ---------- 
 */ 
</span><a name="LN286"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>ONE_UPPER</span>       <span class='Number'>1</span>       <span class='Comment_Single_Line'>/* Name */ 
</span><a name="LN287"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>ALL_UPPER</span>       <span class='Number'>2</span>       <span class='Comment_Single_Line'>/* NAME */ 
</span><a name="LN288"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>ALL_LOWER</span>       <span class='Number'>3</span>       <span class='Comment_Single_Line'>/* name */ 
</span> 
<a name="LN290"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>FULL_SIZ</span>        <span class='Number'>0</span> 
 
<a name="LN292"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>MAX_MONTH_LEN</span>   <span class='Number'>9</span> 
<a name="LN293"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>MAX_MON_LEN</span>     <span class='Number'>3</span> 
<a name="LN294"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>MAX_DAY_LEN</span>     <span class='Number'>9</span> 
<a name="LN295"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>MAX_DY_LEN</span>      <span class='Number'>3</span> 
<a name="LN296"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>MAX_RM_LEN</span>      <span class='Number'>4</span> 
 
<a name="LN298"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>TH_UPPER</span>        <span class='Number'>1</span> 
<a name="LN299"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>TH_LOWER</span>        <span class='Number'>2</span> 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * Number description struct 
 * ---------- 
 */ 
</span><span class='Control'>typedef</span> <span class='Control'>struct</span> 
<span class='Delimiter'>{ 
</span><a name="LN307"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>pre</span><span class='Delimiter'>,</span>            <span class='Comment_Single_Line'>/* (count) numbers before decimal */ 
</span><a name="LN308"></a>                <span class='Declare_Member'>post</span><span class='Delimiter'>,</span>           <span class='Comment_Single_Line'>/* (count) numbers after decimal  */ 
</span><a name="LN309"></a>                <span class='Declare_Member'>lsign</span><span class='Delimiter'>,</span>          <span class='Comment_Single_Line'>/* want locales sign          */ 
</span><a name="LN310"></a>                <span class='Declare_Member'>flag</span><span class='Delimiter'>,</span>           <span class='Comment_Single_Line'>/* number parameters          */ 
</span><a name="LN311"></a>                <span class='Declare_Member'>pre_lsign_num</span><span class='Delimiter'>,</span>  <span class='Comment_Single_Line'>/* tmp value for lsign        */ 
</span><a name="LN312"></a>                <span class='Declare_Member'>multi</span><span class='Delimiter'>,</span>          <span class='Comment_Single_Line'>/* multiplier for 'V'         */ 
</span><a name="LN313"></a>                <span class='Declare_Member'>zero_start</span><span class='Delimiter'>,</span>     <span class='Comment_Single_Line'>/* position of first zero     */ 
</span><a name="LN314"></a>                <span class='Declare_Member'>zero_end</span><span class='Delimiter'>,</span>       <span class='Comment_Single_Line'>/* position of last zero      */ 
</span><a name="LN315"></a>                <span class='Declare_Member'>need_locale</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* needs it locale        */ 
</span><a name="LN316"></a><span class='Delimiter'>} </span><span class='Declare_Typedef'>NUMDesc</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* ---------- 
 * Flags for NUMBER version 
 * ---------- 
 */ 
</span><a name="LN322"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>NUM_F_DECIMAL</span>       <span class='Parentheses'>(</span><span class='Number'>1</span> <span class='Operator'>&LT;&LT; </span><span class='Number'>1</span><span class='Parentheses'>) 
</span><a name="LN323"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>NUM_F_LDECIMAL</span>      <span class='Parentheses'>(</span><span class='Number'>1</span> <span class='Operator'>&LT;&LT; </span><span class='Number'>2</span><span class='Parentheses'>) 
</span><a name="LN324"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>NUM_F_ZERO</span>          <span class='Parentheses'>(</span><span class='Number'>1</span> <span class='Operator'>&LT;&LT; </span><span class='Number'>3</span><span class='Parentheses'>) 
</span><a name="LN325"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>NUM_F_BLANK</span>         <span class='Parentheses'>(</span><span class='Number'>1</span> <span class='Operator'>&LT;&LT; </span><span class='Number'>4</span><span class='Parentheses'>) 
</span><a name="LN326"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>NUM_F_FILLMODE</span>      <span class='Parentheses'>(</span><span class='Number'>1</span> <span class='Operator'>&LT;&LT; </span><span class='Number'>5</span><span class='Parentheses'>) 
</span><a name="LN327"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>NUM_F_LSIGN</span>         <span class='Parentheses'>(</span><span class='Number'>1</span> <span class='Operator'>&LT;&LT; </span><span class='Number'>6</span><span class='Parentheses'>) 
</span><a name="LN328"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>NUM_F_BRACKET</span>       <span class='Parentheses'>(</span><span class='Number'>1</span> <span class='Operator'>&LT;&LT; </span><span class='Number'>7</span><span class='Parentheses'>) 
</span><a name="LN329"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>NUM_F_MINUS</span>         <span class='Parentheses'>(</span><span class='Number'>1</span> <span class='Operator'>&LT;&LT; </span><span class='Number'>8</span><span class='Parentheses'>) 
</span><a name="LN330"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>NUM_F_PLUS</span>          <span class='Parentheses'>(</span><span class='Number'>1</span> <span class='Operator'>&LT;&LT; </span><span class='Number'>9</span><span class='Parentheses'>) 
</span><a name="LN331"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>NUM_F_ROMAN</span>         <span class='Parentheses'>(</span><span class='Number'>1</span> <span class='Operator'>&LT;&LT; </span><span class='Number'>10</span><span class='Parentheses'>) 
</span><a name="LN332"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>NUM_F_MULTI</span>         <span class='Parentheses'>(</span><span class='Number'>1</span> <span class='Operator'>&LT;&LT; </span><span class='Number'>11</span><span class='Parentheses'>) 
</span><a name="LN333"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>NUM_F_PLUS_POST</span>     <span class='Parentheses'>(</span><span class='Number'>1</span> <span class='Operator'>&LT;&LT; </span><span class='Number'>12</span><span class='Parentheses'>) 
</span><a name="LN334"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>NUM_F_MINUS_POST</span>    <span class='Parentheses'>(</span><span class='Number'>1</span> <span class='Operator'>&LT;&LT; </span><span class='Number'>13</span><span class='Parentheses'>) 
</span><a name="LN335"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>NUM_F_EEEE</span>          <span class='Parentheses'>(</span><span class='Number'>1</span> <span class='Operator'>&LT;&LT; </span><span class='Number'>14</span><span class='Parentheses'>) 
</span> 
<a name="LN337"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>NUM_LSIGN_PRE</span>   <span class='Parentheses'>(</span><span class='Operator'>-</span><span class='Number'>1</span><span class='Parentheses'>) 
</span><a name="LN338"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>NUM_LSIGN_POST</span>  <span class='Number'>1</span> 
<a name="LN339"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>NUM_LSIGN_NONE</span>  <span class='Number'>0</span> 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * Tests 
 * ---------- 
 */ 
</span><a name="LN345"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>IS_DECIMAL</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>_f</span><span class='Parentheses'>)</span>  <span class='Parentheses'>((</span><a href="formatting.c.html#LN345"><span class='Ref_to_Parameter'>_f</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>flag <span class='Operator'>& </span><a href="formatting.c.html#LN322"><span class='Ref_to_Const'>NUM_F_DECIMAL</span></a><span class='Parentheses'>)</span> 
<a name="LN346"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>IS_LDECIMAL</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>_f</span><span class='Parentheses'>) ((</span><a href="formatting.c.html#LN346"><span class='Ref_to_Parameter'>_f</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>flag <span class='Operator'>& </span><a href="formatting.c.html#LN323"><span class='Ref_to_Const'>NUM_F_LDECIMAL</span></a><span class='Parentheses'>)</span> 
<a name="LN347"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>IS_ZERO</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>_f</span><span class='Parentheses'>) ((</span><a href="formatting.c.html#LN347"><span class='Ref_to_Parameter'>_f</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>flag <span class='Operator'>& </span><a href="formatting.c.html#LN324"><span class='Ref_to_Const'>NUM_F_ZERO</span></a><span class='Parentheses'>)</span> 
<a name="LN348"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>IS_BLANK</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>_f</span><span class='Parentheses'>)</span>    <span class='Parentheses'>((</span><a href="formatting.c.html#LN348"><span class='Ref_to_Parameter'>_f</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>flag <span class='Operator'>& </span><a href="formatting.c.html#LN325"><span class='Ref_to_Const'>NUM_F_BLANK</span></a><span class='Parentheses'>)</span> 
<a name="LN349"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>IS_FILLMODE</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>_f</span><span class='Parentheses'>) ((</span><a href="formatting.c.html#LN349"><span class='Ref_to_Parameter'>_f</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>flag <span class='Operator'>& </span><a href="formatting.c.html#LN326"><span class='Ref_to_Const'>NUM_F_FILLMODE</span></a><span class='Parentheses'>)</span> 
<a name="LN350"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>IS_BRACKET</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>_f</span><span class='Parentheses'>)</span>  <span class='Parentheses'>((</span><a href="formatting.c.html#LN350"><span class='Ref_to_Parameter'>_f</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>flag <span class='Operator'>& </span><a href="formatting.c.html#LN328"><span class='Ref_to_Const'>NUM_F_BRACKET</span></a><span class='Parentheses'>)</span> 
<a name="LN351"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>IS_MINUS</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>_f</span><span class='Parentheses'>)</span>    <span class='Parentheses'>((</span><a href="formatting.c.html#LN351"><span class='Ref_to_Parameter'>_f</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>flag <span class='Operator'>& </span><a href="formatting.c.html#LN329"><span class='Ref_to_Const'>NUM_F_MINUS</span></a><span class='Parentheses'>)</span> 
<a name="LN352"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>IS_LSIGN</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>_f</span><span class='Parentheses'>)</span>    <span class='Parentheses'>((</span><a href="formatting.c.html#LN352"><span class='Ref_to_Parameter'>_f</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>flag <span class='Operator'>& </span><a href="formatting.c.html#LN327"><span class='Ref_to_Const'>NUM_F_LSIGN</span></a><span class='Parentheses'>)</span> 
<a name="LN353"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>IS_PLUS</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>_f</span><span class='Parentheses'>) ((</span><a href="formatting.c.html#LN353"><span class='Ref_to_Parameter'>_f</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>flag <span class='Operator'>& </span><a href="formatting.c.html#LN330"><span class='Ref_to_Const'>NUM_F_PLUS</span></a><span class='Parentheses'>)</span> 
<a name="LN354"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>IS_ROMAN</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>_f</span><span class='Parentheses'>)</span>    <span class='Parentheses'>((</span><a href="formatting.c.html#LN354"><span class='Ref_to_Parameter'>_f</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>flag <span class='Operator'>& </span><a href="formatting.c.html#LN331"><span class='Ref_to_Const'>NUM_F_ROMAN</span></a><span class='Parentheses'>)</span> 
<a name="LN355"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>IS_MULTI</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>_f</span><span class='Parentheses'>)</span>    <span class='Parentheses'>((</span><a href="formatting.c.html#LN355"><span class='Ref_to_Parameter'>_f</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>flag <span class='Operator'>& </span><a href="formatting.c.html#LN332"><span class='Ref_to_Const'>NUM_F_MULTI</span></a><span class='Parentheses'>)</span> 
<a name="LN356"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>IS_EEEE</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>_f</span><span class='Parentheses'>)</span>     <span class='Parentheses'>((</span><a href="formatting.c.html#LN356"><span class='Ref_to_Parameter'>_f</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>flag <span class='Operator'>& </span><a href="formatting.c.html#LN335"><span class='Ref_to_Const'>NUM_F_EEEE</span></a><span class='Parentheses'>)</span> 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * Format picture cache 
 * 
 * We will cache datetime format pictures up to DCH_CACHE_SIZE bytes long; 
 * likewise number format pictures up to NUM_CACHE_SIZE bytes long. 
 * 
 * For simplicity, the cache entries are fixed-size, so they allow for the 
 * worst case of a FormatNode for each byte in the picture string. 
 * 
 * The max number of entries in the caches is DCH_CACHE_ENTRIES 
 * resp. NUM_CACHE_ENTRIES. 
 * ---------- 
 */ 
</span><a name="LN371"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>NUM_CACHE_SIZE</span>      <span class='Number'>64</span> 
<a name="LN372"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>NUM_CACHE_ENTRIES</span>   <span class='Number'>20</span> 
<a name="LN373"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>DCH_CACHE_SIZE</span>      <span class='Number'>128</span> 
<a name="LN374"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>DCH_CACHE_ENTRIES</span>   <span class='Number'>20</span> 
 
<span class='Control'>typedef</span> <span class='Control'>struct</span> 
<span class='Delimiter'>{ 
</span><a name="LN378"></a>    <a href="formatting.c.html#LN164"><span class='Ref_to_Struct'>FormatNode</span></a>  <span class='Declare_Member'>format</span><span class='Delimiter'>[</span><a href="formatting.c.html#LN373"><span class='Ref_to_Const'>DCH_CACHE_SIZE</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>]; 
</span><a name="LN379"></a>    <span class='Keyword'>char</span>        <span class='Declare_Member'>str</span><span class='Delimiter'>[</span><a href="formatting.c.html#LN373"><span class='Ref_to_Const'>DCH_CACHE_SIZE</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>]; 
</span><a name="LN380"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Member'>valid</span><span class='Delimiter'>; 
</span><a name="LN381"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>age</span><span class='Delimiter'>; 
</span><a name="LN382"></a>} <span class='Declare_Typedef'>DCHCacheEntry</span><span class='Delimiter'>; 
</span> 
<span class='Control'>typedef</span> <span class='Control'>struct</span> 
<span class='Delimiter'>{ 
</span><a name="LN386"></a>    <a href="formatting.c.html#LN164"><span class='Ref_to_Struct'>FormatNode</span></a>  <span class='Declare_Member'>format</span><span class='Delimiter'>[</span><a href="formatting.c.html#LN371"><span class='Ref_to_Const'>NUM_CACHE_SIZE</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>]; 
</span><a name="LN387"></a>    <span class='Keyword'>char</span>        <span class='Declare_Member'>str</span><span class='Delimiter'>[</span><a href="formatting.c.html#LN371"><span class='Ref_to_Const'>NUM_CACHE_SIZE</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>]; 
</span><a name="LN388"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Member'>valid</span><span class='Delimiter'>; 
</span><a name="LN389"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>age</span><span class='Delimiter'>; 
</span><a name="LN390"></a>    <a href="formatting.c.html#LN305"><span class='Ref_to_Typedef'>NUMDesc</span></a>     <span class='Declare_Member'>Num</span><span class='Delimiter'>; 
</span><a name="LN391"></a>} <span class='Declare_Typedef'>NUMCacheEntry</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* global cache for date/time format pictures */ 
</span><a name="LN394"></a><span class='Keyword'>static </span><a href="formatting.c.html#LN376"><span class='Ref_to_Typedef'>DCHCacheEntry</span></a> <span class='Declare_Var'>DCHCache</span><span class='Delimiter'>[</span><a href="formatting.c.html#LN374"><span class='Ref_to_Const'>DCH_CACHE_ENTRIES</span></a><span class='Delimiter'>]; 
</span><a name="LN395"></a><span class='Keyword'>static int</span>  <span class='Declare_Var'>n_DCHCache</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* current number of entries */ 
</span><a name="LN396"></a><span class='Keyword'>static int</span>  <span class='Declare_Var'>DCHCounter</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* aging-event counter */ 
</span> 
<span class='Comment_Multi_Line'>/* global cache for number format pictures */ 
</span><a name="LN399"></a><span class='Keyword'>static </span><a href="formatting.c.html#LN384"><span class='Ref_to_Typedef'>NUMCacheEntry</span></a> <span class='Declare_Var'>NUMCache</span><span class='Delimiter'>[</span><a href="formatting.c.html#LN372"><span class='Ref_to_Const'>NUM_CACHE_ENTRIES</span></a><span class='Delimiter'>]; 
</span><a name="LN400"></a><span class='Keyword'>static int</span>  <span class='Declare_Var'>n_NUMCache</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* current number of entries */ 
</span><a name="LN401"></a><span class='Keyword'>static int</span>  <span class='Declare_Var'>NUMCounter</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* aging-event counter */ 
</span> 
<span class='Comment_Multi_Line'>/* ---------- 
 * For char-&GT;date/time conversion 
 * ---------- 
 */ 
</span><span class='Control'>typedef</span> <span class='Control'>struct</span> 
<span class='Delimiter'>{ 
</span><a name="LN409"></a>    <a href="formatting.c.html#LN146"><span class='Ref_to_Typedef'>FromCharDateMode</span></a> <span class='Declare_Member'>mode</span><span class='Delimiter'>; 
</span><a name="LN410"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>hh</span><span class='Delimiter'>, 
</span><a name="LN411"></a>                <span class='Declare_Member'>pm</span><span class='Delimiter'>, 
</span><a name="LN412"></a>                <span class='Declare_Member'>mi</span><span class='Delimiter'>, 
</span><a name="LN413"></a>                <span class='Declare_Member'>ss</span><span class='Delimiter'>, 
</span><a name="LN414"></a>                <span class='Declare_Member'>ssss</span><span class='Delimiter'>, 
</span><a name="LN415"></a>                <span class='Declare_Member'>d</span><span class='Delimiter'>,</span>              <span class='Comment_Single_Line'>/* stored as 1-7, Sunday = 1, 0 means missing */ 
</span><a name="LN416"></a>                <span class='Declare_Member'>dd</span><span class='Delimiter'>, 
</span><a name="LN417"></a>                <span class='Declare_Member'>ddd</span><span class='Delimiter'>, 
</span><a name="LN418"></a>                <span class='Declare_Member'>mm</span><span class='Delimiter'>, 
</span><a name="LN419"></a>                <span class='Declare_Member'>ms</span><span class='Delimiter'>, 
</span><a name="LN420"></a>                <span class='Declare_Member'>year</span><span class='Delimiter'>, 
</span><a name="LN421"></a>                <span class='Declare_Member'>bc</span><span class='Delimiter'>, 
</span><a name="LN422"></a>                <span class='Declare_Member'>ww</span><span class='Delimiter'>, 
</span><a name="LN423"></a>                <span class='Declare_Member'>w</span><span class='Delimiter'>, 
</span><a name="LN424"></a>                <span class='Declare_Member'>cc</span><span class='Delimiter'>, 
</span><a name="LN425"></a>                <span class='Declare_Member'>j</span><span class='Delimiter'>, 
</span><a name="LN426"></a>                <span class='Declare_Member'>us</span><span class='Delimiter'>, 
</span><a name="LN427"></a>                <span class='Declare_Member'>yysz</span><span class='Delimiter'>,</span>           <span class='Comment_Single_Line'>/* is it YY or YYYY ? */ 
</span><a name="LN428"></a>                <span class='Declare_Member'>clock</span><span class='Delimiter'>;</span>          <span class='Comment_Single_Line'>/* 12 or 24 hour clock? */ 
</span><a name="LN429"></a><span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end {anonTmFromChar} &raquo; </span> <span class='Declare_Typedef'>TmFromChar</span><span class='Delimiter'>; 
</span> 
<a name="LN431"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>ZERO_tmfc</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>_X</span><span class='Parentheses'>) </span>memset<span class='Parentheses'>(</span><a href="formatting.c.html#LN431"><span class='Ref_to_Parameter'>_X</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="formatting.c.html#LN407"><span class='Ref_to_Typedef'>TmFromChar</span></a><span class='Parentheses'>))</span> 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * Debug 
 * ---------- 
 */ 
</span><span class='Directive'>#ifdef</span> DEBUG_TO_FROM_CHAR 
<a name="LN438"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>DEBUG_TMFC</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>_X</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN62"><span class='Ref_to_Const'>DEBUG_elog_output</span></a><span class='Delimiter'>, </span><span class='String'>"TMFC:\nmode %d\nhh %d\npm %d\nmi %d\nss %d\nssss %d\nd %d\ndd %d\nddd %d\nmm %d\nms: %d\nyear %d\nbc %d\nww %d\nw %d\ncc %d\nj %d\nus: %d\nyysz: %d\nclock: %d"</span><span class='Delimiter'>, </span><span class='Operator'>\ 
</span>            <span class='Parentheses'>(</span><a href="formatting.c.html#LN438"><span class='Ref_to_Parameter'>_X</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>mode<span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN438"><span class='Ref_to_Parameter'>_X</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>hh<span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN438"><span class='Ref_to_Parameter'>_X</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>pm<span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN438"><span class='Ref_to_Parameter'>_X</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>mi<span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN438"><span class='Ref_to_Parameter'>_X</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>ss<span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN438"><span class='Ref_to_Parameter'>_X</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>ssss<span class='Delimiter'>, </span><span class='Operator'>\ 
</span>            <span class='Parentheses'>(</span><a href="formatting.c.html#LN438"><span class='Ref_to_Parameter'>_X</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>d<span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN438"><span class='Ref_to_Parameter'>_X</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>dd<span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN438"><span class='Ref_to_Parameter'>_X</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>ddd<span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN438"><span class='Ref_to_Parameter'>_X</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>mm<span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN438"><span class='Ref_to_Parameter'>_X</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>ms<span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN438"><span class='Ref_to_Parameter'>_X</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>year<span class='Delimiter'>, </span><span class='Operator'>\ 
</span>            <span class='Parentheses'>(</span><a href="formatting.c.html#LN438"><span class='Ref_to_Parameter'>_X</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>bc<span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN438"><span class='Ref_to_Parameter'>_X</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>ww<span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN438"><span class='Ref_to_Parameter'>_X</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>w<span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN438"><span class='Ref_to_Parameter'>_X</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>cc<span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN438"><span class='Ref_to_Parameter'>_X</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>j<span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN438"><span class='Ref_to_Parameter'>_X</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>us<span class='Delimiter'>, </span><span class='Operator'>\ 
</span>            <span class='Parentheses'>(</span><a href="formatting.c.html#LN438"><span class='Ref_to_Parameter'>_X</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>yysz<span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN438"><span class='Ref_to_Parameter'>_X</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>clock<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN444"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>DEBUG_TM</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>_X</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN62"><span class='Ref_to_Const'>DEBUG_elog_output</span></a><span class='Delimiter'>, </span><span class='String'>"TM:\nsec %d\nyear %d\nmin %d\nwday %d\nhour %d\nyday %d\nmday %d\nnisdst %d\nmon %d\n"</span><span class='Delimiter'>,</span><span class='Operator'>\ 
</span>            <span class='Parentheses'>(</span><a href="formatting.c.html#LN444"><span class='Ref_to_Parameter'>_X</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>tm_sec<span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN444"><span class='Ref_to_Parameter'>_X</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>tm_year<span class='Delimiter'>,</span><span class='Operator'>\ 
</span>            <span class='Parentheses'>(</span><a href="formatting.c.html#LN444"><span class='Ref_to_Parameter'>_X</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>tm_min<span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN444"><span class='Ref_to_Parameter'>_X</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>tm_wday<span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN444"><span class='Ref_to_Parameter'>_X</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>tm_hour<span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN444"><span class='Ref_to_Parameter'>_X</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>tm_yday<span class='Delimiter'>,</span><span class='Operator'>\ 
</span>            <span class='Parentheses'>(</span><a href="formatting.c.html#LN444"><span class='Ref_to_Parameter'>_X</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>tm_mday<span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN444"><span class='Ref_to_Parameter'>_X</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>tm_isdst<span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN444"><span class='Ref_to_Parameter'>_X</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>tm_mon<span class='Parentheses'>)</span> 
<span class='Directive'>#else</span> 
<a name="LN450"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>DEBUG_TMFC</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>_X</span><span class='Parentheses'>) 
</span><a name="LN451"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>DEBUG_TM</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>_X</span><span class='Parentheses'>) 
</span><span class='Directive'>#endif</span> 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * Datetime to char conversion 
 * ---------- 
 */ 
</span><a name="LN458"></a><span class='Control'>typedef</span> <span class='Control'>struct</span> <span class='Declare_Struct'>TmToChar</span> 
<span class='Delimiter'>{ 
</span><a name="LN460"></a>    <span class='Control'>struct</span> <a href="../../../include/pgtime.h.html#LN24"><span class='Ref_to_Struct'>pg_tm</span></a> <span class='Declare_Member'>tm</span><span class='Delimiter'>;</span>            <span class='Comment_Single_Line'>/* classic 'tm' struct */ 
</span><a name="LN461"></a>    <a href="../../../interfaces/ecpg/pgtypeslib/dt.h.html#LN9"><span class='Ref_to_Typedef'>fsec_t</span></a>      <span class='Declare_Member'>fsec</span><span class='Delimiter'>;</span>           <span class='Comment_Single_Line'>/* fractional seconds */ 
</span><a name="LN462"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Member'>tzn</span><span class='Delimiter'>;</span>            <span class='Comment_Single_Line'>/* timezone */ 
</span><a name="LN463"></a><span class='Delimiter'>} </span><span class='Declare_Typedef'>TmToChar</span><span class='Delimiter'>; 
</span> 
<a name="LN465"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>tmtcTm</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>_X</span><span class='Parentheses'>)</span>  <span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="formatting.c.html#LN465"><span class='Ref_to_Parameter'>_X</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>tm<span class='Parentheses'>)</span> 
<a name="LN466"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>tmtcTzn</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>_X</span><span class='Parentheses'>) ((</span><a href="formatting.c.html#LN466"><span class='Ref_to_Parameter'>_X</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>tzn<span class='Parentheses'>)</span> 
<a name="LN467"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>tmtcFsec</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>_X</span><span class='Parentheses'>)</span>    <span class='Parentheses'>((</span><a href="formatting.c.html#LN467"><span class='Ref_to_Parameter'>_X</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>fsec<span class='Parentheses'>)</span> 
 
<a name="LN469"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>ZERO_tm</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>_X</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span><span class='Control'>do</span> <span class='Delimiter'>{</span>    <span class='Operator'>\ 
</span>    <span class='Parentheses'>(</span><a href="formatting.c.html#LN469"><span class='Ref_to_Parameter'>_X</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>tm_sec  <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN469"><span class='Ref_to_Parameter'>_X</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>tm_year <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN469"><span class='Ref_to_Parameter'>_X</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>tm_min <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN469"><span class='Ref_to_Parameter'>_X</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>tm_wday <span class='Operator'>= \ 
</span>    <span class='Parentheses'>(</span><a href="formatting.c.html#LN469"><span class='Ref_to_Parameter'>_X</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>tm_hour <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN469"><span class='Ref_to_Parameter'>_X</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>tm_yday <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN469"><span class='Ref_to_Parameter'>_X</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>tm_isdst <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><span class='Operator'>\ 
</span>    <span class='Parentheses'>(</span><a href="formatting.c.html#LN469"><span class='Ref_to_Parameter'>_X</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>tm_mday <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN469"><span class='Ref_to_Parameter'>_X</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>tm_mon  <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; </span><span class='Operator'>\ 
</span><span class='Delimiter'>} </span><span class='Control'>while</span><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>) 
</span> 
<a name="LN476"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>ZERO_tmtc</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>_X</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span><span class='Control'>do</span> <span class='Delimiter'>{ </span><span class='Operator'>\ 
</span>    <a href="formatting.c.html#LN469"><span class='Ref_to_Macro'>ZERO_tm</span></a><span class='Parentheses'>(</span> <a href="formatting.c.html#LN465"><span class='Ref_to_Macro'>tmtcTm</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN476"><span class='Ref_to_Parameter'>_X</span></a><span class='Parentheses'>) )</span><span class='Delimiter'>; </span><span class='Operator'>\ 
</span>    <a href="formatting.c.html#LN467"><span class='Ref_to_Macro'>tmtcFsec</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN476"><span class='Ref_to_Parameter'>_X</span></a><span class='Parentheses'>) </span><span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><span class='Operator'>\ 
</span>    <a href="formatting.c.html#LN466"><span class='Ref_to_Macro'>tmtcTzn</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN476"><span class='Ref_to_Parameter'>_X</span></a><span class='Parentheses'>) </span><span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; </span><span class='Operator'>\ 
</span><span class='Delimiter'>} </span><span class='Control'>while</span><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>) 
</span> 
<span class='Comment_Multi_Line'>/* 
 *  to_char(time) appears to to_char() as an interval, so this check 
 *  is really for interval and time data types. 
 */ 
</span><a name="LN487"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>INVALID_FOR_INTERVAL</span>  <span class='Operator'>\ 
</span><span class='Control'>do</span> <span class='Delimiter'>{ </span><span class='Operator'>\ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span>is_interval<span class='Parentheses'>) </span><span class='Operator'>\ 
</span>        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='Operator'>\ 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INVALID_DATETIME_FORMAT<span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='Operator'>\ 
</span>                 <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"invalid format specification for an interval value"</span><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='Operator'>\ 
</span>                 <a href="../error/elog.c.html#LN985"><span class='Ref_to_Func'>errhint</span></a><span class='Parentheses'>(</span><span class='String'>"Intervals are not tied to specific calendar dates."</span><span class='Parentheses'>)))</span><span class='Delimiter'>; </span><span class='Operator'>\ 
</span><span class='Delimiter'>} </span><span class='Control'>while</span><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>) 
</span> 
<span class='Comment_Multi_Line'>/***************************************************************************** 
 *          KeyWord definitions 
 *****************************************************************************/ 
</span> 
<span class='Comment_Multi_Line'>/* ---------- 
 * Suffixes: 
 * ---------- 
 */ 
</span><a name="LN504"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>DCH_S_FM</span>    <span class='Number'>0x01</span> 
<a name="LN505"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>DCH_S_TH</span>    <span class='Number'>0x02</span> 
<a name="LN506"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>DCH_S_th</span>    <span class='Number'>0x04</span> 
<a name="LN507"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>DCH_S_SP</span>    <span class='Number'>0x08</span> 
<a name="LN508"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>DCH_S_TM</span>    <span class='Number'>0x10</span> 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * Suffix tests 
 * ---------- 
 */ 
</span><a name="LN514"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>S_THth</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>_s</span><span class='Parentheses'>)</span>  <span class='Parentheses'>((((</span><a href="formatting.c.html#LN514"><span class='Ref_to_Parameter'>_s</span></a><span class='Parentheses'>) </span><span class='Operator'>& </span><a href="formatting.c.html#LN505"><span class='Ref_to_Const'>DCH_S_TH</span></a><span class='Parentheses'>)</span> <span class='Operator'>|| </span><span class='Parentheses'>((</span><a href="formatting.c.html#LN514"><span class='Ref_to_Parameter'>_s</span></a><span class='Parentheses'>) </span><span class='Operator'>& </span><a href="formatting.c.html#LN506"><span class='Ref_to_Const'>DCH_S_th</span></a><span class='Parentheses'>))</span> <span class='Operator'>? </span><span class='Number'>1</span> <span class='Operator'>: </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
<a name="LN515"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>S_TH</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>_s</span><span class='Parentheses'>)</span>    <span class='Parentheses'>(((</span><a href="formatting.c.html#LN515"><span class='Ref_to_Parameter'>_s</span></a><span class='Parentheses'>) </span><span class='Operator'>& </span><a href="formatting.c.html#LN505"><span class='Ref_to_Const'>DCH_S_TH</span></a><span class='Parentheses'>)</span> <span class='Operator'>? </span><span class='Number'>1</span> <span class='Operator'>: </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
<a name="LN516"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>S_th</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>_s</span><span class='Parentheses'>)</span>    <span class='Parentheses'>(((</span><a href="formatting.c.html#LN516"><span class='Ref_to_Parameter'>_s</span></a><span class='Parentheses'>) </span><span class='Operator'>& </span><a href="formatting.c.html#LN506"><span class='Ref_to_Const'>DCH_S_th</span></a><span class='Parentheses'>)</span> <span class='Operator'>? </span><span class='Number'>1</span> <span class='Operator'>: </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
<a name="LN517"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>S_TH_TYPE</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>_s</span><span class='Parentheses'>)</span>   <span class='Parentheses'>(((</span><a href="formatting.c.html#LN517"><span class='Ref_to_Parameter'>_s</span></a><span class='Parentheses'>) </span><span class='Operator'>& </span><a href="formatting.c.html#LN505"><span class='Ref_to_Const'>DCH_S_TH</span></a><span class='Parentheses'>)</span> <span class='Operator'>? </span><a href="formatting.c.html#LN298"><span class='Ref_to_Const'>TH_UPPER</span></a> <span class='Operator'>: </span><a href="formatting.c.html#LN299"><span class='Ref_to_Const'>TH_LOWER</span></a><span class='Parentheses'>)</span> 
 
<span class='Comment_Multi_Line'>/* Oracle toggles FM behavior, we don't; see docs. */ 
</span><a name="LN520"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>S_FM</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>_s</span><span class='Parentheses'>)</span>    <span class='Parentheses'>(((</span><a href="formatting.c.html#LN520"><span class='Ref_to_Parameter'>_s</span></a><span class='Parentheses'>) </span><span class='Operator'>& </span><a href="formatting.c.html#LN504"><span class='Ref_to_Const'>DCH_S_FM</span></a><span class='Parentheses'>)</span> <span class='Operator'>? </span><span class='Number'>1</span> <span class='Operator'>: </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
<a name="LN521"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>S_SP</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>_s</span><span class='Parentheses'>)</span>    <span class='Parentheses'>(((</span><a href="formatting.c.html#LN521"><span class='Ref_to_Parameter'>_s</span></a><span class='Parentheses'>) </span><span class='Operator'>& </span><a href="formatting.c.html#LN507"><span class='Ref_to_Const'>DCH_S_SP</span></a><span class='Parentheses'>)</span> <span class='Operator'>? </span><span class='Number'>1</span> <span class='Operator'>: </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
<a name="LN522"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>S_TM</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>_s</span><span class='Parentheses'>)</span>    <span class='Parentheses'>(((</span><a href="formatting.c.html#LN522"><span class='Ref_to_Parameter'>_s</span></a><span class='Parentheses'>) </span><span class='Operator'>& </span><a href="formatting.c.html#LN508"><span class='Ref_to_Const'>DCH_S_TM</span></a><span class='Parentheses'>)</span> <span class='Operator'>? </span><span class='Number'>1</span> <span class='Operator'>: </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * Suffixes definition for DATE-TIME TO/FROM CHAR 
 * ---------- 
 */ 
</span><a name="LN528"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>TM_SUFFIX_LEN</span>   <span class='Number'>2</span> 
 
<a name="LN530"></a><span class='Keyword'>static const </span><a href="formatting.c.html#LN131"><span class='Ref_to_Typedef'>KeySuffix</span></a> <span class='Declare_Var'>DCH_suff</span><span class='Delimiter'>[] </span><span class='Operator'>= </span><span class='Delimiter'>{ 
</span>    <span class='Delimiter'>{</span><span class='String'>"FM"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN504"><span class='Ref_to_Const'>DCH_S_FM</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN176"><span class='Ref_to_Const'>SUFFTYPE_PREFIX</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"fm"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN504"><span class='Ref_to_Const'>DCH_S_FM</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN176"><span class='Ref_to_Const'>SUFFTYPE_PREFIX</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"TM"</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN528"><span class='Ref_to_Const'>TM_SUFFIX_LEN</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN508"><span class='Ref_to_Const'>DCH_S_TM</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN176"><span class='Ref_to_Const'>SUFFTYPE_PREFIX</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"tm"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN508"><span class='Ref_to_Const'>DCH_S_TM</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN176"><span class='Ref_to_Const'>SUFFTYPE_PREFIX</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"TH"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN505"><span class='Ref_to_Const'>DCH_S_TH</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN177"><span class='Ref_to_Const'>SUFFTYPE_POSTFIX</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"th"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN506"><span class='Ref_to_Const'>DCH_S_th</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN177"><span class='Ref_to_Const'>SUFFTYPE_POSTFIX</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"SP"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN507"><span class='Ref_to_Const'>DCH_S_SP</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN177"><span class='Ref_to_Const'>SUFFTYPE_POSTFIX</span></a><span class='Delimiter'>}, 
</span>    <span class='Comment_Multi_Line'>/* last */ 
</span>    <span class='Delimiter'>{</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>} 
}; 
</span> 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * Format-pictures (KeyWord). 
 * 
 * The KeyWord field; alphabetic sorted, *BUT* strings alike is sorted 
 *        complicated -to-&GT; easy: 
 * 
 *  (example: "DDD","DD","Day","D" ) 
 * 
 * (this specific sort needs the algorithm for sequential search for strings, 
 * which not has exact end; -&GT; How keyword is in "HH12blabla" ? - "HH" 
 * or "HH12"? You must first try "HH12", because "HH" is in string, but 
 * it is not good. 
 * 
 * (!) 
 *   - Position for the keyword is similar as position in the enum DCH/NUM_poz. 
 * (!) 
 * 
 * For fast search is used the 'int index[]', index is ascii table from position 
 * 32 (' ') to 126 (~), in this index is DCH_ / NUM_ enums for each ASCII 
 * position or -1 if char is not used in the KeyWord. Search example for 
 * string "MM": 
 *  1)  see in index to index['M' - 32], 
 *  2)  take keywords position (enum DCH_MI) from index 
 *  3)  run sequential search in keywords[] from this position 
 * 
 * ---------- 
 */ 
</span> 
<span class='Control'>typedef</span> <span class='Control'>enum</span> 
<span class='Delimiter'>{ 
</span><a name="LN573"></a>    <span class='Declare_Enum_Const'>DCH_A_D</span><span class='Delimiter'>, 
</span><a name="LN574"></a>    <span class='Declare_Enum_Const'>DCH_A_M</span><span class='Delimiter'>, 
</span><a name="LN575"></a>    <span class='Declare_Enum_Const'>DCH_AD</span><span class='Delimiter'>, 
</span><a name="LN576"></a>    <span class='Declare_Enum_Const'>DCH_AM</span><span class='Delimiter'>, 
</span><a name="LN577"></a>    <span class='Declare_Enum_Const'>DCH_B_C</span><span class='Delimiter'>, 
</span><a name="LN578"></a>    <span class='Declare_Enum_Const'>DCH_BC</span><span class='Delimiter'>, 
</span><a name="LN579"></a>    <span class='Declare_Enum_Const'>DCH_CC</span><span class='Delimiter'>, 
</span><a name="LN580"></a>    <span class='Declare_Enum_Const'>DCH_DAY</span><span class='Delimiter'>, 
</span><a name="LN581"></a>    <span class='Declare_Enum_Const'>DCH_DDD</span><span class='Delimiter'>, 
</span><a name="LN582"></a>    <span class='Declare_Enum_Const'>DCH_DD</span><span class='Delimiter'>, 
</span><a name="LN583"></a>    <span class='Declare_Enum_Const'>DCH_DY</span><span class='Delimiter'>, 
</span><a name="LN584"></a>    <span class='Declare_Enum_Const'>DCH_Day</span><span class='Delimiter'>, 
</span><a name="LN585"></a>    <span class='Declare_Enum_Const'>DCH_Dy</span><span class='Delimiter'>, 
</span><a name="LN586"></a>    <span class='Declare_Enum_Const'>DCH_D</span><span class='Delimiter'>, 
</span><a name="LN587"></a>    <span class='Declare_Enum_Const'>DCH_FX</span><span class='Delimiter'>,</span>                     <span class='Comment_Single_Line'>/* global suffix */ 
</span><a name="LN588"></a>    <span class='Declare_Enum_Const'>DCH_HH24</span><span class='Delimiter'>, 
</span><a name="LN589"></a>    <span class='Declare_Enum_Const'>DCH_HH12</span><span class='Delimiter'>, 
</span><a name="LN590"></a>    <span class='Declare_Enum_Const'>DCH_HH</span><span class='Delimiter'>, 
</span><a name="LN591"></a>    <span class='Declare_Enum_Const'>DCH_IDDD</span><span class='Delimiter'>, 
</span><a name="LN592"></a>    <span class='Declare_Enum_Const'>DCH_ID</span><span class='Delimiter'>, 
</span><a name="LN593"></a>    <span class='Declare_Enum_Const'>DCH_IW</span><span class='Delimiter'>, 
</span><a name="LN594"></a>    <span class='Declare_Enum_Const'>DCH_IYYY</span><span class='Delimiter'>, 
</span><a name="LN595"></a>    <span class='Declare_Enum_Const'>DCH_IYY</span><span class='Delimiter'>, 
</span><a name="LN596"></a>    <span class='Declare_Enum_Const'>DCH_IY</span><span class='Delimiter'>, 
</span><a name="LN597"></a>    <span class='Declare_Enum_Const'>DCH_I</span><span class='Delimiter'>, 
</span><a name="LN598"></a>    <span class='Declare_Enum_Const'>DCH_J</span><span class='Delimiter'>, 
</span><a name="LN599"></a>    <span class='Declare_Enum_Const'>DCH_MI</span><span class='Delimiter'>, 
</span><a name="LN600"></a>    <span class='Declare_Enum_Const'>DCH_MM</span><span class='Delimiter'>, 
</span><a name="LN601"></a>    <span class='Declare_Enum_Const'>DCH_MONTH</span><span class='Delimiter'>, 
</span><a name="LN602"></a>    <span class='Declare_Enum_Const'>DCH_MON</span><span class='Delimiter'>, 
</span><a name="LN603"></a>    <span class='Declare_Enum_Const'>DCH_MS</span><span class='Delimiter'>, 
</span><a name="LN604"></a>    <span class='Declare_Enum_Const'>DCH_Month</span><span class='Delimiter'>, 
</span><a name="LN605"></a>    <span class='Declare_Enum_Const'>DCH_Mon</span><span class='Delimiter'>, 
</span><a name="LN606"></a>    <span class='Declare_Enum_Const'>DCH_OF</span><span class='Delimiter'>, 
</span><a name="LN607"></a>    <span class='Declare_Enum_Const'>DCH_P_M</span><span class='Delimiter'>, 
</span><a name="LN608"></a>    <span class='Declare_Enum_Const'>DCH_PM</span><span class='Delimiter'>, 
</span><a name="LN609"></a>    <span class='Declare_Enum_Const'>DCH_Q</span><span class='Delimiter'>, 
</span><a name="LN610"></a>    <span class='Declare_Enum_Const'>DCH_RM</span><span class='Delimiter'>, 
</span><a name="LN611"></a>    <span class='Declare_Enum_Const'>DCH_SSSS</span><span class='Delimiter'>, 
</span><a name="LN612"></a>    <span class='Declare_Enum_Const'>DCH_SS</span><span class='Delimiter'>, 
</span><a name="LN613"></a>    <span class='Declare_Enum_Const'>DCH_TZ</span><span class='Delimiter'>, 
</span><a name="LN614"></a>    <span class='Declare_Enum_Const'>DCH_US</span><span class='Delimiter'>, 
</span><a name="LN615"></a>    <span class='Declare_Enum_Const'>DCH_WW</span><span class='Delimiter'>, 
</span><a name="LN616"></a>    <span class='Declare_Enum_Const'>DCH_W</span><span class='Delimiter'>, 
</span><a name="LN617"></a>    <span class='Declare_Enum_Const'>DCH_Y_YYY</span><span class='Delimiter'>, 
</span><a name="LN618"></a>    <span class='Declare_Enum_Const'>DCH_YYYY</span><span class='Delimiter'>, 
</span><a name="LN619"></a>    <span class='Declare_Enum_Const'>DCH_YYY</span><span class='Delimiter'>, 
</span><a name="LN620"></a>    <span class='Declare_Enum_Const'>DCH_YY</span><span class='Delimiter'>, 
</span><a name="LN621"></a>    <span class='Declare_Enum_Const'>DCH_Y</span><span class='Delimiter'>, 
</span><a name="LN622"></a>    <span class='Declare_Enum_Const'>DCH_a_d</span><span class='Delimiter'>, 
</span><a name="LN623"></a>    <span class='Declare_Enum_Const'>DCH_a_m</span><span class='Delimiter'>, 
</span><a name="LN624"></a>    <span class='Declare_Enum_Const'>DCH_ad</span><span class='Delimiter'>, 
</span><a name="LN625"></a>    <span class='Declare_Enum_Const'>DCH_am</span><span class='Delimiter'>, 
</span><a name="LN626"></a>    <span class='Declare_Enum_Const'>DCH_b_c</span><span class='Delimiter'>, 
</span><a name="LN627"></a>    <span class='Declare_Enum_Const'>DCH_bc</span><span class='Delimiter'>, 
</span><a name="LN628"></a>    <span class='Declare_Enum_Const'>DCH_cc</span><span class='Delimiter'>, 
</span><a name="LN629"></a>    <span class='Declare_Enum_Const'>DCH_day</span><span class='Delimiter'>, 
</span><a name="LN630"></a>    <span class='Declare_Enum_Const'>DCH_ddd</span><span class='Delimiter'>, 
</span><a name="LN631"></a>    <span class='Declare_Enum_Const'>DCH_dd</span><span class='Delimiter'>, 
</span><a name="LN632"></a>    <span class='Declare_Enum_Const'>DCH_dy</span><span class='Delimiter'>, 
</span><a name="LN633"></a>    <span class='Declare_Enum_Const'>DCH_d</span><span class='Delimiter'>, 
</span><a name="LN634"></a>    <span class='Declare_Enum_Const'>DCH_fx</span><span class='Delimiter'>, 
</span><a name="LN635"></a>    <span class='Declare_Enum_Const'>DCH_hh24</span><span class='Delimiter'>, 
</span><a name="LN636"></a>    <span class='Declare_Enum_Const'>DCH_hh12</span><span class='Delimiter'>, 
</span><a name="LN637"></a>    <span class='Declare_Enum_Const'>DCH_hh</span><span class='Delimiter'>, 
</span><a name="LN638"></a>    <span class='Declare_Enum_Const'>DCH_iddd</span><span class='Delimiter'>, 
</span><a name="LN639"></a>    <span class='Declare_Enum_Const'>DCH_id</span><span class='Delimiter'>, 
</span><a name="LN640"></a>    <span class='Declare_Enum_Const'>DCH_iw</span><span class='Delimiter'>, 
</span><a name="LN641"></a>    <span class='Declare_Enum_Const'>DCH_iyyy</span><span class='Delimiter'>, 
</span><a name="LN642"></a>    <span class='Declare_Enum_Const'>DCH_iyy</span><span class='Delimiter'>, 
</span><a name="LN643"></a>    <span class='Declare_Enum_Const'>DCH_iy</span><span class='Delimiter'>, 
</span><a name="LN644"></a>    <span class='Declare_Enum_Const'>DCH_i</span><span class='Delimiter'>, 
</span><a name="LN645"></a>    <span class='Declare_Enum_Const'>DCH_j</span><span class='Delimiter'>, 
</span><a name="LN646"></a>    <span class='Declare_Enum_Const'>DCH_mi</span><span class='Delimiter'>, 
</span><a name="LN647"></a>    <span class='Declare_Enum_Const'>DCH_mm</span><span class='Delimiter'>, 
</span><a name="LN648"></a>    <span class='Declare_Enum_Const'>DCH_month</span><span class='Delimiter'>, 
</span><a name="LN649"></a>    <span class='Declare_Enum_Const'>DCH_mon</span><span class='Delimiter'>, 
</span><a name="LN650"></a>    <span class='Declare_Enum_Const'>DCH_ms</span><span class='Delimiter'>, 
</span><a name="LN651"></a>    <span class='Declare_Enum_Const'>DCH_p_m</span><span class='Delimiter'>, 
</span><a name="LN652"></a>    <span class='Declare_Enum_Const'>DCH_pm</span><span class='Delimiter'>, 
</span><a name="LN653"></a>    <span class='Declare_Enum_Const'>DCH_q</span><span class='Delimiter'>, 
</span><a name="LN654"></a>    <span class='Declare_Enum_Const'>DCH_rm</span><span class='Delimiter'>, 
</span><a name="LN655"></a>    <span class='Declare_Enum_Const'>DCH_ssss</span><span class='Delimiter'>, 
</span><a name="LN656"></a>    <span class='Declare_Enum_Const'>DCH_ss</span><span class='Delimiter'>, 
</span><a name="LN657"></a>    <span class='Declare_Enum_Const'>DCH_tz</span><span class='Delimiter'>, 
</span><a name="LN658"></a>    <span class='Declare_Enum_Const'>DCH_us</span><span class='Delimiter'>, 
</span><a name="LN659"></a>    <span class='Declare_Enum_Const'>DCH_ww</span><span class='Delimiter'>, 
</span><a name="LN660"></a>    <span class='Declare_Enum_Const'>DCH_w</span><span class='Delimiter'>, 
</span><a name="LN661"></a>    <span class='Declare_Enum_Const'>DCH_y_yyy</span><span class='Delimiter'>, 
</span><a name="LN662"></a>    <span class='Declare_Enum_Const'>DCH_yyyy</span><span class='Delimiter'>, 
</span><a name="LN663"></a>    <span class='Declare_Enum_Const'>DCH_yyy</span><span class='Delimiter'>, 
</span><a name="LN664"></a>    <span class='Declare_Enum_Const'>DCH_yy</span><span class='Delimiter'>, 
</span><a name="LN665"></a>    <span class='Declare_Enum_Const'>DCH_y</span><span class='Delimiter'>, 
</span> 
    <span class='Comment_Multi_Line'>/* last */ 
</span><a name="LN668"></a>    <span class='Declare_Enum_Const'>_DCH_last_</span> 
<a name="LN669"></a><span class='Delimiter'>}</span>   <span class='Declare_Typedef'>DCH_poz</span><span class='Delimiter'>; 
</span> 
<span class='Control'>typedef</span> <span class='Control'>enum</span> 
<span class='Delimiter'>{ 
</span><a name="LN673"></a>    <span class='Declare_Enum_Const'>NUM_COMMA</span><span class='Delimiter'>, 
</span><a name="LN674"></a>    <span class='Declare_Enum_Const'>NUM_DEC</span><span class='Delimiter'>, 
</span><a name="LN675"></a>    <span class='Declare_Enum_Const'>NUM_0</span><span class='Delimiter'>, 
</span><a name="LN676"></a>    <span class='Declare_Enum_Const'>NUM_9</span><span class='Delimiter'>, 
</span><a name="LN677"></a>    <span class='Declare_Enum_Const'>NUM_B</span><span class='Delimiter'>, 
</span><a name="LN678"></a>    <span class='Declare_Enum_Const'>NUM_C</span><span class='Delimiter'>, 
</span><a name="LN679"></a>    <span class='Declare_Enum_Const'>NUM_D</span><span class='Delimiter'>, 
</span><a name="LN680"></a>    <span class='Declare_Enum_Const'>NUM_E</span><span class='Delimiter'>, 
</span><a name="LN681"></a>    <span class='Declare_Enum_Const'>NUM_FM</span><span class='Delimiter'>, 
</span><a name="LN682"></a>    <span class='Declare_Enum_Const'>NUM_G</span><span class='Delimiter'>, 
</span><a name="LN683"></a>    <span class='Declare_Enum_Const'>NUM_L</span><span class='Delimiter'>, 
</span><a name="LN684"></a>    <span class='Declare_Enum_Const'>NUM_MI</span><span class='Delimiter'>, 
</span><a name="LN685"></a>    <span class='Declare_Enum_Const'>NUM_PL</span><span class='Delimiter'>, 
</span><a name="LN686"></a>    <span class='Declare_Enum_Const'>NUM_PR</span><span class='Delimiter'>, 
</span><a name="LN687"></a>    <span class='Declare_Enum_Const'>NUM_RN</span><span class='Delimiter'>, 
</span><a name="LN688"></a>    <span class='Declare_Enum_Const'>NUM_SG</span><span class='Delimiter'>, 
</span><a name="LN689"></a>    <span class='Declare_Enum_Const'>NUM_SP</span><span class='Delimiter'>, 
</span><a name="LN690"></a>    <span class='Declare_Enum_Const'>NUM_S</span><span class='Delimiter'>, 
</span><a name="LN691"></a>    <span class='Declare_Enum_Const'>NUM_TH</span><span class='Delimiter'>, 
</span><a name="LN692"></a>    <span class='Declare_Enum_Const'>NUM_V</span><span class='Delimiter'>, 
</span><a name="LN693"></a>    <span class='Declare_Enum_Const'>NUM_b</span><span class='Delimiter'>, 
</span><a name="LN694"></a>    <span class='Declare_Enum_Const'>NUM_c</span><span class='Delimiter'>, 
</span><a name="LN695"></a>    <span class='Declare_Enum_Const'>NUM_d</span><span class='Delimiter'>, 
</span><a name="LN696"></a>    <span class='Declare_Enum_Const'>NUM_e</span><span class='Delimiter'>, 
</span><a name="LN697"></a>    <span class='Declare_Enum_Const'>NUM_fm</span><span class='Delimiter'>, 
</span><a name="LN698"></a>    <span class='Declare_Enum_Const'>NUM_g</span><span class='Delimiter'>, 
</span><a name="LN699"></a>    <span class='Declare_Enum_Const'>NUM_l</span><span class='Delimiter'>, 
</span><a name="LN700"></a>    <span class='Declare_Enum_Const'>NUM_mi</span><span class='Delimiter'>, 
</span><a name="LN701"></a>    <span class='Declare_Enum_Const'>NUM_pl</span><span class='Delimiter'>, 
</span><a name="LN702"></a>    <span class='Declare_Enum_Const'>NUM_pr</span><span class='Delimiter'>, 
</span><a name="LN703"></a>    <span class='Declare_Enum_Const'>NUM_rn</span><span class='Delimiter'>, 
</span><a name="LN704"></a>    <span class='Declare_Enum_Const'>NUM_sg</span><span class='Delimiter'>, 
</span><a name="LN705"></a>    <span class='Declare_Enum_Const'>NUM_sp</span><span class='Delimiter'>, 
</span><a name="LN706"></a>    <span class='Declare_Enum_Const'>NUM_s</span><span class='Delimiter'>, 
</span><a name="LN707"></a>    <span class='Declare_Enum_Const'>NUM_th</span><span class='Delimiter'>, 
</span><a name="LN708"></a>    <span class='Declare_Enum_Const'>NUM_v</span><span class='Delimiter'>, 
</span> 
    <span class='Comment_Multi_Line'>/* last */ 
</span><a name="LN711"></a>    <span class='Declare_Enum_Const'>_NUM_last_</span> 
<a name="LN712"></a><span class='Delimiter'>}</span>   <span class='Declare_Typedef'>NUM_poz</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* ---------- 
 * KeyWords for DATE-TIME version 
 * ---------- 
 */ 
</span><a name="LN718"></a><span class='Keyword'>static const </span><a href="formatting.c.html#LN155"><span class='Ref_to_Typedef'>KeyWord</span></a> <span class='Declare_Var'>DCH_keywords</span><span class='Delimiter'>[] </span><span class='Operator'>= </span><span class='Delimiter'>{ 
</span><span class='Comment_Multi_Line'>/*  name, len, id, is_digit, date_mode */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"A.D."</span><span class='Delimiter'>, </span><span class='Number'>4</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN573"><span class='Ref_to_EnumConst'>DCH_A_D</span></a><span class='Delimiter'>, </span><span class='Boolean'>FALSE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN148"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_NONE</span></a><span class='Delimiter'>},</span>   <span class='Comment_Single_Line'>/* A */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"A.M."</span><span class='Delimiter'>, </span><span class='Number'>4</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN574"><span class='Ref_to_EnumConst'>DCH_A_M</span></a><span class='Delimiter'>, </span><span class='Boolean'>FALSE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN148"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_NONE</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"AD"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN575"><span class='Ref_to_EnumConst'>DCH_AD</span></a><span class='Delimiter'>, </span><span class='Boolean'>FALSE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN148"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_NONE</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"AM"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN576"><span class='Ref_to_EnumConst'>DCH_AM</span></a><span class='Delimiter'>, </span><span class='Boolean'>FALSE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN148"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_NONE</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"B.C."</span><span class='Delimiter'>, </span><span class='Number'>4</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN577"><span class='Ref_to_EnumConst'>DCH_B_C</span></a><span class='Delimiter'>, </span><span class='Boolean'>FALSE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN148"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_NONE</span></a><span class='Delimiter'>},</span>   <span class='Comment_Single_Line'>/* B */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"BC"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN578"><span class='Ref_to_EnumConst'>DCH_BC</span></a><span class='Delimiter'>, </span><span class='Boolean'>FALSE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN148"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_NONE</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"CC"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN579"><span class='Ref_to_EnumConst'>DCH_CC</span></a><span class='Delimiter'>, </span><span class='Boolean'>TRUE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN148"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_NONE</span></a><span class='Delimiter'>},</span>       <span class='Comment_Single_Line'>/* C */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"DAY"</span><span class='Delimiter'>, </span><span class='Number'>3</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN580"><span class='Ref_to_EnumConst'>DCH_DAY</span></a><span class='Delimiter'>, </span><span class='Boolean'>FALSE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN148"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_NONE</span></a><span class='Delimiter'>},</span>    <span class='Comment_Single_Line'>/* D */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"DDD"</span><span class='Delimiter'>, </span><span class='Number'>3</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN581"><span class='Ref_to_EnumConst'>DCH_DDD</span></a><span class='Delimiter'>, </span><span class='Boolean'>TRUE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN149"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_GREGORIAN</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"DD"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN582"><span class='Ref_to_EnumConst'>DCH_DD</span></a><span class='Delimiter'>, </span><span class='Boolean'>TRUE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN149"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_GREGORIAN</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"DY"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN583"><span class='Ref_to_EnumConst'>DCH_DY</span></a><span class='Delimiter'>, </span><span class='Boolean'>FALSE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN148"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_NONE</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"Day"</span><span class='Delimiter'>, </span><span class='Number'>3</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN584"><span class='Ref_to_EnumConst'>DCH_Day</span></a><span class='Delimiter'>, </span><span class='Boolean'>FALSE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN148"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_NONE</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"Dy"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN585"><span class='Ref_to_EnumConst'>DCH_Dy</span></a><span class='Delimiter'>, </span><span class='Boolean'>FALSE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN148"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_NONE</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"D"</span><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN586"><span class='Ref_to_EnumConst'>DCH_D</span></a><span class='Delimiter'>, </span><span class='Boolean'>TRUE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN149"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_GREGORIAN</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"FX"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN587"><span class='Ref_to_EnumConst'>DCH_FX</span></a><span class='Delimiter'>, </span><span class='Boolean'>FALSE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN148"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_NONE</span></a><span class='Delimiter'>},</span>      <span class='Comment_Single_Line'>/* F */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"HH24"</span><span class='Delimiter'>, </span><span class='Number'>4</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN588"><span class='Ref_to_EnumConst'>DCH_HH24</span></a><span class='Delimiter'>, </span><span class='Boolean'>TRUE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN148"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_NONE</span></a><span class='Delimiter'>},</span>   <span class='Comment_Single_Line'>/* H */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"HH12"</span><span class='Delimiter'>, </span><span class='Number'>4</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN589"><span class='Ref_to_EnumConst'>DCH_HH12</span></a><span class='Delimiter'>, </span><span class='Boolean'>TRUE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN148"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_NONE</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"HH"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN590"><span class='Ref_to_EnumConst'>DCH_HH</span></a><span class='Delimiter'>, </span><span class='Boolean'>TRUE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN148"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_NONE</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"IDDD"</span><span class='Delimiter'>, </span><span class='Number'>4</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN591"><span class='Ref_to_EnumConst'>DCH_IDDD</span></a><span class='Delimiter'>, </span><span class='Boolean'>TRUE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN150"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_ISOWEEK</span></a><span class='Delimiter'>},</span>        <span class='Comment_Single_Line'>/* I */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"ID"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN592"><span class='Ref_to_EnumConst'>DCH_ID</span></a><span class='Delimiter'>, </span><span class='Boolean'>TRUE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN150"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_ISOWEEK</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"IW"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN593"><span class='Ref_to_EnumConst'>DCH_IW</span></a><span class='Delimiter'>, </span><span class='Boolean'>TRUE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN150"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_ISOWEEK</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"IYYY"</span><span class='Delimiter'>, </span><span class='Number'>4</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN594"><span class='Ref_to_EnumConst'>DCH_IYYY</span></a><span class='Delimiter'>, </span><span class='Boolean'>TRUE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN150"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_ISOWEEK</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"IYY"</span><span class='Delimiter'>, </span><span class='Number'>3</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN595"><span class='Ref_to_EnumConst'>DCH_IYY</span></a><span class='Delimiter'>, </span><span class='Boolean'>TRUE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN150"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_ISOWEEK</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"IY"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN596"><span class='Ref_to_EnumConst'>DCH_IY</span></a><span class='Delimiter'>, </span><span class='Boolean'>TRUE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN150"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_ISOWEEK</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"I"</span><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN597"><span class='Ref_to_EnumConst'>DCH_I</span></a><span class='Delimiter'>, </span><span class='Boolean'>TRUE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN150"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_ISOWEEK</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"J"</span><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN598"><span class='Ref_to_EnumConst'>DCH_J</span></a><span class='Delimiter'>, </span><span class='Boolean'>TRUE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN148"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_NONE</span></a><span class='Delimiter'>}, </span><span class='Comment_Single_Line'>/* J */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"MI"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN599"><span class='Ref_to_EnumConst'>DCH_MI</span></a><span class='Delimiter'>, </span><span class='Boolean'>TRUE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN148"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_NONE</span></a><span class='Delimiter'>},</span>       <span class='Comment_Single_Line'>/* M */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"MM"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN600"><span class='Ref_to_EnumConst'>DCH_MM</span></a><span class='Delimiter'>, </span><span class='Boolean'>TRUE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN149"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_GREGORIAN</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"MONTH"</span><span class='Delimiter'>, </span><span class='Number'>5</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN601"><span class='Ref_to_EnumConst'>DCH_MONTH</span></a><span class='Delimiter'>, </span><span class='Boolean'>FALSE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN149"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_GREGORIAN</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"MON"</span><span class='Delimiter'>, </span><span class='Number'>3</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN602"><span class='Ref_to_EnumConst'>DCH_MON</span></a><span class='Delimiter'>, </span><span class='Boolean'>FALSE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN149"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_GREGORIAN</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"MS"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN603"><span class='Ref_to_EnumConst'>DCH_MS</span></a><span class='Delimiter'>, </span><span class='Boolean'>TRUE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN148"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_NONE</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"Month"</span><span class='Delimiter'>, </span><span class='Number'>5</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN604"><span class='Ref_to_EnumConst'>DCH_Month</span></a><span class='Delimiter'>, </span><span class='Boolean'>FALSE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN149"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_GREGORIAN</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"Mon"</span><span class='Delimiter'>, </span><span class='Number'>3</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN605"><span class='Ref_to_EnumConst'>DCH_Mon</span></a><span class='Delimiter'>, </span><span class='Boolean'>FALSE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN149"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_GREGORIAN</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"OF"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN606"><span class='Ref_to_EnumConst'>DCH_OF</span></a><span class='Delimiter'>, </span><span class='Boolean'>FALSE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN148"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_NONE</span></a><span class='Delimiter'>},</span>      <span class='Comment_Single_Line'>/* O */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"P.M."</span><span class='Delimiter'>, </span><span class='Number'>4</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN607"><span class='Ref_to_EnumConst'>DCH_P_M</span></a><span class='Delimiter'>, </span><span class='Boolean'>FALSE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN148"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_NONE</span></a><span class='Delimiter'>},</span>   <span class='Comment_Single_Line'>/* P */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"PM"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN608"><span class='Ref_to_EnumConst'>DCH_PM</span></a><span class='Delimiter'>, </span><span class='Boolean'>FALSE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN148"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_NONE</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"Q"</span><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN609"><span class='Ref_to_EnumConst'>DCH_Q</span></a><span class='Delimiter'>, </span><span class='Boolean'>TRUE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN148"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_NONE</span></a><span class='Delimiter'>}, </span><span class='Comment_Single_Line'>/* Q */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"RM"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN610"><span class='Ref_to_EnumConst'>DCH_RM</span></a><span class='Delimiter'>, </span><span class='Boolean'>FALSE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN149"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_GREGORIAN</span></a><span class='Delimiter'>}, </span><span class='Comment_Single_Line'>/* R */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"SSSS"</span><span class='Delimiter'>, </span><span class='Number'>4</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN611"><span class='Ref_to_EnumConst'>DCH_SSSS</span></a><span class='Delimiter'>, </span><span class='Boolean'>TRUE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN148"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_NONE</span></a><span class='Delimiter'>},</span>   <span class='Comment_Single_Line'>/* S */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"SS"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN612"><span class='Ref_to_EnumConst'>DCH_SS</span></a><span class='Delimiter'>, </span><span class='Boolean'>TRUE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN148"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_NONE</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"TZ"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN613"><span class='Ref_to_EnumConst'>DCH_TZ</span></a><span class='Delimiter'>, </span><span class='Boolean'>FALSE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN148"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_NONE</span></a><span class='Delimiter'>},</span>      <span class='Comment_Single_Line'>/* T */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"US"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN614"><span class='Ref_to_EnumConst'>DCH_US</span></a><span class='Delimiter'>, </span><span class='Boolean'>TRUE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN148"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_NONE</span></a><span class='Delimiter'>},</span>       <span class='Comment_Single_Line'>/* U */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"WW"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN615"><span class='Ref_to_EnumConst'>DCH_WW</span></a><span class='Delimiter'>, </span><span class='Boolean'>TRUE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN149"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_GREGORIAN</span></a><span class='Delimiter'>},</span>  <span class='Comment_Single_Line'>/* W */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"W"</span><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN616"><span class='Ref_to_EnumConst'>DCH_W</span></a><span class='Delimiter'>, </span><span class='Boolean'>TRUE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN149"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_GREGORIAN</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"Y,YYY"</span><span class='Delimiter'>, </span><span class='Number'>5</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN617"><span class='Ref_to_EnumConst'>DCH_Y_YYY</span></a><span class='Delimiter'>, </span><span class='Boolean'>TRUE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN149"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_GREGORIAN</span></a><span class='Delimiter'>},</span>    <span class='Comment_Single_Line'>/* Y */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"YYYY"</span><span class='Delimiter'>, </span><span class='Number'>4</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN618"><span class='Ref_to_EnumConst'>DCH_YYYY</span></a><span class='Delimiter'>, </span><span class='Boolean'>TRUE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN149"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_GREGORIAN</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"YYY"</span><span class='Delimiter'>, </span><span class='Number'>3</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN619"><span class='Ref_to_EnumConst'>DCH_YYY</span></a><span class='Delimiter'>, </span><span class='Boolean'>TRUE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN149"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_GREGORIAN</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"YY"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN620"><span class='Ref_to_EnumConst'>DCH_YY</span></a><span class='Delimiter'>, </span><span class='Boolean'>TRUE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN149"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_GREGORIAN</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"Y"</span><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN621"><span class='Ref_to_EnumConst'>DCH_Y</span></a><span class='Delimiter'>, </span><span class='Boolean'>TRUE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN149"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_GREGORIAN</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"a.d."</span><span class='Delimiter'>, </span><span class='Number'>4</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN622"><span class='Ref_to_EnumConst'>DCH_a_d</span></a><span class='Delimiter'>, </span><span class='Boolean'>FALSE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN148"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_NONE</span></a><span class='Delimiter'>},</span>   <span class='Comment_Single_Line'>/* a */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"a.m."</span><span class='Delimiter'>, </span><span class='Number'>4</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN623"><span class='Ref_to_EnumConst'>DCH_a_m</span></a><span class='Delimiter'>, </span><span class='Boolean'>FALSE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN148"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_NONE</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"ad"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN624"><span class='Ref_to_EnumConst'>DCH_ad</span></a><span class='Delimiter'>, </span><span class='Boolean'>FALSE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN148"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_NONE</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"am"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN625"><span class='Ref_to_EnumConst'>DCH_am</span></a><span class='Delimiter'>, </span><span class='Boolean'>FALSE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN148"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_NONE</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"b.c."</span><span class='Delimiter'>, </span><span class='Number'>4</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN626"><span class='Ref_to_EnumConst'>DCH_b_c</span></a><span class='Delimiter'>, </span><span class='Boolean'>FALSE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN148"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_NONE</span></a><span class='Delimiter'>},</span>   <span class='Comment_Single_Line'>/* b */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"bc"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN627"><span class='Ref_to_EnumConst'>DCH_bc</span></a><span class='Delimiter'>, </span><span class='Boolean'>FALSE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN148"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_NONE</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"cc"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN579"><span class='Ref_to_EnumConst'>DCH_CC</span></a><span class='Delimiter'>, </span><span class='Boolean'>TRUE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN148"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_NONE</span></a><span class='Delimiter'>},</span>       <span class='Comment_Single_Line'>/* c */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"day"</span><span class='Delimiter'>, </span><span class='Number'>3</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN629"><span class='Ref_to_EnumConst'>DCH_day</span></a><span class='Delimiter'>, </span><span class='Boolean'>FALSE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN148"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_NONE</span></a><span class='Delimiter'>},</span>    <span class='Comment_Single_Line'>/* d */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"ddd"</span><span class='Delimiter'>, </span><span class='Number'>3</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN581"><span class='Ref_to_EnumConst'>DCH_DDD</span></a><span class='Delimiter'>, </span><span class='Boolean'>TRUE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN149"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_GREGORIAN</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"dd"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN582"><span class='Ref_to_EnumConst'>DCH_DD</span></a><span class='Delimiter'>, </span><span class='Boolean'>TRUE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN149"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_GREGORIAN</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"dy"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN632"><span class='Ref_to_EnumConst'>DCH_dy</span></a><span class='Delimiter'>, </span><span class='Boolean'>FALSE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN148"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_NONE</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"d"</span><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN586"><span class='Ref_to_EnumConst'>DCH_D</span></a><span class='Delimiter'>, </span><span class='Boolean'>TRUE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN149"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_GREGORIAN</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"fx"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN587"><span class='Ref_to_EnumConst'>DCH_FX</span></a><span class='Delimiter'>, </span><span class='Boolean'>FALSE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN148"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_NONE</span></a><span class='Delimiter'>},</span>      <span class='Comment_Single_Line'>/* f */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"hh24"</span><span class='Delimiter'>, </span><span class='Number'>4</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN588"><span class='Ref_to_EnumConst'>DCH_HH24</span></a><span class='Delimiter'>, </span><span class='Boolean'>TRUE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN148"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_NONE</span></a><span class='Delimiter'>},</span>   <span class='Comment_Single_Line'>/* h */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"hh12"</span><span class='Delimiter'>, </span><span class='Number'>4</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN589"><span class='Ref_to_EnumConst'>DCH_HH12</span></a><span class='Delimiter'>, </span><span class='Boolean'>TRUE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN148"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_NONE</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"hh"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN590"><span class='Ref_to_EnumConst'>DCH_HH</span></a><span class='Delimiter'>, </span><span class='Boolean'>TRUE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN148"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_NONE</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"iddd"</span><span class='Delimiter'>, </span><span class='Number'>4</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN591"><span class='Ref_to_EnumConst'>DCH_IDDD</span></a><span class='Delimiter'>, </span><span class='Boolean'>TRUE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN150"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_ISOWEEK</span></a><span class='Delimiter'>},</span>        <span class='Comment_Single_Line'>/* i */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"id"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN592"><span class='Ref_to_EnumConst'>DCH_ID</span></a><span class='Delimiter'>, </span><span class='Boolean'>TRUE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN150"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_ISOWEEK</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"iw"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN593"><span class='Ref_to_EnumConst'>DCH_IW</span></a><span class='Delimiter'>, </span><span class='Boolean'>TRUE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN150"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_ISOWEEK</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"iyyy"</span><span class='Delimiter'>, </span><span class='Number'>4</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN594"><span class='Ref_to_EnumConst'>DCH_IYYY</span></a><span class='Delimiter'>, </span><span class='Boolean'>TRUE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN150"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_ISOWEEK</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"iyy"</span><span class='Delimiter'>, </span><span class='Number'>3</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN595"><span class='Ref_to_EnumConst'>DCH_IYY</span></a><span class='Delimiter'>, </span><span class='Boolean'>TRUE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN150"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_ISOWEEK</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"iy"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN596"><span class='Ref_to_EnumConst'>DCH_IY</span></a><span class='Delimiter'>, </span><span class='Boolean'>TRUE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN150"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_ISOWEEK</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"i"</span><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN597"><span class='Ref_to_EnumConst'>DCH_I</span></a><span class='Delimiter'>, </span><span class='Boolean'>TRUE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN150"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_ISOWEEK</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"j"</span><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN598"><span class='Ref_to_EnumConst'>DCH_J</span></a><span class='Delimiter'>, </span><span class='Boolean'>TRUE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN148"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_NONE</span></a><span class='Delimiter'>}, </span><span class='Comment_Single_Line'>/* j */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"mi"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN599"><span class='Ref_to_EnumConst'>DCH_MI</span></a><span class='Delimiter'>, </span><span class='Boolean'>TRUE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN148"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_NONE</span></a><span class='Delimiter'>},</span>       <span class='Comment_Single_Line'>/* m */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"mm"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN600"><span class='Ref_to_EnumConst'>DCH_MM</span></a><span class='Delimiter'>, </span><span class='Boolean'>TRUE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN149"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_GREGORIAN</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"month"</span><span class='Delimiter'>, </span><span class='Number'>5</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN648"><span class='Ref_to_EnumConst'>DCH_month</span></a><span class='Delimiter'>, </span><span class='Boolean'>FALSE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN149"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_GREGORIAN</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"mon"</span><span class='Delimiter'>, </span><span class='Number'>3</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN649"><span class='Ref_to_EnumConst'>DCH_mon</span></a><span class='Delimiter'>, </span><span class='Boolean'>FALSE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN149"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_GREGORIAN</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"ms"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN603"><span class='Ref_to_EnumConst'>DCH_MS</span></a><span class='Delimiter'>, </span><span class='Boolean'>TRUE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN148"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_NONE</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"p.m."</span><span class='Delimiter'>, </span><span class='Number'>4</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN651"><span class='Ref_to_EnumConst'>DCH_p_m</span></a><span class='Delimiter'>, </span><span class='Boolean'>FALSE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN148"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_NONE</span></a><span class='Delimiter'>},</span>   <span class='Comment_Single_Line'>/* p */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"pm"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN652"><span class='Ref_to_EnumConst'>DCH_pm</span></a><span class='Delimiter'>, </span><span class='Boolean'>FALSE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN148"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_NONE</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"q"</span><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN609"><span class='Ref_to_EnumConst'>DCH_Q</span></a><span class='Delimiter'>, </span><span class='Boolean'>TRUE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN148"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_NONE</span></a><span class='Delimiter'>}, </span><span class='Comment_Single_Line'>/* q */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"rm"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN654"><span class='Ref_to_EnumConst'>DCH_rm</span></a><span class='Delimiter'>, </span><span class='Boolean'>FALSE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN149"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_GREGORIAN</span></a><span class='Delimiter'>}, </span><span class='Comment_Single_Line'>/* r */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"ssss"</span><span class='Delimiter'>, </span><span class='Number'>4</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN611"><span class='Ref_to_EnumConst'>DCH_SSSS</span></a><span class='Delimiter'>, </span><span class='Boolean'>TRUE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN148"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_NONE</span></a><span class='Delimiter'>},</span>   <span class='Comment_Single_Line'>/* s */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"ss"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN612"><span class='Ref_to_EnumConst'>DCH_SS</span></a><span class='Delimiter'>, </span><span class='Boolean'>TRUE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN148"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_NONE</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"tz"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN657"><span class='Ref_to_EnumConst'>DCH_tz</span></a><span class='Delimiter'>, </span><span class='Boolean'>FALSE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN148"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_NONE</span></a><span class='Delimiter'>},</span>      <span class='Comment_Single_Line'>/* t */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"us"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN614"><span class='Ref_to_EnumConst'>DCH_US</span></a><span class='Delimiter'>, </span><span class='Boolean'>TRUE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN148"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_NONE</span></a><span class='Delimiter'>},</span>       <span class='Comment_Single_Line'>/* u */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"ww"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN615"><span class='Ref_to_EnumConst'>DCH_WW</span></a><span class='Delimiter'>, </span><span class='Boolean'>TRUE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN149"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_GREGORIAN</span></a><span class='Delimiter'>},</span>  <span class='Comment_Single_Line'>/* w */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"w"</span><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN616"><span class='Ref_to_EnumConst'>DCH_W</span></a><span class='Delimiter'>, </span><span class='Boolean'>TRUE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN149"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_GREGORIAN</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"y,yyy"</span><span class='Delimiter'>, </span><span class='Number'>5</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN617"><span class='Ref_to_EnumConst'>DCH_Y_YYY</span></a><span class='Delimiter'>, </span><span class='Boolean'>TRUE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN149"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_GREGORIAN</span></a><span class='Delimiter'>},</span>    <span class='Comment_Single_Line'>/* y */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"yyyy"</span><span class='Delimiter'>, </span><span class='Number'>4</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN618"><span class='Ref_to_EnumConst'>DCH_YYYY</span></a><span class='Delimiter'>, </span><span class='Boolean'>TRUE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN149"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_GREGORIAN</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"yyy"</span><span class='Delimiter'>, </span><span class='Number'>3</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN619"><span class='Ref_to_EnumConst'>DCH_YYY</span></a><span class='Delimiter'>, </span><span class='Boolean'>TRUE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN149"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_GREGORIAN</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"yy"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN620"><span class='Ref_to_EnumConst'>DCH_YY</span></a><span class='Delimiter'>, </span><span class='Boolean'>TRUE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN149"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_GREGORIAN</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"y"</span><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN621"><span class='Ref_to_EnumConst'>DCH_Y</span></a><span class='Delimiter'>, </span><span class='Boolean'>TRUE</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN149"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_GREGORIAN</span></a><span class='Delimiter'>}, 
</span> 
    <span class='Comment_Multi_Line'>/* last */ 
</span>    <span class='Delimiter'>{</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>} 
}; 
</span> 
<span class='Comment_Multi_Line'>/* ---------- 
 * KeyWords for NUMBER version 
 * 
 * The is_digit and date_mode fields are not relevant here. 
 * ---------- 
 */ 
</span><a name="LN824"></a><span class='Keyword'>static const </span><a href="formatting.c.html#LN155"><span class='Ref_to_Typedef'>KeyWord</span></a> <span class='Declare_Var'>NUM_keywords</span><span class='Delimiter'>[] </span><span class='Operator'>= </span><span class='Delimiter'>{ 
</span><span class='Comment_Multi_Line'>/*  name, len, id           is in Index */ 
</span>    <span class='Delimiter'>{</span><span class='String'>","</span><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN673"><span class='Ref_to_EnumConst'>NUM_COMMA</span></a><span class='Delimiter'>},</span>        <span class='Comment_Single_Line'>/* , */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"."</span><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN674"><span class='Ref_to_EnumConst'>NUM_DEC</span></a><span class='Delimiter'>},</span>          <span class='Comment_Single_Line'>/* . */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"0"</span><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN675"><span class='Ref_to_EnumConst'>NUM_0</span></a><span class='Delimiter'>},</span>            <span class='Comment_Single_Line'>/* 0 */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"9"</span><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN676"><span class='Ref_to_EnumConst'>NUM_9</span></a><span class='Delimiter'>},</span>            <span class='Comment_Single_Line'>/* 9 */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"B"</span><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN677"><span class='Ref_to_EnumConst'>NUM_B</span></a><span class='Delimiter'>},</span>            <span class='Comment_Single_Line'>/* B */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"C"</span><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN678"><span class='Ref_to_EnumConst'>NUM_C</span></a><span class='Delimiter'>},</span>            <span class='Comment_Single_Line'>/* C */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"D"</span><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN679"><span class='Ref_to_EnumConst'>NUM_D</span></a><span class='Delimiter'>},</span>            <span class='Comment_Single_Line'>/* D */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"EEEE"</span><span class='Delimiter'>, </span><span class='Number'>4</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN680"><span class='Ref_to_EnumConst'>NUM_E</span></a><span class='Delimiter'>},</span>         <span class='Comment_Single_Line'>/* E */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"FM"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN681"><span class='Ref_to_EnumConst'>NUM_FM</span></a><span class='Delimiter'>},</span>          <span class='Comment_Single_Line'>/* F */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"G"</span><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN682"><span class='Ref_to_EnumConst'>NUM_G</span></a><span class='Delimiter'>},</span>            <span class='Comment_Single_Line'>/* G */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"L"</span><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN683"><span class='Ref_to_EnumConst'>NUM_L</span></a><span class='Delimiter'>},</span>            <span class='Comment_Single_Line'>/* L */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"MI"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN684"><span class='Ref_to_EnumConst'>NUM_MI</span></a><span class='Delimiter'>},</span>          <span class='Comment_Single_Line'>/* M */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"PL"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN685"><span class='Ref_to_EnumConst'>NUM_PL</span></a><span class='Delimiter'>},</span>          <span class='Comment_Single_Line'>/* P */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"PR"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN686"><span class='Ref_to_EnumConst'>NUM_PR</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"RN"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN687"><span class='Ref_to_EnumConst'>NUM_RN</span></a><span class='Delimiter'>},</span>          <span class='Comment_Single_Line'>/* R */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"SG"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN688"><span class='Ref_to_EnumConst'>NUM_SG</span></a><span class='Delimiter'>},</span>          <span class='Comment_Single_Line'>/* S */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"SP"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN689"><span class='Ref_to_EnumConst'>NUM_SP</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"S"</span><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN690"><span class='Ref_to_EnumConst'>NUM_S</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"TH"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN691"><span class='Ref_to_EnumConst'>NUM_TH</span></a><span class='Delimiter'>},</span>          <span class='Comment_Single_Line'>/* T */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"V"</span><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN692"><span class='Ref_to_EnumConst'>NUM_V</span></a><span class='Delimiter'>},</span>            <span class='Comment_Single_Line'>/* V */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"b"</span><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN677"><span class='Ref_to_EnumConst'>NUM_B</span></a><span class='Delimiter'>},</span>            <span class='Comment_Single_Line'>/* b */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"c"</span><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN678"><span class='Ref_to_EnumConst'>NUM_C</span></a><span class='Delimiter'>},</span>            <span class='Comment_Single_Line'>/* c */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"d"</span><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN679"><span class='Ref_to_EnumConst'>NUM_D</span></a><span class='Delimiter'>},</span>            <span class='Comment_Single_Line'>/* d */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"eeee"</span><span class='Delimiter'>, </span><span class='Number'>4</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN680"><span class='Ref_to_EnumConst'>NUM_E</span></a><span class='Delimiter'>},</span>         <span class='Comment_Single_Line'>/* e */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"fm"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN681"><span class='Ref_to_EnumConst'>NUM_FM</span></a><span class='Delimiter'>},</span>          <span class='Comment_Single_Line'>/* f */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"g"</span><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN682"><span class='Ref_to_EnumConst'>NUM_G</span></a><span class='Delimiter'>},</span>            <span class='Comment_Single_Line'>/* g */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"l"</span><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN683"><span class='Ref_to_EnumConst'>NUM_L</span></a><span class='Delimiter'>},</span>            <span class='Comment_Single_Line'>/* l */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"mi"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN684"><span class='Ref_to_EnumConst'>NUM_MI</span></a><span class='Delimiter'>},</span>          <span class='Comment_Single_Line'>/* m */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"pl"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN685"><span class='Ref_to_EnumConst'>NUM_PL</span></a><span class='Delimiter'>},</span>          <span class='Comment_Single_Line'>/* p */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"pr"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN686"><span class='Ref_to_EnumConst'>NUM_PR</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"rn"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN703"><span class='Ref_to_EnumConst'>NUM_rn</span></a><span class='Delimiter'>},</span>          <span class='Comment_Single_Line'>/* r */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"sg"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN688"><span class='Ref_to_EnumConst'>NUM_SG</span></a><span class='Delimiter'>},</span>          <span class='Comment_Single_Line'>/* s */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"sp"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN689"><span class='Ref_to_EnumConst'>NUM_SP</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"s"</span><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN690"><span class='Ref_to_EnumConst'>NUM_S</span></a><span class='Delimiter'>}, 
</span>    <span class='Delimiter'>{</span><span class='String'>"th"</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN707"><span class='Ref_to_EnumConst'>NUM_th</span></a><span class='Delimiter'>},</span>          <span class='Comment_Single_Line'>/* t */ 
</span>    <span class='Delimiter'>{</span><span class='String'>"v"</span><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN692"><span class='Ref_to_EnumConst'>NUM_V</span></a><span class='Delimiter'>},</span>            <span class='Comment_Single_Line'>/* v */ 
</span> 
    <span class='Comment_Multi_Line'>/* last */ 
</span>    <span class='Delimiter'>{</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>} 
}; 
</span> 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * KeyWords index for DATE-TIME version 
 * ---------- 
 */ 
</span><a name="LN872"></a><span class='Keyword'>static const int </span><span class='Declare_Var'>DCH_index</span><span class='Delimiter'>[</span><a href="formatting.c.html#LN109"><span class='Ref_to_Const'>KeyWord_INDEX_SIZE</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='Delimiter'>{ 
</span><span class='Comment_Multi_Line'>/* 
0   1   2   3   4   5   6   7   8   9 
*/ 
</span>    <span class='Comment_Multi_Line'>/*---- first 0..31 chars are skipped ----*/ 
</span> 
    <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, 
</span>    <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, 
</span>    <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, 
</span>    <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN573"><span class='Ref_to_EnumConst'>DCH_A_D</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN577"><span class='Ref_to_EnumConst'>DCH_B_C</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN579"><span class='Ref_to_EnumConst'>DCH_CC</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN580"><span class='Ref_to_EnumConst'>DCH_DAY</span></a><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, 
</span>    <a href="formatting.c.html#LN587"><span class='Ref_to_EnumConst'>DCH_FX</span></a><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN588"><span class='Ref_to_EnumConst'>DCH_HH24</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN591"><span class='Ref_to_EnumConst'>DCH_IDDD</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN598"><span class='Ref_to_EnumConst'>DCH_J</span></a><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN599"><span class='Ref_to_EnumConst'>DCH_MI</span></a><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN606"><span class='Ref_to_EnumConst'>DCH_OF</span></a><span class='Delimiter'>, 
</span>    <a href="formatting.c.html#LN607"><span class='Ref_to_EnumConst'>DCH_P_M</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN609"><span class='Ref_to_EnumConst'>DCH_Q</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN610"><span class='Ref_to_EnumConst'>DCH_RM</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN611"><span class='Ref_to_EnumConst'>DCH_SSSS</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN613"><span class='Ref_to_EnumConst'>DCH_TZ</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN614"><span class='Ref_to_EnumConst'>DCH_US</span></a><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN615"><span class='Ref_to_EnumConst'>DCH_WW</span></a><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN617"><span class='Ref_to_EnumConst'>DCH_Y_YYY</span></a><span class='Delimiter'>, 
</span>    <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN622"><span class='Ref_to_EnumConst'>DCH_a_d</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN626"><span class='Ref_to_EnumConst'>DCH_b_c</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN628"><span class='Ref_to_EnumConst'>DCH_cc</span></a><span class='Delimiter'>, 
</span>    <a href="formatting.c.html#LN629"><span class='Ref_to_EnumConst'>DCH_day</span></a><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN634"><span class='Ref_to_EnumConst'>DCH_fx</span></a><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN635"><span class='Ref_to_EnumConst'>DCH_hh24</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN638"><span class='Ref_to_EnumConst'>DCH_iddd</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN645"><span class='Ref_to_EnumConst'>DCH_j</span></a><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN646"><span class='Ref_to_EnumConst'>DCH_mi</span></a><span class='Delimiter'>, 
</span>    <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN651"><span class='Ref_to_EnumConst'>DCH_p_m</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN653"><span class='Ref_to_EnumConst'>DCH_q</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN654"><span class='Ref_to_EnumConst'>DCH_rm</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN655"><span class='Ref_to_EnumConst'>DCH_ssss</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN657"><span class='Ref_to_EnumConst'>DCH_tz</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN658"><span class='Ref_to_EnumConst'>DCH_us</span></a><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN659"><span class='Ref_to_EnumConst'>DCH_ww</span></a><span class='Delimiter'>, 
</span>    <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN661"><span class='Ref_to_EnumConst'>DCH_y_yyy</span></a><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span> 
 
    <span class='Comment_Multi_Line'>/*---- chars over 126 are skipped ----*/ 
</span><span class='Delimiter'>}; 
</span> 
<span class='Comment_Multi_Line'>/* ---------- 
 * KeyWords index for NUMBER version 
 * ---------- 
 */ 
</span><a name="LN896"></a><span class='Keyword'>static const int </span><span class='Declare_Var'>NUM_index</span><span class='Delimiter'>[</span><a href="formatting.c.html#LN109"><span class='Ref_to_Const'>KeyWord_INDEX_SIZE</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='Delimiter'>{ 
</span><span class='Comment_Multi_Line'>/* 
0   1   2   3   4   5   6   7   8   9 
*/ 
</span>    <span class='Comment_Multi_Line'>/*---- first 0..31 chars are skipped ----*/ 
</span> 
    <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, 
</span>    <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN673"><span class='Ref_to_EnumConst'>NUM_COMMA</span></a><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN674"><span class='Ref_to_EnumConst'>NUM_DEC</span></a><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN675"><span class='Ref_to_EnumConst'>NUM_0</span></a><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, 
</span>    <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN676"><span class='Ref_to_EnumConst'>NUM_9</span></a><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, 
</span>    <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN677"><span class='Ref_to_EnumConst'>NUM_B</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN678"><span class='Ref_to_EnumConst'>NUM_C</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN679"><span class='Ref_to_EnumConst'>NUM_D</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN680"><span class='Ref_to_EnumConst'>NUM_E</span></a><span class='Delimiter'>, 
</span>    <a href="formatting.c.html#LN681"><span class='Ref_to_EnumConst'>NUM_FM</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN682"><span class='Ref_to_EnumConst'>NUM_G</span></a><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN683"><span class='Ref_to_EnumConst'>NUM_L</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN684"><span class='Ref_to_EnumConst'>NUM_MI</span></a><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, 
</span>    <a href="formatting.c.html#LN685"><span class='Ref_to_EnumConst'>NUM_PL</span></a><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN687"><span class='Ref_to_EnumConst'>NUM_RN</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN688"><span class='Ref_to_EnumConst'>NUM_SG</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN691"><span class='Ref_to_EnumConst'>NUM_TH</span></a><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN692"><span class='Ref_to_EnumConst'>NUM_V</span></a><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, 
</span>    <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN693"><span class='Ref_to_EnumConst'>NUM_b</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN694"><span class='Ref_to_EnumConst'>NUM_c</span></a><span class='Delimiter'>, 
</span>    <a href="formatting.c.html#LN695"><span class='Ref_to_EnumConst'>NUM_d</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN696"><span class='Ref_to_EnumConst'>NUM_e</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN697"><span class='Ref_to_EnumConst'>NUM_fm</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN698"><span class='Ref_to_EnumConst'>NUM_g</span></a><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN699"><span class='Ref_to_EnumConst'>NUM_l</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN700"><span class='Ref_to_EnumConst'>NUM_mi</span></a><span class='Delimiter'>, 
</span>    <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN701"><span class='Ref_to_EnumConst'>NUM_pl</span></a><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN703"><span class='Ref_to_EnumConst'>NUM_rn</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN704"><span class='Ref_to_EnumConst'>NUM_sg</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN707"><span class='Ref_to_EnumConst'>NUM_th</span></a><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN708"><span class='Ref_to_EnumConst'>NUM_v</span></a><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, 
</span>    <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span> 
 
    <span class='Comment_Multi_Line'>/*---- chars over 126 are skipped ----*/ 
</span><span class='Delimiter'>}; 
</span> 
<span class='Comment_Multi_Line'>/* ---------- 
 * Number processor struct 
 * ---------- 
 */ 
</span><a name="LN920"></a><span class='Control'>typedef</span> <span class='Control'>struct</span> <span class='Declare_Struct'>NUMProc</span> 
<span class='Delimiter'>{ 
</span><a name="LN922"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Member'>is_to_char</span><span class='Delimiter'>; 
</span><a name="LN923"></a>    <a href="formatting.c.html#LN305"><span class='Ref_to_Typedef'>NUMDesc</span></a>    <span class='Operator'>*</span><span class='Declare_Member'>Num</span><span class='Delimiter'>;</span>            <span class='Comment_Single_Line'>/* number description       */ 
</span> 
<a name="LN925"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>sign</span><span class='Delimiter'>,</span>           <span class='Comment_Single_Line'>/* '-' or '+'           */ 
</span><a name="LN926"></a>                <span class='Declare_Member'>sign_wrote</span><span class='Delimiter'>,</span>     <span class='Comment_Single_Line'>/* was sign write       */ 
</span><a name="LN927"></a>                <span class='Declare_Member'>num_count</span><span class='Delimiter'>,</span>      <span class='Comment_Single_Line'>/* number of write digits   */ 
</span><a name="LN928"></a>                <span class='Declare_Member'>num_in</span><span class='Delimiter'>,</span>         <span class='Comment_Single_Line'>/* is inside number     */ 
</span><a name="LN929"></a>                <span class='Declare_Member'>num_curr</span><span class='Delimiter'>,</span>       <span class='Comment_Single_Line'>/* current position in number   */ 
</span><a name="LN930"></a>                <span class='Declare_Member'>out_pre_spaces</span><span class='Delimiter'>, </span><span class='Comment_Single_Line'>/* spaces before first digit    */ 
</span> 
<a name="LN932"></a>                <span class='Declare_Member'>read_dec</span><span class='Delimiter'>,</span>       <span class='Comment_Single_Line'>/* to_number - was read dec. point  */ 
</span><a name="LN933"></a>                <span class='Declare_Member'>read_post</span><span class='Delimiter'>,</span>      <span class='Comment_Single_Line'>/* to_number - number of dec. digit */ 
</span><a name="LN934"></a>                <span class='Declare_Member'>read_pre</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* to_number - number non-dec. digit */ 
</span> 
<a name="LN936"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Member'>number</span><span class='Delimiter'>,</span>         <span class='Comment_Single_Line'>/* string with number   */ 
</span><a name="LN937"></a>               <span class='Operator'>*</span><span class='Declare_Member'>number_p</span><span class='Delimiter'>,</span>       <span class='Comment_Single_Line'>/* pointer to current number position */ 
</span><a name="LN938"></a>               <span class='Operator'>*</span><span class='Declare_Member'>inout</span><span class='Delimiter'>,</span>          <span class='Comment_Single_Line'>/* in / out buffer  */ 
</span><a name="LN939"></a>               <span class='Operator'>*</span><span class='Declare_Member'>inout_p</span><span class='Delimiter'>,</span>        <span class='Comment_Single_Line'>/* pointer to current inout position */ 
</span><a name="LN940"></a>               <span class='Operator'>*</span><span class='Declare_Member'>last_relevant</span><span class='Delimiter'>,</span>  <span class='Comment_Single_Line'>/* last relevant number after decimal point */ 
</span> 
<a name="LN942"></a>               <span class='Operator'>*</span><span class='Declare_Member'>L_negative_sign</span><span class='Delimiter'>,</span>    <span class='Comment_Single_Line'>/* Locale */ 
</span><a name="LN943"></a>               <span class='Operator'>*</span><span class='Declare_Member'>L_positive_sign</span><span class='Delimiter'>, 
</span><a name="LN944"></a>               <span class='Operator'>*</span><span class='Declare_Member'>decimal</span><span class='Delimiter'>, 
</span><a name="LN945"></a>               <span class='Operator'>*</span><span class='Declare_Member'>L_thousands_sep</span><span class='Delimiter'>, 
</span><a name="LN946"></a>               <span class='Operator'>*</span><span class='Declare_Member'>L_currency_symbol</span><span class='Delimiter'>; 
</span><a name="LN947"></a>}<span class='Auto_Annotations'> &laquo; end NUMProc &raquo; </span> <span class='Declare_Typedef'>NUMProc</span><span class='Delimiter'>; 
</span> 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * Functions 
 * ---------- 
 */ 
</span><a name="LN954"></a><span class='Keyword'>static const </span><a href="formatting.c.html#LN155"><span class='Ref_to_Typedef'>KeyWord</span></a> <span class='Operator'>*</span><span class='Declare_Prototype'>index_seq_search</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>str</span><span class='Delimiter'>, </span><span class='Keyword'>const </span><a href="formatting.c.html#LN155"><span class='Ref_to_Typedef'>KeyWord</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>kw</span><span class='Delimiter'>, 
</span><a name="LN955"></a>                 <span class='Keyword'>const int </span><span class='Operator'>*</span><span class='Declare_Parameter'>index</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN956"></a><span class='Keyword'>static const </span><a href="formatting.c.html#LN131"><span class='Ref_to_Typedef'>KeySuffix</span></a> <span class='Operator'>*</span><span class='Declare_Prototype'>suff_search</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>str</span><span class='Delimiter'>, </span><span class='Keyword'>const </span><a href="formatting.c.html#LN131"><span class='Ref_to_Typedef'>KeySuffix</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>suf</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>type</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN957"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>NUMDesc_prepare</span><span class='Parentheses'>(</span><a href="formatting.c.html#LN305"><span class='Ref_to_Typedef'>NUMDesc</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>num</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN164"><span class='Ref_to_Struct'>FormatNode</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>n</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN958"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>parse_format</span><span class='Parentheses'>(</span><a href="formatting.c.html#LN164"><span class='Ref_to_Struct'>FormatNode</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>str</span><span class='Delimiter'>, </span><span class='Keyword'>const </span><a href="formatting.c.html#LN155"><span class='Ref_to_Typedef'>KeyWord</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>kw</span><span class='Delimiter'>, 
</span><a name="LN959"></a>             <span class='Keyword'>const </span><a href="formatting.c.html#LN131"><span class='Ref_to_Typedef'>KeySuffix</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>suf</span><span class='Delimiter'>, </span><span class='Keyword'>const int </span><span class='Operator'>*</span><span class='Declare_Parameter'>index</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>ver</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN305"><span class='Ref_to_Typedef'>NUMDesc</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>Num</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<a name="LN961"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>DCH_to_char</span><span class='Parentheses'>(</span><a href="formatting.c.html#LN164"><span class='Ref_to_Struct'>FormatNode</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>is_interval</span><span class='Delimiter'>, 
</span><a name="LN962"></a>            <a href="formatting.c.html#LN458"><span class='Ref_to_Struct'>TmToChar</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>in</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>out</span><span class='Delimiter'>, </span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>collid</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN963"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>DCH_from_char</span><span class='Parentheses'>(</span><a href="formatting.c.html#LN164"><span class='Ref_to_Struct'>FormatNode</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>in</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN407"><span class='Ref_to_Typedef'>TmFromChar</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>out</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<span class='Directive'>#ifdef</span> DEBUG_TO_FROM_CHAR 
<a name="LN966"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>dump_index</span><span class='Parentheses'>(</span><span class='Keyword'>const </span><a href="formatting.c.html#LN155"><span class='Ref_to_Typedef'>KeyWord</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>k</span><span class='Delimiter'>, </span><span class='Keyword'>const int </span><span class='Operator'>*</span><span class='Declare_Parameter'>index</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN967"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>dump_node</span><span class='Parentheses'>(</span><a href="formatting.c.html#LN164"><span class='Ref_to_Struct'>FormatNode</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>max</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
 
<a name="LN970"></a><span class='Keyword'>static const char </span><span class='Operator'>*</span><span class='Declare_Prototype'>get_th</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>num</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>type</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN971"></a><span class='Keyword'>static char </span><span class='Operator'>*</span><span class='Declare_Prototype'>str_numth</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>dest</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>num</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>type</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN972"></a><span class='Keyword'>static int</span>  <span class='Declare_Prototype'>adjust_partial_year_to_2020</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>year</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN973"></a><span class='Keyword'>static int</span>  <span class='Declare_Prototype'>strspace_len</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>str</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN974"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>from_char_set_mode</span><span class='Parentheses'>(</span><a href="formatting.c.html#LN407"><span class='Ref_to_Typedef'>TmFromChar</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tmfc</span><span class='Delimiter'>, </span><span class='Keyword'>const </span><a href="formatting.c.html#LN146"><span class='Ref_to_Typedef'>FromCharDateMode</span></a> <span class='Declare_Parameter'>mode</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN975"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>from_char_set_int</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>dest</span><span class='Delimiter'>, </span><span class='Keyword'>const int </span><span class='Declare_Parameter'>value</span><span class='Delimiter'>, </span><span class='Keyword'>const </span><a href="formatting.c.html#LN164"><span class='Ref_to_Struct'>FormatNode</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN976"></a><span class='Keyword'>static int</span>  <span class='Declare_Prototype'>from_char_parse_int_len</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>dest</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>**</span><span class='Declare_Parameter'>src</span><span class='Delimiter'>, </span><span class='Keyword'>const int </span><span class='Declare_Parameter'>len</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN164"><span class='Ref_to_Struct'>FormatNode</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN977"></a><span class='Keyword'>static int</span>  <span class='Declare_Prototype'>from_char_parse_int</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>dest</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>**</span><span class='Declare_Parameter'>src</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN164"><span class='Ref_to_Struct'>FormatNode</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN978"></a><span class='Keyword'>static int</span>  <span class='Declare_Prototype'>seq_search</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>name</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Keyword'>const </span><span class='Operator'>* </span><span class='Declare_Parameter'>array</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>type</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>max</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>len</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN979"></a><span class='Keyword'>static int</span>  <span class='Declare_Prototype'>from_char_seq_search</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>dest</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>**</span><span class='Declare_Parameter'>src</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Keyword'>const </span><span class='Operator'>* </span><span class='Declare_Parameter'>array</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>type</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>max</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN164"><span class='Ref_to_Struct'>FormatNode</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN980"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>do_to_timestamp</span><span class='Parentheses'>(</span><a href="../../../../contrib/seg/segparse.y.html#LN46"><span class='Ref_to_Global_Var'>text</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>date_txt</span><span class='Delimiter'>, </span><a href="../../../../contrib/seg/segparse.y.html#LN46"><span class='Ref_to_Global_Var'>text</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fmt</span><span class='Delimiter'>, 
</span><a name="LN981"></a>                <span class='Control'>struct</span> <a href="../../../include/pgtime.h.html#LN24"><span class='Ref_to_Struct'>pg_tm</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>tm</span><span class='Delimiter'>, </span><a href="../../../interfaces/ecpg/pgtypeslib/dt.h.html#LN9"><span class='Ref_to_Typedef'>fsec_t</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fsec</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN982"></a><span class='Keyword'>static char </span><span class='Operator'>*</span><span class='Declare_Prototype'>fill_str</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>str</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>c</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>max</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN983"></a><span class='Keyword'>static </span><a href="formatting.c.html#LN164"><span class='Ref_to_Struct'>FormatNode</span></a> <span class='Operator'>*</span><span class='Declare_Prototype'>NUM_cache</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>len</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN305"><span class='Ref_to_Typedef'>NUMDesc</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>Num</span><span class='Delimiter'>, </span><a href="../../../../contrib/seg/segparse.y.html#LN46"><span class='Ref_to_Global_Var'>text</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pars_str</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Declare_Parameter'>shouldFree</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN984"></a><span class='Keyword'>static char </span><span class='Operator'>*</span><span class='Declare_Prototype'>int_to_roman</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>number</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN985"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>NUM_prepare_locale</span><span class='Parentheses'>(</span><a href="formatting.c.html#LN920"><span class='Ref_to_Struct'>NUMProc</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>Np</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN986"></a><span class='Keyword'>static char </span><span class='Operator'>*</span><span class='Declare_Prototype'>get_last_relevant_decnum</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>num</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN987"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>NUM_numpart_from_char</span><span class='Parentheses'>(</span><a href="formatting.c.html#LN920"><span class='Ref_to_Struct'>NUMProc</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>Np</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>id</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>input_len</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN988"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>NUM_numpart_to_char</span><span class='Parentheses'>(</span><a href="formatting.c.html#LN920"><span class='Ref_to_Struct'>NUMProc</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>Np</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>id</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN989"></a><span class='Keyword'>static char </span><span class='Operator'>*</span><span class='Declare_Prototype'>NUM_processor</span><span class='Parentheses'>(</span><a href="formatting.c.html#LN164"><span class='Ref_to_Struct'>FormatNode</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN305"><span class='Ref_to_Typedef'>NUMDesc</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>Num</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>inout</span><span class='Delimiter'>, 
</span><a name="LN990"></a>           <span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>number</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>from_char_input_len</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>to_char_out_pre_spaces</span><span class='Delimiter'>, 
</span><a name="LN991"></a>              <span class='Keyword'>int </span><span class='Declare_Parameter'>sign</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>is_to_char</span><span class='Delimiter'>, </span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>collid</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN992"></a><span class='Keyword'>static </span><a href="formatting.c.html#LN376"><span class='Ref_to_Typedef'>DCHCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Prototype'>DCH_cache_getnew</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>str</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN993"></a><span class='Keyword'>static </span><a href="formatting.c.html#LN376"><span class='Ref_to_Typedef'>DCHCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Prototype'>DCH_cache_search</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>str</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN994"></a><span class='Keyword'>static </span><a href="formatting.c.html#LN376"><span class='Ref_to_Typedef'>DCHCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Prototype'>DCH_cache_fetch</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>str</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN995"></a><span class='Keyword'>static </span><a href="formatting.c.html#LN384"><span class='Ref_to_Typedef'>NUMCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Prototype'>NUM_cache_getnew</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>str</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN996"></a><span class='Keyword'>static </span><a href="formatting.c.html#LN384"><span class='Ref_to_Typedef'>NUMCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Prototype'>NUM_cache_search</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>str</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN997"></a><span class='Keyword'>static </span><a href="formatting.c.html#LN384"><span class='Ref_to_Typedef'>NUMCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Prototype'>NUM_cache_fetch</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>str</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * Fast sequential search, use index for data selection which 
 * go to seq. cycle (it is very fast for unwanted strings) 
 * (can't be used binary search in format parsing) 
 * ---------- 
 */ 
</span><span class='Keyword'>static const </span><a href="formatting.c.html#LN155"><span class='Ref_to_Typedef'>KeyWord</span></a> <span class='Operator'>* 
</span><a name="LN1007"></a><span class='Declare_Function'>index_seq_search</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>str</span><span class='Delimiter'>, </span><span class='Keyword'>const </span><a href="formatting.c.html#LN155"><span class='Ref_to_Typedef'>KeyWord</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>kw</span><span class='Delimiter'>, </span><span class='Keyword'>const int </span><span class='Operator'>*</span><span class='Declare_Parameter'>index</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1009"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>poz</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="formatting.c.html#LN110"><span class='Ref_to_Macro'>KeyWord_INDEX_FILTER</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="formatting.c.html#LN1007"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>))</span> 
        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="formatting.c.html#LN1009"><span class='Ref_To_Local'>poz</span></a> <span class='Operator'>= *</span><span class='Parentheses'>(</span><a href="formatting.c.html#LN1007"><span class='Ref_to_Parameter'>index</span></a> <span class='Operator'>+ </span><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="formatting.c.html#LN1007"><span class='Ref_to_Parameter'>str</span></a> <span class='Operator'>- </span><span class='String'>' '</span><span class='Parentheses'>)))</span> <span class='Operator'>&GT; -</span><span class='Number'>1</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span><a name="LN1016"></a>        <span class='Keyword'>const </span><a href="formatting.c.html#LN155"><span class='Ref_to_Typedef'>KeyWord</span></a> <span class='Operator'>*</span><span class='Declare_Local'>k</span> <span class='Operator'>= </span><a href="formatting.c.html#LN1007"><span class='Ref_to_Parameter'>kw</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN1009"><span class='Ref_To_Local'>poz</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>do</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span>strncmp<span class='Parentheses'>(</span><a href="formatting.c.html#LN1007"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1016"><span class='Ref_To_Local'>k</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN157"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1016"><span class='Ref_To_Local'>k</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN158"><span class='Ref_to_Member'>len</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                <span class='Control'>return</span> <a href="formatting.c.html#LN1016"><span class='Ref_To_Local'>k</span></a><span class='Delimiter'>; 
</span>            <a href="formatting.c.html#LN1016"><span class='Ref_To_Local'>k</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="formatting.c.html#LN1016"><span class='Ref_To_Local'>k</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN157"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>) 
</span>                <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} </span><span class='Control'>while</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="formatting.c.html#LN1007"><span class='Ref_to_Parameter'>str</span></a> <span class='Operator'>== *</span><a href="formatting.c.html#LN1016"><span class='Ref_To_Local'>k</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN157"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end index_seq_search &raquo; </span> 
 
<span class='Keyword'>static const </span><a href="formatting.c.html#LN131"><span class='Ref_to_Typedef'>KeySuffix</span></a> <span class='Operator'>* 
</span><a name="LN1031"></a><span class='Declare_Function'>suff_search</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>str</span><span class='Delimiter'>, </span><span class='Keyword'>const </span><a href="formatting.c.html#LN131"><span class='Ref_to_Typedef'>KeySuffix</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>suf</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>type</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1033"></a>    <span class='Keyword'>const </span><a href="formatting.c.html#LN131"><span class='Ref_to_Typedef'>KeySuffix</span></a> <span class='Operator'>*</span><span class='Declare_Local'>s</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN1033"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN1031"><span class='Ref_to_Parameter'>suf</span></a><span class='Delimiter'>; </span><a href="formatting.c.html#LN1033"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN133"><span class='Ref_to_Member'>name</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; </span><a href="formatting.c.html#LN1033"><span class='Ref_To_Local'>s</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN1033"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN136"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>!= </span><a href="formatting.c.html#LN1031"><span class='Ref_to_Parameter'>type</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span>strncmp<span class='Parentheses'>(</span><a href="formatting.c.html#LN1031"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1033"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN133"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1033"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN134"><span class='Ref_to_Member'>len</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <span class='Control'>return</span> <a href="formatting.c.html#LN1033"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* ---------- 
 * Prepare NUMDesc (number description struct) via FormatNode struct 
 * ---------- 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN1051"></a><span class='Declare_Function'>NUMDesc_prepare</span><span class='Parentheses'>(</span><a href="formatting.c.html#LN305"><span class='Ref_to_Typedef'>NUMDesc</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>num</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN164"><span class='Ref_to_Struct'>FormatNode</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>n</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN166"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>!= </span><a href="formatting.c.html#LN173"><span class='Ref_to_Const'>NODE_TYPE_ACTION</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN356"><span class='Ref_to_Macro'>IS_EEEE</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Parentheses'>) </span><span class='Operator'>&& </span><a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN167"><span class='Ref_to_Member'>key</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN159"><span class='Ref_to_Member'>id</span></a> <span class='Operator'>!= </span><a href="formatting.c.html#LN680"><span class='Ref_to_EnumConst'>NUM_E</span></a><span class='Parentheses'>)</span> 
        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_SYNTAX_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"\"EEEE\" must be the last pattern used"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN167"><span class='Ref_to_Member'>key</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN159"><span class='Ref_to_Member'>id</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>case</span> <a href="formatting.c.html#LN676"><span class='Ref_to_EnumConst'>NUM_9</span></a><span class='Operator'>: 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN350"><span class='Ref_to_Macro'>IS_BRACKET</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Parentheses'>))</span> 
                <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_SYNTAX_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"\"9\" must be ahead of \"PR\""</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN355"><span class='Ref_to_Macro'>IS_MULTI</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Operator'>++</span><a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN312"><span class='Ref_to_Member'>multi</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN345"><span class='Ref_to_Macro'>IS_DECIMAL</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Parentheses'>))</span> 
                <span class='Operator'>++</span><a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN308"><span class='Ref_to_Member'>post</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
                <span class='Operator'>++</span><a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN307"><span class='Ref_to_Member'>pre</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="formatting.c.html#LN675"><span class='Ref_to_EnumConst'>NUM_0</span></a><span class='Operator'>: 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN350"><span class='Ref_to_Macro'>IS_BRACKET</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Parentheses'>))</span> 
                <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_SYNTAX_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"\"0\" must be ahead of \"PR\""</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="formatting.c.html#LN347"><span class='Ref_to_Macro'>IS_ZERO</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Parentheses'>) </span><span class='Operator'>&& !</span><a href="formatting.c.html#LN345"><span class='Ref_to_Macro'>IS_DECIMAL</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span>                <a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN310"><span class='Ref_to_Member'>flag</span></a> <span class='Operator'>|= </span><a href="formatting.c.html#LN324"><span class='Ref_to_Const'>NUM_F_ZERO</span></a><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN313"><span class='Ref_to_Member'>zero_start</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN307"><span class='Ref_to_Member'>pre</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="formatting.c.html#LN345"><span class='Ref_to_Macro'>IS_DECIMAL</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Parentheses'>))</span> 
                <span class='Operator'>++</span><a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN307"><span class='Ref_to_Member'>pre</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
                <span class='Operator'>++</span><a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN308"><span class='Ref_to_Member'>post</span></a><span class='Delimiter'>; 
</span> 
            <a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN314"><span class='Ref_to_Member'>zero_end</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN307"><span class='Ref_to_Member'>pre</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN308"><span class='Ref_to_Member'>post</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="formatting.c.html#LN677"><span class='Ref_to_EnumConst'>NUM_B</span></a><span class='Operator'>: 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN307"><span class='Ref_to_Member'>pre</span></a> <span class='Operator'>== </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN308"><span class='Ref_to_Member'>post</span></a> <span class='Operator'>== </span><span class='Number'>0</span> <span class='Operator'>&& </span><span class='Parentheses'>(</span><span class='Operator'>!</span><a href="formatting.c.html#LN347"><span class='Ref_to_Macro'>IS_ZERO</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Parentheses'>)))</span> 
                <a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN310"><span class='Ref_to_Member'>flag</span></a> <span class='Operator'>|= </span><a href="formatting.c.html#LN325"><span class='Ref_to_Const'>NUM_F_BLANK</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="formatting.c.html#LN679"><span class='Ref_to_EnumConst'>NUM_D</span></a><span class='Operator'>: 
</span>            <a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN310"><span class='Ref_to_Member'>flag</span></a> <span class='Operator'>|= </span><a href="formatting.c.html#LN323"><span class='Ref_to_Const'>NUM_F_LDECIMAL</span></a><span class='Delimiter'>; 
</span>            <a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN315"><span class='Ref_to_Member'>need_locale</span></a> <span class='Operator'>= </span><span class='Boolean'>TRUE</span><span class='Delimiter'>; 
</span>            <span class='Comment_Multi_Line'>/* FALLTHROUGH */ 
</span>        <span class='Control'>case</span> <a href="formatting.c.html#LN674"><span class='Ref_to_EnumConst'>NUM_DEC</span></a><span class='Operator'>: 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN345"><span class='Ref_to_Macro'>IS_DECIMAL</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Parentheses'>))</span> 
                <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_SYNTAX_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"multiple decimal points"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN355"><span class='Ref_to_Macro'>IS_MULTI</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Parentheses'>))</span> 
                <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_SYNTAX_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"cannot use \"V\" and decimal point together"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>            <a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN310"><span class='Ref_to_Member'>flag</span></a> <span class='Operator'>|= </span><a href="formatting.c.html#LN322"><span class='Ref_to_Const'>NUM_F_DECIMAL</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="formatting.c.html#LN681"><span class='Ref_to_EnumConst'>NUM_FM</span></a><span class='Operator'>: 
</span>            <a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN310"><span class='Ref_to_Member'>flag</span></a> <span class='Operator'>|= </span><a href="formatting.c.html#LN326"><span class='Ref_to_Const'>NUM_F_FILLMODE</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="formatting.c.html#LN690"><span class='Ref_to_EnumConst'>NUM_S</span></a><span class='Operator'>: 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN352"><span class='Ref_to_Macro'>IS_LSIGN</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Parentheses'>))</span> 
                <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_SYNTAX_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"cannot use \"S\" twice"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN353"><span class='Ref_to_Macro'>IS_PLUS</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Parentheses'>) </span><span class='Operator'>|| </span><a href="formatting.c.html#LN351"><span class='Ref_to_Macro'>IS_MINUS</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Parentheses'>) </span><span class='Operator'>|| </span><a href="formatting.c.html#LN350"><span class='Ref_to_Macro'>IS_BRACKET</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Parentheses'>))</span> 
                <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_SYNTAX_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"cannot use \"S\" and \"PL\"/\"MI\"/\"SG\"/\"PR\" together"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="formatting.c.html#LN345"><span class='Ref_to_Macro'>IS_DECIMAL</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span>                <a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN309"><span class='Ref_to_Member'>lsign</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN337"><span class='Ref_to_Const'>NUM_LSIGN_PRE</span></a><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN311"><span class='Ref_to_Member'>pre_lsign_num</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN307"><span class='Ref_to_Member'>pre</span></a><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN315"><span class='Ref_to_Member'>need_locale</span></a> <span class='Operator'>= </span><span class='Boolean'>TRUE</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN310"><span class='Ref_to_Member'>flag</span></a> <span class='Operator'>|= </span><a href="formatting.c.html#LN327"><span class='Ref_to_Const'>NUM_F_LSIGN</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN309"><span class='Ref_to_Member'>lsign</span></a> <span class='Operator'>== </span><a href="formatting.c.html#LN339"><span class='Ref_to_Const'>NUM_LSIGN_NONE</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN309"><span class='Ref_to_Member'>lsign</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN338"><span class='Ref_to_Const'>NUM_LSIGN_POST</span></a><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN315"><span class='Ref_to_Member'>need_locale</span></a> <span class='Operator'>= </span><span class='Boolean'>TRUE</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN310"><span class='Ref_to_Member'>flag</span></a> <span class='Operator'>|= </span><a href="formatting.c.html#LN327"><span class='Ref_to_Const'>NUM_F_LSIGN</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="formatting.c.html#LN684"><span class='Ref_to_EnumConst'>NUM_MI</span></a><span class='Operator'>: 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN352"><span class='Ref_to_Macro'>IS_LSIGN</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Parentheses'>))</span> 
                <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_SYNTAX_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"cannot use \"S\" and \"MI\" together"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>            <a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN310"><span class='Ref_to_Member'>flag</span></a> <span class='Operator'>|= </span><a href="formatting.c.html#LN329"><span class='Ref_to_Const'>NUM_F_MINUS</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN345"><span class='Ref_to_Macro'>IS_DECIMAL</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Parentheses'>))</span> 
                <a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN310"><span class='Ref_to_Member'>flag</span></a> <span class='Operator'>|= </span><a href="formatting.c.html#LN334"><span class='Ref_to_Const'>NUM_F_MINUS_POST</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="formatting.c.html#LN685"><span class='Ref_to_EnumConst'>NUM_PL</span></a><span class='Operator'>: 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN352"><span class='Ref_to_Macro'>IS_LSIGN</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Parentheses'>))</span> 
                <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_SYNTAX_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"cannot use \"S\" and \"PL\" together"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>            <a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN310"><span class='Ref_to_Member'>flag</span></a> <span class='Operator'>|= </span><a href="formatting.c.html#LN330"><span class='Ref_to_Const'>NUM_F_PLUS</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN345"><span class='Ref_to_Macro'>IS_DECIMAL</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Parentheses'>))</span> 
                <a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN310"><span class='Ref_to_Member'>flag</span></a> <span class='Operator'>|= </span><a href="formatting.c.html#LN333"><span class='Ref_to_Const'>NUM_F_PLUS_POST</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="formatting.c.html#LN688"><span class='Ref_to_EnumConst'>NUM_SG</span></a><span class='Operator'>: 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN352"><span class='Ref_to_Macro'>IS_LSIGN</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Parentheses'>))</span> 
                <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_SYNTAX_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"cannot use \"S\" and \"SG\" together"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>            <a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN310"><span class='Ref_to_Member'>flag</span></a> <span class='Operator'>|= </span><a href="formatting.c.html#LN329"><span class='Ref_to_Const'>NUM_F_MINUS</span></a><span class='Delimiter'>; 
</span>            <a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN310"><span class='Ref_to_Member'>flag</span></a> <span class='Operator'>|= </span><a href="formatting.c.html#LN330"><span class='Ref_to_Const'>NUM_F_PLUS</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="formatting.c.html#LN686"><span class='Ref_to_EnumConst'>NUM_PR</span></a><span class='Operator'>: 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN352"><span class='Ref_to_Macro'>IS_LSIGN</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Parentheses'>) </span><span class='Operator'>|| </span><a href="formatting.c.html#LN353"><span class='Ref_to_Macro'>IS_PLUS</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Parentheses'>) </span><span class='Operator'>|| </span><a href="formatting.c.html#LN351"><span class='Ref_to_Macro'>IS_MINUS</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Parentheses'>))</span> 
                <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_SYNTAX_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"cannot use \"PR\" and \"S\"/\"PL\"/\"MI\"/\"SG\" together"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>            <a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN310"><span class='Ref_to_Member'>flag</span></a> <span class='Operator'>|= </span><a href="formatting.c.html#LN328"><span class='Ref_to_Const'>NUM_F_BRACKET</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="formatting.c.html#LN703"><span class='Ref_to_EnumConst'>NUM_rn</span></a><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="formatting.c.html#LN687"><span class='Ref_to_EnumConst'>NUM_RN</span></a><span class='Operator'>: 
</span>            <a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN310"><span class='Ref_to_Member'>flag</span></a> <span class='Operator'>|= </span><a href="formatting.c.html#LN331"><span class='Ref_to_Const'>NUM_F_ROMAN</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="formatting.c.html#LN683"><span class='Ref_to_EnumConst'>NUM_L</span></a><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="formatting.c.html#LN682"><span class='Ref_to_EnumConst'>NUM_G</span></a><span class='Operator'>: 
</span>            <a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN315"><span class='Ref_to_Member'>need_locale</span></a> <span class='Operator'>= </span><span class='Boolean'>TRUE</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="formatting.c.html#LN692"><span class='Ref_to_EnumConst'>NUM_V</span></a><span class='Operator'>: 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN345"><span class='Ref_to_Macro'>IS_DECIMAL</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Parentheses'>))</span> 
                <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_SYNTAX_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"cannot use \"V\" and decimal point together"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>            <a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN310"><span class='Ref_to_Member'>flag</span></a> <span class='Operator'>|= </span><a href="formatting.c.html#LN332"><span class='Ref_to_Const'>NUM_F_MULTI</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="formatting.c.html#LN680"><span class='Ref_to_EnumConst'>NUM_E</span></a><span class='Operator'>: 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN356"><span class='Ref_to_Macro'>IS_EEEE</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Parentheses'>))</span> 
                <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_SYNTAX_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"cannot use \"EEEE\" twice"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN348"><span class='Ref_to_Macro'>IS_BLANK</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Parentheses'>) </span><span class='Operator'>|| </span><a href="formatting.c.html#LN349"><span class='Ref_to_Macro'>IS_FILLMODE</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Parentheses'>) </span><span class='Operator'>|| </span><a href="formatting.c.html#LN352"><span class='Ref_to_Macro'>IS_LSIGN</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Parentheses'>) </span><span class='Operator'>|| 
</span>                <a href="formatting.c.html#LN350"><span class='Ref_to_Macro'>IS_BRACKET</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Parentheses'>) </span><span class='Operator'>|| </span><a href="formatting.c.html#LN351"><span class='Ref_to_Macro'>IS_MINUS</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Parentheses'>) </span><span class='Operator'>|| </span><a href="formatting.c.html#LN353"><span class='Ref_to_Macro'>IS_PLUS</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Parentheses'>) </span><span class='Operator'>|| 
</span>                <a href="formatting.c.html#LN354"><span class='Ref_to_Macro'>IS_ROMAN</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Parentheses'>) </span><span class='Operator'>|| </span><a href="formatting.c.html#LN355"><span class='Ref_to_Macro'>IS_MULTI</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Parentheses'>))</span> 
                <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_SYNTAX_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                       <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"\"EEEE\" is incompatible with other formats"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../error/elog.c.html#LN871"><span class='Ref_to_Func'>errdetail</span></a><span class='Parentheses'>(</span><span class='String'>"\"EEEE\" may only be used together with digit and decimal point patterns."</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>            <a href="formatting.c.html#LN1051"><span class='Ref_to_Parameter'>num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN310"><span class='Ref_to_Member'>flag</span></a> <span class='Operator'>|= </span><a href="formatting.c.html#LN335"><span class='Ref_to_Const'>NUM_F_EEEE</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch n-&GT;key-&GT;id &raquo; </span> 
<span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end NUMDesc_prepare &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * Format parser, search small keywords and keyword's suffixes, and make 
 * format-node tree. 
 * 
 * for DATE-TIME & NUMBER version 
 * ---------- 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN1226"></a><span class='Declare_Function'>parse_format</span><span class='Parentheses'>(</span><a href="formatting.c.html#LN164"><span class='Ref_to_Struct'>FormatNode</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>str</span><span class='Delimiter'>, </span><span class='Keyword'>const </span><a href="formatting.c.html#LN155"><span class='Ref_to_Typedef'>KeyWord</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>kw</span><span class='Delimiter'>, 
</span><a name="LN1227"></a>             <span class='Keyword'>const </span><a href="formatting.c.html#LN131"><span class='Ref_to_Typedef'>KeySuffix</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>suf</span><span class='Delimiter'>, </span><span class='Keyword'>const int </span><span class='Operator'>*</span><span class='Declare_Parameter'>index</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>ver</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN305"><span class='Ref_to_Typedef'>NUMDesc</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>Num</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1229"></a>    <span class='Keyword'>const </span><a href="formatting.c.html#LN131"><span class='Ref_to_Typedef'>KeySuffix</span></a> <span class='Operator'>*</span><span class='Declare_Local'>s</span><span class='Delimiter'>; 
</span><a name="LN1230"></a>    <a href="formatting.c.html#LN164"><span class='Ref_to_Struct'>FormatNode</span></a> <span class='Operator'>*</span><span class='Declare_Local'>n</span><span class='Delimiter'>; 
</span><a name="LN1231"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>node_set</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>, 
</span><a name="LN1232"></a>                <span class='Declare_Local'>suffix</span><span class='Delimiter'>, 
</span><a name="LN1233"></a>                <span class='Declare_Local'>last</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
<span class='Directive'>#ifdef</span> DEBUG_TO_FROM_CHAR 
    <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN62"><span class='Ref_to_Const'>DEBUG_elog_output</span></a><span class='Delimiter'>, </span><span class='String'>"to_char/number(): run parser"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
 
    <a href="formatting.c.html#LN1230"><span class='Ref_To_Local'>n</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN1226"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>while</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="formatting.c.html#LN1226"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="formatting.c.html#LN1232"><span class='Ref_To_Local'>suffix</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Prefix 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN1227"><span class='Ref_to_Parameter'>ver</span></a> <span class='Operator'>== </span><a href="formatting.c.html#LN102"><span class='Ref_to_Const'>DCH_TYPE</span></a> <span class='Operator'>&& </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN1229"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN956"><span class='Ref_to_Proto'>suff_search</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1226"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1227"><span class='Ref_to_Parameter'>suf</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN176"><span class='Ref_to_Const'>SUFFTYPE_PREFIX</span></a><span class='Parentheses'>))</span> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <a href="formatting.c.html#LN1232"><span class='Ref_To_Local'>suffix</span></a> <span class='Operator'>|= </span><a href="formatting.c.html#LN1229"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN135"><span class='Ref_to_Member'>id</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN1229"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN134"><span class='Ref_to_Member'>len</span></a><span class='Parentheses'>) 
</span>                <a href="formatting.c.html#LN1226"><span class='Ref_to_Parameter'>str</span></a> <span class='Operator'>+= </span><a href="formatting.c.html#LN1229"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN134"><span class='Ref_to_Member'>len</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Keyword 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="formatting.c.html#LN1226"><span class='Ref_to_Parameter'>str</span></a> <span class='Operator'>&& </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN1230"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN167"><span class='Ref_to_Member'>key</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN954"><span class='Ref_to_Proto'>index_seq_search</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1226"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1226"><span class='Ref_to_Parameter'>kw</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1227"><span class='Ref_to_Parameter'>index</span></a><span class='Parentheses'>))</span> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <a href="formatting.c.html#LN1230"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN166"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN173"><span class='Ref_to_Const'>NODE_TYPE_ACTION</span></a><span class='Delimiter'>; 
</span>            <a href="formatting.c.html#LN1230"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>            <a href="formatting.c.html#LN1231"><span class='Ref_To_Local'>node_set</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN1230"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN167"><span class='Ref_to_Member'>key</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN158"><span class='Ref_to_Member'>len</span></a><span class='Parentheses'>) 
</span>                <a href="formatting.c.html#LN1226"><span class='Ref_to_Parameter'>str</span></a> <span class='Operator'>+= </span><a href="formatting.c.html#LN1230"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN167"><span class='Ref_to_Member'>key</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN158"><span class='Ref_to_Member'>len</span></a><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * NUM version: Prepare global NUMDesc struct 
             */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN1227"><span class='Ref_to_Parameter'>ver</span></a> <span class='Operator'>== </span><a href="formatting.c.html#LN103"><span class='Ref_to_Const'>NUM_TYPE</span></a><span class='Parentheses'>) 
</span>                <a href="formatting.c.html#LN957"><span class='Ref_to_Proto'>NUMDesc_prepare</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1227"><span class='Ref_to_Parameter'>Num</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1230"><span class='Ref_To_Local'>n</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * Postfix 
             */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN1227"><span class='Ref_to_Parameter'>ver</span></a> <span class='Operator'>== </span><a href="formatting.c.html#LN102"><span class='Ref_to_Const'>DCH_TYPE</span></a> <span class='Operator'>&& *</span><a href="formatting.c.html#LN1226"><span class='Ref_to_Parameter'>str</span></a> <span class='Operator'>&& </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN1229"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN956"><span class='Ref_to_Proto'>suff_search</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1226"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1227"><span class='Ref_to_Parameter'>suf</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN177"><span class='Ref_to_Const'>SUFFTYPE_POSTFIX</span></a><span class='Parentheses'>))</span> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
            <span class='Delimiter'>{ 
</span>                <a href="formatting.c.html#LN1232"><span class='Ref_To_Local'>suffix</span></a> <span class='Operator'>|= </span><a href="formatting.c.html#LN1229"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN135"><span class='Ref_to_Member'>id</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN1229"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN134"><span class='Ref_to_Member'>len</span></a><span class='Parentheses'>) 
</span>                    <a href="formatting.c.html#LN1226"><span class='Ref_to_Parameter'>str</span></a> <span class='Operator'>+= </span><a href="formatting.c.html#LN1229"><span class='Ref_To_Local'>s</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN134"><span class='Ref_to_Member'>len</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if *str&&(n-&GT;key=index_s... &raquo; </span> 
        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="formatting.c.html#LN1226"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * Special characters '\' and '"' 
             */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="formatting.c.html#LN1226"><span class='Ref_to_Parameter'>str</span></a> <span class='Operator'>== </span><span class='String'>'"'</span> <span class='Operator'>&& </span><a href="formatting.c.html#LN1233"><span class='Ref_To_Local'>last</span></a> <span class='Operator'>!= </span><span class='String'>'\\'</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span><a name="LN1289"></a>                <span class='Keyword'>int</span>         <span class='Declare_Local'>x</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>while</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><span class='Parentheses'>(</span><span class='Operator'>++</span><a href="formatting.c.html#LN1226"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>))</span> 
                <span class='Delimiter'>{ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="formatting.c.html#LN1226"><span class='Ref_to_Parameter'>str</span></a> <span class='Operator'>== </span><span class='String'>'"'</span> <span class='Operator'>&& </span><a href="formatting.c.html#LN1289"><span class='Ref_To_Local'>x</span></a> <span class='Operator'>!= </span><span class='String'>'\\'</span><span class='Parentheses'>) 
</span>                    <span class='Delimiter'>{ 
</span>                        <a href="formatting.c.html#LN1226"><span class='Ref_to_Parameter'>str</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="formatting.c.html#LN1226"><span class='Ref_to_Parameter'>str</span></a> <span class='Operator'>== </span><span class='String'>'\\'</span> <span class='Operator'>&& </span><a href="formatting.c.html#LN1289"><span class='Ref_To_Local'>x</span></a> <span class='Operator'>!= </span><span class='String'>'\\'</span><span class='Parentheses'>) 
</span>                    <span class='Delimiter'>{ 
</span>                        <a href="formatting.c.html#LN1289"><span class='Ref_To_Local'>x</span></a> <span class='Operator'>= </span><span class='String'>'\\'</span><span class='Delimiter'>; 
</span>                        <span class='Control'>continue</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                    <a href="formatting.c.html#LN1230"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN166"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN174"><span class='Ref_to_Const'>NODE_TYPE_CHAR</span></a><span class='Delimiter'>; 
</span>                    <a href="formatting.c.html#LN1230"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN168"><span class='Ref_to_Member'>character</span></a> <span class='Operator'>= *</span><a href="formatting.c.html#LN1226"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>; 
</span>                    <a href="formatting.c.html#LN1230"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN167"><span class='Ref_to_Member'>key</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>                    <a href="formatting.c.html#LN1230"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>                    <span class='Operator'>++</span><a href="formatting.c.html#LN1230"><span class='Ref_To_Local'>n</span></a><span class='Delimiter'>; 
</span>                    <a href="formatting.c.html#LN1289"><span class='Ref_To_Local'>x</span></a> <span class='Operator'>= *</span><a href="formatting.c.html#LN1226"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <a href="formatting.c.html#LN1231"><span class='Ref_To_Local'>node_set</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN1232"><span class='Ref_To_Local'>suffix</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN1233"><span class='Ref_To_Local'>last</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if *str=='"'&&last!='\\' &raquo; </span> 
            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="formatting.c.html#LN1226"><span class='Ref_to_Parameter'>str</span></a> <span class='Operator'>&& *</span><a href="formatting.c.html#LN1226"><span class='Ref_to_Parameter'>str</span></a> <span class='Operator'>== </span><span class='String'>'\\'</span> <span class='Operator'>&& </span><a href="formatting.c.html#LN1233"><span class='Ref_To_Local'>last</span></a> <span class='Operator'>!= </span><span class='String'>'\\'</span> <span class='Operator'>&& *</span><span class='Parentheses'>(</span><a href="formatting.c.html#LN1226"><span class='Ref_to_Parameter'>str</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='String'>'"'</span><span class='Parentheses'>)</span> 
            <span class='Delimiter'>{ 
</span>                <a href="formatting.c.html#LN1233"><span class='Ref_To_Local'>last</span></a> <span class='Operator'>= *</span><a href="formatting.c.html#LN1226"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN1226"><span class='Ref_to_Parameter'>str</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="formatting.c.html#LN1226"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <a href="formatting.c.html#LN1230"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN166"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN174"><span class='Ref_to_Const'>NODE_TYPE_CHAR</span></a><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN1230"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN168"><span class='Ref_to_Member'>character</span></a> <span class='Operator'>= *</span><a href="formatting.c.html#LN1226"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN1230"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN167"><span class='Ref_to_Member'>key</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN1231"><span class='Ref_To_Local'>node_set</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN1233"><span class='Ref_To_Local'>last</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN1226"><span class='Ref_to_Parameter'>str</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if *str &raquo; </span> 
 
        <span class='Comment_Multi_Line'>/* end */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN1231"><span class='Ref_To_Local'>node_set</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN1230"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN166"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>== </span><a href="formatting.c.html#LN173"><span class='Ref_to_Const'>NODE_TYPE_ACTION</span></a><span class='Parentheses'>) 
</span>                <a href="formatting.c.html#LN1230"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN1232"><span class='Ref_To_Local'>suffix</span></a><span class='Delimiter'>; 
</span>            <span class='Operator'>++</span><a href="formatting.c.html#LN1230"><span class='Ref_To_Local'>n</span></a><span class='Delimiter'>; 
</span> 
            <a href="formatting.c.html#LN1230"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>            <a href="formatting.c.html#LN1231"><span class='Ref_To_Local'>node_set</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end while *str &raquo; </span> 
 
    <a href="formatting.c.html#LN1230"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN166"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN172"><span class='Ref_to_Const'>NODE_TYPE_END</span></a><span class='Delimiter'>; 
</span>    <a href="formatting.c.html#LN1230"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end parse_format &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * DEBUG: Dump the FormatNode Tree (debug) 
 * ---------- 
 */ 
</span><span class='Directive'>#ifdef</span> DEBUG_TO_FROM_CHAR 
 
<a name="LN1352"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>DUMP_THth</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>_suf</span><span class='Parentheses'>) (</span><a href="formatting.c.html#LN515"><span class='Ref_to_Macro'>S_TH</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1352"><span class='Ref_to_Parameter'>_suf</span></a><span class='Parentheses'>)</span> <span class='Operator'>? </span><span class='String'>"TH"</span> <span class='Operator'>: </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN516"><span class='Ref_to_Macro'>S_th</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1352"><span class='Ref_to_Parameter'>_suf</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='String'>"th"</span> <span class='Operator'>: </span><span class='String'>" "</span><span class='Parentheses'>))</span> 
<a name="LN1353"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>DUMP_FM</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>_suf</span><span class='Parentheses'>)</span>   <span class='Parentheses'>(</span><a href="formatting.c.html#LN520"><span class='Ref_to_Macro'>S_FM</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1353"><span class='Ref_to_Parameter'>_suf</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='String'>"FM"</span> <span class='Operator'>: </span><span class='String'>" "</span><span class='Parentheses'>)</span> 
 
<span class='Keyword'>static void 
</span><a name="LN1356"></a><span class='Declare_Function'>dump_node</span><span class='Parentheses'>(</span><a href="formatting.c.html#LN164"><span class='Ref_to_Struct'>FormatNode</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>max</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1358"></a>    <a href="formatting.c.html#LN164"><span class='Ref_to_Struct'>FormatNode</span></a> <span class='Operator'>*</span><span class='Declare_Local'>n</span><span class='Delimiter'>; 
</span><a name="LN1359"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>a</span><span class='Delimiter'>; 
</span> 
    <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN62"><span class='Ref_to_Const'>DEBUG_elog_output</span></a><span class='Delimiter'>, </span><span class='String'>"to_from-char(): DUMP FORMAT"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN1359"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN1358"><span class='Ref_To_Local'>n</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN1356"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; </span><a href="formatting.c.html#LN1359"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>&LT;= </span><a href="formatting.c.html#LN1356"><span class='Ref_to_Parameter'>max</span></a><span class='Delimiter'>; </span><a href="formatting.c.html#LN1358"><span class='Ref_To_Local'>n</span></a><span class='Operator'>++</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN1359"><span class='Ref_To_Local'>a</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN1358"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN166"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>== </span><a href="formatting.c.html#LN173"><span class='Ref_to_Const'>NODE_TYPE_ACTION</span></a><span class='Parentheses'>) 
</span>            <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN62"><span class='Ref_to_Const'>DEBUG_elog_output</span></a><span class='Delimiter'>, </span><span class='String'>"%d:\t NODE_TYPE_ACTION '%s'\t(%s,%s)"</span><span class='Delimiter'>, 
</span>                 <a href="formatting.c.html#LN1359"><span class='Ref_To_Local'>a</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1358"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN167"><span class='Ref_to_Member'>key</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN157"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1352"><span class='Ref_to_Macro'>DUMP_THth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1358"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN1353"><span class='Ref_to_Macro'>DUMP_FM</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1358"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN1358"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN166"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>== </span><a href="formatting.c.html#LN174"><span class='Ref_to_Const'>NODE_TYPE_CHAR</span></a><span class='Parentheses'>) 
</span>            <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN62"><span class='Ref_to_Const'>DEBUG_elog_output</span></a><span class='Delimiter'>, </span><span class='String'>"%d:\t NODE_TYPE_CHAR '%c'"</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN1359"><span class='Ref_To_Local'>a</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1358"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN168"><span class='Ref_to_Member'>character</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN1358"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN166"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>== </span><a href="formatting.c.html#LN172"><span class='Ref_to_Const'>NODE_TYPE_END</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN62"><span class='Ref_to_Const'>DEBUG_elog_output</span></a><span class='Delimiter'>, </span><span class='String'>"%d:\t NODE_TYPE_END"</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN1359"><span class='Ref_To_Local'>a</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>return</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
            <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN62"><span class='Ref_to_Const'>DEBUG_elog_output</span></a><span class='Delimiter'>, </span><span class='String'>"%d:\t unknown NODE!"</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN1359"><span class='Ref_To_Local'>a</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
}</span><span class='Auto_Annotations'> &laquo; end dump_node &raquo; </span> 
<span class='Directive'>#endif</span>   <span class='Comment_Single_Line'>/* DEBUG */ 
</span> 
<span class='Comment_Multi_Line'>/***************************************************************************** 
 *          Private utils 
 *****************************************************************************/ 
</span> 
<span class='Comment_Multi_Line'>/* ---------- 
 * Return ST/ND/RD/TH for simple (1..9) numbers 
 * type --&GT; 0 upper, 1 lower 
 * ---------- 
 */ 
</span><span class='Keyword'>static const char </span><span class='Operator'>* 
</span><a name="LN1391"></a><span class='Declare_Function'>get_th</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>num</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>type</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1393"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>len</span> <span class='Operator'>= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN1391"><span class='Ref_to_Parameter'>num</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span><a name="LN1394"></a>                <span class='Declare_Local'>last</span><span class='Delimiter'>, 
</span><a name="LN1395"></a>                <span class='Declare_Local'>seclast</span><span class='Delimiter'>; 
</span> 
    <a href="formatting.c.html#LN1394"><span class='Ref_To_Local'>last</span></a> <span class='Operator'>= *</span><span class='Parentheses'>(</span><a href="formatting.c.html#LN1391"><span class='Ref_to_Parameter'>num</span></a> <span class='Operator'>+ </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN1393"><span class='Ref_To_Local'>len</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span>isdigit<span class='Parentheses'>((</span><span class='Keyword'>unsigned char</span><span class='Parentheses'>) </span><a href="formatting.c.html#LN1394"><span class='Ref_To_Local'>last</span></a><span class='Parentheses'>))</span> 
        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INVALID_TEXT_REPRESENTATION<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"\"%s\" is not a number"</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN1391"><span class='Ref_to_Parameter'>num</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * All "teens" (&LT;x&GT;1[0-9]) get 'TH/th', while &LT;x&GT;[02-9][123] still get 
     * 'ST/st', 'ND/nd', 'RD/rd', respectively 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="formatting.c.html#LN1393"><span class='Ref_To_Local'>len</span></a> <span class='Operator'>&GT; </span><span class='Number'>1</span><span class='Parentheses'>)</span> <span class='Operator'>&& </span><span class='Parentheses'>((</span><a href="formatting.c.html#LN1395"><span class='Ref_To_Local'>seclast</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN1391"><span class='Ref_to_Parameter'>num</span></a><span class='Delimiter'>[</span><a href="formatting.c.html#LN1393"><span class='Ref_To_Local'>len</span></a> <span class='Operator'>- </span><span class='Number'>2</span><span class='Delimiter'>]</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='String'>'1'</span><span class='Parentheses'>))</span> 
        <a href="formatting.c.html#LN1394"><span class='Ref_To_Local'>last</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN1394"><span class='Ref_To_Local'>last</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>case</span> <span class='String'>'1'</span><span class='Operator'>: 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN1391"><span class='Ref_to_Parameter'>type</span></a> <span class='Operator'>== </span><a href="formatting.c.html#LN298"><span class='Ref_to_Const'>TH_UPPER</span></a><span class='Parentheses'>) 
</span>                <span class='Control'>return</span> <a href="formatting.c.html#LN279"><span class='Ref_to_Global_Var'>numTH</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]; 
</span>            <span class='Control'>return</span> <a href="formatting.c.html#LN280"><span class='Ref_to_Global_Var'>numth</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]; 
</span>        <span class='Control'>case</span> <span class='String'>'2'</span><span class='Operator'>: 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN1391"><span class='Ref_to_Parameter'>type</span></a> <span class='Operator'>== </span><a href="formatting.c.html#LN298"><span class='Ref_to_Const'>TH_UPPER</span></a><span class='Parentheses'>) 
</span>                <span class='Control'>return</span> <a href="formatting.c.html#LN279"><span class='Ref_to_Global_Var'>numTH</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]; 
</span>            <span class='Control'>return</span> <a href="formatting.c.html#LN280"><span class='Ref_to_Global_Var'>numth</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]; 
</span>        <span class='Control'>case</span> <span class='String'>'3'</span><span class='Operator'>: 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN1391"><span class='Ref_to_Parameter'>type</span></a> <span class='Operator'>== </span><a href="formatting.c.html#LN298"><span class='Ref_to_Const'>TH_UPPER</span></a><span class='Parentheses'>) 
</span>                <span class='Control'>return</span> <a href="formatting.c.html#LN279"><span class='Ref_to_Global_Var'>numTH</span></a><span class='Delimiter'>[</span><span class='Number'>2</span><span class='Delimiter'>]; 
</span>            <span class='Control'>return</span> <a href="formatting.c.html#LN280"><span class='Ref_to_Global_Var'>numth</span></a><span class='Delimiter'>[</span><span class='Number'>2</span><span class='Delimiter'>]; 
</span>        <span class='Control'>default</span><span class='Operator'>: 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN1391"><span class='Ref_to_Parameter'>type</span></a> <span class='Operator'>== </span><a href="formatting.c.html#LN298"><span class='Ref_to_Const'>TH_UPPER</span></a><span class='Parentheses'>) 
</span>                <span class='Control'>return</span> <a href="formatting.c.html#LN279"><span class='Ref_to_Global_Var'>numTH</span></a><span class='Delimiter'>[</span><span class='Number'>3</span><span class='Delimiter'>]; 
</span>            <span class='Control'>return</span> <a href="formatting.c.html#LN280"><span class='Ref_to_Global_Var'>numth</span></a><span class='Delimiter'>[</span><span class='Number'>3</span><span class='Delimiter'>]; 
</span>    <span class='Delimiter'>} 
}</span><span class='Auto_Annotations'> &laquo; end get_th &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * Convert string-number to ordinal string-number 
 * type --&GT; 0 upper, 1 lower 
 * ---------- 
 */ 
</span><span class='Keyword'>static char </span><span class='Operator'>* 
</span><a name="LN1437"></a><span class='Declare_Function'>str_numth</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>dest</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>num</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>type</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN1437"><span class='Ref_to_Parameter'>dest</span></a> <span class='Operator'>!= </span><a href="formatting.c.html#LN1437"><span class='Ref_to_Parameter'>num</span></a><span class='Parentheses'>) 
</span>        <a href="../../../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1437"><span class='Ref_to_Parameter'>dest</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1437"><span class='Ref_to_Parameter'>num</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    strcat<span class='Parentheses'>(</span><a href="formatting.c.html#LN1437"><span class='Ref_to_Parameter'>dest</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN970"><span class='Ref_to_Proto'>get_th</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1437"><span class='Ref_to_Parameter'>num</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1437"><span class='Ref_to_Parameter'>type</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="formatting.c.html#LN1437"><span class='Ref_to_Parameter'>dest</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/***************************************************************************** 
 *          upper/lower/initcap functions 
 *****************************************************************************/ 
</span> 
<span class='Directive'>#ifdef</span> USE_ICU 
 
<a name="LN1451"></a><span class='Control'>typedef</span> <a href="../../../port/crypt.c.html#LN107"><span class='Ref_to_Typedef'>int32_t</span></a> <span class='Parentheses'>(</span><span class='Operator'>*</span><span class='Declare_Typedef'>ICU_Convert_Func</span><span class='Parentheses'>) (</span>UChar <span class='Operator'>*</span>dest<span class='Delimiter'>, </span><a href="../../../port/crypt.c.html#LN107"><span class='Ref_to_Typedef'>int32_t</span></a> destCapacity<span class='Delimiter'>, 
</span>                                         <span class='Keyword'>const </span>UChar <span class='Operator'>*</span>src<span class='Delimiter'>, </span><a href="../../../port/crypt.c.html#LN107"><span class='Ref_to_Typedef'>int32_t</span></a> srcLength<span class='Delimiter'>, 
</span>                                                 <span class='Keyword'>const char </span><span class='Operator'>*</span><a href="../../../bin/initdb/initdb.c.html#LN122"><span class='Ref_to_Global_Var'>locale</span></a><span class='Delimiter'>, 
</span>                                                 UErrorCode <span class='Operator'>*</span>pErrorCode<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<span class='Keyword'>static </span><a href="../../../port/crypt.c.html#LN107"><span class='Ref_to_Typedef'>int32_t</span></a> 
<a name="LN1457"></a><span class='Declare_Function'>icu_convert_case</span><span class='Parentheses'>(</span><a href="formatting.c.html#LN1451"><span class='Ref_to_Typedef'>ICU_Convert_Func</span></a> <span class='Declare_Parameter'>func</span><span class='Delimiter'>, </span><a href="../../../include/utils/pg_locale.h.html#LN87"><span class='Ref_to_Typedef'>pg_locale_t</span></a> <span class='Declare_Parameter'>mylocale</span><span class='Delimiter'>, 
</span><a name="LN1458"></a>                 UChar <span class='Operator'>**</span><span class='Declare_Parameter'>buff_dest</span><span class='Delimiter'>, </span>UChar <span class='Operator'>*</span><span class='Declare_Parameter'>buff_source</span><span class='Delimiter'>, </span><a href="../../../port/crypt.c.html#LN107"><span class='Ref_to_Typedef'>int32_t</span></a> <span class='Declare_Parameter'>len_source</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1460"></a>    UErrorCode  <span class='Declare_Local'>status</span><span class='Delimiter'>; 
</span><a name="LN1461"></a>    <a href="../../../port/crypt.c.html#LN107"><span class='Ref_to_Typedef'>int32_t</span></a>     <span class='Declare_Local'>len_dest</span><span class='Delimiter'>; 
</span> 
    <a href="formatting.c.html#LN1461"><span class='Ref_To_Local'>len_dest</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN1458"><span class='Ref_to_Parameter'>len_source</span></a><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* try first with same length */ 
</span>    <span class='Operator'>*</span><a href="formatting.c.html#LN1458"><span class='Ref_to_Parameter'>buff_dest</span></a> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1461"><span class='Ref_To_Local'>len_dest</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Operator'>**</span><a href="formatting.c.html#LN1458"><span class='Ref_to_Parameter'>buff_dest</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="formatting.c.html#LN1460"><span class='Ref_To_Local'>status</span></a> <span class='Operator'>= </span>U_ZERO_ERROR<span class='Delimiter'>; 
</span>    <a href="formatting.c.html#LN1461"><span class='Ref_To_Local'>len_dest</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN1457"><span class='Ref_to_Parameter'>func</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="formatting.c.html#LN1458"><span class='Ref_to_Parameter'>buff_dest</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1461"><span class='Ref_To_Local'>len_dest</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1458"><span class='Ref_to_Parameter'>buff_source</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1458"><span class='Ref_to_Parameter'>len_source</span></a><span class='Delimiter'>, 
</span>                    <a href="formatting.c.html#LN1457"><span class='Ref_to_Parameter'>mylocale</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/pg_locale.h.html#LN84"><span class='Ref_to_Member'>info</span></a><span class='Operator'>.</span>icu<span class='Operator'>.</span>locale<span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN1460"><span class='Ref_To_Local'>status</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN1460"><span class='Ref_To_Local'>status</span></a> <span class='Operator'>== </span>U_BUFFER_OVERFLOW_ERROR<span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* try again with adjusted length */ 
</span>        <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="formatting.c.html#LN1458"><span class='Ref_to_Parameter'>buff_dest</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Operator'>*</span><a href="formatting.c.html#LN1458"><span class='Ref_to_Parameter'>buff_dest</span></a> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1461"><span class='Ref_To_Local'>len_dest</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Operator'>**</span><a href="formatting.c.html#LN1458"><span class='Ref_to_Parameter'>buff_dest</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="formatting.c.html#LN1460"><span class='Ref_To_Local'>status</span></a> <span class='Operator'>= </span>U_ZERO_ERROR<span class='Delimiter'>; 
</span>        <a href="formatting.c.html#LN1461"><span class='Ref_To_Local'>len_dest</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN1457"><span class='Ref_to_Parameter'>func</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="formatting.c.html#LN1458"><span class='Ref_to_Parameter'>buff_dest</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1461"><span class='Ref_To_Local'>len_dest</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1458"><span class='Ref_to_Parameter'>buff_source</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1458"><span class='Ref_to_Parameter'>len_source</span></a><span class='Delimiter'>, 
</span>                        <a href="formatting.c.html#LN1457"><span class='Ref_to_Parameter'>mylocale</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/pg_locale.h.html#LN84"><span class='Ref_to_Member'>info</span></a><span class='Operator'>.</span>icu<span class='Operator'>.</span>locale<span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN1460"><span class='Ref_To_Local'>status</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span>U_FAILURE<span class='Parentheses'>(</span><a href="formatting.c.html#LN1460"><span class='Ref_To_Local'>status</span></a><span class='Parentheses'>))</span> 
        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"case conversion failed: %s"</span><span class='Delimiter'>, </span>u_errorName<span class='Parentheses'>(</span><a href="formatting.c.html#LN1460"><span class='Ref_To_Local'>status</span></a><span class='Parentheses'>))))</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="formatting.c.html#LN1461"><span class='Ref_To_Local'>len_dest</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end icu_convert_case &raquo; </span> 
 
<span class='Keyword'>static </span><a href="../../../port/crypt.c.html#LN107"><span class='Ref_to_Typedef'>int32_t</span></a> 
<a name="LN1484"></a><span class='Declare_Function'>u_strToTitle_default_BI</span><span class='Parentheses'>(</span>UChar <span class='Operator'>*</span><span class='Declare_Parameter'>dest</span><span class='Delimiter'>, </span><a href="../../../port/crypt.c.html#LN107"><span class='Ref_to_Typedef'>int32_t</span></a> <span class='Declare_Parameter'>destCapacity</span><span class='Delimiter'>, 
</span><a name="LN1485"></a>                        <span class='Keyword'>const </span>UChar <span class='Operator'>*</span><span class='Declare_Parameter'>src</span><span class='Delimiter'>, </span><a href="../../../port/crypt.c.html#LN107"><span class='Ref_to_Typedef'>int32_t</span></a> <span class='Declare_Parameter'>srcLength</span><span class='Delimiter'>, 
</span><a name="LN1486"></a>                        <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>locale</span><span class='Delimiter'>, 
</span><a name="LN1487"></a>                        UErrorCode <span class='Operator'>*</span><span class='Declare_Parameter'>pErrorCode</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> u_strToTitle<span class='Parentheses'>(</span><a href="formatting.c.html#LN1484"><span class='Ref_to_Parameter'>dest</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1484"><span class='Ref_to_Parameter'>destCapacity</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1485"><span class='Ref_to_Parameter'>src</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1485"><span class='Ref_to_Parameter'>srcLength</span></a><span class='Delimiter'>, 
</span>                        <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN1486"><span class='Ref_to_Parameter'>locale</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1487"><span class='Ref_to_Parameter'>pErrorCode</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Directive'>#endif</span>   <span class='Comment_Single_Line'>/* USE_ICU */ 
</span> 
<span class='Comment_Multi_Line'>/* 
 * If the system provides the needed functions for wide-character manipulation 
 * (which are all standardized by C99), then we implement upper/lower/initcap 
 * using wide-character functions, if necessary.  Otherwise we use the 
 * traditional &LT;ctype.h&GT; functions, which of course will not work as desired 
 * in multibyte character sets.  Note that in either case we are effectively 
 * assuming that the database character encoding matches the encoding implied 
 * by LC_CTYPE. 
 * 
 * If the system provides locale_t and associated functions (which are 
 * standardized by Open Group's XBD), we can support collations that are 
 * neither default nor C.  The code is written to handle both combinations 
 * of have-wide-characters and have-locale_t, though it's rather unlikely 
 * a platform would have the latter without the former. 
 */ 
</span> 
<span class='Comment_Multi_Line'>/* 
 * collation-aware, wide-character-aware lower function 
 * 
 * We pass the number of bytes so we can pass varlena and char* 
 * to this function.  The result is a palloc'd, null-terminated string. 
 */ 
</span><span class='Keyword'>char </span><span class='Operator'>* 
</span><a name="LN1518"></a><span class='Declare_Function'>str_tolower</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>buff</span><span class='Delimiter'>, </span>size_t <span class='Declare_Parameter'>nbytes</span><span class='Delimiter'>, </span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>collid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1520"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="formatting.c.html#LN1518"><span class='Ref_to_Parameter'>buff</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* C/POSIX collations use this path regardless of database encoding */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/pg_locale.h.html#LN51"><span class='Ref_to_Proto'>lc_ctype_is_c</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1518"><span class='Ref_to_Parameter'>collid</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="formatting.c.html#LN1520"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../include/utils/formatting.h.html#LN26"><span class='Ref_to_Proto'>asc_tolower</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1518"><span class='Ref_to_Parameter'>buff</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1518"><span class='Ref_to_Parameter'>nbytes</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span><span class='Directive'>#ifdef</span> <a href="../../../include/c.h.html#LN1113"><span class='Ref_to_Const'>USE_WIDE_UPPER_LOWER</span></a> 
    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span><a name="LN1533"></a>        <a href="../../../include/utils/pg_locale.h.html#LN87"><span class='Ref_to_Typedef'>pg_locale_t</span></a> <span class='Declare_Local'>mylocale</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN1518"><span class='Ref_to_Parameter'>collid</span></a> <span class='Operator'>!= </span><a href="../../../include/catalog/pg_collation.h.html#LN74"><span class='Ref_to_Const'>DEFAULT_COLLATION_OID</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1518"><span class='Ref_to_Parameter'>collid</span></a><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* 
                 * This typically means that the parser could not resolve a 
                 * conflict of implicit collations, so report it that way. 
                 */ 
</span>                <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INDETERMINATE_COLLATION<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"could not determine which collation to use for lower() function"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../error/elog.c.html#LN985"><span class='Ref_to_Func'>errhint</span></a><span class='Parentheses'>(</span><span class='String'>"Use the COLLATE clause to set the collation explicitly."</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <a href="formatting.c.html#LN1533"><span class='Ref_To_Local'>mylocale</span></a> <span class='Operator'>= </span><a href="../../../include/utils/pg_locale.h.html#LN89"><span class='Ref_to_Proto'>pg_newlocale_from_collation</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1518"><span class='Ref_to_Parameter'>collid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
<span class='Directive'>#ifdef</span> USE_ICU 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN1533"><span class='Ref_To_Local'>mylocale</span></a> <span class='Operator'>&& </span><a href="formatting.c.html#LN1533"><span class='Ref_To_Local'>mylocale</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/pg_locale.h.html#LN70"><span class='Ref_to_Member'>provider</span></a> <span class='Operator'>== </span><a href="../../../include/catalog/pg_collation.h.html#LN84"><span class='Ref_to_Const'>COLLPROVIDER_ICU</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN1554"></a>            <a href="../../../port/crypt.c.html#LN107"><span class='Ref_to_Typedef'>int32_t</span></a>     <span class='Declare_Local'>len_uchar</span><span class='Delimiter'>; 
</span><a name="LN1555"></a>            <a href="../../../port/crypt.c.html#LN107"><span class='Ref_to_Typedef'>int32_t</span></a>     <span class='Declare_Local'>len_conv</span><span class='Delimiter'>; 
</span><a name="LN1556"></a>            UChar      <span class='Operator'>*</span><span class='Declare_Local'>buff_uchar</span><span class='Delimiter'>; 
</span><a name="LN1557"></a>            UChar      <span class='Operator'>*</span><span class='Declare_Local'>buff_conv</span><span class='Delimiter'>; 
</span> 
            <a href="formatting.c.html#LN1554"><span class='Ref_To_Local'>len_uchar</span></a> <span class='Operator'>= </span><a href="../../../include/utils/pg_locale.h.html#LN94"><span class='Ref_to_Proto'>icu_to_uchar</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN1556"><span class='Ref_To_Local'>buff_uchar</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1518"><span class='Ref_to_Parameter'>buff</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1518"><span class='Ref_to_Parameter'>nbytes</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="formatting.c.html#LN1555"><span class='Ref_To_Local'>len_conv</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN1456"><span class='Ref_to_Func'>icu_convert_case</span></a><span class='Parentheses'>(</span>u_strToLower<span class='Delimiter'>, </span><a href="formatting.c.html#LN1533"><span class='Ref_To_Local'>mylocale</span></a><span class='Delimiter'>, 
</span>                                        <span class='Operator'>&</span><a href="formatting.c.html#LN1557"><span class='Ref_To_Local'>buff_conv</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1556"><span class='Ref_To_Local'>buff_uchar</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1554"><span class='Ref_To_Local'>len_uchar</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../../include/utils/pg_locale.h.html#LN95"><span class='Ref_to_Proto'>icu_from_uchar</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN1520"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1557"><span class='Ref_To_Local'>buff_conv</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1555"><span class='Ref_To_Local'>len_conv</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
<span class='Directive'>#endif</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/mb/pg_wchar.h.html#LN535"><span class='Ref_to_Proto'>pg_database_encoding_max_length</span></a><span class='Parentheses'>() </span><span class='Operator'>&GT; </span><span class='Number'>1</span><span class='Parentheses'>)</span> 
            <span class='Delimiter'>{ 
</span><a name="LN1569"></a>                <span class='Keyword'>wchar_t</span>    <span class='Operator'>*</span><span class='Declare_Local'>workspace</span><span class='Delimiter'>; 
</span><a name="LN1570"></a>                size_t      <span class='Declare_Local'>curr_char</span><span class='Delimiter'>; 
</span><a name="LN1571"></a>                size_t      <span class='Declare_Local'>result_size</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* Overflow paranoia */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="formatting.c.html#LN1518"><span class='Ref_to_Parameter'>nbytes</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)</span> <span class='Operator'>&GT; </span><span class='Parentheses'>(</span>INT_MAX <span class='Operator'>/ </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>wchar_t</span><span class='Parentheses'>)))</span> 
                    <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                            <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_OUT_OF_MEMORY<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                             <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"out of memory"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* Output workspace cannot have more codes than input bytes */ 
</span>                <a href="formatting.c.html#LN1569"><span class='Ref_To_Local'>workspace</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>wchar_t </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>((</span><a href="formatting.c.html#LN1518"><span class='Ref_to_Parameter'>nbytes</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>) </span><span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>wchar_t</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
                <a href="../../../include/utils/pg_locale.h.html#LN102"><span class='Ref_to_Proto'>char2wchar</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1569"><span class='Ref_To_Local'>workspace</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1518"><span class='Ref_to_Parameter'>nbytes</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN1518"><span class='Ref_to_Parameter'>buff</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1518"><span class='Ref_to_Parameter'>nbytes</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1533"><span class='Ref_To_Local'>mylocale</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN1570"><span class='Ref_To_Local'>curr_char</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="formatting.c.html#LN1569"><span class='Ref_To_Local'>workspace</span></a><span class='Delimiter'>[</span><a href="formatting.c.html#LN1570"><span class='Ref_To_Local'>curr_char</span></a><span class='Delimiter'>] </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="formatting.c.html#LN1570"><span class='Ref_To_Local'>curr_char</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span><span class='Directive'>#ifdef</span> HAVE_LOCALE_T 
                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN1533"><span class='Ref_To_Local'>mylocale</span></a><span class='Parentheses'>) 
</span>                        <a href="formatting.c.html#LN1569"><span class='Ref_To_Local'>workspace</span></a><span class='Delimiter'>[</span><a href="formatting.c.html#LN1570"><span class='Ref_To_Local'>curr_char</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="../../../include/port/win32.h.html#LN325"><span class='Ref_to_Const'>towlower_l</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1569"><span class='Ref_To_Local'>workspace</span></a><span class='Delimiter'>[</span><a href="formatting.c.html#LN1570"><span class='Ref_To_Local'>curr_char</span></a><span class='Delimiter'>], </span><a href="formatting.c.html#LN1533"><span class='Ref_To_Local'>mylocale</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/pg_locale.h.html#LN84"><span class='Ref_to_Member'>info</span></a><span class='Operator'>.</span>lt<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>else</span> 
<span class='Directive'>#endif</span> 
                        <a href="formatting.c.html#LN1569"><span class='Ref_To_Local'>workspace</span></a><span class='Delimiter'>[</span><a href="formatting.c.html#LN1570"><span class='Ref_To_Local'>curr_char</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span>towlower<span class='Parentheses'>(</span><a href="formatting.c.html#LN1569"><span class='Ref_To_Local'>workspace</span></a><span class='Delimiter'>[</span><a href="formatting.c.html#LN1570"><span class='Ref_To_Local'>curr_char</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * Make result large enough; case change might change number 
                 * of bytes 
                 */ 
</span>                <a href="formatting.c.html#LN1571"><span class='Ref_To_Local'>result_size</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN1570"><span class='Ref_To_Local'>curr_char</span></a> <span class='Operator'>* </span><a href="../../../include/mb/pg_wchar.h.html#LN535"><span class='Ref_to_Proto'>pg_database_encoding_max_length</span></a><span class='Parentheses'>() </span><span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN1520"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1571"><span class='Ref_To_Local'>result_size</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <a href="../../../include/utils/pg_locale.h.html#LN100"><span class='Ref_to_Proto'>wchar2char</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1520"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1569"><span class='Ref_To_Local'>workspace</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1571"><span class='Ref_To_Local'>result_size</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1533"><span class='Ref_To_Local'>mylocale</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1569"><span class='Ref_To_Local'>workspace</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if pg_database_encoding_... &raquo; </span> 
<span class='Directive'>#endif</span>   <span class='Comment_Single_Line'>/* USE_WIDE_UPPER_LOWER */ 
</span>            <span class='Control'>else</span> 
            <span class='Delimiter'>{ 
</span><a name="LN1607"></a>                <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>p</span><span class='Delimiter'>; 
</span> 
                <a href="formatting.c.html#LN1520"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../include/utils/palloc.h.html#LN127"><span class='Ref_to_Proto'>pnstrdup</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1518"><span class='Ref_to_Parameter'>buff</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1518"><span class='Ref_to_Parameter'>nbytes</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * Note: we assume that tolower_l() will not be so broken as 
                 * to need an isupper_l() guard test.  When using the default 
                 * collation, we apply the traditional Postgres behavior that 
                 * forces ASCII-style treatment of I/i, but in non-default 
                 * collations you get exactly what the collation says. 
                 */ 
</span>                <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN1607"><span class='Ref_To_Local'>p</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN1520"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; </span><span class='Operator'>*</span><a href="formatting.c.html#LN1607"><span class='Ref_To_Local'>p</span></a><span class='Delimiter'>; </span><a href="formatting.c.html#LN1607"><span class='Ref_To_Local'>p</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span><span class='Directive'>#ifdef</span> HAVE_LOCALE_T 
                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN1533"><span class='Ref_To_Local'>mylocale</span></a><span class='Parentheses'>) 
</span>                        <span class='Operator'>*</span><a href="formatting.c.html#LN1607"><span class='Ref_To_Local'>p</span></a> <span class='Operator'>= </span><a href="../../../include/port/win32.h.html#LN323"><span class='Ref_to_Const'>tolower_l</span></a><span class='Parentheses'>((</span><span class='Keyword'>unsigned char</span><span class='Parentheses'>) </span><span class='Operator'>*</span><a href="formatting.c.html#LN1607"><span class='Ref_To_Local'>p</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1533"><span class='Ref_To_Local'>mylocale</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/pg_locale.h.html#LN84"><span class='Ref_to_Member'>info</span></a><span class='Operator'>.</span>lt<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>else</span> 
<span class='Directive'>#endif</span> 
                        <span class='Operator'>*</span><a href="formatting.c.html#LN1607"><span class='Ref_To_Local'>p</span></a> <span class='Operator'>= </span><a href="../../../port/pgstrcasecmp.c.html#LN120"><span class='Ref_to_Func'>pg_tolower</span></a><span class='Parentheses'>((</span><span class='Keyword'>unsigned char</span><span class='Parentheses'>) </span><span class='Operator'>*</span><a href="formatting.c.html#LN1607"><span class='Ref_To_Local'>p</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
 
    <span class='Control'>return</span> <a href="formatting.c.html#LN1520"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end str_tolower &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * collation-aware, wide-character-aware upper function 
 * 
 * We pass the number of bytes so we can pass varlena and char* 
 * to this function.  The result is a palloc'd, null-terminated string. 
 */ 
</span><span class='Keyword'>char </span><span class='Operator'>* 
</span><a name="LN1641"></a><span class='Declare_Function'>str_toupper</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>buff</span><span class='Delimiter'>, </span>size_t <span class='Declare_Parameter'>nbytes</span><span class='Delimiter'>, </span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>collid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1643"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="formatting.c.html#LN1641"><span class='Ref_to_Parameter'>buff</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* C/POSIX collations use this path regardless of database encoding */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/pg_locale.h.html#LN51"><span class='Ref_to_Proto'>lc_ctype_is_c</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1641"><span class='Ref_to_Parameter'>collid</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="formatting.c.html#LN1643"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../include/utils/formatting.h.html#LN27"><span class='Ref_to_Proto'>asc_toupper</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1641"><span class='Ref_to_Parameter'>buff</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1641"><span class='Ref_to_Parameter'>nbytes</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span><span class='Directive'>#ifdef</span> <a href="../../../include/c.h.html#LN1113"><span class='Ref_to_Const'>USE_WIDE_UPPER_LOWER</span></a> 
    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span><a name="LN1656"></a>        <a href="../../../include/utils/pg_locale.h.html#LN87"><span class='Ref_to_Typedef'>pg_locale_t</span></a> <span class='Declare_Local'>mylocale</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN1641"><span class='Ref_to_Parameter'>collid</span></a> <span class='Operator'>!= </span><a href="../../../include/catalog/pg_collation.h.html#LN74"><span class='Ref_to_Const'>DEFAULT_COLLATION_OID</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1641"><span class='Ref_to_Parameter'>collid</span></a><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* 
                 * This typically means that the parser could not resolve a 
                 * conflict of implicit collations, so report it that way. 
                 */ 
</span>                <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INDETERMINATE_COLLATION<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"could not determine which collation to use for upper() function"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../error/elog.c.html#LN985"><span class='Ref_to_Func'>errhint</span></a><span class='Parentheses'>(</span><span class='String'>"Use the COLLATE clause to set the collation explicitly."</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <a href="formatting.c.html#LN1656"><span class='Ref_To_Local'>mylocale</span></a> <span class='Operator'>= </span><a href="../../../include/utils/pg_locale.h.html#LN89"><span class='Ref_to_Proto'>pg_newlocale_from_collation</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1641"><span class='Ref_to_Parameter'>collid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
<span class='Directive'>#ifdef</span> USE_ICU 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN1656"><span class='Ref_To_Local'>mylocale</span></a> <span class='Operator'>&& </span><a href="formatting.c.html#LN1656"><span class='Ref_To_Local'>mylocale</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/pg_locale.h.html#LN70"><span class='Ref_to_Member'>provider</span></a> <span class='Operator'>== </span><a href="../../../include/catalog/pg_collation.h.html#LN84"><span class='Ref_to_Const'>COLLPROVIDER_ICU</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN1677"></a>            <a href="../../../port/crypt.c.html#LN107"><span class='Ref_to_Typedef'>int32_t</span></a>     <span class='Declare_Local'>len_uchar</span><span class='Delimiter'>, 
</span><a name="LN1678"></a>                        <span class='Declare_Local'>len_conv</span><span class='Delimiter'>; 
</span><a name="LN1679"></a>            UChar      <span class='Operator'>*</span><span class='Declare_Local'>buff_uchar</span><span class='Delimiter'>; 
</span><a name="LN1680"></a>            UChar      <span class='Operator'>*</span><span class='Declare_Local'>buff_conv</span><span class='Delimiter'>; 
</span> 
            <a href="formatting.c.html#LN1677"><span class='Ref_To_Local'>len_uchar</span></a> <span class='Operator'>= </span><a href="../../../include/utils/pg_locale.h.html#LN94"><span class='Ref_to_Proto'>icu_to_uchar</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN1679"><span class='Ref_To_Local'>buff_uchar</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1641"><span class='Ref_to_Parameter'>buff</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1641"><span class='Ref_to_Parameter'>nbytes</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="formatting.c.html#LN1678"><span class='Ref_To_Local'>len_conv</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN1456"><span class='Ref_to_Func'>icu_convert_case</span></a><span class='Parentheses'>(</span>u_strToUpper<span class='Delimiter'>, </span><a href="formatting.c.html#LN1656"><span class='Ref_To_Local'>mylocale</span></a><span class='Delimiter'>, 
</span>                                        <span class='Operator'>&</span><a href="formatting.c.html#LN1680"><span class='Ref_To_Local'>buff_conv</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1679"><span class='Ref_To_Local'>buff_uchar</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1677"><span class='Ref_To_Local'>len_uchar</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../../include/utils/pg_locale.h.html#LN95"><span class='Ref_to_Proto'>icu_from_uchar</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN1643"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1680"><span class='Ref_To_Local'>buff_conv</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1678"><span class='Ref_To_Local'>len_conv</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
<span class='Directive'>#endif</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/mb/pg_wchar.h.html#LN535"><span class='Ref_to_Proto'>pg_database_encoding_max_length</span></a><span class='Parentheses'>() </span><span class='Operator'>&GT; </span><span class='Number'>1</span><span class='Parentheses'>)</span> 
            <span class='Delimiter'>{ 
</span><a name="LN1692"></a>                <span class='Keyword'>wchar_t</span>    <span class='Operator'>*</span><span class='Declare_Local'>workspace</span><span class='Delimiter'>; 
</span><a name="LN1693"></a>                size_t      <span class='Declare_Local'>curr_char</span><span class='Delimiter'>; 
</span><a name="LN1694"></a>                size_t      <span class='Declare_Local'>result_size</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* Overflow paranoia */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="formatting.c.html#LN1641"><span class='Ref_to_Parameter'>nbytes</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)</span> <span class='Operator'>&GT; </span><span class='Parentheses'>(</span>INT_MAX <span class='Operator'>/ </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>wchar_t</span><span class='Parentheses'>)))</span> 
                    <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                            <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_OUT_OF_MEMORY<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                             <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"out of memory"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* Output workspace cannot have more codes than input bytes */ 
</span>                <a href="formatting.c.html#LN1692"><span class='Ref_To_Local'>workspace</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>wchar_t </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>((</span><a href="formatting.c.html#LN1641"><span class='Ref_to_Parameter'>nbytes</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>) </span><span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>wchar_t</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
                <a href="../../../include/utils/pg_locale.h.html#LN102"><span class='Ref_to_Proto'>char2wchar</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1692"><span class='Ref_To_Local'>workspace</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1641"><span class='Ref_to_Parameter'>nbytes</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN1641"><span class='Ref_to_Parameter'>buff</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1641"><span class='Ref_to_Parameter'>nbytes</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1656"><span class='Ref_To_Local'>mylocale</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN1693"><span class='Ref_To_Local'>curr_char</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="formatting.c.html#LN1692"><span class='Ref_To_Local'>workspace</span></a><span class='Delimiter'>[</span><a href="formatting.c.html#LN1693"><span class='Ref_To_Local'>curr_char</span></a><span class='Delimiter'>] </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="formatting.c.html#LN1693"><span class='Ref_To_Local'>curr_char</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span><span class='Directive'>#ifdef</span> HAVE_LOCALE_T 
                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN1656"><span class='Ref_To_Local'>mylocale</span></a><span class='Parentheses'>) 
</span>                        <a href="formatting.c.html#LN1692"><span class='Ref_To_Local'>workspace</span></a><span class='Delimiter'>[</span><a href="formatting.c.html#LN1693"><span class='Ref_To_Local'>curr_char</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="../../../include/port/win32.h.html#LN326"><span class='Ref_to_Const'>towupper_l</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1692"><span class='Ref_To_Local'>workspace</span></a><span class='Delimiter'>[</span><a href="formatting.c.html#LN1693"><span class='Ref_To_Local'>curr_char</span></a><span class='Delimiter'>], </span><a href="formatting.c.html#LN1656"><span class='Ref_To_Local'>mylocale</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/pg_locale.h.html#LN84"><span class='Ref_to_Member'>info</span></a><span class='Operator'>.</span>lt<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>else</span> 
<span class='Directive'>#endif</span> 
                        <a href="formatting.c.html#LN1692"><span class='Ref_To_Local'>workspace</span></a><span class='Delimiter'>[</span><a href="formatting.c.html#LN1693"><span class='Ref_To_Local'>curr_char</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span>towupper<span class='Parentheses'>(</span><a href="formatting.c.html#LN1692"><span class='Ref_To_Local'>workspace</span></a><span class='Delimiter'>[</span><a href="formatting.c.html#LN1693"><span class='Ref_To_Local'>curr_char</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * Make result large enough; case change might change number 
                 * of bytes 
                 */ 
</span>                <a href="formatting.c.html#LN1694"><span class='Ref_To_Local'>result_size</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN1693"><span class='Ref_To_Local'>curr_char</span></a> <span class='Operator'>* </span><a href="../../../include/mb/pg_wchar.h.html#LN535"><span class='Ref_to_Proto'>pg_database_encoding_max_length</span></a><span class='Parentheses'>() </span><span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN1643"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1694"><span class='Ref_To_Local'>result_size</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <a href="../../../include/utils/pg_locale.h.html#LN100"><span class='Ref_to_Proto'>wchar2char</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1643"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1692"><span class='Ref_To_Local'>workspace</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1694"><span class='Ref_To_Local'>result_size</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1656"><span class='Ref_To_Local'>mylocale</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1692"><span class='Ref_To_Local'>workspace</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if pg_database_encoding_... &raquo; </span> 
<span class='Directive'>#endif</span>   <span class='Comment_Single_Line'>/* USE_WIDE_UPPER_LOWER */ 
</span>            <span class='Control'>else</span> 
            <span class='Delimiter'>{ 
</span><a name="LN1730"></a>                <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>p</span><span class='Delimiter'>; 
</span> 
                <a href="formatting.c.html#LN1643"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../include/utils/palloc.h.html#LN127"><span class='Ref_to_Proto'>pnstrdup</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1641"><span class='Ref_to_Parameter'>buff</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1641"><span class='Ref_to_Parameter'>nbytes</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * Note: we assume that toupper_l() will not be so broken as 
                 * to need an islower_l() guard test.  When using the default 
                 * collation, we apply the traditional Postgres behavior that 
                 * forces ASCII-style treatment of I/i, but in non-default 
                 * collations you get exactly what the collation says. 
                 */ 
</span>                <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN1730"><span class='Ref_To_Local'>p</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN1643"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; </span><span class='Operator'>*</span><a href="formatting.c.html#LN1730"><span class='Ref_To_Local'>p</span></a><span class='Delimiter'>; </span><a href="formatting.c.html#LN1730"><span class='Ref_To_Local'>p</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span><span class='Directive'>#ifdef</span> HAVE_LOCALE_T 
                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN1656"><span class='Ref_To_Local'>mylocale</span></a><span class='Parentheses'>) 
</span>                        <span class='Operator'>*</span><a href="formatting.c.html#LN1730"><span class='Ref_To_Local'>p</span></a> <span class='Operator'>= </span><a href="../../../include/port/win32.h.html#LN324"><span class='Ref_to_Const'>toupper_l</span></a><span class='Parentheses'>((</span><span class='Keyword'>unsigned char</span><span class='Parentheses'>) </span><span class='Operator'>*</span><a href="formatting.c.html#LN1730"><span class='Ref_To_Local'>p</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1656"><span class='Ref_To_Local'>mylocale</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/pg_locale.h.html#LN84"><span class='Ref_to_Member'>info</span></a><span class='Operator'>.</span>lt<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>else</span> 
<span class='Directive'>#endif</span> 
                        <span class='Operator'>*</span><a href="formatting.c.html#LN1730"><span class='Ref_To_Local'>p</span></a> <span class='Operator'>= </span><a href="../../../port/pgstrcasecmp.c.html#LN103"><span class='Ref_to_Func'>pg_toupper</span></a><span class='Parentheses'>((</span><span class='Keyword'>unsigned char</span><span class='Parentheses'>) </span><span class='Operator'>*</span><a href="formatting.c.html#LN1730"><span class='Ref_To_Local'>p</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
 
    <span class='Control'>return</span> <a href="formatting.c.html#LN1643"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end str_toupper &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * collation-aware, wide-character-aware initcap function 
 * 
 * We pass the number of bytes so we can pass varlena and char* 
 * to this function.  The result is a palloc'd, null-terminated string. 
 */ 
</span><span class='Keyword'>char </span><span class='Operator'>* 
</span><a name="LN1764"></a><span class='Declare_Function'>str_initcap</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>buff</span><span class='Delimiter'>, </span>size_t <span class='Declare_Parameter'>nbytes</span><span class='Delimiter'>, </span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>collid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1766"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span><a name="LN1767"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>wasalnum</span> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="formatting.c.html#LN1764"><span class='Ref_to_Parameter'>buff</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* C/POSIX collations use this path regardless of database encoding */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/pg_locale.h.html#LN51"><span class='Ref_to_Proto'>lc_ctype_is_c</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1764"><span class='Ref_to_Parameter'>collid</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="formatting.c.html#LN1766"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../include/utils/formatting.h.html#LN28"><span class='Ref_to_Proto'>asc_initcap</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1764"><span class='Ref_to_Parameter'>buff</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1764"><span class='Ref_to_Parameter'>nbytes</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span><span class='Directive'>#ifdef</span> <a href="../../../include/c.h.html#LN1113"><span class='Ref_to_Const'>USE_WIDE_UPPER_LOWER</span></a> 
    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span><a name="LN1780"></a>        <a href="../../../include/utils/pg_locale.h.html#LN87"><span class='Ref_to_Typedef'>pg_locale_t</span></a> <span class='Declare_Local'>mylocale</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN1764"><span class='Ref_to_Parameter'>collid</span></a> <span class='Operator'>!= </span><a href="../../../include/catalog/pg_collation.h.html#LN74"><span class='Ref_to_Const'>DEFAULT_COLLATION_OID</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1764"><span class='Ref_to_Parameter'>collid</span></a><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* 
                 * This typically means that the parser could not resolve a 
                 * conflict of implicit collations, so report it that way. 
                 */ 
</span>                <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INDETERMINATE_COLLATION<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"could not determine which collation to use for initcap() function"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../error/elog.c.html#LN985"><span class='Ref_to_Func'>errhint</span></a><span class='Parentheses'>(</span><span class='String'>"Use the COLLATE clause to set the collation explicitly."</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <a href="formatting.c.html#LN1780"><span class='Ref_To_Local'>mylocale</span></a> <span class='Operator'>= </span><a href="../../../include/utils/pg_locale.h.html#LN89"><span class='Ref_to_Proto'>pg_newlocale_from_collation</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1764"><span class='Ref_to_Parameter'>collid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
<span class='Directive'>#ifdef</span> USE_ICU 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN1780"><span class='Ref_To_Local'>mylocale</span></a> <span class='Operator'>&& </span><a href="formatting.c.html#LN1780"><span class='Ref_To_Local'>mylocale</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/pg_locale.h.html#LN70"><span class='Ref_to_Member'>provider</span></a> <span class='Operator'>== </span><a href="../../../include/catalog/pg_collation.h.html#LN84"><span class='Ref_to_Const'>COLLPROVIDER_ICU</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN1801"></a>            <a href="../../../port/crypt.c.html#LN107"><span class='Ref_to_Typedef'>int32_t</span></a>     <span class='Declare_Local'>len_uchar</span><span class='Delimiter'>, 
</span><a name="LN1802"></a>                        <span class='Declare_Local'>len_conv</span><span class='Delimiter'>; 
</span><a name="LN1803"></a>            UChar      <span class='Operator'>*</span><span class='Declare_Local'>buff_uchar</span><span class='Delimiter'>; 
</span><a name="LN1804"></a>            UChar      <span class='Operator'>*</span><span class='Declare_Local'>buff_conv</span><span class='Delimiter'>; 
</span> 
            <a href="formatting.c.html#LN1801"><span class='Ref_To_Local'>len_uchar</span></a> <span class='Operator'>= </span><a href="../../../include/utils/pg_locale.h.html#LN94"><span class='Ref_to_Proto'>icu_to_uchar</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN1803"><span class='Ref_To_Local'>buff_uchar</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1764"><span class='Ref_to_Parameter'>buff</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1764"><span class='Ref_to_Parameter'>nbytes</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="formatting.c.html#LN1802"><span class='Ref_To_Local'>len_conv</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN1456"><span class='Ref_to_Func'>icu_convert_case</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1483"><span class='Ref_to_Func'>u_strToTitle_default_BI</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1780"><span class='Ref_To_Local'>mylocale</span></a><span class='Delimiter'>, 
</span>                                        <span class='Operator'>&</span><a href="formatting.c.html#LN1804"><span class='Ref_To_Local'>buff_conv</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1803"><span class='Ref_To_Local'>buff_uchar</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1801"><span class='Ref_To_Local'>len_uchar</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../../include/utils/pg_locale.h.html#LN95"><span class='Ref_to_Proto'>icu_from_uchar</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN1766"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1804"><span class='Ref_To_Local'>buff_conv</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1802"><span class='Ref_To_Local'>len_conv</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
<span class='Directive'>#endif</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/mb/pg_wchar.h.html#LN535"><span class='Ref_to_Proto'>pg_database_encoding_max_length</span></a><span class='Parentheses'>() </span><span class='Operator'>&GT; </span><span class='Number'>1</span><span class='Parentheses'>)</span> 
            <span class='Delimiter'>{ 
</span><a name="LN1816"></a>                <span class='Keyword'>wchar_t</span>    <span class='Operator'>*</span><span class='Declare_Local'>workspace</span><span class='Delimiter'>; 
</span><a name="LN1817"></a>                size_t      <span class='Declare_Local'>curr_char</span><span class='Delimiter'>; 
</span><a name="LN1818"></a>                size_t      <span class='Declare_Local'>result_size</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* Overflow paranoia */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="formatting.c.html#LN1764"><span class='Ref_to_Parameter'>nbytes</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)</span> <span class='Operator'>&GT; </span><span class='Parentheses'>(</span>INT_MAX <span class='Operator'>/ </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>wchar_t</span><span class='Parentheses'>)))</span> 
                    <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                            <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_OUT_OF_MEMORY<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                             <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"out of memory"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* Output workspace cannot have more codes than input bytes */ 
</span>                <a href="formatting.c.html#LN1816"><span class='Ref_To_Local'>workspace</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>wchar_t </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>((</span><a href="formatting.c.html#LN1764"><span class='Ref_to_Parameter'>nbytes</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>) </span><span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>wchar_t</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
                <a href="../../../include/utils/pg_locale.h.html#LN102"><span class='Ref_to_Proto'>char2wchar</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1816"><span class='Ref_To_Local'>workspace</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1764"><span class='Ref_to_Parameter'>nbytes</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN1764"><span class='Ref_to_Parameter'>buff</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1764"><span class='Ref_to_Parameter'>nbytes</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1780"><span class='Ref_To_Local'>mylocale</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN1817"><span class='Ref_To_Local'>curr_char</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="formatting.c.html#LN1816"><span class='Ref_To_Local'>workspace</span></a><span class='Delimiter'>[</span><a href="formatting.c.html#LN1817"><span class='Ref_To_Local'>curr_char</span></a><span class='Delimiter'>] </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="formatting.c.html#LN1817"><span class='Ref_To_Local'>curr_char</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span><span class='Directive'>#ifdef</span> HAVE_LOCALE_T 
                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN1780"><span class='Ref_To_Local'>mylocale</span></a><span class='Parentheses'>) 
</span>                    <span class='Delimiter'>{ 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN1767"><span class='Ref_To_Local'>wasalnum</span></a><span class='Parentheses'>) 
</span>                            <a href="formatting.c.html#LN1816"><span class='Ref_To_Local'>workspace</span></a><span class='Delimiter'>[</span><a href="formatting.c.html#LN1817"><span class='Ref_To_Local'>curr_char</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="../../../include/port/win32.h.html#LN325"><span class='Ref_to_Const'>towlower_l</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1816"><span class='Ref_To_Local'>workspace</span></a><span class='Delimiter'>[</span><a href="formatting.c.html#LN1817"><span class='Ref_To_Local'>curr_char</span></a><span class='Delimiter'>], </span><a href="formatting.c.html#LN1780"><span class='Ref_To_Local'>mylocale</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/pg_locale.h.html#LN84"><span class='Ref_to_Member'>info</span></a><span class='Operator'>.</span>lt<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>else</span> 
                            <a href="formatting.c.html#LN1816"><span class='Ref_To_Local'>workspace</span></a><span class='Delimiter'>[</span><a href="formatting.c.html#LN1817"><span class='Ref_To_Local'>curr_char</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="../../../include/port/win32.h.html#LN326"><span class='Ref_to_Const'>towupper_l</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1816"><span class='Ref_To_Local'>workspace</span></a><span class='Delimiter'>[</span><a href="formatting.c.html#LN1817"><span class='Ref_To_Local'>curr_char</span></a><span class='Delimiter'>], </span><a href="formatting.c.html#LN1780"><span class='Ref_To_Local'>mylocale</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/pg_locale.h.html#LN84"><span class='Ref_to_Member'>info</span></a><span class='Operator'>.</span>lt<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <a href="formatting.c.html#LN1767"><span class='Ref_To_Local'>wasalnum</span></a> <span class='Operator'>= </span><a href="../../../include/port/win32.h.html#LN332"><span class='Ref_to_Const'>iswalnum_l</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1816"><span class='Ref_To_Local'>workspace</span></a><span class='Delimiter'>[</span><a href="formatting.c.html#LN1817"><span class='Ref_To_Local'>curr_char</span></a><span class='Delimiter'>], </span><a href="formatting.c.html#LN1780"><span class='Ref_To_Local'>mylocale</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/pg_locale.h.html#LN84"><span class='Ref_to_Member'>info</span></a><span class='Operator'>.</span>lt<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                    <span class='Control'>else</span> 
<span class='Directive'>#endif</span> 
                    <span class='Delimiter'>{ 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN1767"><span class='Ref_To_Local'>wasalnum</span></a><span class='Parentheses'>) 
</span>                            <a href="formatting.c.html#LN1816"><span class='Ref_To_Local'>workspace</span></a><span class='Delimiter'>[</span><a href="formatting.c.html#LN1817"><span class='Ref_To_Local'>curr_char</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span>towlower<span class='Parentheses'>(</span><a href="formatting.c.html#LN1816"><span class='Ref_To_Local'>workspace</span></a><span class='Delimiter'>[</span><a href="formatting.c.html#LN1817"><span class='Ref_To_Local'>curr_char</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>else</span> 
                            <a href="formatting.c.html#LN1816"><span class='Ref_To_Local'>workspace</span></a><span class='Delimiter'>[</span><a href="formatting.c.html#LN1817"><span class='Ref_To_Local'>curr_char</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span>towupper<span class='Parentheses'>(</span><a href="formatting.c.html#LN1816"><span class='Ref_To_Local'>workspace</span></a><span class='Delimiter'>[</span><a href="formatting.c.html#LN1817"><span class='Ref_To_Local'>curr_char</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <a href="formatting.c.html#LN1767"><span class='Ref_To_Local'>wasalnum</span></a> <span class='Operator'>= </span>iswalnum<span class='Parentheses'>(</span><a href="formatting.c.html#LN1816"><span class='Ref_To_Local'>workspace</span></a><span class='Delimiter'>[</span><a href="formatting.c.html#LN1817"><span class='Ref_To_Local'>curr_char</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for curr_char=0;workspace... &raquo; </span> 
 
                <span class='Comment_Multi_Line'>/* 
                 * Make result large enough; case change might change number 
                 * of bytes 
                 */ 
</span>                <a href="formatting.c.html#LN1818"><span class='Ref_To_Local'>result_size</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN1817"><span class='Ref_To_Local'>curr_char</span></a> <span class='Operator'>* </span><a href="../../../include/mb/pg_wchar.h.html#LN535"><span class='Ref_to_Proto'>pg_database_encoding_max_length</span></a><span class='Parentheses'>() </span><span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN1766"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1818"><span class='Ref_To_Local'>result_size</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <a href="../../../include/utils/pg_locale.h.html#LN100"><span class='Ref_to_Proto'>wchar2char</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1766"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1816"><span class='Ref_To_Local'>workspace</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1818"><span class='Ref_To_Local'>result_size</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1780"><span class='Ref_To_Local'>mylocale</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1816"><span class='Ref_To_Local'>workspace</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if pg_database_encoding_... &raquo; </span> 
<span class='Directive'>#endif</span>   <span class='Comment_Single_Line'>/* USE_WIDE_UPPER_LOWER */ 
</span>            <span class='Control'>else</span> 
            <span class='Delimiter'>{ 
</span><a name="LN1866"></a>                <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>p</span><span class='Delimiter'>; 
</span> 
                <a href="formatting.c.html#LN1766"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../include/utils/palloc.h.html#LN127"><span class='Ref_to_Proto'>pnstrdup</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1764"><span class='Ref_to_Parameter'>buff</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1764"><span class='Ref_to_Parameter'>nbytes</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * Note: we assume that toupper_l()/tolower_l() will not be so 
                 * broken as to need guard tests.  When using the default 
                 * collation, we apply the traditional Postgres behavior that 
                 * forces ASCII-style treatment of I/i, but in non-default 
                 * collations you get exactly what the collation says. 
                 */ 
</span>                <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN1866"><span class='Ref_To_Local'>p</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN1766"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; </span><span class='Operator'>*</span><a href="formatting.c.html#LN1866"><span class='Ref_To_Local'>p</span></a><span class='Delimiter'>; </span><a href="formatting.c.html#LN1866"><span class='Ref_To_Local'>p</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span><span class='Directive'>#ifdef</span> HAVE_LOCALE_T 
                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN1780"><span class='Ref_To_Local'>mylocale</span></a><span class='Parentheses'>) 
</span>                    <span class='Delimiter'>{ 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN1767"><span class='Ref_To_Local'>wasalnum</span></a><span class='Parentheses'>) 
</span>                            <span class='Operator'>*</span><a href="formatting.c.html#LN1866"><span class='Ref_To_Local'>p</span></a> <span class='Operator'>= </span><a href="../../../include/port/win32.h.html#LN323"><span class='Ref_to_Const'>tolower_l</span></a><span class='Parentheses'>((</span><span class='Keyword'>unsigned char</span><span class='Parentheses'>) </span><span class='Operator'>*</span><a href="formatting.c.html#LN1866"><span class='Ref_To_Local'>p</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1780"><span class='Ref_To_Local'>mylocale</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/pg_locale.h.html#LN84"><span class='Ref_to_Member'>info</span></a><span class='Operator'>.</span>lt<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>else</span> 
                            <span class='Operator'>*</span><a href="formatting.c.html#LN1866"><span class='Ref_To_Local'>p</span></a> <span class='Operator'>= </span><a href="../../../include/port/win32.h.html#LN324"><span class='Ref_to_Const'>toupper_l</span></a><span class='Parentheses'>((</span><span class='Keyword'>unsigned char</span><span class='Parentheses'>) </span><span class='Operator'>*</span><a href="formatting.c.html#LN1866"><span class='Ref_To_Local'>p</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1780"><span class='Ref_To_Local'>mylocale</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/pg_locale.h.html#LN84"><span class='Ref_to_Member'>info</span></a><span class='Operator'>.</span>lt<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <a href="formatting.c.html#LN1767"><span class='Ref_To_Local'>wasalnum</span></a> <span class='Operator'>= </span><a href="../../../include/port/win32.h.html#LN331"><span class='Ref_to_Const'>isalnum_l</span></a><span class='Parentheses'>((</span><span class='Keyword'>unsigned char</span><span class='Parentheses'>) </span><span class='Operator'>*</span><a href="formatting.c.html#LN1866"><span class='Ref_To_Local'>p</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1780"><span class='Ref_To_Local'>mylocale</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/pg_locale.h.html#LN84"><span class='Ref_to_Member'>info</span></a><span class='Operator'>.</span>lt<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                    <span class='Control'>else</span> 
<span class='Directive'>#endif</span> 
                    <span class='Delimiter'>{ 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN1767"><span class='Ref_To_Local'>wasalnum</span></a><span class='Parentheses'>) 
</span>                            <span class='Operator'>*</span><a href="formatting.c.html#LN1866"><span class='Ref_To_Local'>p</span></a> <span class='Operator'>= </span><a href="../../../port/pgstrcasecmp.c.html#LN120"><span class='Ref_to_Func'>pg_tolower</span></a><span class='Parentheses'>((</span><span class='Keyword'>unsigned char</span><span class='Parentheses'>) </span><span class='Operator'>*</span><a href="formatting.c.html#LN1866"><span class='Ref_To_Local'>p</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>else</span> 
                            <span class='Operator'>*</span><a href="formatting.c.html#LN1866"><span class='Ref_To_Local'>p</span></a> <span class='Operator'>= </span><a href="../../../port/pgstrcasecmp.c.html#LN103"><span class='Ref_to_Func'>pg_toupper</span></a><span class='Parentheses'>((</span><span class='Keyword'>unsigned char</span><span class='Parentheses'>) </span><span class='Operator'>*</span><a href="formatting.c.html#LN1866"><span class='Ref_To_Local'>p</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <a href="formatting.c.html#LN1767"><span class='Ref_To_Local'>wasalnum</span></a> <span class='Operator'>= </span>isalnum<span class='Parentheses'>((</span><span class='Keyword'>unsigned char</span><span class='Parentheses'>) </span><span class='Operator'>*</span><a href="formatting.c.html#LN1866"><span class='Ref_To_Local'>p</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for p=result;*p;p++ &raquo; </span> 
            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
 
    <span class='Control'>return</span> <a href="formatting.c.html#LN1766"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end str_initcap &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * ASCII-only lower function 
 * 
 * We pass the number of bytes so we can pass varlena and char* 
 * to this function.  The result is a palloc'd, null-terminated string. 
 */ 
</span><span class='Keyword'>char </span><span class='Operator'>* 
</span><a name="LN1912"></a><span class='Declare_Function'>asc_tolower</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>buff</span><span class='Delimiter'>, </span>size_t <span class='Declare_Parameter'>nbytes</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1914"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span><a name="LN1915"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>p</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="formatting.c.html#LN1912"><span class='Ref_to_Parameter'>buff</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <a href="formatting.c.html#LN1914"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../include/utils/palloc.h.html#LN127"><span class='Ref_to_Proto'>pnstrdup</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1912"><span class='Ref_to_Parameter'>buff</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1912"><span class='Ref_to_Parameter'>nbytes</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN1915"><span class='Ref_To_Local'>p</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN1914"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; </span><span class='Operator'>*</span><a href="formatting.c.html#LN1915"><span class='Ref_To_Local'>p</span></a><span class='Delimiter'>; </span><a href="formatting.c.html#LN1915"><span class='Ref_To_Local'>p</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <span class='Operator'>*</span><a href="formatting.c.html#LN1915"><span class='Ref_To_Local'>p</span></a> <span class='Operator'>= </span><a href="../../../include/port.h.html#LN127"><span class='Ref_to_Proto'>pg_ascii_tolower</span></a><span class='Parentheses'>((</span><span class='Keyword'>unsigned char</span><span class='Parentheses'>) </span><span class='Operator'>*</span><a href="formatting.c.html#LN1915"><span class='Ref_To_Local'>p</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="formatting.c.html#LN1914"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * ASCII-only upper function 
 * 
 * We pass the number of bytes so we can pass varlena and char* 
 * to this function.  The result is a palloc'd, null-terminated string. 
 */ 
</span><span class='Keyword'>char </span><span class='Operator'>* 
</span><a name="LN1935"></a><span class='Declare_Function'>asc_toupper</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>buff</span><span class='Delimiter'>, </span>size_t <span class='Declare_Parameter'>nbytes</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1937"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span><a name="LN1938"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>p</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="formatting.c.html#LN1935"><span class='Ref_to_Parameter'>buff</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <a href="formatting.c.html#LN1937"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../include/utils/palloc.h.html#LN127"><span class='Ref_to_Proto'>pnstrdup</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1935"><span class='Ref_to_Parameter'>buff</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1935"><span class='Ref_to_Parameter'>nbytes</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN1938"><span class='Ref_To_Local'>p</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN1937"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; </span><span class='Operator'>*</span><a href="formatting.c.html#LN1938"><span class='Ref_To_Local'>p</span></a><span class='Delimiter'>; </span><a href="formatting.c.html#LN1938"><span class='Ref_To_Local'>p</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <span class='Operator'>*</span><a href="formatting.c.html#LN1938"><span class='Ref_To_Local'>p</span></a> <span class='Operator'>= </span><a href="../../../include/port.h.html#LN126"><span class='Ref_to_Proto'>pg_ascii_toupper</span></a><span class='Parentheses'>((</span><span class='Keyword'>unsigned char</span><span class='Parentheses'>) </span><span class='Operator'>*</span><a href="formatting.c.html#LN1938"><span class='Ref_To_Local'>p</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="formatting.c.html#LN1937"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * ASCII-only initcap function 
 * 
 * We pass the number of bytes so we can pass varlena and char* 
 * to this function.  The result is a palloc'd, null-terminated string. 
 */ 
</span><span class='Keyword'>char </span><span class='Operator'>* 
</span><a name="LN1958"></a><span class='Declare_Function'>asc_initcap</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>buff</span><span class='Delimiter'>, </span>size_t <span class='Declare_Parameter'>nbytes</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1960"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span><a name="LN1961"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>p</span><span class='Delimiter'>; 
</span><a name="LN1962"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>wasalnum</span> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="formatting.c.html#LN1958"><span class='Ref_to_Parameter'>buff</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <a href="formatting.c.html#LN1960"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../include/utils/palloc.h.html#LN127"><span class='Ref_to_Proto'>pnstrdup</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1958"><span class='Ref_to_Parameter'>buff</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN1958"><span class='Ref_to_Parameter'>nbytes</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN1961"><span class='Ref_To_Local'>p</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN1960"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; </span><span class='Operator'>*</span><a href="formatting.c.html#LN1961"><span class='Ref_To_Local'>p</span></a><span class='Delimiter'>; </span><a href="formatting.c.html#LN1961"><span class='Ref_To_Local'>p</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN1971"></a>        <span class='Keyword'>char</span>        <span class='Declare_Local'>c</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN1962"><span class='Ref_To_Local'>wasalnum</span></a><span class='Parentheses'>) 
</span>            <span class='Operator'>*</span><a href="formatting.c.html#LN1961"><span class='Ref_To_Local'>p</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN1971"><span class='Ref_To_Local'>c</span></a> <span class='Operator'>= </span><a href="../../../include/port.h.html#LN127"><span class='Ref_to_Proto'>pg_ascii_tolower</span></a><span class='Parentheses'>((</span><span class='Keyword'>unsigned char</span><span class='Parentheses'>) </span><span class='Operator'>*</span><a href="formatting.c.html#LN1961"><span class='Ref_To_Local'>p</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <span class='Operator'>*</span><a href="formatting.c.html#LN1961"><span class='Ref_To_Local'>p</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN1971"><span class='Ref_To_Local'>c</span></a> <span class='Operator'>= </span><a href="../../../include/port.h.html#LN126"><span class='Ref_to_Proto'>pg_ascii_toupper</span></a><span class='Parentheses'>((</span><span class='Keyword'>unsigned char</span><span class='Parentheses'>) </span><span class='Operator'>*</span><a href="formatting.c.html#LN1961"><span class='Ref_To_Local'>p</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* we don't trust isalnum() here */ 
</span>        <a href="formatting.c.html#LN1962"><span class='Ref_To_Local'>wasalnum</span></a> <span class='Operator'>= </span><span class='Parentheses'>((</span><a href="formatting.c.html#LN1971"><span class='Ref_To_Local'>c</span></a> <span class='Operator'>&GT;= </span><span class='String'>'A'</span> <span class='Operator'>&& </span><a href="formatting.c.html#LN1971"><span class='Ref_To_Local'>c</span></a> <span class='Operator'>&LT;= </span><span class='String'>'Z'</span><span class='Parentheses'>) </span><span class='Operator'>|| 
</span>                    <span class='Parentheses'>(</span><a href="formatting.c.html#LN1971"><span class='Ref_To_Local'>c</span></a> <span class='Operator'>&GT;= </span><span class='String'>'a'</span> <span class='Operator'>&& </span><a href="formatting.c.html#LN1971"><span class='Ref_To_Local'>c</span></a> <span class='Operator'>&LT;= </span><span class='String'>'z'</span><span class='Parentheses'>) </span><span class='Operator'>|| 
</span>                    <span class='Parentheses'>(</span><a href="formatting.c.html#LN1971"><span class='Ref_To_Local'>c</span></a> <span class='Operator'>&GT;= </span><span class='String'>'0'</span> <span class='Operator'>&& </span><a href="formatting.c.html#LN1971"><span class='Ref_To_Local'>c</span></a> <span class='Operator'>&LT;= </span><span class='String'>'9'</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>return</span> <a href="formatting.c.html#LN1960"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end asc_initcap &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* convenience routines for when the input is null-terminated */ 
</span> 
<span class='Keyword'>static char </span><span class='Operator'>* 
</span><a name="LN1989"></a><span class='Declare_Function'>str_tolower_z</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>buff</span><span class='Delimiter'>, </span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>collid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> <a href="../../../include/utils/formatting.h.html#LN22"><span class='Ref_to_Proto'>str_tolower</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1989"><span class='Ref_to_Parameter'>buff</span></a><span class='Delimiter'>, </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN1989"><span class='Ref_to_Parameter'>buff</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN1989"><span class='Ref_to_Parameter'>collid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>static char </span><span class='Operator'>* 
</span><a name="LN1995"></a><span class='Declare_Function'>str_toupper_z</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>buff</span><span class='Delimiter'>, </span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>collid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> <a href="../../../include/utils/formatting.h.html#LN23"><span class='Ref_to_Proto'>str_toupper</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN1995"><span class='Ref_to_Parameter'>buff</span></a><span class='Delimiter'>, </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN1995"><span class='Ref_to_Parameter'>buff</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN1995"><span class='Ref_to_Parameter'>collid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>static char </span><span class='Operator'>* 
</span><a name="LN2001"></a><span class='Declare_Function'>str_initcap_z</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>buff</span><span class='Delimiter'>, </span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>collid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> <a href="../../../include/utils/formatting.h.html#LN24"><span class='Ref_to_Proto'>str_initcap</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2001"><span class='Ref_to_Parameter'>buff</span></a><span class='Delimiter'>, </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2001"><span class='Ref_to_Parameter'>buff</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN2001"><span class='Ref_to_Parameter'>collid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>static char </span><span class='Operator'>* 
</span><a name="LN2007"></a><span class='Declare_Function'>asc_tolower_z</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>buff</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> <a href="../../../include/utils/formatting.h.html#LN26"><span class='Ref_to_Proto'>asc_tolower</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2007"><span class='Ref_to_Parameter'>buff</span></a><span class='Delimiter'>, </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2007"><span class='Ref_to_Parameter'>buff</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>static char </span><span class='Operator'>* 
</span><a name="LN2013"></a><span class='Declare_Function'>asc_toupper_z</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>buff</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> <a href="../../../include/utils/formatting.h.html#LN27"><span class='Ref_to_Proto'>asc_toupper</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2013"><span class='Ref_to_Parameter'>buff</span></a><span class='Delimiter'>, </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2013"><span class='Ref_to_Parameter'>buff</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* asc_initcap_z is not currently needed */ 
</span> 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * Skip TM / th in FROM_CHAR 
 * 
 * If S_THth is on, skip two chars, assuming there are two available 
 * ---------- 
 */ 
</span><a name="LN2027"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>SKIP_THth</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>ptr</span><span class='Delimiter'>, </span><span class='Declare_Parameter'>_suf</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>    <span class='Control'>do</span> <span class='Delimiter'>{ </span><span class='Operator'>\ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN514"><span class='Ref_to_Macro'>S_THth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2027"><span class='Ref_to_Parameter'>_suf</span></a><span class='Parentheses'>))</span> <span class='Operator'>\ 
</span>        <span class='Delimiter'>{ </span><span class='Operator'>\ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><span class='Parentheses'>(</span><a href="formatting.c.html#LN2027"><span class='Ref_to_Parameter'>ptr</span></a><span class='Parentheses'>))</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN2027"><span class='Ref_to_Parameter'>ptr</span></a><span class='Parentheses'>)</span><span class='Operator'>++</span><span class='Delimiter'>; </span><span class='Operator'>\ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><span class='Parentheses'>(</span><a href="formatting.c.html#LN2027"><span class='Ref_to_Parameter'>ptr</span></a><span class='Parentheses'>))</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN2027"><span class='Ref_to_Parameter'>ptr</span></a><span class='Parentheses'>)</span><span class='Operator'>++</span><span class='Delimiter'>; </span><span class='Operator'>\ 
</span>        <span class='Delimiter'>} </span><span class='Operator'>\ 
</span>    <span class='Delimiter'>} </span><span class='Control'>while</span> <span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>) 
</span> 
 
<span class='Directive'>#ifdef</span> DEBUG_TO_FROM_CHAR 
<span class='Comment_Multi_Line'>/* ----------- 
 * DEBUG: Call for debug and for index checking; (Show ASCII char 
 * and defined keyword for each used position 
 * ---------- 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN2044"></a><span class='Declare_Function'>dump_index</span><span class='Parentheses'>(</span><span class='Keyword'>const </span><a href="formatting.c.html#LN155"><span class='Ref_to_Typedef'>KeyWord</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>k</span><span class='Delimiter'>, </span><span class='Keyword'>const int </span><span class='Operator'>*</span><span class='Declare_Parameter'>index</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2046"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>, 
</span><a name="LN2047"></a>                <span class='Declare_Local'>count</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>, 
</span><a name="LN2048"></a>                <span class='Declare_Local'>free_i</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN62"><span class='Ref_to_Const'>DEBUG_elog_output</span></a><span class='Delimiter'>, </span><span class='String'>"TO-FROM_CHAR: Dump KeyWord Index:"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN2046"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="formatting.c.html#LN2046"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="formatting.c.html#LN109"><span class='Ref_to_Const'>KeyWord_INDEX_SIZE</span></a><span class='Delimiter'>; </span><a href="formatting.c.html#LN2046"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN2044"><span class='Ref_to_Parameter'>index</span></a><span class='Delimiter'>[</span><a href="formatting.c.html#LN2046"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>!= -</span><span class='Number'>1</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN62"><span class='Ref_to_Const'>DEBUG_elog_output</span></a><span class='Delimiter'>, </span><span class='String'>"\t%c: %s, "</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN2046"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>+ </span><span class='Number'>32</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN2044"><span class='Ref_to_Parameter'>k</span></a><span class='Delimiter'>[</span><a href="formatting.c.html#LN2044"><span class='Ref_to_Parameter'>index</span></a><span class='Delimiter'>[</span><a href="formatting.c.html#LN2046"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]]</span><span class='Operator'>.</span><a href="formatting.c.html#LN157"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="formatting.c.html#LN2047"><span class='Ref_To_Local'>count</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <a href="formatting.c.html#LN2048"><span class='Ref_To_Local'>free_i</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>            <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN62"><span class='Ref_to_Const'>DEBUG_elog_output</span></a><span class='Delimiter'>, </span><span class='String'>"\t(%d) %c %d"</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN2046"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2046"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>+ </span><span class='Number'>32</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN2044"><span class='Ref_to_Parameter'>index</span></a><span class='Delimiter'>[</span><a href="formatting.c.html#LN2046"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span>    <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN62"><span class='Ref_to_Const'>DEBUG_elog_output</span></a><span class='Delimiter'>, </span><span class='String'>"\n\t\tUsed positions: %d,\n\t\tFree positions: %d"</span><span class='Delimiter'>, 
</span>         <a href="formatting.c.html#LN2047"><span class='Ref_To_Local'>count</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2048"><span class='Ref_To_Local'>free_i</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dump_index &raquo; </span> 
<span class='Directive'>#endif</span>   <span class='Comment_Single_Line'>/* DEBUG */ 
</span> 
<span class='Comment_Multi_Line'>/* ---------- 
 * Return TRUE if next format picture is not digit value 
 * ---------- 
 */ 
</span><span class='Keyword'>static bool 
</span><a name="LN2075"></a><span class='Declare_Function'>is_next_separator</span><span class='Parentheses'>(</span><a href="formatting.c.html#LN164"><span class='Ref_to_Struct'>FormatNode</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>n</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN2075"><span class='Ref_to_Parameter'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN166"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>== </span><a href="formatting.c.html#LN172"><span class='Ref_to_Const'>NODE_TYPE_END</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Boolean'>FALSE</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN2075"><span class='Ref_to_Parameter'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN166"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>== </span><a href="formatting.c.html#LN173"><span class='Ref_to_Const'>NODE_TYPE_ACTION</span></a> <span class='Operator'>&& </span><a href="formatting.c.html#LN514"><span class='Ref_to_Macro'>S_THth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2075"><span class='Ref_to_Parameter'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>))</span> 
        <span class='Control'>return</span> <span class='Boolean'>TRUE</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Next node 
     */ 
</span>    <a href="formatting.c.html#LN2075"><span class='Ref_to_Parameter'>n</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* end of format string is treated like a non-digit separator */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN2075"><span class='Ref_to_Parameter'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN166"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>== </span><a href="formatting.c.html#LN172"><span class='Ref_to_Const'>NODE_TYPE_END</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Boolean'>TRUE</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN2075"><span class='Ref_to_Parameter'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN166"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>== </span><a href="formatting.c.html#LN173"><span class='Ref_to_Const'>NODE_TYPE_ACTION</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN2075"><span class='Ref_to_Parameter'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN167"><span class='Ref_to_Member'>key</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN160"><span class='Ref_to_Member'>is_digit</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>return</span> <span class='Boolean'>FALSE</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>return</span> <span class='Boolean'>TRUE</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span>isdigit<span class='Parentheses'>((</span><span class='Keyword'>unsigned char</span><span class='Parentheses'>) </span><a href="formatting.c.html#LN2075"><span class='Ref_to_Parameter'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN168"><span class='Ref_to_Member'>character</span></a><span class='Parentheses'>))</span> 
        <span class='Control'>return</span> <span class='Boolean'>FALSE</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <span class='Boolean'>TRUE</span><span class='Delimiter'>;</span>                <span class='Comment_Single_Line'>/* some non-digit input (separator) */ 
</span><span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end is_next_separator &raquo; </span> 
 
 
<span class='Keyword'>static int 
</span><a name="LN2107"></a><span class='Declare_Function'>adjust_partial_year_to_2020</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>year</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Comment_Multi_Line'>/* 
     * Adjust all dates toward 2020; this is effectively what happens when we 
     * assume '70' is 1970 and '69' is 2069. 
     */ 
</span>    <span class='Comment_Multi_Line'>/* Force 0-69 into the 2000's */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN2107"><span class='Ref_to_Parameter'>year</span></a> <span class='Operator'>&LT; </span><span class='Number'>70</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <a href="formatting.c.html#LN2107"><span class='Ref_to_Parameter'>year</span></a> <span class='Operator'>+ </span><span class='Number'>2000</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* Force 70-99 into the 1900's */ 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN2107"><span class='Ref_to_Parameter'>year</span></a> <span class='Operator'>&LT; </span><span class='Number'>100</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <a href="formatting.c.html#LN2107"><span class='Ref_to_Parameter'>year</span></a> <span class='Operator'>+ </span><span class='Number'>1900</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* Force 100-519 into the 2000's */ 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN2107"><span class='Ref_to_Parameter'>year</span></a> <span class='Operator'>&LT; </span><span class='Number'>520</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <a href="formatting.c.html#LN2107"><span class='Ref_to_Parameter'>year</span></a> <span class='Operator'>+ </span><span class='Number'>2000</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* Force 520-999 into the 1000's */ 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN2107"><span class='Ref_to_Parameter'>year</span></a> <span class='Operator'>&LT; </span><span class='Number'>1000</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <a href="formatting.c.html#LN2107"><span class='Ref_to_Parameter'>year</span></a> <span class='Operator'>+ </span><span class='Number'>1000</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <span class='Control'>return</span> <a href="formatting.c.html#LN2107"><span class='Ref_to_Parameter'>year</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end adjust_partial_year_to_2020 &raquo; </span> 
 
 
<span class='Keyword'>static int 
</span><a name="LN2131"></a><span class='Declare_Function'>strspace_len</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>str</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2133"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>len</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>while</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="formatting.c.html#LN2131"><span class='Ref_to_Parameter'>str</span></a> <span class='Operator'>&& </span>isspace<span class='Parentheses'>((</span><span class='Keyword'>unsigned char</span><span class='Parentheses'>) </span><span class='Operator'>*</span><a href="formatting.c.html#LN2131"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="formatting.c.html#LN2131"><span class='Ref_to_Parameter'>str</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <a href="formatting.c.html#LN2133"><span class='Ref_To_Local'>len</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>return</span> <a href="formatting.c.html#LN2133"><span class='Ref_To_Local'>len</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Set the date mode of a from-char conversion. 
 * 
 * Puke if the date mode has already been set, and the caller attempts to set 
 * it to a conflicting mode. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN2150"></a><span class='Declare_Function'>from_char_set_mode</span><span class='Parentheses'>(</span><a href="formatting.c.html#LN407"><span class='Ref_to_Typedef'>TmFromChar</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tmfc</span><span class='Delimiter'>, </span><span class='Keyword'>const </span><a href="formatting.c.html#LN146"><span class='Ref_to_Typedef'>FromCharDateMode</span></a> <span class='Declare_Parameter'>mode</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN2150"><span class='Ref_to_Parameter'>mode</span></a> <span class='Operator'>!= </span><a href="formatting.c.html#LN148"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_NONE</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN2150"><span class='Ref_to_Parameter'>tmfc</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN409"><span class='Ref_to_Member'>mode</span></a> <span class='Operator'>== </span><a href="formatting.c.html#LN148"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_NONE</span></a><span class='Parentheses'>) 
</span>            <a href="formatting.c.html#LN2150"><span class='Ref_to_Parameter'>tmfc</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN409"><span class='Ref_to_Member'>mode</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN2150"><span class='Ref_to_Parameter'>mode</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN2150"><span class='Ref_to_Parameter'>tmfc</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN409"><span class='Ref_to_Member'>mode</span></a> <span class='Operator'>!= </span><a href="formatting.c.html#LN2150"><span class='Ref_to_Parameter'>mode</span></a><span class='Parentheses'>) 
</span>            <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INVALID_DATETIME_FORMAT<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"invalid combination of date conventions"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../error/elog.c.html#LN985"><span class='Ref_to_Func'>errhint</span></a><span class='Parentheses'>(</span><span class='String'>"Do not mix Gregorian and ISO week date "</span> 
                             <span class='String'>"conventions in a formatting template."</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Set the integer pointed to by 'dest' to the given value. 
 * 
 * Puke if the destination integer has previously been set to some other 
 * non-zero value. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN2172"></a><span class='Declare_Function'>from_char_set_int</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>dest</span><span class='Delimiter'>, </span><span class='Keyword'>const int </span><span class='Declare_Parameter'>value</span><span class='Delimiter'>, </span><span class='Keyword'>const </span><a href="formatting.c.html#LN164"><span class='Ref_to_Struct'>FormatNode</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="formatting.c.html#LN2172"><span class='Ref_to_Parameter'>dest</span></a> <span class='Operator'>!= </span><span class='Number'>0</span> <span class='Operator'>&& *</span><a href="formatting.c.html#LN2172"><span class='Ref_to_Parameter'>dest</span></a> <span class='Operator'>!= </span><span class='Keyword'>value</span><span class='Parentheses'>) 
</span>        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INVALID_DATETIME_FORMAT<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>           <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"conflicting values for \"%s\" field in formatting string"</span><span class='Delimiter'>, 
</span>                  <a href="formatting.c.html#LN2172"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN167"><span class='Ref_to_Member'>key</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN157"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN871"><span class='Ref_to_Func'>errdetail</span></a><span class='Parentheses'>(</span><span class='String'>"This value contradicts a previous setting for "</span> 
                           <span class='String'>"the same field type."</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="formatting.c.html#LN2172"><span class='Ref_to_Parameter'>dest</span></a> <span class='Operator'>= </span><span class='Keyword'>value</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Read a single integer from the source string, into the int pointed to by 
 * 'dest'. If 'dest' is NULL, the result is discarded. 
 * 
 * In fixed-width mode (the node does not have the FM suffix), consume at most 
 * 'len' characters.  However, any leading whitespace isn't counted in 'len'. 
 * 
 * We use strtol() to recover the integer value from the source string, in 
 * accordance with the given FormatNode. 
 * 
 * If the conversion completes successfully, src will have been advanced to 
 * point at the character immediately following the last character used in the 
 * conversion. 
 * 
 * Return the number of characters consumed. 
 * 
 * Note that from_char_parse_int() provides a more convenient wrapper where 
 * the length of the field is the same as the length of the format keyword (as 
 * with DD and MI). 
 */ 
</span><span class='Keyword'>static int 
</span><a name="LN2205"></a><span class='Declare_Function'>from_char_parse_int_len</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>dest</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>**</span><span class='Declare_Parameter'>src</span><span class='Delimiter'>, </span><span class='Keyword'>const int </span><span class='Declare_Parameter'>len</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN164"><span class='Ref_to_Struct'>FormatNode</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2207"></a>    <span class='Keyword'>long</span>        <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span><a name="LN2208"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>copy</span><span class='Delimiter'>[</span><a href="formatting.c.html#LN116"><span class='Ref_to_Const'>DCH_MAX_ITEM_SIZ</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>]; 
</span><a name="LN2209"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>init</span> <span class='Operator'>= *</span><a href="formatting.c.html#LN2205"><span class='Ref_to_Parameter'>src</span></a><span class='Delimiter'>; 
</span><a name="LN2210"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>used</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Skip any whitespace before parsing the integer. 
     */ 
</span>    <span class='Operator'>*</span><a href="formatting.c.html#LN2205"><span class='Ref_to_Parameter'>src</span></a> <span class='Operator'>+= </span><a href="formatting.c.html#LN973"><span class='Ref_to_Proto'>strspace_len</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="formatting.c.html#LN2205"><span class='Ref_to_Parameter'>src</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="formatting.c.html#LN2205"><span class='Ref_to_Parameter'>len</span></a> <span class='Operator'>&LT;= </span><a href="formatting.c.html#LN116"><span class='Ref_to_Const'>DCH_MAX_ITEM_SIZ</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="formatting.c.html#LN2210"><span class='Ref_To_Local'>used</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>) </span><a href="../../../port/strlcpy.c.html#LN43"><span class='Ref_to_Func'>strlcpy</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2208"><span class='Ref_To_Local'>copy</span></a><span class='Delimiter'>, </span><span class='Operator'>*</span><a href="formatting.c.html#LN2205"><span class='Ref_to_Parameter'>src</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2205"><span class='Ref_to_Parameter'>len</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN520"><span class='Ref_to_Macro'>S_FM</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2205"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>) </span><span class='Operator'>|| </span><a href="formatting.c.html#LN2074"><span class='Ref_to_Func'>is_next_separator</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2205"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * This node is in Fill Mode, or the next node is known to be a 
         * non-digit value, so we just slurp as many characters as we can get. 
         */ 
</span>        errno <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <a href="formatting.c.html#LN2207"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span>strtol<span class='Parentheses'>(</span><a href="formatting.c.html#LN2209"><span class='Ref_To_Local'>init</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2205"><span class='Ref_to_Parameter'>src</span></a><span class='Delimiter'>, </span><span class='Number'>10</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * We need to pull exactly the number of characters given in 'len' out 
         * of the string, and convert those. 
         */ 
</span><a name="LN2235"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>last</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN2210"><span class='Ref_To_Local'>used</span></a> <span class='Operator'>&LT; </span><a href="formatting.c.html#LN2205"><span class='Ref_to_Parameter'>len</span></a><span class='Parentheses'>) 
</span>            <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INVALID_DATETIME_FORMAT<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"source string too short for \"%s\" formatting field"</span><span class='Delimiter'>, 
</span>                       <a href="formatting.c.html#LN2205"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN167"><span class='Ref_to_Member'>key</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN157"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../error/elog.c.html#LN871"><span class='Ref_to_Func'>errdetail</span></a><span class='Parentheses'>(</span><span class='String'>"Field requires %d characters, but only %d "</span> 
                               <span class='String'>"remain."</span><span class='Delimiter'>, 
</span>                               <a href="formatting.c.html#LN2205"><span class='Ref_to_Parameter'>len</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2210"><span class='Ref_To_Local'>used</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../error/elog.c.html#LN985"><span class='Ref_to_Func'>errhint</span></a><span class='Parentheses'>(</span><span class='String'>"If your source string is not fixed-width, try "</span> 
                             <span class='String'>"using the \"FM\" modifier."</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
        errno <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <a href="formatting.c.html#LN2207"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span>strtol<span class='Parentheses'>(</span><a href="formatting.c.html#LN2208"><span class='Ref_To_Local'>copy</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN2235"><span class='Ref_To_Local'>last</span></a><span class='Delimiter'>, </span><span class='Number'>10</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="formatting.c.html#LN2210"><span class='Ref_To_Local'>used</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN2235"><span class='Ref_To_Local'>last</span></a> <span class='Operator'>- </span><a href="formatting.c.html#LN2208"><span class='Ref_To_Local'>copy</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN2210"><span class='Ref_To_Local'>used</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="formatting.c.html#LN2210"><span class='Ref_To_Local'>used</span></a> <span class='Operator'>&LT; </span><a href="formatting.c.html#LN2205"><span class='Ref_to_Parameter'>len</span></a><span class='Parentheses'>) 
</span>            <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INVALID_DATETIME_FORMAT<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"invalid value \"%s\" for \"%s\""</span><span class='Delimiter'>, 
</span>                            <a href="formatting.c.html#LN2208"><span class='Ref_To_Local'>copy</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2205"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN167"><span class='Ref_to_Member'>key</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN157"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../error/elog.c.html#LN871"><span class='Ref_to_Func'>errdetail</span></a><span class='Parentheses'>(</span><span class='String'>"Field requires %d characters, but only %d "</span> 
                               <span class='String'>"could be parsed."</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN2205"><span class='Ref_to_Parameter'>len</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2210"><span class='Ref_To_Local'>used</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../error/elog.c.html#LN985"><span class='Ref_to_Func'>errhint</span></a><span class='Parentheses'>(</span><span class='String'>"If your source string is not fixed-width, try "</span> 
                             <span class='String'>"using the \"FM\" modifier."</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
        <span class='Operator'>*</span><a href="formatting.c.html#LN2205"><span class='Ref_to_Parameter'>src</span></a> <span class='Operator'>+= </span><a href="formatting.c.html#LN2210"><span class='Ref_To_Local'>used</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="formatting.c.html#LN2205"><span class='Ref_to_Parameter'>src</span></a> <span class='Operator'>== </span><a href="formatting.c.html#LN2209"><span class='Ref_To_Local'>init</span></a><span class='Parentheses'>) 
</span>        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INVALID_DATETIME_FORMAT<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"invalid value \"%s\" for \"%s\""</span><span class='Delimiter'>, 
</span>                        <a href="formatting.c.html#LN2208"><span class='Ref_To_Local'>copy</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2205"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN167"><span class='Ref_to_Member'>key</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN157"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN871"><span class='Ref_to_Func'>errdetail</span></a><span class='Parentheses'>(</span><span class='String'>"Value must be an integer."</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span>errno <span class='Operator'>== </span>ERANGE <span class='Operator'>|| </span><a href="formatting.c.html#LN2207"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>&LT; </span>INT_MIN <span class='Operator'>|| </span><a href="formatting.c.html#LN2207"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>&GT; </span>INT_MAX<span class='Parentheses'>) 
</span>        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_DATETIME_VALUE_OUT_OF_RANGE<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"value for \"%s\" in source string is out of range"</span><span class='Delimiter'>, 
</span>                        <a href="formatting.c.html#LN2205"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN167"><span class='Ref_to_Member'>key</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN157"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN871"><span class='Ref_to_Func'>errdetail</span></a><span class='Parentheses'>(</span><span class='String'>"Value must be in the range %d to %d."</span><span class='Delimiter'>, 
</span>                           INT_MIN<span class='Delimiter'>, </span>INT_MAX<span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN2205"><span class='Ref_to_Parameter'>dest</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="formatting.c.html#LN975"><span class='Ref_to_Proto'>from_char_set_int</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2205"><span class='Ref_to_Parameter'>dest</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>) </span><a href="formatting.c.html#LN2207"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2205"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <span class='Operator'>*</span><a href="formatting.c.html#LN2205"><span class='Ref_to_Parameter'>src</span></a> <span class='Operator'>- </span><a href="formatting.c.html#LN2209"><span class='Ref_To_Local'>init</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end from_char_parse_int_len &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Call from_char_parse_int_len(), using the length of the format keyword as 
 * the expected length of the field. 
 * 
 * Don't call this function if the field differs in length from the format 
 * keyword (as with HH24; the keyword length is 4, but the field length is 2). 
 * In such cases, call from_char_parse_int_len() instead to specify the 
 * required length explicitly. 
 */ 
</span><span class='Keyword'>static int 
</span><a name="LN2295"></a><span class='Declare_Function'>from_char_parse_int</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>dest</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>**</span><span class='Declare_Parameter'>src</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN164"><span class='Ref_to_Struct'>FormatNode</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> <a href="formatting.c.html#LN976"><span class='Ref_to_Proto'>from_char_parse_int_len</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2295"><span class='Ref_to_Parameter'>dest</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2295"><span class='Ref_to_Parameter'>src</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2295"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN167"><span class='Ref_to_Member'>key</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN158"><span class='Ref_to_Member'>len</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2295"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* ---------- 
 * Sequential search with to upper/lower conversion 
 * ---------- 
 */ 
</span><span class='Keyword'>static int 
</span><a name="LN2305"></a><span class='Declare_Function'>seq_search</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>name</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Keyword'>const </span><span class='Operator'>* </span><span class='Declare_Parameter'>array</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>type</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>max</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>len</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2307"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>p</span><span class='Delimiter'>; 
</span><a name="LN2308"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Keyword'>const </span><span class='Operator'>* </span><span class='Declare_Local'>a</span><span class='Delimiter'>; 
</span><a name="LN2309"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>n</span><span class='Delimiter'>; 
</span><a name="LN2310"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>last</span><span class='Delimiter'>, 
</span><a name="LN2311"></a>                <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <span class='Operator'>*</span><a href="formatting.c.html#LN2305"><span class='Ref_to_Parameter'>len</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!*</span><a href="formatting.c.html#LN2305"><span class='Ref_to_Parameter'>name</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* set first char */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN2305"><span class='Ref_to_Parameter'>type</span></a> <span class='Operator'>== </span><a href="formatting.c.html#LN286"><span class='Ref_to_Const'>ONE_UPPER</span></a> <span class='Operator'>|| </span><a href="formatting.c.html#LN2305"><span class='Ref_to_Parameter'>type</span></a> <span class='Operator'>== </span><a href="formatting.c.html#LN287"><span class='Ref_to_Const'>ALL_UPPER</span></a><span class='Parentheses'>) 
</span>        <span class='Operator'>*</span><a href="formatting.c.html#LN2305"><span class='Ref_to_Parameter'>name</span></a> <span class='Operator'>= </span><a href="../../../port/pgstrcasecmp.c.html#LN103"><span class='Ref_to_Func'>pg_toupper</span></a><span class='Parentheses'>((</span><span class='Keyword'>unsigned char</span><span class='Parentheses'>) </span><span class='Operator'>*</span><a href="formatting.c.html#LN2305"><span class='Ref_to_Parameter'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN2305"><span class='Ref_to_Parameter'>type</span></a> <span class='Operator'>== </span><a href="formatting.c.html#LN288"><span class='Ref_to_Const'>ALL_LOWER</span></a><span class='Parentheses'>) 
</span>        <span class='Operator'>*</span><a href="formatting.c.html#LN2305"><span class='Ref_to_Parameter'>name</span></a> <span class='Operator'>= </span><a href="../../../port/pgstrcasecmp.c.html#LN120"><span class='Ref_to_Func'>pg_tolower</span></a><span class='Parentheses'>((</span><span class='Keyword'>unsigned char</span><span class='Parentheses'>) </span><span class='Operator'>*</span><a href="formatting.c.html#LN2305"><span class='Ref_to_Parameter'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN2310"><span class='Ref_To_Local'>last</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN2308"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN2305"><span class='Ref_to_Parameter'>array</span></a><span class='Delimiter'>; </span><span class='Operator'>*</span><a href="formatting.c.html#LN2308"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; </span><a href="formatting.c.html#LN2308"><span class='Ref_To_Local'>a</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* compare first chars */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="formatting.c.html#LN2305"><span class='Ref_to_Parameter'>name</span></a> <span class='Operator'>!= **</span><a href="formatting.c.html#LN2308"><span class='Ref_To_Local'>a</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN2311"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN2307"><span class='Ref_To_Local'>p</span></a> <span class='Operator'>= *</span><a href="formatting.c.html#LN2308"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN2309"><span class='Ref_To_Local'>n</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN2305"><span class='Ref_to_Parameter'>name</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>;; </span><a href="formatting.c.html#LN2309"><span class='Ref_To_Local'>n</span></a><span class='Operator'>++</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN2307"><span class='Ref_To_Local'>p</span></a><span class='Operator'>++</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN2311"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* search fragment (max) only */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN2305"><span class='Ref_to_Parameter'>max</span></a> <span class='Operator'>&& </span><a href="formatting.c.html#LN2311"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>== </span><a href="formatting.c.html#LN2305"><span class='Ref_to_Parameter'>max</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Operator'>*</span><a href="formatting.c.html#LN2305"><span class='Ref_to_Parameter'>len</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN2311"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>return</span> <a href="formatting.c.html#LN2308"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>- </span><a href="formatting.c.html#LN2305"><span class='Ref_to_Parameter'>array</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Comment_Multi_Line'>/* full size */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="formatting.c.html#LN2307"><span class='Ref_To_Local'>p</span></a> <span class='Operator'>== </span><span class='String'>'\0'</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Operator'>*</span><a href="formatting.c.html#LN2305"><span class='Ref_to_Parameter'>len</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN2311"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>return</span> <a href="formatting.c.html#LN2308"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>- </span><a href="formatting.c.html#LN2305"><span class='Ref_to_Parameter'>array</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Comment_Multi_Line'>/* Not found in array 'a' */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="formatting.c.html#LN2309"><span class='Ref_To_Local'>n</span></a> <span class='Operator'>== </span><span class='String'>'\0'</span><span class='Parentheses'>) 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * Convert (but convert new chars only) 
             */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN2311"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&GT; </span><a href="formatting.c.html#LN2310"><span class='Ref_To_Local'>last</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN2305"><span class='Ref_to_Parameter'>type</span></a> <span class='Operator'>== </span><a href="formatting.c.html#LN286"><span class='Ref_to_Const'>ONE_UPPER</span></a> <span class='Operator'>|| </span><a href="formatting.c.html#LN2305"><span class='Ref_to_Parameter'>type</span></a> <span class='Operator'>== </span><a href="formatting.c.html#LN288"><span class='Ref_to_Const'>ALL_LOWER</span></a><span class='Parentheses'>) 
</span>                    <span class='Operator'>*</span><a href="formatting.c.html#LN2309"><span class='Ref_To_Local'>n</span></a> <span class='Operator'>= </span><a href="../../../port/pgstrcasecmp.c.html#LN120"><span class='Ref_to_Func'>pg_tolower</span></a><span class='Parentheses'>((</span><span class='Keyword'>unsigned char</span><span class='Parentheses'>) </span><span class='Operator'>*</span><a href="formatting.c.html#LN2309"><span class='Ref_To_Local'>n</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN2305"><span class='Ref_to_Parameter'>type</span></a> <span class='Operator'>== </span><a href="formatting.c.html#LN287"><span class='Ref_to_Const'>ALL_UPPER</span></a><span class='Parentheses'>) 
</span>                    <span class='Operator'>*</span><a href="formatting.c.html#LN2309"><span class='Ref_To_Local'>n</span></a> <span class='Operator'>= </span><a href="../../../port/pgstrcasecmp.c.html#LN103"><span class='Ref_to_Func'>pg_toupper</span></a><span class='Parentheses'>((</span><span class='Keyword'>unsigned char</span><span class='Parentheses'>) </span><span class='Operator'>*</span><a href="formatting.c.html#LN2309"><span class='Ref_To_Local'>n</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2310"><span class='Ref_To_Local'>last</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN2311"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
<span class='Directive'>#ifdef</span> DEBUG_TO_FROM_CHAR 
            <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN62"><span class='Ref_to_Const'>DEBUG_elog_output</span></a><span class='Delimiter'>, </span><span class='String'>"N: %c, P: %c, A: %s (%s)"</span><span class='Delimiter'>, 
</span>                 <span class='Operator'>*</span><a href="formatting.c.html#LN2309"><span class='Ref_To_Local'>n</span></a><span class='Delimiter'>, </span><span class='Operator'>*</span><a href="formatting.c.html#LN2307"><span class='Ref_To_Local'>p</span></a><span class='Delimiter'>, </span><span class='Operator'>*</span><a href="formatting.c.html#LN2308"><span class='Ref_To_Local'>a</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2305"><span class='Ref_to_Parameter'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="formatting.c.html#LN2309"><span class='Ref_To_Local'>n</span></a> <span class='Operator'>!= *</span><a href="formatting.c.html#LN2307"><span class='Ref_To_Local'>p</span></a><span class='Parentheses'>) 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=1,p=*a+1,n=name+1;;... &raquo; </span> 
    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for last=0,a=array;*a!=NU... &raquo; </span> 
 
    <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end seq_search &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Perform a sequential search in 'array' for text matching the first 'max' 
 * characters of the source string. 
 * 
 * If a match is found, copy the array index of the match into the integer 
 * pointed to by 'dest', advance 'src' to the end of the part of the string 
 * which matched, and return the number of characters consumed. 
 * 
 * If the string doesn't match, throw an error. 
 */ 
</span><span class='Keyword'>static int 
</span><a name="LN2383"></a><span class='Declare_Function'>from_char_seq_search</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>dest</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>**</span><span class='Declare_Parameter'>src</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Keyword'>const </span><span class='Operator'>* </span><span class='Declare_Parameter'>array</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>type</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>max</span><span class='Delimiter'>, 
</span><a name="LN2384"></a>                     <a href="formatting.c.html#LN164"><span class='Ref_to_Struct'>FormatNode</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2386"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>len</span><span class='Delimiter'>; 
</span> 
    <span class='Operator'>*</span><a href="formatting.c.html#LN2383"><span class='Ref_to_Parameter'>dest</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN978"><span class='Ref_to_Proto'>seq_search</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="formatting.c.html#LN2383"><span class='Ref_to_Parameter'>src</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2383"><span class='Ref_to_Parameter'>array</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2383"><span class='Ref_to_Parameter'>type</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2383"><span class='Ref_to_Parameter'>max</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN2386"><span class='Ref_To_Local'>len</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN2386"><span class='Ref_To_Local'>len</span></a> <span class='Operator'>&LT;= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN2391"></a>        <span class='Keyword'>char</span>        <span class='Declare_Local'>copy</span><span class='Delimiter'>[</span><a href="formatting.c.html#LN116"><span class='Ref_to_Const'>DCH_MAX_ITEM_SIZ</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>]; 
</span> 
        <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="formatting.c.html#LN2383"><span class='Ref_to_Parameter'>max</span></a> <span class='Operator'>&LT;= </span><a href="formatting.c.html#LN116"><span class='Ref_to_Const'>DCH_MAX_ITEM_SIZ</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../../port/strlcpy.c.html#LN43"><span class='Ref_to_Func'>strlcpy</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2391"><span class='Ref_To_Local'>copy</span></a><span class='Delimiter'>, </span><span class='Operator'>*</span><a href="formatting.c.html#LN2383"><span class='Ref_to_Parameter'>src</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2383"><span class='Ref_to_Parameter'>max</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INVALID_DATETIME_FORMAT<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"invalid value \"%s\" for \"%s\""</span><span class='Delimiter'>, 
</span>                        <a href="formatting.c.html#LN2391"><span class='Ref_To_Local'>copy</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2384"><span class='Ref_to_Parameter'>node</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN167"><span class='Ref_to_Member'>key</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN157"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN871"><span class='Ref_to_Func'>errdetail</span></a><span class='Parentheses'>(</span><span class='String'>"The given value did not match any of the allowed "</span> 
                           <span class='String'>"values for this field."</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Operator'>*</span><a href="formatting.c.html#LN2383"><span class='Ref_to_Parameter'>src</span></a> <span class='Operator'>+= </span><a href="formatting.c.html#LN2386"><span class='Ref_To_Local'>len</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="formatting.c.html#LN2386"><span class='Ref_To_Local'>len</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end from_char_seq_search &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * Process a TmToChar struct as denoted by a list of FormatNodes. 
 * The formatted data is written to the string pointed to by 'out'. 
 * ---------- 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN2413"></a><span class='Declare_Function'>DCH_to_char</span><span class='Parentheses'>(</span><a href="formatting.c.html#LN164"><span class='Ref_to_Struct'>FormatNode</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>is_interval</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN458"><span class='Ref_to_Struct'>TmToChar</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>in</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>out</span><span class='Delimiter'>, </span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>collid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2415"></a>    <a href="formatting.c.html#LN164"><span class='Ref_to_Struct'>FormatNode</span></a> <span class='Operator'>*</span><span class='Declare_Local'>n</span><span class='Delimiter'>; 
</span><a name="LN2416"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>s</span><span class='Delimiter'>; 
</span><a name="LN2417"></a>    <span class='Control'>struct</span> <a href="../../../include/pgtime.h.html#LN24"><span class='Ref_to_Struct'>pg_tm</span></a> <span class='Operator'>*</span><span class='Declare_Local'>tm</span> <span class='Operator'>= &</span><a href="formatting.c.html#LN2413"><span class='Ref_to_Parameter'>in</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN460"><span class='Ref_to_Member'>tm</span></a><span class='Delimiter'>; 
</span><a name="LN2418"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* cache localized days and months */ 
</span>    <a href="../../../include/utils/pg_locale.h.html#LN59"><span class='Ref_to_Proto'>cache_locale_time</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN2413"><span class='Ref_to_Parameter'>out</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN2413"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; </span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN166"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>!= </span><a href="formatting.c.html#LN172"><span class='Ref_to_Const'>NODE_TYPE_END</span></a><span class='Delimiter'>; </span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN166"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>!= </span><a href="formatting.c.html#LN173"><span class='Ref_to_Const'>NODE_TYPE_ACTION</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Operator'>*</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN168"><span class='Ref_to_Member'>character</span></a><span class='Delimiter'>; 
</span>            <a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN167"><span class='Ref_to_Member'>key</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN159"><span class='Ref_to_Member'>id</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN574"><span class='Ref_to_EnumConst'>DCH_A_M</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN607"><span class='Ref_to_EnumConst'>DCH_P_M</span></a><span class='Operator'>: 
</span>                <a href="../../../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN28"><span class='Ref_to_Member'>tm_hour</span></a> <span class='Operator'>% </span><a href="../../../include/datatype/timestamp.h.html#LN77"><span class='Ref_to_Const'>HOURS_PER_DAY</span></a> <span class='Operator'>&GT;= </span><a href="../../../include/datatype/timestamp.h.html#LN77"><span class='Ref_to_Const'>HOURS_PER_DAY</span></a> <span class='Operator'>/ </span><span class='Number'>2</span><span class='Parentheses'>) 
</span>                       <span class='Operator'>? </span><a href="formatting.c.html#LN237"><span class='Ref_to_Const'>P_M_STR</span></a> <span class='Operator'>: </span><a href="formatting.c.html#LN232"><span class='Ref_to_Const'>A_M_STR</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN576"><span class='Ref_to_EnumConst'>DCH_AM</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN608"><span class='Ref_to_EnumConst'>DCH_PM</span></a><span class='Operator'>: 
</span>                <a href="../../../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN28"><span class='Ref_to_Member'>tm_hour</span></a> <span class='Operator'>% </span><a href="../../../include/datatype/timestamp.h.html#LN77"><span class='Ref_to_Const'>HOURS_PER_DAY</span></a> <span class='Operator'>&GT;= </span><a href="../../../include/datatype/timestamp.h.html#LN77"><span class='Ref_to_Const'>HOURS_PER_DAY</span></a> <span class='Operator'>/ </span><span class='Number'>2</span><span class='Parentheses'>) 
</span>                       <span class='Operator'>? </span><a href="formatting.c.html#LN239"><span class='Ref_to_Const'>PM_STR</span></a> <span class='Operator'>: </span><a href="formatting.c.html#LN234"><span class='Ref_to_Const'>AM_STR</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN623"><span class='Ref_to_EnumConst'>DCH_a_m</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN651"><span class='Ref_to_EnumConst'>DCH_p_m</span></a><span class='Operator'>: 
</span>                <a href="../../../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN28"><span class='Ref_to_Member'>tm_hour</span></a> <span class='Operator'>% </span><a href="../../../include/datatype/timestamp.h.html#LN77"><span class='Ref_to_Const'>HOURS_PER_DAY</span></a> <span class='Operator'>&GT;= </span><a href="../../../include/datatype/timestamp.h.html#LN77"><span class='Ref_to_Const'>HOURS_PER_DAY</span></a> <span class='Operator'>/ </span><span class='Number'>2</span><span class='Parentheses'>) 
</span>                       <span class='Operator'>? </span><a href="formatting.c.html#LN238"><span class='Ref_to_Const'>p_m_STR</span></a> <span class='Operator'>: </span><a href="formatting.c.html#LN233"><span class='Ref_to_Const'>a_m_STR</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN625"><span class='Ref_to_EnumConst'>DCH_am</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN652"><span class='Ref_to_EnumConst'>DCH_pm</span></a><span class='Operator'>: 
</span>                <a href="../../../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN28"><span class='Ref_to_Member'>tm_hour</span></a> <span class='Operator'>% </span><a href="../../../include/datatype/timestamp.h.html#LN77"><span class='Ref_to_Const'>HOURS_PER_DAY</span></a> <span class='Operator'>&GT;= </span><a href="../../../include/datatype/timestamp.h.html#LN77"><span class='Ref_to_Const'>HOURS_PER_DAY</span></a> <span class='Operator'>/ </span><span class='Number'>2</span><span class='Parentheses'>) 
</span>                       <span class='Operator'>? </span><a href="formatting.c.html#LN240"><span class='Ref_to_Const'>pm_STR</span></a> <span class='Operator'>: </span><a href="formatting.c.html#LN235"><span class='Ref_to_Const'>am_STR</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN590"><span class='Ref_to_EnumConst'>DCH_HH</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN589"><span class='Ref_to_EnumConst'>DCH_HH12</span></a><span class='Operator'>: 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * display time as shown on a 12-hour clock, even for 
                 * intervals 
                 */ 
</span>                <a href="../../../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><span class='String'>"%0*d"</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN520"><span class='Ref_to_Macro'>S_FM</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='Number'>0</span> <span class='Operator'>: </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN28"><span class='Ref_to_Member'>tm_hour</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='Number'>2</span> <span class='Operator'>: </span><span class='Number'>3</span><span class='Delimiter'>, 
</span>                 <a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN28"><span class='Ref_to_Member'>tm_hour</span></a> <span class='Operator'>% </span><span class='Parentheses'>(</span><a href="../../../include/datatype/timestamp.h.html#LN77"><span class='Ref_to_Const'>HOURS_PER_DAY</span></a> <span class='Operator'>/ </span><span class='Number'>2</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span> <span class='Operator'>? </span><a href="../../../include/datatype/timestamp.h.html#LN77"><span class='Ref_to_Const'>HOURS_PER_DAY</span></a> <span class='Operator'>/ </span><span class='Number'>2</span> <span class='Operator'>: 
</span>                        <a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN28"><span class='Ref_to_Member'>tm_hour</span></a> <span class='Operator'>% </span><span class='Parentheses'>(</span><a href="../../../include/datatype/timestamp.h.html#LN77"><span class='Ref_to_Const'>HOURS_PER_DAY</span></a> <span class='Operator'>/ </span><span class='Number'>2</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN514"><span class='Ref_to_Macro'>S_THth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>))</span> 
                    <a href="formatting.c.html#LN971"><span class='Ref_to_Proto'>str_numth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN517"><span class='Ref_to_Macro'>S_TH_TYPE</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN588"><span class='Ref_to_EnumConst'>DCH_HH24</span></a><span class='Operator'>: 
</span>                <a href="../../../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><span class='String'>"%0*d"</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN520"><span class='Ref_to_Macro'>S_FM</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='Number'>0</span> <span class='Operator'>: </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN28"><span class='Ref_to_Member'>tm_hour</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='Number'>2</span> <span class='Operator'>: </span><span class='Number'>3</span><span class='Delimiter'>, 
</span>                        <a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN28"><span class='Ref_to_Member'>tm_hour</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN514"><span class='Ref_to_Macro'>S_THth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>))</span> 
                    <a href="formatting.c.html#LN971"><span class='Ref_to_Proto'>str_numth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN517"><span class='Ref_to_Macro'>S_TH_TYPE</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN599"><span class='Ref_to_EnumConst'>DCH_MI</span></a><span class='Operator'>: 
</span>                <a href="../../../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><span class='String'>"%0*d"</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN520"><span class='Ref_to_Macro'>S_FM</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='Number'>0</span> <span class='Operator'>: </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN27"><span class='Ref_to_Member'>tm_min</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='Number'>2</span> <span class='Operator'>: </span><span class='Number'>3</span><span class='Delimiter'>, 
</span>                        <a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN27"><span class='Ref_to_Member'>tm_min</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN514"><span class='Ref_to_Macro'>S_THth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>))</span> 
                    <a href="formatting.c.html#LN971"><span class='Ref_to_Proto'>str_numth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN517"><span class='Ref_to_Macro'>S_TH_TYPE</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN612"><span class='Ref_to_EnumConst'>DCH_SS</span></a><span class='Operator'>: 
</span>                <a href="../../../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><span class='String'>"%0*d"</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN520"><span class='Ref_to_Macro'>S_FM</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='Number'>0</span> <span class='Operator'>: </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN26"><span class='Ref_to_Member'>tm_sec</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='Number'>2</span> <span class='Operator'>: </span><span class='Number'>3</span><span class='Delimiter'>, 
</span>                        <a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN26"><span class='Ref_to_Member'>tm_sec</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN514"><span class='Ref_to_Macro'>S_THth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>))</span> 
                    <a href="formatting.c.html#LN971"><span class='Ref_to_Proto'>str_numth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN517"><span class='Ref_to_Macro'>S_TH_TYPE</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN603"><span class='Ref_to_EnumConst'>DCH_MS</span></a><span class='Operator'>:</span>        <span class='Comment_Single_Line'>/* millisecond */ 
</span>                <a href="../../../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><span class='String'>"%03d"</span><span class='Delimiter'>, </span><span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>)</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN2413"><span class='Ref_to_Parameter'>in</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN461"><span class='Ref_to_Member'>fsec</span></a> <span class='Operator'>/ </span><a href="../../../include/c.h.html#LN306"><span class='Ref_to_Macro'>INT64CONST</span></a><span class='Parentheses'>(</span><span class='Number'>1000</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN514"><span class='Ref_to_Macro'>S_THth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>))</span> 
                    <a href="formatting.c.html#LN971"><span class='Ref_to_Proto'>str_numth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN517"><span class='Ref_to_Macro'>S_TH_TYPE</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN614"><span class='Ref_to_EnumConst'>DCH_US</span></a><span class='Operator'>:</span>        <span class='Comment_Single_Line'>/* microsecond */ 
</span>                <a href="../../../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><span class='String'>"%06d"</span><span class='Delimiter'>, </span><span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>) </span><a href="formatting.c.html#LN2413"><span class='Ref_to_Parameter'>in</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN461"><span class='Ref_to_Member'>fsec</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN514"><span class='Ref_to_Macro'>S_THth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>))</span> 
                    <a href="formatting.c.html#LN971"><span class='Ref_to_Proto'>str_numth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN517"><span class='Ref_to_Macro'>S_TH_TYPE</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN611"><span class='Ref_to_EnumConst'>DCH_SSSS</span></a><span class='Operator'>: 
</span>                <a href="../../../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><span class='String'>"%d"</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN28"><span class='Ref_to_Member'>tm_hour</span></a> <span class='Operator'>* </span><a href="../../../include/datatype/timestamp.h.html#LN86"><span class='Ref_to_Const'>SECS_PER_HOUR</span></a> <span class='Operator'>+ 
</span>                        <a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN27"><span class='Ref_to_Member'>tm_min</span></a> <span class='Operator'>* </span><a href="../../../include/datatype/timestamp.h.html#LN87"><span class='Ref_to_Const'>SECS_PER_MINUTE</span></a> <span class='Operator'>+ 
</span>                        <a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN26"><span class='Ref_to_Member'>tm_sec</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN514"><span class='Ref_to_Macro'>S_THth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>))</span> 
                    <a href="formatting.c.html#LN971"><span class='Ref_to_Proto'>str_numth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN517"><span class='Ref_to_Macro'>S_TH_TYPE</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN657"><span class='Ref_to_EnumConst'>DCH_tz</span></a><span class='Operator'>: 
</span>                <a href="formatting.c.html#LN487"><span class='Ref_to_Const'>INVALID_FOR_INTERVAL</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN466"><span class='Ref_to_Macro'>tmtcTzn</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2413"><span class='Ref_to_Parameter'>in</span></a><span class='Parentheses'>))</span> 
                <span class='Delimiter'>{ 
</span>                    <span class='Comment_Multi_Line'>/* We assume here that timezone names aren't localized */ 
</span><a name="LN2519"></a>                    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>p</span> <span class='Operator'>= </span><a href="formatting.c.html#LN2006"><span class='Ref_to_Func'>asc_tolower_z</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN466"><span class='Ref_to_Macro'>tmtcTzn</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2413"><span class='Ref_to_Parameter'>in</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
                    <a href="../../../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2519"><span class='Ref_To_Local'>p</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2519"><span class='Ref_To_Local'>p</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN613"><span class='Ref_to_EnumConst'>DCH_TZ</span></a><span class='Operator'>: 
</span>                <a href="formatting.c.html#LN487"><span class='Ref_to_Const'>INVALID_FOR_INTERVAL</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN466"><span class='Ref_to_Macro'>tmtcTzn</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2413"><span class='Ref_to_Parameter'>in</span></a><span class='Parentheses'>))</span> 
                <span class='Delimiter'>{ 
</span>                    <a href="../../../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN466"><span class='Ref_to_Macro'>tmtcTzn</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2413"><span class='Ref_to_Parameter'>in</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                    <a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN606"><span class='Ref_to_EnumConst'>DCH_OF</span></a><span class='Operator'>: 
</span>                <a href="formatting.c.html#LN487"><span class='Ref_to_Const'>INVALID_FOR_INTERVAL</span></a><span class='Delimiter'>; 
</span>                <a href="../../../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><span class='String'>"%c%0*d"</span><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN35"><span class='Ref_to_Member'>tm_gmtoff</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span><span class='Parentheses'>)</span> <span class='Operator'>? </span><span class='String'>'+'</span> <span class='Operator'>: </span><span class='String'>'-'</span><span class='Delimiter'>, 
</span>                        <a href="formatting.c.html#LN520"><span class='Ref_to_Macro'>S_FM</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>)</span> <span class='Operator'>? </span><span class='Number'>0</span> <span class='Operator'>: </span><span class='Number'>2</span><span class='Delimiter'>, 
</span>                        abs<span class='Parentheses'>((</span><span class='Keyword'>int</span><span class='Parentheses'>) </span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN35"><span class='Ref_to_Member'>tm_gmtoff</span></a><span class='Parentheses'>)</span> <span class='Operator'>/ </span><a href="../../../include/datatype/timestamp.h.html#LN86"><span class='Ref_to_Const'>SECS_PER_HOUR</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span>abs<span class='Parentheses'>((</span><span class='Keyword'>int</span><span class='Parentheses'>) </span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN35"><span class='Ref_to_Member'>tm_gmtoff</span></a><span class='Parentheses'>)</span> <span class='Operator'>% </span><a href="../../../include/datatype/timestamp.h.html#LN86"><span class='Ref_to_Const'>SECS_PER_HOUR</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                <span class='Delimiter'>{ 
</span>                    <a href="../../../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><span class='String'>":%02d"</span><span class='Delimiter'>, 
</span>                            <span class='Parentheses'>(</span>abs<span class='Parentheses'>((</span><span class='Keyword'>int</span><span class='Parentheses'>) </span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN35"><span class='Ref_to_Member'>tm_gmtoff</span></a><span class='Parentheses'>)</span> <span class='Operator'>% </span><a href="../../../include/datatype/timestamp.h.html#LN86"><span class='Ref_to_Const'>SECS_PER_HOUR</span></a><span class='Parentheses'>)</span> <span class='Operator'>/ </span><a href="../../../include/datatype/timestamp.h.html#LN87"><span class='Ref_to_Const'>SECS_PER_MINUTE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN573"><span class='Ref_to_EnumConst'>DCH_A_D</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN577"><span class='Ref_to_EnumConst'>DCH_B_C</span></a><span class='Operator'>: 
</span>                <a href="formatting.c.html#LN487"><span class='Ref_to_Const'>INVALID_FOR_INTERVAL</span></a><span class='Delimiter'>; 
</span>                <a href="../../../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN31"><span class='Ref_to_Member'>tm_year</span></a> <span class='Operator'>&LT;= </span><span class='Number'>0</span> <span class='Operator'>? </span><a href="formatting.c.html#LN210"><span class='Ref_to_Const'>B_C_STR</span></a> <span class='Operator'>: </span><a href="formatting.c.html#LN205"><span class='Ref_to_Const'>A_D_STR</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN575"><span class='Ref_to_EnumConst'>DCH_AD</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN578"><span class='Ref_to_EnumConst'>DCH_BC</span></a><span class='Operator'>: 
</span>                <a href="formatting.c.html#LN487"><span class='Ref_to_Const'>INVALID_FOR_INTERVAL</span></a><span class='Delimiter'>; 
</span>                <a href="../../../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN31"><span class='Ref_to_Member'>tm_year</span></a> <span class='Operator'>&LT;= </span><span class='Number'>0</span> <span class='Operator'>? </span><a href="formatting.c.html#LN212"><span class='Ref_to_Const'>BC_STR</span></a> <span class='Operator'>: </span><a href="formatting.c.html#LN207"><span class='Ref_to_Const'>AD_STR</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN622"><span class='Ref_to_EnumConst'>DCH_a_d</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN626"><span class='Ref_to_EnumConst'>DCH_b_c</span></a><span class='Operator'>: 
</span>                <a href="formatting.c.html#LN487"><span class='Ref_to_Const'>INVALID_FOR_INTERVAL</span></a><span class='Delimiter'>; 
</span>                <a href="../../../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN31"><span class='Ref_to_Member'>tm_year</span></a> <span class='Operator'>&LT;= </span><span class='Number'>0</span> <span class='Operator'>? </span><a href="formatting.c.html#LN211"><span class='Ref_to_Const'>b_c_STR</span></a> <span class='Operator'>: </span><a href="formatting.c.html#LN206"><span class='Ref_to_Const'>a_d_STR</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN624"><span class='Ref_to_EnumConst'>DCH_ad</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN627"><span class='Ref_to_EnumConst'>DCH_bc</span></a><span class='Operator'>: 
</span>                <a href="formatting.c.html#LN487"><span class='Ref_to_Const'>INVALID_FOR_INTERVAL</span></a><span class='Delimiter'>; 
</span>                <a href="../../../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN31"><span class='Ref_to_Member'>tm_year</span></a> <span class='Operator'>&LT;= </span><span class='Number'>0</span> <span class='Operator'>? </span><a href="formatting.c.html#LN213"><span class='Ref_to_Const'>bc_STR</span></a> <span class='Operator'>: </span><a href="formatting.c.html#LN208"><span class='Ref_to_Const'>ad_STR</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN601"><span class='Ref_to_EnumConst'>DCH_MONTH</span></a><span class='Operator'>: 
</span>                <a href="formatting.c.html#LN487"><span class='Ref_to_Const'>INVALID_FOR_INTERVAL</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN30"><span class='Ref_to_Member'>tm_mon</span></a><span class='Parentheses'>) 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN522"><span class='Ref_to_Macro'>S_TM</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>))</span> 
                <span class='Delimiter'>{ 
</span><a name="LN2578"></a>                    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>str</span> <span class='Operator'>= </span><a href="formatting.c.html#LN1994"><span class='Ref_to_Func'>str_toupper_z</span></a><span class='Parentheses'>(</span><a href="pg_locale.c.html#LN96"><span class='Ref_to_Global_Var'>localized_full_months</span></a><span class='Delimiter'>[</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN30"><span class='Ref_to_Member'>tm_mon</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>], </span><a href="formatting.c.html#LN2413"><span class='Ref_to_Parameter'>collid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <span class='Control'>if</span> <span class='Parentheses'>(</span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2578"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>) </span><span class='Operator'>&LT;= </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN167"><span class='Ref_to_Member'>key</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN158"><span class='Ref_to_Member'>len</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN528"><span class='Ref_to_Const'>TM_SUFFIX_LEN</span></a><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="formatting.c.html#LN116"><span class='Ref_to_Const'>DCH_MAX_ITEM_SIZ</span></a><span class='Parentheses'>)</span> 
                        <a href="../../../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2578"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>else</span> 
                        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_DATETIME_VALUE_OUT_OF_RANGE<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                          <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"localized string format value too long"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>else</span> 
                    <a href="../../../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><span class='String'>"%*s"</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN520"><span class='Ref_to_Macro'>S_FM</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='Number'>0</span> <span class='Operator'>: -</span><span class='Number'>9</span><span class='Delimiter'>, 
</span>                            <a href="formatting.c.html#LN2012"><span class='Ref_to_Func'>asc_toupper_z</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN187"><span class='Ref_to_Global_Var'>months_full</span></a><span class='Delimiter'>[</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN30"><span class='Ref_to_Member'>tm_mon</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN604"><span class='Ref_to_EnumConst'>DCH_Month</span></a><span class='Operator'>: 
</span>                <a href="formatting.c.html#LN487"><span class='Ref_to_Const'>INVALID_FOR_INTERVAL</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN30"><span class='Ref_to_Member'>tm_mon</span></a><span class='Parentheses'>) 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN522"><span class='Ref_to_Macro'>S_TM</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>))</span> 
                <span class='Delimiter'>{ 
</span><a name="LN2598"></a>                    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>str</span> <span class='Operator'>= </span><a href="formatting.c.html#LN2000"><span class='Ref_to_Func'>str_initcap_z</span></a><span class='Parentheses'>(</span><a href="pg_locale.c.html#LN96"><span class='Ref_to_Global_Var'>localized_full_months</span></a><span class='Delimiter'>[</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN30"><span class='Ref_to_Member'>tm_mon</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>], </span><a href="formatting.c.html#LN2413"><span class='Ref_to_Parameter'>collid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <span class='Control'>if</span> <span class='Parentheses'>(</span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2598"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>) </span><span class='Operator'>&LT;= </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN167"><span class='Ref_to_Member'>key</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN158"><span class='Ref_to_Member'>len</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN528"><span class='Ref_to_Const'>TM_SUFFIX_LEN</span></a><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="formatting.c.html#LN116"><span class='Ref_to_Const'>DCH_MAX_ITEM_SIZ</span></a><span class='Parentheses'>)</span> 
                        <a href="../../../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2598"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>else</span> 
                        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_DATETIME_VALUE_OUT_OF_RANGE<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                          <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"localized string format value too long"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>else</span> 
                    <a href="../../../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><span class='String'>"%*s"</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN520"><span class='Ref_to_Macro'>S_FM</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='Number'>0</span> <span class='Operator'>: -</span><span class='Number'>9</span><span class='Delimiter'>, 
</span>                            <a href="formatting.c.html#LN187"><span class='Ref_to_Global_Var'>months_full</span></a><span class='Delimiter'>[</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN30"><span class='Ref_to_Member'>tm_mon</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN648"><span class='Ref_to_EnumConst'>DCH_month</span></a><span class='Operator'>: 
</span>                <a href="formatting.c.html#LN487"><span class='Ref_to_Const'>INVALID_FOR_INTERVAL</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN30"><span class='Ref_to_Member'>tm_mon</span></a><span class='Parentheses'>) 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN522"><span class='Ref_to_Macro'>S_TM</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>))</span> 
                <span class='Delimiter'>{ 
</span><a name="LN2618"></a>                    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>str</span> <span class='Operator'>= </span><a href="formatting.c.html#LN1988"><span class='Ref_to_Func'>str_tolower_z</span></a><span class='Parentheses'>(</span><a href="pg_locale.c.html#LN96"><span class='Ref_to_Global_Var'>localized_full_months</span></a><span class='Delimiter'>[</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN30"><span class='Ref_to_Member'>tm_mon</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>], </span><a href="formatting.c.html#LN2413"><span class='Ref_to_Parameter'>collid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <span class='Control'>if</span> <span class='Parentheses'>(</span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2618"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>) </span><span class='Operator'>&LT;= </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN167"><span class='Ref_to_Member'>key</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN158"><span class='Ref_to_Member'>len</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN528"><span class='Ref_to_Const'>TM_SUFFIX_LEN</span></a><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="formatting.c.html#LN116"><span class='Ref_to_Const'>DCH_MAX_ITEM_SIZ</span></a><span class='Parentheses'>)</span> 
                        <a href="../../../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2618"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>else</span> 
                        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_DATETIME_VALUE_OUT_OF_RANGE<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                          <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"localized string format value too long"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>else</span> 
                    <a href="../../../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><span class='String'>"%*s"</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN520"><span class='Ref_to_Macro'>S_FM</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='Number'>0</span> <span class='Operator'>: -</span><span class='Number'>9</span><span class='Delimiter'>, 
</span>                            <a href="formatting.c.html#LN2006"><span class='Ref_to_Func'>asc_tolower_z</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN187"><span class='Ref_to_Global_Var'>months_full</span></a><span class='Delimiter'>[</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN30"><span class='Ref_to_Member'>tm_mon</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN602"><span class='Ref_to_EnumConst'>DCH_MON</span></a><span class='Operator'>: 
</span>                <a href="formatting.c.html#LN487"><span class='Ref_to_Const'>INVALID_FOR_INTERVAL</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN30"><span class='Ref_to_Member'>tm_mon</span></a><span class='Parentheses'>) 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN522"><span class='Ref_to_Macro'>S_TM</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>))</span> 
                <span class='Delimiter'>{ 
</span><a name="LN2638"></a>                    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>str</span> <span class='Operator'>= </span><a href="formatting.c.html#LN1994"><span class='Ref_to_Func'>str_toupper_z</span></a><span class='Parentheses'>(</span><a href="pg_locale.c.html#LN95"><span class='Ref_to_Global_Var'>localized_abbrev_months</span></a><span class='Delimiter'>[</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN30"><span class='Ref_to_Member'>tm_mon</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>], </span><a href="formatting.c.html#LN2413"><span class='Ref_to_Parameter'>collid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <span class='Control'>if</span> <span class='Parentheses'>(</span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2638"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>) </span><span class='Operator'>&LT;= </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN167"><span class='Ref_to_Member'>key</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN158"><span class='Ref_to_Member'>len</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN528"><span class='Ref_to_Const'>TM_SUFFIX_LEN</span></a><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="formatting.c.html#LN116"><span class='Ref_to_Const'>DCH_MAX_ITEM_SIZ</span></a><span class='Parentheses'>)</span> 
                        <a href="../../../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2638"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>else</span> 
                        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_DATETIME_VALUE_OUT_OF_RANGE<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                          <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"localized string format value too long"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>else</span> 
                    <a href="../../../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2012"><span class='Ref_to_Func'>asc_toupper_z</span></a><span class='Parentheses'>(</span><a href="datetime.c.html#LN65"><span class='Ref_to_Global_Var'>months</span></a><span class='Delimiter'>[</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN30"><span class='Ref_to_Member'>tm_mon</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN605"><span class='Ref_to_EnumConst'>DCH_Mon</span></a><span class='Operator'>: 
</span>                <a href="formatting.c.html#LN487"><span class='Ref_to_Const'>INVALID_FOR_INTERVAL</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN30"><span class='Ref_to_Member'>tm_mon</span></a><span class='Parentheses'>) 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN522"><span class='Ref_to_Macro'>S_TM</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>))</span> 
                <span class='Delimiter'>{ 
</span><a name="LN2657"></a>                    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>str</span> <span class='Operator'>= </span><a href="formatting.c.html#LN2000"><span class='Ref_to_Func'>str_initcap_z</span></a><span class='Parentheses'>(</span><a href="pg_locale.c.html#LN95"><span class='Ref_to_Global_Var'>localized_abbrev_months</span></a><span class='Delimiter'>[</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN30"><span class='Ref_to_Member'>tm_mon</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>], </span><a href="formatting.c.html#LN2413"><span class='Ref_to_Parameter'>collid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <span class='Control'>if</span> <span class='Parentheses'>(</span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2657"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>) </span><span class='Operator'>&LT;= </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN167"><span class='Ref_to_Member'>key</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN158"><span class='Ref_to_Member'>len</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN528"><span class='Ref_to_Const'>TM_SUFFIX_LEN</span></a><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="formatting.c.html#LN116"><span class='Ref_to_Const'>DCH_MAX_ITEM_SIZ</span></a><span class='Parentheses'>)</span> 
                        <a href="../../../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2657"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>else</span> 
                        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_DATETIME_VALUE_OUT_OF_RANGE<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                          <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"localized string format value too long"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>else</span> 
                    <a href="../../../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="datetime.c.html#LN65"><span class='Ref_to_Global_Var'>months</span></a><span class='Delimiter'>[</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN30"><span class='Ref_to_Member'>tm_mon</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN649"><span class='Ref_to_EnumConst'>DCH_mon</span></a><span class='Operator'>: 
</span>                <a href="formatting.c.html#LN487"><span class='Ref_to_Const'>INVALID_FOR_INTERVAL</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN30"><span class='Ref_to_Member'>tm_mon</span></a><span class='Parentheses'>) 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN522"><span class='Ref_to_Macro'>S_TM</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>))</span> 
                <span class='Delimiter'>{ 
</span><a name="LN2676"></a>                    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>str</span> <span class='Operator'>= </span><a href="formatting.c.html#LN1988"><span class='Ref_to_Func'>str_tolower_z</span></a><span class='Parentheses'>(</span><a href="pg_locale.c.html#LN95"><span class='Ref_to_Global_Var'>localized_abbrev_months</span></a><span class='Delimiter'>[</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN30"><span class='Ref_to_Member'>tm_mon</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>], </span><a href="formatting.c.html#LN2413"><span class='Ref_to_Parameter'>collid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <span class='Control'>if</span> <span class='Parentheses'>(</span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2676"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>) </span><span class='Operator'>&LT;= </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN167"><span class='Ref_to_Member'>key</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN158"><span class='Ref_to_Member'>len</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN528"><span class='Ref_to_Const'>TM_SUFFIX_LEN</span></a><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="formatting.c.html#LN116"><span class='Ref_to_Const'>DCH_MAX_ITEM_SIZ</span></a><span class='Parentheses'>)</span> 
                        <a href="../../../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2676"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>else</span> 
                        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_DATETIME_VALUE_OUT_OF_RANGE<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                          <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"localized string format value too long"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>else</span> 
                    <a href="../../../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2006"><span class='Ref_to_Func'>asc_tolower_z</span></a><span class='Parentheses'>(</span><a href="datetime.c.html#LN65"><span class='Ref_to_Global_Var'>months</span></a><span class='Delimiter'>[</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN30"><span class='Ref_to_Member'>tm_mon</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN600"><span class='Ref_to_EnumConst'>DCH_MM</span></a><span class='Operator'>: 
</span>                <a href="../../../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><span class='String'>"%0*d"</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN520"><span class='Ref_to_Macro'>S_FM</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='Number'>0</span> <span class='Operator'>: </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN30"><span class='Ref_to_Member'>tm_mon</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='Number'>2</span> <span class='Operator'>: </span><span class='Number'>3</span><span class='Delimiter'>, 
</span>                        <a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN30"><span class='Ref_to_Member'>tm_mon</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN514"><span class='Ref_to_Macro'>S_THth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>))</span> 
                    <a href="formatting.c.html#LN971"><span class='Ref_to_Proto'>str_numth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN517"><span class='Ref_to_Macro'>S_TH_TYPE</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN580"><span class='Ref_to_EnumConst'>DCH_DAY</span></a><span class='Operator'>: 
</span>                <a href="formatting.c.html#LN487"><span class='Ref_to_Const'>INVALID_FOR_INTERVAL</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN522"><span class='Ref_to_Macro'>S_TM</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>))</span> 
                <span class='Delimiter'>{ 
</span><a name="LN2700"></a>                    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>str</span> <span class='Operator'>= </span><a href="formatting.c.html#LN1994"><span class='Ref_to_Func'>str_toupper_z</span></a><span class='Parentheses'>(</span><a href="pg_locale.c.html#LN94"><span class='Ref_to_Global_Var'>localized_full_days</span></a><span class='Delimiter'>[</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN32"><span class='Ref_to_Member'>tm_wday</span></a><span class='Delimiter'>], </span><a href="formatting.c.html#LN2413"><span class='Ref_to_Parameter'>collid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <span class='Control'>if</span> <span class='Parentheses'>(</span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2700"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>) </span><span class='Operator'>&LT;= </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN167"><span class='Ref_to_Member'>key</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN158"><span class='Ref_to_Member'>len</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN528"><span class='Ref_to_Const'>TM_SUFFIX_LEN</span></a><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="formatting.c.html#LN116"><span class='Ref_to_Const'>DCH_MAX_ITEM_SIZ</span></a><span class='Parentheses'>)</span> 
                        <a href="../../../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2700"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>else</span> 
                        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_DATETIME_VALUE_OUT_OF_RANGE<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                          <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"localized string format value too long"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>else</span> 
                    <a href="../../../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><span class='String'>"%*s"</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN520"><span class='Ref_to_Macro'>S_FM</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='Number'>0</span> <span class='Operator'>: -</span><span class='Number'>9</span><span class='Delimiter'>, 
</span>                            <a href="formatting.c.html#LN2012"><span class='Ref_to_Func'>asc_toupper_z</span></a><span class='Parentheses'>(</span><a href="datetime.c.html#LN68"><span class='Ref_to_Global_Var'>days</span></a><span class='Delimiter'>[</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN32"><span class='Ref_to_Member'>tm_wday</span></a><span class='Delimiter'>]</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN584"><span class='Ref_to_EnumConst'>DCH_Day</span></a><span class='Operator'>: 
</span>                <a href="formatting.c.html#LN487"><span class='Ref_to_Const'>INVALID_FOR_INTERVAL</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN522"><span class='Ref_to_Macro'>S_TM</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>))</span> 
                <span class='Delimiter'>{ 
</span><a name="LN2718"></a>                    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>str</span> <span class='Operator'>= </span><a href="formatting.c.html#LN2000"><span class='Ref_to_Func'>str_initcap_z</span></a><span class='Parentheses'>(</span><a href="pg_locale.c.html#LN94"><span class='Ref_to_Global_Var'>localized_full_days</span></a><span class='Delimiter'>[</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN32"><span class='Ref_to_Member'>tm_wday</span></a><span class='Delimiter'>], </span><a href="formatting.c.html#LN2413"><span class='Ref_to_Parameter'>collid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <span class='Control'>if</span> <span class='Parentheses'>(</span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2718"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>) </span><span class='Operator'>&LT;= </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN167"><span class='Ref_to_Member'>key</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN158"><span class='Ref_to_Member'>len</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN528"><span class='Ref_to_Const'>TM_SUFFIX_LEN</span></a><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="formatting.c.html#LN116"><span class='Ref_to_Const'>DCH_MAX_ITEM_SIZ</span></a><span class='Parentheses'>)</span> 
                        <a href="../../../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2718"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>else</span> 
                        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_DATETIME_VALUE_OUT_OF_RANGE<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                          <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"localized string format value too long"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>else</span> 
                    <a href="../../../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><span class='String'>"%*s"</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN520"><span class='Ref_to_Macro'>S_FM</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='Number'>0</span> <span class='Operator'>: -</span><span class='Number'>9</span><span class='Delimiter'>, 
</span>                            <a href="datetime.c.html#LN68"><span class='Ref_to_Global_Var'>days</span></a><span class='Delimiter'>[</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN32"><span class='Ref_to_Member'>tm_wday</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN629"><span class='Ref_to_EnumConst'>DCH_day</span></a><span class='Operator'>: 
</span>                <a href="formatting.c.html#LN487"><span class='Ref_to_Const'>INVALID_FOR_INTERVAL</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN522"><span class='Ref_to_Macro'>S_TM</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>))</span> 
                <span class='Delimiter'>{ 
</span><a name="LN2736"></a>                    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>str</span> <span class='Operator'>= </span><a href="formatting.c.html#LN1988"><span class='Ref_to_Func'>str_tolower_z</span></a><span class='Parentheses'>(</span><a href="pg_locale.c.html#LN94"><span class='Ref_to_Global_Var'>localized_full_days</span></a><span class='Delimiter'>[</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN32"><span class='Ref_to_Member'>tm_wday</span></a><span class='Delimiter'>], </span><a href="formatting.c.html#LN2413"><span class='Ref_to_Parameter'>collid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <span class='Control'>if</span> <span class='Parentheses'>(</span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2736"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>) </span><span class='Operator'>&LT;= </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN167"><span class='Ref_to_Member'>key</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN158"><span class='Ref_to_Member'>len</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN528"><span class='Ref_to_Const'>TM_SUFFIX_LEN</span></a><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="formatting.c.html#LN116"><span class='Ref_to_Const'>DCH_MAX_ITEM_SIZ</span></a><span class='Parentheses'>)</span> 
                        <a href="../../../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2736"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>else</span> 
                        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_DATETIME_VALUE_OUT_OF_RANGE<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                          <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"localized string format value too long"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>else</span> 
                    <a href="../../../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><span class='String'>"%*s"</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN520"><span class='Ref_to_Macro'>S_FM</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='Number'>0</span> <span class='Operator'>: -</span><span class='Number'>9</span><span class='Delimiter'>, 
</span>                            <a href="formatting.c.html#LN2006"><span class='Ref_to_Func'>asc_tolower_z</span></a><span class='Parentheses'>(</span><a href="datetime.c.html#LN68"><span class='Ref_to_Global_Var'>days</span></a><span class='Delimiter'>[</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN32"><span class='Ref_to_Member'>tm_wday</span></a><span class='Delimiter'>]</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN583"><span class='Ref_to_EnumConst'>DCH_DY</span></a><span class='Operator'>: 
</span>                <a href="formatting.c.html#LN487"><span class='Ref_to_Const'>INVALID_FOR_INTERVAL</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN522"><span class='Ref_to_Macro'>S_TM</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>))</span> 
                <span class='Delimiter'>{ 
</span><a name="LN2754"></a>                    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>str</span> <span class='Operator'>= </span><a href="formatting.c.html#LN1994"><span class='Ref_to_Func'>str_toupper_z</span></a><span class='Parentheses'>(</span><a href="pg_locale.c.html#LN93"><span class='Ref_to_Global_Var'>localized_abbrev_days</span></a><span class='Delimiter'>[</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN32"><span class='Ref_to_Member'>tm_wday</span></a><span class='Delimiter'>], </span><a href="formatting.c.html#LN2413"><span class='Ref_to_Parameter'>collid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <span class='Control'>if</span> <span class='Parentheses'>(</span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2754"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>) </span><span class='Operator'>&LT;= </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN167"><span class='Ref_to_Member'>key</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN158"><span class='Ref_to_Member'>len</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN528"><span class='Ref_to_Const'>TM_SUFFIX_LEN</span></a><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="formatting.c.html#LN116"><span class='Ref_to_Const'>DCH_MAX_ITEM_SIZ</span></a><span class='Parentheses'>)</span> 
                        <a href="../../../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2754"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>else</span> 
                        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_DATETIME_VALUE_OUT_OF_RANGE<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                          <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"localized string format value too long"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>else</span> 
                    <a href="../../../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2012"><span class='Ref_to_Func'>asc_toupper_z</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN192"><span class='Ref_to_Global_Var'>days_short</span></a><span class='Delimiter'>[</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN32"><span class='Ref_to_Member'>tm_wday</span></a><span class='Delimiter'>]</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN585"><span class='Ref_to_EnumConst'>DCH_Dy</span></a><span class='Operator'>: 
</span>                <a href="formatting.c.html#LN487"><span class='Ref_to_Const'>INVALID_FOR_INTERVAL</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN522"><span class='Ref_to_Macro'>S_TM</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>))</span> 
                <span class='Delimiter'>{ 
</span><a name="LN2771"></a>                    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>str</span> <span class='Operator'>= </span><a href="formatting.c.html#LN2000"><span class='Ref_to_Func'>str_initcap_z</span></a><span class='Parentheses'>(</span><a href="pg_locale.c.html#LN93"><span class='Ref_to_Global_Var'>localized_abbrev_days</span></a><span class='Delimiter'>[</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN32"><span class='Ref_to_Member'>tm_wday</span></a><span class='Delimiter'>], </span><a href="formatting.c.html#LN2413"><span class='Ref_to_Parameter'>collid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <span class='Control'>if</span> <span class='Parentheses'>(</span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2771"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>) </span><span class='Operator'>&LT;= </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN167"><span class='Ref_to_Member'>key</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN158"><span class='Ref_to_Member'>len</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN528"><span class='Ref_to_Const'>TM_SUFFIX_LEN</span></a><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="formatting.c.html#LN116"><span class='Ref_to_Const'>DCH_MAX_ITEM_SIZ</span></a><span class='Parentheses'>)</span> 
                        <a href="../../../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2771"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>else</span> 
                        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_DATETIME_VALUE_OUT_OF_RANGE<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                          <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"localized string format value too long"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>else</span> 
                    <a href="../../../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN192"><span class='Ref_to_Global_Var'>days_short</span></a><span class='Delimiter'>[</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN32"><span class='Ref_to_Member'>tm_wday</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN632"><span class='Ref_to_EnumConst'>DCH_dy</span></a><span class='Operator'>: 
</span>                <a href="formatting.c.html#LN487"><span class='Ref_to_Const'>INVALID_FOR_INTERVAL</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN522"><span class='Ref_to_Macro'>S_TM</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>))</span> 
                <span class='Delimiter'>{ 
</span><a name="LN2788"></a>                    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>str</span> <span class='Operator'>= </span><a href="formatting.c.html#LN1988"><span class='Ref_to_Func'>str_tolower_z</span></a><span class='Parentheses'>(</span><a href="pg_locale.c.html#LN93"><span class='Ref_to_Global_Var'>localized_abbrev_days</span></a><span class='Delimiter'>[</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN32"><span class='Ref_to_Member'>tm_wday</span></a><span class='Delimiter'>], </span><a href="formatting.c.html#LN2413"><span class='Ref_to_Parameter'>collid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <span class='Control'>if</span> <span class='Parentheses'>(</span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2788"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>) </span><span class='Operator'>&LT;= </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN167"><span class='Ref_to_Member'>key</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN158"><span class='Ref_to_Member'>len</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN528"><span class='Ref_to_Const'>TM_SUFFIX_LEN</span></a><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="formatting.c.html#LN116"><span class='Ref_to_Const'>DCH_MAX_ITEM_SIZ</span></a><span class='Parentheses'>)</span> 
                        <a href="../../../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2788"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>else</span> 
                        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_DATETIME_VALUE_OUT_OF_RANGE<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                          <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"localized string format value too long"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>else</span> 
                    <a href="../../../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2006"><span class='Ref_to_Func'>asc_tolower_z</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN192"><span class='Ref_to_Global_Var'>days_short</span></a><span class='Delimiter'>[</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN32"><span class='Ref_to_Member'>tm_wday</span></a><span class='Delimiter'>]</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN581"><span class='Ref_to_EnumConst'>DCH_DDD</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN591"><span class='Ref_to_EnumConst'>DCH_IDDD</span></a><span class='Operator'>: 
</span>                <a href="../../../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><span class='String'>"%0*d"</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN520"><span class='Ref_to_Macro'>S_FM</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='Number'>0</span> <span class='Operator'>: </span><span class='Number'>3</span><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN167"><span class='Ref_to_Member'>key</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN159"><span class='Ref_to_Member'>id</span></a> <span class='Operator'>== </span><a href="formatting.c.html#LN581"><span class='Ref_to_EnumConst'>DCH_DDD</span></a><span class='Parentheses'>) </span><span class='Operator'>? 
</span>                        <a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN33"><span class='Ref_to_Member'>tm_yday</span></a> <span class='Operator'>: 
</span>                      <a href="../../../include/utils/timestamp.h.html#LN104"><span class='Ref_to_Proto'>date2isoyearday</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN31"><span class='Ref_to_Member'>tm_year</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN30"><span class='Ref_to_Member'>tm_mon</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN29"><span class='Ref_to_Member'>tm_mday</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN514"><span class='Ref_to_Macro'>S_THth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>))</span> 
                    <a href="formatting.c.html#LN971"><span class='Ref_to_Proto'>str_numth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN517"><span class='Ref_to_Macro'>S_TH_TYPE</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN582"><span class='Ref_to_EnumConst'>DCH_DD</span></a><span class='Operator'>: 
</span>                <a href="../../../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><span class='String'>"%0*d"</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN520"><span class='Ref_to_Macro'>S_FM</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='Number'>0</span> <span class='Operator'>: </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN29"><span class='Ref_to_Member'>tm_mday</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN514"><span class='Ref_to_Macro'>S_THth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>))</span> 
                    <a href="formatting.c.html#LN971"><span class='Ref_to_Proto'>str_numth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN517"><span class='Ref_to_Macro'>S_TH_TYPE</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN586"><span class='Ref_to_EnumConst'>DCH_D</span></a><span class='Operator'>: 
</span>                <a href="formatting.c.html#LN487"><span class='Ref_to_Const'>INVALID_FOR_INTERVAL</span></a><span class='Delimiter'>; 
</span>                <a href="../../../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><span class='String'>"%d"</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN32"><span class='Ref_to_Member'>tm_wday</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN514"><span class='Ref_to_Macro'>S_THth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>))</span> 
                    <a href="formatting.c.html#LN971"><span class='Ref_to_Proto'>str_numth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN517"><span class='Ref_to_Macro'>S_TH_TYPE</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN592"><span class='Ref_to_EnumConst'>DCH_ID</span></a><span class='Operator'>: 
</span>                <a href="formatting.c.html#LN487"><span class='Ref_to_Const'>INVALID_FOR_INTERVAL</span></a><span class='Delimiter'>; 
</span>                <a href="../../../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><span class='String'>"%d"</span><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN32"><span class='Ref_to_Member'>tm_wday</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='Number'>7</span> <span class='Operator'>: </span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN32"><span class='Ref_to_Member'>tm_wday</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN514"><span class='Ref_to_Macro'>S_THth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>))</span> 
                    <a href="formatting.c.html#LN971"><span class='Ref_to_Proto'>str_numth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN517"><span class='Ref_to_Macro'>S_TH_TYPE</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN615"><span class='Ref_to_EnumConst'>DCH_WW</span></a><span class='Operator'>: 
</span>                <a href="../../../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><span class='String'>"%0*d"</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN520"><span class='Ref_to_Macro'>S_FM</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='Number'>0</span> <span class='Operator'>: </span><span class='Number'>2</span><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN33"><span class='Ref_to_Member'>tm_yday</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>) </span><span class='Operator'>/ </span><span class='Number'>7</span> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN514"><span class='Ref_to_Macro'>S_THth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>))</span> 
                    <a href="formatting.c.html#LN971"><span class='Ref_to_Proto'>str_numth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN517"><span class='Ref_to_Macro'>S_TH_TYPE</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN593"><span class='Ref_to_EnumConst'>DCH_IW</span></a><span class='Operator'>: 
</span>                <a href="../../../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><span class='String'>"%0*d"</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN520"><span class='Ref_to_Macro'>S_FM</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='Number'>0</span> <span class='Operator'>: </span><span class='Number'>2</span><span class='Delimiter'>, 
</span>                        <a href="../../../include/utils/timestamp.h.html#LN102"><span class='Ref_to_Proto'>date2isoweek</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN31"><span class='Ref_to_Member'>tm_year</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN30"><span class='Ref_to_Member'>tm_mon</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN29"><span class='Ref_to_Member'>tm_mday</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN514"><span class='Ref_to_Macro'>S_THth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>))</span> 
                    <a href="formatting.c.html#LN971"><span class='Ref_to_Proto'>str_numth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN517"><span class='Ref_to_Macro'>S_TH_TYPE</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN609"><span class='Ref_to_EnumConst'>DCH_Q</span></a><span class='Operator'>: 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN30"><span class='Ref_to_Member'>tm_mon</span></a><span class='Parentheses'>) 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <a href="../../../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><span class='String'>"%d"</span><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN30"><span class='Ref_to_Member'>tm_mon</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>) </span><span class='Operator'>/ </span><span class='Number'>3</span> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN514"><span class='Ref_to_Macro'>S_THth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>))</span> 
                    <a href="formatting.c.html#LN971"><span class='Ref_to_Proto'>str_numth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN517"><span class='Ref_to_Macro'>S_TH_TYPE</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN579"><span class='Ref_to_EnumConst'>DCH_CC</span></a><span class='Operator'>: 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN2413"><span class='Ref_to_Parameter'>is_interval</span></a><span class='Parentheses'>)</span>    <span class='Comment_Single_Line'>/* straight calculation */ 
</span>                    <a href="formatting.c.html#LN2418"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN31"><span class='Ref_to_Member'>tm_year</span></a> <span class='Operator'>/ </span><span class='Number'>100</span><span class='Delimiter'>; 
</span>                <span class='Control'>else</span> 
                <span class='Delimiter'>{ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN31"><span class='Ref_to_Member'>tm_year</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                        <span class='Comment_Multi_Line'>/* Century 20 == 1901 - 2000 */ 
</span>                        <a href="formatting.c.html#LN2418"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN31"><span class='Ref_to_Member'>tm_year</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>) </span><span class='Operator'>/ </span><span class='Number'>100</span> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>                    <span class='Control'>else</span> 
                        <span class='Comment_Multi_Line'>/* Century 6BC == 600BC - 501BC */ 
</span>                        <a href="formatting.c.html#LN2418"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN31"><span class='Ref_to_Member'>tm_year</span></a> <span class='Operator'>/ </span><span class='Number'>100</span> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN2418"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT;= </span><span class='Number'>99</span> <span class='Operator'>&& </span><a href="formatting.c.html#LN2418"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&GT;= -</span><span class='Number'>99</span><span class='Parentheses'>) 
</span>                    <a href="../../../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><span class='String'>"%0*d"</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN520"><span class='Ref_to_Macro'>S_FM</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='Number'>0</span> <span class='Operator'>: </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN2418"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='Number'>2</span> <span class='Operator'>: </span><span class='Number'>3</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN2418"><span class='Ref_To_Local'>i</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>else</span> 
                    <a href="../../../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><span class='String'>"%d"</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN2418"><span class='Ref_To_Local'>i</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN514"><span class='Ref_to_Macro'>S_THth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>))</span> 
                    <a href="formatting.c.html#LN971"><span class='Ref_to_Proto'>str_numth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN517"><span class='Ref_to_Macro'>S_TH_TYPE</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN617"><span class='Ref_to_EnumConst'>DCH_Y_YYY</span></a><span class='Operator'>: 
</span>                <a href="formatting.c.html#LN2418"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN203"><span class='Ref_to_Macro'>ADJUST_YEAR</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN31"><span class='Ref_to_Member'>tm_year</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2413"><span class='Ref_to_Parameter'>is_interval</span></a><span class='Parentheses'>) </span><span class='Operator'>/ </span><span class='Number'>1000</span><span class='Delimiter'>; 
</span>                <a href="../../../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><span class='String'>"%d,%03d"</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN2418"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, 
</span>                        <a href="formatting.c.html#LN203"><span class='Ref_to_Macro'>ADJUST_YEAR</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN31"><span class='Ref_to_Member'>tm_year</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2413"><span class='Ref_to_Parameter'>is_interval</span></a><span class='Parentheses'>) </span><span class='Operator'>- </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN2418"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>* </span><span class='Number'>1000</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN514"><span class='Ref_to_Macro'>S_THth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>))</span> 
                    <a href="formatting.c.html#LN971"><span class='Ref_to_Proto'>str_numth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN517"><span class='Ref_to_Macro'>S_TH_TYPE</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN618"><span class='Ref_to_EnumConst'>DCH_YYYY</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN594"><span class='Ref_to_EnumConst'>DCH_IYYY</span></a><span class='Operator'>: 
</span>                <a href="../../../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><span class='String'>"%0*d"</span><span class='Delimiter'>, 
</span>                        <a href="formatting.c.html#LN520"><span class='Ref_to_Macro'>S_FM</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>)</span> <span class='Operator'>? </span><span class='Number'>0</span> <span class='Operator'>: 
</span>                        <span class='Parentheses'>(</span><a href="formatting.c.html#LN203"><span class='Ref_to_Macro'>ADJUST_YEAR</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN31"><span class='Ref_to_Member'>tm_year</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2413"><span class='Ref_to_Parameter'>is_interval</span></a><span class='Parentheses'>)</span> <span class='Operator'>&GT;= </span><span class='Number'>0</span><span class='Parentheses'>)</span> <span class='Operator'>? </span><span class='Number'>4</span> <span class='Operator'>: </span><span class='Number'>5</span><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN167"><span class='Ref_to_Member'>key</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN159"><span class='Ref_to_Member'>id</span></a> <span class='Operator'>== </span><a href="formatting.c.html#LN618"><span class='Ref_to_EnumConst'>DCH_YYYY</span></a> <span class='Operator'>? 
</span>                         <a href="formatting.c.html#LN203"><span class='Ref_to_Macro'>ADJUST_YEAR</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN31"><span class='Ref_to_Member'>tm_year</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2413"><span class='Ref_to_Parameter'>is_interval</span></a><span class='Parentheses'>)</span> <span class='Operator'>: 
</span>                         <a href="formatting.c.html#LN203"><span class='Ref_to_Macro'>ADJUST_YEAR</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/timestamp.h.html#LN103"><span class='Ref_to_Proto'>date2isoyear</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN31"><span class='Ref_to_Member'>tm_year</span></a><span class='Delimiter'>, 
</span>                                                  <a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN30"><span class='Ref_to_Member'>tm_mon</span></a><span class='Delimiter'>, 
</span>                                                  <a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN29"><span class='Ref_to_Member'>tm_mday</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                     <a href="formatting.c.html#LN2413"><span class='Ref_to_Parameter'>is_interval</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN514"><span class='Ref_to_Macro'>S_THth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>))</span> 
                    <a href="formatting.c.html#LN971"><span class='Ref_to_Proto'>str_numth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN517"><span class='Ref_to_Macro'>S_TH_TYPE</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN619"><span class='Ref_to_EnumConst'>DCH_YYY</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN595"><span class='Ref_to_EnumConst'>DCH_IYY</span></a><span class='Operator'>: 
</span>                <a href="../../../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><span class='String'>"%0*d"</span><span class='Delimiter'>, 
</span>                        <a href="formatting.c.html#LN520"><span class='Ref_to_Macro'>S_FM</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>)</span> <span class='Operator'>? </span><span class='Number'>0</span> <span class='Operator'>: 
</span>                        <span class='Parentheses'>(</span><a href="formatting.c.html#LN203"><span class='Ref_to_Macro'>ADJUST_YEAR</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN31"><span class='Ref_to_Member'>tm_year</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2413"><span class='Ref_to_Parameter'>is_interval</span></a><span class='Parentheses'>)</span> <span class='Operator'>&GT;= </span><span class='Number'>0</span><span class='Parentheses'>)</span> <span class='Operator'>? </span><span class='Number'>3</span> <span class='Operator'>: </span><span class='Number'>4</span><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN167"><span class='Ref_to_Member'>key</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN159"><span class='Ref_to_Member'>id</span></a> <span class='Operator'>== </span><a href="formatting.c.html#LN619"><span class='Ref_to_EnumConst'>DCH_YYY</span></a> <span class='Operator'>? 
</span>                         <a href="formatting.c.html#LN203"><span class='Ref_to_Macro'>ADJUST_YEAR</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN31"><span class='Ref_to_Member'>tm_year</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2413"><span class='Ref_to_Parameter'>is_interval</span></a><span class='Parentheses'>)</span> <span class='Operator'>: 
</span>                         <a href="formatting.c.html#LN203"><span class='Ref_to_Macro'>ADJUST_YEAR</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/timestamp.h.html#LN103"><span class='Ref_to_Proto'>date2isoyear</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN31"><span class='Ref_to_Member'>tm_year</span></a><span class='Delimiter'>, 
</span>                                                  <a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN30"><span class='Ref_to_Member'>tm_mon</span></a><span class='Delimiter'>, 
</span>                                                  <a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN29"><span class='Ref_to_Member'>tm_mday</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                     <a href="formatting.c.html#LN2413"><span class='Ref_to_Parameter'>is_interval</span></a><span class='Parentheses'>))</span> <span class='Operator'>% </span><span class='Number'>1000</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN514"><span class='Ref_to_Macro'>S_THth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>))</span> 
                    <a href="formatting.c.html#LN971"><span class='Ref_to_Proto'>str_numth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN517"><span class='Ref_to_Macro'>S_TH_TYPE</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN620"><span class='Ref_to_EnumConst'>DCH_YY</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN596"><span class='Ref_to_EnumConst'>DCH_IY</span></a><span class='Operator'>: 
</span>                <a href="../../../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><span class='String'>"%0*d"</span><span class='Delimiter'>, 
</span>                        <a href="formatting.c.html#LN520"><span class='Ref_to_Macro'>S_FM</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>)</span> <span class='Operator'>? </span><span class='Number'>0</span> <span class='Operator'>: 
</span>                        <span class='Parentheses'>(</span><a href="formatting.c.html#LN203"><span class='Ref_to_Macro'>ADJUST_YEAR</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN31"><span class='Ref_to_Member'>tm_year</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2413"><span class='Ref_to_Parameter'>is_interval</span></a><span class='Parentheses'>)</span> <span class='Operator'>&GT;= </span><span class='Number'>0</span><span class='Parentheses'>)</span> <span class='Operator'>? </span><span class='Number'>2</span> <span class='Operator'>: </span><span class='Number'>3</span><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN167"><span class='Ref_to_Member'>key</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN159"><span class='Ref_to_Member'>id</span></a> <span class='Operator'>== </span><a href="formatting.c.html#LN620"><span class='Ref_to_EnumConst'>DCH_YY</span></a> <span class='Operator'>? 
</span>                         <a href="formatting.c.html#LN203"><span class='Ref_to_Macro'>ADJUST_YEAR</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN31"><span class='Ref_to_Member'>tm_year</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2413"><span class='Ref_to_Parameter'>is_interval</span></a><span class='Parentheses'>)</span> <span class='Operator'>: 
</span>                         <a href="formatting.c.html#LN203"><span class='Ref_to_Macro'>ADJUST_YEAR</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/timestamp.h.html#LN103"><span class='Ref_to_Proto'>date2isoyear</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN31"><span class='Ref_to_Member'>tm_year</span></a><span class='Delimiter'>, 
</span>                                                  <a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN30"><span class='Ref_to_Member'>tm_mon</span></a><span class='Delimiter'>, 
</span>                                                  <a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN29"><span class='Ref_to_Member'>tm_mday</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                     <a href="formatting.c.html#LN2413"><span class='Ref_to_Parameter'>is_interval</span></a><span class='Parentheses'>))</span> <span class='Operator'>% </span><span class='Number'>100</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN514"><span class='Ref_to_Macro'>S_THth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>))</span> 
                    <a href="formatting.c.html#LN971"><span class='Ref_to_Proto'>str_numth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN517"><span class='Ref_to_Macro'>S_TH_TYPE</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN621"><span class='Ref_to_EnumConst'>DCH_Y</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN597"><span class='Ref_to_EnumConst'>DCH_I</span></a><span class='Operator'>: 
</span>                <a href="../../../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><span class='String'>"%1d"</span><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN167"><span class='Ref_to_Member'>key</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN159"><span class='Ref_to_Member'>id</span></a> <span class='Operator'>== </span><a href="formatting.c.html#LN621"><span class='Ref_to_EnumConst'>DCH_Y</span></a> <span class='Operator'>? 
</span>                         <a href="formatting.c.html#LN203"><span class='Ref_to_Macro'>ADJUST_YEAR</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN31"><span class='Ref_to_Member'>tm_year</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2413"><span class='Ref_to_Parameter'>is_interval</span></a><span class='Parentheses'>)</span> <span class='Operator'>: 
</span>                         <a href="formatting.c.html#LN203"><span class='Ref_to_Macro'>ADJUST_YEAR</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/timestamp.h.html#LN103"><span class='Ref_to_Proto'>date2isoyear</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN31"><span class='Ref_to_Member'>tm_year</span></a><span class='Delimiter'>, 
</span>                                                  <a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN30"><span class='Ref_to_Member'>tm_mon</span></a><span class='Delimiter'>, 
</span>                                                  <a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN29"><span class='Ref_to_Member'>tm_mday</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                     <a href="formatting.c.html#LN2413"><span class='Ref_to_Parameter'>is_interval</span></a><span class='Parentheses'>))</span> <span class='Operator'>% </span><span class='Number'>10</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN514"><span class='Ref_to_Macro'>S_THth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>))</span> 
                    <a href="formatting.c.html#LN971"><span class='Ref_to_Proto'>str_numth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN517"><span class='Ref_to_Macro'>S_TH_TYPE</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN610"><span class='Ref_to_EnumConst'>DCH_RM</span></a><span class='Operator'>: 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN30"><span class='Ref_to_Member'>tm_mon</span></a><span class='Parentheses'>) 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <a href="../../../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><span class='String'>"%*s"</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN520"><span class='Ref_to_Macro'>S_FM</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='Number'>0</span> <span class='Operator'>: -</span><span class='Number'>4</span><span class='Delimiter'>, 
</span>                        <a href="formatting.c.html#LN261"><span class='Ref_to_Global_Var'>rm_months_upper</span></a><span class='Delimiter'>[</span><a href="../../../include/datatype/timestamp.h.html#LN68"><span class='Ref_to_Const'>MONTHS_PER_YEAR</span></a> <span class='Operator'>- </span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN30"><span class='Ref_to_Member'>tm_mon</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN654"><span class='Ref_to_EnumConst'>DCH_rm</span></a><span class='Operator'>: 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN30"><span class='Ref_to_Member'>tm_mon</span></a><span class='Parentheses'>) 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <a href="../../../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><span class='String'>"%*s"</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN520"><span class='Ref_to_Macro'>S_FM</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='Number'>0</span> <span class='Operator'>: -</span><span class='Number'>4</span><span class='Delimiter'>, 
</span>                        <a href="formatting.c.html#LN264"><span class='Ref_to_Global_Var'>rm_months_lower</span></a><span class='Delimiter'>[</span><a href="../../../include/datatype/timestamp.h.html#LN68"><span class='Ref_to_Const'>MONTHS_PER_YEAR</span></a> <span class='Operator'>- </span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN30"><span class='Ref_to_Member'>tm_mon</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN616"><span class='Ref_to_EnumConst'>DCH_W</span></a><span class='Operator'>: 
</span>                <a href="../../../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><span class='String'>"%d"</span><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN29"><span class='Ref_to_Member'>tm_mday</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>) </span><span class='Operator'>/ </span><span class='Number'>7</span> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN514"><span class='Ref_to_Macro'>S_THth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>))</span> 
                    <a href="formatting.c.html#LN971"><span class='Ref_to_Proto'>str_numth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN517"><span class='Ref_to_Macro'>S_TH_TYPE</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN598"><span class='Ref_to_EnumConst'>DCH_J</span></a><span class='Operator'>: 
</span>                <a href="../../../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><span class='String'>"%d"</span><span class='Delimiter'>, </span><a href="datetime.c.html#LN290"><span class='Ref_to_Func'>date2j</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN31"><span class='Ref_to_Member'>tm_year</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN30"><span class='Ref_to_Member'>tm_mon</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2417"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN29"><span class='Ref_to_Member'>tm_mday</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN514"><span class='Ref_to_Macro'>S_THth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>))</span> 
                    <a href="formatting.c.html#LN971"><span class='Ref_to_Proto'>str_numth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN517"><span class='Ref_to_Macro'>S_TH_TYPE</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2415"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch n-&GT;key-&GT;id &raquo; </span> 
    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for n=node;n-&GT;type!=NODE_... &raquo; </span> 
 
    <span class='Operator'>*</span><a href="formatting.c.html#LN2416"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end DCH_to_char &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * Process a string as denoted by a list of FormatNodes. 
 * The TmFromChar struct pointed to by 'out' is populated with the results. 
 * 
 * Note: we currently don't have any to_interval() function, so there 
 * is no need here for INVALID_FOR_INTERVAL checks. 
 * ---------- 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN2980"></a><span class='Declare_Function'>DCH_from_char</span><span class='Parentheses'>(</span><a href="formatting.c.html#LN164"><span class='Ref_to_Struct'>FormatNode</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>in</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN407"><span class='Ref_to_Typedef'>TmFromChar</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>out</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2982"></a>    <a href="formatting.c.html#LN164"><span class='Ref_to_Struct'>FormatNode</span></a> <span class='Operator'>*</span><span class='Declare_Local'>n</span><span class='Delimiter'>; 
</span><a name="LN2983"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>s</span><span class='Delimiter'>; 
</span><a name="LN2984"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>len</span><span class='Delimiter'>, 
</span><a name="LN2985"></a>                <span class='Declare_Local'>value</span><span class='Delimiter'>; 
</span><a name="LN2986"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>fx_mode</span> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN2980"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2983"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN2980"><span class='Ref_to_Parameter'>in</span></a><span class='Delimiter'>; </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN166"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>!= </span><a href="formatting.c.html#LN172"><span class='Ref_to_Const'>NODE_TYPE_END</span></a> <span class='Operator'>&& *</span><a href="formatting.c.html#LN2983"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>!= </span><span class='String'>'\0'</span><span class='Delimiter'>; </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN166"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>!= </span><a href="formatting.c.html#LN173"><span class='Ref_to_Const'>NODE_TYPE_ACTION</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * Separator, so consume one character from input string.  Notice 
             * we don't insist that the consumed character match the format's 
             * character. 
             */ 
</span>            <a href="formatting.c.html#LN2983"><span class='Ref_To_Local'>s</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Comment_Multi_Line'>/* Ignore spaces before fields when not in FX (fixed width) mode */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="formatting.c.html#LN2986"><span class='Ref_To_Local'>fx_mode</span></a> <span class='Operator'>&& </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN167"><span class='Ref_to_Member'>key</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN159"><span class='Ref_to_Member'>id</span></a> <span class='Operator'>!= </span><a href="formatting.c.html#LN587"><span class='Ref_to_EnumConst'>DCH_FX</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>while</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="formatting.c.html#LN2983"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>!= </span><span class='String'>'\0'</span> <span class='Operator'>&& </span>isspace<span class='Parentheses'>((</span><span class='Keyword'>unsigned char</span><span class='Parentheses'>) </span><span class='Operator'>*</span><a href="formatting.c.html#LN2983"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>))</span> 
                <a href="formatting.c.html#LN2983"><span class='Ref_To_Local'>s</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <a href="formatting.c.html#LN974"><span class='Ref_to_Proto'>from_char_set_mode</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2980"><span class='Ref_to_Parameter'>out</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN167"><span class='Ref_to_Member'>key</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN161"><span class='Ref_to_Member'>date_mode</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN167"><span class='Ref_to_Member'>key</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN159"><span class='Ref_to_Member'>id</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN587"><span class='Ref_to_EnumConst'>DCH_FX</span></a><span class='Operator'>: 
</span>                <a href="formatting.c.html#LN2986"><span class='Ref_To_Local'>fx_mode</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN574"><span class='Ref_to_EnumConst'>DCH_A_M</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN607"><span class='Ref_to_EnumConst'>DCH_P_M</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN623"><span class='Ref_to_EnumConst'>DCH_a_m</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN651"><span class='Ref_to_EnumConst'>DCH_p_m</span></a><span class='Operator'>: 
</span>                <a href="formatting.c.html#LN979"><span class='Ref_to_Proto'>from_char_seq_search</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Keyword'>value</span><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN2983"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN253"><span class='Ref_to_Global_Var'>ampm_strings_long</span></a><span class='Delimiter'>, 
</span>                                     <a href="formatting.c.html#LN287"><span class='Ref_to_Const'>ALL_UPPER</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN167"><span class='Ref_to_Member'>key</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN158"><span class='Ref_to_Member'>len</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN975"><span class='Ref_to_Proto'>from_char_set_int</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN2980"><span class='Ref_to_Parameter'>out</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN411"><span class='Ref_to_Member'>pm</span></a><span class='Delimiter'>, </span><span class='Keyword'>value </span><span class='Operator'>% </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2980"><span class='Ref_to_Parameter'>out</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN428"><span class='Ref_to_Member'>clock</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN180"><span class='Ref_to_Const'>CLOCK_12_HOUR</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN576"><span class='Ref_to_EnumConst'>DCH_AM</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN608"><span class='Ref_to_EnumConst'>DCH_PM</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN625"><span class='Ref_to_EnumConst'>DCH_am</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN652"><span class='Ref_to_EnumConst'>DCH_pm</span></a><span class='Operator'>: 
</span>                <a href="formatting.c.html#LN979"><span class='Ref_to_Proto'>from_char_seq_search</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Keyword'>value</span><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN2983"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN252"><span class='Ref_to_Global_Var'>ampm_strings</span></a><span class='Delimiter'>, 
</span>                                     <a href="formatting.c.html#LN287"><span class='Ref_to_Const'>ALL_UPPER</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN167"><span class='Ref_to_Member'>key</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN158"><span class='Ref_to_Member'>len</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN975"><span class='Ref_to_Proto'>from_char_set_int</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN2980"><span class='Ref_to_Parameter'>out</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN411"><span class='Ref_to_Member'>pm</span></a><span class='Delimiter'>, </span><span class='Keyword'>value </span><span class='Operator'>% </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2980"><span class='Ref_to_Parameter'>out</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN428"><span class='Ref_to_Member'>clock</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN180"><span class='Ref_to_Const'>CLOCK_12_HOUR</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN590"><span class='Ref_to_EnumConst'>DCH_HH</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN589"><span class='Ref_to_EnumConst'>DCH_HH12</span></a><span class='Operator'>: 
</span>                <a href="formatting.c.html#LN976"><span class='Ref_to_Proto'>from_char_parse_int_len</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN2980"><span class='Ref_to_Parameter'>out</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN410"><span class='Ref_to_Member'>hh</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN2983"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2980"><span class='Ref_to_Parameter'>out</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN428"><span class='Ref_to_Member'>clock</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN180"><span class='Ref_to_Const'>CLOCK_12_HOUR</span></a><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2027"><span class='Ref_to_Macro'>SKIP_THth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2983"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN588"><span class='Ref_to_EnumConst'>DCH_HH24</span></a><span class='Operator'>: 
</span>                <a href="formatting.c.html#LN976"><span class='Ref_to_Proto'>from_char_parse_int_len</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN2980"><span class='Ref_to_Parameter'>out</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN410"><span class='Ref_to_Member'>hh</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN2983"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2027"><span class='Ref_to_Macro'>SKIP_THth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2983"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN599"><span class='Ref_to_EnumConst'>DCH_MI</span></a><span class='Operator'>: 
</span>                <a href="formatting.c.html#LN977"><span class='Ref_to_Proto'>from_char_parse_int</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN2980"><span class='Ref_to_Parameter'>out</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN412"><span class='Ref_to_Member'>mi</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN2983"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2027"><span class='Ref_to_Macro'>SKIP_THth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2983"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN612"><span class='Ref_to_EnumConst'>DCH_SS</span></a><span class='Operator'>: 
</span>                <a href="formatting.c.html#LN977"><span class='Ref_to_Proto'>from_char_parse_int</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN2980"><span class='Ref_to_Parameter'>out</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN413"><span class='Ref_to_Member'>ss</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN2983"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2027"><span class='Ref_to_Macro'>SKIP_THth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2983"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN603"><span class='Ref_to_EnumConst'>DCH_MS</span></a><span class='Operator'>:</span>        <span class='Comment_Single_Line'>/* millisecond */ 
</span>                <a href="formatting.c.html#LN2984"><span class='Ref_To_Local'>len</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN976"><span class='Ref_to_Proto'>from_char_parse_int_len</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN2980"><span class='Ref_to_Parameter'>out</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN419"><span class='Ref_to_Member'>ms</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN2983"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><span class='Number'>3</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * 25 is 0.25 and 250 is 0.25 too; 025 is 0.025 and not 0.25 
                 */ 
</span>                <a href="formatting.c.html#LN2980"><span class='Ref_to_Parameter'>out</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN419"><span class='Ref_to_Member'>ms</span></a> <span class='Operator'>*= </span><a href="formatting.c.html#LN2984"><span class='Ref_To_Local'>len</span></a> <span class='Operator'>== </span><span class='Number'>1</span> <span class='Operator'>? </span><span class='Number'>100</span> <span class='Operator'>: 
</span>                    <a href="formatting.c.html#LN2984"><span class='Ref_To_Local'>len</span></a> <span class='Operator'>== </span><span class='Number'>2</span> <span class='Operator'>? </span><span class='Number'>10</span> <span class='Operator'>: </span><span class='Number'>1</span><span class='Delimiter'>; 
</span> 
                <a href="formatting.c.html#LN2027"><span class='Ref_to_Macro'>SKIP_THth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2983"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN614"><span class='Ref_to_EnumConst'>DCH_US</span></a><span class='Operator'>:</span>        <span class='Comment_Single_Line'>/* microsecond */ 
</span>                <a href="formatting.c.html#LN2984"><span class='Ref_To_Local'>len</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN976"><span class='Ref_to_Proto'>from_char_parse_int_len</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN2980"><span class='Ref_to_Parameter'>out</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN426"><span class='Ref_to_Member'>us</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN2983"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><span class='Number'>6</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <a href="formatting.c.html#LN2980"><span class='Ref_to_Parameter'>out</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN426"><span class='Ref_to_Member'>us</span></a> <span class='Operator'>*= </span><a href="formatting.c.html#LN2984"><span class='Ref_To_Local'>len</span></a> <span class='Operator'>== </span><span class='Number'>1</span> <span class='Operator'>? </span><span class='Number'>100000</span> <span class='Operator'>: 
</span>                    <a href="formatting.c.html#LN2984"><span class='Ref_To_Local'>len</span></a> <span class='Operator'>== </span><span class='Number'>2</span> <span class='Operator'>? </span><span class='Number'>10000</span> <span class='Operator'>: 
</span>                    <a href="formatting.c.html#LN2984"><span class='Ref_To_Local'>len</span></a> <span class='Operator'>== </span><span class='Number'>3</span> <span class='Operator'>? </span><span class='Number'>1000</span> <span class='Operator'>: 
</span>                    <a href="formatting.c.html#LN2984"><span class='Ref_To_Local'>len</span></a> <span class='Operator'>== </span><span class='Number'>4</span> <span class='Operator'>? </span><span class='Number'>100</span> <span class='Operator'>: 
</span>                    <a href="formatting.c.html#LN2984"><span class='Ref_To_Local'>len</span></a> <span class='Operator'>== </span><span class='Number'>5</span> <span class='Operator'>? </span><span class='Number'>10</span> <span class='Operator'>: </span><span class='Number'>1</span><span class='Delimiter'>; 
</span> 
                <a href="formatting.c.html#LN2027"><span class='Ref_to_Macro'>SKIP_THth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2983"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN611"><span class='Ref_to_EnumConst'>DCH_SSSS</span></a><span class='Operator'>: 
</span>                <a href="formatting.c.html#LN977"><span class='Ref_to_Proto'>from_char_parse_int</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN2980"><span class='Ref_to_Parameter'>out</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN414"><span class='Ref_to_Member'>ssss</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN2983"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2027"><span class='Ref_to_Macro'>SKIP_THth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2983"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN657"><span class='Ref_to_EnumConst'>DCH_tz</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN613"><span class='Ref_to_EnumConst'>DCH_TZ</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN606"><span class='Ref_to_EnumConst'>DCH_OF</span></a><span class='Operator'>: 
</span>                <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_FEATURE_NOT_SUPPORTED<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"formatting field \"%s\" is only supported in to_char"</span><span class='Delimiter'>, 
</span>                       <a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN167"><span class='Ref_to_Member'>key</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN157"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN573"><span class='Ref_to_EnumConst'>DCH_A_D</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN577"><span class='Ref_to_EnumConst'>DCH_B_C</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN622"><span class='Ref_to_EnumConst'>DCH_a_d</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN626"><span class='Ref_to_EnumConst'>DCH_b_c</span></a><span class='Operator'>: 
</span>                <a href="formatting.c.html#LN979"><span class='Ref_to_Proto'>from_char_seq_search</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Keyword'>value</span><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN2983"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN226"><span class='Ref_to_Global_Var'>adbc_strings_long</span></a><span class='Delimiter'>, 
</span>                                     <a href="formatting.c.html#LN287"><span class='Ref_to_Const'>ALL_UPPER</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN167"><span class='Ref_to_Member'>key</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN158"><span class='Ref_to_Member'>len</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN975"><span class='Ref_to_Proto'>from_char_set_int</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN2980"><span class='Ref_to_Parameter'>out</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN421"><span class='Ref_to_Member'>bc</span></a><span class='Delimiter'>, </span><span class='Keyword'>value </span><span class='Operator'>% </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN575"><span class='Ref_to_EnumConst'>DCH_AD</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN578"><span class='Ref_to_EnumConst'>DCH_BC</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN624"><span class='Ref_to_EnumConst'>DCH_ad</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN627"><span class='Ref_to_EnumConst'>DCH_bc</span></a><span class='Operator'>: 
</span>                <a href="formatting.c.html#LN979"><span class='Ref_to_Proto'>from_char_seq_search</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Keyword'>value</span><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN2983"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN225"><span class='Ref_to_Global_Var'>adbc_strings</span></a><span class='Delimiter'>, 
</span>                                     <a href="formatting.c.html#LN287"><span class='Ref_to_Const'>ALL_UPPER</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN167"><span class='Ref_to_Member'>key</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN158"><span class='Ref_to_Member'>len</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN975"><span class='Ref_to_Proto'>from_char_set_int</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN2980"><span class='Ref_to_Parameter'>out</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN421"><span class='Ref_to_Member'>bc</span></a><span class='Delimiter'>, </span><span class='Keyword'>value </span><span class='Operator'>% </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN601"><span class='Ref_to_EnumConst'>DCH_MONTH</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN604"><span class='Ref_to_EnumConst'>DCH_Month</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN648"><span class='Ref_to_EnumConst'>DCH_month</span></a><span class='Operator'>: 
</span>                <a href="formatting.c.html#LN979"><span class='Ref_to_Proto'>from_char_seq_search</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Keyword'>value</span><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN2983"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN187"><span class='Ref_to_Global_Var'>months_full</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN286"><span class='Ref_to_Const'>ONE_UPPER</span></a><span class='Delimiter'>, 
</span>                                     <a href="formatting.c.html#LN292"><span class='Ref_to_Const'>MAX_MONTH_LEN</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN975"><span class='Ref_to_Proto'>from_char_set_int</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN2980"><span class='Ref_to_Parameter'>out</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN418"><span class='Ref_to_Member'>mm</span></a><span class='Delimiter'>, </span><span class='Keyword'>value </span><span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN602"><span class='Ref_to_EnumConst'>DCH_MON</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN605"><span class='Ref_to_EnumConst'>DCH_Mon</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN649"><span class='Ref_to_EnumConst'>DCH_mon</span></a><span class='Operator'>: 
</span>                <a href="formatting.c.html#LN979"><span class='Ref_to_Proto'>from_char_seq_search</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Keyword'>value</span><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN2983"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="datetime.c.html#LN65"><span class='Ref_to_Global_Var'>months</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN286"><span class='Ref_to_Const'>ONE_UPPER</span></a><span class='Delimiter'>, 
</span>                                     <a href="formatting.c.html#LN293"><span class='Ref_to_Const'>MAX_MON_LEN</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN975"><span class='Ref_to_Proto'>from_char_set_int</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN2980"><span class='Ref_to_Parameter'>out</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN418"><span class='Ref_to_Member'>mm</span></a><span class='Delimiter'>, </span><span class='Keyword'>value </span><span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN600"><span class='Ref_to_EnumConst'>DCH_MM</span></a><span class='Operator'>: 
</span>                <a href="formatting.c.html#LN977"><span class='Ref_to_Proto'>from_char_parse_int</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN2980"><span class='Ref_to_Parameter'>out</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN418"><span class='Ref_to_Member'>mm</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN2983"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2027"><span class='Ref_to_Macro'>SKIP_THth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2983"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN580"><span class='Ref_to_EnumConst'>DCH_DAY</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN584"><span class='Ref_to_EnumConst'>DCH_Day</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN629"><span class='Ref_to_EnumConst'>DCH_day</span></a><span class='Operator'>: 
</span>                <a href="formatting.c.html#LN979"><span class='Ref_to_Proto'>from_char_seq_search</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Keyword'>value</span><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN2983"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="datetime.c.html#LN68"><span class='Ref_to_Global_Var'>days</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN286"><span class='Ref_to_Const'>ONE_UPPER</span></a><span class='Delimiter'>, 
</span>                                     <a href="formatting.c.html#LN294"><span class='Ref_to_Const'>MAX_DAY_LEN</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN975"><span class='Ref_to_Proto'>from_char_set_int</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN2980"><span class='Ref_to_Parameter'>out</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN415"><span class='Ref_to_Member'>d</span></a><span class='Delimiter'>, </span><span class='Keyword'>value</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2980"><span class='Ref_to_Parameter'>out</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN415"><span class='Ref_to_Member'>d</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN583"><span class='Ref_to_EnumConst'>DCH_DY</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN585"><span class='Ref_to_EnumConst'>DCH_Dy</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN632"><span class='Ref_to_EnumConst'>DCH_dy</span></a><span class='Operator'>: 
</span>                <a href="formatting.c.html#LN979"><span class='Ref_to_Proto'>from_char_seq_search</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Keyword'>value</span><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN2983"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="datetime.c.html#LN68"><span class='Ref_to_Global_Var'>days</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN286"><span class='Ref_to_Const'>ONE_UPPER</span></a><span class='Delimiter'>, 
</span>                                     <a href="formatting.c.html#LN295"><span class='Ref_to_Const'>MAX_DY_LEN</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN975"><span class='Ref_to_Proto'>from_char_set_int</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN2980"><span class='Ref_to_Parameter'>out</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN415"><span class='Ref_to_Member'>d</span></a><span class='Delimiter'>, </span><span class='Keyword'>value</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2980"><span class='Ref_to_Parameter'>out</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN415"><span class='Ref_to_Member'>d</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN581"><span class='Ref_to_EnumConst'>DCH_DDD</span></a><span class='Operator'>: 
</span>                <a href="formatting.c.html#LN977"><span class='Ref_to_Proto'>from_char_parse_int</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN2980"><span class='Ref_to_Parameter'>out</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN417"><span class='Ref_to_Member'>ddd</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN2983"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2027"><span class='Ref_to_Macro'>SKIP_THth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2983"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN591"><span class='Ref_to_EnumConst'>DCH_IDDD</span></a><span class='Operator'>: 
</span>                <a href="formatting.c.html#LN976"><span class='Ref_to_Proto'>from_char_parse_int_len</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN2980"><span class='Ref_to_Parameter'>out</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN417"><span class='Ref_to_Member'>ddd</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN2983"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><span class='Number'>3</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2027"><span class='Ref_to_Macro'>SKIP_THth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2983"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN582"><span class='Ref_to_EnumConst'>DCH_DD</span></a><span class='Operator'>: 
</span>                <a href="formatting.c.html#LN977"><span class='Ref_to_Proto'>from_char_parse_int</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN2980"><span class='Ref_to_Parameter'>out</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN416"><span class='Ref_to_Member'>dd</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN2983"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2027"><span class='Ref_to_Macro'>SKIP_THth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2983"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN586"><span class='Ref_to_EnumConst'>DCH_D</span></a><span class='Operator'>: 
</span>                <a href="formatting.c.html#LN977"><span class='Ref_to_Proto'>from_char_parse_int</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN2980"><span class='Ref_to_Parameter'>out</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN415"><span class='Ref_to_Member'>d</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN2983"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2027"><span class='Ref_to_Macro'>SKIP_THth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2983"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN592"><span class='Ref_to_EnumConst'>DCH_ID</span></a><span class='Operator'>: 
</span>                <a href="formatting.c.html#LN976"><span class='Ref_to_Proto'>from_char_parse_int_len</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN2980"><span class='Ref_to_Parameter'>out</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN415"><span class='Ref_to_Member'>d</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN2983"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Comment_Multi_Line'>/* Shift numbering to match Gregorian where Sunday = 1 */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>++</span><a href="formatting.c.html#LN2980"><span class='Ref_to_Parameter'>out</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN415"><span class='Ref_to_Member'>d</span></a> <span class='Operator'>&GT; </span><span class='Number'>7</span><span class='Parentheses'>) 
</span>                    <a href="formatting.c.html#LN2980"><span class='Ref_to_Parameter'>out</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN415"><span class='Ref_to_Member'>d</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2027"><span class='Ref_to_Macro'>SKIP_THth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2983"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN615"><span class='Ref_to_EnumConst'>DCH_WW</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN593"><span class='Ref_to_EnumConst'>DCH_IW</span></a><span class='Operator'>: 
</span>                <a href="formatting.c.html#LN977"><span class='Ref_to_Proto'>from_char_parse_int</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN2980"><span class='Ref_to_Parameter'>out</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN422"><span class='Ref_to_Member'>ww</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN2983"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2027"><span class='Ref_to_Macro'>SKIP_THth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2983"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN609"><span class='Ref_to_EnumConst'>DCH_Q</span></a><span class='Operator'>: 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * We ignore 'Q' when converting to date because it is unclear 
                 * which date in the quarter to use, and some people specify 
                 * both quarter and month, so if it was honored it might 
                 * conflict with the supplied month. That is also why we don't 
                 * throw an error. 
                 * 
                 * We still parse the source string for an integer, but it 
                 * isn't stored anywhere in 'out'. 
                 */ 
</span>                <a href="formatting.c.html#LN977"><span class='Ref_to_Proto'>from_char_parse_int</span></a><span class='Parentheses'>((</span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Parentheses'>) </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN2983"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2027"><span class='Ref_to_Macro'>SKIP_THth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2983"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN579"><span class='Ref_to_EnumConst'>DCH_CC</span></a><span class='Operator'>: 
</span>                <a href="formatting.c.html#LN977"><span class='Ref_to_Proto'>from_char_parse_int</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN2980"><span class='Ref_to_Parameter'>out</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN424"><span class='Ref_to_Member'>cc</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN2983"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2027"><span class='Ref_to_Macro'>SKIP_THth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2983"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN617"><span class='Ref_to_EnumConst'>DCH_Y_YYY</span></a><span class='Operator'>: 
</span>                <span class='Delimiter'>{ 
</span><a name="LN3184"></a>                    <span class='Keyword'>int</span>         <span class='Declare_Local'>matched</span><span class='Delimiter'>, 
</span><a name="LN3185"></a>                                <span class='Declare_Local'>years</span><span class='Delimiter'>, 
</span><a name="LN3186"></a>                                <span class='Declare_Local'>millennia</span><span class='Delimiter'>, 
</span><a name="LN3187"></a>                                <span class='Declare_Local'>nch</span><span class='Delimiter'>; 
</span> 
                    <a href="formatting.c.html#LN3184"><span class='Ref_To_Local'>matched</span></a> <span class='Operator'>= </span>sscanf<span class='Parentheses'>(</span><a href="formatting.c.html#LN2983"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><span class='String'>"%d,%03d%n"</span><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN3186"><span class='Ref_To_Local'>millennia</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN3185"><span class='Ref_To_Local'>years</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN3187"><span class='Ref_To_Local'>nch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN3184"><span class='Ref_To_Local'>matched</span></a> <span class='Operator'>&LT; </span><span class='Number'>2</span><span class='Parentheses'>) 
</span>                        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INVALID_DATETIME_FORMAT<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                              <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"invalid input string for \"Y,YYY\""</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                    <a href="formatting.c.html#LN3185"><span class='Ref_To_Local'>years</span></a> <span class='Operator'>+= </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN3186"><span class='Ref_To_Local'>millennia</span></a> <span class='Operator'>* </span><span class='Number'>1000</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="formatting.c.html#LN975"><span class='Ref_to_Proto'>from_char_set_int</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN2980"><span class='Ref_to_Parameter'>out</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN420"><span class='Ref_to_Member'>year</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN3185"><span class='Ref_To_Local'>years</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="formatting.c.html#LN2980"><span class='Ref_to_Parameter'>out</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN427"><span class='Ref_to_Member'>yysz</span></a> <span class='Operator'>= </span><span class='Number'>4</span><span class='Delimiter'>; 
</span>                    <a href="formatting.c.html#LN2983"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>+= </span><a href="formatting.c.html#LN3187"><span class='Ref_To_Local'>nch</span></a><span class='Delimiter'>; 
</span>                    <a href="formatting.c.html#LN2027"><span class='Ref_to_Macro'>SKIP_THth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2983"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN618"><span class='Ref_to_EnumConst'>DCH_YYYY</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN594"><span class='Ref_to_EnumConst'>DCH_IYYY</span></a><span class='Operator'>: 
</span>                <a href="formatting.c.html#LN977"><span class='Ref_to_Proto'>from_char_parse_int</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN2980"><span class='Ref_to_Parameter'>out</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN420"><span class='Ref_to_Member'>year</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN2983"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2980"><span class='Ref_to_Parameter'>out</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN427"><span class='Ref_to_Member'>yysz</span></a> <span class='Operator'>= </span><span class='Number'>4</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2027"><span class='Ref_to_Macro'>SKIP_THth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2983"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN619"><span class='Ref_to_EnumConst'>DCH_YYY</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN595"><span class='Ref_to_EnumConst'>DCH_IYY</span></a><span class='Operator'>: 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN977"><span class='Ref_to_Proto'>from_char_parse_int</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN2980"><span class='Ref_to_Parameter'>out</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN420"><span class='Ref_to_Member'>year</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN2983"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Parentheses'>) </span><span class='Operator'>&LT; </span><span class='Number'>4</span><span class='Parentheses'>)</span> 
                    <a href="formatting.c.html#LN2980"><span class='Ref_to_Parameter'>out</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN420"><span class='Ref_to_Member'>year</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN972"><span class='Ref_to_Proto'>adjust_partial_year_to_2020</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2980"><span class='Ref_to_Parameter'>out</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN420"><span class='Ref_to_Member'>year</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2980"><span class='Ref_to_Parameter'>out</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN427"><span class='Ref_to_Member'>yysz</span></a> <span class='Operator'>= </span><span class='Number'>3</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2027"><span class='Ref_to_Macro'>SKIP_THth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2983"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN620"><span class='Ref_to_EnumConst'>DCH_YY</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN596"><span class='Ref_to_EnumConst'>DCH_IY</span></a><span class='Operator'>: 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN977"><span class='Ref_to_Proto'>from_char_parse_int</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN2980"><span class='Ref_to_Parameter'>out</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN420"><span class='Ref_to_Member'>year</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN2983"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Parentheses'>) </span><span class='Operator'>&LT; </span><span class='Number'>4</span><span class='Parentheses'>)</span> 
                    <a href="formatting.c.html#LN2980"><span class='Ref_to_Parameter'>out</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN420"><span class='Ref_to_Member'>year</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN972"><span class='Ref_to_Proto'>adjust_partial_year_to_2020</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2980"><span class='Ref_to_Parameter'>out</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN420"><span class='Ref_to_Member'>year</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2980"><span class='Ref_to_Parameter'>out</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN427"><span class='Ref_to_Member'>yysz</span></a> <span class='Operator'>= </span><span class='Number'>2</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2027"><span class='Ref_to_Macro'>SKIP_THth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2983"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN621"><span class='Ref_to_EnumConst'>DCH_Y</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN597"><span class='Ref_to_EnumConst'>DCH_I</span></a><span class='Operator'>: 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN977"><span class='Ref_to_Proto'>from_char_parse_int</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN2980"><span class='Ref_to_Parameter'>out</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN420"><span class='Ref_to_Member'>year</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN2983"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Parentheses'>) </span><span class='Operator'>&LT; </span><span class='Number'>4</span><span class='Parentheses'>)</span> 
                    <a href="formatting.c.html#LN2980"><span class='Ref_to_Parameter'>out</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN420"><span class='Ref_to_Member'>year</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN972"><span class='Ref_to_Proto'>adjust_partial_year_to_2020</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2980"><span class='Ref_to_Parameter'>out</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN420"><span class='Ref_to_Member'>year</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2980"><span class='Ref_to_Parameter'>out</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN427"><span class='Ref_to_Member'>yysz</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2027"><span class='Ref_to_Macro'>SKIP_THth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2983"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN610"><span class='Ref_to_EnumConst'>DCH_RM</span></a><span class='Operator'>: 
</span>                <a href="formatting.c.html#LN979"><span class='Ref_to_Proto'>from_char_seq_search</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Keyword'>value</span><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN2983"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN261"><span class='Ref_to_Global_Var'>rm_months_upper</span></a><span class='Delimiter'>, 
</span>                                     <a href="formatting.c.html#LN287"><span class='Ref_to_Const'>ALL_UPPER</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN296"><span class='Ref_to_Const'>MAX_RM_LEN</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN975"><span class='Ref_to_Proto'>from_char_set_int</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN2980"><span class='Ref_to_Parameter'>out</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN418"><span class='Ref_to_Member'>mm</span></a><span class='Delimiter'>, </span><a href="../../../include/datatype/timestamp.h.html#LN68"><span class='Ref_to_Const'>MONTHS_PER_YEAR</span></a> <span class='Operator'>- </span><span class='Keyword'>value</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN654"><span class='Ref_to_EnumConst'>DCH_rm</span></a><span class='Operator'>: 
</span>                <a href="formatting.c.html#LN979"><span class='Ref_to_Proto'>from_char_seq_search</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Keyword'>value</span><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN2983"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN264"><span class='Ref_to_Global_Var'>rm_months_lower</span></a><span class='Delimiter'>, 
</span>                                     <a href="formatting.c.html#LN288"><span class='Ref_to_Const'>ALL_LOWER</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN296"><span class='Ref_to_Const'>MAX_RM_LEN</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN975"><span class='Ref_to_Proto'>from_char_set_int</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN2980"><span class='Ref_to_Parameter'>out</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN418"><span class='Ref_to_Member'>mm</span></a><span class='Delimiter'>, </span><a href="../../../include/datatype/timestamp.h.html#LN68"><span class='Ref_to_Const'>MONTHS_PER_YEAR</span></a> <span class='Operator'>- </span><span class='Keyword'>value</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN616"><span class='Ref_to_EnumConst'>DCH_W</span></a><span class='Operator'>: 
</span>                <a href="formatting.c.html#LN977"><span class='Ref_to_Proto'>from_char_parse_int</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN2980"><span class='Ref_to_Parameter'>out</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN423"><span class='Ref_to_Member'>w</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN2983"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2027"><span class='Ref_to_Macro'>SKIP_THth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2983"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="formatting.c.html#LN598"><span class='Ref_to_EnumConst'>DCH_J</span></a><span class='Operator'>: 
</span>                <a href="formatting.c.html#LN977"><span class='Ref_to_Proto'>from_char_parse_int</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN2980"><span class='Ref_to_Parameter'>out</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN425"><span class='Ref_to_Member'>j</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN2983"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN2027"><span class='Ref_to_Macro'>SKIP_THth</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN2983"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2982"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN169"><span class='Ref_to_Member'>suffix</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch n-&GT;key-&GT;id &raquo; </span> 
    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for n=node,s=in;n-&GT;type!=... &raquo; </span> 
<span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end DCH_from_char &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* select a DCHCacheEntry to hold the given format picture */ 
</span><span class='Keyword'>static </span><a href="formatting.c.html#LN376"><span class='Ref_to_Typedef'>DCHCacheEntry</span></a> <span class='Operator'>* 
</span><a name="LN3252"></a><span class='Declare_Function'>DCH_cache_getnew</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>str</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3254"></a>    <a href="formatting.c.html#LN376"><span class='Ref_to_Typedef'>DCHCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>ent</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* counter overflow check - paranoia? */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN396"><span class='Ref_to_Global_Var'>DCHCounter</span></a> <span class='Operator'>&GT;= </span><span class='Parentheses'>(</span>INT_MAX <span class='Operator'>- </span><a href="formatting.c.html#LN374"><span class='Ref_to_Const'>DCH_CACHE_ENTRIES</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="formatting.c.html#LN396"><span class='Ref_to_Global_Var'>DCHCounter</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN3254"><span class='Ref_To_Local'>ent</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN394"><span class='Ref_to_Global_Var'>DCHCache</span></a><span class='Delimiter'>; </span><a href="formatting.c.html#LN3254"><span class='Ref_To_Local'>ent</span></a> <span class='Operator'>&LT; </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN394"><span class='Ref_to_Global_Var'>DCHCache</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN374"><span class='Ref_to_Const'>DCH_CACHE_ENTRIES</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; </span><a href="formatting.c.html#LN3254"><span class='Ref_To_Local'>ent</span></a><span class='Operator'>++</span><span class='Parentheses'>)</span> 
            <a href="formatting.c.html#LN3254"><span class='Ref_To_Local'>ent</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN381"><span class='Ref_to_Member'>age</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Operator'>++</span><a href="formatting.c.html#LN396"><span class='Ref_to_Global_Var'>DCHCounter</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If cache is full, remove oldest entry (or recycle first not-valid one) 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN395"><span class='Ref_to_Global_Var'>n_DCHCache</span></a> <span class='Operator'>&GT;= </span><a href="formatting.c.html#LN374"><span class='Ref_to_Const'>DCH_CACHE_ENTRIES</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN3270"></a>        <a href="formatting.c.html#LN376"><span class='Ref_to_Typedef'>DCHCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>old</span> <span class='Operator'>= </span><a href="formatting.c.html#LN394"><span class='Ref_to_Global_Var'>DCHCache</span></a> <span class='Operator'>+ </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
<span class='Directive'>#ifdef</span> DEBUG_TO_FROM_CHAR 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN62"><span class='Ref_to_Const'>DEBUG_elog_output</span></a><span class='Delimiter'>, </span><span class='String'>"cache is full (%d)"</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN395"><span class='Ref_to_Global_Var'>n_DCHCache</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN3270"><span class='Ref_To_Local'>old</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN380"><span class='Ref_to_Member'>valid</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN3254"><span class='Ref_To_Local'>ent</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN394"><span class='Ref_to_Global_Var'>DCHCache</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; </span><a href="formatting.c.html#LN3254"><span class='Ref_To_Local'>ent</span></a> <span class='Operator'>&LT; </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN394"><span class='Ref_to_Global_Var'>DCHCache</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN374"><span class='Ref_to_Const'>DCH_CACHE_ENTRIES</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; </span><a href="formatting.c.html#LN3254"><span class='Ref_To_Local'>ent</span></a><span class='Operator'>++</span><span class='Parentheses'>)</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="formatting.c.html#LN3254"><span class='Ref_To_Local'>ent</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN380"><span class='Ref_to_Member'>valid</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <a href="formatting.c.html#LN3270"><span class='Ref_To_Local'>old</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN3254"><span class='Ref_To_Local'>ent</span></a><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN3254"><span class='Ref_To_Local'>ent</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN381"><span class='Ref_to_Member'>age</span></a> <span class='Operator'>&LT; </span><a href="formatting.c.html#LN3270"><span class='Ref_To_Local'>old</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN381"><span class='Ref_to_Member'>age</span></a><span class='Parentheses'>) 
</span>                    <a href="formatting.c.html#LN3270"><span class='Ref_To_Local'>old</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN3254"><span class='Ref_To_Local'>ent</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>} 
</span><span class='Directive'>#ifdef</span> DEBUG_TO_FROM_CHAR 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN62"><span class='Ref_to_Const'>DEBUG_elog_output</span></a><span class='Delimiter'>, </span><span class='String'>"OLD: '%s' AGE: %d"</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN3270"><span class='Ref_To_Local'>old</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN379"><span class='Ref_to_Member'>str</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN3270"><span class='Ref_To_Local'>old</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN381"><span class='Ref_to_Member'>age</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
        <a href="formatting.c.html#LN3270"><span class='Ref_To_Local'>old</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN380"><span class='Ref_to_Member'>valid</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>        <a href="../../../include/c.h.html#LN829"><span class='Ref_to_Macro'>StrNCpy</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN3270"><span class='Ref_To_Local'>old</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN379"><span class='Ref_to_Member'>str</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN3252"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN373"><span class='Ref_to_Const'>DCH_CACHE_SIZE</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="formatting.c.html#LN3270"><span class='Ref_To_Local'>old</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN381"><span class='Ref_to_Member'>age</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Operator'>++</span><a href="formatting.c.html#LN396"><span class='Ref_to_Global_Var'>DCHCounter</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* caller is expected to fill format, then set valid */ 
</span>        <span class='Control'>return</span> <a href="formatting.c.html#LN3270"><span class='Ref_To_Local'>old</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if n_DCHCache&GT;=DCH_CACHE... &raquo; </span> 
    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span><span class='Directive'>#ifdef</span> DEBUG_TO_FROM_CHAR 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN62"><span class='Ref_to_Const'>DEBUG_elog_output</span></a><span class='Delimiter'>, </span><span class='String'>"NEW (%d)"</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN395"><span class='Ref_to_Global_Var'>n_DCHCache</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
        <a href="formatting.c.html#LN3254"><span class='Ref_To_Local'>ent</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN394"><span class='Ref_to_Global_Var'>DCHCache</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN395"><span class='Ref_to_Global_Var'>n_DCHCache</span></a><span class='Delimiter'>; 
</span>        <a href="formatting.c.html#LN3254"><span class='Ref_To_Local'>ent</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN380"><span class='Ref_to_Member'>valid</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>        <a href="../../../include/c.h.html#LN829"><span class='Ref_to_Macro'>StrNCpy</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN3254"><span class='Ref_To_Local'>ent</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN379"><span class='Ref_to_Member'>str</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN3252"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN373"><span class='Ref_to_Const'>DCH_CACHE_SIZE</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="formatting.c.html#LN3254"><span class='Ref_To_Local'>ent</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN381"><span class='Ref_to_Member'>age</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Operator'>++</span><a href="formatting.c.html#LN396"><span class='Ref_to_Global_Var'>DCHCounter</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* caller is expected to fill format, then set valid */ 
</span>        <span class='Operator'>++</span><a href="formatting.c.html#LN395"><span class='Ref_to_Global_Var'>n_DCHCache</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <a href="formatting.c.html#LN3254"><span class='Ref_To_Local'>ent</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
}</span><span class='Auto_Annotations'> &laquo; end DCH_cache_getnew &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* look for an existing DCHCacheEntry matching the given format picture */ 
</span><span class='Keyword'>static </span><a href="formatting.c.html#LN376"><span class='Ref_to_Typedef'>DCHCacheEntry</span></a> <span class='Operator'>* 
</span><a name="LN3314"></a><span class='Declare_Function'>DCH_cache_search</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>str</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3316"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN3317"></a>    <a href="formatting.c.html#LN376"><span class='Ref_to_Typedef'>DCHCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>ent</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* counter overflow check - paranoia? */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN396"><span class='Ref_to_Global_Var'>DCHCounter</span></a> <span class='Operator'>&GT;= </span><span class='Parentheses'>(</span>INT_MAX <span class='Operator'>- </span><a href="formatting.c.html#LN374"><span class='Ref_to_Const'>DCH_CACHE_ENTRIES</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="formatting.c.html#LN396"><span class='Ref_to_Global_Var'>DCHCounter</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN3317"><span class='Ref_To_Local'>ent</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN394"><span class='Ref_to_Global_Var'>DCHCache</span></a><span class='Delimiter'>; </span><a href="formatting.c.html#LN3317"><span class='Ref_To_Local'>ent</span></a> <span class='Operator'>&LT; </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN394"><span class='Ref_to_Global_Var'>DCHCache</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN374"><span class='Ref_to_Const'>DCH_CACHE_ENTRIES</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; </span><a href="formatting.c.html#LN3317"><span class='Ref_To_Local'>ent</span></a><span class='Operator'>++</span><span class='Parentheses'>)</span> 
            <a href="formatting.c.html#LN3317"><span class='Ref_To_Local'>ent</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN381"><span class='Ref_to_Member'>age</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Operator'>++</span><a href="formatting.c.html#LN396"><span class='Ref_to_Global_Var'>DCHCounter</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN3316"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN3317"><span class='Ref_To_Local'>ent</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN394"><span class='Ref_to_Global_Var'>DCHCache</span></a><span class='Delimiter'>; </span><a href="formatting.c.html#LN3316"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="formatting.c.html#LN395"><span class='Ref_to_Global_Var'>n_DCHCache</span></a><span class='Delimiter'>; </span><a href="formatting.c.html#LN3316"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN3317"><span class='Ref_To_Local'>ent</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN3317"><span class='Ref_To_Local'>ent</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN380"><span class='Ref_to_Member'>valid</span></a> <span class='Operator'>&& </span>strcmp<span class='Parentheses'>(</span><a href="formatting.c.html#LN3317"><span class='Ref_To_Local'>ent</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN379"><span class='Ref_to_Member'>str</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN3314"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <a href="formatting.c.html#LN3317"><span class='Ref_To_Local'>ent</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN381"><span class='Ref_to_Member'>age</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Operator'>++</span><a href="formatting.c.html#LN396"><span class='Ref_to_Global_Var'>DCHCounter</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>return</span> <a href="formatting.c.html#LN3317"><span class='Ref_To_Local'>ent</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end DCH_cache_search &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* Find or create a DCHCacheEntry for the given format picture */ 
</span><span class='Keyword'>static </span><a href="formatting.c.html#LN376"><span class='Ref_to_Typedef'>DCHCacheEntry</span></a> <span class='Operator'>* 
</span><a name="LN3342"></a><span class='Declare_Function'>DCH_cache_fetch</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>str</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3344"></a>    <a href="formatting.c.html#LN376"><span class='Ref_to_Typedef'>DCHCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>ent</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="formatting.c.html#LN3344"><span class='Ref_To_Local'>ent</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN993"><span class='Ref_to_Proto'>DCH_cache_search</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN3342"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>))</span> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * Not in the cache, must run parser and save a new format-picture to 
         * the cache.  Do not mark the cache entry valid until parsing 
         * succeeds. 
         */ 
</span>        <a href="formatting.c.html#LN3344"><span class='Ref_To_Local'>ent</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN992"><span class='Ref_to_Proto'>DCH_cache_getnew</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN3342"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="formatting.c.html#LN958"><span class='Ref_to_Proto'>parse_format</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN3344"><span class='Ref_To_Local'>ent</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN378"><span class='Ref_to_Member'>format</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN3342"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN718"><span class='Ref_to_Global_Var'>DCH_keywords</span></a><span class='Delimiter'>, 
</span>                     <a href="formatting.c.html#LN530"><span class='Ref_to_Global_Var'>DCH_suff</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN872"><span class='Ref_to_Global_Var'>DCH_index</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN102"><span class='Ref_to_Const'>DCH_TYPE</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="formatting.c.html#LN3344"><span class='Ref_To_Local'>ent</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN380"><span class='Ref_to_Member'>valid</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>return</span> <a href="formatting.c.html#LN3344"><span class='Ref_To_Local'>ent</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end DCH_cache_fetch &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Format a date/time or interval into a string according to fmt. 
 * We parse fmt into a list of FormatNodes.  This is then passed to DCH_to_char 
 * for formatting. 
 */ 
</span><span class='Keyword'>static </span><a href="../../../../contrib/seg/segparse.y.html#LN46"><span class='Ref_to_Global_Var'>text</span></a> <span class='Operator'>* 
</span><a name="LN3369"></a><span class='Declare_Function'>datetime_to_char_body</span><span class='Parentheses'>(</span><a href="formatting.c.html#LN458"><span class='Ref_to_Struct'>TmToChar</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tmtc</span><span class='Delimiter'>, </span><a href="../../../../contrib/seg/segparse.y.html#LN46"><span class='Ref_to_Global_Var'>text</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fmt</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>is_interval</span><span class='Delimiter'>, </span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>collid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3371"></a>    <a href="formatting.c.html#LN164"><span class='Ref_to_Struct'>FormatNode</span></a> <span class='Operator'>*</span><span class='Declare_Local'>format</span><span class='Delimiter'>; 
</span><a name="LN3372"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>fmt_str</span><span class='Delimiter'>, 
</span><a name="LN3373"></a>               <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span><a name="LN3374"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>incache</span><span class='Delimiter'>; 
</span><a name="LN3375"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>fmt_len</span><span class='Delimiter'>; 
</span><a name="LN3376"></a>    <a href="../../../../contrib/seg/segparse.y.html#LN46"><span class='Ref_to_Global_Var'>text</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Convert fmt to C string 
     */ 
</span>    <a href="formatting.c.html#LN3372"><span class='Ref_To_Local'>fmt_str</span></a> <span class='Operator'>= </span><a href="../../../include/utils/builtins.h.html#LN87"><span class='Ref_to_Proto'>text_to_cstring</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN3369"><span class='Ref_to_Parameter'>fmt</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="formatting.c.html#LN3375"><span class='Ref_To_Local'>fmt_len</span></a> <span class='Operator'>= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN3372"><span class='Ref_To_Local'>fmt_str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Allocate workspace for result as C string 
     */ 
</span>    <a href="formatting.c.html#LN3373"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>((</span><a href="formatting.c.html#LN3375"><span class='Ref_To_Local'>fmt_len</span></a> <span class='Operator'>* </span><a href="formatting.c.html#LN116"><span class='Ref_to_Const'>DCH_MAX_ITEM_SIZ</span></a><span class='Parentheses'>) </span><span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="formatting.c.html#LN3373"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN3375"><span class='Ref_To_Local'>fmt_len</span></a> <span class='Operator'>&GT; </span><a href="formatting.c.html#LN373"><span class='Ref_to_Const'>DCH_CACHE_SIZE</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * Allocate new memory if format picture is bigger than static cache 
         * and do not use cache (call parser always) 
         */ 
</span>        <a href="formatting.c.html#LN3374"><span class='Ref_To_Local'>incache</span></a> <span class='Operator'>= </span><span class='Boolean'>FALSE</span><span class='Delimiter'>; 
</span> 
        <a href="formatting.c.html#LN3371"><span class='Ref_To_Local'>format</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN164"><span class='Ref_to_Struct'>FormatNode</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>((</span><a href="formatting.c.html#LN3375"><span class='Ref_To_Local'>fmt_len</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>) </span><span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="formatting.c.html#LN164"><span class='Ref_to_Struct'>FormatNode</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <a href="formatting.c.html#LN958"><span class='Ref_to_Proto'>parse_format</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN3371"><span class='Ref_To_Local'>format</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN3372"><span class='Ref_To_Local'>fmt_str</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN718"><span class='Ref_to_Global_Var'>DCH_keywords</span></a><span class='Delimiter'>, 
</span>                     <a href="formatting.c.html#LN530"><span class='Ref_to_Global_Var'>DCH_suff</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN872"><span class='Ref_to_Global_Var'>DCH_index</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN102"><span class='Ref_to_Const'>DCH_TYPE</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * Use cache buffers 
         */ 
</span><a name="LN3408"></a>        <a href="formatting.c.html#LN376"><span class='Ref_to_Typedef'>DCHCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>ent</span> <span class='Operator'>= </span><a href="formatting.c.html#LN994"><span class='Ref_to_Proto'>DCH_cache_fetch</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN3372"><span class='Ref_To_Local'>fmt_str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="formatting.c.html#LN3374"><span class='Ref_To_Local'>incache</span></a> <span class='Operator'>= </span><span class='Boolean'>TRUE</span><span class='Delimiter'>; 
</span>        <a href="formatting.c.html#LN3371"><span class='Ref_To_Local'>format</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN3408"><span class='Ref_To_Local'>ent</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN378"><span class='Ref_to_Member'>format</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* The real work is here */ 
</span>    <a href="formatting.c.html#LN961"><span class='Ref_to_Proto'>DCH_to_char</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN3371"><span class='Ref_To_Local'>format</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN3369"><span class='Ref_to_Parameter'>is_interval</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN3369"><span class='Ref_to_Parameter'>tmtc</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN3373"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN3369"><span class='Ref_to_Parameter'>collid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="formatting.c.html#LN3374"><span class='Ref_To_Local'>incache</span></a><span class='Parentheses'>) 
</span>        <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN3371"><span class='Ref_To_Local'>format</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN3372"><span class='Ref_To_Local'>fmt_str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* convert C-string result to TEXT format */ 
</span>    <a href="formatting.c.html#LN3376"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="../../../include/utils/builtins.h.html#LN85"><span class='Ref_to_Proto'>cstring_to_text</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN3373"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN3373"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="formatting.c.html#LN3376"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end datetime_to_char_body &raquo; </span> 
 
<span class='Comment_Multi_Line'>/**************************************************************************** 
 *              Public routines 
 ***************************************************************************/ 
</span> 
<span class='Comment_Multi_Line'>/* ------------------- 
 * TIMESTAMP to_char() 
 * ------------------- 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN3438"></a><span class='Declare_Function'>timestamp_to_char</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3440"></a>    <a href="../../../include/datatype/timestamp.h.html#LN37"><span class='Ref_to_Typedef'>Timestamp</span></a>   <span class='Declare_Local'>dt</span> <span class='Operator'>= </span><a href="../../../include/utils/timestamp.h.html#LN34"><span class='Ref_to_Macro'>PG_GETARG_TIMESTAMP</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3441"></a>    <a href="../../../../contrib/seg/segparse.y.html#LN46"><span class='Ref_to_Global_Var'>text</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>fmt</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN272"><span class='Ref_to_Macro'>PG_GETARG_TEXT_PP</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span><a name="LN3442"></a>               <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN3443"></a>    <a href="formatting.c.html#LN458"><span class='Ref_to_Struct'>TmToChar</span></a>    <span class='Declare_Local'>tmtc</span><span class='Delimiter'>; 
</span><a name="LN3444"></a>    <span class='Control'>struct</span> <a href="../../../include/pgtime.h.html#LN24"><span class='Ref_to_Struct'>pg_tm</span></a> <span class='Operator'>*</span><span class='Declare_Local'>tm</span><span class='Delimiter'>; 
</span><a name="LN3445"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>thisdate</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN339"><span class='Ref_to_Macro'>VARSIZE_ANY_EXHDR</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN3441"><span class='Ref_To_Local'>fmt</span></a><span class='Parentheses'>) </span><span class='Operator'>&LT;= </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="../../../include/datatype/timestamp.h.html#LN121"><span class='Ref_to_Macro'>TIMESTAMP_NOT_FINITE</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN3440"><span class='Ref_To_Local'>dt</span></a><span class='Parentheses'>))</span> 
        <a href="../../../include/fmgr.h.html#LN304"><span class='Ref_to_Macro'>PG_RETURN_NULL</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="formatting.c.html#LN476"><span class='Ref_to_Macro'>ZERO_tmtc</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN3443"><span class='Ref_To_Local'>tmtc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="formatting.c.html#LN3444"><span class='Ref_To_Local'>tm</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN465"><span class='Ref_to_Macro'>tmtcTm</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN3443"><span class='Ref_To_Local'>tmtc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/timestamp.h.html#LN84"><span class='Ref_to_Proto'>timestamp2tm</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN3440"><span class='Ref_To_Local'>dt</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN3444"><span class='Ref_To_Local'>tm</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN467"><span class='Ref_to_Macro'>tmtcFsec</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN3443"><span class='Ref_To_Local'>tmtc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_DATETIME_VALUE_OUT_OF_RANGE<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"timestamp out of range"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <a href="formatting.c.html#LN3445"><span class='Ref_To_Local'>thisdate</span></a> <span class='Operator'>= </span><a href="datetime.c.html#LN290"><span class='Ref_to_Func'>date2j</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN3444"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN31"><span class='Ref_to_Member'>tm_year</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN3444"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN30"><span class='Ref_to_Member'>tm_mon</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN3444"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN29"><span class='Ref_to_Member'>tm_mday</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="formatting.c.html#LN3444"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN32"><span class='Ref_to_Member'>tm_wday</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN3445"><span class='Ref_To_Local'>thisdate</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>) </span><span class='Operator'>% </span><span class='Number'>7</span><span class='Delimiter'>; 
</span>    <a href="formatting.c.html#LN3444"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN33"><span class='Ref_to_Member'>tm_yday</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN3445"><span class='Ref_To_Local'>thisdate</span></a> <span class='Operator'>- </span><a href="datetime.c.html#LN290"><span class='Ref_to_Func'>date2j</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN3444"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN31"><span class='Ref_to_Member'>tm_year</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>) </span><span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><span class='Parentheses'>(</span><a href="formatting.c.html#LN3442"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN3368"><span class='Ref_to_Func'>datetime_to_char_body</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN3443"><span class='Ref_To_Local'>tmtc</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN3441"><span class='Ref_To_Local'>fmt</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span><a href="../../../include/fmgr.h.html#LN162"><span class='Ref_to_Macro'>PG_GET_COLLATION</span></a><span class='Parentheses'>())))</span> 
        <a href="../../../include/fmgr.h.html#LN304"><span class='Ref_to_Macro'>PG_RETURN_NULL</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN329"><span class='Ref_to_Macro'>PG_RETURN_TEXT_P</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN3442"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end timestamp_to_char &raquo; </span> 
 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN3469"></a><span class='Declare_Function'>timestamptz_to_char</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3471"></a>    <a href="../../../interfaces/ecpg/include/pgtypes_timestamp.h.html#LN9"><span class='Ref_to_Typedef'>TimestampTz</span></a> <span class='Declare_Local'>dt</span> <span class='Operator'>= </span><a href="../../../include/utils/timestamp.h.html#LN34"><span class='Ref_to_Macro'>PG_GETARG_TIMESTAMP</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3472"></a>    <a href="../../../../contrib/seg/segparse.y.html#LN46"><span class='Ref_to_Global_Var'>text</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>fmt</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN272"><span class='Ref_to_Macro'>PG_GETARG_TEXT_PP</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span><a name="LN3473"></a>               <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN3474"></a>    <a href="formatting.c.html#LN458"><span class='Ref_to_Struct'>TmToChar</span></a>    <span class='Declare_Local'>tmtc</span><span class='Delimiter'>; 
</span><a name="LN3475"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>tz</span><span class='Delimiter'>; 
</span><a name="LN3476"></a>    <span class='Control'>struct</span> <a href="../../../include/pgtime.h.html#LN24"><span class='Ref_to_Struct'>pg_tm</span></a> <span class='Operator'>*</span><span class='Declare_Local'>tm</span><span class='Delimiter'>; 
</span><a name="LN3477"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>thisdate</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN339"><span class='Ref_to_Macro'>VARSIZE_ANY_EXHDR</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN3472"><span class='Ref_To_Local'>fmt</span></a><span class='Parentheses'>) </span><span class='Operator'>&LT;= </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="../../../include/datatype/timestamp.h.html#LN121"><span class='Ref_to_Macro'>TIMESTAMP_NOT_FINITE</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN3471"><span class='Ref_To_Local'>dt</span></a><span class='Parentheses'>))</span> 
        <a href="../../../include/fmgr.h.html#LN304"><span class='Ref_to_Macro'>PG_RETURN_NULL</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="formatting.c.html#LN476"><span class='Ref_to_Macro'>ZERO_tmtc</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN3474"><span class='Ref_To_Local'>tmtc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="formatting.c.html#LN3476"><span class='Ref_To_Local'>tm</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN465"><span class='Ref_to_Macro'>tmtcTm</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN3474"><span class='Ref_To_Local'>tmtc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/timestamp.h.html#LN84"><span class='Ref_to_Proto'>timestamp2tm</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN3471"><span class='Ref_To_Local'>dt</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN3475"><span class='Ref_To_Local'>tz</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN3476"><span class='Ref_To_Local'>tm</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN467"><span class='Ref_to_Macro'>tmtcFsec</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN3474"><span class='Ref_To_Local'>tmtc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN466"><span class='Ref_to_Macro'>tmtcTzn</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN3474"><span class='Ref_To_Local'>tmtc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_DATETIME_VALUE_OUT_OF_RANGE<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"timestamp out of range"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <a href="formatting.c.html#LN3477"><span class='Ref_To_Local'>thisdate</span></a> <span class='Operator'>= </span><a href="datetime.c.html#LN290"><span class='Ref_to_Func'>date2j</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN3476"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN31"><span class='Ref_to_Member'>tm_year</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN3476"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN30"><span class='Ref_to_Member'>tm_mon</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN3476"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN29"><span class='Ref_to_Member'>tm_mday</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="formatting.c.html#LN3476"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN32"><span class='Ref_to_Member'>tm_wday</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN3477"><span class='Ref_To_Local'>thisdate</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>) </span><span class='Operator'>% </span><span class='Number'>7</span><span class='Delimiter'>; 
</span>    <a href="formatting.c.html#LN3476"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN33"><span class='Ref_to_Member'>tm_yday</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN3477"><span class='Ref_To_Local'>thisdate</span></a> <span class='Operator'>- </span><a href="datetime.c.html#LN290"><span class='Ref_to_Func'>date2j</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN3476"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN31"><span class='Ref_to_Member'>tm_year</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>) </span><span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><span class='Parentheses'>(</span><a href="formatting.c.html#LN3473"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN3368"><span class='Ref_to_Func'>datetime_to_char_body</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN3474"><span class='Ref_To_Local'>tmtc</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN3472"><span class='Ref_To_Local'>fmt</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span><a href="../../../include/fmgr.h.html#LN162"><span class='Ref_to_Macro'>PG_GET_COLLATION</span></a><span class='Parentheses'>())))</span> 
        <a href="../../../include/fmgr.h.html#LN304"><span class='Ref_to_Macro'>PG_RETURN_NULL</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN329"><span class='Ref_to_Macro'>PG_RETURN_TEXT_P</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN3473"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end timestamptz_to_char &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* ------------------- 
 * INTERVAL to_char() 
 * ------------------- 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN3506"></a><span class='Declare_Function'>interval_to_char</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3508"></a>    <a href="../../../include/datatype/timestamp.h.html#LN42"><span class='Ref_to_Typedef'>Interval</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>it</span> <span class='Operator'>= </span><a href="../../../include/utils/timestamp.h.html#LN36"><span class='Ref_to_Macro'>PG_GETARG_INTERVAL_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3509"></a>    <a href="../../../../contrib/seg/segparse.y.html#LN46"><span class='Ref_to_Global_Var'>text</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>fmt</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN272"><span class='Ref_to_Macro'>PG_GETARG_TEXT_PP</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span><a name="LN3510"></a>               <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN3511"></a>    <a href="formatting.c.html#LN458"><span class='Ref_to_Struct'>TmToChar</span></a>    <span class='Declare_Local'>tmtc</span><span class='Delimiter'>; 
</span><a name="LN3512"></a>    <span class='Control'>struct</span> <a href="../../../include/pgtime.h.html#LN24"><span class='Ref_to_Struct'>pg_tm</span></a> <span class='Operator'>*</span><span class='Declare_Local'>tm</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN339"><span class='Ref_to_Macro'>VARSIZE_ANY_EXHDR</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN3509"><span class='Ref_To_Local'>fmt</span></a><span class='Parentheses'>) </span><span class='Operator'>&LT;= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <a href="../../../include/fmgr.h.html#LN304"><span class='Ref_to_Macro'>PG_RETURN_NULL</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="formatting.c.html#LN476"><span class='Ref_to_Macro'>ZERO_tmtc</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN3511"><span class='Ref_To_Local'>tmtc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="formatting.c.html#LN3512"><span class='Ref_To_Local'>tm</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN465"><span class='Ref_to_Macro'>tmtcTm</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN3511"><span class='Ref_To_Local'>tmtc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/timestamp.h.html#LN88"><span class='Ref_to_Proto'>interval2tm</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="formatting.c.html#LN3508"><span class='Ref_To_Local'>it</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN3512"><span class='Ref_To_Local'>tm</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN467"><span class='Ref_to_Macro'>tmtcFsec</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN3511"><span class='Ref_To_Local'>tmtc</span></a><span class='Parentheses'>))</span> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <a href="../../../include/fmgr.h.html#LN304"><span class='Ref_to_Macro'>PG_RETURN_NULL</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* wday is meaningless, yday approximates the total span in days */ 
</span>    <a href="formatting.c.html#LN3512"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN33"><span class='Ref_to_Member'>tm_yday</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN3512"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN31"><span class='Ref_to_Member'>tm_year</span></a> <span class='Operator'>* </span><a href="../../../include/datatype/timestamp.h.html#LN68"><span class='Ref_to_Const'>MONTHS_PER_YEAR</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN3512"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN30"><span class='Ref_to_Member'>tm_mon</span></a><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="../../../include/datatype/timestamp.h.html#LN76"><span class='Ref_to_Const'>DAYS_PER_MONTH</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN3512"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN29"><span class='Ref_to_Member'>tm_mday</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><span class='Parentheses'>(</span><a href="formatting.c.html#LN3510"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN3368"><span class='Ref_to_Func'>datetime_to_char_body</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN3511"><span class='Ref_To_Local'>tmtc</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN3509"><span class='Ref_To_Local'>fmt</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span><a href="../../../include/fmgr.h.html#LN162"><span class='Ref_to_Macro'>PG_GET_COLLATION</span></a><span class='Parentheses'>())))</span> 
        <a href="../../../include/fmgr.h.html#LN304"><span class='Ref_to_Macro'>PG_RETURN_NULL</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN329"><span class='Ref_to_Macro'>PG_RETURN_TEXT_P</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN3510"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end interval_to_char &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* --------------------- 
 * TO_TIMESTAMP() 
 * 
 * Make Timestamp from date_str which is formatted at argument 'fmt' 
 * ( to_timestamp is reverse to_char() ) 
 * --------------------- 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN3540"></a><span class='Declare_Function'>to_timestamp</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3542"></a>    <a href="../../../../contrib/seg/segparse.y.html#LN46"><span class='Ref_to_Global_Var'>text</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>date_txt</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN272"><span class='Ref_to_Macro'>PG_GETARG_TEXT_PP</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3543"></a>    <a href="../../../../contrib/seg/segparse.y.html#LN46"><span class='Ref_to_Global_Var'>text</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>fmt</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN272"><span class='Ref_to_Macro'>PG_GETARG_TEXT_PP</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3544"></a>    <a href="../../../include/datatype/timestamp.h.html#LN37"><span class='Ref_to_Typedef'>Timestamp</span></a>   <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span><a name="LN3545"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>tz</span><span class='Delimiter'>; 
</span><a name="LN3546"></a>    <span class='Control'>struct</span> <a href="../../../include/pgtime.h.html#LN24"><span class='Ref_to_Struct'>pg_tm</span></a> <span class='Declare_Local'>tm</span><span class='Delimiter'>; 
</span><a name="LN3547"></a>    <a href="../../../interfaces/ecpg/pgtypeslib/dt.h.html#LN9"><span class='Ref_to_Typedef'>fsec_t</span></a>      <span class='Declare_Local'>fsec</span><span class='Delimiter'>; 
</span> 
    <a href="formatting.c.html#LN980"><span class='Ref_to_Proto'>do_to_timestamp</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN3542"><span class='Ref_To_Local'>date_txt</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN3543"><span class='Ref_To_Local'>fmt</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN3546"><span class='Ref_To_Local'>tm</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN3547"><span class='Ref_To_Local'>fsec</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="formatting.c.html#LN3545"><span class='Ref_To_Local'>tz</span></a> <span class='Operator'>= </span><a href="../../../include/utils/datetime.h.html#LN311"><span class='Ref_to_Proto'>DetermineTimeZoneOffset</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN3546"><span class='Ref_To_Local'>tm</span></a><span class='Delimiter'>, </span><a href="../../../timezone/pgtz.c.html#LN27"><span class='Ref_to_Global_Var'>session_timezone</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../interfaces/ecpg/pgtypeslib/timestamp.c.html#LN40"><span class='Ref_to_Func'>tm2timestamp</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN3546"><span class='Ref_To_Local'>tm</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN3547"><span class='Ref_To_Local'>fsec</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN3545"><span class='Ref_To_Local'>tz</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN3544"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_DATETIME_VALUE_OUT_OF_RANGE<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"timestamp out of range"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/timestamp.h.html#LN38"><span class='Ref_to_Macro'>PG_RETURN_TIMESTAMP</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN3544"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end to_timestamp &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * TO_DATE 
 *  Make Date from date_str which is formated at argument 'fmt' 
 * ---------- 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN3567"></a><span class='Declare_Function'>to_date</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3569"></a>    <a href="../../../../contrib/seg/segparse.y.html#LN46"><span class='Ref_to_Global_Var'>text</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>date_txt</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN272"><span class='Ref_to_Macro'>PG_GETARG_TEXT_PP</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3570"></a>    <a href="../../../../contrib/seg/segparse.y.html#LN46"><span class='Ref_to_Global_Var'>text</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>fmt</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN272"><span class='Ref_to_Macro'>PG_GETARG_TEXT_PP</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3571"></a>    <a href="../../../include/utils/date.h.html#LN21"><span class='Ref_to_Typedef'>DateADT</span></a>     <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span><a name="LN3572"></a>    <span class='Control'>struct</span> <a href="../../../include/pgtime.h.html#LN24"><span class='Ref_to_Struct'>pg_tm</span></a> <span class='Declare_Local'>tm</span><span class='Delimiter'>; 
</span><a name="LN3573"></a>    <a href="../../../interfaces/ecpg/pgtypeslib/dt.h.html#LN9"><span class='Ref_to_Typedef'>fsec_t</span></a>      <span class='Declare_Local'>fsec</span><span class='Delimiter'>; 
</span> 
    <a href="formatting.c.html#LN980"><span class='Ref_to_Proto'>do_to_timestamp</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN3569"><span class='Ref_To_Local'>date_txt</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN3570"><span class='Ref_To_Local'>fmt</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN3572"><span class='Ref_To_Local'>tm</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN3573"><span class='Ref_To_Local'>fsec</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Prevent overflow in Julian-day routines */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/datatype/timestamp.h.html#LN154"><span class='Ref_to_Macro'>IS_VALID_JULIAN</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN3572"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>.</span><a href="../../../include/pgtime.h.html#LN31"><span class='Ref_to_Member'>tm_year</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN3572"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>.</span><a href="../../../include/pgtime.h.html#LN30"><span class='Ref_to_Member'>tm_mon</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN3572"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>.</span><a href="../../../include/pgtime.h.html#LN29"><span class='Ref_to_Member'>tm_mday</span></a><span class='Parentheses'>))</span> 
        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_DATETIME_VALUE_OUT_OF_RANGE<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"date out of range: \"%s\""</span><span class='Delimiter'>, 
</span>                        <a href="../../../include/utils/builtins.h.html#LN87"><span class='Ref_to_Proto'>text_to_cstring</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN3569"><span class='Ref_To_Local'>date_txt</span></a><span class='Parentheses'>))))</span><span class='Delimiter'>; 
</span> 
    <a href="formatting.c.html#LN3571"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="datetime.c.html#LN290"><span class='Ref_to_Func'>date2j</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN3572"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>.</span><a href="../../../include/pgtime.h.html#LN31"><span class='Ref_to_Member'>tm_year</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN3572"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>.</span><a href="../../../include/pgtime.h.html#LN30"><span class='Ref_to_Member'>tm_mon</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN3572"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>.</span><a href="../../../include/pgtime.h.html#LN29"><span class='Ref_to_Member'>tm_mday</span></a><span class='Parentheses'>) </span><span class='Operator'>- </span><a href="../../../include/datatype/timestamp.h.html#LN162"><span class='Ref_to_Const'>POSTGRES_EPOCH_JDATE</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Now check for just-out-of-range dates */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/datatype/timestamp.h.html#LN189"><span class='Ref_to_Macro'>IS_VALID_DATE</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN3571"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>))</span> 
        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_DATETIME_VALUE_OUT_OF_RANGE<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"date out of range: \"%s\""</span><span class='Delimiter'>, 
</span>                        <a href="../../../include/utils/builtins.h.html#LN87"><span class='Ref_to_Proto'>text_to_cstring</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN3569"><span class='Ref_To_Local'>date_txt</span></a><span class='Parentheses'>))))</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/date.h.html#LN63"><span class='Ref_to_Macro'>PG_RETURN_DATEADT</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN3571"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end to_date &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * do_to_timestamp: shared code for to_timestamp and to_date 
 * 
 * Parse the 'date_txt' according to 'fmt', return results as a struct pg_tm 
 * and fractional seconds. 
 * 
 * We parse 'fmt' into a list of FormatNodes, which is then passed to 
 * DCH_from_char to populate a TmFromChar with the parsed contents of 
 * 'date_txt'. 
 * 
 * The TmFromChar is then analysed and converted into the final results in 
 * struct 'tm' and 'fsec'. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN3610"></a><span class='Declare_Function'>do_to_timestamp</span><span class='Parentheses'>(</span><a href="../../../../contrib/seg/segparse.y.html#LN46"><span class='Ref_to_Global_Var'>text</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>date_txt</span><span class='Delimiter'>, </span><a href="../../../../contrib/seg/segparse.y.html#LN46"><span class='Ref_to_Global_Var'>text</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fmt</span><span class='Delimiter'>, 
</span><a name="LN3611"></a>                <span class='Control'>struct</span> <a href="../../../include/pgtime.h.html#LN24"><span class='Ref_to_Struct'>pg_tm</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>tm</span><span class='Delimiter'>, </span><a href="../../../interfaces/ecpg/pgtypeslib/dt.h.html#LN9"><span class='Ref_to_Typedef'>fsec_t</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fsec</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3613"></a>    <a href="formatting.c.html#LN164"><span class='Ref_to_Struct'>FormatNode</span></a> <span class='Operator'>*</span><span class='Declare_Local'>format</span><span class='Delimiter'>; 
</span><a name="LN3614"></a>    <a href="formatting.c.html#LN407"><span class='Ref_to_Typedef'>TmFromChar</span></a>  <span class='Declare_Local'>tmfc</span><span class='Delimiter'>; 
</span><a name="LN3615"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>fmt_len</span><span class='Delimiter'>; 
</span><a name="LN3616"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>date_str</span><span class='Delimiter'>; 
</span><a name="LN3617"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>fmask</span><span class='Delimiter'>; 
</span> 
    <a href="formatting.c.html#LN3616"><span class='Ref_To_Local'>date_str</span></a> <span class='Operator'>= </span><a href="../../../include/utils/builtins.h.html#LN87"><span class='Ref_to_Proto'>text_to_cstring</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN3610"><span class='Ref_to_Parameter'>date_txt</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="formatting.c.html#LN431"><span class='Ref_to_Macro'>ZERO_tmfc</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN3614"><span class='Ref_To_Local'>tmfc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="formatting.c.html#LN469"><span class='Ref_to_Macro'>ZERO_tm</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN3611"><span class='Ref_to_Parameter'>tm</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="formatting.c.html#LN3611"><span class='Ref_to_Parameter'>fsec</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="formatting.c.html#LN3617"><span class='Ref_To_Local'>fmask</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>;</span>                  <span class='Comment_Single_Line'>/* bit mask for ValidateDate() */ 
</span> 
    <a href="formatting.c.html#LN3615"><span class='Ref_To_Local'>fmt_len</span></a> <span class='Operator'>= </span><a href="../../../include/postgres.h.html#LN339"><span class='Ref_to_Macro'>VARSIZE_ANY_EXHDR</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN3610"><span class='Ref_to_Parameter'>fmt</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN3615"><span class='Ref_To_Local'>fmt_len</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN3630"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>fmt_str</span><span class='Delimiter'>; 
</span><a name="LN3631"></a>        <span class='Keyword'>bool</span>        <span class='Declare_Local'>incache</span><span class='Delimiter'>; 
</span> 
        <a href="formatting.c.html#LN3630"><span class='Ref_To_Local'>fmt_str</span></a> <span class='Operator'>= </span><a href="../../../include/utils/builtins.h.html#LN87"><span class='Ref_to_Proto'>text_to_cstring</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN3610"><span class='Ref_to_Parameter'>fmt</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN3615"><span class='Ref_To_Local'>fmt_len</span></a> <span class='Operator'>&GT; </span><a href="formatting.c.html#LN373"><span class='Ref_to_Const'>DCH_CACHE_SIZE</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * Allocate new memory if format picture is bigger than static 
             * cache and do not use cache (call parser always) 
             */ 
</span>            <a href="formatting.c.html#LN3631"><span class='Ref_To_Local'>incache</span></a> <span class='Operator'>= </span><span class='Boolean'>FALSE</span><span class='Delimiter'>; 
</span> 
            <a href="formatting.c.html#LN3613"><span class='Ref_To_Local'>format</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN164"><span class='Ref_to_Struct'>FormatNode</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>((</span><a href="formatting.c.html#LN3615"><span class='Ref_To_Local'>fmt_len</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>) </span><span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="formatting.c.html#LN164"><span class='Ref_to_Struct'>FormatNode</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
            <a href="formatting.c.html#LN958"><span class='Ref_to_Proto'>parse_format</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN3613"><span class='Ref_To_Local'>format</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN3630"><span class='Ref_To_Local'>fmt_str</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN718"><span class='Ref_to_Global_Var'>DCH_keywords</span></a><span class='Delimiter'>, 
</span>                         <a href="formatting.c.html#LN530"><span class='Ref_to_Global_Var'>DCH_suff</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN872"><span class='Ref_to_Global_Var'>DCH_index</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN102"><span class='Ref_to_Const'>DCH_TYPE</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * Use cache buffers 
             */ 
</span><a name="LN3653"></a>            <a href="formatting.c.html#LN376"><span class='Ref_to_Typedef'>DCHCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>ent</span> <span class='Operator'>= </span><a href="formatting.c.html#LN994"><span class='Ref_to_Proto'>DCH_cache_fetch</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN3630"><span class='Ref_To_Local'>fmt_str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <a href="formatting.c.html#LN3631"><span class='Ref_To_Local'>incache</span></a> <span class='Operator'>= </span><span class='Boolean'>TRUE</span><span class='Delimiter'>; 
</span>            <a href="formatting.c.html#LN3613"><span class='Ref_To_Local'>format</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN3653"><span class='Ref_To_Local'>ent</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN378"><span class='Ref_to_Member'>format</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
<span class='Directive'>#ifdef</span> DEBUG_TO_FROM_CHAR 
        <span class='Comment_Multi_Line'>/* dump_node(format, fmt_len); */ 
</span>        <span class='Comment_Multi_Line'>/* dump_index(DCH_keywords, DCH_index); */ 
</span><span class='Directive'>#endif</span> 
 
        <a href="formatting.c.html#LN963"><span class='Ref_to_Proto'>DCH_from_char</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN3613"><span class='Ref_To_Local'>format</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN3616"><span class='Ref_To_Local'>date_str</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN3614"><span class='Ref_To_Local'>tmfc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN3630"><span class='Ref_To_Local'>fmt_str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="formatting.c.html#LN3631"><span class='Ref_To_Local'>incache</span></a><span class='Parentheses'>) 
</span>            <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN3613"><span class='Ref_To_Local'>format</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if fmt_len &raquo; </span> 
 
    <a href="formatting.c.html#LN438"><span class='Ref_to_Macro'>DEBUG_TMFC</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN3614"><span class='Ref_To_Local'>tmfc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Convert to_date/to_timestamp input fields to standard 'tm' 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN3614"><span class='Ref_To_Local'>tmfc</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN414"><span class='Ref_to_Member'>ssss</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN3678"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>x</span> <span class='Operator'>= </span><a href="formatting.c.html#LN3614"><span class='Ref_To_Local'>tmfc</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN414"><span class='Ref_to_Member'>ssss</span></a><span class='Delimiter'>; 
</span> 
        <a href="formatting.c.html#LN3611"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN28"><span class='Ref_to_Member'>tm_hour</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN3678"><span class='Ref_To_Local'>x</span></a> <span class='Operator'>/ </span><a href="../../../include/datatype/timestamp.h.html#LN86"><span class='Ref_to_Const'>SECS_PER_HOUR</span></a><span class='Delimiter'>; 
</span>        <a href="formatting.c.html#LN3678"><span class='Ref_To_Local'>x</span></a> <span class='Operator'>%= </span><a href="../../../include/datatype/timestamp.h.html#LN86"><span class='Ref_to_Const'>SECS_PER_HOUR</span></a><span class='Delimiter'>; 
</span>        <a href="formatting.c.html#LN3611"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN27"><span class='Ref_to_Member'>tm_min</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN3678"><span class='Ref_To_Local'>x</span></a> <span class='Operator'>/ </span><a href="../../../include/datatype/timestamp.h.html#LN87"><span class='Ref_to_Const'>SECS_PER_MINUTE</span></a><span class='Delimiter'>; 
</span>        <a href="formatting.c.html#LN3678"><span class='Ref_To_Local'>x</span></a> <span class='Operator'>%= </span><a href="../../../include/datatype/timestamp.h.html#LN87"><span class='Ref_to_Const'>SECS_PER_MINUTE</span></a><span class='Delimiter'>; 
</span>        <a href="formatting.c.html#LN3611"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN26"><span class='Ref_to_Member'>tm_sec</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN3678"><span class='Ref_To_Local'>x</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN3614"><span class='Ref_To_Local'>tmfc</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN413"><span class='Ref_to_Member'>ss</span></a><span class='Parentheses'>) 
</span>        <a href="formatting.c.html#LN3611"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN26"><span class='Ref_to_Member'>tm_sec</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN3614"><span class='Ref_To_Local'>tmfc</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN413"><span class='Ref_to_Member'>ss</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN3614"><span class='Ref_To_Local'>tmfc</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN412"><span class='Ref_to_Member'>mi</span></a><span class='Parentheses'>) 
</span>        <a href="formatting.c.html#LN3611"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN27"><span class='Ref_to_Member'>tm_min</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN3614"><span class='Ref_To_Local'>tmfc</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN412"><span class='Ref_to_Member'>mi</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN3614"><span class='Ref_To_Local'>tmfc</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN410"><span class='Ref_to_Member'>hh</span></a><span class='Parentheses'>) 
</span>        <a href="formatting.c.html#LN3611"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN28"><span class='Ref_to_Member'>tm_hour</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN3614"><span class='Ref_To_Local'>tmfc</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN410"><span class='Ref_to_Member'>hh</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN3614"><span class='Ref_To_Local'>tmfc</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN428"><span class='Ref_to_Member'>clock</span></a> <span class='Operator'>== </span><a href="formatting.c.html#LN180"><span class='Ref_to_Const'>CLOCK_12_HOUR</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN3611"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN28"><span class='Ref_to_Member'>tm_hour</span></a> <span class='Operator'>&LT; </span><span class='Number'>1</span> <span class='Operator'>|| </span><a href="formatting.c.html#LN3611"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN28"><span class='Ref_to_Member'>tm_hour</span></a> <span class='Operator'>&GT; </span><a href="../../../include/datatype/timestamp.h.html#LN77"><span class='Ref_to_Const'>HOURS_PER_DAY</span></a> <span class='Operator'>/ </span><span class='Number'>2</span><span class='Parentheses'>) 
</span>            <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INVALID_DATETIME_FORMAT<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"hour \"%d\" is invalid for the 12-hour clock"</span><span class='Delimiter'>, 
</span>                            <a href="formatting.c.html#LN3611"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN28"><span class='Ref_to_Member'>tm_hour</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../error/elog.c.html#LN985"><span class='Ref_to_Func'>errhint</span></a><span class='Parentheses'>(</span><span class='String'>"Use the 24-hour clock, or give an hour between 1 and 12."</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN3614"><span class='Ref_To_Local'>tmfc</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN411"><span class='Ref_to_Member'>pm</span></a> <span class='Operator'>&& </span><a href="formatting.c.html#LN3611"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN28"><span class='Ref_to_Member'>tm_hour</span></a> <span class='Operator'>&LT; </span><a href="../../../include/datatype/timestamp.h.html#LN77"><span class='Ref_to_Const'>HOURS_PER_DAY</span></a> <span class='Operator'>/ </span><span class='Number'>2</span><span class='Parentheses'>) 
</span>            <a href="formatting.c.html#LN3611"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN28"><span class='Ref_to_Member'>tm_hour</span></a> <span class='Operator'>+= </span><a href="../../../include/datatype/timestamp.h.html#LN77"><span class='Ref_to_Const'>HOURS_PER_DAY</span></a> <span class='Operator'>/ </span><span class='Number'>2</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="formatting.c.html#LN3614"><span class='Ref_To_Local'>tmfc</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN411"><span class='Ref_to_Member'>pm</span></a> <span class='Operator'>&& </span><a href="formatting.c.html#LN3611"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN28"><span class='Ref_to_Member'>tm_hour</span></a> <span class='Operator'>== </span><a href="../../../include/datatype/timestamp.h.html#LN77"><span class='Ref_to_Const'>HOURS_PER_DAY</span></a> <span class='Operator'>/ </span><span class='Number'>2</span><span class='Parentheses'>) 
</span>            <a href="formatting.c.html#LN3611"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN28"><span class='Ref_to_Member'>tm_hour</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN3614"><span class='Ref_To_Local'>tmfc</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN420"><span class='Ref_to_Member'>year</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * If CC and YY (or Y) are provided, use YY as 2 low-order digits for 
         * the year in the given century.  Keep in mind that the 21st century 
         * AD runs from 2001-2100, not 2000-2099; 6th century BC runs from 
         * 600BC to 501BC. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN3614"><span class='Ref_To_Local'>tmfc</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN424"><span class='Ref_to_Member'>cc</span></a> <span class='Operator'>&& </span><a href="formatting.c.html#LN3614"><span class='Ref_To_Local'>tmfc</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN427"><span class='Ref_to_Member'>yysz</span></a> <span class='Operator'>&LT;= </span><span class='Number'>2</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN3614"><span class='Ref_To_Local'>tmfc</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN421"><span class='Ref_to_Member'>bc</span></a><span class='Parentheses'>) 
</span>                <a href="formatting.c.html#LN3614"><span class='Ref_To_Local'>tmfc</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN424"><span class='Ref_to_Member'>cc</span></a> <span class='Operator'>= -</span><a href="formatting.c.html#LN3614"><span class='Ref_To_Local'>tmfc</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN424"><span class='Ref_to_Member'>cc</span></a><span class='Delimiter'>; 
</span>            <a href="formatting.c.html#LN3611"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN31"><span class='Ref_to_Member'>tm_year</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN3614"><span class='Ref_To_Local'>tmfc</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN420"><span class='Ref_to_Member'>year</span></a> <span class='Operator'>% </span><span class='Number'>100</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN3611"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN31"><span class='Ref_to_Member'>tm_year</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN3614"><span class='Ref_To_Local'>tmfc</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN424"><span class='Ref_to_Member'>cc</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                    <a href="formatting.c.html#LN3611"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN31"><span class='Ref_to_Member'>tm_year</span></a> <span class='Operator'>+= </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN3614"><span class='Ref_To_Local'>tmfc</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN424"><span class='Ref_to_Member'>cc</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>) </span><span class='Operator'>* </span><span class='Number'>100</span><span class='Delimiter'>; 
</span>                <span class='Control'>else</span> 
                    <a href="formatting.c.html#LN3611"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN31"><span class='Ref_to_Member'>tm_year</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN3614"><span class='Ref_To_Local'>tmfc</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN424"><span class='Ref_to_Member'>cc</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>) </span><span class='Operator'>* </span><span class='Number'>100</span> <span class='Operator'>- </span><a href="formatting.c.html#LN3611"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN31"><span class='Ref_to_Member'>tm_year</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* find century year for dates ending in "00" */ 
</span>                <a href="formatting.c.html#LN3611"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN31"><span class='Ref_to_Member'>tm_year</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN3614"><span class='Ref_To_Local'>tmfc</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN424"><span class='Ref_to_Member'>cc</span></a> <span class='Operator'>* </span><span class='Number'>100</span> <span class='Operator'>+ </span><span class='Parentheses'>((</span><a href="formatting.c.html#LN3614"><span class='Ref_To_Local'>tmfc</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN424"><span class='Ref_to_Member'>cc</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='Number'>0</span> <span class='Operator'>: </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* If a 4-digit year is provided, we use that and ignore CC. */ 
</span>            <a href="formatting.c.html#LN3611"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN31"><span class='Ref_to_Member'>tm_year</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN3614"><span class='Ref_To_Local'>tmfc</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN420"><span class='Ref_to_Member'>year</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN3614"><span class='Ref_To_Local'>tmfc</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN421"><span class='Ref_to_Member'>bc</span></a> <span class='Operator'>&& </span><a href="formatting.c.html#LN3611"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN31"><span class='Ref_to_Member'>tm_year</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                <a href="formatting.c.html#LN3611"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN31"><span class='Ref_to_Member'>tm_year</span></a> <span class='Operator'>= -</span><span class='Parentheses'>(</span><a href="formatting.c.html#LN3611"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN31"><span class='Ref_to_Member'>tm_year</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <a href="formatting.c.html#LN3617"><span class='Ref_To_Local'>fmask</span></a> <span class='Operator'>|= </span><a href="../../../interfaces/ecpg/pgtypeslib/dt.h.html#LN184"><span class='Ref_to_Macro'>DTK_M</span></a><span class='Parentheses'>(</span><a href="../../../interfaces/ecpg/pgtypeslib/dt.h.html#LN91"><span class='Ref_to_Const'>YEAR</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if tmfc.year &raquo; </span> 
    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN3614"><span class='Ref_To_Local'>tmfc</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN424"><span class='Ref_to_Member'>cc</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* use first year of century */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN3614"><span class='Ref_To_Local'>tmfc</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN421"><span class='Ref_to_Member'>bc</span></a><span class='Parentheses'>) 
</span>            <a href="formatting.c.html#LN3614"><span class='Ref_To_Local'>tmfc</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN424"><span class='Ref_to_Member'>cc</span></a> <span class='Operator'>= -</span><a href="formatting.c.html#LN3614"><span class='Ref_To_Local'>tmfc</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN424"><span class='Ref_to_Member'>cc</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN3614"><span class='Ref_To_Local'>tmfc</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN424"><span class='Ref_to_Member'>cc</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <span class='Comment_Multi_Line'>/* +1 because 21st century started in 2001 */ 
</span>            <a href="formatting.c.html#LN3611"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN31"><span class='Ref_to_Member'>tm_year</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN3614"><span class='Ref_To_Local'>tmfc</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN424"><span class='Ref_to_Member'>cc</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>) </span><span class='Operator'>* </span><span class='Number'>100</span> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <span class='Comment_Multi_Line'>/* +1 because year == 599 is 600 BC */ 
</span>            <a href="formatting.c.html#LN3611"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN31"><span class='Ref_to_Member'>tm_year</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN3614"><span class='Ref_To_Local'>tmfc</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN424"><span class='Ref_to_Member'>cc</span></a> <span class='Operator'>* </span><span class='Number'>100</span> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <a href="formatting.c.html#LN3617"><span class='Ref_To_Local'>fmask</span></a> <span class='Operator'>|= </span><a href="../../../interfaces/ecpg/pgtypeslib/dt.h.html#LN184"><span class='Ref_to_Macro'>DTK_M</span></a><span class='Parentheses'>(</span><a href="../../../interfaces/ecpg/pgtypeslib/dt.h.html#LN91"><span class='Ref_to_Const'>YEAR</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN3614"><span class='Ref_To_Local'>tmfc</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN425"><span class='Ref_to_Member'>j</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../../include/utils/datetime.h.html#LN290"><span class='Ref_to_Proto'>j2date</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN3614"><span class='Ref_To_Local'>tmfc</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN425"><span class='Ref_to_Member'>j</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN3611"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN31"><span class='Ref_to_Member'>tm_year</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN3611"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN30"><span class='Ref_to_Member'>tm_mon</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN3611"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN29"><span class='Ref_to_Member'>tm_mday</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="formatting.c.html#LN3617"><span class='Ref_To_Local'>fmask</span></a> <span class='Operator'>|= </span><a href="../../../interfaces/ecpg/pgtypeslib/dt.h.html#LN186"><span class='Ref_to_Const'>DTK_DATE_M</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN3614"><span class='Ref_To_Local'>tmfc</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN422"><span class='Ref_to_Member'>ww</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN3614"><span class='Ref_To_Local'>tmfc</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN409"><span class='Ref_to_Member'>mode</span></a> <span class='Operator'>== </span><a href="formatting.c.html#LN150"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_ISOWEEK</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * If tmfc.d is not set, then the date is left at the beginning of 
             * the ISO week (Monday). 
             */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN3614"><span class='Ref_To_Local'>tmfc</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN415"><span class='Ref_to_Member'>d</span></a><span class='Parentheses'>) 
</span>                <a href="../../../include/utils/timestamp.h.html#LN101"><span class='Ref_to_Proto'>isoweekdate2date</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN3614"><span class='Ref_To_Local'>tmfc</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN422"><span class='Ref_to_Member'>ww</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN3614"><span class='Ref_To_Local'>tmfc</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN415"><span class='Ref_to_Member'>d</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN3611"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN31"><span class='Ref_to_Member'>tm_year</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN3611"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN30"><span class='Ref_to_Member'>tm_mon</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN3611"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN29"><span class='Ref_to_Member'>tm_mday</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
                <a href="../../../include/utils/timestamp.h.html#LN100"><span class='Ref_to_Proto'>isoweek2date</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN3614"><span class='Ref_To_Local'>tmfc</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN422"><span class='Ref_to_Member'>ww</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN3611"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN31"><span class='Ref_to_Member'>tm_year</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN3611"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN30"><span class='Ref_to_Member'>tm_mon</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN3611"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN29"><span class='Ref_to_Member'>tm_mday</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="formatting.c.html#LN3617"><span class='Ref_To_Local'>fmask</span></a> <span class='Operator'>|= </span><a href="../../../interfaces/ecpg/pgtypeslib/dt.h.html#LN186"><span class='Ref_to_Const'>DTK_DATE_M</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
            <a href="formatting.c.html#LN3614"><span class='Ref_To_Local'>tmfc</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN417"><span class='Ref_to_Member'>ddd</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN3614"><span class='Ref_To_Local'>tmfc</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN422"><span class='Ref_to_Member'>ww</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>) </span><span class='Operator'>* </span><span class='Number'>7</span> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN3614"><span class='Ref_To_Local'>tmfc</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN423"><span class='Ref_to_Member'>w</span></a><span class='Parentheses'>) 
</span>        <a href="formatting.c.html#LN3614"><span class='Ref_To_Local'>tmfc</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN416"><span class='Ref_to_Member'>dd</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN3614"><span class='Ref_To_Local'>tmfc</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN423"><span class='Ref_to_Member'>w</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>) </span><span class='Operator'>* </span><span class='Number'>7</span> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN3614"><span class='Ref_To_Local'>tmfc</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN416"><span class='Ref_to_Member'>dd</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="formatting.c.html#LN3611"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN29"><span class='Ref_to_Member'>tm_mday</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN3614"><span class='Ref_To_Local'>tmfc</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN416"><span class='Ref_to_Member'>dd</span></a><span class='Delimiter'>; 
</span>        <a href="formatting.c.html#LN3617"><span class='Ref_To_Local'>fmask</span></a> <span class='Operator'>|= </span><a href="../../../interfaces/ecpg/pgtypeslib/dt.h.html#LN184"><span class='Ref_to_Macro'>DTK_M</span></a><span class='Parentheses'>(</span><a href="../../../interfaces/ecpg/pgtypeslib/dt.h.html#LN92"><span class='Ref_to_Const'>DAY</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN3614"><span class='Ref_To_Local'>tmfc</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN418"><span class='Ref_to_Member'>mm</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="formatting.c.html#LN3611"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN30"><span class='Ref_to_Member'>tm_mon</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN3614"><span class='Ref_To_Local'>tmfc</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN418"><span class='Ref_to_Member'>mm</span></a><span class='Delimiter'>; 
</span>        <a href="formatting.c.html#LN3617"><span class='Ref_To_Local'>fmask</span></a> <span class='Operator'>|= </span><a href="../../../interfaces/ecpg/pgtypeslib/dt.h.html#LN184"><span class='Ref_to_Macro'>DTK_M</span></a><span class='Parentheses'>(</span><a href="../../../interfaces/ecpg/pgtypeslib/dt.h.html#LN90"><span class='Ref_to_Const'>MONTH</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN3614"><span class='Ref_To_Local'>tmfc</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN417"><span class='Ref_to_Member'>ddd</span></a> <span class='Operator'>&& </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN3611"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN30"><span class='Ref_to_Member'>tm_mon</span></a> <span class='Operator'>&LT;= </span><span class='Number'>1</span> <span class='Operator'>|| </span><a href="formatting.c.html#LN3611"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN29"><span class='Ref_to_Member'>tm_mday</span></a> <span class='Operator'>&LT;= </span><span class='Number'>1</span><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * The month and day field have not been set, so we use the 
         * day-of-year field to populate them.  Depending on the date mode, 
         * this field may be interpreted as a Gregorian day-of-year, or an ISO 
         * week date day-of-year. 
         */ 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="formatting.c.html#LN3611"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN31"><span class='Ref_to_Member'>tm_year</span></a> <span class='Operator'>&& !</span><a href="formatting.c.html#LN3614"><span class='Ref_To_Local'>tmfc</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN421"><span class='Ref_to_Member'>bc</span></a><span class='Parentheses'>) 
</span>            <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INVALID_DATETIME_FORMAT<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>            <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"cannot calculate day of year without year information"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN3614"><span class='Ref_To_Local'>tmfc</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN409"><span class='Ref_to_Member'>mode</span></a> <span class='Operator'>== </span><a href="formatting.c.html#LN150"><span class='Ref_to_EnumConst'>FROM_CHAR_DATE_ISOWEEK</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN3811"></a>            <span class='Keyword'>int</span>         <span class='Declare_Local'>j0</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* zeroth day of the ISO year, in Julian */ 
</span> 
            <a href="formatting.c.html#LN3811"><span class='Ref_To_Local'>j0</span></a> <span class='Operator'>= </span><a href="../../../include/utils/timestamp.h.html#LN99"><span class='Ref_to_Proto'>isoweek2j</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN3611"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN31"><span class='Ref_to_Member'>tm_year</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>) </span><span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>; 
</span> 
            <a href="../../../include/utils/datetime.h.html#LN290"><span class='Ref_to_Proto'>j2date</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN3811"><span class='Ref_To_Local'>j0</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN3614"><span class='Ref_To_Local'>tmfc</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN417"><span class='Ref_to_Member'>ddd</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN3611"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN31"><span class='Ref_to_Member'>tm_year</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN3611"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN30"><span class='Ref_to_Member'>tm_mon</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN3611"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN29"><span class='Ref_to_Member'>tm_mday</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="formatting.c.html#LN3617"><span class='Ref_To_Local'>fmask</span></a> <span class='Operator'>|= </span><a href="../../../interfaces/ecpg/pgtypeslib/dt.h.html#LN186"><span class='Ref_to_Const'>DTK_DATE_M</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span><a name="LN3820"></a>            <span class='Keyword'>const int</span>  <span class='Operator'>*</span><span class='Declare_Local'>y</span><span class='Delimiter'>; 
</span><a name="LN3821"></a>            <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
<a name="LN3823"></a>            <span class='Keyword'>static const int </span><span class='Declare_Local'>ysum</span><span class='Delimiter'>[</span><span class='Number'>2</span><span class='Delimiter'>][</span><span class='Number'>13</span><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='Delimiter'>{ 
</span>                <span class='Delimiter'>{</span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>31</span><span class='Delimiter'>, </span><span class='Number'>59</span><span class='Delimiter'>, </span><span class='Number'>90</span><span class='Delimiter'>, </span><span class='Number'>120</span><span class='Delimiter'>, </span><span class='Number'>151</span><span class='Delimiter'>, </span><span class='Number'>181</span><span class='Delimiter'>, </span><span class='Number'>212</span><span class='Delimiter'>, </span><span class='Number'>243</span><span class='Delimiter'>, </span><span class='Number'>273</span><span class='Delimiter'>, </span><span class='Number'>304</span><span class='Delimiter'>, </span><span class='Number'>334</span><span class='Delimiter'>, </span><span class='Number'>365</span><span class='Delimiter'>}, 
</span>            <span class='Delimiter'>{</span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>31</span><span class='Delimiter'>, </span><span class='Number'>60</span><span class='Delimiter'>, </span><span class='Number'>91</span><span class='Delimiter'>, </span><span class='Number'>121</span><span class='Delimiter'>, </span><span class='Number'>152</span><span class='Delimiter'>, </span><span class='Number'>182</span><span class='Delimiter'>, </span><span class='Number'>213</span><span class='Delimiter'>, </span><span class='Number'>244</span><span class='Delimiter'>, </span><span class='Number'>274</span><span class='Delimiter'>, </span><span class='Number'>305</span><span class='Delimiter'>, </span><span class='Number'>335</span><span class='Delimiter'>, </span><span class='Number'>366</span><span class='Delimiter'>}}; 
</span> 
            <a href="formatting.c.html#LN3820"><span class='Ref_To_Local'>y</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN3823"><span class='Ref_To_Local'>ysum</span></a><span class='Delimiter'>[</span><a href="../../../timezone/private.h.html#LN142"><span class='Ref_to_Macro'>isleap</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN3611"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN31"><span class='Ref_to_Member'>tm_year</span></a><span class='Parentheses'>)</span><span class='Delimiter'>]; 
</span> 
            <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN3821"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; </span><a href="formatting.c.html#LN3821"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT;= </span><a href="../../../include/datatype/timestamp.h.html#LN68"><span class='Ref_to_Const'>MONTHS_PER_YEAR</span></a><span class='Delimiter'>; </span><a href="formatting.c.html#LN3821"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN3614"><span class='Ref_To_Local'>tmfc</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN417"><span class='Ref_to_Member'>ddd</span></a> <span class='Operator'>&LT;= </span><a href="formatting.c.html#LN3820"><span class='Ref_To_Local'>y</span></a><span class='Delimiter'>[</span><a href="formatting.c.html#LN3821"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN3611"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN30"><span class='Ref_to_Member'>tm_mon</span></a> <span class='Operator'>&LT;= </span><span class='Number'>1</span><span class='Parentheses'>) 
</span>                <a href="formatting.c.html#LN3611"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN30"><span class='Ref_to_Member'>tm_mon</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN3821"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN3611"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN29"><span class='Ref_to_Member'>tm_mday</span></a> <span class='Operator'>&LT;= </span><span class='Number'>1</span><span class='Parentheses'>) 
</span>                <a href="formatting.c.html#LN3611"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN29"><span class='Ref_to_Member'>tm_mday</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN3614"><span class='Ref_To_Local'>tmfc</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN417"><span class='Ref_to_Member'>ddd</span></a> <span class='Operator'>- </span><a href="formatting.c.html#LN3820"><span class='Ref_To_Local'>y</span></a><span class='Delimiter'>[</span><a href="formatting.c.html#LN3821"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>]; 
</span> 
            <a href="formatting.c.html#LN3617"><span class='Ref_To_Local'>fmask</span></a> <span class='Operator'>|= </span><a href="../../../interfaces/ecpg/pgtypeslib/dt.h.html#LN184"><span class='Ref_to_Macro'>DTK_M</span></a><span class='Parentheses'>(</span><a href="../../../interfaces/ecpg/pgtypeslib/dt.h.html#LN90"><span class='Ref_to_Const'>MONTH</span></a><span class='Parentheses'>) </span><span class='Operator'>| </span><a href="../../../interfaces/ecpg/pgtypeslib/dt.h.html#LN184"><span class='Ref_to_Macro'>DTK_M</span></a><span class='Parentheses'>(</span><a href="../../../interfaces/ecpg/pgtypeslib/dt.h.html#LN92"><span class='Ref_to_Const'>DAY</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if tmfc.ddd&&(tm-&GT;tm_mon... &raquo; </span> 
 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN3614"><span class='Ref_To_Local'>tmfc</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN419"><span class='Ref_to_Member'>ms</span></a><span class='Parentheses'>) 
</span>        <span class='Operator'>*</span><a href="formatting.c.html#LN3611"><span class='Ref_to_Parameter'>fsec</span></a> <span class='Operator'>+= </span><a href="formatting.c.html#LN3614"><span class='Ref_To_Local'>tmfc</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN419"><span class='Ref_to_Member'>ms</span></a> <span class='Operator'>* </span><span class='Number'>1000</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN3614"><span class='Ref_To_Local'>tmfc</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN426"><span class='Ref_to_Member'>us</span></a><span class='Parentheses'>) 
</span>        <span class='Operator'>*</span><a href="formatting.c.html#LN3611"><span class='Ref_to_Parameter'>fsec</span></a> <span class='Operator'>+= </span><a href="formatting.c.html#LN3614"><span class='Ref_To_Local'>tmfc</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN426"><span class='Ref_to_Member'>us</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Range-check date fields according to bit mask computed above */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN3617"><span class='Ref_To_Local'>fmask</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* We already dealt with AD/BC, so pass isjulian = true */ 
</span><a name="LN3853"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>dterr</span> <span class='Operator'>= </span><a href="../../../include/utils/datetime.h.html#LN322"><span class='Ref_to_Proto'>ValidateDate</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN3617"><span class='Ref_To_Local'>fmask</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN3611"><span class='Ref_to_Parameter'>tm</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN3853"><span class='Ref_To_Local'>dterr</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * Force the error to be DTERR_FIELD_OVERFLOW even if ValidateDate 
             * said DTERR_MD_FIELD_OVERFLOW, because we don't want to print an 
             * irrelevant hint about datestyle. 
             */ 
</span>            <a href="datetime.c.html#LN3763"><span class='Ref_to_Func'>DateTimeParseError</span></a><span class='Parentheses'>(</span><a href="../../../interfaces/ecpg/pgtypeslib/dt.h.html#LN26"><span class='Ref_to_Const'>DTERR_FIELD_OVERFLOW</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN3616"><span class='Ref_To_Local'>date_str</span></a><span class='Delimiter'>, </span><span class='String'>"timestamp"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* Range-check time fields too */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN3611"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN28"><span class='Ref_to_Member'>tm_hour</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="formatting.c.html#LN3611"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN28"><span class='Ref_to_Member'>tm_hour</span></a> <span class='Operator'>&GT;= </span><a href="../../../include/datatype/timestamp.h.html#LN77"><span class='Ref_to_Const'>HOURS_PER_DAY</span></a> <span class='Operator'>|| 
</span>        <a href="formatting.c.html#LN3611"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN27"><span class='Ref_to_Member'>tm_min</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="formatting.c.html#LN3611"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN27"><span class='Ref_to_Member'>tm_min</span></a> <span class='Operator'>&GT;= </span><a href="../../../include/datatype/timestamp.h.html#LN88"><span class='Ref_to_Const'>MINS_PER_HOUR</span></a> <span class='Operator'>|| 
</span>        <a href="formatting.c.html#LN3611"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN26"><span class='Ref_to_Member'>tm_sec</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="formatting.c.html#LN3611"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN26"><span class='Ref_to_Member'>tm_sec</span></a> <span class='Operator'>&GT;= </span><a href="../../../include/datatype/timestamp.h.html#LN87"><span class='Ref_to_Const'>SECS_PER_MINUTE</span></a> <span class='Operator'>|| 
</span>        <span class='Operator'>*</span><a href="formatting.c.html#LN3611"><span class='Ref_to_Parameter'>fsec</span></a> <span class='Operator'>&LT; </span><a href="../../../include/c.h.html#LN306"><span class='Ref_to_Macro'>INT64CONST</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>) </span><span class='Operator'>|| *</span><a href="formatting.c.html#LN3611"><span class='Ref_to_Parameter'>fsec</span></a> <span class='Operator'>&GT;= </span><a href="../../../include/datatype/timestamp.h.html#LN93"><span class='Ref_to_Const'>USECS_PER_SEC</span></a><span class='Parentheses'>)</span> 
        <a href="datetime.c.html#LN3763"><span class='Ref_to_Func'>DateTimeParseError</span></a><span class='Parentheses'>(</span><a href="../../../interfaces/ecpg/pgtypeslib/dt.h.html#LN26"><span class='Ref_to_Const'>DTERR_FIELD_OVERFLOW</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN3616"><span class='Ref_To_Local'>date_str</span></a><span class='Delimiter'>, </span><span class='String'>"timestamp"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="formatting.c.html#LN444"><span class='Ref_to_Macro'>DEBUG_TM</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN3611"><span class='Ref_to_Parameter'>tm</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN3616"><span class='Ref_To_Local'>date_str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end do_to_timestamp &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/********************************************************************** 
 *  the NUMBER version part 
 *********************************************************************/ 
</span> 
 
<span class='Keyword'>static char </span><span class='Operator'>* 
</span><a name="LN3885"></a><span class='Declare_Function'>fill_str</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>str</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>c</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>max</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    memset<span class='Parentheses'>(</span><a href="formatting.c.html#LN3885"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN3885"><span class='Ref_to_Parameter'>c</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN3885"><span class='Ref_to_Parameter'>max</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><span class='Parentheses'>(</span><a href="formatting.c.html#LN3885"><span class='Ref_to_Parameter'>str</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN3885"><span class='Ref_to_Parameter'>max</span></a><span class='Parentheses'>) </span><span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="formatting.c.html#LN3885"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>; 
} 
</span> 
<a name="LN3892"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>zeroize_NUM</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>_n</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span><span class='Control'>do</span> <span class='Delimiter'>{ </span><span class='Operator'>\ 
</span>    <span class='Parentheses'>(</span><a href="formatting.c.html#LN3892"><span class='Ref_to_Parameter'>_n</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>flag      <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>;</span>    <span class='Operator'>\ 
</span>    <span class='Parentheses'>(</span><a href="formatting.c.html#LN3892"><span class='Ref_to_Parameter'>_n</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>lsign     <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>;</span>    <span class='Operator'>\ 
</span>    <span class='Parentheses'>(</span><a href="formatting.c.html#LN3892"><span class='Ref_to_Parameter'>_n</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>pre       <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>;</span>    <span class='Operator'>\ 
</span>    <span class='Parentheses'>(</span><a href="formatting.c.html#LN3892"><span class='Ref_to_Parameter'>_n</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>post      <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>;</span>    <span class='Operator'>\ 
</span>    <span class='Parentheses'>(</span><a href="formatting.c.html#LN3892"><span class='Ref_to_Parameter'>_n</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>pre_lsign_num <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>;</span>    <span class='Operator'>\ 
</span>    <span class='Parentheses'>(</span><a href="formatting.c.html#LN3892"><span class='Ref_to_Parameter'>_n</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>need_locale   <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>;</span>    <span class='Operator'>\ 
</span>    <span class='Parentheses'>(</span><a href="formatting.c.html#LN3892"><span class='Ref_to_Parameter'>_n</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>multi     <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>;</span>    <span class='Operator'>\ 
</span>    <span class='Parentheses'>(</span><a href="formatting.c.html#LN3892"><span class='Ref_to_Parameter'>_n</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>zero_start    <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>;</span>    <span class='Operator'>\ 
</span>    <span class='Parentheses'>(</span><a href="formatting.c.html#LN3892"><span class='Ref_to_Parameter'>_n</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>zero_end      <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>;</span>    <span class='Operator'>\ 
</span><span class='Delimiter'>} </span><span class='Control'>while</span><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>) 
</span> 
<span class='Comment_Multi_Line'>/* select a NUMCacheEntry to hold the given format picture */ 
</span><span class='Keyword'>static </span><a href="formatting.c.html#LN384"><span class='Ref_to_Typedef'>NUMCacheEntry</span></a> <span class='Operator'>* 
</span><a name="LN3907"></a><span class='Declare_Function'>NUM_cache_getnew</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>str</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3909"></a>    <a href="formatting.c.html#LN384"><span class='Ref_to_Typedef'>NUMCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>ent</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* counter overflow check - paranoia? */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN401"><span class='Ref_to_Global_Var'>NUMCounter</span></a> <span class='Operator'>&GT;= </span><span class='Parentheses'>(</span>INT_MAX <span class='Operator'>- </span><a href="formatting.c.html#LN372"><span class='Ref_to_Const'>NUM_CACHE_ENTRIES</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="formatting.c.html#LN401"><span class='Ref_to_Global_Var'>NUMCounter</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN3909"><span class='Ref_To_Local'>ent</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN399"><span class='Ref_to_Global_Var'>NUMCache</span></a><span class='Delimiter'>; </span><a href="formatting.c.html#LN3909"><span class='Ref_To_Local'>ent</span></a> <span class='Operator'>&LT; </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN399"><span class='Ref_to_Global_Var'>NUMCache</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN372"><span class='Ref_to_Const'>NUM_CACHE_ENTRIES</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; </span><a href="formatting.c.html#LN3909"><span class='Ref_To_Local'>ent</span></a><span class='Operator'>++</span><span class='Parentheses'>)</span> 
            <a href="formatting.c.html#LN3909"><span class='Ref_To_Local'>ent</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN389"><span class='Ref_to_Member'>age</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Operator'>++</span><a href="formatting.c.html#LN401"><span class='Ref_to_Global_Var'>NUMCounter</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If cache is full, remove oldest entry (or recycle first not-valid one) 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN400"><span class='Ref_to_Global_Var'>n_NUMCache</span></a> <span class='Operator'>&GT;= </span><a href="formatting.c.html#LN372"><span class='Ref_to_Const'>NUM_CACHE_ENTRIES</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN3925"></a>        <a href="formatting.c.html#LN384"><span class='Ref_to_Typedef'>NUMCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>old</span> <span class='Operator'>= </span><a href="formatting.c.html#LN399"><span class='Ref_to_Global_Var'>NUMCache</span></a> <span class='Operator'>+ </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
<span class='Directive'>#ifdef</span> DEBUG_TO_FROM_CHAR 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN62"><span class='Ref_to_Const'>DEBUG_elog_output</span></a><span class='Delimiter'>, </span><span class='String'>"Cache is full (%d)"</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN400"><span class='Ref_to_Global_Var'>n_NUMCache</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN3925"><span class='Ref_To_Local'>old</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN388"><span class='Ref_to_Member'>valid</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN3909"><span class='Ref_To_Local'>ent</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN399"><span class='Ref_to_Global_Var'>NUMCache</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; </span><a href="formatting.c.html#LN3909"><span class='Ref_To_Local'>ent</span></a> <span class='Operator'>&LT; </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN399"><span class='Ref_to_Global_Var'>NUMCache</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN372"><span class='Ref_to_Const'>NUM_CACHE_ENTRIES</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; </span><a href="formatting.c.html#LN3909"><span class='Ref_To_Local'>ent</span></a><span class='Operator'>++</span><span class='Parentheses'>)</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="formatting.c.html#LN3909"><span class='Ref_To_Local'>ent</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN388"><span class='Ref_to_Member'>valid</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <a href="formatting.c.html#LN3925"><span class='Ref_To_Local'>old</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN3909"><span class='Ref_To_Local'>ent</span></a><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN3909"><span class='Ref_To_Local'>ent</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN389"><span class='Ref_to_Member'>age</span></a> <span class='Operator'>&LT; </span><a href="formatting.c.html#LN3925"><span class='Ref_To_Local'>old</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN389"><span class='Ref_to_Member'>age</span></a><span class='Parentheses'>) 
</span>                    <a href="formatting.c.html#LN3925"><span class='Ref_To_Local'>old</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN3909"><span class='Ref_To_Local'>ent</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>} 
</span><span class='Directive'>#ifdef</span> DEBUG_TO_FROM_CHAR 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN62"><span class='Ref_to_Const'>DEBUG_elog_output</span></a><span class='Delimiter'>, </span><span class='String'>"OLD: \"%s\" AGE: %d"</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN3925"><span class='Ref_To_Local'>old</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN387"><span class='Ref_to_Member'>str</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN3925"><span class='Ref_To_Local'>old</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN389"><span class='Ref_to_Member'>age</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
        <a href="formatting.c.html#LN3925"><span class='Ref_To_Local'>old</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN388"><span class='Ref_to_Member'>valid</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>        <a href="../../../include/c.h.html#LN829"><span class='Ref_to_Macro'>StrNCpy</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN3925"><span class='Ref_To_Local'>old</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN387"><span class='Ref_to_Member'>str</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN3907"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN371"><span class='Ref_to_Const'>NUM_CACHE_SIZE</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="formatting.c.html#LN3925"><span class='Ref_To_Local'>old</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN389"><span class='Ref_to_Member'>age</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Operator'>++</span><a href="formatting.c.html#LN401"><span class='Ref_to_Global_Var'>NUMCounter</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* caller is expected to fill format and Num, then set valid */ 
</span>        <span class='Control'>return</span> <a href="formatting.c.html#LN3925"><span class='Ref_To_Local'>old</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if n_NUMCache&GT;=NUM_CACHE... &raquo; </span> 
    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span><span class='Directive'>#ifdef</span> DEBUG_TO_FROM_CHAR 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN62"><span class='Ref_to_Const'>DEBUG_elog_output</span></a><span class='Delimiter'>, </span><span class='String'>"NEW (%d)"</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN400"><span class='Ref_to_Global_Var'>n_NUMCache</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
        <a href="formatting.c.html#LN3909"><span class='Ref_To_Local'>ent</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN399"><span class='Ref_to_Global_Var'>NUMCache</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN400"><span class='Ref_to_Global_Var'>n_NUMCache</span></a><span class='Delimiter'>; 
</span>        <a href="formatting.c.html#LN3909"><span class='Ref_To_Local'>ent</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN388"><span class='Ref_to_Member'>valid</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>        <a href="../../../include/c.h.html#LN829"><span class='Ref_to_Macro'>StrNCpy</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN3909"><span class='Ref_To_Local'>ent</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN387"><span class='Ref_to_Member'>str</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN3907"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN371"><span class='Ref_to_Const'>NUM_CACHE_SIZE</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="formatting.c.html#LN3909"><span class='Ref_To_Local'>ent</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN389"><span class='Ref_to_Member'>age</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Operator'>++</span><a href="formatting.c.html#LN401"><span class='Ref_to_Global_Var'>NUMCounter</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* caller is expected to fill format and Num, then set valid */ 
</span>        <span class='Operator'>++</span><a href="formatting.c.html#LN400"><span class='Ref_to_Global_Var'>n_NUMCache</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <a href="formatting.c.html#LN3909"><span class='Ref_To_Local'>ent</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
}</span><span class='Auto_Annotations'> &laquo; end NUM_cache_getnew &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* look for an existing NUMCacheEntry matching the given format picture */ 
</span><span class='Keyword'>static </span><a href="formatting.c.html#LN384"><span class='Ref_to_Typedef'>NUMCacheEntry</span></a> <span class='Operator'>* 
</span><a name="LN3969"></a><span class='Declare_Function'>NUM_cache_search</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>str</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3971"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN3972"></a>    <a href="formatting.c.html#LN384"><span class='Ref_to_Typedef'>NUMCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>ent</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* counter overflow check - paranoia? */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN401"><span class='Ref_to_Global_Var'>NUMCounter</span></a> <span class='Operator'>&GT;= </span><span class='Parentheses'>(</span>INT_MAX <span class='Operator'>- </span><a href="formatting.c.html#LN372"><span class='Ref_to_Const'>NUM_CACHE_ENTRIES</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="formatting.c.html#LN401"><span class='Ref_to_Global_Var'>NUMCounter</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN3972"><span class='Ref_To_Local'>ent</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN399"><span class='Ref_to_Global_Var'>NUMCache</span></a><span class='Delimiter'>; </span><a href="formatting.c.html#LN3972"><span class='Ref_To_Local'>ent</span></a> <span class='Operator'>&LT; </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN399"><span class='Ref_to_Global_Var'>NUMCache</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN372"><span class='Ref_to_Const'>NUM_CACHE_ENTRIES</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; </span><a href="formatting.c.html#LN3972"><span class='Ref_To_Local'>ent</span></a><span class='Operator'>++</span><span class='Parentheses'>)</span> 
            <a href="formatting.c.html#LN3972"><span class='Ref_To_Local'>ent</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN389"><span class='Ref_to_Member'>age</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Operator'>++</span><a href="formatting.c.html#LN401"><span class='Ref_to_Global_Var'>NUMCounter</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN3971"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN3972"><span class='Ref_To_Local'>ent</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN399"><span class='Ref_to_Global_Var'>NUMCache</span></a><span class='Delimiter'>; </span><a href="formatting.c.html#LN3971"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="formatting.c.html#LN400"><span class='Ref_to_Global_Var'>n_NUMCache</span></a><span class='Delimiter'>; </span><a href="formatting.c.html#LN3971"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN3972"><span class='Ref_To_Local'>ent</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN3972"><span class='Ref_To_Local'>ent</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN388"><span class='Ref_to_Member'>valid</span></a> <span class='Operator'>&& </span>strcmp<span class='Parentheses'>(</span><a href="formatting.c.html#LN3972"><span class='Ref_To_Local'>ent</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN387"><span class='Ref_to_Member'>str</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN3969"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <a href="formatting.c.html#LN3972"><span class='Ref_To_Local'>ent</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN389"><span class='Ref_to_Member'>age</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Operator'>++</span><a href="formatting.c.html#LN401"><span class='Ref_to_Global_Var'>NUMCounter</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>return</span> <a href="formatting.c.html#LN3972"><span class='Ref_To_Local'>ent</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end NUM_cache_search &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* Find or create a NUMCacheEntry for the given format picture */ 
</span><span class='Keyword'>static </span><a href="formatting.c.html#LN384"><span class='Ref_to_Typedef'>NUMCacheEntry</span></a> <span class='Operator'>* 
</span><a name="LN3997"></a><span class='Declare_Function'>NUM_cache_fetch</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>str</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3999"></a>    <a href="formatting.c.html#LN384"><span class='Ref_to_Typedef'>NUMCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>ent</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="formatting.c.html#LN3999"><span class='Ref_To_Local'>ent</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN996"><span class='Ref_to_Proto'>NUM_cache_search</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN3997"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>))</span> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * Not in the cache, must run parser and save a new format-picture to 
         * the cache.  Do not mark the cache entry valid until parsing 
         * succeeds. 
         */ 
</span>        <a href="formatting.c.html#LN3999"><span class='Ref_To_Local'>ent</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN995"><span class='Ref_to_Proto'>NUM_cache_getnew</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN3997"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="formatting.c.html#LN3892"><span class='Ref_to_Macro'>zeroize_NUM</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN3999"><span class='Ref_To_Local'>ent</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN390"><span class='Ref_to_Member'>Num</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="formatting.c.html#LN958"><span class='Ref_to_Proto'>parse_format</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN3999"><span class='Ref_To_Local'>ent</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN386"><span class='Ref_to_Member'>format</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN3997"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN824"><span class='Ref_to_Global_Var'>NUM_keywords</span></a><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN896"><span class='Ref_to_Global_Var'>NUM_index</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN103"><span class='Ref_to_Const'>NUM_TYPE</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN3999"><span class='Ref_To_Local'>ent</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN390"><span class='Ref_to_Member'>Num</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="formatting.c.html#LN3999"><span class='Ref_To_Local'>ent</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN388"><span class='Ref_to_Member'>valid</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>return</span> <a href="formatting.c.html#LN3999"><span class='Ref_To_Local'>ent</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end NUM_cache_fetch &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * Cache routine for NUM to_char version 
 * ---------- 
 */ 
</span><span class='Keyword'>static </span><a href="formatting.c.html#LN164"><span class='Ref_to_Struct'>FormatNode</span></a> <span class='Operator'>* 
</span><a name="LN4025"></a><span class='Declare_Function'>NUM_cache</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>len</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN305"><span class='Ref_to_Typedef'>NUMDesc</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>Num</span><span class='Delimiter'>, </span><a href="../../../../contrib/seg/segparse.y.html#LN46"><span class='Ref_to_Global_Var'>text</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pars_str</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Declare_Parameter'>shouldFree</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4027"></a>    <a href="formatting.c.html#LN164"><span class='Ref_to_Struct'>FormatNode</span></a> <span class='Operator'>*</span><span class='Declare_Local'>format</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN4028"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>str</span><span class='Delimiter'>; 
</span> 
    <a href="formatting.c.html#LN4028"><span class='Ref_To_Local'>str</span></a> <span class='Operator'>= </span><a href="../../../include/utils/builtins.h.html#LN87"><span class='Ref_to_Proto'>text_to_cstring</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4025"><span class='Ref_to_Parameter'>pars_str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4025"><span class='Ref_to_Parameter'>len</span></a> <span class='Operator'>&GT; </span><a href="formatting.c.html#LN371"><span class='Ref_to_Const'>NUM_CACHE_SIZE</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * Allocate new memory if format picture is bigger than static cache 
         * and do not use cache (call parser always) 
         */ 
</span>        <a href="formatting.c.html#LN4027"><span class='Ref_To_Local'>format</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN164"><span class='Ref_to_Struct'>FormatNode</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>((</span><a href="formatting.c.html#LN4025"><span class='Ref_to_Parameter'>len</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>) </span><span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="formatting.c.html#LN164"><span class='Ref_to_Struct'>FormatNode</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <span class='Operator'>*</span><a href="formatting.c.html#LN4025"><span class='Ref_to_Parameter'>shouldFree</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
        <a href="formatting.c.html#LN3892"><span class='Ref_to_Macro'>zeroize_NUM</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4025"><span class='Ref_to_Parameter'>Num</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="formatting.c.html#LN958"><span class='Ref_to_Proto'>parse_format</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4027"><span class='Ref_To_Local'>format</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN4028"><span class='Ref_To_Local'>str</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN824"><span class='Ref_to_Global_Var'>NUM_keywords</span></a><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN896"><span class='Ref_to_Global_Var'>NUM_index</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN103"><span class='Ref_to_Const'>NUM_TYPE</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN4025"><span class='Ref_to_Parameter'>Num</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * Use cache buffers 
         */ 
</span><a name="LN4052"></a>        <a href="formatting.c.html#LN384"><span class='Ref_to_Typedef'>NUMCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>ent</span> <span class='Operator'>= </span><a href="formatting.c.html#LN997"><span class='Ref_to_Proto'>NUM_cache_fetch</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4028"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Operator'>*</span><a href="formatting.c.html#LN4025"><span class='Ref_to_Parameter'>shouldFree</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
        <a href="formatting.c.html#LN4027"><span class='Ref_To_Local'>format</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN4052"><span class='Ref_To_Local'>ent</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN386"><span class='Ref_to_Member'>format</span></a><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Copy cache to used struct 
         */ 
</span>        <a href="formatting.c.html#LN4025"><span class='Ref_to_Parameter'>Num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN310"><span class='Ref_to_Member'>flag</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN4052"><span class='Ref_To_Local'>ent</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN390"><span class='Ref_to_Member'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN310"><span class='Ref_to_Member'>flag</span></a><span class='Delimiter'>; 
</span>        <a href="formatting.c.html#LN4025"><span class='Ref_to_Parameter'>Num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN309"><span class='Ref_to_Member'>lsign</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN4052"><span class='Ref_To_Local'>ent</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN390"><span class='Ref_to_Member'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN309"><span class='Ref_to_Member'>lsign</span></a><span class='Delimiter'>; 
</span>        <a href="formatting.c.html#LN4025"><span class='Ref_to_Parameter'>Num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN307"><span class='Ref_to_Member'>pre</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN4052"><span class='Ref_To_Local'>ent</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN390"><span class='Ref_to_Member'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN307"><span class='Ref_to_Member'>pre</span></a><span class='Delimiter'>; 
</span>        <a href="formatting.c.html#LN4025"><span class='Ref_to_Parameter'>Num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN308"><span class='Ref_to_Member'>post</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN4052"><span class='Ref_To_Local'>ent</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN390"><span class='Ref_to_Member'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN308"><span class='Ref_to_Member'>post</span></a><span class='Delimiter'>; 
</span>        <a href="formatting.c.html#LN4025"><span class='Ref_to_Parameter'>Num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN311"><span class='Ref_to_Member'>pre_lsign_num</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN4052"><span class='Ref_To_Local'>ent</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN390"><span class='Ref_to_Member'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN311"><span class='Ref_to_Member'>pre_lsign_num</span></a><span class='Delimiter'>; 
</span>        <a href="formatting.c.html#LN4025"><span class='Ref_to_Parameter'>Num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN315"><span class='Ref_to_Member'>need_locale</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN4052"><span class='Ref_To_Local'>ent</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN390"><span class='Ref_to_Member'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN315"><span class='Ref_to_Member'>need_locale</span></a><span class='Delimiter'>; 
</span>        <a href="formatting.c.html#LN4025"><span class='Ref_to_Parameter'>Num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN312"><span class='Ref_to_Member'>multi</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN4052"><span class='Ref_To_Local'>ent</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN390"><span class='Ref_to_Member'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN312"><span class='Ref_to_Member'>multi</span></a><span class='Delimiter'>; 
</span>        <a href="formatting.c.html#LN4025"><span class='Ref_to_Parameter'>Num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN313"><span class='Ref_to_Member'>zero_start</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN4052"><span class='Ref_To_Local'>ent</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN390"><span class='Ref_to_Member'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN313"><span class='Ref_to_Member'>zero_start</span></a><span class='Delimiter'>; 
</span>        <a href="formatting.c.html#LN4025"><span class='Ref_to_Parameter'>Num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN314"><span class='Ref_to_Member'>zero_end</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN4052"><span class='Ref_To_Local'>ent</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN390"><span class='Ref_to_Member'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN314"><span class='Ref_to_Member'>zero_end</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
 
<span class='Directive'>#ifdef</span> DEBUG_TO_FROM_CHAR 
    <span class='Comment_Multi_Line'>/* dump_node(format, len); */ 
</span>    <a href="formatting.c.html#LN966"><span class='Ref_to_Proto'>dump_index</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN824"><span class='Ref_to_Global_Var'>NUM_keywords</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN896"><span class='Ref_to_Global_Var'>NUM_index</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
 
    <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4028"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="formatting.c.html#LN4027"><span class='Ref_To_Local'>format</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end NUM_cache &raquo; </span> 
 
 
<span class='Keyword'>static char </span><span class='Operator'>* 
</span><a name="LN4083"></a><span class='Declare_Function'>int_to_roman</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>number</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4085"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>len</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>, 
</span><a name="LN4086"></a>                <span class='Declare_Local'>num</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN4087"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>p</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span><a name="LN4088"></a>               <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>, 
</span><a name="LN4089"></a>                <span class='Declare_Local'>numstr</span><span class='Delimiter'>[</span><span class='Number'>5</span><span class='Delimiter'>]; 
</span> 
    <a href="formatting.c.html#LN4088"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Number'>16</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="formatting.c.html#LN4088"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4083"><span class='Ref_to_Parameter'>number</span></a> <span class='Operator'>&GT; </span><span class='Number'>3999</span> <span class='Operator'>|| </span><a href="formatting.c.html#LN4083"><span class='Ref_to_Parameter'>number</span></a> <span class='Operator'>&LT; </span><span class='Number'>1</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="formatting.c.html#LN982"><span class='Ref_to_Proto'>fill_str</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4088"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>, </span><span class='String'>'#'</span><span class='Delimiter'>, </span><span class='Number'>15</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <a href="formatting.c.html#LN4088"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="formatting.c.html#LN4085"><span class='Ref_To_Local'>len</span></a> <span class='Operator'>= </span><a href="../../../pl/plperl/plperl.h.html#LN60"><span class='Ref_to_Macro'>snprintf</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4089"><span class='Ref_To_Local'>numstr</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="formatting.c.html#LN4089"><span class='Ref_To_Local'>numstr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='String'>"%d"</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN4083"><span class='Ref_to_Parameter'>number</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4087"><span class='Ref_To_Local'>p</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN4089"><span class='Ref_To_Local'>numstr</span></a><span class='Delimiter'>; </span><span class='Operator'>*</span><a href="formatting.c.html#LN4087"><span class='Ref_To_Local'>p</span></a> <span class='Operator'>!= </span><span class='String'>'\0'</span><span class='Delimiter'>; </span><a href="formatting.c.html#LN4087"><span class='Ref_To_Local'>p</span></a><span class='Operator'>++</span><span class='Delimiter'>, </span><span class='Operator'>--</span><a href="formatting.c.html#LN4085"><span class='Ref_To_Local'>len</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="formatting.c.html#LN4086"><span class='Ref_To_Local'>num</span></a> <span class='Operator'>= *</span><a href="formatting.c.html#LN4087"><span class='Ref_To_Local'>p</span></a> <span class='Operator'>- </span><span class='Number'>49</span><span class='Delimiter'>;</span>          <span class='Comment_Single_Line'>/* 48 ascii + 1 */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4086"><span class='Ref_To_Local'>num</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4085"><span class='Ref_To_Local'>len</span></a> <span class='Operator'>&GT; </span><span class='Number'>3</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4086"><span class='Ref_To_Local'>num</span></a><span class='Operator'>-- != -</span><span class='Number'>1</span><span class='Parentheses'>) 
</span>                strcat<span class='Parentheses'>(</span><a href="formatting.c.html#LN4088"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>, </span><span class='String'>"M"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4085"><span class='Ref_To_Local'>len</span></a> <span class='Operator'>== </span><span class='Number'>3</span><span class='Parentheses'>) 
</span>                strcat<span class='Parentheses'>(</span><a href="formatting.c.html#LN4088"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN273"><span class='Ref_to_Global_Var'>rm100</span></a><span class='Delimiter'>[</span><a href="formatting.c.html#LN4086"><span class='Ref_To_Local'>num</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4085"><span class='Ref_To_Local'>len</span></a> <span class='Operator'>== </span><span class='Number'>2</span><span class='Parentheses'>) 
</span>                strcat<span class='Parentheses'>(</span><a href="formatting.c.html#LN4088"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN272"><span class='Ref_to_Global_Var'>rm10</span></a><span class='Delimiter'>[</span><a href="formatting.c.html#LN4086"><span class='Ref_To_Local'>num</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4085"><span class='Ref_To_Local'>len</span></a> <span class='Operator'>== </span><span class='Number'>1</span><span class='Parentheses'>) 
</span>                strcat<span class='Parentheses'>(</span><a href="formatting.c.html#LN4088"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN271"><span class='Ref_to_Global_Var'>rm1</span></a><span class='Delimiter'>[</span><a href="formatting.c.html#LN4086"><span class='Ref_To_Local'>num</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for p=numstr;*p!='\0';p++... &raquo; </span> 
    <span class='Control'>return</span> <a href="formatting.c.html#LN4088"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end int_to_roman &raquo; </span> 
 
 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * Locale 
 * ---------- 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN4132"></a><span class='Declare_Function'>NUM_prepare_locale</span><span class='Parentheses'>(</span><a href="formatting.c.html#LN920"><span class='Ref_to_Struct'>NUMProc</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>Np</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4132"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN315"><span class='Ref_to_Member'>need_locale</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN4136"></a>        <span class='Control'>struct</span> <a href="formatting.c.html#LN4136"><span class='Ref_To_Local'>lconv</span></a> <span class='Operator'>*</span><span class='Declare_Local'>lconv</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Get locales 
         */ 
</span>        <a href="formatting.c.html#LN4136"><span class='Ref_To_Local'>lconv</span></a> <span class='Operator'>= </span><a href="../../../include/utils/pg_locale.h.html#LN57"><span class='Ref_to_Proto'>PGLC_localeconv</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Positive / Negative number sign 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4136"><span class='Ref_To_Local'>lconv</span></a><span class='Operator'>-&GT;</span>negative_sign <span class='Operator'>&& *</span><a href="formatting.c.html#LN4136"><span class='Ref_To_Local'>lconv</span></a><span class='Operator'>-&GT;</span>negative_sign<span class='Parentheses'>) 
</span>            <a href="formatting.c.html#LN4132"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN942"><span class='Ref_to_Member'>L_negative_sign</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN4136"><span class='Ref_To_Local'>lconv</span></a><span class='Operator'>-&GT;</span>negative_sign<span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="formatting.c.html#LN4132"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN942"><span class='Ref_to_Member'>L_negative_sign</span></a> <span class='Operator'>= </span><span class='String'>"-"</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4136"><span class='Ref_To_Local'>lconv</span></a><span class='Operator'>-&GT;</span>positive_sign <span class='Operator'>&& *</span><a href="formatting.c.html#LN4136"><span class='Ref_To_Local'>lconv</span></a><span class='Operator'>-&GT;</span>positive_sign<span class='Parentheses'>) 
</span>            <a href="formatting.c.html#LN4132"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN943"><span class='Ref_to_Member'>L_positive_sign</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN4136"><span class='Ref_To_Local'>lconv</span></a><span class='Operator'>-&GT;</span>positive_sign<span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="formatting.c.html#LN4132"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN943"><span class='Ref_to_Member'>L_positive_sign</span></a> <span class='Operator'>= </span><span class='String'>"+"</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Number decimal point 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4136"><span class='Ref_To_Local'>lconv</span></a><span class='Operator'>-&GT;</span>decimal_point <span class='Operator'>&& *</span><a href="formatting.c.html#LN4136"><span class='Ref_To_Local'>lconv</span></a><span class='Operator'>-&GT;</span>decimal_point<span class='Parentheses'>) 
</span>            <a href="formatting.c.html#LN4132"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN944"><span class='Ref_to_Member'>decimal</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN4136"><span class='Ref_To_Local'>lconv</span></a><span class='Operator'>-&GT;</span>decimal_point<span class='Delimiter'>; 
</span> 
        <span class='Control'>else</span> 
            <a href="formatting.c.html#LN4132"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN944"><span class='Ref_to_Member'>decimal</span></a> <span class='Operator'>= </span><span class='String'>"."</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="formatting.c.html#LN346"><span class='Ref_to_Macro'>IS_LDECIMAL</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4132"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Parentheses'>))</span> 
            <a href="formatting.c.html#LN4132"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN944"><span class='Ref_to_Member'>decimal</span></a> <span class='Operator'>= </span><span class='String'>"."</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Number thousands separator 
         * 
         * Some locales (e.g. broken glibc pt_BR), have a comma for decimal, 
         * but "" for thousands_sep, so we set the thousands_sep too. 
         * http://archives.postgresql.org/pgsql-hackers/2007-11/msg00772.php 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4136"><span class='Ref_To_Local'>lconv</span></a><span class='Operator'>-&GT;</span>thousands_sep <span class='Operator'>&& *</span><a href="formatting.c.html#LN4136"><span class='Ref_To_Local'>lconv</span></a><span class='Operator'>-&GT;</span>thousands_sep<span class='Parentheses'>) 
</span>            <a href="formatting.c.html#LN4132"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN945"><span class='Ref_to_Member'>L_thousands_sep</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN4136"><span class='Ref_To_Local'>lconv</span></a><span class='Operator'>-&GT;</span>thousands_sep<span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* Make sure thousands separator doesn't match decimal point symbol. */ 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="formatting.c.html#LN4132"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN944"><span class='Ref_to_Member'>decimal</span></a><span class='Delimiter'>, </span><span class='String'>","</span><span class='Parentheses'>) </span><span class='Operator'>!=</span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <a href="formatting.c.html#LN4132"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN945"><span class='Ref_to_Member'>L_thousands_sep</span></a> <span class='Operator'>= </span><span class='String'>","</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="formatting.c.html#LN4132"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN945"><span class='Ref_to_Member'>L_thousands_sep</span></a> <span class='Operator'>= </span><span class='String'>"."</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Currency symbol 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4136"><span class='Ref_To_Local'>lconv</span></a><span class='Operator'>-&GT;</span>currency_symbol <span class='Operator'>&& *</span><a href="formatting.c.html#LN4136"><span class='Ref_To_Local'>lconv</span></a><span class='Operator'>-&GT;</span>currency_symbol<span class='Parentheses'>) 
</span>            <a href="formatting.c.html#LN4132"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN946"><span class='Ref_to_Member'>L_currency_symbol</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN4136"><span class='Ref_To_Local'>lconv</span></a><span class='Operator'>-&GT;</span>currency_symbol<span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="formatting.c.html#LN4132"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN946"><span class='Ref_to_Member'>L_currency_symbol</span></a> <span class='Operator'>= </span><span class='String'>" "</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if Np-&GT;Num-&GT;need_locale &raquo; </span> 
    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * Default values 
         */ 
</span>        <a href="formatting.c.html#LN4132"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN942"><span class='Ref_to_Member'>L_negative_sign</span></a> <span class='Operator'>= </span><span class='String'>"-"</span><span class='Delimiter'>; 
</span>        <a href="formatting.c.html#LN4132"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN943"><span class='Ref_to_Member'>L_positive_sign</span></a> <span class='Operator'>= </span><span class='String'>"+"</span><span class='Delimiter'>; 
</span>        <a href="formatting.c.html#LN4132"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN944"><span class='Ref_to_Member'>decimal</span></a> <span class='Operator'>= </span><span class='String'>"."</span><span class='Delimiter'>; 
</span> 
        <a href="formatting.c.html#LN4132"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN945"><span class='Ref_to_Member'>L_thousands_sep</span></a> <span class='Operator'>= </span><span class='String'>","</span><span class='Delimiter'>; 
</span>        <a href="formatting.c.html#LN4132"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN946"><span class='Ref_to_Member'>L_currency_symbol</span></a> <span class='Operator'>= </span><span class='String'>" "</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
}</span><span class='Auto_Annotations'> &laquo; end NUM_prepare_locale &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * Return pointer of last relevant number after decimal point 
 *  12.0500 --&GT; last relevant is '5' 
 *  12.0000 --&GT; last relevant is '.' 
 * If there is no decimal point, return NULL (which will result in same 
 * behavior as if FM hadn't been specified). 
 * ---------- 
 */ 
</span><span class='Keyword'>static char </span><span class='Operator'>* 
</span><a name="LN4214"></a><span class='Declare_Function'>get_last_relevant_decnum</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>num</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4216"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>, 
</span><a name="LN4217"></a>               <span class='Operator'>*</span><span class='Declare_Local'>p</span> <span class='Operator'>= </span>strchr<span class='Parentheses'>(</span><a href="formatting.c.html#LN4214"><span class='Ref_to_Parameter'>num</span></a><span class='Delimiter'>, </span><span class='String'>'.'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<span class='Directive'>#ifdef</span> DEBUG_TO_FROM_CHAR 
    <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN62"><span class='Ref_to_Const'>DEBUG_elog_output</span></a><span class='Delimiter'>, </span><span class='String'>"get_last_relevant_decnum()"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="formatting.c.html#LN4217"><span class='Ref_To_Local'>p</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <a href="formatting.c.html#LN4216"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN4217"><span class='Ref_To_Local'>p</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>while</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><span class='Parentheses'>(</span><span class='Operator'>++</span><a href="formatting.c.html#LN4217"><span class='Ref_To_Local'>p</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="formatting.c.html#LN4217"><span class='Ref_To_Local'>p</span></a> <span class='Operator'>!= </span><span class='String'>'0'</span><span class='Parentheses'>) 
</span>            <a href="formatting.c.html#LN4216"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN4217"><span class='Ref_To_Local'>p</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>return</span> <a href="formatting.c.html#LN4216"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end get_last_relevant_decnum &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * Number extraction for TO_NUMBER() 
 * ---------- 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN4242"></a><span class='Declare_Function'>NUM_numpart_from_char</span><span class='Parentheses'>(</span><a href="formatting.c.html#LN920"><span class='Ref_to_Struct'>NUMProc</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>Np</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>id</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>input_len</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4244"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>isread</span> <span class='Operator'>= </span><span class='Boolean'>FALSE</span><span class='Delimiter'>; 
</span> 
<span class='Directive'>#ifdef</span> DEBUG_TO_FROM_CHAR 
    <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN62"><span class='Ref_to_Const'>DEBUG_elog_output</span></a><span class='Delimiter'>, </span><span class='String'>" --- scan start --- id=%s"</span><span class='Delimiter'>, 
</span>         <span class='Parentheses'>(</span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>id</span></a> <span class='Operator'>== </span><a href="formatting.c.html#LN675"><span class='Ref_to_EnumConst'>NUM_0</span></a> <span class='Operator'>|| </span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>id</span></a> <span class='Operator'>== </span><a href="formatting.c.html#LN676"><span class='Ref_to_EnumConst'>NUM_9</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='String'>"NUM_0/9"</span> <span class='Operator'>: </span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>id</span></a> <span class='Operator'>== </span><a href="formatting.c.html#LN674"><span class='Ref_to_EnumConst'>NUM_DEC</span></a> <span class='Operator'>? </span><span class='String'>"NUM_DEC"</span> <span class='Operator'>: </span><span class='String'>"???"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
 
<a name="LN4251"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>OVERLOAD_TEST</span>   <span class='Parentheses'>(</span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span>inout_p <span class='Operator'>&GT;= </span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span>inout <span class='Operator'>+ </span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>input_len</span></a><span class='Parentheses'>) 
</span><a name="LN4252"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>AMOUNT_TEST</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>_s</span><span class='Parentheses'>) (</span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>input_len</span></a><span class='Operator'>-</span><span class='Parentheses'>(</span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span>inout_p<span class='Operator'>-</span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span>inout<span class='Parentheses'>) </span><span class='Operator'>&GT;= </span>_s<span class='Parentheses'>)</span> 
 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4251"><span class='Ref_to_Const'>OVERLOAD_TEST</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a> <span class='Operator'>== </span><span class='String'>' '</span><span class='Parentheses'>) 
</span>        <a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4251"><span class='Ref_to_Const'>OVERLOAD_TEST</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * read sign before number 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN936"><span class='Ref_to_Member'>number</span></a> <span class='Operator'>== </span><span class='String'>' '</span> <span class='Operator'>&& </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>id</span></a> <span class='Operator'>== </span><a href="formatting.c.html#LN675"><span class='Ref_to_EnumConst'>NUM_0</span></a> <span class='Operator'>|| </span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>id</span></a> <span class='Operator'>== </span><a href="formatting.c.html#LN676"><span class='Ref_to_EnumConst'>NUM_9</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>        <span class='Parentheses'>(</span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN934"><span class='Ref_to_Member'>read_pre</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN933"><span class='Ref_to_Member'>read_post</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span><span class='Directive'>#ifdef</span> DEBUG_TO_FROM_CHAR 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN62"><span class='Ref_to_Const'>DEBUG_elog_output</span></a><span class='Delimiter'>, </span><span class='String'>"Try read sign (%c), locale positive: %s, negative: %s"</span><span class='Delimiter'>, 
</span>             <span class='Operator'>*</span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN943"><span class='Ref_to_Member'>L_positive_sign</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN942"><span class='Ref_to_Member'>L_negative_sign</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
 
        <span class='Comment_Multi_Line'>/* 
         * locale sign 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN352"><span class='Ref_to_Macro'>IS_LSIGN</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Parentheses'>) </span><span class='Operator'>&& </span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN309"><span class='Ref_to_Member'>lsign</span></a> <span class='Operator'>== </span><a href="formatting.c.html#LN337"><span class='Ref_to_Const'>NUM_LSIGN_PRE</span></a><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span><a name="LN4279"></a>            <span class='Keyword'>int</span>         <span class='Declare_Local'>x</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
<span class='Directive'>#ifdef</span> DEBUG_TO_FROM_CHAR 
            <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN62"><span class='Ref_to_Const'>DEBUG_elog_output</span></a><span class='Delimiter'>, </span><span class='String'>"Try read locale pre-sign (%c)"</span><span class='Delimiter'>, </span><span class='Operator'>*</span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
            <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="formatting.c.html#LN4279"><span class='Ref_To_Local'>x</span></a> <span class='Operator'>= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN942"><span class='Ref_to_Member'>L_negative_sign</span></a><span class='Parentheses'>))</span> <span class='Operator'>&& 
</span>                <a href="formatting.c.html#LN4252"><span class='Ref_to_Macro'>AMOUNT_TEST</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4279"><span class='Ref_To_Local'>x</span></a><span class='Parentheses'>)</span> <span class='Operator'>&& 
</span>                strncmp<span class='Parentheses'>(</span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN942"><span class='Ref_to_Member'>L_negative_sign</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN4279"><span class='Ref_To_Local'>x</span></a><span class='Parentheses'>)</span> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <span class='Delimiter'>{ 
</span>                <a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a> <span class='Operator'>+= </span><a href="formatting.c.html#LN4279"><span class='Ref_To_Local'>x</span></a><span class='Delimiter'>; 
</span>                <span class='Operator'>*</span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN936"><span class='Ref_to_Member'>number</span></a> <span class='Operator'>= </span><span class='String'>'-'</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="formatting.c.html#LN4279"><span class='Ref_To_Local'>x</span></a> <span class='Operator'>= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN943"><span class='Ref_to_Member'>L_positive_sign</span></a><span class='Parentheses'>))</span> <span class='Operator'>&& 
</span>                     <a href="formatting.c.html#LN4252"><span class='Ref_to_Macro'>AMOUNT_TEST</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4279"><span class='Ref_To_Local'>x</span></a><span class='Parentheses'>)</span> <span class='Operator'>&& 
</span>                     strncmp<span class='Parentheses'>(</span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN943"><span class='Ref_to_Member'>L_positive_sign</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN4279"><span class='Ref_To_Local'>x</span></a><span class='Parentheses'>)</span> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <span class='Delimiter'>{ 
</span>                <a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a> <span class='Operator'>+= </span><a href="formatting.c.html#LN4279"><span class='Ref_To_Local'>x</span></a><span class='Delimiter'>; 
</span>                <span class='Operator'>*</span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN936"><span class='Ref_to_Member'>number</span></a> <span class='Operator'>= </span><span class='String'>'+'</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if IS_LSIGN(Np-&GT;Num)&&Np... &raquo; </span> 
        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span><span class='Directive'>#ifdef</span> DEBUG_TO_FROM_CHAR 
            <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN62"><span class='Ref_to_Const'>DEBUG_elog_output</span></a><span class='Delimiter'>, </span><span class='String'>"Try read simple sign (%c)"</span><span class='Delimiter'>, </span><span class='Operator'>*</span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
 
            <span class='Comment_Multi_Line'>/* 
             * simple + - &LT; &GT; 
             */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a> <span class='Operator'>== </span><span class='String'>'-'</span> <span class='Operator'>|| </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN350"><span class='Ref_to_Macro'>IS_BRACKET</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>                                        <span class='Operator'>*</span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a> <span class='Operator'>== </span><span class='String'>'&LT;'</span><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Operator'>*</span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN936"><span class='Ref_to_Member'>number</span></a> <span class='Operator'>= </span><span class='String'>'-'</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* set - */ 
</span>                <a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a> <span class='Operator'>== </span><span class='String'>'+'</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Operator'>*</span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN936"><span class='Ref_to_Member'>number</span></a> <span class='Operator'>= </span><span class='String'>'+'</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* set + */ 
</span>                <a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if *Np-&GT;number==' '&&(id... &raquo; </span> 
 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4251"><span class='Ref_to_Const'>OVERLOAD_TEST</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
<span class='Directive'>#ifdef</span> DEBUG_TO_FROM_CHAR 
    <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN62"><span class='Ref_to_Const'>DEBUG_elog_output</span></a><span class='Delimiter'>, </span><span class='String'>"Scan for numbers (%c), current number: '%s'"</span><span class='Delimiter'>, </span><span class='Operator'>*</span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN936"><span class='Ref_to_Member'>number</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
 
    <span class='Comment_Multi_Line'>/* 
     * read digit or decimal point 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span>isdigit<span class='Parentheses'>((</span><span class='Keyword'>unsigned char</span><span class='Parentheses'>) </span><span class='Operator'>*</span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN932"><span class='Ref_to_Member'>read_dec</span></a> <span class='Operator'>&& </span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN933"><span class='Ref_to_Member'>read_post</span></a> <span class='Operator'>== </span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN308"><span class='Ref_to_Member'>post</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
        <span class='Operator'>*</span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN937"><span class='Ref_to_Member'>number_p</span></a> <span class='Operator'>= *</span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a><span class='Delimiter'>; 
</span>        <a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN937"><span class='Ref_to_Member'>number_p</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN932"><span class='Ref_to_Member'>read_dec</span></a><span class='Parentheses'>) 
</span>            <a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN933"><span class='Ref_to_Member'>read_post</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN934"><span class='Ref_to_Member'>read_pre</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span> 
        <a href="formatting.c.html#LN4244"><span class='Ref_To_Local'>isread</span></a> <span class='Operator'>= </span><span class='Boolean'>TRUE</span><span class='Delimiter'>; 
</span> 
<span class='Directive'>#ifdef</span> DEBUG_TO_FROM_CHAR 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN62"><span class='Ref_to_Const'>DEBUG_elog_output</span></a><span class='Delimiter'>, </span><span class='String'>"Read digit (%c)"</span><span class='Delimiter'>, </span><span class='Operator'>*</span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN345"><span class='Ref_to_Macro'>IS_DECIMAL</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Parentheses'>) </span><span class='Operator'>&& </span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN932"><span class='Ref_to_Member'>read_dec</span></a> <span class='Operator'>== </span><span class='Boolean'>FALSE</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * We need not test IS_LDECIMAL(Np-&GT;Num) explicitly here, because 
         * Np-&GT;decimal is always just "." if we don't have a D format token. 
         * So we just unconditionally match to Np-&GT;decimal. 
         */ 
</span><a name="LN4358"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>x</span> <span class='Operator'>= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN944"><span class='Ref_to_Member'>decimal</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<span class='Directive'>#ifdef</span> DEBUG_TO_FROM_CHAR 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN62"><span class='Ref_to_Const'>DEBUG_elog_output</span></a><span class='Delimiter'>, </span><span class='String'>"Try read decimal point (%c)"</span><span class='Delimiter'>, 
</span>             <span class='Operator'>*</span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4358"><span class='Ref_To_Local'>x</span></a> <span class='Operator'>&& </span><a href="formatting.c.html#LN4252"><span class='Ref_to_Macro'>AMOUNT_TEST</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4358"><span class='Ref_To_Local'>x</span></a><span class='Parentheses'>) </span><span class='Operator'>&& </span>strncmp<span class='Parentheses'>(</span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN944"><span class='Ref_to_Member'>decimal</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN4358"><span class='Ref_To_Local'>x</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a> <span class='Operator'>+= </span><a href="formatting.c.html#LN4358"><span class='Ref_To_Local'>x</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>            <span class='Operator'>*</span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN937"><span class='Ref_to_Member'>number_p</span></a> <span class='Operator'>= </span><span class='String'>'.'</span><span class='Delimiter'>; 
</span>            <a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN937"><span class='Ref_to_Member'>number_p</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>            <a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN932"><span class='Ref_to_Member'>read_dec</span></a> <span class='Operator'>= </span><span class='Boolean'>TRUE</span><span class='Delimiter'>; 
</span>            <a href="formatting.c.html#LN4244"><span class='Ref_To_Local'>isread</span></a> <span class='Operator'>= </span><span class='Boolean'>TRUE</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if IS_DECIMAL(Np-&GT;Num)&&... &raquo; </span> 
 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4251"><span class='Ref_to_Const'>OVERLOAD_TEST</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Read sign behind "last" number 
     * 
     * We need sign detection because determine exact position of post-sign is 
     * difficult: 
     * 
     * FM9999.9999999S     -&GT; 123.001- 9.9S            -&GT; .5- FM9.999999MI -&GT; 
     * 5.01- 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN936"><span class='Ref_to_Member'>number</span></a> <span class='Operator'>== </span><span class='String'>' '</span> <span class='Operator'>&& </span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN934"><span class='Ref_to_Member'>read_pre</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN933"><span class='Ref_to_Member'>read_post</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * locale sign (NUM_S) is always anchored behind a last number, if: - 
         * locale sign expected - last read char was NUM_0/9 or NUM_DEC - and 
         * next char is not digit 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN352"><span class='Ref_to_Macro'>IS_LSIGN</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Parentheses'>)</span> <span class='Operator'>&& </span><a href="formatting.c.html#LN4244"><span class='Ref_To_Local'>isread</span></a> <span class='Operator'>&& 
</span>            <span class='Parentheses'>(</span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)</span> <span class='Operator'>&LT; </span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN938"><span class='Ref_to_Member'>inout</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>input_len</span></a> <span class='Operator'>&& 
</span>            <span class='Operator'>!</span>isdigit<span class='Parentheses'>((</span><span class='Keyword'>unsigned char</span><span class='Parentheses'>) </span><span class='Operator'>*</span><span class='Parentheses'>(</span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)))</span> 
        <span class='Delimiter'>{ 
</span><a name="LN4397"></a>            <span class='Keyword'>int</span>         <span class='Declare_Local'>x</span><span class='Delimiter'>; 
</span><a name="LN4398"></a>            <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>tmp</span> <span class='Operator'>= </span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span> 
<span class='Directive'>#ifdef</span> DEBUG_TO_FROM_CHAR 
            <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN62"><span class='Ref_to_Const'>DEBUG_elog_output</span></a><span class='Delimiter'>, </span><span class='String'>"Try read locale post-sign (%c)"</span><span class='Delimiter'>, </span><span class='Operator'>*</span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
            <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="formatting.c.html#LN4397"><span class='Ref_To_Local'>x</span></a> <span class='Operator'>= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN942"><span class='Ref_to_Member'>L_negative_sign</span></a><span class='Parentheses'>))</span> <span class='Operator'>&& 
</span>                <a href="formatting.c.html#LN4252"><span class='Ref_to_Macro'>AMOUNT_TEST</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4397"><span class='Ref_To_Local'>x</span></a><span class='Parentheses'>)</span> <span class='Operator'>&& 
</span>                strncmp<span class='Parentheses'>(</span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN942"><span class='Ref_to_Member'>L_negative_sign</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN4397"><span class='Ref_To_Local'>x</span></a><span class='Parentheses'>)</span> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <span class='Delimiter'>{ 
</span>                <a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a> <span class='Operator'>+= </span><a href="formatting.c.html#LN4397"><span class='Ref_To_Local'>x</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>;</span>   <span class='Comment_Single_Line'>/* -1 .. NUM_processor() do inout_p++ */ 
</span>                <span class='Operator'>*</span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN936"><span class='Ref_to_Member'>number</span></a> <span class='Operator'>= </span><span class='String'>'-'</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="formatting.c.html#LN4397"><span class='Ref_To_Local'>x</span></a> <span class='Operator'>= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN943"><span class='Ref_to_Member'>L_positive_sign</span></a><span class='Parentheses'>))</span> <span class='Operator'>&& 
</span>                     <a href="formatting.c.html#LN4252"><span class='Ref_to_Macro'>AMOUNT_TEST</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4397"><span class='Ref_To_Local'>x</span></a><span class='Parentheses'>)</span> <span class='Operator'>&& 
</span>                     strncmp<span class='Parentheses'>(</span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN943"><span class='Ref_to_Member'>L_positive_sign</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN4397"><span class='Ref_To_Local'>x</span></a><span class='Parentheses'>)</span> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <span class='Delimiter'>{ 
</span>                <a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a> <span class='Operator'>+= </span><a href="formatting.c.html#LN4397"><span class='Ref_To_Local'>x</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>;</span>   <span class='Comment_Single_Line'>/* -1 .. NUM_processor() do inout_p++ */ 
</span>                <span class='Operator'>*</span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN936"><span class='Ref_to_Member'>number</span></a> <span class='Operator'>= </span><span class='String'>'+'</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN936"><span class='Ref_to_Member'>number</span></a> <span class='Operator'>== </span><span class='String'>' '</span><span class='Parentheses'>) 
</span>                <span class='Comment_Multi_Line'>/* no sign read */ 
</span>                <a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN4398"><span class='Ref_To_Local'>tmp</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if IS_LSIGN(Np-&GT;Num)&&is... &raquo; </span> 
 
        <span class='Comment_Multi_Line'>/* 
         * try read non-locale sign, it's happen only if format is not exact 
         * and we cannot determine sign position of MI/PL/SG, an example: 
         * 
         * FM9.999999MI            -&GT; 5.01- 
         * 
         * if (.... && IS_LSIGN(Np-&GT;Num)==FALSE) prevents read wrong formats 
         * like to_number('1 -', '9S') where sign is not anchored to last 
         * number. 
         */ 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4244"><span class='Ref_To_Local'>isread</span></a> <span class='Operator'>== </span><span class='Boolean'>FALSE </span><span class='Operator'>&& </span><a href="formatting.c.html#LN352"><span class='Ref_to_Macro'>IS_LSIGN</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Parentheses'>)</span> <span class='Operator'>== </span><span class='Boolean'>FALSE </span><span class='Operator'>&& 
</span>                 <span class='Parentheses'>(</span><a href="formatting.c.html#LN353"><span class='Ref_to_Macro'>IS_PLUS</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Parentheses'>) </span><span class='Operator'>|| </span><a href="formatting.c.html#LN351"><span class='Ref_to_Macro'>IS_MINUS</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Parentheses'>)))</span> 
        <span class='Delimiter'>{ 
</span><span class='Directive'>#ifdef</span> DEBUG_TO_FROM_CHAR 
            <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN62"><span class='Ref_to_Const'>DEBUG_elog_output</span></a><span class='Delimiter'>, </span><span class='String'>"Try read simple post-sign (%c)"</span><span class='Delimiter'>, </span><span class='Operator'>*</span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
 
            <span class='Comment_Multi_Line'>/* 
             * simple + - 
             */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a> <span class='Operator'>== </span><span class='String'>'-'</span> <span class='Operator'>|| *</span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a> <span class='Operator'>== </span><span class='String'>'+'</span><span class='Parentheses'>) 
</span>                <span class='Comment_Multi_Line'>/* NUM_processor() do inout_p++ */ 
</span>                <span class='Operator'>*</span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN936"><span class='Ref_to_Member'>number</span></a> <span class='Operator'>= *</span><a href="formatting.c.html#LN4242"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if *Np-&GT;number==' '&&Np-... &raquo; </span> 
<span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end NUM_numpart_from_char &raquo; </span> 
 
<a name="LN4449"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>IS_PREDEC_SPACE</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>_n</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>        <span class='Parentheses'>(</span><a href="formatting.c.html#LN347"><span class='Ref_to_Macro'>IS_ZERO</span></a><span class='Parentheses'>((</span><a href="formatting.c.html#LN4449"><span class='Ref_to_Parameter'>_n</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>Num<span class='Parentheses'>)</span><span class='Operator'>==</span><span class='Boolean'>FALSE </span><span class='Operator'>&& \ 
</span>         <span class='Parentheses'>(</span><a href="formatting.c.html#LN4449"><span class='Ref_to_Parameter'>_n</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>number <span class='Operator'>== </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN4449"><span class='Ref_to_Parameter'>_n</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>number_p <span class='Operator'>&& \ 
</span>         <span class='Operator'>*</span><span class='Parentheses'>(</span><a href="formatting.c.html#LN4449"><span class='Ref_to_Parameter'>_n</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>number <span class='Operator'>== </span><span class='String'>'0'</span> <span class='Operator'>&& \ 
</span>                 <span class='Parentheses'>(</span><a href="formatting.c.html#LN4449"><span class='Ref_to_Parameter'>_n</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>Num<span class='Operator'>-&GT;</span>post <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * Add digit or sign to number-string 
 * ---------- 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN4460"></a><span class='Declare_Function'>NUM_numpart_to_char</span><span class='Parentheses'>(</span><a href="formatting.c.html#LN920"><span class='Ref_to_Struct'>NUMProc</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>Np</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>id</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4462"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>end</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN354"><span class='Ref_to_Macro'>IS_ROMAN</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Parentheses'>))</span> 
        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Note: in this elog() output not set '\0' in 'inout' */ 
</span> 
<span class='Directive'>#ifdef</span> DEBUG_TO_FROM_CHAR 
 
    <span class='Comment_Multi_Line'>/* 
     * Np-&GT;num_curr is number of current item in format-picture, it is not 
     * current position in inout! 
     */ 
</span>    <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN62"><span class='Ref_to_Const'>DEBUG_elog_output</span></a><span class='Delimiter'>, 
</span>         <span class='String'>"SIGN_WROTE: %d, CURRENT: %d, NUMBER_P: \"%s\", INOUT: \"%s\""</span><span class='Delimiter'>, 
</span>         <a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN926"><span class='Ref_to_Member'>sign_wrote</span></a><span class='Delimiter'>, 
</span>         <a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN929"><span class='Ref_to_Member'>num_curr</span></a><span class='Delimiter'>, 
</span>         <a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN937"><span class='Ref_to_Member'>number_p</span></a><span class='Delimiter'>, 
</span>         <a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN938"><span class='Ref_to_Member'>inout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
    <a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN928"><span class='Ref_to_Member'>num_in</span></a> <span class='Operator'>= </span><span class='Boolean'>FALSE</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Write sign if real number will write to output Note: IS_PREDEC_SPACE() 
     * handle "9.9" --&GT; " .1" 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN926"><span class='Ref_to_Member'>sign_wrote</span></a> <span class='Operator'>== </span><span class='Boolean'>FALSE </span><span class='Operator'>&& 
</span>        <span class='Parentheses'>(</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN929"><span class='Ref_to_Member'>num_curr</span></a> <span class='Operator'>&GT;= </span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN930"><span class='Ref_to_Member'>out_pre_spaces</span></a> <span class='Operator'>|| </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN347"><span class='Ref_to_Macro'>IS_ZERO</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Parentheses'>) </span><span class='Operator'>&& </span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN313"><span class='Ref_to_Member'>zero_start</span></a> <span class='Operator'>== </span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN929"><span class='Ref_to_Member'>num_curr</span></a><span class='Parentheses'>))</span> <span class='Operator'>&& 
</span>        <span class='Parentheses'>(</span><a href="formatting.c.html#LN4449"><span class='Ref_to_Macro'>IS_PREDEC_SPACE</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Parentheses'>)</span> <span class='Operator'>== </span><span class='Boolean'>FALSE </span><span class='Operator'>|| </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN940"><span class='Ref_to_Member'>last_relevant</span></a> <span class='Operator'>&& *</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN940"><span class='Ref_to_Member'>last_relevant</span></a> <span class='Operator'>== </span><span class='String'>'.'</span><span class='Parentheses'>)))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN352"><span class='Ref_to_Macro'>IS_LSIGN</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN309"><span class='Ref_to_Member'>lsign</span></a> <span class='Operator'>== </span><a href="formatting.c.html#LN337"><span class='Ref_to_Const'>NUM_LSIGN_PRE</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN925"><span class='Ref_to_Member'>sign</span></a> <span class='Operator'>== </span><span class='String'>'-'</span><span class='Parentheses'>) 
</span>                    <a href="../../../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN942"><span class='Ref_to_Member'>L_negative_sign</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>else</span> 
                    <a href="../../../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN943"><span class='Ref_to_Member'>L_positive_sign</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN926"><span class='Ref_to_Member'>sign_wrote</span></a> <span class='Operator'>= </span><span class='Boolean'>TRUE</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN350"><span class='Ref_to_Macro'>IS_BRACKET</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Operator'>*</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN925"><span class='Ref_to_Member'>sign</span></a> <span class='Operator'>== </span><span class='String'>'+'</span> <span class='Operator'>? </span><span class='String'>' '</span> <span class='Operator'>: </span><span class='String'>'&LT;'</span><span class='Delimiter'>; 
</span>            <span class='Operator'>++</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a><span class='Delimiter'>; 
</span>            <a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN926"><span class='Ref_to_Member'>sign_wrote</span></a> <span class='Operator'>= </span><span class='Boolean'>TRUE</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN925"><span class='Ref_to_Member'>sign</span></a> <span class='Operator'>== </span><span class='String'>'+'</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="formatting.c.html#LN349"><span class='Ref_to_Macro'>IS_FILLMODE</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Operator'>*</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a> <span class='Operator'>= </span><span class='String'>' '</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* Write + */ 
</span>                <span class='Operator'>++</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN926"><span class='Ref_to_Member'>sign_wrote</span></a> <span class='Operator'>= </span><span class='Boolean'>TRUE</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN925"><span class='Ref_to_Member'>sign</span></a> <span class='Operator'>== </span><span class='String'>'-'</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{</span>                       <span class='Comment_Single_Line'>/* Write - */ 
</span>            <span class='Operator'>*</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a> <span class='Operator'>= </span><span class='String'>'-'</span><span class='Delimiter'>; 
</span>            <span class='Operator'>++</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a><span class='Delimiter'>; 
</span>            <a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN926"><span class='Ref_to_Member'>sign_wrote</span></a> <span class='Operator'>= </span><span class='Boolean'>TRUE</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if Np-&GT;sign_wrote==FALSE... &raquo; </span> 
 
 
    <span class='Comment_Multi_Line'>/* 
     * digits / FM / Zero / Dec. point 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>id</span></a> <span class='Operator'>== </span><a href="formatting.c.html#LN676"><span class='Ref_to_EnumConst'>NUM_9</span></a> <span class='Operator'>|| </span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>id</span></a> <span class='Operator'>== </span><a href="formatting.c.html#LN675"><span class='Ref_to_EnumConst'>NUM_0</span></a> <span class='Operator'>|| </span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>id</span></a> <span class='Operator'>== </span><a href="formatting.c.html#LN679"><span class='Ref_to_EnumConst'>NUM_D</span></a> <span class='Operator'>|| </span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>id</span></a> <span class='Operator'>== </span><a href="formatting.c.html#LN674"><span class='Ref_to_EnumConst'>NUM_DEC</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN929"><span class='Ref_to_Member'>num_curr</span></a> <span class='Operator'>&LT; </span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN930"><span class='Ref_to_Member'>out_pre_spaces</span></a> <span class='Operator'>&& 
</span>            <span class='Parentheses'>(</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN313"><span class='Ref_to_Member'>zero_start</span></a> <span class='Operator'>&GT; </span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN929"><span class='Ref_to_Member'>num_curr</span></a> <span class='Operator'>|| !</span><a href="formatting.c.html#LN347"><span class='Ref_to_Macro'>IS_ZERO</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Parentheses'>)))</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * Write blank space 
             */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="formatting.c.html#LN349"><span class='Ref_to_Macro'>IS_FILLMODE</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Operator'>*</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a> <span class='Operator'>= </span><span class='String'>' '</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* Write ' ' */ 
</span>                <span class='Operator'>++</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN347"><span class='Ref_to_Macro'>IS_ZERO</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>                 <a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN929"><span class='Ref_to_Member'>num_curr</span></a> <span class='Operator'>&LT; </span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN930"><span class='Ref_to_Member'>out_pre_spaces</span></a> <span class='Operator'>&& 
</span>                 <a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN313"><span class='Ref_to_Member'>zero_start</span></a> <span class='Operator'>&LT;= </span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN929"><span class='Ref_to_Member'>num_curr</span></a><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * Write ZERO 
             */ 
</span>            <span class='Operator'>*</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a> <span class='Operator'>= </span><span class='String'>'0'</span><span class='Delimiter'>; </span><span class='Comment_Single_Line'>/* Write '0' */ 
</span>            <span class='Operator'>++</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a><span class='Delimiter'>; 
</span>            <a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN928"><span class='Ref_to_Member'>num_in</span></a> <span class='Operator'>= </span><span class='Boolean'>TRUE</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * Write Decimal point 
             */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN937"><span class='Ref_to_Member'>number_p</span></a> <span class='Operator'>== </span><span class='String'>'.'</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN940"><span class='Ref_to_Member'>last_relevant</span></a> <span class='Operator'>|| *</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN940"><span class='Ref_to_Member'>last_relevant</span></a> <span class='Operator'>!= </span><span class='String'>'.'</span><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <a href="../../../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN944"><span class='Ref_to_Member'>decimal</span></a><span class='Parentheses'>)</span><span class='Delimiter'>;</span>   <span class='Comment_Single_Line'>/* Write DEC/D */ 
</span>                    <a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * Ora 'n' -- FM9.9 --&GT; 'n.' 
                 */ 
</span>                <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN349"><span class='Ref_to_Macro'>IS_FILLMODE</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>                         <a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN940"><span class='Ref_to_Member'>last_relevant</span></a> <span class='Operator'>&& *</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN940"><span class='Ref_to_Member'>last_relevant</span></a> <span class='Operator'>== </span><span class='String'>'.'</span><span class='Parentheses'>)</span> 
                <span class='Delimiter'>{ 
</span>                    <a href="../../../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN944"><span class='Ref_to_Member'>decimal</span></a><span class='Parentheses'>)</span><span class='Delimiter'>;</span>   <span class='Comment_Single_Line'>/* Write DEC/D */ 
</span>                    <a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* 
                 * Write Digits 
                 */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN940"><span class='Ref_to_Member'>last_relevant</span></a> <span class='Operator'>&& </span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN937"><span class='Ref_to_Member'>number_p</span></a> <span class='Operator'>&GT; </span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN940"><span class='Ref_to_Member'>last_relevant</span></a> <span class='Operator'>&& 
</span>                    <a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>id</span></a> <span class='Operator'>!= </span><a href="formatting.c.html#LN675"><span class='Ref_to_EnumConst'>NUM_0</span></a><span class='Parentheses'>) 
</span>                    <span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * '0.1' -- 9.9 --&GT; '  .1' 
                 */ 
</span>                <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4449"><span class='Ref_to_Macro'>IS_PREDEC_SPACE</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Parentheses'>))</span> 
                <span class='Delimiter'>{ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="formatting.c.html#LN349"><span class='Ref_to_Macro'>IS_FILLMODE</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Parentheses'>))</span> 
                    <span class='Delimiter'>{ 
</span>                        <span class='Operator'>*</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a> <span class='Operator'>= </span><span class='String'>' '</span><span class='Delimiter'>; 
</span>                        <span class='Operator'>++</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span> 
                    <span class='Comment_Multi_Line'>/* 
                     * '0' -- FM9.9 --&GT; '0.' 
                     */ 
</span>                    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN940"><span class='Ref_to_Member'>last_relevant</span></a> <span class='Operator'>&& *</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN940"><span class='Ref_to_Member'>last_relevant</span></a> <span class='Operator'>== </span><span class='String'>'.'</span><span class='Parentheses'>) 
</span>                    <span class='Delimiter'>{ 
</span>                        <span class='Operator'>*</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a> <span class='Operator'>= </span><span class='String'>'0'</span><span class='Delimiter'>; 
</span>                        <span class='Operator'>++</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>else</span> 
                <span class='Delimiter'>{ 
</span>                    <span class='Operator'>*</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a> <span class='Operator'>= *</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN937"><span class='Ref_to_Member'>number_p</span></a><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* Write DIGIT */ 
</span>                    <span class='Operator'>++</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a><span class='Delimiter'>; 
</span>                    <a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN928"><span class='Ref_to_Member'>num_in</span></a> <span class='Operator'>= </span><span class='Boolean'>TRUE</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
            <span class='Comment_Multi_Line'>/* do no exceed string length */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN937"><span class='Ref_to_Member'>number_p</span></a><span class='Parentheses'>) 
</span>                <span class='Operator'>++</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN937"><span class='Ref_to_Member'>number_p</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
 
        <a href="formatting.c.html#LN4462"><span class='Ref_To_Local'>end</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN927"><span class='Ref_to_Member'>num_count</span></a> <span class='Operator'>+ </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN930"><span class='Ref_to_Member'>out_pre_spaces</span></a> <span class='Operator'>? </span><span class='Number'>1</span> <span class='Operator'>: </span><span class='Number'>0</span><span class='Parentheses'>) </span><span class='Operator'>+ </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN345"><span class='Ref_to_Macro'>IS_DECIMAL</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='Number'>1</span> <span class='Operator'>: </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN940"><span class='Ref_to_Member'>last_relevant</span></a> <span class='Operator'>&& </span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN940"><span class='Ref_to_Member'>last_relevant</span></a> <span class='Operator'>== </span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN937"><span class='Ref_to_Member'>number_p</span></a><span class='Parentheses'>) 
</span>            <a href="formatting.c.html#LN4462"><span class='Ref_To_Local'>end</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN929"><span class='Ref_to_Member'>num_curr</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN929"><span class='Ref_to_Member'>num_curr</span></a> <span class='Operator'>+ </span><span class='Number'>1</span> <span class='Operator'>== </span><a href="formatting.c.html#LN4462"><span class='Ref_To_Local'>end</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN926"><span class='Ref_to_Member'>sign_wrote</span></a> <span class='Operator'>== </span><span class='Boolean'>TRUE </span><span class='Operator'>&& </span><a href="formatting.c.html#LN350"><span class='Ref_to_Macro'>IS_BRACKET</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Operator'>*</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN925"><span class='Ref_to_Member'>sign</span></a> <span class='Operator'>== </span><span class='String'>'+'</span> <span class='Operator'>? </span><span class='String'>' '</span> <span class='Operator'>: </span><span class='String'>'&GT;'</span><span class='Delimiter'>; 
</span>                <span class='Operator'>++</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN352"><span class='Ref_to_Macro'>IS_LSIGN</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Parentheses'>) </span><span class='Operator'>&& </span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN309"><span class='Ref_to_Member'>lsign</span></a> <span class='Operator'>== </span><a href="formatting.c.html#LN338"><span class='Ref_to_Const'>NUM_LSIGN_POST</span></a><span class='Parentheses'>)</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN925"><span class='Ref_to_Member'>sign</span></a> <span class='Operator'>== </span><span class='String'>'-'</span><span class='Parentheses'>) 
</span>                    <a href="../../../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN942"><span class='Ref_to_Member'>L_negative_sign</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>else</span> 
                    <a href="../../../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN943"><span class='Ref_to_Member'>L_positive_sign</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if id==NUM_9||id==NUM_0|... &raquo; </span> 
 
    <span class='Operator'>++</span><a href="formatting.c.html#LN4460"><span class='Ref_to_Parameter'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN929"><span class='Ref_to_Member'>num_curr</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end NUM_numpart_to_char &raquo; </span> 
 
<span class='Keyword'>static char </span><span class='Operator'>* 
</span><a name="LN4647"></a><span class='Declare_Function'>NUM_processor</span><span class='Parentheses'>(</span><a href="formatting.c.html#LN164"><span class='Ref_to_Struct'>FormatNode</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN305"><span class='Ref_to_Typedef'>NUMDesc</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>Num</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>inout</span><span class='Delimiter'>, 
</span><a name="LN4648"></a>           <span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>number</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>from_char_input_len</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>to_char_out_pre_spaces</span><span class='Delimiter'>, 
</span><a name="LN4649"></a>              <span class='Keyword'>int </span><span class='Declare_Parameter'>sign</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>is_to_char</span><span class='Delimiter'>, </span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>collid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4651"></a>    <a href="formatting.c.html#LN164"><span class='Ref_to_Struct'>FormatNode</span></a> <span class='Operator'>*</span><span class='Declare_Local'>n</span><span class='Delimiter'>; 
</span><a name="LN4652"></a>    <a href="formatting.c.html#LN920"><span class='Ref_to_Struct'>NUMProc</span></a>     <span class='Declare_Local'>_Np</span><span class='Delimiter'>, 
</span><a name="LN4653"></a>               <span class='Operator'>*</span><span class='Declare_Local'>Np</span> <span class='Operator'>= &</span><a href="formatting.c.html#LN4652"><span class='Ref_To_Local'>_Np</span></a><span class='Delimiter'>; 
</span> 
    <a href="../../../include/c.h.html#LN856"><span class='Ref_to_Macro'>MemSet</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="formatting.c.html#LN920"><span class='Ref_to_Struct'>NUMProc</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN4647"><span class='Ref_to_Parameter'>Num</span></a><span class='Delimiter'>; 
</span>    <a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN922"><span class='Ref_to_Member'>is_to_char</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN4649"><span class='Ref_to_Parameter'>is_to_char</span></a><span class='Delimiter'>; 
</span>    <a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN936"><span class='Ref_to_Member'>number</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN4648"><span class='Ref_to_Parameter'>number</span></a><span class='Delimiter'>; 
</span>    <a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN938"><span class='Ref_to_Member'>inout</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN4647"><span class='Ref_to_Parameter'>inout</span></a><span class='Delimiter'>; 
</span>    <a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN940"><span class='Ref_to_Member'>last_relevant</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN933"><span class='Ref_to_Member'>read_post</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN934"><span class='Ref_to_Member'>read_pre</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN932"><span class='Ref_to_Member'>read_dec</span></a> <span class='Operator'>= </span><span class='Boolean'>FALSE</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN313"><span class='Ref_to_Member'>zero_start</span></a><span class='Parentheses'>) 
</span>        <span class='Operator'>--</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN313"><span class='Ref_to_Member'>zero_start</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN356"><span class='Ref_to_Macro'>IS_EEEE</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN922"><span class='Ref_to_Member'>is_to_char</span></a><span class='Parentheses'>) 
</span>            <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_FEATURE_NOT_SUPPORTED<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"\"EEEE\" not supported for input"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <a href="../../../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4647"><span class='Ref_to_Parameter'>inout</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN4648"><span class='Ref_to_Parameter'>number</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Roman correction 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN354"><span class='Ref_to_Macro'>IS_ROMAN</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN922"><span class='Ref_to_Member'>is_to_char</span></a><span class='Parentheses'>) 
</span>            <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_FEATURE_NOT_SUPPORTED<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"\"RN\" not supported for input"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
        <a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN309"><span class='Ref_to_Member'>lsign</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN311"><span class='Ref_to_Member'>pre_lsign_num</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN308"><span class='Ref_to_Member'>post</span></a> <span class='Operator'>= 
</span>            <a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN307"><span class='Ref_to_Member'>pre</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN930"><span class='Ref_to_Member'>out_pre_spaces</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN925"><span class='Ref_to_Member'>sign</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN349"><span class='Ref_to_Macro'>IS_FILLMODE</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN310"><span class='Ref_to_Member'>flag</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>            <a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN310"><span class='Ref_to_Member'>flag</span></a> <span class='Operator'>|= </span><a href="formatting.c.html#LN326"><span class='Ref_to_Const'>NUM_F_FILLMODE</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
            <a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN310"><span class='Ref_to_Member'>flag</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN310"><span class='Ref_to_Member'>flag</span></a> <span class='Operator'>|= </span><a href="formatting.c.html#LN331"><span class='Ref_to_Const'>NUM_F_ROMAN</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Sign 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4649"><span class='Ref_to_Parameter'>is_to_char</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN925"><span class='Ref_to_Member'>sign</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN4649"><span class='Ref_to_Parameter'>sign</span></a><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* MI/PL/SG - write sign itself and not in number */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN353"><span class='Ref_to_Macro'>IS_PLUS</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Parentheses'>) </span><span class='Operator'>|| </span><a href="formatting.c.html#LN351"><span class='Ref_to_Macro'>IS_MINUS</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN353"><span class='Ref_to_Macro'>IS_PLUS</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Parentheses'>) </span><span class='Operator'>&& </span><a href="formatting.c.html#LN351"><span class='Ref_to_Macro'>IS_MINUS</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Boolean'>FALSE</span><span class='Parentheses'>)</span> 
                <a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN926"><span class='Ref_to_Member'>sign_wrote</span></a> <span class='Operator'>= </span><span class='Boolean'>FALSE</span><span class='Delimiter'>; </span><span class='Comment_Single_Line'>/* need sign */ 
</span>            <span class='Control'>else</span> 
                <a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN926"><span class='Ref_to_Member'>sign_wrote</span></a> <span class='Operator'>= </span><span class='Boolean'>TRUE</span><span class='Delimiter'>;</span>  <span class='Comment_Single_Line'>/* needn't sign */ 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN925"><span class='Ref_to_Member'>sign</span></a> <span class='Operator'>!= </span><span class='String'>'-'</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN350"><span class='Ref_to_Macro'>IS_BRACKET</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Parentheses'>) </span><span class='Operator'>&& </span><a href="formatting.c.html#LN349"><span class='Ref_to_Macro'>IS_FILLMODE</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Parentheses'>))</span> 
                    <a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN310"><span class='Ref_to_Member'>flag</span></a> <span class='Operator'>&= ~</span><a href="formatting.c.html#LN328"><span class='Ref_to_Const'>NUM_F_BRACKET</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN351"><span class='Ref_to_Macro'>IS_MINUS</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Parentheses'>))</span> 
                    <a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN310"><span class='Ref_to_Member'>flag</span></a> <span class='Operator'>&= ~</span><a href="formatting.c.html#LN329"><span class='Ref_to_Const'>NUM_F_MINUS</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN925"><span class='Ref_to_Member'>sign</span></a> <span class='Operator'>!= </span><span class='String'>'+'</span> <span class='Operator'>&& </span><a href="formatting.c.html#LN353"><span class='Ref_to_Macro'>IS_PLUS</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Parentheses'>))</span> 
                <a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN310"><span class='Ref_to_Member'>flag</span></a> <span class='Operator'>&= ~</span><a href="formatting.c.html#LN330"><span class='Ref_to_Const'>NUM_F_PLUS</span></a><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN925"><span class='Ref_to_Member'>sign</span></a> <span class='Operator'>== </span><span class='String'>'+'</span> <span class='Operator'>&& </span><a href="formatting.c.html#LN349"><span class='Ref_to_Macro'>IS_FILLMODE</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Parentheses'>) </span><span class='Operator'>&& </span><a href="formatting.c.html#LN352"><span class='Ref_to_Macro'>IS_LSIGN</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Boolean'>FALSE</span><span class='Parentheses'>)</span> 
                <a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN926"><span class='Ref_to_Member'>sign_wrote</span></a> <span class='Operator'>= </span><span class='Boolean'>TRUE</span><span class='Delimiter'>;</span>  <span class='Comment_Single_Line'>/* needn't sign */ 
</span>            <span class='Control'>else</span> 
                <a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN926"><span class='Ref_to_Member'>sign_wrote</span></a> <span class='Operator'>= </span><span class='Boolean'>FALSE</span><span class='Delimiter'>; </span><span class='Comment_Single_Line'>/* need sign */ 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN309"><span class='Ref_to_Member'>lsign</span></a> <span class='Operator'>== </span><a href="formatting.c.html#LN337"><span class='Ref_to_Const'>NUM_LSIGN_PRE</span></a> <span class='Operator'>&& </span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN307"><span class='Ref_to_Member'>pre</span></a> <span class='Operator'>== </span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN311"><span class='Ref_to_Member'>pre_lsign_num</span></a><span class='Parentheses'>) 
</span>                <a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN309"><span class='Ref_to_Member'>lsign</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN338"><span class='Ref_to_Const'>NUM_LSIGN_POST</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if is_to_char &raquo; </span> 
    <span class='Control'>else</span> 
        <a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN925"><span class='Ref_to_Member'>sign</span></a> <span class='Operator'>= </span><span class='Boolean'>FALSE</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Count 
     */ 
</span>    <a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN927"><span class='Ref_to_Member'>num_count</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN308"><span class='Ref_to_Member'>post</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN307"><span class='Ref_to_Member'>pre</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4649"><span class='Ref_to_Parameter'>is_to_char</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN930"><span class='Ref_to_Member'>out_pre_spaces</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN4648"><span class='Ref_to_Parameter'>to_char_out_pre_spaces</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN349"><span class='Ref_to_Macro'>IS_FILLMODE</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Parentheses'>) </span><span class='Operator'>&& </span><a href="formatting.c.html#LN345"><span class='Ref_to_Macro'>IS_DECIMAL</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN940"><span class='Ref_to_Member'>last_relevant</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN986"><span class='Ref_to_Proto'>get_last_relevant_decnum</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN936"><span class='Ref_to_Member'>number</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * If any '0' specifiers are present, make sure we don't strip 
             * those digits. 
             */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN940"><span class='Ref_to_Member'>last_relevant</span></a> <span class='Operator'>&& </span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN314"><span class='Ref_to_Member'>zero_end</span></a> <span class='Operator'>&GT; </span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN930"><span class='Ref_to_Member'>out_pre_spaces</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span><a name="LN4759"></a>                <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>last_zero</span><span class='Delimiter'>; 
</span> 
                <a href="formatting.c.html#LN4759"><span class='Ref_To_Local'>last_zero</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN936"><span class='Ref_to_Member'>number</span></a> <span class='Operator'>+ </span><span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN314"><span class='Ref_to_Member'>zero_end</span></a> <span class='Operator'>- </span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN930"><span class='Ref_to_Member'>out_pre_spaces</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN940"><span class='Ref_to_Member'>last_relevant</span></a> <span class='Operator'>&LT; </span><a href="formatting.c.html#LN4759"><span class='Ref_To_Local'>last_zero</span></a><span class='Parentheses'>) 
</span>                    <a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN940"><span class='Ref_to_Member'>last_relevant</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN4759"><span class='Ref_To_Local'>last_zero</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN926"><span class='Ref_to_Member'>sign_wrote</span></a> <span class='Operator'>== </span><span class='Boolean'>FALSE </span><span class='Operator'>&& </span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN930"><span class='Ref_to_Member'>out_pre_spaces</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <span class='Operator'>++</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN927"><span class='Ref_to_Member'>num_count</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if is_to_char &raquo; </span> 
    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN930"><span class='Ref_to_Member'>out_pre_spaces</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <span class='Operator'>*</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN936"><span class='Ref_to_Member'>number</span></a> <span class='Operator'>= </span><span class='String'>' '</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* sign space */ 
</span>        <span class='Operator'>*</span><span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN936"><span class='Ref_to_Member'>number</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>) </span><span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN928"><span class='Ref_to_Member'>num_in</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN929"><span class='Ref_to_Member'>num_curr</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
<span class='Directive'>#ifdef</span> DEBUG_TO_FROM_CHAR 
    <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN62"><span class='Ref_to_Const'>DEBUG_elog_output</span></a><span class='Delimiter'>, 
</span>         <span class='String'>"\n\tSIGN: '%c'\n\tNUM: '%s'\n\tPRE: %d\n\tPOST: %d\n\tNUM_COUNT: %d\n\tNUM_PRE: %d\n\tSIGN_WROTE: %s\n\tZERO: %s\n\tZERO_START: %d\n\tZERO_END: %d\n\tLAST_RELEVANT: %s\n\tBRACKET: %s\n\tPLUS: %s\n\tMINUS: %s\n\tFILLMODE: %s\n\tROMAN: %s\n\tEEEE: %s"</span><span class='Delimiter'>, 
</span>         <a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN925"><span class='Ref_to_Member'>sign</span></a><span class='Delimiter'>, 
</span>         <a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN936"><span class='Ref_to_Member'>number</span></a><span class='Delimiter'>, 
</span>         <a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN307"><span class='Ref_to_Member'>pre</span></a><span class='Delimiter'>, 
</span>         <a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN308"><span class='Ref_to_Member'>post</span></a><span class='Delimiter'>, 
</span>         <a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN927"><span class='Ref_to_Member'>num_count</span></a><span class='Delimiter'>, 
</span>         <a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN930"><span class='Ref_to_Member'>out_pre_spaces</span></a><span class='Delimiter'>, 
</span>         <a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN926"><span class='Ref_to_Member'>sign_wrote</span></a> <span class='Operator'>? </span><span class='String'>"Yes"</span> <span class='Operator'>: </span><span class='String'>"No"</span><span class='Delimiter'>, 
</span>         <a href="formatting.c.html#LN347"><span class='Ref_to_Macro'>IS_ZERO</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='String'>"Yes"</span> <span class='Operator'>: </span><span class='String'>"No"</span><span class='Delimiter'>, 
</span>         <a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN313"><span class='Ref_to_Member'>zero_start</span></a><span class='Delimiter'>, 
</span>         <a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN314"><span class='Ref_to_Member'>zero_end</span></a><span class='Delimiter'>, 
</span>         <a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN940"><span class='Ref_to_Member'>last_relevant</span></a> <span class='Operator'>? </span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN940"><span class='Ref_to_Member'>last_relevant</span></a> <span class='Operator'>: </span><span class='String'>"&LT;not set&GT;"</span><span class='Delimiter'>, 
</span>         <a href="formatting.c.html#LN350"><span class='Ref_to_Macro'>IS_BRACKET</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='String'>"Yes"</span> <span class='Operator'>: </span><span class='String'>"No"</span><span class='Delimiter'>, 
</span>         <a href="formatting.c.html#LN353"><span class='Ref_to_Macro'>IS_PLUS</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='String'>"Yes"</span> <span class='Operator'>: </span><span class='String'>"No"</span><span class='Delimiter'>, 
</span>         <a href="formatting.c.html#LN351"><span class='Ref_to_Macro'>IS_MINUS</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='String'>"Yes"</span> <span class='Operator'>: </span><span class='String'>"No"</span><span class='Delimiter'>, 
</span>         <a href="formatting.c.html#LN349"><span class='Ref_to_Macro'>IS_FILLMODE</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='String'>"Yes"</span> <span class='Operator'>: </span><span class='String'>"No"</span><span class='Delimiter'>, 
</span>         <a href="formatting.c.html#LN354"><span class='Ref_to_Macro'>IS_ROMAN</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='String'>"Yes"</span> <span class='Operator'>: </span><span class='String'>"No"</span><span class='Delimiter'>, 
</span>         <a href="formatting.c.html#LN356"><span class='Ref_to_Macro'>IS_EEEE</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='String'>"Yes"</span> <span class='Operator'>: </span><span class='String'>"No"</span> 
        <span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
 
    <span class='Comment_Multi_Line'>/* 
     * Locale 
     */ 
</span>    <a href="formatting.c.html#LN985"><span class='Ref_to_Proto'>NUM_prepare_locale</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Processor direct cycle 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN922"><span class='Ref_to_Member'>is_to_char</span></a><span class='Parentheses'>) 
</span>        <a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN937"><span class='Ref_to_Member'>number_p</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN936"><span class='Ref_to_Member'>number</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN937"><span class='Ref_to_Member'>number_p</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN936"><span class='Ref_to_Member'>number</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>;</span>  <span class='Comment_Single_Line'>/* first char is space for sign */ 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4651"><span class='Ref_To_Local'>n</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN4647"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN938"><span class='Ref_to_Member'>inout</span></a><span class='Delimiter'>; </span><a href="formatting.c.html#LN4651"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN166"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>!= </span><a href="formatting.c.html#LN172"><span class='Ref_to_Const'>NODE_TYPE_END</span></a><span class='Delimiter'>; </span><a href="formatting.c.html#LN4651"><span class='Ref_To_Local'>n</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN922"><span class='Ref_to_Member'>is_to_char</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * Check non-string inout end 
             */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a> <span class='Operator'>&GT;= </span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN938"><span class='Ref_to_Member'>inout</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN4648"><span class='Ref_to_Parameter'>from_char_input_len</span></a><span class='Parentheses'>) 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Format pictures actions 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4651"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN166"><span class='Ref_to_Member'>type</span></a> <span class='Operator'>== </span><a href="formatting.c.html#LN173"><span class='Ref_to_Const'>NODE_TYPE_ACTION</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * Create/reading digit/zero/blank/sing 
             * 
             * 'NUM_S' note: The locale sign is anchored to number and we 
             * read/write it when we work with first or last number 
             * (NUM_0/NUM_9). This is reason why NUM_S missing in follow 
             * switch(). 
             */ 
</span>            <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4651"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN167"><span class='Ref_to_Member'>key</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN159"><span class='Ref_to_Member'>id</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Control'>case</span> <a href="formatting.c.html#LN676"><span class='Ref_to_EnumConst'>NUM_9</span></a><span class='Operator'>: 
</span>                <span class='Control'>case</span> <a href="formatting.c.html#LN675"><span class='Ref_to_EnumConst'>NUM_0</span></a><span class='Operator'>: 
</span>                <span class='Control'>case</span> <a href="formatting.c.html#LN674"><span class='Ref_to_EnumConst'>NUM_DEC</span></a><span class='Operator'>: 
</span>                <span class='Control'>case</span> <a href="formatting.c.html#LN679"><span class='Ref_to_EnumConst'>NUM_D</span></a><span class='Operator'>: 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN922"><span class='Ref_to_Member'>is_to_char</span></a><span class='Parentheses'>) 
</span>                    <span class='Delimiter'>{ 
</span>                        <a href="formatting.c.html#LN988"><span class='Ref_to_Proto'>NUM_numpart_to_char</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN4651"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN167"><span class='Ref_to_Member'>key</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN159"><span class='Ref_to_Member'>id</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>continue</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* for() */ 
</span>                    <span class='Delimiter'>} 
</span>                    <span class='Control'>else</span> 
                    <span class='Delimiter'>{ 
</span>                        <a href="formatting.c.html#LN987"><span class='Ref_to_Proto'>NUM_numpart_from_char</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN4651"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN167"><span class='Ref_to_Member'>key</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN159"><span class='Ref_to_Member'>id</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN4648"><span class='Ref_to_Parameter'>from_char_input_len</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>;</span>  <span class='Comment_Single_Line'>/* switch() case: */ 
</span>                    <span class='Delimiter'>} 
</span> 
                <span class='Control'>case</span> <a href="formatting.c.html#LN673"><span class='Ref_to_EnumConst'>NUM_COMMA</span></a><span class='Operator'>: 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN922"><span class='Ref_to_Member'>is_to_char</span></a><span class='Parentheses'>) 
</span>                    <span class='Delimiter'>{ 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN928"><span class='Ref_to_Member'>num_in</span></a><span class='Parentheses'>) 
</span>                        <span class='Delimiter'>{ 
</span>                            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN349"><span class='Ref_to_Macro'>IS_FILLMODE</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Parentheses'>))</span> 
                                <span class='Control'>continue</span><span class='Delimiter'>; 
</span>                            <span class='Control'>else</span> 
                                <span class='Operator'>*</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a> <span class='Operator'>= </span><span class='String'>' '</span><span class='Delimiter'>; 
</span>                        <span class='Delimiter'>} 
</span>                        <span class='Control'>else</span> 
                            <span class='Operator'>*</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a> <span class='Operator'>= </span><span class='String'>','</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                    <span class='Control'>else</span> 
                    <span class='Delimiter'>{ 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN928"><span class='Ref_to_Member'>num_in</span></a><span class='Parentheses'>) 
</span>                        <span class='Delimiter'>{ 
</span>                            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN349"><span class='Ref_to_Macro'>IS_FILLMODE</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Parentheses'>))</span> 
                                <span class='Control'>continue</span><span class='Delimiter'>; 
</span>                        <span class='Delimiter'>} 
</span>                    <span class='Delimiter'>} 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>case</span> <a href="formatting.c.html#LN682"><span class='Ref_to_EnumConst'>NUM_G</span></a><span class='Operator'>: 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN922"><span class='Ref_to_Member'>is_to_char</span></a><span class='Parentheses'>) 
</span>                    <span class='Delimiter'>{ 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN928"><span class='Ref_to_Member'>num_in</span></a><span class='Parentheses'>) 
</span>                        <span class='Delimiter'>{ 
</span>                            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN349"><span class='Ref_to_Macro'>IS_FILLMODE</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Parentheses'>))</span> 
                                <span class='Control'>continue</span><span class='Delimiter'>; 
</span>                            <span class='Control'>else</span> 
                            <span class='Delimiter'>{ 
</span><a name="LN4889"></a>                                <span class='Keyword'>int</span>         <span class='Declare_Local'>x</span> <span class='Operator'>= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN945"><span class='Ref_to_Member'>L_thousands_sep</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                                memset<span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a><span class='Delimiter'>, </span><span class='String'>' '</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN4889"><span class='Ref_To_Local'>x</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                                <a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a> <span class='Operator'>+= </span><a href="formatting.c.html#LN4889"><span class='Ref_To_Local'>x</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>                            <span class='Delimiter'>} 
</span>                        <span class='Delimiter'>} 
</span>                        <span class='Control'>else</span> 
                        <span class='Delimiter'>{ 
</span>                            <a href="../../../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN945"><span class='Ref_to_Member'>L_thousands_sep</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                            <a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a><span class='Parentheses'>) </span><span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>                        <span class='Delimiter'>} 
</span>                    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if Np-&GT;is_to_char &raquo; </span> 
                    <span class='Control'>else</span> 
                    <span class='Delimiter'>{ 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN928"><span class='Ref_to_Member'>num_in</span></a><span class='Parentheses'>) 
</span>                        <span class='Delimiter'>{ 
</span>                            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN349"><span class='Ref_to_Macro'>IS_FILLMODE</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Parentheses'>))</span> 
                                <span class='Control'>continue</span><span class='Delimiter'>; 
</span>                        <span class='Delimiter'>} 
</span>                        <a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN945"><span class='Ref_to_Member'>L_thousands_sep</span></a><span class='Parentheses'>) </span><span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>case</span> <a href="formatting.c.html#LN683"><span class='Ref_to_EnumConst'>NUM_L</span></a><span class='Operator'>: 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN922"><span class='Ref_to_Member'>is_to_char</span></a><span class='Parentheses'>) 
</span>                    <span class='Delimiter'>{ 
</span>                        <a href="../../../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN946"><span class='Ref_to_Member'>L_currency_symbol</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a><span class='Parentheses'>) </span><span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                    <span class='Control'>else</span> 
                        <a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN946"><span class='Ref_to_Member'>L_currency_symbol</span></a><span class='Parentheses'>) </span><span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>case</span> <a href="formatting.c.html#LN687"><span class='Ref_to_EnumConst'>NUM_RN</span></a><span class='Operator'>: 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN349"><span class='Ref_to_Macro'>IS_FILLMODE</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Parentheses'>))</span> 
                    <span class='Delimiter'>{ 
</span>                        <a href="../../../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN937"><span class='Ref_to_Member'>number_p</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a><span class='Parentheses'>) </span><span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                    <span class='Control'>else</span> 
                    <span class='Delimiter'>{ 
</span>                        <a href="../../../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a><span class='Delimiter'>, </span><span class='String'>"%15s"</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN937"><span class='Ref_to_Member'>number_p</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a><span class='Parentheses'>) </span><span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>case</span> <a href="formatting.c.html#LN703"><span class='Ref_to_EnumConst'>NUM_rn</span></a><span class='Operator'>: 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN349"><span class='Ref_to_Macro'>IS_FILLMODE</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Parentheses'>))</span> 
                    <span class='Delimiter'>{ 
</span>                        <a href="../../../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN2006"><span class='Ref_to_Func'>asc_tolower_z</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN937"><span class='Ref_to_Member'>number_p</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                        <a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a><span class='Parentheses'>) </span><span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                    <span class='Control'>else</span> 
                    <span class='Delimiter'>{ 
</span>                        <a href="../../../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a><span class='Delimiter'>, </span><span class='String'>"%15s"</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN2006"><span class='Ref_to_Func'>asc_tolower_z</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN937"><span class='Ref_to_Member'>number_p</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                        <a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a><span class='Parentheses'>) </span><span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>case</span> <a href="formatting.c.html#LN707"><span class='Ref_to_EnumConst'>NUM_th</span></a><span class='Operator'>: 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN354"><span class='Ref_to_Macro'>IS_ROMAN</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Parentheses'>) </span><span class='Operator'>|| *</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN936"><span class='Ref_to_Member'>number</span></a> <span class='Operator'>== </span><span class='String'>'#'</span> <span class='Operator'>|| 
</span>                        <a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN925"><span class='Ref_to_Member'>sign</span></a> <span class='Operator'>== </span><span class='String'>'-'</span> <span class='Operator'>|| </span><a href="formatting.c.html#LN345"><span class='Ref_to_Macro'>IS_DECIMAL</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Parentheses'>))</span> 
                        <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN922"><span class='Ref_to_Member'>is_to_char</span></a><span class='Parentheses'>) 
</span>                        <a href="../../../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN970"><span class='Ref_to_Proto'>get_th</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN936"><span class='Ref_to_Member'>number</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN299"><span class='Ref_to_Const'>TH_LOWER</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                    <a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a> <span class='Operator'>+= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>case</span> <a href="formatting.c.html#LN691"><span class='Ref_to_EnumConst'>NUM_TH</span></a><span class='Operator'>: 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN354"><span class='Ref_to_Macro'>IS_ROMAN</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Parentheses'>) </span><span class='Operator'>|| *</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN936"><span class='Ref_to_Member'>number</span></a> <span class='Operator'>== </span><span class='String'>'#'</span> <span class='Operator'>|| 
</span>                        <a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN925"><span class='Ref_to_Member'>sign</span></a> <span class='Operator'>== </span><span class='String'>'-'</span> <span class='Operator'>|| </span><a href="formatting.c.html#LN345"><span class='Ref_to_Macro'>IS_DECIMAL</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Parentheses'>))</span> 
                        <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN922"><span class='Ref_to_Member'>is_to_char</span></a><span class='Parentheses'>) 
</span>                        <a href="../../../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN970"><span class='Ref_to_Proto'>get_th</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN936"><span class='Ref_to_Member'>number</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN298"><span class='Ref_to_Const'>TH_UPPER</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                    <a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a> <span class='Operator'>+= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>case</span> <a href="formatting.c.html#LN684"><span class='Ref_to_EnumConst'>NUM_MI</span></a><span class='Operator'>: 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN922"><span class='Ref_to_Member'>is_to_char</span></a><span class='Parentheses'>) 
</span>                    <span class='Delimiter'>{ 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN925"><span class='Ref_to_Member'>sign</span></a> <span class='Operator'>== </span><span class='String'>'-'</span><span class='Parentheses'>) 
</span>                            <span class='Operator'>*</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a> <span class='Operator'>= </span><span class='String'>'-'</span><span class='Delimiter'>; 
</span>                        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN349"><span class='Ref_to_Macro'>IS_FILLMODE</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Parentheses'>))</span> 
                            <span class='Control'>continue</span><span class='Delimiter'>; 
</span>                        <span class='Control'>else</span> 
                            <span class='Operator'>*</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a> <span class='Operator'>= </span><span class='String'>' '</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                    <span class='Control'>else</span> 
                    <span class='Delimiter'>{ 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a> <span class='Operator'>== </span><span class='String'>'-'</span><span class='Parentheses'>) 
</span>                            <span class='Operator'>*</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN936"><span class='Ref_to_Member'>number</span></a> <span class='Operator'>= </span><span class='String'>'-'</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>case</span> <a href="formatting.c.html#LN685"><span class='Ref_to_EnumConst'>NUM_PL</span></a><span class='Operator'>: 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN922"><span class='Ref_to_Member'>is_to_char</span></a><span class='Parentheses'>) 
</span>                    <span class='Delimiter'>{ 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN925"><span class='Ref_to_Member'>sign</span></a> <span class='Operator'>== </span><span class='String'>'+'</span><span class='Parentheses'>) 
</span>                            <span class='Operator'>*</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a> <span class='Operator'>= </span><span class='String'>'+'</span><span class='Delimiter'>; 
</span>                        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN349"><span class='Ref_to_Macro'>IS_FILLMODE</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Parentheses'>))</span> 
                            <span class='Control'>continue</span><span class='Delimiter'>; 
</span>                        <span class='Control'>else</span> 
                            <span class='Operator'>*</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a> <span class='Operator'>= </span><span class='String'>' '</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                    <span class='Control'>else</span> 
                    <span class='Delimiter'>{ 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a> <span class='Operator'>== </span><span class='String'>'+'</span><span class='Parentheses'>) 
</span>                            <span class='Operator'>*</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN936"><span class='Ref_to_Member'>number</span></a> <span class='Operator'>= </span><span class='String'>'+'</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>case</span> <a href="formatting.c.html#LN688"><span class='Ref_to_EnumConst'>NUM_SG</span></a><span class='Operator'>: 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN922"><span class='Ref_to_Member'>is_to_char</span></a><span class='Parentheses'>) 
</span>                        <span class='Operator'>*</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN925"><span class='Ref_to_Member'>sign</span></a><span class='Delimiter'>; 
</span> 
                    <span class='Control'>else</span> 
                    <span class='Delimiter'>{ 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a> <span class='Operator'>== </span><span class='String'>'-'</span><span class='Parentheses'>) 
</span>                            <span class='Operator'>*</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN936"><span class='Ref_to_Member'>number</span></a> <span class='Operator'>= </span><span class='String'>'-'</span><span class='Delimiter'>; 
</span>                        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a> <span class='Operator'>== </span><span class='String'>'+'</span><span class='Parentheses'>) 
</span>                            <span class='Operator'>*</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN936"><span class='Ref_to_Member'>number</span></a> <span class='Operator'>= </span><span class='String'>'+'</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
 
                <span class='Control'>default</span><span class='Operator'>: 
</span>                    <span class='Control'>continue</span><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch n-&GT;key-&GT;id &raquo; </span> 
        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if n-&GT;type==NODE_TYPE_AC... &raquo; </span> 
        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * Remove to output char from input in TO_CHAR 
             */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN922"><span class='Ref_to_Member'>is_to_char</span></a><span class='Parentheses'>) 
</span>                <span class='Operator'>*</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN4651"><span class='Ref_To_Local'>n</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN168"><span class='Ref_to_Member'>character</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for n=node,Np-&GT;inout_p=Np... &raquo; </span> 
 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN922"><span class='Ref_to_Member'>is_to_char</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Operator'>*</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN939"><span class='Ref_to_Member'>inout_p</span></a> <span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN938"><span class='Ref_to_Member'>inout</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN937"><span class='Ref_to_Member'>number_p</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='String'>'.'</span><span class='Parentheses'>)</span> 
            <span class='Operator'>*</span><span class='Parentheses'>(</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN937"><span class='Ref_to_Member'>number_p</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>) </span><span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <span class='Operator'>*</span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN937"><span class='Ref_to_Member'>number_p</span></a> <span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Correction - precision of dec. number 
         */ 
</span>        <a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN923"><span class='Ref_to_Member'>Num</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN308"><span class='Ref_to_Member'>post</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN933"><span class='Ref_to_Member'>read_post</span></a><span class='Delimiter'>; 
</span> 
<span class='Directive'>#ifdef</span> DEBUG_TO_FROM_CHAR 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN62"><span class='Ref_to_Const'>DEBUG_elog_output</span></a><span class='Delimiter'>, </span><span class='String'>"TO_NUMBER (number): '%s'"</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN936"><span class='Ref_to_Member'>number</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
        <span class='Control'>return</span> <a href="formatting.c.html#LN4653"><span class='Ref_To_Local'>Np</span></a><span class='Operator'>-&GT;</span><a href="formatting.c.html#LN936"><span class='Ref_to_Member'>number</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
}</span><span class='Auto_Annotations'> &laquo; end NUM_processor &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * MACRO: Start part of NUM - for all NUM's to_char variants 
 *  (sorry, but I hate copy same code - macro is better..) 
 * ---------- 
 */ 
</span><a name="LN5061"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>NUM_TOCHAR_prepare</span> <span class='Operator'>\ 
</span><span class='Control'>do</span> <span class='Delimiter'>{ </span><span class='Operator'>\ 
</span>    <span class='Keyword'>int </span><a href="../../replication/repl_scanner.l.html#LN155"><span class='Ref_to_Global_Var'>len</span></a> <span class='Operator'>= </span><a href="../../../include/postgres.h.html#LN339"><span class='Ref_to_Macro'>VARSIZE_ANY_EXHDR</span></a><span class='Parentheses'>(</span>fmt<span class='Parentheses'>)</span><span class='Delimiter'>; </span><span class='Operator'>\ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../replication/repl_scanner.l.html#LN155"><span class='Ref_to_Global_Var'>len</span></a> <span class='Operator'>&LT;= </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="../../replication/repl_scanner.l.html#LN155"><span class='Ref_to_Global_Var'>len</span></a> <span class='Operator'>&GT;= </span><span class='Parentheses'>(</span>INT_MAX<span class='Operator'>-</span><a href="../../../include/c.h.html#LN444"><span class='Ref_to_Const'>VARHDRSZ</span></a><span class='Parentheses'>)</span><span class='Operator'>/</span><a href="formatting.c.html#LN117"><span class='Ref_to_Const'>NUM_MAX_ITEM_SIZ</span></a><span class='Parentheses'>)</span>     <span class='Operator'>\ 
</span>        <a href="../../../include/fmgr.h.html#LN329"><span class='Ref_to_Macro'>PG_RETURN_TEXT_P</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/builtins.h.html#LN85"><span class='Ref_to_Proto'>cstring_to_text</span></a><span class='Parentheses'>(</span><span class='String'>""</span><span class='Parentheses'>))</span><span class='Delimiter'>; </span><span class='Operator'>\ 
</span>    <a href="../../../bin/pgbench/exprparse.y.html#LN62"><span class='Ref_to_Label'>result</span></a>  <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../../contrib/seg/segparse.y.html#LN46"><span class='Ref_to_Global_Var'>text</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>((</span><a href="../../replication/repl_scanner.l.html#LN155"><span class='Ref_to_Global_Var'>len</span></a> <span class='Operator'>* </span><a href="formatting.c.html#LN117"><span class='Ref_to_Const'>NUM_MAX_ITEM_SIZ</span></a><span class='Parentheses'>) </span><span class='Operator'>+ </span><span class='Number'>1</span> <span class='Operator'>+ </span><a href="../../../include/c.h.html#LN444"><span class='Ref_to_Const'>VARHDRSZ</span></a><span class='Parentheses'>)</span><span class='Delimiter'>;</span>    <span class='Operator'>\ 
</span>    <a href="../../../bin/pg_basebackup/pg_basebackup.c.html#LN79"><span class='Ref_to_Global_Var'>format</span></a>  <span class='Operator'>= </span><a href="formatting.c.html#LN983"><span class='Ref_to_Proto'>NUM_cache</span></a><span class='Parentheses'>(</span><a href="../../replication/repl_scanner.l.html#LN155"><span class='Ref_to_Global_Var'>len</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span>Num<span class='Delimiter'>, </span>fmt<span class='Delimiter'>, </span><span class='Operator'>&</span>shouldFree<span class='Parentheses'>)</span><span class='Delimiter'>;</span>       <span class='Operator'>\ 
</span><span class='Delimiter'>} </span><span class='Control'>while</span> <span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>) 
</span> 
<span class='Comment_Multi_Line'>/* ---------- 
 * MACRO: Finish part of NUM 
 * ---------- 
 */ 
</span><a name="LN5074"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>NUM_TOCHAR_finish</span> <span class='Operator'>\ 
</span><span class='Control'>do</span> <span class='Delimiter'>{ </span><span class='Operator'>\ 
</span>    <span class='Keyword'>int</span>     <a href="../../replication/repl_scanner.l.html#LN155"><span class='Ref_to_Global_Var'>len</span></a><span class='Delimiter'>; </span><span class='Operator'>\ 
</span>                                    <span class='Operator'>\ 
</span>    <a href="formatting.c.html#LN989"><span class='Ref_to_Proto'>NUM_processor</span></a><span class='Parentheses'>(</span><a href="../../../bin/pg_basebackup/pg_basebackup.c.html#LN79"><span class='Ref_to_Global_Var'>format</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span>Num<span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN302"><span class='Ref_to_Macro'>VARDATA</span></a><span class='Parentheses'>(</span><a href="../../../bin/pgbench/exprparse.y.html#LN62"><span class='Ref_to_Label'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span>numstr<span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span>out_pre_spaces<span class='Delimiter'>, </span>sign<span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span><a href="../../../include/fmgr.h.html#LN162"><span class='Ref_to_Macro'>PG_GET_COLLATION</span></a><span class='Parentheses'>())</span><span class='Delimiter'>; </span><span class='Operator'>\ 
</span>                                    <span class='Operator'>\ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span>shouldFree<span class='Parentheses'>)</span>                 <span class='Operator'>\ 
</span>        <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="../../../bin/pg_basebackup/pg_basebackup.c.html#LN79"><span class='Ref_to_Global_Var'>format</span></a><span class='Parentheses'>)</span><span class='Delimiter'>;</span>              <span class='Operator'>\ 
</span>                                    <span class='Operator'>\ 
</span>    <span class='Comment_Multi_Line'>/*                              \ 
     * Convert null-terminated representation of result to standard text. \ 
     * The result is usually much bigger than it needs to be, but there \ 
     * seems little point in realloc'ing it smaller. \ 
     */</span>                             <span class='Operator'>\ 
</span>    <a href="../../replication/repl_scanner.l.html#LN155"><span class='Ref_to_Global_Var'>len</span></a> <span class='Operator'>= </span>strlen<span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN302"><span class='Ref_to_Macro'>VARDATA</span></a><span class='Parentheses'>(</span><a href="../../../bin/pgbench/exprparse.y.html#LN62"><span class='Ref_to_Label'>result</span></a><span class='Parentheses'>))</span><span class='Delimiter'>;</span>  <span class='Operator'>\ 
</span>    <a href="../../../include/postgres.h.html#LN327"><span class='Ref_to_Macro'>SET_VARSIZE</span></a><span class='Parentheses'>(</span><a href="../../../bin/pgbench/exprparse.y.html#LN62"><span class='Ref_to_Label'>result</span></a><span class='Delimiter'>, </span><a href="../../replication/repl_scanner.l.html#LN155"><span class='Ref_to_Global_Var'>len</span></a> <span class='Operator'>+ </span><a href="../../../include/c.h.html#LN444"><span class='Ref_to_Const'>VARHDRSZ</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; </span><span class='Operator'>\ 
</span><span class='Delimiter'>} </span><span class='Control'>while</span> <span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>) 
</span> 
<span class='Comment_Multi_Line'>/* ------------------- 
 * NUMERIC to_number() (convert string to numeric) 
 * ------------------- 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN5097"></a><span class='Declare_Function'>numeric_to_number</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN5099"></a>    <a href="../../../../contrib/seg/segparse.y.html#LN46"><span class='Ref_to_Global_Var'>text</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>value</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN272"><span class='Ref_to_Macro'>PG_GETARG_TEXT_PP</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN5100"></a>    <a href="../../../../contrib/seg/segparse.y.html#LN46"><span class='Ref_to_Global_Var'>text</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>fmt</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN272"><span class='Ref_to_Macro'>PG_GETARG_TEXT_PP</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN5101"></a>    <a href="formatting.c.html#LN305"><span class='Ref_to_Typedef'>NUMDesc</span></a>     <span class='Declare_Local'>Num</span><span class='Delimiter'>; 
</span><a name="LN5102"></a>    <a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>       <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span><a name="LN5103"></a>    <a href="formatting.c.html#LN164"><span class='Ref_to_Struct'>FormatNode</span></a> <span class='Operator'>*</span><span class='Declare_Local'>format</span><span class='Delimiter'>; 
</span><a name="LN5104"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>numstr</span><span class='Delimiter'>; 
</span><a name="LN5105"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>shouldFree</span><span class='Delimiter'>; 
</span><a name="LN5106"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>len</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN5107"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>scale</span><span class='Delimiter'>, 
</span><a name="LN5108"></a>                <span class='Declare_Local'>precision</span><span class='Delimiter'>; 
</span> 
    <a href="formatting.c.html#LN5106"><span class='Ref_To_Local'>len</span></a> <span class='Operator'>= </span><a href="../../../include/postgres.h.html#LN339"><span class='Ref_to_Macro'>VARSIZE_ANY_EXHDR</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN5100"><span class='Ref_To_Local'>fmt</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN5106"><span class='Ref_To_Local'>len</span></a> <span class='Operator'>&LT;= </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="formatting.c.html#LN5106"><span class='Ref_To_Local'>len</span></a> <span class='Operator'>&GT;= </span>INT_MAX <span class='Operator'>/ </span><a href="formatting.c.html#LN117"><span class='Ref_to_Const'>NUM_MAX_ITEM_SIZ</span></a><span class='Parentheses'>) 
</span>        <a href="../../../include/fmgr.h.html#LN304"><span class='Ref_to_Macro'>PG_RETURN_NULL</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="formatting.c.html#LN5103"><span class='Ref_To_Local'>format</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN983"><span class='Ref_to_Proto'>NUM_cache</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN5106"><span class='Ref_To_Local'>len</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN5101"><span class='Ref_To_Local'>Num</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN5100"><span class='Ref_To_Local'>fmt</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN5105"><span class='Ref_To_Local'>shouldFree</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="formatting.c.html#LN5104"><span class='Ref_To_Local'>numstr</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>((</span><a href="formatting.c.html#LN5106"><span class='Ref_To_Local'>len</span></a> <span class='Operator'>* </span><a href="formatting.c.html#LN117"><span class='Ref_to_Const'>NUM_MAX_ITEM_SIZ</span></a><span class='Parentheses'>) </span><span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="formatting.c.html#LN989"><span class='Ref_to_Proto'>NUM_processor</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN5103"><span class='Ref_To_Local'>format</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="formatting.c.html#LN5101"><span class='Ref_To_Local'>Num</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN346"><span class='Ref_to_Macro'>VARDATA_ANY</span></a><span class='Parentheses'>(</span><span class='Keyword'>value</span><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN5104"><span class='Ref_To_Local'>numstr</span></a><span class='Delimiter'>, 
</span>                  <a href="../../../include/postgres.h.html#LN339"><span class='Ref_to_Macro'>VARSIZE_ANY_EXHDR</span></a><span class='Parentheses'>(</span><span class='Keyword'>value</span><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span><a href="../../../include/fmgr.h.html#LN162"><span class='Ref_to_Macro'>PG_GET_COLLATION</span></a><span class='Parentheses'>())</span><span class='Delimiter'>; 
</span> 
    <a href="formatting.c.html#LN5107"><span class='Ref_To_Local'>scale</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN5101"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN308"><span class='Ref_to_Member'>post</span></a><span class='Delimiter'>; 
</span>    <a href="formatting.c.html#LN5108"><span class='Ref_To_Local'>precision</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN5101"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN307"><span class='Ref_to_Member'>pre</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN5101"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN312"><span class='Ref_to_Member'>multi</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN5107"><span class='Ref_To_Local'>scale</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN5105"><span class='Ref_To_Local'>shouldFree</span></a><span class='Parentheses'>) 
</span>        <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN5103"><span class='Ref_To_Local'>format</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="formatting.c.html#LN5102"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN587"><span class='Ref_to_Macro'>DirectFunctionCall3</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN557"><span class='Ref_to_Func'>numeric_in</span></a><span class='Delimiter'>, 
</span>                                 <a href="../../../include/postgres.h.html#LN583"><span class='Ref_to_Macro'>CStringGetDatum</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN5104"><span class='Ref_To_Local'>numstr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                 <a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                      <a href="../../../include/postgres.h.html#LN484"><span class='Ref_to_Macro'>Int32GetDatum</span></a><span class='Parentheses'>(((</span><a href="formatting.c.html#LN5108"><span class='Ref_To_Local'>precision</span></a> <span class='Operator'>&LT;&LT; </span><span class='Number'>16</span><span class='Parentheses'>) </span><span class='Operator'>| </span><a href="formatting.c.html#LN5107"><span class='Ref_To_Local'>scale</span></a><span class='Parentheses'>)</span> <span class='Operator'>+ </span><a href="../../../include/c.h.html#LN444"><span class='Ref_to_Const'>VARHDRSZ</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN355"><span class='Ref_to_Macro'>IS_MULTI</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN5101"><span class='Ref_To_Local'>Num</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN5135"></a>        <a href="../../../include/utils/numeric.h.html#LN42"><span class='Ref_to_Typedef'>Numeric</span></a>     <span class='Declare_Local'>x</span><span class='Delimiter'>; 
</span><a name="LN5136"></a>        <a href="../../../include/utils/numeric.h.html#LN42"><span class='Ref_to_Typedef'>Numeric</span></a>     <span class='Declare_Local'>a</span> <span class='Operator'>= </span><a href="../../../include/utils/numeric.h.html#LN48"><span class='Ref_to_Macro'>DatumGetNumeric</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN583"><span class='Ref_to_Macro'>DirectFunctionCall1</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN2900"><span class='Ref_to_Func'>int4_numeric</span></a><span class='Delimiter'>, 
</span>                                                         <a href="../../../include/postgres.h.html#LN484"><span class='Ref_to_Macro'>Int32GetDatum</span></a><span class='Parentheses'>(</span><span class='Number'>10</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span><a name="LN5138"></a>        <a href="../../../include/utils/numeric.h.html#LN42"><span class='Ref_to_Typedef'>Numeric</span></a>     <span class='Declare_Local'>b</span> <span class='Operator'>= </span><a href="../../../include/utils/numeric.h.html#LN48"><span class='Ref_to_Macro'>DatumGetNumeric</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN583"><span class='Ref_to_Macro'>DirectFunctionCall1</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN2900"><span class='Ref_to_Func'>int4_numeric</span></a><span class='Delimiter'>, 
</span>                                                 <a href="../../../include/postgres.h.html#LN484"><span class='Ref_to_Macro'>Int32GetDatum</span></a><span class='Parentheses'>(</span><span class='Operator'>-</span><a href="formatting.c.html#LN5101"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN312"><span class='Ref_to_Member'>multi</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
        <a href="formatting.c.html#LN5135"><span class='Ref_To_Local'>x</span></a> <span class='Operator'>= </span><a href="../../../include/utils/numeric.h.html#LN48"><span class='Ref_to_Macro'>DatumGetNumeric</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN585"><span class='Ref_to_Macro'>DirectFunctionCall2</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN2815"><span class='Ref_to_Func'>numeric_power</span></a><span class='Delimiter'>, 
</span>                                                <a href="../../../include/utils/numeric.h.html#LN50"><span class='Ref_to_Macro'>NumericGetDatum</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN5136"><span class='Ref_To_Local'>a</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                                <a href="../../../include/utils/numeric.h.html#LN50"><span class='Ref_to_Macro'>NumericGetDatum</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN5138"><span class='Ref_To_Local'>b</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        <a href="formatting.c.html#LN5102"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN585"><span class='Ref_to_Macro'>DirectFunctionCall2</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN2322"><span class='Ref_to_Func'>numeric_mul</span></a><span class='Delimiter'>, 
</span>                                     <a href="formatting.c.html#LN5102"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>, 
</span>                                     <a href="../../../include/utils/numeric.h.html#LN50"><span class='Ref_to_Macro'>NumericGetDatum</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN5135"><span class='Ref_To_Local'>x</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN5104"><span class='Ref_To_Local'>numstr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="formatting.c.html#LN5102"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end numeric_to_number &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* ------------------ 
 * NUMERIC to_char() 
 * ------------------ 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN5158"></a><span class='Declare_Function'>numeric_to_char</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN5160"></a>    <a href="../../../include/utils/numeric.h.html#LN42"><span class='Ref_to_Typedef'>Numeric</span></a>     <span class='Declare_Local'>value</span> <span class='Operator'>= </span><a href="../../../include/utils/numeric.h.html#LN51"><span class='Ref_to_Macro'>PG_GETARG_NUMERIC</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN5161"></a>    <a href="../../../../contrib/seg/segparse.y.html#LN46"><span class='Ref_to_Global_Var'>text</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>fmt</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN272"><span class='Ref_to_Macro'>PG_GETARG_TEXT_PP</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN5162"></a>    <a href="formatting.c.html#LN305"><span class='Ref_to_Typedef'>NUMDesc</span></a>     <span class='Declare_Local'>Num</span><span class='Delimiter'>; 
</span><a name="LN5163"></a>    <a href="formatting.c.html#LN164"><span class='Ref_to_Struct'>FormatNode</span></a> <span class='Operator'>*</span><span class='Declare_Local'>format</span><span class='Delimiter'>; 
</span><a name="LN5164"></a>    <a href="../../../../contrib/seg/segparse.y.html#LN46"><span class='Ref_to_Global_Var'>text</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span><a name="LN5165"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>shouldFree</span><span class='Delimiter'>; 
</span><a name="LN5166"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>out_pre_spaces</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>, 
</span><a name="LN5167"></a>                <span class='Declare_Local'>sign</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN5168"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>numstr</span><span class='Delimiter'>, 
</span><a name="LN5169"></a>               <span class='Operator'>*</span><span class='Declare_Local'>orgnum</span><span class='Delimiter'>, 
</span><a name="LN5170"></a>               <span class='Operator'>*</span><span class='Declare_Local'>p</span><span class='Delimiter'>; 
</span><a name="LN5171"></a>    <a href="../../../include/utils/numeric.h.html#LN42"><span class='Ref_to_Typedef'>Numeric</span></a>     <span class='Declare_Local'>x</span><span class='Delimiter'>; 
</span> 
    <a href="formatting.c.html#LN5061"><span class='Ref_to_Const'>NUM_TOCHAR_prepare</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * On DateType depend part (numeric) 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN354"><span class='Ref_to_Macro'>IS_ROMAN</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN5162"><span class='Ref_To_Local'>Num</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="formatting.c.html#LN5171"><span class='Ref_To_Local'>x</span></a> <span class='Operator'>= </span><a href="../../../include/utils/numeric.h.html#LN48"><span class='Ref_to_Macro'>DatumGetNumeric</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN585"><span class='Ref_to_Macro'>DirectFunctionCall2</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN1209"><span class='Ref_to_Func'>numeric_round</span></a><span class='Delimiter'>, 
</span>                                                <a href="../../../include/utils/numeric.h.html#LN50"><span class='Ref_to_Macro'>NumericGetDatum</span></a><span class='Parentheses'>(</span><span class='Keyword'>value</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                                <a href="../../../include/postgres.h.html#LN484"><span class='Ref_to_Macro'>Int32GetDatum</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        <a href="formatting.c.html#LN5168"><span class='Ref_To_Local'>numstr</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN5169"><span class='Ref_To_Local'>orgnum</span></a> <span class='Operator'>= 
</span>            <a href="formatting.c.html#LN984"><span class='Ref_to_Proto'>int_to_roman</span></a><span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN477"><span class='Ref_to_Macro'>DatumGetInt32</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN583"><span class='Ref_to_Macro'>DirectFunctionCall1</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN2919"><span class='Ref_to_Func'>numeric_int4</span></a><span class='Delimiter'>, 
</span>                                                       <a href="../../../include/utils/numeric.h.html#LN50"><span class='Ref_to_Macro'>NumericGetDatum</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN5171"><span class='Ref_To_Local'>x</span></a><span class='Parentheses'>))))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN356"><span class='Ref_to_Macro'>IS_EEEE</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN5162"><span class='Ref_To_Local'>Num</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="formatting.c.html#LN5169"><span class='Ref_To_Local'>orgnum</span></a> <span class='Operator'>= </span><a href="../../../include/utils/numeric.h.html#LN60"><span class='Ref_to_Proto'>numeric_out_sci</span></a><span class='Parentheses'>(</span><span class='Keyword'>value</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN5162"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN308"><span class='Ref_to_Member'>post</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * numeric_out_sci() does not emit a sign for positive numbers.  We 
         * need to add a space in this case so that positive and negative 
         * numbers are aligned.  We also have to do the right thing for NaN. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="formatting.c.html#LN5169"><span class='Ref_To_Local'>orgnum</span></a><span class='Delimiter'>, </span><span class='String'>"NaN"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * Allow 6 characters for the leading sign, the decimal point, 
             * "e", the exponent's sign and two exponent digits. 
             */ 
</span>            <a href="formatting.c.html#LN5168"><span class='Ref_To_Local'>numstr</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN5162"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN307"><span class='Ref_to_Member'>pre</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN5162"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN308"><span class='Ref_to_Member'>post</span></a> <span class='Operator'>+ </span><span class='Number'>7</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="formatting.c.html#LN982"><span class='Ref_to_Proto'>fill_str</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN5168"><span class='Ref_To_Local'>numstr</span></a><span class='Delimiter'>, </span><span class='String'>'#'</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN5162"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN307"><span class='Ref_to_Member'>pre</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN5162"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN308"><span class='Ref_to_Member'>post</span></a> <span class='Operator'>+ </span><span class='Number'>6</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Operator'>*</span><a href="formatting.c.html#LN5168"><span class='Ref_To_Local'>numstr</span></a> <span class='Operator'>= </span><span class='String'>' '</span><span class='Delimiter'>; 
</span>            <span class='Operator'>*</span><span class='Parentheses'>(</span><a href="formatting.c.html#LN5168"><span class='Ref_To_Local'>numstr</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN5162"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN307"><span class='Ref_to_Member'>pre</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>) </span><span class='Operator'>= </span><span class='String'>'.'</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="formatting.c.html#LN5169"><span class='Ref_To_Local'>orgnum</span></a> <span class='Operator'>!= </span><span class='String'>'-'</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="formatting.c.html#LN5168"><span class='Ref_To_Local'>numstr</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN5169"><span class='Ref_To_Local'>orgnum</span></a><span class='Parentheses'>) </span><span class='Operator'>+ </span><span class='Number'>2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Operator'>*</span><a href="formatting.c.html#LN5168"><span class='Ref_To_Local'>numstr</span></a> <span class='Operator'>= </span><span class='String'>' '</span><span class='Delimiter'>; 
</span>            <a href="../../../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN5168"><span class='Ref_To_Local'>numstr</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN5169"><span class='Ref_To_Local'>orgnum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <a href="formatting.c.html#LN5168"><span class='Ref_To_Local'>numstr</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN5169"><span class='Ref_To_Local'>orgnum</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if IS_EEEE(&Num) &raquo; </span> 
    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span><a name="LN5220"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>numstr_pre_len</span><span class='Delimiter'>; 
</span><a name="LN5221"></a>        <a href="../../../include/utils/numeric.h.html#LN42"><span class='Ref_to_Typedef'>Numeric</span></a>     <span class='Declare_Local'>val</span> <span class='Operator'>= </span><span class='Keyword'>value</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN355"><span class='Ref_to_Macro'>IS_MULTI</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN5162"><span class='Ref_To_Local'>Num</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span><a name="LN5225"></a>            <a href="../../../include/utils/numeric.h.html#LN42"><span class='Ref_to_Typedef'>Numeric</span></a>     <span class='Declare_Local'>a</span> <span class='Operator'>= </span><a href="../../../include/utils/numeric.h.html#LN48"><span class='Ref_to_Macro'>DatumGetNumeric</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN583"><span class='Ref_to_Macro'>DirectFunctionCall1</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN2900"><span class='Ref_to_Func'>int4_numeric</span></a><span class='Delimiter'>, 
</span>                                                         <a href="../../../include/postgres.h.html#LN484"><span class='Ref_to_Macro'>Int32GetDatum</span></a><span class='Parentheses'>(</span><span class='Number'>10</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span><a name="LN5227"></a>            <a href="../../../include/utils/numeric.h.html#LN42"><span class='Ref_to_Typedef'>Numeric</span></a>     <span class='Declare_Local'>b</span> <span class='Operator'>= </span><a href="../../../include/utils/numeric.h.html#LN48"><span class='Ref_to_Macro'>DatumGetNumeric</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN583"><span class='Ref_to_Macro'>DirectFunctionCall1</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN2900"><span class='Ref_to_Func'>int4_numeric</span></a><span class='Delimiter'>, 
</span>                                                  <a href="../../../include/postgres.h.html#LN484"><span class='Ref_to_Macro'>Int32GetDatum</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN5162"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN312"><span class='Ref_to_Member'>multi</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
            <a href="formatting.c.html#LN5171"><span class='Ref_To_Local'>x</span></a> <span class='Operator'>= </span><a href="../../../include/utils/numeric.h.html#LN48"><span class='Ref_to_Macro'>DatumGetNumeric</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN585"><span class='Ref_to_Macro'>DirectFunctionCall2</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN2815"><span class='Ref_to_Func'>numeric_power</span></a><span class='Delimiter'>, 
</span>                                                    <a href="../../../include/utils/numeric.h.html#LN50"><span class='Ref_to_Macro'>NumericGetDatum</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN5225"><span class='Ref_To_Local'>a</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                                    <a href="../../../include/utils/numeric.h.html#LN50"><span class='Ref_to_Macro'>NumericGetDatum</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN5227"><span class='Ref_To_Local'>b</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>            <a href="formatting.c.html#LN5221"><span class='Ref_To_Local'>val</span></a> <span class='Operator'>= </span><a href="../../../include/utils/numeric.h.html#LN48"><span class='Ref_to_Macro'>DatumGetNumeric</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN585"><span class='Ref_to_Macro'>DirectFunctionCall2</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN2322"><span class='Ref_to_Func'>numeric_mul</span></a><span class='Delimiter'>, 
</span>                                                      <a href="../../../include/utils/numeric.h.html#LN50"><span class='Ref_to_Macro'>NumericGetDatum</span></a><span class='Parentheses'>(</span><span class='Keyword'>value</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                                      <a href="../../../include/utils/numeric.h.html#LN50"><span class='Ref_to_Macro'>NumericGetDatum</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN5171"><span class='Ref_To_Local'>x</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>            <a href="formatting.c.html#LN5162"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN307"><span class='Ref_to_Member'>pre</span></a> <span class='Operator'>+= </span><a href="formatting.c.html#LN5162"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN312"><span class='Ref_to_Member'>multi</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <a href="formatting.c.html#LN5171"><span class='Ref_To_Local'>x</span></a> <span class='Operator'>= </span><a href="../../../include/utils/numeric.h.html#LN48"><span class='Ref_to_Macro'>DatumGetNumeric</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN585"><span class='Ref_to_Macro'>DirectFunctionCall2</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN1209"><span class='Ref_to_Func'>numeric_round</span></a><span class='Delimiter'>, 
</span>                                                <a href="../../../include/utils/numeric.h.html#LN50"><span class='Ref_to_Macro'>NumericGetDatum</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN5221"><span class='Ref_To_Local'>val</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                                <a href="../../../include/postgres.h.html#LN484"><span class='Ref_to_Macro'>Int32GetDatum</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN5162"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN308"><span class='Ref_to_Member'>post</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        <a href="formatting.c.html#LN5169"><span class='Ref_To_Local'>orgnum</span></a> <span class='Operator'>= </span><a href="../../../include/postgres.h.html#LN571"><span class='Ref_to_Macro'>DatumGetCString</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN583"><span class='Ref_to_Macro'>DirectFunctionCall1</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN639"><span class='Ref_to_Func'>numeric_out</span></a><span class='Delimiter'>, 
</span>                                                     <a href="../../../include/utils/numeric.h.html#LN50"><span class='Ref_to_Macro'>NumericGetDatum</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN5171"><span class='Ref_To_Local'>x</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="formatting.c.html#LN5169"><span class='Ref_To_Local'>orgnum</span></a> <span class='Operator'>== </span><span class='String'>'-'</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="formatting.c.html#LN5167"><span class='Ref_To_Local'>sign</span></a> <span class='Operator'>= </span><span class='String'>'-'</span><span class='Delimiter'>; 
</span>            <a href="formatting.c.html#LN5168"><span class='Ref_To_Local'>numstr</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN5169"><span class='Ref_To_Local'>orgnum</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <a href="formatting.c.html#LN5167"><span class='Ref_To_Local'>sign</span></a> <span class='Operator'>= </span><span class='String'>'+'</span><span class='Delimiter'>; 
</span>            <a href="formatting.c.html#LN5168"><span class='Ref_To_Local'>numstr</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN5169"><span class='Ref_To_Local'>orgnum</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="formatting.c.html#LN5170"><span class='Ref_To_Local'>p</span></a> <span class='Operator'>= </span>strchr<span class='Parentheses'>(</span><a href="formatting.c.html#LN5168"><span class='Ref_To_Local'>numstr</span></a><span class='Delimiter'>, </span><span class='String'>'.'</span><span class='Parentheses'>)))</span> 
            <a href="formatting.c.html#LN5220"><span class='Ref_To_Local'>numstr_pre_len</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN5170"><span class='Ref_To_Local'>p</span></a> <span class='Operator'>- </span><a href="formatting.c.html#LN5168"><span class='Ref_To_Local'>numstr</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="formatting.c.html#LN5220"><span class='Ref_To_Local'>numstr_pre_len</span></a> <span class='Operator'>= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN5168"><span class='Ref_To_Local'>numstr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* needs padding? */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN5220"><span class='Ref_To_Local'>numstr_pre_len</span></a> <span class='Operator'>&LT; </span><a href="formatting.c.html#LN5162"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN307"><span class='Ref_to_Member'>pre</span></a><span class='Parentheses'>) 
</span>            <a href="formatting.c.html#LN5166"><span class='Ref_To_Local'>out_pre_spaces</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN5162"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN307"><span class='Ref_to_Member'>pre</span></a> <span class='Operator'>- </span><a href="formatting.c.html#LN5220"><span class='Ref_To_Local'>numstr_pre_len</span></a><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* overflowed prefix digit format? */ 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN5220"><span class='Ref_To_Local'>numstr_pre_len</span></a> <span class='Operator'>&GT; </span><a href="formatting.c.html#LN5162"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN307"><span class='Ref_to_Member'>pre</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="formatting.c.html#LN5168"><span class='Ref_To_Local'>numstr</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN5162"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN307"><span class='Ref_to_Member'>pre</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN5162"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN308"><span class='Ref_to_Member'>post</span></a> <span class='Operator'>+ </span><span class='Number'>2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="formatting.c.html#LN982"><span class='Ref_to_Proto'>fill_str</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN5168"><span class='Ref_To_Local'>numstr</span></a><span class='Delimiter'>, </span><span class='String'>'#'</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN5162"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN307"><span class='Ref_to_Member'>pre</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN5162"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN308"><span class='Ref_to_Member'>post</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Operator'>*</span><span class='Parentheses'>(</span><a href="formatting.c.html#LN5168"><span class='Ref_To_Local'>numstr</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN5162"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN307"><span class='Ref_to_Member'>pre</span></a><span class='Parentheses'>) </span><span class='Operator'>= </span><span class='String'>'.'</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
 
    <a href="formatting.c.html#LN5074"><span class='Ref_to_Const'>NUM_TOCHAR_finish</span></a><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN329"><span class='Ref_to_Macro'>PG_RETURN_TEXT_P</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN5164"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end numeric_to_char &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* --------------- 
 * INT4 to_char() 
 * --------------- 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN5282"></a><span class='Declare_Function'>int4_to_char</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN5284"></a>    <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>value</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN233"><span class='Ref_to_Macro'>PG_GETARG_INT32</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN5285"></a>    <a href="../../../../contrib/seg/segparse.y.html#LN46"><span class='Ref_to_Global_Var'>text</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>fmt</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN272"><span class='Ref_to_Macro'>PG_GETARG_TEXT_PP</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN5286"></a>    <a href="formatting.c.html#LN305"><span class='Ref_to_Typedef'>NUMDesc</span></a>     <span class='Declare_Local'>Num</span><span class='Delimiter'>; 
</span><a name="LN5287"></a>    <a href="formatting.c.html#LN164"><span class='Ref_to_Struct'>FormatNode</span></a> <span class='Operator'>*</span><span class='Declare_Local'>format</span><span class='Delimiter'>; 
</span><a name="LN5288"></a>    <a href="../../../../contrib/seg/segparse.y.html#LN46"><span class='Ref_to_Global_Var'>text</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span><a name="LN5289"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>shouldFree</span><span class='Delimiter'>; 
</span><a name="LN5290"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>out_pre_spaces</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>, 
</span><a name="LN5291"></a>                <span class='Declare_Local'>sign</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN5292"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>numstr</span><span class='Delimiter'>, 
</span><a name="LN5293"></a>               <span class='Operator'>*</span><span class='Declare_Local'>orgnum</span><span class='Delimiter'>; 
</span> 
    <a href="formatting.c.html#LN5061"><span class='Ref_to_Const'>NUM_TOCHAR_prepare</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * On DateType depend part (int32) 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN354"><span class='Ref_to_Macro'>IS_ROMAN</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN5286"><span class='Ref_To_Local'>Num</span></a><span class='Parentheses'>))</span> 
        <a href="formatting.c.html#LN5292"><span class='Ref_To_Local'>numstr</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN5293"><span class='Ref_To_Local'>orgnum</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN984"><span class='Ref_to_Proto'>int_to_roman</span></a><span class='Parentheses'>(</span><span class='Keyword'>value</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN356"><span class='Ref_to_Macro'>IS_EEEE</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN5286"><span class='Ref_To_Local'>Num</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* we can do it easily because float8 won't lose any precision */ 
</span><a name="LN5305"></a>        <a href="../../../include/c.h.html#LN380"><span class='Ref_to_Typedef'>float8</span></a>      <span class='Declare_Local'>val</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN380"><span class='Ref_to_Typedef'>float8</span></a><span class='Parentheses'>) </span><span class='Keyword'>value</span><span class='Delimiter'>; 
</span> 
        <a href="formatting.c.html#LN5293"><span class='Ref_To_Local'>orgnum</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="float.c.html#LN47"><span class='Ref_to_Const'>MAXDOUBLEWIDTH</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../../pl/plperl/plperl.h.html#LN60"><span class='Ref_to_Macro'>snprintf</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN5293"><span class='Ref_To_Local'>orgnum</span></a><span class='Delimiter'>, </span><a href="float.c.html#LN47"><span class='Ref_to_Const'>MAXDOUBLEWIDTH</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='String'>"%+.*e"</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN5286"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN308"><span class='Ref_to_Member'>post</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN5305"><span class='Ref_To_Local'>val</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Swap a leading positive sign for a space. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="formatting.c.html#LN5293"><span class='Ref_To_Local'>orgnum</span></a> <span class='Operator'>== </span><span class='String'>'+'</span><span class='Parentheses'>) 
</span>            <span class='Operator'>*</span><a href="formatting.c.html#LN5293"><span class='Ref_To_Local'>orgnum</span></a> <span class='Operator'>= </span><span class='String'>' '</span><span class='Delimiter'>; 
</span> 
        <a href="formatting.c.html#LN5292"><span class='Ref_To_Local'>numstr</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN5293"><span class='Ref_To_Local'>orgnum</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span><a name="LN5320"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>numstr_pre_len</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN355"><span class='Ref_to_Macro'>IS_MULTI</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN5286"><span class='Ref_To_Local'>Num</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <a href="formatting.c.html#LN5293"><span class='Ref_To_Local'>orgnum</span></a> <span class='Operator'>= </span><a href="../../../include/postgres.h.html#LN571"><span class='Ref_to_Macro'>DatumGetCString</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN583"><span class='Ref_to_Macro'>DirectFunctionCall1</span></a><span class='Parentheses'>(</span><a href="int.c.html#LN275"><span class='Ref_to_Func'>int4out</span></a><span class='Delimiter'>, 
</span>                                                         <a href="../../../include/postgres.h.html#LN484"><span class='Ref_to_Macro'>Int32GetDatum</span></a><span class='Parentheses'>(</span><span class='Keyword'>value </span><span class='Operator'>* </span><span class='Parentheses'>((</span><a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a><span class='Parentheses'>)</span> pow<span class='Parentheses'>((</span><span class='Keyword'>double</span><span class='Parentheses'>) </span><span class='Number'>10</span><span class='Delimiter'>, </span><span class='Parentheses'>(</span><span class='Keyword'>double</span><span class='Parentheses'>) </span><a href="formatting.c.html#LN5286"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN312"><span class='Ref_to_Member'>multi</span></a><span class='Parentheses'>)))))</span><span class='Delimiter'>; 
</span>            <a href="formatting.c.html#LN5286"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN307"><span class='Ref_to_Member'>pre</span></a> <span class='Operator'>+= </span><a href="formatting.c.html#LN5286"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN312"><span class='Ref_to_Member'>multi</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <a href="formatting.c.html#LN5293"><span class='Ref_To_Local'>orgnum</span></a> <span class='Operator'>= </span><a href="../../../include/postgres.h.html#LN571"><span class='Ref_to_Macro'>DatumGetCString</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN583"><span class='Ref_to_Macro'>DirectFunctionCall1</span></a><span class='Parentheses'>(</span><a href="int.c.html#LN275"><span class='Ref_to_Func'>int4out</span></a><span class='Delimiter'>, 
</span>                                                      <a href="../../../include/postgres.h.html#LN484"><span class='Ref_to_Macro'>Int32GetDatum</span></a><span class='Parentheses'>(</span><span class='Keyword'>value</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="formatting.c.html#LN5293"><span class='Ref_To_Local'>orgnum</span></a> <span class='Operator'>== </span><span class='String'>'-'</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="formatting.c.html#LN5291"><span class='Ref_To_Local'>sign</span></a> <span class='Operator'>= </span><span class='String'>'-'</span><span class='Delimiter'>; 
</span>            <a href="formatting.c.html#LN5293"><span class='Ref_To_Local'>orgnum</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
            <a href="formatting.c.html#LN5291"><span class='Ref_To_Local'>sign</span></a> <span class='Operator'>= </span><span class='String'>'+'</span><span class='Delimiter'>; 
</span> 
        <a href="formatting.c.html#LN5320"><span class='Ref_To_Local'>numstr_pre_len</span></a> <span class='Operator'>= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN5293"><span class='Ref_To_Local'>orgnum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* post-decimal digits?  Pad out with zeros. */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN5286"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN308"><span class='Ref_to_Member'>post</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="formatting.c.html#LN5292"><span class='Ref_To_Local'>numstr</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN5320"><span class='Ref_To_Local'>numstr_pre_len</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN5286"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN308"><span class='Ref_to_Member'>post</span></a> <span class='Operator'>+ </span><span class='Number'>2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN5292"><span class='Ref_To_Local'>numstr</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN5293"><span class='Ref_To_Local'>orgnum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Operator'>*</span><span class='Parentheses'>(</span><a href="formatting.c.html#LN5292"><span class='Ref_To_Local'>numstr</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN5320"><span class='Ref_To_Local'>numstr_pre_len</span></a><span class='Parentheses'>) </span><span class='Operator'>= </span><span class='String'>'.'</span><span class='Delimiter'>; 
</span>            memset<span class='Parentheses'>(</span><a href="formatting.c.html#LN5292"><span class='Ref_To_Local'>numstr</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN5320"><span class='Ref_To_Local'>numstr_pre_len</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='String'>'0'</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN5286"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN308"><span class='Ref_to_Member'>post</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Operator'>*</span><span class='Parentheses'>(</span><a href="formatting.c.html#LN5292"><span class='Ref_To_Local'>numstr</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN5320"><span class='Ref_To_Local'>numstr_pre_len</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN5286"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN308"><span class='Ref_to_Member'>post</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>) </span><span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
            <a href="formatting.c.html#LN5292"><span class='Ref_To_Local'>numstr</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN5293"><span class='Ref_To_Local'>orgnum</span></a><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* needs padding? */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN5320"><span class='Ref_To_Local'>numstr_pre_len</span></a> <span class='Operator'>&LT; </span><a href="formatting.c.html#LN5286"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN307"><span class='Ref_to_Member'>pre</span></a><span class='Parentheses'>) 
</span>            <a href="formatting.c.html#LN5290"><span class='Ref_To_Local'>out_pre_spaces</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN5286"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN307"><span class='Ref_to_Member'>pre</span></a> <span class='Operator'>- </span><a href="formatting.c.html#LN5320"><span class='Ref_To_Local'>numstr_pre_len</span></a><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* overflowed prefix digit format? */ 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN5320"><span class='Ref_To_Local'>numstr_pre_len</span></a> <span class='Operator'>&GT; </span><a href="formatting.c.html#LN5286"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN307"><span class='Ref_to_Member'>pre</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="formatting.c.html#LN5292"><span class='Ref_To_Local'>numstr</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN5286"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN307"><span class='Ref_to_Member'>pre</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN5286"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN308"><span class='Ref_to_Member'>post</span></a> <span class='Operator'>+ </span><span class='Number'>2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="formatting.c.html#LN982"><span class='Ref_to_Proto'>fill_str</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN5292"><span class='Ref_To_Local'>numstr</span></a><span class='Delimiter'>, </span><span class='String'>'#'</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN5286"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN307"><span class='Ref_to_Member'>pre</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN5286"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN308"><span class='Ref_to_Member'>post</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Operator'>*</span><span class='Parentheses'>(</span><a href="formatting.c.html#LN5292"><span class='Ref_To_Local'>numstr</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN5286"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN307"><span class='Ref_to_Member'>pre</span></a><span class='Parentheses'>) </span><span class='Operator'>= </span><span class='String'>'.'</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
 
    <a href="formatting.c.html#LN5074"><span class='Ref_to_Const'>NUM_TOCHAR_finish</span></a><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN329"><span class='Ref_to_Macro'>PG_RETURN_TEXT_P</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN5288"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end int4_to_char &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* --------------- 
 * INT8 to_char() 
 * --------------- 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN5377"></a><span class='Declare_Function'>int8_to_char</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN5379"></a>    <a href="../../../include/c.h.html#LN294"><span class='Ref_to_Typedef'>int64</span></a>       <span class='Declare_Local'>value</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN246"><span class='Ref_to_Macro'>PG_GETARG_INT64</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN5380"></a>    <a href="../../../../contrib/seg/segparse.y.html#LN46"><span class='Ref_to_Global_Var'>text</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>fmt</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN272"><span class='Ref_to_Macro'>PG_GETARG_TEXT_PP</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN5381"></a>    <a href="formatting.c.html#LN305"><span class='Ref_to_Typedef'>NUMDesc</span></a>     <span class='Declare_Local'>Num</span><span class='Delimiter'>; 
</span><a name="LN5382"></a>    <a href="formatting.c.html#LN164"><span class='Ref_to_Struct'>FormatNode</span></a> <span class='Operator'>*</span><span class='Declare_Local'>format</span><span class='Delimiter'>; 
</span><a name="LN5383"></a>    <a href="../../../../contrib/seg/segparse.y.html#LN46"><span class='Ref_to_Global_Var'>text</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span><a name="LN5384"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>shouldFree</span><span class='Delimiter'>; 
</span><a name="LN5385"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>out_pre_spaces</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>, 
</span><a name="LN5386"></a>                <span class='Declare_Local'>sign</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN5387"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>numstr</span><span class='Delimiter'>, 
</span><a name="LN5388"></a>               <span class='Operator'>*</span><span class='Declare_Local'>orgnum</span><span class='Delimiter'>; 
</span> 
    <a href="formatting.c.html#LN5061"><span class='Ref_to_Const'>NUM_TOCHAR_prepare</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * On DateType depend part (int32) 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN354"><span class='Ref_to_Macro'>IS_ROMAN</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN5381"><span class='Ref_To_Local'>Num</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Currently don't support int8 conversion to roman... */ 
</span>        <a href="formatting.c.html#LN5387"><span class='Ref_To_Local'>numstr</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN5388"><span class='Ref_To_Local'>orgnum</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN984"><span class='Ref_to_Proto'>int_to_roman</span></a><span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN477"><span class='Ref_to_Macro'>DatumGetInt32</span></a><span class='Parentheses'>(</span> 
                          <a href="../../../include/fmgr.h.html#LN583"><span class='Ref_to_Macro'>DirectFunctionCall1</span></a><span class='Parentheses'>(</span><a href="int8.c.html#LN1285"><span class='Ref_to_Func'>int84</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN624"><span class='Ref_to_Macro'>Int64GetDatum</span></a><span class='Parentheses'>(</span><span class='Keyword'>value</span><span class='Parentheses'>))))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN356"><span class='Ref_to_Macro'>IS_EEEE</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN5381"><span class='Ref_To_Local'>Num</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* to avoid loss of precision, must go via numeric not float8 */ 
</span><a name="LN5404"></a>        <a href="../../../include/utils/numeric.h.html#LN42"><span class='Ref_to_Typedef'>Numeric</span></a>     <span class='Declare_Local'>val</span><span class='Delimiter'>; 
</span> 
        <a href="formatting.c.html#LN5404"><span class='Ref_To_Local'>val</span></a> <span class='Operator'>= </span><a href="../../../include/utils/numeric.h.html#LN48"><span class='Ref_to_Macro'>DatumGetNumeric</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN583"><span class='Ref_to_Macro'>DirectFunctionCall1</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN2966"><span class='Ref_to_Func'>int8_numeric</span></a><span class='Delimiter'>, 
</span>                                                  <a href="../../../include/postgres.h.html#LN624"><span class='Ref_to_Macro'>Int64GetDatum</span></a><span class='Parentheses'>(</span><span class='Keyword'>value</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        <a href="formatting.c.html#LN5388"><span class='Ref_To_Local'>orgnum</span></a> <span class='Operator'>= </span><a href="../../../include/utils/numeric.h.html#LN60"><span class='Ref_to_Proto'>numeric_out_sci</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN5404"><span class='Ref_To_Local'>val</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN5381"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN308"><span class='Ref_to_Member'>post</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * numeric_out_sci() does not emit a sign for positive numbers.  We 
         * need to add a space in this case so that positive and negative 
         * numbers are aligned.  We don't have to worry about NaN here. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="formatting.c.html#LN5388"><span class='Ref_To_Local'>orgnum</span></a> <span class='Operator'>!= </span><span class='String'>'-'</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="formatting.c.html#LN5387"><span class='Ref_To_Local'>numstr</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN5388"><span class='Ref_To_Local'>orgnum</span></a><span class='Parentheses'>) </span><span class='Operator'>+ </span><span class='Number'>2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Operator'>*</span><a href="formatting.c.html#LN5387"><span class='Ref_To_Local'>numstr</span></a> <span class='Operator'>= </span><span class='String'>' '</span><span class='Delimiter'>; 
</span>            <a href="../../../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN5387"><span class='Ref_To_Local'>numstr</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN5388"><span class='Ref_To_Local'>orgnum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <a href="formatting.c.html#LN5387"><span class='Ref_To_Local'>numstr</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN5388"><span class='Ref_To_Local'>orgnum</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if IS_EEEE(&Num) &raquo; </span> 
    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span><a name="LN5428"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>numstr_pre_len</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN355"><span class='Ref_to_Macro'>IS_MULTI</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN5381"><span class='Ref_To_Local'>Num</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span><a name="LN5432"></a>            <span class='Keyword'>double</span>      <span class='Declare_Local'>multi</span> <span class='Operator'>= </span>pow<span class='Parentheses'>((</span><span class='Keyword'>double</span><span class='Parentheses'>) </span><span class='Number'>10</span><span class='Delimiter'>, </span><span class='Parentheses'>(</span><span class='Keyword'>double</span><span class='Parentheses'>) </span><a href="formatting.c.html#LN5381"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN312"><span class='Ref_to_Member'>multi</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Keyword'>value </span><span class='Operator'>= </span><a href="../../../include/postgres.h.html#LN610"><span class='Ref_to_Macro'>DatumGetInt64</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN585"><span class='Ref_to_Macro'>DirectFunctionCall2</span></a><span class='Parentheses'>(</span><a href="int8.c.html#LN553"><span class='Ref_to_Func'>int8mul</span></a><span class='Delimiter'>, 
</span>                                                      <a href="../../../include/postgres.h.html#LN624"><span class='Ref_to_Macro'>Int64GetDatum</span></a><span class='Parentheses'>(</span><span class='Keyword'>value</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                                   <a href="../../../include/fmgr.h.html#LN583"><span class='Ref_to_Macro'>DirectFunctionCall1</span></a><span class='Parentheses'>(</span><a href="int8.c.html#LN1341"><span class='Ref_to_Func'>dtoi8</span></a><span class='Delimiter'>, 
</span>                                                    <a href="../../../include/postgres.h.html#LN745"><span class='Ref_to_Func'>Float8GetDatum</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN5432"><span class='Ref_To_Local'>multi</span></a><span class='Parentheses'>))))</span><span class='Delimiter'>; 
</span>            <a href="formatting.c.html#LN5381"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN307"><span class='Ref_to_Member'>pre</span></a> <span class='Operator'>+= </span><a href="formatting.c.html#LN5381"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN312"><span class='Ref_to_Member'>multi</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <a href="formatting.c.html#LN5388"><span class='Ref_To_Local'>orgnum</span></a> <span class='Operator'>= </span><a href="../../../include/postgres.h.html#LN571"><span class='Ref_to_Macro'>DatumGetCString</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN583"><span class='Ref_to_Macro'>DirectFunctionCall1</span></a><span class='Parentheses'>(</span><a href="int8.c.html#LN156"><span class='Ref_to_Func'>int8out</span></a><span class='Delimiter'>, 
</span>                                                     <a href="../../../include/postgres.h.html#LN624"><span class='Ref_to_Macro'>Int64GetDatum</span></a><span class='Parentheses'>(</span><span class='Keyword'>value</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="formatting.c.html#LN5388"><span class='Ref_To_Local'>orgnum</span></a> <span class='Operator'>== </span><span class='String'>'-'</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="formatting.c.html#LN5386"><span class='Ref_To_Local'>sign</span></a> <span class='Operator'>= </span><span class='String'>'-'</span><span class='Delimiter'>; 
</span>            <a href="formatting.c.html#LN5388"><span class='Ref_To_Local'>orgnum</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
            <a href="formatting.c.html#LN5386"><span class='Ref_To_Local'>sign</span></a> <span class='Operator'>= </span><span class='String'>'+'</span><span class='Delimiter'>; 
</span> 
        <a href="formatting.c.html#LN5428"><span class='Ref_To_Local'>numstr_pre_len</span></a> <span class='Operator'>= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN5388"><span class='Ref_To_Local'>orgnum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* post-decimal digits?  Pad out with zeros. */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN5381"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN308"><span class='Ref_to_Member'>post</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="formatting.c.html#LN5387"><span class='Ref_To_Local'>numstr</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN5428"><span class='Ref_To_Local'>numstr_pre_len</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN5381"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN308"><span class='Ref_to_Member'>post</span></a> <span class='Operator'>+ </span><span class='Number'>2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN5387"><span class='Ref_To_Local'>numstr</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN5388"><span class='Ref_To_Local'>orgnum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Operator'>*</span><span class='Parentheses'>(</span><a href="formatting.c.html#LN5387"><span class='Ref_To_Local'>numstr</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN5428"><span class='Ref_To_Local'>numstr_pre_len</span></a><span class='Parentheses'>) </span><span class='Operator'>= </span><span class='String'>'.'</span><span class='Delimiter'>; 
</span>            memset<span class='Parentheses'>(</span><a href="formatting.c.html#LN5387"><span class='Ref_To_Local'>numstr</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN5428"><span class='Ref_To_Local'>numstr_pre_len</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='String'>'0'</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN5381"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN308"><span class='Ref_to_Member'>post</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Operator'>*</span><span class='Parentheses'>(</span><a href="formatting.c.html#LN5387"><span class='Ref_To_Local'>numstr</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN5428"><span class='Ref_To_Local'>numstr_pre_len</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN5381"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN308"><span class='Ref_to_Member'>post</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>) </span><span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
            <a href="formatting.c.html#LN5387"><span class='Ref_To_Local'>numstr</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN5388"><span class='Ref_To_Local'>orgnum</span></a><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* needs padding? */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN5428"><span class='Ref_To_Local'>numstr_pre_len</span></a> <span class='Operator'>&LT; </span><a href="formatting.c.html#LN5381"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN307"><span class='Ref_to_Member'>pre</span></a><span class='Parentheses'>) 
</span>            <a href="formatting.c.html#LN5385"><span class='Ref_To_Local'>out_pre_spaces</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN5381"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN307"><span class='Ref_to_Member'>pre</span></a> <span class='Operator'>- </span><a href="formatting.c.html#LN5428"><span class='Ref_To_Local'>numstr_pre_len</span></a><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* overflowed prefix digit format? */ 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN5428"><span class='Ref_To_Local'>numstr_pre_len</span></a> <span class='Operator'>&GT; </span><a href="formatting.c.html#LN5381"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN307"><span class='Ref_to_Member'>pre</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="formatting.c.html#LN5387"><span class='Ref_To_Local'>numstr</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN5381"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN307"><span class='Ref_to_Member'>pre</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN5381"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN308"><span class='Ref_to_Member'>post</span></a> <span class='Operator'>+ </span><span class='Number'>2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="formatting.c.html#LN982"><span class='Ref_to_Proto'>fill_str</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN5387"><span class='Ref_To_Local'>numstr</span></a><span class='Delimiter'>, </span><span class='String'>'#'</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN5381"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN307"><span class='Ref_to_Member'>pre</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN5381"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN308"><span class='Ref_to_Member'>post</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Operator'>*</span><span class='Parentheses'>(</span><a href="formatting.c.html#LN5387"><span class='Ref_To_Local'>numstr</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN5381"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN307"><span class='Ref_to_Member'>pre</span></a><span class='Parentheses'>) </span><span class='Operator'>= </span><span class='String'>'.'</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
 
    <a href="formatting.c.html#LN5074"><span class='Ref_to_Const'>NUM_TOCHAR_finish</span></a><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN329"><span class='Ref_to_Macro'>PG_RETURN_TEXT_P</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN5383"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end int8_to_char &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* ----------------- 
 * FLOAT4 to_char() 
 * ----------------- 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN5487"></a><span class='Declare_Function'>float4_to_char</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN5489"></a>    <a href="../../../include/c.h.html#LN379"><span class='Ref_to_Typedef'>float4</span></a>      <span class='Declare_Local'>value</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN244"><span class='Ref_to_Macro'>PG_GETARG_FLOAT4</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN5490"></a>    <a href="../../../../contrib/seg/segparse.y.html#LN46"><span class='Ref_to_Global_Var'>text</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>fmt</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN272"><span class='Ref_to_Macro'>PG_GETARG_TEXT_PP</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN5491"></a>    <a href="formatting.c.html#LN305"><span class='Ref_to_Typedef'>NUMDesc</span></a>     <span class='Declare_Local'>Num</span><span class='Delimiter'>; 
</span><a name="LN5492"></a>    <a href="formatting.c.html#LN164"><span class='Ref_to_Struct'>FormatNode</span></a> <span class='Operator'>*</span><span class='Declare_Local'>format</span><span class='Delimiter'>; 
</span><a name="LN5493"></a>    <a href="../../../../contrib/seg/segparse.y.html#LN46"><span class='Ref_to_Global_Var'>text</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span><a name="LN5494"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>shouldFree</span><span class='Delimiter'>; 
</span><a name="LN5495"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>out_pre_spaces</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>, 
</span><a name="LN5496"></a>                <span class='Declare_Local'>sign</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN5497"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>numstr</span><span class='Delimiter'>, 
</span><a name="LN5498"></a>               <span class='Operator'>*</span><span class='Declare_Local'>orgnum</span><span class='Delimiter'>, 
</span><a name="LN5499"></a>               <span class='Operator'>*</span><span class='Declare_Local'>p</span><span class='Delimiter'>; 
</span> 
    <a href="formatting.c.html#LN5061"><span class='Ref_to_Const'>NUM_TOCHAR_prepare</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN354"><span class='Ref_to_Macro'>IS_ROMAN</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN5491"><span class='Ref_To_Local'>Num</span></a><span class='Parentheses'>))</span> 
        <a href="formatting.c.html#LN5497"><span class='Ref_To_Local'>numstr</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN5498"><span class='Ref_To_Local'>orgnum</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN984"><span class='Ref_to_Proto'>int_to_roman</span></a><span class='Parentheses'>((</span><span class='Keyword'>int</span><span class='Parentheses'>) </span><a href="../../../port/rint.c.html#LN20"><span class='Ref_to_Func'>rint</span></a><span class='Parentheses'>(</span><span class='Keyword'>value</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN356"><span class='Ref_to_Macro'>IS_EEEE</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN5491"><span class='Ref_To_Local'>Num</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="formatting.c.html#LN5497"><span class='Ref_To_Local'>numstr</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN5498"><span class='Ref_To_Local'>orgnum</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="float.c.html#LN47"><span class='Ref_to_Const'>MAXDOUBLEWIDTH</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../interfaces/ecpg/test/expected/pgtypeslib-nan_test.c.html#LN30"><span class='Ref_to_Macro'>isnan</span></a><span class='Parentheses'>(</span><span class='Keyword'>value</span><span class='Parentheses'>) </span><span class='Operator'>|| </span><a href="../../../include/utils/builtins.h.html#LN59"><span class='Ref_to_Proto'>is_infinite</span></a><span class='Parentheses'>(</span><span class='Keyword'>value</span><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * Allow 6 characters for the leading sign, the decimal point, 
             * "e", the exponent's sign and two exponent digits. 
             */ 
</span>            <a href="formatting.c.html#LN5497"><span class='Ref_To_Local'>numstr</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN5491"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN307"><span class='Ref_to_Member'>pre</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN5491"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN308"><span class='Ref_to_Member'>post</span></a> <span class='Operator'>+ </span><span class='Number'>7</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="formatting.c.html#LN982"><span class='Ref_to_Proto'>fill_str</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN5497"><span class='Ref_To_Local'>numstr</span></a><span class='Delimiter'>, </span><span class='String'>'#'</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN5491"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN307"><span class='Ref_to_Member'>pre</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN5491"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN308"><span class='Ref_to_Member'>post</span></a> <span class='Operator'>+ </span><span class='Number'>6</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Operator'>*</span><a href="formatting.c.html#LN5497"><span class='Ref_To_Local'>numstr</span></a> <span class='Operator'>= </span><span class='String'>' '</span><span class='Delimiter'>; 
</span>            <span class='Operator'>*</span><span class='Parentheses'>(</span><a href="formatting.c.html#LN5497"><span class='Ref_To_Local'>numstr</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN5491"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN307"><span class='Ref_to_Member'>pre</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>) </span><span class='Operator'>= </span><span class='String'>'.'</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <a href="../../../pl/plperl/plperl.h.html#LN60"><span class='Ref_to_Macro'>snprintf</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN5498"><span class='Ref_To_Local'>orgnum</span></a><span class='Delimiter'>, </span><a href="float.c.html#LN47"><span class='Ref_to_Const'>MAXDOUBLEWIDTH</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='String'>"%+.*e"</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN5491"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN308"><span class='Ref_to_Member'>post</span></a><span class='Delimiter'>, </span><span class='Keyword'>value</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * Swap a leading positive sign for a space. 
             */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="formatting.c.html#LN5498"><span class='Ref_To_Local'>orgnum</span></a> <span class='Operator'>== </span><span class='String'>'+'</span><span class='Parentheses'>) 
</span>                <span class='Operator'>*</span><a href="formatting.c.html#LN5498"><span class='Ref_To_Local'>orgnum</span></a> <span class='Operator'>= </span><span class='String'>' '</span><span class='Delimiter'>; 
</span> 
            <a href="formatting.c.html#LN5497"><span class='Ref_To_Local'>numstr</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN5498"><span class='Ref_To_Local'>orgnum</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if IS_EEEE(&Num) &raquo; </span> 
    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span><a name="LN5534"></a>        <a href="../../../include/c.h.html#LN379"><span class='Ref_to_Typedef'>float4</span></a>      <span class='Declare_Local'>val</span> <span class='Operator'>= </span><span class='Keyword'>value</span><span class='Delimiter'>; 
</span><a name="LN5535"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>numstr_pre_len</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN355"><span class='Ref_to_Macro'>IS_MULTI</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN5491"><span class='Ref_To_Local'>Num</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span><a name="LN5539"></a>            <span class='Keyword'>float</span>       <span class='Declare_Local'>multi</span> <span class='Operator'>= </span>pow<span class='Parentheses'>((</span><span class='Keyword'>double</span><span class='Parentheses'>) </span><span class='Number'>10</span><span class='Delimiter'>, </span><span class='Parentheses'>(</span><span class='Keyword'>double</span><span class='Parentheses'>) </span><a href="formatting.c.html#LN5491"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN312"><span class='Ref_to_Member'>multi</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <a href="formatting.c.html#LN5534"><span class='Ref_To_Local'>val</span></a> <span class='Operator'>= </span><span class='Keyword'>value </span><span class='Operator'>* </span><a href="formatting.c.html#LN5539"><span class='Ref_To_Local'>multi</span></a><span class='Delimiter'>; 
</span>            <a href="formatting.c.html#LN5491"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN307"><span class='Ref_to_Member'>pre</span></a> <span class='Operator'>+= </span><a href="formatting.c.html#LN5491"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN312"><span class='Ref_to_Member'>multi</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <a href="formatting.c.html#LN5498"><span class='Ref_To_Local'>orgnum</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="float.c.html#LN46"><span class='Ref_to_Const'>MAXFLOATWIDTH</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../../pl/plperl/plperl.h.html#LN60"><span class='Ref_to_Macro'>snprintf</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN5498"><span class='Ref_To_Local'>orgnum</span></a><span class='Delimiter'>, </span><a href="float.c.html#LN46"><span class='Ref_to_Const'>MAXFLOATWIDTH</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='String'>"%.0f"</span><span class='Delimiter'>, </span>fabs<span class='Parentheses'>(</span><a href="formatting.c.html#LN5534"><span class='Ref_To_Local'>val</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="formatting.c.html#LN5535"><span class='Ref_To_Local'>numstr_pre_len</span></a> <span class='Operator'>= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN5498"><span class='Ref_To_Local'>orgnum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* adjust post digits to fit max float digits */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN5535"><span class='Ref_To_Local'>numstr_pre_len</span></a> <span class='Operator'>&GT;= </span>FLT_DIG<span class='Parentheses'>) 
</span>            <a href="formatting.c.html#LN5491"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN308"><span class='Ref_to_Member'>post</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN5535"><span class='Ref_To_Local'>numstr_pre_len</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN5491"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN308"><span class='Ref_to_Member'>post</span></a> <span class='Operator'>&GT; </span>FLT_DIG<span class='Parentheses'>) 
</span>            <a href="formatting.c.html#LN5491"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN308"><span class='Ref_to_Member'>post</span></a> <span class='Operator'>= </span>FLT_DIG <span class='Operator'>- </span><a href="formatting.c.html#LN5535"><span class='Ref_To_Local'>numstr_pre_len</span></a><span class='Delimiter'>; 
</span>        <a href="../../../pl/plperl/plperl.h.html#LN60"><span class='Ref_to_Macro'>snprintf</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN5498"><span class='Ref_To_Local'>orgnum</span></a><span class='Delimiter'>, </span><a href="float.c.html#LN46"><span class='Ref_to_Const'>MAXFLOATWIDTH</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='String'>"%.*f"</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN5491"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN308"><span class='Ref_to_Member'>post</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN5534"><span class='Ref_To_Local'>val</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="formatting.c.html#LN5498"><span class='Ref_To_Local'>orgnum</span></a> <span class='Operator'>== </span><span class='String'>'-'</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{</span>                       <span class='Comment_Single_Line'>/* &LT; 0 */ 
</span>            <a href="formatting.c.html#LN5496"><span class='Ref_To_Local'>sign</span></a> <span class='Operator'>= </span><span class='String'>'-'</span><span class='Delimiter'>; 
</span>            <a href="formatting.c.html#LN5497"><span class='Ref_To_Local'>numstr</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN5498"><span class='Ref_To_Local'>orgnum</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <a href="formatting.c.html#LN5496"><span class='Ref_To_Local'>sign</span></a> <span class='Operator'>= </span><span class='String'>'+'</span><span class='Delimiter'>; 
</span>            <a href="formatting.c.html#LN5497"><span class='Ref_To_Local'>numstr</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN5498"><span class='Ref_To_Local'>orgnum</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="formatting.c.html#LN5499"><span class='Ref_To_Local'>p</span></a> <span class='Operator'>= </span>strchr<span class='Parentheses'>(</span><a href="formatting.c.html#LN5497"><span class='Ref_To_Local'>numstr</span></a><span class='Delimiter'>, </span><span class='String'>'.'</span><span class='Parentheses'>)))</span> 
            <a href="formatting.c.html#LN5535"><span class='Ref_To_Local'>numstr_pre_len</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN5499"><span class='Ref_To_Local'>p</span></a> <span class='Operator'>- </span><a href="formatting.c.html#LN5497"><span class='Ref_To_Local'>numstr</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="formatting.c.html#LN5535"><span class='Ref_To_Local'>numstr_pre_len</span></a> <span class='Operator'>= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN5497"><span class='Ref_To_Local'>numstr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* needs padding? */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN5535"><span class='Ref_To_Local'>numstr_pre_len</span></a> <span class='Operator'>&LT; </span><a href="formatting.c.html#LN5491"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN307"><span class='Ref_to_Member'>pre</span></a><span class='Parentheses'>) 
</span>            <a href="formatting.c.html#LN5495"><span class='Ref_To_Local'>out_pre_spaces</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN5491"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN307"><span class='Ref_to_Member'>pre</span></a> <span class='Operator'>- </span><a href="formatting.c.html#LN5535"><span class='Ref_To_Local'>numstr_pre_len</span></a><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* overflowed prefix digit format? */ 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN5535"><span class='Ref_To_Local'>numstr_pre_len</span></a> <span class='Operator'>&GT; </span><a href="formatting.c.html#LN5491"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN307"><span class='Ref_to_Member'>pre</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="formatting.c.html#LN5497"><span class='Ref_To_Local'>numstr</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN5491"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN307"><span class='Ref_to_Member'>pre</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN5491"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN308"><span class='Ref_to_Member'>post</span></a> <span class='Operator'>+ </span><span class='Number'>2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="formatting.c.html#LN982"><span class='Ref_to_Proto'>fill_str</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN5497"><span class='Ref_To_Local'>numstr</span></a><span class='Delimiter'>, </span><span class='String'>'#'</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN5491"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN307"><span class='Ref_to_Member'>pre</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN5491"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN308"><span class='Ref_to_Member'>post</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Operator'>*</span><span class='Parentheses'>(</span><a href="formatting.c.html#LN5497"><span class='Ref_To_Local'>numstr</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN5491"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN307"><span class='Ref_to_Member'>pre</span></a><span class='Parentheses'>) </span><span class='Operator'>= </span><span class='String'>'.'</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
 
    <a href="formatting.c.html#LN5074"><span class='Ref_to_Const'>NUM_TOCHAR_finish</span></a><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN329"><span class='Ref_to_Macro'>PG_RETURN_TEXT_P</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN5493"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end float4_to_char &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* ----------------- 
 * FLOAT8 to_char() 
 * ----------------- 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN5593"></a><span class='Declare_Function'>float8_to_char</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN5595"></a>    <a href="../../../include/c.h.html#LN380"><span class='Ref_to_Typedef'>float8</span></a>      <span class='Declare_Local'>value</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN245"><span class='Ref_to_Macro'>PG_GETARG_FLOAT8</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN5596"></a>    <a href="../../../../contrib/seg/segparse.y.html#LN46"><span class='Ref_to_Global_Var'>text</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>fmt</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN272"><span class='Ref_to_Macro'>PG_GETARG_TEXT_PP</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN5597"></a>    <a href="formatting.c.html#LN305"><span class='Ref_to_Typedef'>NUMDesc</span></a>     <span class='Declare_Local'>Num</span><span class='Delimiter'>; 
</span><a name="LN5598"></a>    <a href="formatting.c.html#LN164"><span class='Ref_to_Struct'>FormatNode</span></a> <span class='Operator'>*</span><span class='Declare_Local'>format</span><span class='Delimiter'>; 
</span><a name="LN5599"></a>    <a href="../../../../contrib/seg/segparse.y.html#LN46"><span class='Ref_to_Global_Var'>text</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span><a name="LN5600"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>shouldFree</span><span class='Delimiter'>; 
</span><a name="LN5601"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>out_pre_spaces</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>, 
</span><a name="LN5602"></a>                <span class='Declare_Local'>sign</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN5603"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>numstr</span><span class='Delimiter'>, 
</span><a name="LN5604"></a>               <span class='Operator'>*</span><span class='Declare_Local'>orgnum</span><span class='Delimiter'>, 
</span><a name="LN5605"></a>               <span class='Operator'>*</span><span class='Declare_Local'>p</span><span class='Delimiter'>; 
</span> 
    <a href="formatting.c.html#LN5061"><span class='Ref_to_Const'>NUM_TOCHAR_prepare</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN354"><span class='Ref_to_Macro'>IS_ROMAN</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN5597"><span class='Ref_To_Local'>Num</span></a><span class='Parentheses'>))</span> 
        <a href="formatting.c.html#LN5603"><span class='Ref_To_Local'>numstr</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN5604"><span class='Ref_To_Local'>orgnum</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN984"><span class='Ref_to_Proto'>int_to_roman</span></a><span class='Parentheses'>((</span><span class='Keyword'>int</span><span class='Parentheses'>) </span><a href="../../../port/rint.c.html#LN20"><span class='Ref_to_Func'>rint</span></a><span class='Parentheses'>(</span><span class='Keyword'>value</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN356"><span class='Ref_to_Macro'>IS_EEEE</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN5597"><span class='Ref_To_Local'>Num</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="formatting.c.html#LN5603"><span class='Ref_To_Local'>numstr</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN5604"><span class='Ref_To_Local'>orgnum</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="float.c.html#LN47"><span class='Ref_to_Const'>MAXDOUBLEWIDTH</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../interfaces/ecpg/test/expected/pgtypeslib-nan_test.c.html#LN30"><span class='Ref_to_Macro'>isnan</span></a><span class='Parentheses'>(</span><span class='Keyword'>value</span><span class='Parentheses'>) </span><span class='Operator'>|| </span><a href="../../../include/utils/builtins.h.html#LN59"><span class='Ref_to_Proto'>is_infinite</span></a><span class='Parentheses'>(</span><span class='Keyword'>value</span><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * Allow 6 characters for the leading sign, the decimal point, 
             * "e", the exponent's sign and two exponent digits. 
             */ 
</span>            <a href="formatting.c.html#LN5603"><span class='Ref_To_Local'>numstr</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN5597"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN307"><span class='Ref_to_Member'>pre</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN5597"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN308"><span class='Ref_to_Member'>post</span></a> <span class='Operator'>+ </span><span class='Number'>7</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="formatting.c.html#LN982"><span class='Ref_to_Proto'>fill_str</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN5603"><span class='Ref_To_Local'>numstr</span></a><span class='Delimiter'>, </span><span class='String'>'#'</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN5597"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN307"><span class='Ref_to_Member'>pre</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN5597"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN308"><span class='Ref_to_Member'>post</span></a> <span class='Operator'>+ </span><span class='Number'>6</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Operator'>*</span><a href="formatting.c.html#LN5603"><span class='Ref_To_Local'>numstr</span></a> <span class='Operator'>= </span><span class='String'>' '</span><span class='Delimiter'>; 
</span>            <span class='Operator'>*</span><span class='Parentheses'>(</span><a href="formatting.c.html#LN5603"><span class='Ref_To_Local'>numstr</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN5597"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN307"><span class='Ref_to_Member'>pre</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>) </span><span class='Operator'>= </span><span class='String'>'.'</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <a href="../../../pl/plperl/plperl.h.html#LN60"><span class='Ref_to_Macro'>snprintf</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN5604"><span class='Ref_To_Local'>orgnum</span></a><span class='Delimiter'>, </span><a href="float.c.html#LN47"><span class='Ref_to_Const'>MAXDOUBLEWIDTH</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='String'>"%+.*e"</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN5597"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN308"><span class='Ref_to_Member'>post</span></a><span class='Delimiter'>, </span><span class='Keyword'>value</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * Swap a leading positive sign for a space. 
             */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="formatting.c.html#LN5604"><span class='Ref_To_Local'>orgnum</span></a> <span class='Operator'>== </span><span class='String'>'+'</span><span class='Parentheses'>) 
</span>                <span class='Operator'>*</span><a href="formatting.c.html#LN5604"><span class='Ref_To_Local'>orgnum</span></a> <span class='Operator'>= </span><span class='String'>' '</span><span class='Delimiter'>; 
</span> 
            <a href="formatting.c.html#LN5603"><span class='Ref_To_Local'>numstr</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN5604"><span class='Ref_To_Local'>orgnum</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if IS_EEEE(&Num) &raquo; </span> 
    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span><a name="LN5640"></a>        <a href="../../../include/c.h.html#LN380"><span class='Ref_to_Typedef'>float8</span></a>      <span class='Declare_Local'>val</span> <span class='Operator'>= </span><span class='Keyword'>value</span><span class='Delimiter'>; 
</span><a name="LN5641"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>numstr_pre_len</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN355"><span class='Ref_to_Macro'>IS_MULTI</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="formatting.c.html#LN5597"><span class='Ref_To_Local'>Num</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span><a name="LN5645"></a>            <span class='Keyword'>double</span>      <span class='Declare_Local'>multi</span> <span class='Operator'>= </span>pow<span class='Parentheses'>((</span><span class='Keyword'>double</span><span class='Parentheses'>) </span><span class='Number'>10</span><span class='Delimiter'>, </span><span class='Parentheses'>(</span><span class='Keyword'>double</span><span class='Parentheses'>) </span><a href="formatting.c.html#LN5597"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN312"><span class='Ref_to_Member'>multi</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <a href="formatting.c.html#LN5640"><span class='Ref_To_Local'>val</span></a> <span class='Operator'>= </span><span class='Keyword'>value </span><span class='Operator'>* </span><a href="formatting.c.html#LN5645"><span class='Ref_To_Local'>multi</span></a><span class='Delimiter'>; 
</span>            <a href="formatting.c.html#LN5597"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN307"><span class='Ref_to_Member'>pre</span></a> <span class='Operator'>+= </span><a href="formatting.c.html#LN5597"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN312"><span class='Ref_to_Member'>multi</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <a href="formatting.c.html#LN5604"><span class='Ref_To_Local'>orgnum</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="float.c.html#LN47"><span class='Ref_to_Const'>MAXDOUBLEWIDTH</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="formatting.c.html#LN5641"><span class='Ref_To_Local'>numstr_pre_len</span></a> <span class='Operator'>= </span><a href="../../../pl/plperl/plperl.h.html#LN60"><span class='Ref_to_Macro'>snprintf</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN5604"><span class='Ref_To_Local'>orgnum</span></a><span class='Delimiter'>, </span><a href="float.c.html#LN47"><span class='Ref_to_Const'>MAXDOUBLEWIDTH</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='String'>"%.0f"</span><span class='Delimiter'>, </span>fabs<span class='Parentheses'>(</span><a href="formatting.c.html#LN5640"><span class='Ref_To_Local'>val</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* adjust post digits to fit max double digits */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN5641"><span class='Ref_To_Local'>numstr_pre_len</span></a> <span class='Operator'>&GT;= </span>DBL_DIG<span class='Parentheses'>) 
</span>            <a href="formatting.c.html#LN5597"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN308"><span class='Ref_to_Member'>post</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN5641"><span class='Ref_To_Local'>numstr_pre_len</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN5597"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN308"><span class='Ref_to_Member'>post</span></a> <span class='Operator'>&GT; </span>DBL_DIG<span class='Parentheses'>) 
</span>            <a href="formatting.c.html#LN5597"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN308"><span class='Ref_to_Member'>post</span></a> <span class='Operator'>= </span>DBL_DIG <span class='Operator'>- </span><a href="formatting.c.html#LN5641"><span class='Ref_To_Local'>numstr_pre_len</span></a><span class='Delimiter'>; 
</span>        <a href="../../../pl/plperl/plperl.h.html#LN60"><span class='Ref_to_Macro'>snprintf</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN5604"><span class='Ref_To_Local'>orgnum</span></a><span class='Delimiter'>, </span><a href="float.c.html#LN47"><span class='Ref_to_Const'>MAXDOUBLEWIDTH</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='String'>"%.*f"</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN5597"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN308"><span class='Ref_to_Member'>post</span></a><span class='Delimiter'>, </span><a href="formatting.c.html#LN5640"><span class='Ref_To_Local'>val</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="formatting.c.html#LN5604"><span class='Ref_To_Local'>orgnum</span></a> <span class='Operator'>== </span><span class='String'>'-'</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{</span>                       <span class='Comment_Single_Line'>/* &LT; 0 */ 
</span>            <a href="formatting.c.html#LN5602"><span class='Ref_To_Local'>sign</span></a> <span class='Operator'>= </span><span class='String'>'-'</span><span class='Delimiter'>; 
</span>            <a href="formatting.c.html#LN5603"><span class='Ref_To_Local'>numstr</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN5604"><span class='Ref_To_Local'>orgnum</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <a href="formatting.c.html#LN5602"><span class='Ref_To_Local'>sign</span></a> <span class='Operator'>= </span><span class='String'>'+'</span><span class='Delimiter'>; 
</span>            <a href="formatting.c.html#LN5603"><span class='Ref_To_Local'>numstr</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN5604"><span class='Ref_To_Local'>orgnum</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="formatting.c.html#LN5605"><span class='Ref_To_Local'>p</span></a> <span class='Operator'>= </span>strchr<span class='Parentheses'>(</span><a href="formatting.c.html#LN5603"><span class='Ref_To_Local'>numstr</span></a><span class='Delimiter'>, </span><span class='String'>'.'</span><span class='Parentheses'>)))</span> 
            <a href="formatting.c.html#LN5641"><span class='Ref_To_Local'>numstr_pre_len</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN5605"><span class='Ref_To_Local'>p</span></a> <span class='Operator'>- </span><a href="formatting.c.html#LN5603"><span class='Ref_To_Local'>numstr</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="formatting.c.html#LN5641"><span class='Ref_To_Local'>numstr_pre_len</span></a> <span class='Operator'>= </span>strlen<span class='Parentheses'>(</span><a href="formatting.c.html#LN5603"><span class='Ref_To_Local'>numstr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* needs padding? */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN5641"><span class='Ref_To_Local'>numstr_pre_len</span></a> <span class='Operator'>&LT; </span><a href="formatting.c.html#LN5597"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN307"><span class='Ref_to_Member'>pre</span></a><span class='Parentheses'>) 
</span>            <a href="formatting.c.html#LN5601"><span class='Ref_To_Local'>out_pre_spaces</span></a> <span class='Operator'>= </span><a href="formatting.c.html#LN5597"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN307"><span class='Ref_to_Member'>pre</span></a> <span class='Operator'>- </span><a href="formatting.c.html#LN5641"><span class='Ref_To_Local'>numstr_pre_len</span></a><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* overflowed prefix digit format? */ 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="formatting.c.html#LN5641"><span class='Ref_To_Local'>numstr_pre_len</span></a> <span class='Operator'>&GT; </span><a href="formatting.c.html#LN5597"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN307"><span class='Ref_to_Member'>pre</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="formatting.c.html#LN5603"><span class='Ref_To_Local'>numstr</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN5597"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN307"><span class='Ref_to_Member'>pre</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN5597"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN308"><span class='Ref_to_Member'>post</span></a> <span class='Operator'>+ </span><span class='Number'>2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="formatting.c.html#LN982"><span class='Ref_to_Proto'>fill_str</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN5603"><span class='Ref_To_Local'>numstr</span></a><span class='Delimiter'>, </span><span class='String'>'#'</span><span class='Delimiter'>, </span><a href="formatting.c.html#LN5597"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN307"><span class='Ref_to_Member'>pre</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN5597"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN308"><span class='Ref_to_Member'>post</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Operator'>*</span><span class='Parentheses'>(</span><a href="formatting.c.html#LN5603"><span class='Ref_To_Local'>numstr</span></a> <span class='Operator'>+ </span><a href="formatting.c.html#LN5597"><span class='Ref_To_Local'>Num</span></a><span class='Operator'>.</span><a href="formatting.c.html#LN307"><span class='Ref_to_Member'>pre</span></a><span class='Parentheses'>) </span><span class='Operator'>= </span><span class='String'>'.'</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
 
    <a href="formatting.c.html#LN5074"><span class='Ref_to_Const'>NUM_TOCHAR_finish</span></a><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN329"><span class='Ref_to_Macro'>PG_RETURN_TEXT_P</span></a><span class='Parentheses'>(</span><a href="formatting.c.html#LN5599"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end float8_to_char &raquo; </span> 
</pre>
<table bgcolor='#c0c0c0' width='100%'><tr><td><a href='../../../../Contents.html'>Contents</a></td></tr>
</table><hr><p class='blurb' align='center'><a href='http://www.sourceinsight.com'>HTML Created by Source Insight Version 4.00.0084 Built on 2017-02-26</a></p>
</body></html>