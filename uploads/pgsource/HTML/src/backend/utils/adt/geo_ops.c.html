<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta name="generator" content="Source Insight Version 4.00.0084 Built on 2017-02-26">
<meta charset='UTF-8' />
<style type='text/css'><!--
TD {background-color: #C0C0C0; font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.blurb {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.filename {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 120%; font-weight: bold; }
.dirname {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 100%; font-weight: bold; margin-top: 2.5em;}
--></style>
<title>src\backend\utils\adt\geo_ops.c</title>
<LINK REL=StyleSheet HREF="../../../../C_Cpp_Source_File.css" TYPE='text/css' MEDIA=screen>
</head>
<body bgcolor=#ffffff>
<table bgcolor='#c0c0c0' width='100%'>
<tr><td><p class='filename'><b>src\backend\utils\adt\geo_ops.c</b></p></td>
<td align='right'>
Wed Jun 14 08:25:51 2017
</td></tr>
<tr><td><a href='../../../../Contents.html'>Contents</a></td></tr>
</table>
<pre>
</span><span class='Comment_Multi_Line'>/*------------------------------------------------------------------------- 
 * 
 * geo_ops.c 
 *    2D geometric operations 
 * 
 * Portions Copyright (c) 1996-2017, PostgreSQL Global Development Group 
 * Portions Copyright (c) 1994, Regents of the University of California 
 * 
 * 
 * IDENTIFICATION 
 *    src/backend/utils/adt/geo_ops.c 
 * 
 *------------------------------------------------------------------------- 
 */ 
</span><span class='Keyword'>#include </span><span class='String'>"postgres.h"</span> 
 
<span class='Keyword'>#include </span><span class='String'>&LT;math.h&GT;</span> 
<span class='Keyword'>#include </span><span class='String'>&LT;limits.h&GT;</span> 
<span class='Keyword'>#include </span><span class='String'>&LT;float.h&GT;</span> 
<span class='Keyword'>#include </span><span class='String'>&LT;ctype.h&GT;</span> 
 
<span class='Keyword'>#include </span><span class='String'>"libpq/pqformat.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"miscadmin.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/builtins.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/geo_decls.h"</span> 
 
<span class='Directive'>#ifndef</span> <a href="../../../../contrib/earthdistance/earthdistance.c.html#LN9"><span class='Ref_to_Const'>M_PI</span></a> 
<a name="LN27"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>M_PI</span> <span class='Number'>3</span><span class='Operator'>.</span><span class='Number'>14159265358979323846</span> 
<span class='Directive'>#endif</span> 
 
 
<span class='Comment_Multi_Line'>/* 
 * Internal routines 
 */ 
</span> 
<a name="LN35"></a><span class='Control'>enum</span> <span class='Declare_Enum'>path_delim</span> 
<span class='Delimiter'>{ 
</span><a name="LN37"></a>    <span class='Declare_Enum_Const'>PATH_NONE</span><span class='Delimiter'>, </span><span class='Declare_Enum_Const'>PATH_OPEN</span><span class='Delimiter'>, </span><span class='Declare_Enum_Const'>PATH_CLOSED</span> 
<span class='Delimiter'>}; 
</span> 
<a name="LN40"></a><span class='Keyword'>static int</span>  <span class='Declare_Prototype'>point_inside</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>p</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>npts</span><span class='Delimiter'>, </span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>plist</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN41"></a><span class='Keyword'>static int</span>  <span class='Declare_Prototype'>lseg_crossing</span><span class='Parentheses'>(</span><span class='Keyword'>double </span><span class='Declare_Parameter'>x</span><span class='Delimiter'>, </span><span class='Keyword'>double </span><span class='Declare_Parameter'>y</span><span class='Delimiter'>, </span><span class='Keyword'>double </span><span class='Declare_Parameter'>px</span><span class='Delimiter'>, </span><span class='Keyword'>double </span><span class='Declare_Parameter'>py</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN42"></a><span class='Keyword'>static </span><a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a> <span class='Operator'>*</span><span class='Declare_Prototype'>box_construct</span><span class='Parentheses'>(</span><span class='Keyword'>double </span><span class='Declare_Parameter'>x1</span><span class='Delimiter'>, </span><span class='Keyword'>double </span><span class='Declare_Parameter'>x2</span><span class='Delimiter'>, </span><span class='Keyword'>double </span><span class='Declare_Parameter'>y1</span><span class='Delimiter'>, </span><span class='Keyword'>double </span><span class='Declare_Parameter'>y2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN43"></a><span class='Keyword'>static </span><a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a> <span class='Operator'>*</span><span class='Declare_Prototype'>box_copy</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>box</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN44"></a><span class='Keyword'>static </span><a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a> <span class='Operator'>*</span><span class='Declare_Prototype'>box_fill</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>result</span><span class='Delimiter'>, </span><span class='Keyword'>double </span><span class='Declare_Parameter'>x1</span><span class='Delimiter'>, </span><span class='Keyword'>double </span><span class='Declare_Parameter'>x2</span><span class='Delimiter'>, </span><span class='Keyword'>double </span><span class='Declare_Parameter'>y1</span><span class='Delimiter'>, </span><span class='Keyword'>double </span><span class='Declare_Parameter'>y2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN45"></a><span class='Keyword'>static bool </span><span class='Declare_Prototype'>box_ov</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>box1</span><span class='Delimiter'>, </span><a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>box2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN46"></a><span class='Keyword'>static double </span><span class='Declare_Prototype'>box_ht</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>box</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN47"></a><span class='Keyword'>static double </span><span class='Declare_Prototype'>box_wd</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>box</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN48"></a><span class='Keyword'>static double </span><span class='Declare_Prototype'>circle_ar</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>circle</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN49"></a><span class='Keyword'>static </span><a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a> <span class='Operator'>*</span><span class='Declare_Prototype'>circle_copy</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>circle</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN50"></a><span class='Keyword'>static </span><a href="../../../include/utils/geo_decls.h.html#LN89"><span class='Ref_to_Typedef'>LINE</span></a> <span class='Operator'>*</span><span class='Declare_Prototype'>line_construct_pm</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pt</span><span class='Delimiter'>, </span><span class='Keyword'>double </span><span class='Declare_Parameter'>m</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN51"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>line_construct_pts</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN89"><span class='Ref_to_Typedef'>LINE</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>line</span><span class='Delimiter'>, </span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pt1</span><span class='Delimiter'>, </span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pt2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN52"></a><span class='Keyword'>static bool </span><span class='Declare_Prototype'>lseg_intersect_internal</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>l1</span><span class='Delimiter'>, </span><a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>l2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN53"></a><span class='Keyword'>static double </span><span class='Declare_Prototype'>lseg_dt</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>l1</span><span class='Delimiter'>, </span><a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>l2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN54"></a><span class='Keyword'>static bool </span><span class='Declare_Prototype'>on_ps_internal</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pt</span><span class='Delimiter'>, </span><a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>lseg</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN55"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>make_bound_box</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN112"><span class='Ref_to_Typedef'>POLYGON</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>poly</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN56"></a><span class='Keyword'>static bool </span><span class='Declare_Prototype'>plist_same</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>npts</span><span class='Delimiter'>, </span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>p1</span><span class='Delimiter'>, </span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>p2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN57"></a><span class='Keyword'>static </span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Declare_Prototype'>point_construct</span><span class='Parentheses'>(</span><span class='Keyword'>double </span><span class='Declare_Parameter'>x</span><span class='Delimiter'>, </span><span class='Keyword'>double </span><span class='Declare_Parameter'>y</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN58"></a><span class='Keyword'>static </span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Declare_Prototype'>point_copy</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pt</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN59"></a><span class='Keyword'>static double </span><span class='Declare_Prototype'>single_decode</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>num</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>**</span><span class='Declare_Parameter'>endptr_p</span><span class='Delimiter'>, 
</span><a name="LN60"></a>              <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>type_name</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>orig_string</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN61"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>single_encode</span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN380"><span class='Ref_to_Typedef'>float8</span></a> <span class='Declare_Parameter'>x</span><span class='Delimiter'>, </span><a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a> <span class='Declare_Parameter'>str</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN62"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>pair_decode</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>str</span><span class='Delimiter'>, </span><span class='Keyword'>double </span><span class='Operator'>*</span><span class='Declare_Parameter'>x</span><span class='Delimiter'>, </span><span class='Keyword'>double </span><span class='Operator'>*</span><span class='Declare_Parameter'>y</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>**</span><span class='Declare_Parameter'>endptr_p</span><span class='Delimiter'>, 
</span><a name="LN63"></a>            <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>type_name</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>orig_string</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN64"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>pair_encode</span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN380"><span class='Ref_to_Typedef'>float8</span></a> <span class='Declare_Parameter'>x</span><span class='Delimiter'>, </span><a href="../../../include/c.h.html#LN380"><span class='Ref_to_Typedef'>float8</span></a> <span class='Declare_Parameter'>y</span><span class='Delimiter'>, </span><a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a> <span class='Declare_Parameter'>str</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN65"></a><span class='Keyword'>static int</span>  <span class='Declare_Prototype'>pair_count</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>s</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Declare_Parameter'>delim</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN66"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>path_decode</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>str</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>opentype</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>npts</span><span class='Delimiter'>, </span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>p</span><span class='Delimiter'>, 
</span><a name="LN67"></a>            <span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Declare_Parameter'>isopen</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>**</span><span class='Declare_Parameter'>endptr_p</span><span class='Delimiter'>, 
</span><a name="LN68"></a>            <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>type_name</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>orig_string</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN69"></a><span class='Keyword'>static char </span><span class='Operator'>*</span><span class='Declare_Prototype'>path_encode</span><span class='Parentheses'>(</span><span class='Control'>enum</span> <a href="geo_ops.c.html#LN69"><span class='Ref_to_Parameter'>path_delim</span></a> <span class='Declare_Parameter'>path_delim</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>npts</span><span class='Delimiter'>, </span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pt</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN70"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>statlseg_construct</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>lseg</span><span class='Delimiter'>, </span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pt1</span><span class='Delimiter'>, </span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pt2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN71"></a><span class='Keyword'>static double </span><span class='Declare_Prototype'>box_ar</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>box</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN72"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>box_cn</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>center</span><span class='Delimiter'>, </span><a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>box</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN73"></a><span class='Keyword'>static </span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Declare_Prototype'>interpt_sl</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>lseg</span><span class='Delimiter'>, </span><a href="../../../include/utils/geo_decls.h.html#LN89"><span class='Ref_to_Typedef'>LINE</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>line</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN74"></a><span class='Keyword'>static bool </span><span class='Declare_Prototype'>has_interpt_sl</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>lseg</span><span class='Delimiter'>, </span><a href="../../../include/utils/geo_decls.h.html#LN89"><span class='Ref_to_Typedef'>LINE</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>line</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN75"></a><span class='Keyword'>static double </span><span class='Declare_Prototype'>dist_pl_internal</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pt</span><span class='Delimiter'>, </span><a href="../../../include/utils/geo_decls.h.html#LN89"><span class='Ref_to_Typedef'>LINE</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>line</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN76"></a><span class='Keyword'>static double </span><span class='Declare_Prototype'>dist_ps_internal</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pt</span><span class='Delimiter'>, </span><a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>lseg</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN77"></a><span class='Keyword'>static </span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Declare_Prototype'>line_interpt_internal</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN89"><span class='Ref_to_Typedef'>LINE</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>l1</span><span class='Delimiter'>, </span><a href="../../../include/utils/geo_decls.h.html#LN89"><span class='Ref_to_Typedef'>LINE</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>l2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN78"></a><span class='Keyword'>static bool </span><span class='Declare_Prototype'>lseg_inside_poly</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>a</span><span class='Delimiter'>, </span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>b</span><span class='Delimiter'>, </span><a href="../../../include/utils/geo_decls.h.html#LN112"><span class='Ref_to_Typedef'>POLYGON</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>poly</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>start</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN79"></a><span class='Keyword'>static </span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Declare_Prototype'>lseg_interpt_internal</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>l1</span><span class='Delimiter'>, </span><a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>l2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN80"></a><span class='Keyword'>static double </span><span class='Declare_Prototype'>dist_ppoly_internal</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pt</span><span class='Delimiter'>, </span><a href="../../../include/utils/geo_decls.h.html#LN112"><span class='Ref_to_Typedef'>POLYGON</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>poly</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
 
<span class='Comment_Multi_Line'>/* 
 * Delimiters for input and output strings. 
 * LDELIM, RDELIM, and DELIM are left, right, and separator delimiters, respectively. 
 * LDELIM_EP, RDELIM_EP are left and right delimiters for paths with endpoints. 
 */ 
</span> 
<a name="LN89"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>LDELIM</span>          <span class='String'>'('</span> 
<a name="LN90"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>RDELIM</span>          <span class='String'>')'</span> 
<a name="LN91"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>DELIM</span>           <span class='String'>','</span> 
<a name="LN92"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>LDELIM_EP</span>       <span class='String'>'['</span> 
<a name="LN93"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>RDELIM_EP</span>       <span class='String'>']'</span> 
<a name="LN94"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>LDELIM_C</span>        <span class='String'>'&LT;'</span> 
<a name="LN95"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>RDELIM_C</span>        <span class='String'>'&GT;'</span> 
 
 
<span class='Comment_Multi_Line'>/* 
 * Geometric data types are composed of points. 
 * This code tries to support a common format throughout the data types, 
 *  to allow for more predictable usage and data type conversion. 
 * The fundamental unit is the point. Other units are line segments, 
 *  open paths, boxes, closed paths, and polygons (which should be considered 
 *  non-intersecting closed paths). 
 * 
 * Data representation is as follows: 
 *  point:              (x,y) 
 *  line segment:       [(x1,y1),(x2,y2)] 
 *  box:                (x1,y1),(x2,y2) 
 *  open path:          [(x1,y1),...,(xn,yn)] 
 *  closed path:        ((x1,y1),...,(xn,yn)) 
 *  polygon:            ((x1,y1),...,(xn,yn)) 
 * 
 * For boxes, the points are opposite corners with the first point at the top right. 
 * For closed paths and polygons, the points should be reordered to allow 
 *  fast and correct equality comparisons. 
 * 
 * XXX perhaps points in complex shapes should be reordered internally 
 *  to allow faster internal operations, but should keep track of input order 
 *  and restore that order for text output - tgl 97/01/16 
 */ 
</span> 
<span class='Keyword'>static double 
</span><a name="LN124"></a><span class='Declare_Function'>single_decode</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>num</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>**</span><span class='Declare_Parameter'>endptr_p</span><span class='Delimiter'>, 
</span><a name="LN125"></a>              <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>type_name</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>orig_string</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> <a href="../../../include/utils/builtins.h.html#LN60"><span class='Ref_to_Proto'>float8in_internal</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN124"><span class='Ref_to_Parameter'>num</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN124"><span class='Ref_to_Parameter'>endptr_p</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN125"><span class='Ref_to_Parameter'>type_name</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN125"><span class='Ref_to_Parameter'>orig_string</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span>   <span class='Comment_Single_Line'>/* single_decode() */ 
</span> 
<span class='Keyword'>static void 
</span><a name="LN131"></a><span class='Declare_Function'>single_encode</span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN380"><span class='Ref_to_Typedef'>float8</span></a> <span class='Declare_Parameter'>x</span><span class='Delimiter'>, </span><a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a> <span class='Declare_Parameter'>str</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN133"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>xstr</span> <span class='Operator'>= </span><a href="../../../include/utils/builtins.h.html#LN62"><span class='Ref_to_Proto'>float8out_internal</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN131"><span class='Ref_to_Parameter'>x</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN131"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN133"><span class='Ref_To_Local'>xstr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN133"><span class='Ref_To_Local'>xstr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span>   <span class='Comment_Single_Line'>/* single_encode() */ 
</span> 
<span class='Keyword'>static void 
</span><a name="LN140"></a><span class='Declare_Function'>pair_decode</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>str</span><span class='Delimiter'>, </span><span class='Keyword'>double </span><span class='Operator'>*</span><span class='Declare_Parameter'>x</span><span class='Delimiter'>, </span><span class='Keyword'>double </span><span class='Operator'>*</span><span class='Declare_Parameter'>y</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>**</span><span class='Declare_Parameter'>endptr_p</span><span class='Delimiter'>, 
</span><a name="LN141"></a>            <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>type_name</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>orig_string</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN143"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>has_delim</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>while</span> <span class='Parentheses'>(</span>isspace<span class='Parentheses'>((</span><span class='Keyword'>unsigned char</span><span class='Parentheses'>) </span><span class='Operator'>*</span><a href="geo_ops.c.html#LN140"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>))</span> 
        <a href="geo_ops.c.html#LN140"><span class='Ref_to_Parameter'>str</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="geo_ops.c.html#LN143"><span class='Ref_To_Local'>has_delim</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="geo_ops.c.html#LN140"><span class='Ref_to_Parameter'>str</span></a> <span class='Operator'>== </span><a href="../../../test/regress/regress.c.html#LN41"><span class='Ref_to_Const'>LDELIM</span></a><span class='Parentheses'>)))</span> 
        <a href="geo_ops.c.html#LN140"><span class='Ref_to_Parameter'>str</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span> 
    <span class='Operator'>*</span><a href="geo_ops.c.html#LN140"><span class='Ref_to_Parameter'>x</span></a> <span class='Operator'>= </span><a href="../../../include/utils/builtins.h.html#LN60"><span class='Ref_to_Proto'>float8in_internal</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN140"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN140"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN141"><span class='Ref_to_Parameter'>type_name</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN141"><span class='Ref_to_Parameter'>orig_string</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="geo_ops.c.html#LN140"><span class='Ref_to_Parameter'>str</span></a><span class='Operator'>++ != </span><a href="../../../test/regress/regress.c.html#LN43"><span class='Ref_to_Const'>DELIM</span></a><span class='Parentheses'>) 
</span>        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INVALID_TEXT_REPRESENTATION<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"invalid input syntax for type %s: \"%s\""</span><span class='Delimiter'>, 
</span>                        <a href="geo_ops.c.html#LN141"><span class='Ref_to_Parameter'>type_name</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN141"><span class='Ref_to_Parameter'>orig_string</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <span class='Operator'>*</span><a href="geo_ops.c.html#LN140"><span class='Ref_to_Parameter'>y</span></a> <span class='Operator'>= </span><a href="../../../include/utils/builtins.h.html#LN60"><span class='Ref_to_Proto'>float8in_internal</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN140"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN140"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN141"><span class='Ref_to_Parameter'>type_name</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN141"><span class='Ref_to_Parameter'>orig_string</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN143"><span class='Ref_To_Local'>has_delim</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="geo_ops.c.html#LN140"><span class='Ref_to_Parameter'>str</span></a><span class='Operator'>++ != </span><a href="../../../test/regress/regress.c.html#LN42"><span class='Ref_to_Const'>RDELIM</span></a><span class='Parentheses'>) 
</span>            <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INVALID_TEXT_REPRESENTATION<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"invalid input syntax for type %s: \"%s\""</span><span class='Delimiter'>, 
</span>                            <a href="geo_ops.c.html#LN141"><span class='Ref_to_Parameter'>type_name</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN141"><span class='Ref_to_Parameter'>orig_string</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        <span class='Control'>while</span> <span class='Parentheses'>(</span>isspace<span class='Parentheses'>((</span><span class='Keyword'>unsigned char</span><span class='Parentheses'>) </span><span class='Operator'>*</span><a href="geo_ops.c.html#LN140"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>))</span> 
            <a href="geo_ops.c.html#LN140"><span class='Ref_to_Parameter'>str</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* report stopping point if wanted, else complain if not end of string */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN140"><span class='Ref_to_Parameter'>endptr_p</span></a><span class='Parentheses'>) 
</span>        <span class='Operator'>*</span><a href="geo_ops.c.html#LN140"><span class='Ref_to_Parameter'>endptr_p</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN140"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="geo_ops.c.html#LN140"><span class='Ref_to_Parameter'>str</span></a> <span class='Operator'>!= </span><span class='String'>'\0'</span><span class='Parentheses'>) 
</span>        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INVALID_TEXT_REPRESENTATION<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"invalid input syntax for type %s: \"%s\""</span><span class='Delimiter'>, 
</span>                        <a href="geo_ops.c.html#LN141"><span class='Ref_to_Parameter'>type_name</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN141"><span class='Ref_to_Parameter'>orig_string</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end pair_decode &raquo; </span> 
 
<span class='Keyword'>static void 
</span><a name="LN182"></a><span class='Declare_Function'>pair_encode</span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN380"><span class='Ref_to_Typedef'>float8</span></a> <span class='Declare_Parameter'>x</span><span class='Delimiter'>, </span><a href="../../../include/c.h.html#LN380"><span class='Ref_to_Typedef'>float8</span></a> <span class='Declare_Parameter'>y</span><span class='Delimiter'>, </span><a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a> <span class='Declare_Parameter'>str</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN184"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>xstr</span> <span class='Operator'>= </span><a href="../../../include/utils/builtins.h.html#LN62"><span class='Ref_to_Proto'>float8out_internal</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN182"><span class='Ref_to_Parameter'>x</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN185"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>ystr</span> <span class='Operator'>= </span><a href="../../../include/utils/builtins.h.html#LN62"><span class='Ref_to_Proto'>float8out_internal</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN182"><span class='Ref_to_Parameter'>y</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN182"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>, </span><span class='String'>"%s,%s"</span><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN184"><span class='Ref_To_Local'>xstr</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN185"><span class='Ref_To_Local'>ystr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN184"><span class='Ref_To_Local'>xstr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN185"><span class='Ref_To_Local'>ystr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>static void 
</span><a name="LN193"></a><span class='Declare_Function'>path_decode</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>str</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>opentype</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>npts</span><span class='Delimiter'>, </span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>p</span><span class='Delimiter'>, 
</span><a name="LN194"></a>            <span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Declare_Parameter'>isopen</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>**</span><span class='Declare_Parameter'>endptr_p</span><span class='Delimiter'>, 
</span><a name="LN195"></a>            <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>type_name</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>orig_string</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN197"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>depth</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN198"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>cp</span><span class='Delimiter'>; 
</span><a name="LN199"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>while</span> <span class='Parentheses'>(</span>isspace<span class='Parentheses'>((</span><span class='Keyword'>unsigned char</span><span class='Parentheses'>) </span><span class='Operator'>*</span><a href="geo_ops.c.html#LN193"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>))</span> 
        <a href="geo_ops.c.html#LN193"><span class='Ref_to_Parameter'>str</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>((</span><span class='Operator'>*</span><a href="geo_ops.c.html#LN194"><span class='Ref_to_Parameter'>isopen</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="geo_ops.c.html#LN193"><span class='Ref_to_Parameter'>str</span></a> <span class='Operator'>== </span><a href="geo_ops.c.html#LN92"><span class='Ref_to_Const'>LDELIM_EP</span></a><span class='Parentheses'>)))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* no open delimiter allowed? */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="geo_ops.c.html#LN193"><span class='Ref_to_Parameter'>opentype</span></a><span class='Parentheses'>) 
</span>            <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INVALID_TEXT_REPRESENTATION<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"invalid input syntax for type %s: \"%s\""</span><span class='Delimiter'>, 
</span>                            <a href="geo_ops.c.html#LN195"><span class='Ref_to_Parameter'>type_name</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN195"><span class='Ref_to_Parameter'>orig_string</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN197"><span class='Ref_To_Local'>depth</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN193"><span class='Ref_to_Parameter'>str</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="geo_ops.c.html#LN193"><span class='Ref_to_Parameter'>str</span></a> <span class='Operator'>== </span><a href="../../../test/regress/regress.c.html#LN41"><span class='Ref_to_Const'>LDELIM</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="geo_ops.c.html#LN198"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN193"><span class='Ref_to_Parameter'>str</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>while</span> <span class='Parentheses'>(</span>isspace<span class='Parentheses'>((</span><span class='Keyword'>unsigned char</span><span class='Parentheses'>) </span><span class='Operator'>*</span><a href="geo_ops.c.html#LN198"><span class='Ref_To_Local'>cp</span></a><span class='Parentheses'>))</span> 
            <a href="geo_ops.c.html#LN198"><span class='Ref_To_Local'>cp</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="geo_ops.c.html#LN198"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>== </span><a href="../../../test/regress/regress.c.html#LN41"><span class='Ref_to_Const'>LDELIM</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="geo_ops.c.html#LN197"><span class='Ref_To_Local'>depth</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>            <a href="geo_ops.c.html#LN193"><span class='Ref_to_Parameter'>str</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN198"><span class='Ref_To_Local'>cp</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span>strrchr<span class='Parentheses'>(</span><a href="geo_ops.c.html#LN193"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>, </span><a href="../../../test/regress/regress.c.html#LN41"><span class='Ref_to_Const'>LDELIM</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><a href="geo_ops.c.html#LN193"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <a href="geo_ops.c.html#LN197"><span class='Ref_To_Local'>depth</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>            <a href="geo_ops.c.html#LN193"><span class='Ref_to_Parameter'>str</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN198"><span class='Ref_To_Local'>cp</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN199"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN199"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN193"><span class='Ref_to_Parameter'>npts</span></a><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN199"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="geo_ops.c.html#LN62"><span class='Ref_to_Proto'>pair_decode</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN193"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN193"><span class='Ref_to_Parameter'>p</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN193"><span class='Ref_to_Parameter'>p</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN193"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN195"><span class='Ref_to_Parameter'>type_name</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN195"><span class='Ref_to_Parameter'>orig_string</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="geo_ops.c.html#LN193"><span class='Ref_to_Parameter'>str</span></a> <span class='Operator'>== </span><a href="../../../test/regress/regress.c.html#LN43"><span class='Ref_to_Const'>DELIM</span></a><span class='Parentheses'>) 
</span>            <a href="geo_ops.c.html#LN193"><span class='Ref_to_Parameter'>str</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN193"><span class='Ref_to_Parameter'>p</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>while</span> <span class='Parentheses'>(</span>isspace<span class='Parentheses'>((</span><span class='Keyword'>unsigned char</span><span class='Parentheses'>) </span><span class='Operator'>*</span><a href="geo_ops.c.html#LN193"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>))</span> 
        <a href="geo_ops.c.html#LN193"><span class='Ref_to_Parameter'>str</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN197"><span class='Ref_To_Local'>depth</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>((</span><span class='Operator'>*</span><a href="geo_ops.c.html#LN193"><span class='Ref_to_Parameter'>str</span></a> <span class='Operator'>== </span><a href="../../../test/regress/regress.c.html#LN42"><span class='Ref_to_Const'>RDELIM</span></a><span class='Parentheses'>)</span> 
            <span class='Operator'>|| </span><span class='Parentheses'>((</span><span class='Operator'>*</span><a href="geo_ops.c.html#LN193"><span class='Ref_to_Parameter'>str</span></a> <span class='Operator'>== </span><a href="geo_ops.c.html#LN93"><span class='Ref_to_Const'>RDELIM_EP</span></a><span class='Parentheses'>) </span><span class='Operator'>&& </span><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="geo_ops.c.html#LN194"><span class='Ref_to_Parameter'>isopen</span></a><span class='Parentheses'>) </span><span class='Operator'>&& </span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN197"><span class='Ref_To_Local'>depth</span></a> <span class='Operator'>== </span><span class='Number'>1</span><span class='Parentheses'>)))</span> 
        <span class='Delimiter'>{ 
</span>            <a href="geo_ops.c.html#LN197"><span class='Ref_To_Local'>depth</span></a><span class='Operator'>--</span><span class='Delimiter'>; 
</span>            <a href="geo_ops.c.html#LN193"><span class='Ref_to_Parameter'>str</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>            <span class='Control'>while</span> <span class='Parentheses'>(</span>isspace<span class='Parentheses'>((</span><span class='Keyword'>unsigned char</span><span class='Parentheses'>) </span><span class='Operator'>*</span><a href="geo_ops.c.html#LN193"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>))</span> 
                <a href="geo_ops.c.html#LN193"><span class='Ref_to_Parameter'>str</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
            <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INVALID_TEXT_REPRESENTATION<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"invalid input syntax for type %s: \"%s\""</span><span class='Delimiter'>, 
</span>                            <a href="geo_ops.c.html#LN195"><span class='Ref_to_Parameter'>type_name</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN195"><span class='Ref_to_Parameter'>orig_string</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* report stopping point if wanted, else complain if not end of string */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN194"><span class='Ref_to_Parameter'>endptr_p</span></a><span class='Parentheses'>) 
</span>        <span class='Operator'>*</span><a href="geo_ops.c.html#LN194"><span class='Ref_to_Parameter'>endptr_p</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN193"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="geo_ops.c.html#LN193"><span class='Ref_to_Parameter'>str</span></a> <span class='Operator'>!= </span><span class='String'>'\0'</span><span class='Parentheses'>) 
</span>        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INVALID_TEXT_REPRESENTATION<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"invalid input syntax for type %s: \"%s\""</span><span class='Delimiter'>, 
</span>                        <a href="geo_ops.c.html#LN195"><span class='Ref_to_Parameter'>type_name</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN195"><span class='Ref_to_Parameter'>orig_string</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end path_decode &raquo; </span>   <span class='Comment_Single_Line'>/* path_decode() */ 
</span> 
<span class='Keyword'>static char </span><span class='Operator'>* 
</span><a name="LN269"></a><span class='Declare_Function'>path_encode</span><span class='Parentheses'>(</span><span class='Control'>enum</span> <a href="geo_ops.c.html#LN269"><span class='Ref_to_Parameter'>path_delim</span></a> <span class='Declare_Parameter'>path_delim</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>npts</span><span class='Delimiter'>, </span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pt</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN271"></a>    <a href="../../../include/lib/stringinfo.h.html#LN34"><span class='Ref_to_Struct'>StringInfoData</span></a> <span class='Declare_Local'>str</span><span class='Delimiter'>; 
</span><a name="LN272"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <a href="../../lib/stringinfo.c.html#LN44"><span class='Ref_to_Func'>initStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN271"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN269"><span class='Ref_to_Parameter'>path_delim</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>case</span> <a href="geo_ops.c.html#LN37"><span class='Ref_to_EnumConst'>PATH_CLOSED</span></a><span class='Operator'>: 
</span>            <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN271"><span class='Ref_To_Local'>str</span></a><span class='Delimiter'>, </span><a href="../../../test/regress/regress.c.html#LN41"><span class='Ref_to_Const'>LDELIM</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="geo_ops.c.html#LN37"><span class='Ref_to_EnumConst'>PATH_OPEN</span></a><span class='Operator'>: 
</span>            <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN271"><span class='Ref_To_Local'>str</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN92"><span class='Ref_to_Const'>LDELIM_EP</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="geo_ops.c.html#LN37"><span class='Ref_to_EnumConst'>PATH_NONE</span></a><span class='Operator'>: 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN272"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN272"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN269"><span class='Ref_to_Parameter'>npts</span></a><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN272"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN272"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN271"><span class='Ref_To_Local'>str</span></a><span class='Delimiter'>, </span><a href="../../../test/regress/regress.c.html#LN43"><span class='Ref_to_Const'>DELIM</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN271"><span class='Ref_To_Local'>str</span></a><span class='Delimiter'>, </span><a href="../../../test/regress/regress.c.html#LN41"><span class='Ref_to_Const'>LDELIM</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN64"><span class='Ref_to_Proto'>pair_encode</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN269"><span class='Ref_to_Parameter'>pt</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN269"><span class='Ref_to_Parameter'>pt</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN271"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN271"><span class='Ref_To_Local'>str</span></a><span class='Delimiter'>, </span><a href="../../../test/regress/regress.c.html#LN42"><span class='Ref_to_Const'>RDELIM</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN269"><span class='Ref_to_Parameter'>pt</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN269"><span class='Ref_to_Parameter'>path_delim</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>case</span> <a href="geo_ops.c.html#LN37"><span class='Ref_to_EnumConst'>PATH_CLOSED</span></a><span class='Operator'>: 
</span>            <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN271"><span class='Ref_To_Local'>str</span></a><span class='Delimiter'>, </span><a href="../../../test/regress/regress.c.html#LN42"><span class='Ref_to_Const'>RDELIM</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="geo_ops.c.html#LN37"><span class='Ref_to_EnumConst'>PATH_OPEN</span></a><span class='Operator'>: 
</span>            <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN271"><span class='Ref_To_Local'>str</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN93"><span class='Ref_to_Const'>RDELIM_EP</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="geo_ops.c.html#LN37"><span class='Ref_to_EnumConst'>PATH_NONE</span></a><span class='Operator'>: 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>return</span> <a href="geo_ops.c.html#LN271"><span class='Ref_To_Local'>str</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end path_encode &raquo; </span>   <span class='Comment_Single_Line'>/* path_encode() */ 
</span> 
<span class='Comment_Multi_Line'>/*------------------------------------------------------------- 
 * pair_count - count the number of points 
 * allow the following notation: 
 * '((1,2),(3,4))' 
 * '(1,3,2,4)' 
 * require an odd number of delim characters in the string 
 *-------------------------------------------------------------*/ 
</span><span class='Keyword'>static int 
</span><a name="LN321"></a><span class='Declare_Function'>pair_count</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>s</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Declare_Parameter'>delim</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN323"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ndelim</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>while</span> <span class='Parentheses'>((</span><a href="geo_ops.c.html#LN321"><span class='Ref_to_Parameter'>s</span></a> <span class='Operator'>= </span>strchr<span class='Parentheses'>(</span><a href="geo_ops.c.html#LN321"><span class='Ref_to_Parameter'>s</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN321"><span class='Ref_to_Parameter'>delim</span></a><span class='Parentheses'>))</span> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="geo_ops.c.html#LN323"><span class='Ref_To_Local'>ndelim</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN321"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>return</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN323"><span class='Ref_To_Local'>ndelim</span></a> <span class='Operator'>% </span><span class='Number'>2</span><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='Parentheses'>((</span><a href="geo_ops.c.html#LN323"><span class='Ref_To_Local'>ndelim</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>) </span><span class='Operator'>/ </span><span class='Number'>2</span><span class='Parentheses'>)</span> <span class='Operator'>: -</span><span class='Number'>1</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/*********************************************************************** 
 ** 
 **     Routines for two-dimensional boxes. 
 ** 
 ***********************************************************************/ 
</span> 
<span class='Comment_Multi_Line'>/*---------------------------------------------------------- 
 * Formatting and conversion routines. 
 *---------------------------------------------------------*/ 
</span> 
<span class='Comment_Multi_Line'>/*      box_in  -       convert a string to internal form. 
 * 
 *      External format: (two corners of box) 
 *              "(f8, f8), (f8, f8)" 
 *              also supports the older style "(f8, f8, f8, f8)" 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN351"></a><span class='Declare_Function'>box_in</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN353"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>str</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN241"><span class='Ref_to_Macro'>PG_GETARG_CSTRING</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN354"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span><a name="LN355"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>isopen</span><span class='Delimiter'>; 
</span><a name="LN356"></a>    <span class='Keyword'>double</span>      <span class='Declare_Local'>x</span><span class='Delimiter'>, 
</span><a name="LN357"></a>                <span class='Declare_Local'>y</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN66"><span class='Ref_to_Proto'>path_decode</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN353"><span class='Ref_To_Local'>str</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN354"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN355"><span class='Ref_To_Local'>isopen</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"box"</span><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN353"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* reorder corners if necessary... */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN354"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN354"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="geo_ops.c.html#LN356"><span class='Ref_To_Local'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN354"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN354"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN354"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN354"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN356"><span class='Ref_To_Local'>x</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN354"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN354"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="geo_ops.c.html#LN357"><span class='Ref_To_Local'>y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN354"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN354"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN354"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN354"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN357"><span class='Ref_To_Local'>y</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../../include/utils/geo_decls.h.html#LN161"><span class='Ref_to_Macro'>PG_RETURN_BOX_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN354"><span class='Ref_To_Local'>box</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end box_in &raquo; </span> 
 
<span class='Comment_Multi_Line'>/*      box_out -       convert a box to external form. 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN381"></a><span class='Declare_Function'>box_out</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN383"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN321"><span class='Ref_to_Macro'>PG_RETURN_CSTRING</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN69"><span class='Ref_to_Proto'>path_encode</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN37"><span class='Ref_to_EnumConst'>PATH_NONE</span></a><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN383"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 *      box_recv            - converts external binary format to box 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN392"></a><span class='Declare_Function'>box_recv</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN394"></a>    <a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a><span class='Parentheses'>) </span><a href="../../../include/fmgr.h.html#LN240"><span class='Ref_to_Macro'>PG_GETARG_POINTER</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN395"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box</span><span class='Delimiter'>; 
</span><a name="LN396"></a>    <span class='Keyword'>double</span>      <span class='Declare_Local'>x</span><span class='Delimiter'>, 
</span><a name="LN397"></a>                <span class='Declare_Local'>y</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN395"><span class='Ref_To_Local'>box</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN395"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="../../../include/libpq/pqformat.h.html#LN41"><span class='Ref_to_Proto'>pq_getmsgfloat8</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN394"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN395"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="../../../include/libpq/pqformat.h.html#LN41"><span class='Ref_to_Proto'>pq_getmsgfloat8</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN394"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN395"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="../../../include/libpq/pqformat.h.html#LN41"><span class='Ref_to_Proto'>pq_getmsgfloat8</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN394"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN395"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="../../../include/libpq/pqformat.h.html#LN41"><span class='Ref_to_Proto'>pq_getmsgfloat8</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN394"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* reorder corners if necessary... */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN395"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN395"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="geo_ops.c.html#LN396"><span class='Ref_To_Local'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN395"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN395"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN395"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN395"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN396"><span class='Ref_To_Local'>x</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN395"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN395"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="geo_ops.c.html#LN397"><span class='Ref_To_Local'>y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN395"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN395"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN395"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN395"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN397"><span class='Ref_To_Local'>y</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../../include/utils/geo_decls.h.html#LN161"><span class='Ref_to_Macro'>PG_RETURN_BOX_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN395"><span class='Ref_To_Local'>box</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end box_recv &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 *      box_send            - converts box to binary format 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN427"></a><span class='Declare_Function'>box_send</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN429"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN430"></a>    <a href="../../../include/lib/stringinfo.h.html#LN34"><span class='Ref_to_Struct'>StringInfoData</span></a> <span class='Declare_Local'>buf</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/libpq/pqformat.h.html#LN31"><span class='Ref_to_Proto'>pq_begintypsend</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN430"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/libpq/pqformat.h.html#LN28"><span class='Ref_to_Proto'>pq_sendfloat8</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN430"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN429"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/libpq/pqformat.h.html#LN28"><span class='Ref_to_Proto'>pq_sendfloat8</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN430"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN429"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/libpq/pqformat.h.html#LN28"><span class='Ref_to_Proto'>pq_sendfloat8</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN430"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN429"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/libpq/pqformat.h.html#LN28"><span class='Ref_to_Proto'>pq_sendfloat8</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN430"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN429"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN328"><span class='Ref_to_Macro'>PG_RETURN_BYTEA_P</span></a><span class='Parentheses'>(</span><a href="../../../include/libpq/pqformat.h.html#LN32"><span class='Ref_to_Proto'>pq_endtypsend</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN430"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/*      box_construct   -       fill in a new box. 
 */ 
</span><span class='Keyword'>static </span><a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a> <span class='Operator'>* 
</span><a name="LN444"></a><span class='Declare_Function'>box_construct</span><span class='Parentheses'>(</span><span class='Keyword'>double </span><span class='Declare_Parameter'>x1</span><span class='Delimiter'>, </span><span class='Keyword'>double </span><span class='Declare_Parameter'>x2</span><span class='Delimiter'>, </span><span class='Keyword'>double </span><span class='Declare_Parameter'>y1</span><span class='Delimiter'>, </span><span class='Keyword'>double </span><span class='Declare_Parameter'>y2</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN446"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>result</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="geo_ops.c.html#LN44"><span class='Ref_to_Proto'>box_fill</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN446"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN444"><span class='Ref_to_Parameter'>x1</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN444"><span class='Ref_to_Parameter'>x2</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN444"><span class='Ref_to_Parameter'>y1</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN444"><span class='Ref_to_Parameter'>y2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/*      box_fill        -       fill in a given box struct 
 */ 
</span><span class='Keyword'>static </span><a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a> <span class='Operator'>* 
</span><a name="LN455"></a><span class='Declare_Function'>box_fill</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>result</span><span class='Delimiter'>, </span><span class='Keyword'>double </span><span class='Declare_Parameter'>x1</span><span class='Delimiter'>, </span><span class='Keyword'>double </span><span class='Declare_Parameter'>x2</span><span class='Delimiter'>, </span><span class='Keyword'>double </span><span class='Declare_Parameter'>y1</span><span class='Delimiter'>, </span><span class='Keyword'>double </span><span class='Declare_Parameter'>y2</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN455"><span class='Ref_to_Parameter'>x1</span></a> <span class='Operator'>&GT; </span><a href="geo_ops.c.html#LN455"><span class='Ref_to_Parameter'>x2</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="geo_ops.c.html#LN455"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN455"><span class='Ref_to_Parameter'>x1</span></a><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN455"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN455"><span class='Ref_to_Parameter'>x2</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="geo_ops.c.html#LN455"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN455"><span class='Ref_to_Parameter'>x2</span></a><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN455"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN455"><span class='Ref_to_Parameter'>x1</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN455"><span class='Ref_to_Parameter'>y1</span></a> <span class='Operator'>&GT; </span><a href="geo_ops.c.html#LN455"><span class='Ref_to_Parameter'>y2</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="geo_ops.c.html#LN455"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN455"><span class='Ref_to_Parameter'>y1</span></a><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN455"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN455"><span class='Ref_to_Parameter'>y2</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="geo_ops.c.html#LN455"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN455"><span class='Ref_to_Parameter'>y2</span></a><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN455"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN455"><span class='Ref_to_Parameter'>y1</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>return</span> <a href="geo_ops.c.html#LN455"><span class='Ref_to_Parameter'>result</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end box_fill &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/*      box_copy        -       copy a box 
 */ 
</span><span class='Keyword'>static </span><a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a> <span class='Operator'>* 
</span><a name="LN485"></a><span class='Declare_Function'>box_copy</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>box</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN487"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>result</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    memcpy<span class='Parentheses'>((</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="geo_ops.c.html#LN487"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="geo_ops.c.html#LN485"><span class='Ref_to_Parameter'>box</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="geo_ops.c.html#LN487"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/*---------------------------------------------------------- 
 *  Relational operators for BOXes. 
 *      &LT;, &GT;, &LT;=, &GT;=, and == are based on box area. 
 *---------------------------------------------------------*/ 
</span> 
<span class='Comment_Multi_Line'>/*      box_same        -       are two boxes identical? 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN503"></a><span class='Declare_Function'>box_same</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN505"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN506"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN36"><span class='Ref_to_Macro'>FPeq</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN505"><span class='Ref_To_Local'>box1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN506"><span class='Ref_To_Local'>box2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>                   <a href="../../../include/utils/geo_decls.h.html#LN36"><span class='Ref_to_Macro'>FPeq</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN505"><span class='Ref_To_Local'>box1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN506"><span class='Ref_To_Local'>box2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>                   <a href="../../../include/utils/geo_decls.h.html#LN36"><span class='Ref_to_Macro'>FPeq</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN505"><span class='Ref_To_Local'>box1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN506"><span class='Ref_To_Local'>box2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>                   <a href="../../../include/utils/geo_decls.h.html#LN36"><span class='Ref_to_Macro'>FPeq</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN505"><span class='Ref_To_Local'>box1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN506"><span class='Ref_To_Local'>box2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/*      box_overlap     -       does box1 overlap box2? 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN517"></a><span class='Declare_Function'>box_overlap</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN519"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN520"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN45"><span class='Ref_to_Proto'>box_ov</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN519"><span class='Ref_To_Local'>box1</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN520"><span class='Ref_To_Local'>box2</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>static bool 
</span><a name="LN526"></a><span class='Declare_Function'>box_ov</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>box1</span><span class='Delimiter'>, </span><a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>box2</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> <span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN39"><span class='Ref_to_Macro'>FPle</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN526"><span class='Ref_to_Parameter'>box1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN526"><span class='Ref_to_Parameter'>box2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>            <a href="../../../include/utils/geo_decls.h.html#LN39"><span class='Ref_to_Macro'>FPle</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN526"><span class='Ref_to_Parameter'>box2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN526"><span class='Ref_to_Parameter'>box1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>            <a href="../../../include/utils/geo_decls.h.html#LN39"><span class='Ref_to_Macro'>FPle</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN526"><span class='Ref_to_Parameter'>box1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN526"><span class='Ref_to_Parameter'>box2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>            <a href="../../../include/utils/geo_decls.h.html#LN39"><span class='Ref_to_Macro'>FPle</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN526"><span class='Ref_to_Parameter'>box2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN526"><span class='Ref_to_Parameter'>box1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/*      box_left        -       is box1 strictly left of box2? 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN537"></a><span class='Declare_Function'>box_left</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN539"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN540"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN38"><span class='Ref_to_Macro'>FPlt</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN539"><span class='Ref_To_Local'>box1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN540"><span class='Ref_To_Local'>box2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/*      box_overleft    -       is the right edge of box1 at or left of 
 *                              the right edge of box2? 
 * 
 *      This is "less than or equal" for the end of a time range, 
 *      when time ranges are stored as rectangles. 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN552"></a><span class='Declare_Function'>box_overleft</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN554"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN555"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN39"><span class='Ref_to_Macro'>FPle</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN554"><span class='Ref_To_Local'>box1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN555"><span class='Ref_To_Local'>box2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/*      box_right       -       is box1 strictly right of box2? 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN563"></a><span class='Declare_Function'>box_right</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN565"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN566"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN40"><span class='Ref_to_Macro'>FPgt</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN565"><span class='Ref_To_Local'>box1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN566"><span class='Ref_To_Local'>box2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/*      box_overright   -       is the left edge of box1 at or right of 
 *                              the left edge of box2? 
 * 
 *      This is "greater than or equal" for time ranges, when time ranges 
 *      are stored as rectangles. 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN578"></a><span class='Declare_Function'>box_overright</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN580"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN581"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN41"><span class='Ref_to_Macro'>FPge</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN580"><span class='Ref_To_Local'>box1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN581"><span class='Ref_To_Local'>box2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/*      box_below       -       is box1 strictly below box2? 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN589"></a><span class='Declare_Function'>box_below</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN591"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN592"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN38"><span class='Ref_to_Macro'>FPlt</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN591"><span class='Ref_To_Local'>box1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN592"><span class='Ref_To_Local'>box2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/*      box_overbelow   -       is the upper edge of box1 at or below 
 *                              the upper edge of box2? 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN601"></a><span class='Declare_Function'>box_overbelow</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN603"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN604"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN39"><span class='Ref_to_Macro'>FPle</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN603"><span class='Ref_To_Local'>box1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN604"><span class='Ref_To_Local'>box2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/*      box_above       -       is box1 strictly above box2? 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN612"></a><span class='Declare_Function'>box_above</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN614"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN615"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN40"><span class='Ref_to_Macro'>FPgt</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN614"><span class='Ref_To_Local'>box1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN615"><span class='Ref_To_Local'>box2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/*      box_overabove   -       is the lower edge of box1 at or above 
 *                              the lower edge of box2? 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN624"></a><span class='Declare_Function'>box_overabove</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN626"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN627"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN41"><span class='Ref_to_Macro'>FPge</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN626"><span class='Ref_To_Local'>box1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN627"><span class='Ref_To_Local'>box2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/*      box_contained   -       is box1 contained by box2? 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN635"></a><span class='Declare_Function'>box_contained</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN637"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN638"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN39"><span class='Ref_to_Macro'>FPle</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN637"><span class='Ref_To_Local'>box1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN638"><span class='Ref_To_Local'>box2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>                   <a href="../../../include/utils/geo_decls.h.html#LN41"><span class='Ref_to_Macro'>FPge</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN637"><span class='Ref_To_Local'>box1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN638"><span class='Ref_To_Local'>box2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>                   <a href="../../../include/utils/geo_decls.h.html#LN39"><span class='Ref_to_Macro'>FPle</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN637"><span class='Ref_To_Local'>box1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN638"><span class='Ref_To_Local'>box2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>                   <a href="../../../include/utils/geo_decls.h.html#LN41"><span class='Ref_to_Macro'>FPge</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN637"><span class='Ref_To_Local'>box1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN638"><span class='Ref_To_Local'>box2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/*      box_contain     -       does box1 contain box2? 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN649"></a><span class='Declare_Function'>box_contain</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN651"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN652"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN41"><span class='Ref_to_Macro'>FPge</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN651"><span class='Ref_To_Local'>box1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN652"><span class='Ref_To_Local'>box2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>                   <a href="../../../include/utils/geo_decls.h.html#LN39"><span class='Ref_to_Macro'>FPle</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN651"><span class='Ref_To_Local'>box1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN652"><span class='Ref_To_Local'>box2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>                   <a href="../../../include/utils/geo_decls.h.html#LN41"><span class='Ref_to_Macro'>FPge</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN651"><span class='Ref_To_Local'>box1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN652"><span class='Ref_To_Local'>box2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>                   <a href="../../../include/utils/geo_decls.h.html#LN39"><span class='Ref_to_Macro'>FPle</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN651"><span class='Ref_To_Local'>box1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN652"><span class='Ref_To_Local'>box2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/*      box_positionop  - 
 *              is box1 entirely {above,below} box2? 
 * 
 * box_below_eq and box_above_eq are obsolete versions that (probably 
 * erroneously) accept the equal-boundaries case.  Since these are not 
 * in sync with the box_left and box_right code, they are deprecated and 
 * not supported in the PG 8.1 rtree operator class extension. 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN670"></a><span class='Declare_Function'>box_below_eq</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN672"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN673"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN39"><span class='Ref_to_Macro'>FPle</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN672"><span class='Ref_To_Local'>box1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN673"><span class='Ref_To_Local'>box2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN679"></a><span class='Declare_Function'>box_above_eq</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN681"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN682"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN41"><span class='Ref_to_Macro'>FPge</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN681"><span class='Ref_To_Local'>box1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN682"><span class='Ref_To_Local'>box2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/*      box_relop       -       is area(box1) relop area(box2), within 
 *                              our accuracy constraint? 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN692"></a><span class='Declare_Function'>box_lt</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN694"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN695"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN38"><span class='Ref_to_Macro'>FPlt</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN71"><span class='Ref_to_Proto'>box_ar</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN694"><span class='Ref_To_Local'>box1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN71"><span class='Ref_to_Proto'>box_ar</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN695"><span class='Ref_To_Local'>box2</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN701"></a><span class='Declare_Function'>box_gt</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN703"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN704"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN40"><span class='Ref_to_Macro'>FPgt</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN71"><span class='Ref_to_Proto'>box_ar</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN703"><span class='Ref_To_Local'>box1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN71"><span class='Ref_to_Proto'>box_ar</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN704"><span class='Ref_To_Local'>box2</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN710"></a><span class='Declare_Function'>box_eq</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN712"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN713"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN36"><span class='Ref_to_Macro'>FPeq</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN71"><span class='Ref_to_Proto'>box_ar</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN712"><span class='Ref_To_Local'>box1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN71"><span class='Ref_to_Proto'>box_ar</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN713"><span class='Ref_To_Local'>box2</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN719"></a><span class='Declare_Function'>box_le</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN721"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN722"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN39"><span class='Ref_to_Macro'>FPle</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN71"><span class='Ref_to_Proto'>box_ar</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN721"><span class='Ref_To_Local'>box1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN71"><span class='Ref_to_Proto'>box_ar</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN722"><span class='Ref_To_Local'>box2</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN728"></a><span class='Declare_Function'>box_ge</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN730"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN731"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN41"><span class='Ref_to_Macro'>FPge</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN71"><span class='Ref_to_Proto'>box_ar</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN730"><span class='Ref_To_Local'>box1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN71"><span class='Ref_to_Proto'>box_ar</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN731"><span class='Ref_To_Local'>box2</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/*---------------------------------------------------------- 
 *  "Arithmetic" operators on boxes. 
 *---------------------------------------------------------*/ 
</span> 
<span class='Comment_Multi_Line'>/*      box_area        -       returns the area of the box. 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN744"></a><span class='Declare_Function'>box_area</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN746"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN325"><span class='Ref_to_Macro'>PG_RETURN_FLOAT8</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN71"><span class='Ref_to_Proto'>box_ar</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN746"><span class='Ref_To_Local'>box</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/*      box_width       -       returns the width of the box 
 *                                (horizontal magnitude). 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN756"></a><span class='Declare_Function'>box_width</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN758"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN325"><span class='Ref_to_Macro'>PG_RETURN_FLOAT8</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN758"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>- </span><a href="geo_ops.c.html#LN758"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/*      box_height      -       returns the height of the box 
 *                                (vertical magnitude). 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN768"></a><span class='Declare_Function'>box_height</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN770"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN325"><span class='Ref_to_Macro'>PG_RETURN_FLOAT8</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN770"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>- </span><a href="geo_ops.c.html#LN770"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/*      box_distance    -       returns the distance between the 
 *                                center points of two boxes. 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN780"></a><span class='Declare_Function'>box_distance</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN782"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN783"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN784"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>       <span class='Declare_Local'>a</span><span class='Delimiter'>, 
</span><a name="LN785"></a>                <span class='Declare_Local'>b</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN72"><span class='Ref_to_Proto'>box_cn</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN784"><span class='Ref_To_Local'>a</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN782"><span class='Ref_To_Local'>box1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN72"><span class='Ref_to_Proto'>box_cn</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN785"><span class='Ref_To_Local'>b</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN783"><span class='Ref_To_Local'>box2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN325"><span class='Ref_to_Macro'>PG_RETURN_FLOAT8</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN52"><span class='Ref_to_Macro'>HYPOT</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN784"><span class='Ref_To_Local'>a</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>- </span><a href="geo_ops.c.html#LN785"><span class='Ref_To_Local'>b</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN784"><span class='Ref_To_Local'>a</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>- </span><a href="geo_ops.c.html#LN785"><span class='Ref_To_Local'>b</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/*      box_center      -       returns the center point of the box. 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN797"></a><span class='Declare_Function'>box_center</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN799"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN800"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>result</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN72"><span class='Ref_to_Proto'>box_cn</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN800"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN799"><span class='Ref_To_Local'>box</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/geo_decls.h.html#LN139"><span class='Ref_to_Macro'>PG_RETURN_POINT_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN800"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/*      box_ar  -       returns the area of the box. 
 */ 
</span><span class='Keyword'>static double 
</span><a name="LN811"></a><span class='Declare_Function'>box_ar</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>box</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> <a href="geo_ops.c.html#LN47"><span class='Ref_to_Proto'>box_wd</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN811"><span class='Ref_to_Parameter'>box</span></a><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="geo_ops.c.html#LN46"><span class='Ref_to_Proto'>box_ht</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN811"><span class='Ref_to_Parameter'>box</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/*      box_cn  -       stores the centerpoint of the box into *center. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN820"></a><span class='Declare_Function'>box_cn</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>center</span><span class='Delimiter'>, </span><a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>box</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <a href="geo_ops.c.html#LN820"><span class='Ref_to_Parameter'>center</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN820"><span class='Ref_to_Parameter'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>+ </span><a href="geo_ops.c.html#LN820"><span class='Ref_to_Parameter'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>) </span><span class='Operator'>/ </span><span class='Number'>2</span><span class='Operator'>.</span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN820"><span class='Ref_to_Parameter'>center</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN820"><span class='Ref_to_Parameter'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>+ </span><a href="geo_ops.c.html#LN820"><span class='Ref_to_Parameter'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>) </span><span class='Operator'>/ </span><span class='Number'>2</span><span class='Operator'>.</span><span class='Number'>0</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/*      box_wd  -       returns the width (length) of the box 
 *                                (horizontal magnitude). 
 */ 
</span><span class='Keyword'>static double 
</span><a name="LN831"></a><span class='Declare_Function'>box_wd</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>box</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> <a href="geo_ops.c.html#LN831"><span class='Ref_to_Parameter'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>- </span><a href="geo_ops.c.html#LN831"><span class='Ref_to_Parameter'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/*      box_ht  -       returns the height of the box 
 *                                (vertical magnitude). 
 */ 
</span><span class='Keyword'>static double 
</span><a name="LN841"></a><span class='Declare_Function'>box_ht</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>box</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> <a href="geo_ops.c.html#LN841"><span class='Ref_to_Parameter'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>- </span><a href="geo_ops.c.html#LN841"><span class='Ref_to_Parameter'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/*---------------------------------------------------------- 
 *  Funky operations. 
 *---------------------------------------------------------*/ 
</span> 
<span class='Comment_Multi_Line'>/*      box_intersect   - 
 *              returns the overlapping portion of two boxes, 
 *                or NULL if they do not intersect. 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN856"></a><span class='Declare_Function'>box_intersect</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN858"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN859"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN860"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="geo_ops.c.html#LN45"><span class='Ref_to_Proto'>box_ov</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN858"><span class='Ref_To_Local'>box1</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN859"><span class='Ref_To_Local'>box2</span></a><span class='Parentheses'>))</span> 
        <a href="../../../include/fmgr.h.html#LN304"><span class='Ref_to_Macro'>PG_RETURN_NULL</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN860"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN860"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="../../../interfaces/ecpg/pgtypeslib/numeric.c.html#LN11"><span class='Ref_to_Macro'>Min</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN858"><span class='Ref_To_Local'>box1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN859"><span class='Ref_To_Local'>box2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN860"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="../../../interfaces/ecpg/pgtypeslib/numeric.c.html#LN10"><span class='Ref_to_Macro'>Max</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN858"><span class='Ref_To_Local'>box1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN859"><span class='Ref_To_Local'>box2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN860"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="../../../interfaces/ecpg/pgtypeslib/numeric.c.html#LN11"><span class='Ref_to_Macro'>Min</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN858"><span class='Ref_To_Local'>box1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN859"><span class='Ref_To_Local'>box2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN860"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="../../../interfaces/ecpg/pgtypeslib/numeric.c.html#LN10"><span class='Ref_to_Macro'>Max</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN858"><span class='Ref_To_Local'>box1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN859"><span class='Ref_To_Local'>box2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/geo_decls.h.html#LN161"><span class='Ref_to_Macro'>PG_RETURN_BOX_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN860"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/*      box_diagonal    - 
 *              returns a line segment which happens to be the 
 *                positive-slope diagonal of "box". 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN881"></a><span class='Declare_Function'>box_diagonal</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN883"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN884"></a>    <a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>result</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN70"><span class='Ref_to_Proto'>statlseg_construct</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN884"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN883"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN883"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/geo_decls.h.html#LN144"><span class='Ref_to_Macro'>PG_RETURN_LSEG_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN884"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/*********************************************************************** 
 ** 
 **     Routines for 2D lines. 
 ** 
 ***********************************************************************/ 
</span> 
<span class='Keyword'>static bool 
</span><a name="LN898"></a><span class='Declare_Function'>line_decode</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>s</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>str</span><span class='Delimiter'>, </span><a href="../../../include/utils/geo_decls.h.html#LN89"><span class='Ref_to_Typedef'>LINE</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>line</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Comment_Multi_Line'>/* s was already advanced over leading '{' */ 
</span>    <a href="geo_ops.c.html#LN898"><span class='Ref_to_Parameter'>line</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN91"><span class='Ref_to_Member'>A</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN59"><span class='Ref_to_Proto'>single_decode</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN898"><span class='Ref_to_Parameter'>s</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN898"><span class='Ref_to_Parameter'>s</span></a><span class='Delimiter'>, </span><span class='String'>"line"</span><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN898"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="geo_ops.c.html#LN898"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>++ != </span><a href="../../../test/regress/regress.c.html#LN43"><span class='Ref_to_Const'>DELIM</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN898"><span class='Ref_to_Parameter'>line</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN92"><span class='Ref_to_Member'>B</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN59"><span class='Ref_to_Proto'>single_decode</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN898"><span class='Ref_to_Parameter'>s</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN898"><span class='Ref_to_Parameter'>s</span></a><span class='Delimiter'>, </span><span class='String'>"line"</span><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN898"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="geo_ops.c.html#LN898"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>++ != </span><a href="../../../test/regress/regress.c.html#LN43"><span class='Ref_to_Const'>DELIM</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN898"><span class='Ref_to_Parameter'>line</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN93"><span class='Ref_to_Member'>C</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN59"><span class='Ref_to_Proto'>single_decode</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN898"><span class='Ref_to_Parameter'>s</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN898"><span class='Ref_to_Parameter'>s</span></a><span class='Delimiter'>, </span><span class='String'>"line"</span><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN898"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="geo_ops.c.html#LN898"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>++ != </span><span class='String'>'}'</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Control'>while</span> <span class='Parentheses'>(</span>isspace<span class='Parentheses'>((</span><span class='Keyword'>unsigned char</span><span class='Parentheses'>) </span><span class='Operator'>*</span><a href="geo_ops.c.html#LN898"><span class='Ref_to_Parameter'>s</span></a><span class='Parentheses'>))</span> 
        <a href="geo_ops.c.html#LN898"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="geo_ops.c.html#LN898"><span class='Ref_to_Parameter'>s</span></a> <span class='Operator'>!= </span><span class='String'>'\0'</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN918"></a><span class='Declare_Function'>line_in</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN920"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>str</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN241"><span class='Ref_to_Macro'>PG_GETARG_CSTRING</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN921"></a>    <a href="../../../include/utils/geo_decls.h.html#LN89"><span class='Ref_to_Typedef'>LINE</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>line</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN89"><span class='Ref_to_Typedef'>LINE</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN89"><span class='Ref_to_Typedef'>LINE</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span><a name="LN922"></a>    <a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a>        <span class='Declare_Local'>lseg</span><span class='Delimiter'>; 
</span><a name="LN923"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>isopen</span><span class='Delimiter'>; 
</span><a name="LN924"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>s</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN924"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN920"><span class='Ref_To_Local'>str</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>while</span> <span class='Parentheses'>(</span>isspace<span class='Parentheses'>((</span><span class='Keyword'>unsigned char</span><span class='Parentheses'>) </span><span class='Operator'>*</span><a href="geo_ops.c.html#LN924"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>))</span> 
        <a href="geo_ops.c.html#LN924"><span class='Ref_To_Local'>s</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="geo_ops.c.html#LN924"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>== </span><span class='String'>'{'</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="geo_ops.c.html#LN897"><span class='Ref_to_Func'>line_decode</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN924"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN920"><span class='Ref_To_Local'>str</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN921"><span class='Ref_To_Local'>line</span></a><span class='Parentheses'>))</span> 
            <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INVALID_TEXT_REPRESENTATION<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"invalid input syntax for type %s: \"%s\""</span><span class='Delimiter'>, 
</span>                            <span class='String'>"line"</span><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN920"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN35"><span class='Ref_to_Macro'>FPzero</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN921"><span class='Ref_To_Local'>line</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN91"><span class='Ref_to_Member'>A</span></a><span class='Parentheses'>) </span><span class='Operator'>&& </span><a href="../../../include/utils/geo_decls.h.html#LN35"><span class='Ref_to_Macro'>FPzero</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN921"><span class='Ref_To_Local'>line</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN92"><span class='Ref_to_Member'>B</span></a><span class='Parentheses'>))</span> 
            <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INVALID_TEXT_REPRESENTATION<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"invalid line specification: A and B cannot both be zero"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="geo_ops.c.html#LN66"><span class='Ref_to_Proto'>path_decode</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN924"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN922"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN923"><span class='Ref_To_Local'>isopen</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"line"</span><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN920"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN36"><span class='Ref_to_Macro'>FPeq</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN922"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN922"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>) </span><span class='Operator'>&& </span><a href="../../../include/utils/geo_decls.h.html#LN36"><span class='Ref_to_Macro'>FPeq</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN922"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN922"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>))</span> 
            <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INVALID_TEXT_REPRESENTATION<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"invalid line specification: must be two distinct points"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN51"><span class='Ref_to_Proto'>line_construct_pts</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN921"><span class='Ref_To_Local'>line</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN922"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>], </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN922"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../../include/utils/geo_decls.h.html#LN156"><span class='Ref_to_Macro'>PG_RETURN_LINE_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN921"><span class='Ref_To_Local'>line</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end line_in &raquo; </span> 
 
 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN956"></a><span class='Declare_Function'>line_out</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN958"></a>    <a href="../../../include/utils/geo_decls.h.html#LN89"><span class='Ref_to_Typedef'>LINE</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>line</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN155"><span class='Ref_to_Macro'>PG_GETARG_LINE_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN959"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>astr</span> <span class='Operator'>= </span><a href="../../../include/utils/builtins.h.html#LN62"><span class='Ref_to_Proto'>float8out_internal</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN958"><span class='Ref_To_Local'>line</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN91"><span class='Ref_to_Member'>A</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN960"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>bstr</span> <span class='Operator'>= </span><a href="../../../include/utils/builtins.h.html#LN62"><span class='Ref_to_Proto'>float8out_internal</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN958"><span class='Ref_To_Local'>line</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN92"><span class='Ref_to_Member'>B</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN961"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>cstr</span> <span class='Operator'>= </span><a href="../../../include/utils/builtins.h.html#LN62"><span class='Ref_to_Proto'>float8out_internal</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN958"><span class='Ref_To_Local'>line</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN93"><span class='Ref_to_Member'>C</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN321"><span class='Ref_to_Macro'>PG_RETURN_CSTRING</span></a><span class='Parentheses'>(</span><a href="../../../common/psprintf.c.html#LN44"><span class='Ref_to_Func'>psprintf</span></a><span class='Parentheses'>(</span><span class='String'>"{%s,%s,%s}"</span><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN959"><span class='Ref_To_Local'>astr</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN960"><span class='Ref_To_Local'>bstr</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN961"><span class='Ref_To_Local'>cstr</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 *      line_recv           - converts external binary format to line 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN970"></a><span class='Declare_Function'>line_recv</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN972"></a>    <a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a><span class='Parentheses'>) </span><a href="../../../include/fmgr.h.html#LN240"><span class='Ref_to_Macro'>PG_GETARG_POINTER</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN973"></a>    <a href="../../../include/utils/geo_decls.h.html#LN89"><span class='Ref_to_Typedef'>LINE</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>line</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN973"><span class='Ref_To_Local'>line</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN89"><span class='Ref_to_Typedef'>LINE</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN89"><span class='Ref_to_Typedef'>LINE</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN973"><span class='Ref_To_Local'>line</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN91"><span class='Ref_to_Member'>A</span></a> <span class='Operator'>= </span><a href="../../../include/libpq/pqformat.h.html#LN41"><span class='Ref_to_Proto'>pq_getmsgfloat8</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN972"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN973"><span class='Ref_To_Local'>line</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN92"><span class='Ref_to_Member'>B</span></a> <span class='Operator'>= </span><a href="../../../include/libpq/pqformat.h.html#LN41"><span class='Ref_to_Proto'>pq_getmsgfloat8</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN972"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN973"><span class='Ref_To_Local'>line</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN93"><span class='Ref_to_Member'>C</span></a> <span class='Operator'>= </span><a href="../../../include/libpq/pqformat.h.html#LN41"><span class='Ref_to_Proto'>pq_getmsgfloat8</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN972"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/geo_decls.h.html#LN156"><span class='Ref_to_Macro'>PG_RETURN_LINE_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN973"><span class='Ref_To_Local'>line</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 *      line_send           - converts line to binary format 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN988"></a><span class='Declare_Function'>line_send</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN990"></a>    <a href="../../../include/utils/geo_decls.h.html#LN89"><span class='Ref_to_Typedef'>LINE</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>line</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN155"><span class='Ref_to_Macro'>PG_GETARG_LINE_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN991"></a>    <a href="../../../include/lib/stringinfo.h.html#LN34"><span class='Ref_to_Struct'>StringInfoData</span></a> <span class='Declare_Local'>buf</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/libpq/pqformat.h.html#LN31"><span class='Ref_to_Proto'>pq_begintypsend</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN991"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/libpq/pqformat.h.html#LN28"><span class='Ref_to_Proto'>pq_sendfloat8</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN991"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN990"><span class='Ref_To_Local'>line</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN91"><span class='Ref_to_Member'>A</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/libpq/pqformat.h.html#LN28"><span class='Ref_to_Proto'>pq_sendfloat8</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN991"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN990"><span class='Ref_To_Local'>line</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN92"><span class='Ref_to_Member'>B</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/libpq/pqformat.h.html#LN28"><span class='Ref_to_Proto'>pq_sendfloat8</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN991"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN990"><span class='Ref_To_Local'>line</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN93"><span class='Ref_to_Member'>C</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN328"><span class='Ref_to_Macro'>PG_RETURN_BYTEA_P</span></a><span class='Parentheses'>(</span><a href="../../../include/libpq/pqformat.h.html#LN32"><span class='Ref_to_Proto'>pq_endtypsend</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN991"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/*---------------------------------------------------------- 
 *  Conversion routines from one line formula to internal. 
 *      Internal form:  Ax+By+C=0 
 *---------------------------------------------------------*/ 
</span> 
<span class='Comment_Multi_Line'>/* line_construct_pm() 
 * point-slope 
 */ 
</span><span class='Keyword'>static </span><a href="../../../include/utils/geo_decls.h.html#LN89"><span class='Ref_to_Typedef'>LINE</span></a> <span class='Operator'>* 
</span><a name="LN1010"></a><span class='Declare_Function'>line_construct_pm</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pt</span><span class='Delimiter'>, </span><span class='Keyword'>double </span><span class='Declare_Parameter'>m</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1012"></a>    <a href="../../../include/utils/geo_decls.h.html#LN89"><span class='Ref_to_Typedef'>LINE</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>result</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN89"><span class='Ref_to_Typedef'>LINE</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN89"><span class='Ref_to_Typedef'>LINE</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1010"><span class='Ref_to_Parameter'>m</span></a> <span class='Operator'>== </span>DBL_MAX<span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* vertical - use "x = C" */ 
</span>        <a href="geo_ops.c.html#LN1012"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN91"><span class='Ref_to_Member'>A</span></a> <span class='Operator'>= -</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN1012"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN92"><span class='Ref_to_Member'>B</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN1012"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN93"><span class='Ref_to_Member'>C</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN1010"><span class='Ref_to_Parameter'>pt</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* use "mx - y + yinter = 0" */ 
</span>        <a href="geo_ops.c.html#LN1012"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN91"><span class='Ref_to_Member'>A</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN1010"><span class='Ref_to_Parameter'>m</span></a><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN1012"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN92"><span class='Ref_to_Member'>B</span></a> <span class='Operator'>= -</span><span class='Number'>1</span><span class='Operator'>.</span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN1012"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN93"><span class='Ref_to_Member'>C</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN1010"><span class='Ref_to_Parameter'>pt</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>- </span><a href="geo_ops.c.html#LN1010"><span class='Ref_to_Parameter'>m</span></a> <span class='Operator'>* </span><a href="geo_ops.c.html#LN1010"><span class='Ref_to_Parameter'>pt</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>return</span> <a href="geo_ops.c.html#LN1012"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end line_construct_pm &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Fill already-allocated LINE struct from two points on the line 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN1036"></a><span class='Declare_Function'>line_construct_pts</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN89"><span class='Ref_to_Typedef'>LINE</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>line</span><span class='Delimiter'>, </span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pt1</span><span class='Delimiter'>, </span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pt2</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN36"><span class='Ref_to_Macro'>FPeq</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1036"><span class='Ref_to_Parameter'>pt1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1036"><span class='Ref_to_Parameter'>pt2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{</span>                           <span class='Comment_Single_Line'>/* vertical */ 
</span>        <span class='Comment_Multi_Line'>/* use "x = C" */ 
</span>        <a href="geo_ops.c.html#LN1036"><span class='Ref_to_Parameter'>line</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN91"><span class='Ref_to_Member'>A</span></a> <span class='Operator'>= -</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN1036"><span class='Ref_to_Parameter'>line</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN92"><span class='Ref_to_Member'>B</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN1036"><span class='Ref_to_Parameter'>line</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN93"><span class='Ref_to_Member'>C</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN1036"><span class='Ref_to_Parameter'>pt1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span><span class='Directive'>#ifdef</span> GEODEBUG 
        <a href="../../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span><span class='String'>"line_construct_pts- line is vertical\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN36"><span class='Ref_to_Macro'>FPeq</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1036"><span class='Ref_to_Parameter'>pt1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1036"><span class='Ref_to_Parameter'>pt2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{</span>                           <span class='Comment_Single_Line'>/* horizontal */ 
</span>        <span class='Comment_Multi_Line'>/* use "y = C" */ 
</span>        <a href="geo_ops.c.html#LN1036"><span class='Ref_to_Parameter'>line</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN91"><span class='Ref_to_Member'>A</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN1036"><span class='Ref_to_Parameter'>line</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN92"><span class='Ref_to_Member'>B</span></a> <span class='Operator'>= -</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN1036"><span class='Ref_to_Parameter'>line</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN93"><span class='Ref_to_Member'>C</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN1036"><span class='Ref_to_Parameter'>pt1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
</span><span class='Directive'>#ifdef</span> GEODEBUG 
        <a href="../../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span><span class='String'>"line_construct_pts- line is horizontal\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* use "mx - y + yinter = 0" */ 
</span>        <a href="geo_ops.c.html#LN1036"><span class='Ref_to_Parameter'>line</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN91"><span class='Ref_to_Member'>A</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1036"><span class='Ref_to_Parameter'>pt2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>- </span><a href="geo_ops.c.html#LN1036"><span class='Ref_to_Parameter'>pt1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>) </span><span class='Operator'>/ </span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1036"><span class='Ref_to_Parameter'>pt2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>- </span><a href="geo_ops.c.html#LN1036"><span class='Ref_to_Parameter'>pt1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN1036"><span class='Ref_to_Parameter'>line</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN92"><span class='Ref_to_Member'>B</span></a> <span class='Operator'>= -</span><span class='Number'>1</span><span class='Operator'>.</span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN1036"><span class='Ref_to_Parameter'>line</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN93"><span class='Ref_to_Member'>C</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN1036"><span class='Ref_to_Parameter'>pt1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>- </span><a href="geo_ops.c.html#LN1036"><span class='Ref_to_Parameter'>line</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN91"><span class='Ref_to_Member'>A</span></a> <span class='Operator'>* </span><a href="geo_ops.c.html#LN1036"><span class='Ref_to_Parameter'>pt1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* on some platforms, the preceding expression tends to produce -0 */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1036"><span class='Ref_to_Parameter'>line</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN93"><span class='Ref_to_Member'>C</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Operator'>.</span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <a href="geo_ops.c.html#LN1036"><span class='Ref_to_Parameter'>line</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN93"><span class='Ref_to_Member'>C</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Operator'>.</span><span class='Number'>0</span><span class='Delimiter'>; 
</span><span class='Directive'>#ifdef</span> GEODEBUG 
        <a href="../../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span><span class='String'>"line_construct_pts- line is neither vertical nor horizontal (diffs x=%.*g, y=%.*g\n"</span><span class='Delimiter'>, 
</span>               DBL_DIG<span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1036"><span class='Ref_to_Parameter'>pt2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>- </span><a href="geo_ops.c.html#LN1036"><span class='Ref_to_Parameter'>pt1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span>DBL_DIG<span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1036"><span class='Ref_to_Parameter'>pt2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>- </span><a href="geo_ops.c.html#LN1036"><span class='Ref_to_Parameter'>pt1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
    <span class='Delimiter'>} 
}</span><span class='Auto_Annotations'> &laquo; end line_construct_pts &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* line_construct_pp() 
 * two points 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1078"></a><span class='Declare_Function'>line_construct_pp</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1080"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>pt1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1081"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>pt2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1082"></a>    <a href="../../../include/utils/geo_decls.h.html#LN89"><span class='Ref_to_Typedef'>LINE</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>result</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN89"><span class='Ref_to_Typedef'>LINE</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN89"><span class='Ref_to_Typedef'>LINE</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN51"><span class='Ref_to_Proto'>line_construct_pts</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1082"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1080"><span class='Ref_To_Local'>pt1</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1081"><span class='Ref_To_Local'>pt2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/utils/geo_decls.h.html#LN156"><span class='Ref_to_Macro'>PG_RETURN_LINE_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1082"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/*---------------------------------------------------------- 
 *  Relative position routines. 
 *---------------------------------------------------------*/ 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1094"></a><span class='Declare_Function'>line_intersect</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1096"></a>    <a href="../../../include/utils/geo_decls.h.html#LN89"><span class='Ref_to_Typedef'>LINE</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>l1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN155"><span class='Ref_to_Macro'>PG_GETARG_LINE_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1097"></a>    <a href="../../../include/utils/geo_decls.h.html#LN89"><span class='Ref_to_Typedef'>LINE</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>l2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN155"><span class='Ref_to_Macro'>PG_GETARG_LINE_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/postgres.h.html#LN398"><span class='Ref_to_Macro'>DatumGetBool</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN585"><span class='Ref_to_Macro'>DirectFunctionCall2</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1104"><span class='Ref_to_Func'>line_parallel</span></a><span class='Delimiter'>, 
</span>                                                     <a href="../../../include/utils/geo_decls.h.html#LN154"><span class='Ref_to_Macro'>LinePGetDatum</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1096"><span class='Ref_To_Local'>l1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                                     <a href="../../../include/utils/geo_decls.h.html#LN154"><span class='Ref_to_Macro'>LinePGetDatum</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1097"><span class='Ref_To_Local'>l2</span></a><span class='Parentheses'>))))</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1105"></a><span class='Declare_Function'>line_parallel</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1107"></a>    <a href="../../../include/utils/geo_decls.h.html#LN89"><span class='Ref_to_Typedef'>LINE</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>l1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN155"><span class='Ref_to_Macro'>PG_GETARG_LINE_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1108"></a>    <a href="../../../include/utils/geo_decls.h.html#LN89"><span class='Ref_to_Typedef'>LINE</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>l2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN155"><span class='Ref_to_Macro'>PG_GETARG_LINE_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN35"><span class='Ref_to_Macro'>FPzero</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1107"><span class='Ref_To_Local'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN92"><span class='Ref_to_Member'>B</span></a><span class='Parentheses'>))</span> 
        <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN35"><span class='Ref_to_Macro'>FPzero</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1108"><span class='Ref_To_Local'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN92"><span class='Ref_to_Member'>B</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN36"><span class='Ref_to_Macro'>FPeq</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1108"><span class='Ref_To_Local'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN91"><span class='Ref_to_Member'>A</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1107"><span class='Ref_To_Local'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN91"><span class='Ref_to_Member'>A</span></a> <span class='Operator'>* </span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1108"><span class='Ref_To_Local'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN92"><span class='Ref_to_Member'>B</span></a> <span class='Operator'>/ </span><a href="geo_ops.c.html#LN1107"><span class='Ref_To_Local'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN92"><span class='Ref_to_Member'>B</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1117"></a><span class='Declare_Function'>line_perp</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1119"></a>    <a href="../../../include/utils/geo_decls.h.html#LN89"><span class='Ref_to_Typedef'>LINE</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>l1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN155"><span class='Ref_to_Macro'>PG_GETARG_LINE_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1120"></a>    <a href="../../../include/utils/geo_decls.h.html#LN89"><span class='Ref_to_Typedef'>LINE</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>l2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN155"><span class='Ref_to_Macro'>PG_GETARG_LINE_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN35"><span class='Ref_to_Macro'>FPzero</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1119"><span class='Ref_To_Local'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN91"><span class='Ref_to_Member'>A</span></a><span class='Parentheses'>))</span> 
        <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN35"><span class='Ref_to_Macro'>FPzero</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1120"><span class='Ref_To_Local'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN92"><span class='Ref_to_Member'>B</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN35"><span class='Ref_to_Macro'>FPzero</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1119"><span class='Ref_To_Local'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN92"><span class='Ref_to_Member'>B</span></a><span class='Parentheses'>))</span> 
        <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN35"><span class='Ref_to_Macro'>FPzero</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1120"><span class='Ref_To_Local'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN91"><span class='Ref_to_Member'>A</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN36"><span class='Ref_to_Macro'>FPeq</span></a><span class='Parentheses'>(((</span><a href="geo_ops.c.html#LN1119"><span class='Ref_To_Local'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN91"><span class='Ref_to_Member'>A</span></a> <span class='Operator'>* </span><a href="geo_ops.c.html#LN1120"><span class='Ref_To_Local'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN92"><span class='Ref_to_Member'>B</span></a><span class='Parentheses'>) </span><span class='Operator'>/ </span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1119"><span class='Ref_To_Local'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN92"><span class='Ref_to_Member'>B</span></a> <span class='Operator'>* </span><a href="geo_ops.c.html#LN1120"><span class='Ref_To_Local'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN91"><span class='Ref_to_Member'>A</span></a><span class='Parentheses'>))</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Operator'>.</span><span class='Number'>0</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1131"></a><span class='Declare_Function'>line_vertical</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1133"></a>    <a href="../../../include/utils/geo_decls.h.html#LN89"><span class='Ref_to_Typedef'>LINE</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>line</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN155"><span class='Ref_to_Macro'>PG_GETARG_LINE_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN35"><span class='Ref_to_Macro'>FPzero</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1133"><span class='Ref_To_Local'>line</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN92"><span class='Ref_to_Member'>B</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1139"></a><span class='Declare_Function'>line_horizontal</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1141"></a>    <a href="../../../include/utils/geo_decls.h.html#LN89"><span class='Ref_to_Typedef'>LINE</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>line</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN155"><span class='Ref_to_Macro'>PG_GETARG_LINE_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN35"><span class='Ref_to_Macro'>FPzero</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1141"><span class='Ref_To_Local'>line</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN91"><span class='Ref_to_Member'>A</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1147"></a><span class='Declare_Function'>line_eq</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1149"></a>    <a href="../../../include/utils/geo_decls.h.html#LN89"><span class='Ref_to_Typedef'>LINE</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>l1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN155"><span class='Ref_to_Macro'>PG_GETARG_LINE_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1150"></a>    <a href="../../../include/utils/geo_decls.h.html#LN89"><span class='Ref_to_Typedef'>LINE</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>l2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN155"><span class='Ref_to_Macro'>PG_GETARG_LINE_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1151"></a>    <span class='Keyword'>double</span>      <span class='Declare_Local'>k</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/utils/geo_decls.h.html#LN35"><span class='Ref_to_Macro'>FPzero</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1150"><span class='Ref_To_Local'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN91"><span class='Ref_to_Member'>A</span></a><span class='Parentheses'>))</span> 
        <a href="geo_ops.c.html#LN1151"><span class='Ref_To_Local'>k</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN1149"><span class='Ref_To_Local'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN91"><span class='Ref_to_Member'>A</span></a> <span class='Operator'>/ </span><a href="geo_ops.c.html#LN1150"><span class='Ref_To_Local'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN91"><span class='Ref_to_Member'>A</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/utils/geo_decls.h.html#LN35"><span class='Ref_to_Macro'>FPzero</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1150"><span class='Ref_To_Local'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN92"><span class='Ref_to_Member'>B</span></a><span class='Parentheses'>))</span> 
        <a href="geo_ops.c.html#LN1151"><span class='Ref_To_Local'>k</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN1149"><span class='Ref_To_Local'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN92"><span class='Ref_to_Member'>B</span></a> <span class='Operator'>/ </span><a href="geo_ops.c.html#LN1150"><span class='Ref_To_Local'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN92"><span class='Ref_to_Member'>B</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/utils/geo_decls.h.html#LN35"><span class='Ref_to_Macro'>FPzero</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1150"><span class='Ref_To_Local'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN93"><span class='Ref_to_Member'>C</span></a><span class='Parentheses'>))</span> 
        <a href="geo_ops.c.html#LN1151"><span class='Ref_To_Local'>k</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN1149"><span class='Ref_To_Local'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN93"><span class='Ref_to_Member'>C</span></a> <span class='Operator'>/ </span><a href="geo_ops.c.html#LN1150"><span class='Ref_To_Local'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN93"><span class='Ref_to_Member'>C</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="geo_ops.c.html#LN1151"><span class='Ref_To_Local'>k</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Operator'>.</span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN36"><span class='Ref_to_Macro'>FPeq</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1149"><span class='Ref_To_Local'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN91"><span class='Ref_to_Member'>A</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1151"><span class='Ref_To_Local'>k</span></a> <span class='Operator'>* </span><a href="geo_ops.c.html#LN1150"><span class='Ref_To_Local'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN91"><span class='Ref_to_Member'>A</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>                   <a href="../../../include/utils/geo_decls.h.html#LN36"><span class='Ref_to_Macro'>FPeq</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1149"><span class='Ref_To_Local'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN92"><span class='Ref_to_Member'>B</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1151"><span class='Ref_To_Local'>k</span></a> <span class='Operator'>* </span><a href="geo_ops.c.html#LN1150"><span class='Ref_To_Local'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN92"><span class='Ref_to_Member'>B</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>                   <a href="../../../include/utils/geo_decls.h.html#LN36"><span class='Ref_to_Macro'>FPeq</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1149"><span class='Ref_To_Local'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN93"><span class='Ref_to_Member'>C</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1151"><span class='Ref_To_Local'>k</span></a> <span class='Operator'>* </span><a href="geo_ops.c.html#LN1150"><span class='Ref_To_Local'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN93"><span class='Ref_to_Member'>C</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end line_eq &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/*---------------------------------------------------------- 
 *  Line arithmetic routines. 
 *---------------------------------------------------------*/ 
</span> 
<span class='Comment_Multi_Line'>/* line_distance() 
 * Distance between two lines. 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1176"></a><span class='Declare_Function'>line_distance</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1178"></a>    <a href="../../../include/utils/geo_decls.h.html#LN89"><span class='Ref_to_Typedef'>LINE</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>l1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN155"><span class='Ref_to_Macro'>PG_GETARG_LINE_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1179"></a>    <a href="../../../include/utils/geo_decls.h.html#LN89"><span class='Ref_to_Typedef'>LINE</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>l2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN155"><span class='Ref_to_Macro'>PG_GETARG_LINE_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1180"></a>    <a href="../../../include/c.h.html#LN380"><span class='Ref_to_Typedef'>float8</span></a>      <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span><a name="LN1181"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>tmp</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/postgres.h.html#LN398"><span class='Ref_to_Macro'>DatumGetBool</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN585"><span class='Ref_to_Macro'>DirectFunctionCall2</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1104"><span class='Ref_to_Func'>line_parallel</span></a><span class='Delimiter'>, 
</span>                                          <a href="../../../include/utils/geo_decls.h.html#LN154"><span class='Ref_to_Macro'>LinePGetDatum</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1178"><span class='Ref_To_Local'>l1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                          <a href="../../../include/utils/geo_decls.h.html#LN154"><span class='Ref_to_Macro'>LinePGetDatum</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1179"><span class='Ref_To_Local'>l2</span></a><span class='Parentheses'>))))</span> 
        <a href="../../../include/fmgr.h.html#LN325"><span class='Ref_to_Macro'>PG_RETURN_FLOAT8</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Operator'>.</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN35"><span class='Ref_to_Macro'>FPzero</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1178"><span class='Ref_To_Local'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN92"><span class='Ref_to_Member'>B</span></a><span class='Parentheses'>))</span>          <span class='Comment_Single_Line'>/* vertical? */ 
</span>        <a href="../../../include/fmgr.h.html#LN325"><span class='Ref_to_Macro'>PG_RETURN_FLOAT8</span></a><span class='Parentheses'>(</span>fabs<span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1178"><span class='Ref_To_Local'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN93"><span class='Ref_to_Member'>C</span></a> <span class='Operator'>- </span><a href="geo_ops.c.html#LN1179"><span class='Ref_To_Local'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN93"><span class='Ref_to_Member'>C</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN1181"><span class='Ref_To_Local'>tmp</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN57"><span class='Ref_to_Proto'>point_construct</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Operator'>.</span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1178"><span class='Ref_To_Local'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN93"><span class='Ref_to_Member'>C</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN1180"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN75"><span class='Ref_to_Proto'>dist_pl_internal</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1181"><span class='Ref_To_Local'>tmp</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1179"><span class='Ref_To_Local'>l2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN325"><span class='Ref_to_Macro'>PG_RETURN_FLOAT8</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1180"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* line_interpt() 
 * Point where two lines l1, l2 intersect (if any) 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1198"></a><span class='Declare_Function'>line_interpt</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1200"></a>    <a href="../../../include/utils/geo_decls.h.html#LN89"><span class='Ref_to_Typedef'>LINE</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>l1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN155"><span class='Ref_to_Macro'>PG_GETARG_LINE_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1201"></a>    <a href="../../../include/utils/geo_decls.h.html#LN89"><span class='Ref_to_Typedef'>LINE</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>l2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN155"><span class='Ref_to_Macro'>PG_GETARG_LINE_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1202"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN1202"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN77"><span class='Ref_to_Proto'>line_interpt_internal</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1200"><span class='Ref_To_Local'>l1</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1201"><span class='Ref_To_Local'>l2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1202"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="../../../include/fmgr.h.html#LN304"><span class='Ref_to_Macro'>PG_RETURN_NULL</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="../../../include/utils/geo_decls.h.html#LN139"><span class='Ref_to_Macro'>PG_RETURN_POINT_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1202"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Internal version of line_interpt 
 * 
 * returns a NULL pointer if no intersection point 
 */ 
</span><span class='Keyword'>static </span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>* 
</span><a name="LN1217"></a><span class='Declare_Function'>line_interpt_internal</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN89"><span class='Ref_to_Typedef'>LINE</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>l1</span><span class='Delimiter'>, </span><a href="../../../include/utils/geo_decls.h.html#LN89"><span class='Ref_to_Typedef'>LINE</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>l2</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1219"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span><a name="LN1220"></a>    <span class='Keyword'>double</span>      <span class='Declare_Local'>x</span><span class='Delimiter'>, 
</span><a name="LN1221"></a>                <span class='Declare_Local'>y</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * NOTE: if the lines are identical then we will find they are parallel 
     * and report "no intersection".  This is a little weird, but since 
     * there's no *unique* intersection, maybe it's appropriate behavior. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN398"><span class='Ref_to_Macro'>DatumGetBool</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN585"><span class='Ref_to_Macro'>DirectFunctionCall2</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1104"><span class='Ref_to_Func'>line_parallel</span></a><span class='Delimiter'>, 
</span>                                         <a href="../../../include/utils/geo_decls.h.html#LN154"><span class='Ref_to_Macro'>LinePGetDatum</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1217"><span class='Ref_to_Parameter'>l1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                         <a href="../../../include/utils/geo_decls.h.html#LN154"><span class='Ref_to_Macro'>LinePGetDatum</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1217"><span class='Ref_to_Parameter'>l2</span></a><span class='Parentheses'>))))</span> 
        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN35"><span class='Ref_to_Macro'>FPzero</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1217"><span class='Ref_to_Parameter'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN92"><span class='Ref_to_Member'>B</span></a><span class='Parentheses'>))</span>          <span class='Comment_Single_Line'>/* l1 vertical? */ 
</span>    <span class='Delimiter'>{ 
</span>        <a href="geo_ops.c.html#LN1220"><span class='Ref_To_Local'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN1217"><span class='Ref_to_Parameter'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN93"><span class='Ref_to_Member'>C</span></a><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN1221"><span class='Ref_To_Local'>y</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1217"><span class='Ref_to_Parameter'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN91"><span class='Ref_to_Member'>A</span></a> <span class='Operator'>* </span><a href="geo_ops.c.html#LN1220"><span class='Ref_To_Local'>x</span></a> <span class='Operator'>+ </span><a href="geo_ops.c.html#LN1217"><span class='Ref_to_Parameter'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN93"><span class='Ref_to_Member'>C</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN35"><span class='Ref_to_Macro'>FPzero</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1217"><span class='Ref_to_Parameter'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN92"><span class='Ref_to_Member'>B</span></a><span class='Parentheses'>))</span>     <span class='Comment_Single_Line'>/* l2 vertical? */ 
</span>    <span class='Delimiter'>{ 
</span>        <a href="geo_ops.c.html#LN1220"><span class='Ref_To_Local'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN1217"><span class='Ref_to_Parameter'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN93"><span class='Ref_to_Member'>C</span></a><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN1221"><span class='Ref_To_Local'>y</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1217"><span class='Ref_to_Parameter'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN91"><span class='Ref_to_Member'>A</span></a> <span class='Operator'>* </span><a href="geo_ops.c.html#LN1220"><span class='Ref_To_Local'>x</span></a> <span class='Operator'>+ </span><a href="geo_ops.c.html#LN1217"><span class='Ref_to_Parameter'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN93"><span class='Ref_to_Member'>C</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="geo_ops.c.html#LN1220"><span class='Ref_To_Local'>x</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1217"><span class='Ref_to_Parameter'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN93"><span class='Ref_to_Member'>C</span></a> <span class='Operator'>- </span><a href="geo_ops.c.html#LN1217"><span class='Ref_to_Parameter'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN93"><span class='Ref_to_Member'>C</span></a><span class='Parentheses'>) </span><span class='Operator'>/ </span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1217"><span class='Ref_to_Parameter'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN91"><span class='Ref_to_Member'>A</span></a> <span class='Operator'>- </span><a href="geo_ops.c.html#LN1217"><span class='Ref_to_Parameter'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN91"><span class='Ref_to_Member'>A</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN1221"><span class='Ref_To_Local'>y</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1217"><span class='Ref_to_Parameter'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN91"><span class='Ref_to_Member'>A</span></a> <span class='Operator'>* </span><a href="geo_ops.c.html#LN1220"><span class='Ref_To_Local'>x</span></a> <span class='Operator'>+ </span><a href="geo_ops.c.html#LN1217"><span class='Ref_to_Parameter'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN93"><span class='Ref_to_Member'>C</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="geo_ops.c.html#LN1219"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN57"><span class='Ref_to_Proto'>point_construct</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1220"><span class='Ref_To_Local'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1221"><span class='Ref_To_Local'>y</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<span class='Directive'>#ifdef</span> GEODEBUG 
    <a href="../../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span><span class='String'>"line_interpt- lines are A=%.*g, B=%.*g, C=%.*g, A=%.*g, B=%.*g, C=%.*g\n"</span><span class='Delimiter'>, 
</span>           DBL_DIG<span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1217"><span class='Ref_to_Parameter'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN91"><span class='Ref_to_Member'>A</span></a><span class='Delimiter'>, </span>DBL_DIG<span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1217"><span class='Ref_to_Parameter'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN92"><span class='Ref_to_Member'>B</span></a><span class='Delimiter'>, </span>DBL_DIG<span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1217"><span class='Ref_to_Parameter'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN93"><span class='Ref_to_Member'>C</span></a><span class='Delimiter'>, </span>DBL_DIG<span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1217"><span class='Ref_to_Parameter'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN91"><span class='Ref_to_Member'>A</span></a><span class='Delimiter'>, </span>DBL_DIG<span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1217"><span class='Ref_to_Parameter'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN92"><span class='Ref_to_Member'>B</span></a><span class='Delimiter'>, </span>DBL_DIG<span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1217"><span class='Ref_to_Parameter'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN93"><span class='Ref_to_Member'>C</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span><span class='String'>"line_interpt- lines intersect at (%.*g,%.*g)\n"</span><span class='Delimiter'>, </span>DBL_DIG<span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1220"><span class='Ref_To_Local'>x</span></a><span class='Delimiter'>, </span>DBL_DIG<span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1221"><span class='Ref_To_Local'>y</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
 
    <span class='Control'>return</span> <a href="geo_ops.c.html#LN1219"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end line_interpt_internal &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/*********************************************************************** 
 ** 
 **     Routines for 2D paths (sequences of line segments, also 
 **             called `polylines'). 
 ** 
 **             This is not a general package for geometric paths, 
 **             which of course include polygons; the emphasis here 
 **             is on (for example) usefulness in wire layout. 
 ** 
 ***********************************************************************/ 
</span> 
<span class='Comment_Multi_Line'>/*---------------------------------------------------------- 
 *  String to path / path to string conversion. 
 *      External format: 
 *              "((xcoord, ycoord),... )" 
 *              "[(xcoord, ycoord),... ]" 
 *              "(xcoord, ycoord),... " 
 *              "[xcoord, ycoord,... ]" 
 *      Also support older format: 
 *              "(closed, npts, xcoord, ycoord,... )" 
 *---------------------------------------------------------*/ 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1283"></a><span class='Declare_Function'>path_area</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1285"></a>    <a href="../../../include/utils/geo_decls.h.html#LN76"><span class='Ref_to_Typedef'>PATH</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>path</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN149"><span class='Ref_to_Macro'>PG_GETARG_PATH_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1286"></a>    <span class='Keyword'>double</span>      <span class='Declare_Local'>area</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Operator'>.</span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN1287"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>, 
</span><a name="LN1288"></a>                <span class='Declare_Local'>j</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="geo_ops.c.html#LN1285"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN80"><span class='Ref_to_Member'>closed</span></a><span class='Parentheses'>) 
</span>        <a href="../../../include/fmgr.h.html#LN304"><span class='Ref_to_Macro'>PG_RETURN_NULL</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1287"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN1287"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN1285"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN79"><span class='Ref_to_Member'>npts</span></a><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN1287"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="geo_ops.c.html#LN1288"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1287"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>) </span><span class='Operator'>% </span><a href="geo_ops.c.html#LN1285"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN79"><span class='Ref_to_Member'>npts</span></a><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN1286"><span class='Ref_To_Local'>area</span></a> <span class='Operator'>+= </span><a href="geo_ops.c.html#LN1285"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN1287"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>* </span><a href="geo_ops.c.html#LN1285"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN1288"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN1286"><span class='Ref_To_Local'>area</span></a> <span class='Operator'>-= </span><a href="geo_ops.c.html#LN1285"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN1287"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>* </span><a href="geo_ops.c.html#LN1285"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN1288"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="geo_ops.c.html#LN1286"><span class='Ref_To_Local'>area</span></a> <span class='Operator'>*= </span><span class='Number'>0</span><span class='Operator'>.</span><span class='Number'>5</span><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN325"><span class='Ref_to_Macro'>PG_RETURN_FLOAT8</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1286"><span class='Ref_To_Local'>area</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Operator'>.</span><span class='Number'>0</span> <span class='Operator'>? -</span><a href="geo_ops.c.html#LN1286"><span class='Ref_To_Local'>area</span></a> <span class='Operator'>: </span><a href="geo_ops.c.html#LN1286"><span class='Ref_To_Local'>area</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end path_area &raquo; </span> 
 
 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1306"></a><span class='Declare_Function'>path_in</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1308"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>str</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN241"><span class='Ref_to_Macro'>PG_GETARG_CSTRING</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1309"></a>    <a href="../../../include/utils/geo_decls.h.html#LN76"><span class='Ref_to_Typedef'>PATH</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>path</span><span class='Delimiter'>; 
</span><a name="LN1310"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>isopen</span><span class='Delimiter'>; 
</span><a name="LN1311"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>s</span><span class='Delimiter'>; 
</span><a name="LN1312"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>npts</span><span class='Delimiter'>; 
</span><a name="LN1313"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>size</span><span class='Delimiter'>; 
</span><a name="LN1314"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>base_size</span><span class='Delimiter'>; 
</span><a name="LN1315"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>depth</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="geo_ops.c.html#LN1312"><span class='Ref_To_Local'>npts</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN65"><span class='Ref_to_Proto'>pair_count</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1308"><span class='Ref_To_Local'>str</span></a><span class='Delimiter'>, </span><span class='String'>','</span><span class='Parentheses'>))</span> <span class='Operator'>&LT;= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INVALID_TEXT_REPRESENTATION<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"invalid input syntax for type %s: \"%s\""</span><span class='Delimiter'>, 
</span>                        <span class='String'>"path"</span><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1308"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN1311"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN1308"><span class='Ref_To_Local'>str</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>while</span> <span class='Parentheses'>(</span>isspace<span class='Parentheses'>((</span><span class='Keyword'>unsigned char</span><span class='Parentheses'>) </span><span class='Operator'>*</span><a href="geo_ops.c.html#LN1311"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>))</span> 
        <a href="geo_ops.c.html#LN1311"><span class='Ref_To_Local'>s</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* skip single leading paren */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>((</span><span class='Operator'>*</span><a href="geo_ops.c.html#LN1311"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>== </span><a href="../../../test/regress/regress.c.html#LN41"><span class='Ref_to_Const'>LDELIM</span></a><span class='Parentheses'>)</span> <span class='Operator'>&& </span><span class='Parentheses'>(</span>strrchr<span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1311"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="../../../test/regress/regress.c.html#LN41"><span class='Ref_to_Const'>LDELIM</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><a href="geo_ops.c.html#LN1311"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="geo_ops.c.html#LN1311"><span class='Ref_To_Local'>s</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN1315"><span class='Ref_To_Local'>depth</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="geo_ops.c.html#LN1314"><span class='Ref_To_Local'>base_size</span></a> <span class='Operator'>= </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1309"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="geo_ops.c.html#LN1312"><span class='Ref_To_Local'>npts</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN1313"><span class='Ref_To_Local'>size</span></a> <span class='Operator'>= </span><a href="../../../include/c.h.html#LN554"><span class='Ref_to_Macro'>offsetof</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN76"><span class='Ref_to_Typedef'>PATH</span></a><span class='Delimiter'>, </span>p<span class='Parentheses'>) </span><span class='Operator'>+</span><a href="geo_ops.c.html#LN1314"><span class='Ref_To_Local'>base_size</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Check for integer overflow */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1314"><span class='Ref_To_Local'>base_size</span></a> <span class='Operator'>/ </span><a href="geo_ops.c.html#LN1312"><span class='Ref_To_Local'>npts</span></a> <span class='Operator'>!= </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1309"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Parentheses'>) </span><span class='Operator'>|| </span><a href="geo_ops.c.html#LN1313"><span class='Ref_To_Local'>size</span></a> <span class='Operator'>&LT;= </span><a href="geo_ops.c.html#LN1314"><span class='Ref_To_Local'>base_size</span></a><span class='Parentheses'>)</span> 
        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_PROGRAM_LIMIT_EXCEEDED<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"too many points requested"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN1309"><span class='Ref_To_Local'>path</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN76"><span class='Ref_to_Typedef'>PATH</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1313"><span class='Ref_To_Local'>size</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/postgres.h.html#LN327"><span class='Ref_to_Macro'>SET_VARSIZE</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1309"><span class='Ref_To_Local'>path</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1313"><span class='Ref_To_Local'>size</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN1309"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN79"><span class='Ref_to_Member'>npts</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN1312"><span class='Ref_To_Local'>npts</span></a><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN66"><span class='Ref_to_Proto'>path_decode</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1311"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1312"><span class='Ref_To_Local'>npts</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1309"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN1310"><span class='Ref_To_Local'>isopen</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN1311"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><span class='String'>"path"</span><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1308"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1315"><span class='Ref_To_Local'>depth</span></a> <span class='Operator'>&GT;= </span><span class='Number'>1</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="geo_ops.c.html#LN1311"><span class='Ref_To_Local'>s</span></a><span class='Operator'>++ != </span><a href="../../../test/regress/regress.c.html#LN42"><span class='Ref_to_Const'>RDELIM</span></a><span class='Parentheses'>) 
</span>            <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INVALID_TEXT_REPRESENTATION<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"invalid input syntax for type %s: \"%s\""</span><span class='Delimiter'>, 
</span>                            <span class='String'>"path"</span><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1308"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        <span class='Control'>while</span> <span class='Parentheses'>(</span>isspace<span class='Parentheses'>((</span><span class='Keyword'>unsigned char</span><span class='Parentheses'>) </span><span class='Operator'>*</span><a href="geo_ops.c.html#LN1311"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>))</span> 
            <a href="geo_ops.c.html#LN1311"><span class='Ref_To_Local'>s</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="geo_ops.c.html#LN1311"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>!= </span><span class='String'>'\0'</span><span class='Parentheses'>) 
</span>        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INVALID_TEXT_REPRESENTATION<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"invalid input syntax for type %s: \"%s\""</span><span class='Delimiter'>, 
</span>                        <span class='String'>"path"</span><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1308"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN1309"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN80"><span class='Ref_to_Member'>closed</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Operator'>!</span><a href="geo_ops.c.html#LN1310"><span class='Ref_To_Local'>isopen</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* prevent instability in unused pad bytes */ 
</span>    <a href="geo_ops.c.html#LN1309"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN81"><span class='Ref_to_Member'>dummy</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/geo_decls.h.html#LN151"><span class='Ref_to_Macro'>PG_RETURN_PATH_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1309"><span class='Ref_To_Local'>path</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end path_in &raquo; </span> 
 
 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1375"></a><span class='Declare_Function'>path_out</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1377"></a>    <a href="../../../include/utils/geo_decls.h.html#LN76"><span class='Ref_to_Typedef'>PATH</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>path</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN149"><span class='Ref_to_Macro'>PG_GETARG_PATH_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN321"><span class='Ref_to_Macro'>PG_RETURN_CSTRING</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN69"><span class='Ref_to_Proto'>path_encode</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1377"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN80"><span class='Ref_to_Member'>closed</span></a> <span class='Operator'>? </span><a href="geo_ops.c.html#LN37"><span class='Ref_to_EnumConst'>PATH_CLOSED</span></a> <span class='Operator'>: </span><a href="geo_ops.c.html#LN37"><span class='Ref_to_EnumConst'>PATH_OPEN</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1377"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN79"><span class='Ref_to_Member'>npts</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1377"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 *      path_recv           - converts external binary format to path 
 * 
 * External representation is closed flag (a boolean byte), int32 number 
 * of points, and the points. 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1389"></a><span class='Declare_Function'>path_recv</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1391"></a>    <a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a><span class='Parentheses'>) </span><a href="../../../include/fmgr.h.html#LN240"><span class='Ref_to_Macro'>PG_GETARG_POINTER</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1392"></a>    <a href="../../../include/utils/geo_decls.h.html#LN76"><span class='Ref_to_Typedef'>PATH</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>path</span><span class='Delimiter'>; 
</span><a name="LN1393"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>closed</span><span class='Delimiter'>; 
</span><a name="LN1394"></a>    <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>npts</span><span class='Delimiter'>; 
</span><a name="LN1395"></a>    <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN1396"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>size</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN1393"><span class='Ref_To_Local'>closed</span></a> <span class='Operator'>= </span><a href="../../../include/libpq/pqformat.h.html#LN37"><span class='Ref_to_Proto'>pq_getmsgbyte</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1391"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN1394"><span class='Ref_To_Local'>npts</span></a> <span class='Operator'>= </span><a href="../../../include/libpq/pqformat.h.html#LN38"><span class='Ref_to_Proto'>pq_getmsgint</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1391"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1394"><span class='Ref_To_Local'>npts</span></a> <span class='Operator'>&LT;= </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="geo_ops.c.html#LN1394"><span class='Ref_To_Local'>npts</span></a> <span class='Operator'>&GT;= </span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a><span class='Parentheses'>)</span> <span class='Parentheses'>((</span>INT_MAX <span class='Operator'>- </span><a href="../../../include/c.h.html#LN554"><span class='Ref_to_Macro'>offsetof</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN76"><span class='Ref_to_Typedef'>PATH</span></a><span class='Delimiter'>, </span>p<span class='Parentheses'>))</span> <span class='Operator'>/ </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a><span class='Parentheses'>)))</span> 
        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INVALID_BINARY_REPRESENTATION<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>             <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"invalid number of points in external \"path\" value"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN1396"><span class='Ref_To_Local'>size</span></a> <span class='Operator'>= </span><a href="../../../include/c.h.html#LN554"><span class='Ref_to_Macro'>offsetof</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN76"><span class='Ref_to_Typedef'>PATH</span></a><span class='Delimiter'>, </span>p<span class='Parentheses'>) </span><span class='Operator'>+</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1392"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="geo_ops.c.html#LN1394"><span class='Ref_To_Local'>npts</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN1392"><span class='Ref_To_Local'>path</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN76"><span class='Ref_to_Typedef'>PATH</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1396"><span class='Ref_To_Local'>size</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/postgres.h.html#LN327"><span class='Ref_to_Macro'>SET_VARSIZE</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1392"><span class='Ref_To_Local'>path</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1396"><span class='Ref_To_Local'>size</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN1392"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN79"><span class='Ref_to_Member'>npts</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN1394"><span class='Ref_To_Local'>npts</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN1392"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN80"><span class='Ref_to_Member'>closed</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1393"><span class='Ref_To_Local'>closed</span></a> <span class='Operator'>? </span><span class='Number'>1</span> <span class='Operator'>: </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* prevent instability in unused pad bytes */ 
</span>    <a href="geo_ops.c.html#LN1392"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN81"><span class='Ref_to_Member'>dummy</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1395"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN1395"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN1394"><span class='Ref_To_Local'>npts</span></a><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN1395"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="geo_ops.c.html#LN1392"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN1395"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="../../../include/libpq/pqformat.h.html#LN41"><span class='Ref_to_Proto'>pq_getmsgfloat8</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1391"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN1392"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN1395"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="../../../include/libpq/pqformat.h.html#LN41"><span class='Ref_to_Proto'>pq_getmsgfloat8</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1391"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../../include/utils/geo_decls.h.html#LN151"><span class='Ref_to_Macro'>PG_RETURN_PATH_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1392"><span class='Ref_To_Local'>path</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end path_recv &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 *      path_send           - converts path to binary format 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1427"></a><span class='Declare_Function'>path_send</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1429"></a>    <a href="../../../include/utils/geo_decls.h.html#LN76"><span class='Ref_to_Typedef'>PATH</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>path</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN149"><span class='Ref_to_Macro'>PG_GETARG_PATH_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1430"></a>    <a href="../../../include/lib/stringinfo.h.html#LN34"><span class='Ref_to_Struct'>StringInfoData</span></a> <span class='Declare_Local'>buf</span><span class='Delimiter'>; 
</span><a name="LN1431"></a>    <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/libpq/pqformat.h.html#LN31"><span class='Ref_to_Proto'>pq_begintypsend</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN1430"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/libpq/pqformat.h.html#LN18"><span class='Ref_to_Proto'>pq_sendbyte</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN1430"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1429"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN80"><span class='Ref_to_Member'>closed</span></a> <span class='Operator'>? </span><span class='Number'>1</span> <span class='Operator'>: </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/libpq/pqformat.h.html#LN25"><span class='Ref_to_Proto'>pq_sendint</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN1430"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1429"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN79"><span class='Ref_to_Member'>npts</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1431"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN1431"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN1429"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN79"><span class='Ref_to_Member'>npts</span></a><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN1431"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../../include/libpq/pqformat.h.html#LN28"><span class='Ref_to_Proto'>pq_sendfloat8</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN1430"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1429"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN1431"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../../include/libpq/pqformat.h.html#LN28"><span class='Ref_to_Proto'>pq_sendfloat8</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN1430"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1429"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN1431"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="../../../include/fmgr.h.html#LN328"><span class='Ref_to_Macro'>PG_RETURN_BYTEA_P</span></a><span class='Parentheses'>(</span><a href="../../../include/libpq/pqformat.h.html#LN32"><span class='Ref_to_Proto'>pq_endtypsend</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN1430"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/*---------------------------------------------------------- 
 *  Relational operators. 
 *      These are based on the path cardinality, 
 *      as stupid as that sounds. 
 * 
 *      Better relops and access methods coming soon. 
 *---------------------------------------------------------*/ 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1454"></a><span class='Declare_Function'>path_n_lt</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1456"></a>    <a href="../../../include/utils/geo_decls.h.html#LN76"><span class='Ref_to_Typedef'>PATH</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>p1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN149"><span class='Ref_to_Macro'>PG_GETARG_PATH_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1457"></a>    <a href="../../../include/utils/geo_decls.h.html#LN76"><span class='Ref_to_Typedef'>PATH</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>p2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN149"><span class='Ref_to_Macro'>PG_GETARG_PATH_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1456"><span class='Ref_To_Local'>p1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN79"><span class='Ref_to_Member'>npts</span></a> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN1457"><span class='Ref_To_Local'>p2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN79"><span class='Ref_to_Member'>npts</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1463"></a><span class='Declare_Function'>path_n_gt</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1465"></a>    <a href="../../../include/utils/geo_decls.h.html#LN76"><span class='Ref_to_Typedef'>PATH</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>p1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN149"><span class='Ref_to_Macro'>PG_GETARG_PATH_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1466"></a>    <a href="../../../include/utils/geo_decls.h.html#LN76"><span class='Ref_to_Typedef'>PATH</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>p2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN149"><span class='Ref_to_Macro'>PG_GETARG_PATH_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1465"><span class='Ref_To_Local'>p1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN79"><span class='Ref_to_Member'>npts</span></a> <span class='Operator'>&GT; </span><a href="geo_ops.c.html#LN1466"><span class='Ref_To_Local'>p2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN79"><span class='Ref_to_Member'>npts</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1472"></a><span class='Declare_Function'>path_n_eq</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1474"></a>    <a href="../../../include/utils/geo_decls.h.html#LN76"><span class='Ref_to_Typedef'>PATH</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>p1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN149"><span class='Ref_to_Macro'>PG_GETARG_PATH_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1475"></a>    <a href="../../../include/utils/geo_decls.h.html#LN76"><span class='Ref_to_Typedef'>PATH</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>p2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN149"><span class='Ref_to_Macro'>PG_GETARG_PATH_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1474"><span class='Ref_To_Local'>p1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN79"><span class='Ref_to_Member'>npts</span></a> <span class='Operator'>== </span><a href="geo_ops.c.html#LN1475"><span class='Ref_To_Local'>p2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN79"><span class='Ref_to_Member'>npts</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1481"></a><span class='Declare_Function'>path_n_le</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1483"></a>    <a href="../../../include/utils/geo_decls.h.html#LN76"><span class='Ref_to_Typedef'>PATH</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>p1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN149"><span class='Ref_to_Macro'>PG_GETARG_PATH_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1484"></a>    <a href="../../../include/utils/geo_decls.h.html#LN76"><span class='Ref_to_Typedef'>PATH</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>p2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN149"><span class='Ref_to_Macro'>PG_GETARG_PATH_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1483"><span class='Ref_To_Local'>p1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN79"><span class='Ref_to_Member'>npts</span></a> <span class='Operator'>&LT;= </span><a href="geo_ops.c.html#LN1484"><span class='Ref_To_Local'>p2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN79"><span class='Ref_to_Member'>npts</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1490"></a><span class='Declare_Function'>path_n_ge</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1492"></a>    <a href="../../../include/utils/geo_decls.h.html#LN76"><span class='Ref_to_Typedef'>PATH</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>p1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN149"><span class='Ref_to_Macro'>PG_GETARG_PATH_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1493"></a>    <a href="../../../include/utils/geo_decls.h.html#LN76"><span class='Ref_to_Typedef'>PATH</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>p2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN149"><span class='Ref_to_Macro'>PG_GETARG_PATH_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1492"><span class='Ref_To_Local'>p1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN79"><span class='Ref_to_Member'>npts</span></a> <span class='Operator'>&GT;= </span><a href="geo_ops.c.html#LN1493"><span class='Ref_To_Local'>p2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN79"><span class='Ref_to_Member'>npts</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/*---------------------------------------------------------- 
 * Conversion operators. 
 *---------------------------------------------------------*/ 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1503"></a><span class='Declare_Function'>path_isclosed</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1505"></a>    <a href="../../../include/utils/geo_decls.h.html#LN76"><span class='Ref_to_Typedef'>PATH</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>path</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN149"><span class='Ref_to_Macro'>PG_GETARG_PATH_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1505"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN80"><span class='Ref_to_Member'>closed</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1511"></a><span class='Declare_Function'>path_isopen</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1513"></a>    <a href="../../../include/utils/geo_decls.h.html#LN76"><span class='Ref_to_Typedef'>PATH</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>path</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN149"><span class='Ref_to_Macro'>PG_GETARG_PATH_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><span class='Operator'>!</span><a href="geo_ops.c.html#LN1513"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN80"><span class='Ref_to_Member'>closed</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1519"></a><span class='Declare_Function'>path_npoints</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1521"></a>    <a href="../../../include/utils/geo_decls.h.html#LN76"><span class='Ref_to_Typedef'>PATH</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>path</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN149"><span class='Ref_to_Macro'>PG_GETARG_PATH_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN313"><span class='Ref_to_Macro'>PG_RETURN_INT32</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1521"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN79"><span class='Ref_to_Member'>npts</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1528"></a><span class='Declare_Function'>path_close</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1530"></a>    <a href="../../../include/utils/geo_decls.h.html#LN76"><span class='Ref_to_Typedef'>PATH</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>path</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN150"><span class='Ref_to_Macro'>PG_GETARG_PATH_P_COPY</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN1530"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN80"><span class='Ref_to_Member'>closed</span></a> <span class='Operator'>= </span><span class='Boolean'>TRUE</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/geo_decls.h.html#LN151"><span class='Ref_to_Macro'>PG_RETURN_PATH_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1530"><span class='Ref_To_Local'>path</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1538"></a><span class='Declare_Function'>path_open</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1540"></a>    <a href="../../../include/utils/geo_decls.h.html#LN76"><span class='Ref_to_Typedef'>PATH</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>path</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN150"><span class='Ref_to_Macro'>PG_GETARG_PATH_P_COPY</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN1540"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN80"><span class='Ref_to_Member'>closed</span></a> <span class='Operator'>= </span><span class='Boolean'>FALSE</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/geo_decls.h.html#LN151"><span class='Ref_to_Macro'>PG_RETURN_PATH_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1540"><span class='Ref_To_Local'>path</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/* path_inter - 
 *      Does p1 intersect p2 at any point? 
 *      Use bounding boxes for a quick (O(n)) check, then do a 
 *      O(n^2) iterative edge check. 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1554"></a><span class='Declare_Function'>path_inter</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1556"></a>    <a href="../../../include/utils/geo_decls.h.html#LN76"><span class='Ref_to_Typedef'>PATH</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>p1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN149"><span class='Ref_to_Macro'>PG_GETARG_PATH_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1557"></a>    <a href="../../../include/utils/geo_decls.h.html#LN76"><span class='Ref_to_Typedef'>PATH</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>p2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN149"><span class='Ref_to_Macro'>PG_GETARG_PATH_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1558"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>         <span class='Declare_Local'>b1</span><span class='Delimiter'>, 
</span><a name="LN1559"></a>                <span class='Declare_Local'>b2</span><span class='Delimiter'>; 
</span><a name="LN1560"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>, 
</span><a name="LN1561"></a>                <span class='Declare_Local'>j</span><span class='Delimiter'>; 
</span><a name="LN1562"></a>    <a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a>        <span class='Declare_Local'>seg1</span><span class='Delimiter'>, 
</span><a name="LN1563"></a>                <span class='Declare_Local'>seg2</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1556"><span class='Ref_To_Local'>p1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN79"><span class='Ref_to_Member'>npts</span></a> <span class='Operator'>&LT;= </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="geo_ops.c.html#LN1557"><span class='Ref_To_Local'>p2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN79"><span class='Ref_to_Member'>npts</span></a> <span class='Operator'>&LT;= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN1558"><span class='Ref_To_Local'>b1</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN1558"><span class='Ref_To_Local'>b1</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN1556"><span class='Ref_To_Local'>p1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN1558"><span class='Ref_To_Local'>b1</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN1558"><span class='Ref_To_Local'>b1</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN1556"><span class='Ref_To_Local'>p1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1560"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN1560"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN1556"><span class='Ref_To_Local'>p1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN79"><span class='Ref_to_Member'>npts</span></a><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN1560"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="geo_ops.c.html#LN1558"><span class='Ref_To_Local'>b1</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="../../../interfaces/ecpg/pgtypeslib/numeric.c.html#LN10"><span class='Ref_to_Macro'>Max</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1556"><span class='Ref_To_Local'>p1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN1560"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1558"><span class='Ref_To_Local'>b1</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN1558"><span class='Ref_To_Local'>b1</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="../../../interfaces/ecpg/pgtypeslib/numeric.c.html#LN10"><span class='Ref_to_Macro'>Max</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1556"><span class='Ref_To_Local'>p1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN1560"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1558"><span class='Ref_To_Local'>b1</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN1558"><span class='Ref_To_Local'>b1</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="../../../interfaces/ecpg/pgtypeslib/numeric.c.html#LN11"><span class='Ref_to_Macro'>Min</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1556"><span class='Ref_To_Local'>p1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN1560"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1558"><span class='Ref_To_Local'>b1</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN1558"><span class='Ref_To_Local'>b1</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="../../../interfaces/ecpg/pgtypeslib/numeric.c.html#LN11"><span class='Ref_to_Macro'>Min</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1556"><span class='Ref_To_Local'>p1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN1560"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1558"><span class='Ref_To_Local'>b1</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="geo_ops.c.html#LN1559"><span class='Ref_To_Local'>b2</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN1559"><span class='Ref_To_Local'>b2</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN1557"><span class='Ref_To_Local'>p2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN1559"><span class='Ref_To_Local'>b2</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN1559"><span class='Ref_To_Local'>b2</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN1557"><span class='Ref_To_Local'>p2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1560"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN1560"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN1557"><span class='Ref_To_Local'>p2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN79"><span class='Ref_to_Member'>npts</span></a><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN1560"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="geo_ops.c.html#LN1559"><span class='Ref_To_Local'>b2</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="../../../interfaces/ecpg/pgtypeslib/numeric.c.html#LN10"><span class='Ref_to_Macro'>Max</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1557"><span class='Ref_To_Local'>p2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN1560"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1559"><span class='Ref_To_Local'>b2</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN1559"><span class='Ref_To_Local'>b2</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="../../../interfaces/ecpg/pgtypeslib/numeric.c.html#LN10"><span class='Ref_to_Macro'>Max</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1557"><span class='Ref_To_Local'>p2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN1560"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1559"><span class='Ref_To_Local'>b2</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN1559"><span class='Ref_To_Local'>b2</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="../../../interfaces/ecpg/pgtypeslib/numeric.c.html#LN11"><span class='Ref_to_Macro'>Min</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1557"><span class='Ref_To_Local'>p2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN1560"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1559"><span class='Ref_To_Local'>b2</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN1559"><span class='Ref_To_Local'>b2</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="../../../interfaces/ecpg/pgtypeslib/numeric.c.html#LN11"><span class='Ref_to_Macro'>Min</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1557"><span class='Ref_To_Local'>p2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN1560"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1559"><span class='Ref_To_Local'>b2</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="geo_ops.c.html#LN45"><span class='Ref_to_Proto'>box_ov</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN1558"><span class='Ref_To_Local'>b1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN1559"><span class='Ref_To_Local'>b2</span></a><span class='Parentheses'>))</span> 
        <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* pairwise check lseg intersections */ 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1560"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN1560"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN1556"><span class='Ref_To_Local'>p1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN79"><span class='Ref_to_Member'>npts</span></a><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN1560"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN1592"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>iprev</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1560"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <a href="geo_ops.c.html#LN1592"><span class='Ref_To_Local'>iprev</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN1560"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="geo_ops.c.html#LN1556"><span class='Ref_To_Local'>p1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN80"><span class='Ref_to_Member'>closed</span></a><span class='Parentheses'>) 
</span>                <span class='Control'>continue</span><span class='Delimiter'>; 
</span>            <a href="geo_ops.c.html#LN1592"><span class='Ref_To_Local'>iprev</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN1556"><span class='Ref_To_Local'>p1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN79"><span class='Ref_to_Member'>npts</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* include the closure segment */ 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1561"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN1561"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN1557"><span class='Ref_To_Local'>p2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN79"><span class='Ref_to_Member'>npts</span></a><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN1561"><span class='Ref_To_Local'>j</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN1605"></a>            <span class='Keyword'>int</span>         <span class='Declare_Local'>jprev</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1561"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                <a href="geo_ops.c.html#LN1605"><span class='Ref_To_Local'>jprev</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN1561"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="geo_ops.c.html#LN1557"><span class='Ref_To_Local'>p2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN80"><span class='Ref_to_Member'>closed</span></a><span class='Parentheses'>) 
</span>                    <span class='Control'>continue</span><span class='Delimiter'>; 
</span>                <a href="geo_ops.c.html#LN1605"><span class='Ref_To_Local'>jprev</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN1557"><span class='Ref_To_Local'>p2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN79"><span class='Ref_to_Member'>npts</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>;</span>   <span class='Comment_Single_Line'>/* include the closure segment */ 
</span>            <span class='Delimiter'>} 
</span> 
            <a href="geo_ops.c.html#LN70"><span class='Ref_to_Proto'>statlseg_construct</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN1562"><span class='Ref_To_Local'>seg1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN1556"><span class='Ref_To_Local'>p1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN1592"><span class='Ref_To_Local'>iprev</span></a><span class='Delimiter'>], </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN1556"><span class='Ref_To_Local'>p1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN1560"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="geo_ops.c.html#LN70"><span class='Ref_to_Proto'>statlseg_construct</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN1563"><span class='Ref_To_Local'>seg2</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN1557"><span class='Ref_To_Local'>p2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN1605"><span class='Ref_To_Local'>jprev</span></a><span class='Delimiter'>], </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN1557"><span class='Ref_To_Local'>p2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN1561"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN52"><span class='Ref_to_Proto'>lseg_intersect_internal</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN1562"><span class='Ref_To_Local'>seg1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN1563"><span class='Ref_To_Local'>seg2</span></a><span class='Parentheses'>))</span> 
                <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;p1-&GT;npts;i++ &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* if we dropped through, no two segs intersected */ 
</span>    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end path_inter &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* path_distance() 
 * This essentially does a cartesian product of the lsegs in the 
 *  two paths, and finds the min distance between any two lsegs 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1632"></a><span class='Declare_Function'>path_distance</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1634"></a>    <a href="../../../include/utils/geo_decls.h.html#LN76"><span class='Ref_to_Typedef'>PATH</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>p1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN149"><span class='Ref_to_Macro'>PG_GETARG_PATH_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1635"></a>    <a href="../../../include/utils/geo_decls.h.html#LN76"><span class='Ref_to_Typedef'>PATH</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>p2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN149"><span class='Ref_to_Macro'>PG_GETARG_PATH_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1636"></a>    <a href="../../../include/c.h.html#LN380"><span class='Ref_to_Typedef'>float8</span></a>      <span class='Declare_Local'>min</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Operator'>.</span><span class='Number'>0</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* initialize to keep compiler quiet */ 
</span><a name="LN1637"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>have_min</span> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span><a name="LN1638"></a>    <a href="../../../include/c.h.html#LN380"><span class='Ref_to_Typedef'>float8</span></a>      <span class='Declare_Local'>tmp</span><span class='Delimiter'>; 
</span><a name="LN1639"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>, 
</span><a name="LN1640"></a>                <span class='Declare_Local'>j</span><span class='Delimiter'>; 
</span><a name="LN1641"></a>    <a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a>        <span class='Declare_Local'>seg1</span><span class='Delimiter'>, 
</span><a name="LN1642"></a>                <span class='Declare_Local'>seg2</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1639"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN1639"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN1634"><span class='Ref_To_Local'>p1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN79"><span class='Ref_to_Member'>npts</span></a><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN1639"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN1646"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>iprev</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1639"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <a href="geo_ops.c.html#LN1646"><span class='Ref_To_Local'>iprev</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN1639"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="geo_ops.c.html#LN1634"><span class='Ref_To_Local'>p1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN80"><span class='Ref_to_Member'>closed</span></a><span class='Parentheses'>) 
</span>                <span class='Control'>continue</span><span class='Delimiter'>; 
</span>            <a href="geo_ops.c.html#LN1646"><span class='Ref_To_Local'>iprev</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN1634"><span class='Ref_To_Local'>p1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN79"><span class='Ref_to_Member'>npts</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* include the closure segment */ 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1640"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN1640"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN1635"><span class='Ref_To_Local'>p2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN79"><span class='Ref_to_Member'>npts</span></a><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN1640"><span class='Ref_To_Local'>j</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN1659"></a>            <span class='Keyword'>int</span>         <span class='Declare_Local'>jprev</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1640"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                <a href="geo_ops.c.html#LN1659"><span class='Ref_To_Local'>jprev</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN1640"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="geo_ops.c.html#LN1635"><span class='Ref_To_Local'>p2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN80"><span class='Ref_to_Member'>closed</span></a><span class='Parentheses'>) 
</span>                    <span class='Control'>continue</span><span class='Delimiter'>; 
</span>                <a href="geo_ops.c.html#LN1659"><span class='Ref_To_Local'>jprev</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN1635"><span class='Ref_To_Local'>p2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN79"><span class='Ref_to_Member'>npts</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>;</span>   <span class='Comment_Single_Line'>/* include the closure segment */ 
</span>            <span class='Delimiter'>} 
</span> 
            <a href="geo_ops.c.html#LN70"><span class='Ref_to_Proto'>statlseg_construct</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN1641"><span class='Ref_To_Local'>seg1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN1634"><span class='Ref_To_Local'>p1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN1646"><span class='Ref_To_Local'>iprev</span></a><span class='Delimiter'>], </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN1634"><span class='Ref_To_Local'>p1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN1639"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="geo_ops.c.html#LN70"><span class='Ref_to_Proto'>statlseg_construct</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN1642"><span class='Ref_To_Local'>seg2</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN1635"><span class='Ref_To_Local'>p2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN1659"><span class='Ref_To_Local'>jprev</span></a><span class='Delimiter'>], </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN1635"><span class='Ref_To_Local'>p2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN1640"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <a href="geo_ops.c.html#LN1638"><span class='Ref_To_Local'>tmp</span></a> <span class='Operator'>= </span><a href="../../../include/postgres.h.html#LN720"><span class='Ref_to_Func'>DatumGetFloat8</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN585"><span class='Ref_to_Macro'>DirectFunctionCall2</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2207"><span class='Ref_to_Func'>lseg_distance</span></a><span class='Delimiter'>, 
</span>                                                     <a href="../../../include/utils/geo_decls.h.html#LN142"><span class='Ref_to_Macro'>LsegPGetDatum</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN1641"><span class='Ref_To_Local'>seg1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                                     <a href="../../../include/utils/geo_decls.h.html#LN142"><span class='Ref_to_Macro'>LsegPGetDatum</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN1642"><span class='Ref_To_Local'>seg2</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="geo_ops.c.html#LN1637"><span class='Ref_To_Local'>have_min</span></a> <span class='Operator'>|| </span><a href="geo_ops.c.html#LN1638"><span class='Ref_To_Local'>tmp</span></a> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN1636"><span class='Ref_To_Local'>min</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <a href="geo_ops.c.html#LN1636"><span class='Ref_To_Local'>min</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN1638"><span class='Ref_To_Local'>tmp</span></a><span class='Delimiter'>; 
</span>                <a href="geo_ops.c.html#LN1637"><span class='Ref_To_Local'>have_min</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for j=0;j&LT;p2-&GT;npts;j++ &raquo; </span> 
    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;p1-&GT;npts;i++ &raquo; </span> 
 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="geo_ops.c.html#LN1637"><span class='Ref_To_Local'>have_min</span></a><span class='Parentheses'>) 
</span>        <a href="../../../include/fmgr.h.html#LN304"><span class='Ref_to_Macro'>PG_RETURN_NULL</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN325"><span class='Ref_to_Macro'>PG_RETURN_FLOAT8</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1636"><span class='Ref_To_Local'>min</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end path_distance &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/*---------------------------------------------------------- 
 *  "Arithmetic" operations. 
 *---------------------------------------------------------*/ 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1696"></a><span class='Declare_Function'>path_length</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1698"></a>    <a href="../../../include/utils/geo_decls.h.html#LN76"><span class='Ref_to_Typedef'>PATH</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>path</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN149"><span class='Ref_to_Macro'>PG_GETARG_PATH_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1699"></a>    <a href="../../../include/c.h.html#LN380"><span class='Ref_to_Typedef'>float8</span></a>      <span class='Declare_Local'>result</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Operator'>.</span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN1700"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1700"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN1700"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN1698"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN79"><span class='Ref_to_Member'>npts</span></a><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN1700"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN1704"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>iprev</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1700"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <a href="geo_ops.c.html#LN1704"><span class='Ref_To_Local'>iprev</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN1700"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="geo_ops.c.html#LN1698"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN80"><span class='Ref_to_Member'>closed</span></a><span class='Parentheses'>) 
</span>                <span class='Control'>continue</span><span class='Delimiter'>; 
</span>            <a href="geo_ops.c.html#LN1704"><span class='Ref_To_Local'>iprev</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN1698"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN79"><span class='Ref_to_Member'>npts</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* include the closure segment */ 
</span>        <span class='Delimiter'>} 
</span> 
        <a href="geo_ops.c.html#LN1699"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>+= </span><a href="../../../include/utils/geo_decls.h.html#LN181"><span class='Ref_to_Proto'>point_dt</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN1698"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN1704"><span class='Ref_To_Local'>iprev</span></a><span class='Delimiter'>], </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN1698"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN1700"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../../include/fmgr.h.html#LN325"><span class='Ref_to_Macro'>PG_RETURN_FLOAT8</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1699"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end path_length &raquo; </span> 
 
<span class='Comment_Multi_Line'>/*********************************************************************** 
 ** 
 **     Routines for 2D points. 
 ** 
 ***********************************************************************/ 
</span> 
<span class='Comment_Multi_Line'>/*---------------------------------------------------------- 
 *  String to point, point to string conversion. 
 *      External format: 
 *              "(x,y)" 
 *              "x,y" 
 *---------------------------------------------------------*/ 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1735"></a><span class='Declare_Function'>point_in</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1737"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>str</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN241"><span class='Ref_to_Macro'>PG_GETARG_CSTRING</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1738"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>point</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN62"><span class='Ref_to_Proto'>pair_decode</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1737"><span class='Ref_To_Local'>str</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN1738"><span class='Ref_To_Local'>point</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN1738"><span class='Ref_To_Local'>point</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"point"</span><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1737"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/utils/geo_decls.h.html#LN139"><span class='Ref_to_Macro'>PG_RETURN_POINT_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1738"><span class='Ref_To_Local'>point</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1745"></a><span class='Declare_Function'>point_out</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1747"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>pt</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN321"><span class='Ref_to_Macro'>PG_RETURN_CSTRING</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN69"><span class='Ref_to_Proto'>path_encode</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN37"><span class='Ref_to_EnumConst'>PATH_NONE</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1747"><span class='Ref_To_Local'>pt</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 *      point_recv          - converts external binary format to point 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1756"></a><span class='Declare_Function'>point_recv</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1758"></a>    <a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a><span class='Parentheses'>) </span><a href="../../../include/fmgr.h.html#LN240"><span class='Ref_to_Macro'>PG_GETARG_POINTER</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1759"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>point</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN1759"><span class='Ref_To_Local'>point</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN1759"><span class='Ref_To_Local'>point</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="../../../include/libpq/pqformat.h.html#LN41"><span class='Ref_to_Proto'>pq_getmsgfloat8</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1758"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN1759"><span class='Ref_To_Local'>point</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="../../../include/libpq/pqformat.h.html#LN41"><span class='Ref_to_Proto'>pq_getmsgfloat8</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1758"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/utils/geo_decls.h.html#LN139"><span class='Ref_to_Macro'>PG_RETURN_POINT_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1759"><span class='Ref_To_Local'>point</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 *      point_send          - converts point to binary format 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1771"></a><span class='Declare_Function'>point_send</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1773"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>pt</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1774"></a>    <a href="../../../include/lib/stringinfo.h.html#LN34"><span class='Ref_to_Struct'>StringInfoData</span></a> <span class='Declare_Local'>buf</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/libpq/pqformat.h.html#LN31"><span class='Ref_to_Proto'>pq_begintypsend</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN1774"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/libpq/pqformat.h.html#LN28"><span class='Ref_to_Proto'>pq_sendfloat8</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN1774"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1773"><span class='Ref_To_Local'>pt</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/libpq/pqformat.h.html#LN28"><span class='Ref_to_Proto'>pq_sendfloat8</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN1774"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1773"><span class='Ref_To_Local'>pt</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN328"><span class='Ref_to_Macro'>PG_RETURN_BYTEA_P</span></a><span class='Parentheses'>(</span><a href="../../../include/libpq/pqformat.h.html#LN32"><span class='Ref_to_Proto'>pq_endtypsend</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN1774"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Keyword'>static </span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>* 
</span><a name="LN1784"></a><span class='Declare_Function'>point_construct</span><span class='Parentheses'>(</span><span class='Keyword'>double </span><span class='Declare_Parameter'>x</span><span class='Delimiter'>, </span><span class='Keyword'>double </span><span class='Declare_Parameter'>y</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1786"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>result</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN1786"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN1784"><span class='Ref_to_Parameter'>x</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN1786"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN1784"><span class='Ref_to_Parameter'>y</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="geo_ops.c.html#LN1786"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
} 
</span> 
 
<span class='Keyword'>static </span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>* 
</span><a name="LN1795"></a><span class='Declare_Function'>point_copy</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pt</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1797"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/c.h.html#LN525"><span class='Ref_to_Macro'>PointerIsValid</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1795"><span class='Ref_to_Parameter'>pt</span></a><span class='Parentheses'>))</span> 
        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN1797"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN1797"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN1795"><span class='Ref_to_Parameter'>pt</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN1797"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN1795"><span class='Ref_to_Parameter'>pt</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="geo_ops.c.html#LN1797"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/*---------------------------------------------------------- 
 *  Relational operators for Points. 
 *      Since we do have a sense of coordinates being 
 *      "equal" to a given accuracy (point_vert, point_horiz), 
 *      the other ops must preserve that sense.  This means 
 *      that results may, strictly speaking, be a lie (unless 
 *      EPSILON = 0.0). 
 *---------------------------------------------------------*/ 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1820"></a><span class='Declare_Function'>point_left</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1822"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>pt1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1823"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>pt2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN38"><span class='Ref_to_Macro'>FPlt</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1822"><span class='Ref_To_Local'>pt1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1823"><span class='Ref_To_Local'>pt2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1829"></a><span class='Declare_Function'>point_right</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1831"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>pt1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1832"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>pt2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN40"><span class='Ref_to_Macro'>FPgt</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1831"><span class='Ref_To_Local'>pt1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1832"><span class='Ref_To_Local'>pt2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1838"></a><span class='Declare_Function'>point_above</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1840"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>pt1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1841"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>pt2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN40"><span class='Ref_to_Macro'>FPgt</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1840"><span class='Ref_To_Local'>pt1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1841"><span class='Ref_To_Local'>pt2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1847"></a><span class='Declare_Function'>point_below</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1849"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>pt1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1850"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>pt2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN38"><span class='Ref_to_Macro'>FPlt</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1849"><span class='Ref_To_Local'>pt1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1850"><span class='Ref_To_Local'>pt2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1856"></a><span class='Declare_Function'>point_vert</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1858"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>pt1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1859"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>pt2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN36"><span class='Ref_to_Macro'>FPeq</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1858"><span class='Ref_To_Local'>pt1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1859"><span class='Ref_To_Local'>pt2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1865"></a><span class='Declare_Function'>point_horiz</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1867"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>pt1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1868"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>pt2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN36"><span class='Ref_to_Macro'>FPeq</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1867"><span class='Ref_To_Local'>pt1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1868"><span class='Ref_To_Local'>pt2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1874"></a><span class='Declare_Function'>point_eq</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1876"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>pt1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1877"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>pt2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN36"><span class='Ref_to_Macro'>FPeq</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1876"><span class='Ref_To_Local'>pt1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1877"><span class='Ref_To_Local'>pt2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>) </span><span class='Operator'>&& </span><a href="../../../include/utils/geo_decls.h.html#LN36"><span class='Ref_to_Macro'>FPeq</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1876"><span class='Ref_To_Local'>pt1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1877"><span class='Ref_To_Local'>pt2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1883"></a><span class='Declare_Function'>point_ne</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1885"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>pt1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1886"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>pt2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN37"><span class='Ref_to_Macro'>FPne</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1885"><span class='Ref_To_Local'>pt1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1886"><span class='Ref_To_Local'>pt2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>) </span><span class='Operator'>|| </span><a href="../../../include/utils/geo_decls.h.html#LN37"><span class='Ref_to_Macro'>FPne</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1885"><span class='Ref_To_Local'>pt1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1886"><span class='Ref_To_Local'>pt2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/*---------------------------------------------------------- 
 *  "Arithmetic" operators on points. 
 *---------------------------------------------------------*/ 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1896"></a><span class='Declare_Function'>point_distance</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1898"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>pt1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1899"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>pt2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN325"><span class='Ref_to_Macro'>PG_RETURN_FLOAT8</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN52"><span class='Ref_to_Macro'>HYPOT</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1898"><span class='Ref_To_Local'>pt1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>- </span><a href="geo_ops.c.html#LN1899"><span class='Ref_To_Local'>pt2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1898"><span class='Ref_To_Local'>pt1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>- </span><a href="geo_ops.c.html#LN1899"><span class='Ref_To_Local'>pt2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>double 
</span><a name="LN1905"></a><span class='Declare_Function'>point_dt</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pt1</span><span class='Delimiter'>, </span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pt2</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><span class='Directive'>#ifdef</span> GEODEBUG 
    <a href="../../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span><span class='String'>"point_dt- segment (%f,%f),(%f,%f) length is %f\n"</span><span class='Delimiter'>, 
</span>    <a href="geo_ops.c.html#LN1905"><span class='Ref_to_Parameter'>pt1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1905"><span class='Ref_to_Parameter'>pt1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1905"><span class='Ref_to_Parameter'>pt2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1905"><span class='Ref_to_Parameter'>pt2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>, </span><a href="../../../include/utils/geo_decls.h.html#LN52"><span class='Ref_to_Macro'>HYPOT</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1905"><span class='Ref_to_Parameter'>pt1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>- </span><a href="geo_ops.c.html#LN1905"><span class='Ref_to_Parameter'>pt2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1905"><span class='Ref_to_Parameter'>pt1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>- </span><a href="geo_ops.c.html#LN1905"><span class='Ref_to_Parameter'>pt2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
    <span class='Control'>return</span> <a href="../../../include/utils/geo_decls.h.html#LN52"><span class='Ref_to_Macro'>HYPOT</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1905"><span class='Ref_to_Parameter'>pt1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>- </span><a href="geo_ops.c.html#LN1905"><span class='Ref_to_Parameter'>pt2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1905"><span class='Ref_to_Parameter'>pt1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>- </span><a href="geo_ops.c.html#LN1905"><span class='Ref_to_Parameter'>pt2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1915"></a><span class='Declare_Function'>point_slope</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1917"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>pt1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1918"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>pt2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN325"><span class='Ref_to_Macro'>PG_RETURN_FLOAT8</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN182"><span class='Ref_to_Proto'>point_sl</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1917"><span class='Ref_To_Local'>pt1</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1918"><span class='Ref_To_Local'>pt2</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Keyword'>double 
</span><a name="LN1925"></a><span class='Declare_Function'>point_sl</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pt1</span><span class='Delimiter'>, </span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pt2</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> <span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN36"><span class='Ref_to_Macro'>FPeq</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1925"><span class='Ref_to_Parameter'>pt1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1925"><span class='Ref_to_Parameter'>pt2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>) 
</span>            <span class='Operator'>? </span><span class='Parentheses'>(</span><span class='Keyword'>double</span><span class='Parentheses'>) </span>DBL_MAX 
            <span class='Operator'>: </span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1925"><span class='Ref_to_Parameter'>pt1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>- </span><a href="geo_ops.c.html#LN1925"><span class='Ref_to_Parameter'>pt2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>) </span><span class='Operator'>/ </span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1925"><span class='Ref_to_Parameter'>pt1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>- </span><a href="geo_ops.c.html#LN1925"><span class='Ref_to_Parameter'>pt2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/*********************************************************************** 
 ** 
 **     Routines for 2D line segments. 
 ** 
 ***********************************************************************/ 
</span> 
<span class='Comment_Multi_Line'>/*---------------------------------------------------------- 
 *  String to lseg, lseg to string conversion. 
 *      External forms: "[(x1, y1), (x2, y2)]" 
 *                      "(x1, y1), (x2, y2)" 
 *                      "x1, y1, x2, y2" 
 *      closed form ok  "((x1, y1), (x2, y2))" 
 *      (old form)      "(x1, y1, x2, y2)" 
 *---------------------------------------------------------*/ 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1949"></a><span class='Declare_Function'>lseg_in</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1951"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>str</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN241"><span class='Ref_to_Macro'>PG_GETARG_CSTRING</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1952"></a>    <a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>lseg</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span><a name="LN1953"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>isopen</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN66"><span class='Ref_to_Proto'>path_decode</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1951"><span class='Ref_To_Local'>str</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1952"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN1953"><span class='Ref_To_Local'>isopen</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"lseg"</span><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1951"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/utils/geo_decls.h.html#LN144"><span class='Ref_to_Macro'>PG_RETURN_LSEG_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1952"><span class='Ref_To_Local'>lseg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1961"></a><span class='Declare_Function'>lseg_out</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1963"></a>    <a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>ls</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN143"><span class='Ref_to_Macro'>PG_GETARG_LSEG_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN321"><span class='Ref_to_Macro'>PG_RETURN_CSTRING</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN69"><span class='Ref_to_Proto'>path_encode</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN37"><span class='Ref_to_EnumConst'>PATH_OPEN</span></a><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1963"><span class='Ref_To_Local'>ls</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 *      lseg_recv           - converts external binary format to lseg 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1972"></a><span class='Declare_Function'>lseg_recv</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1974"></a>    <a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a><span class='Parentheses'>) </span><a href="../../../include/fmgr.h.html#LN240"><span class='Ref_to_Macro'>PG_GETARG_POINTER</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1975"></a>    <a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>lseg</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN1975"><span class='Ref_To_Local'>lseg</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN1975"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="../../../include/libpq/pqformat.h.html#LN41"><span class='Ref_to_Proto'>pq_getmsgfloat8</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1974"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN1975"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="../../../include/libpq/pqformat.h.html#LN41"><span class='Ref_to_Proto'>pq_getmsgfloat8</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1974"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN1975"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="../../../include/libpq/pqformat.h.html#LN41"><span class='Ref_to_Proto'>pq_getmsgfloat8</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1974"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN1975"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="../../../include/libpq/pqformat.h.html#LN41"><span class='Ref_to_Proto'>pq_getmsgfloat8</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1974"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/geo_decls.h.html#LN144"><span class='Ref_to_Macro'>PG_RETURN_LSEG_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN1975"><span class='Ref_To_Local'>lseg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 *      lseg_send           - converts lseg to binary format 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1991"></a><span class='Declare_Function'>lseg_send</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1993"></a>    <a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>ls</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN143"><span class='Ref_to_Macro'>PG_GETARG_LSEG_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1994"></a>    <a href="../../../include/lib/stringinfo.h.html#LN34"><span class='Ref_to_Struct'>StringInfoData</span></a> <span class='Declare_Local'>buf</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/libpq/pqformat.h.html#LN31"><span class='Ref_to_Proto'>pq_begintypsend</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN1994"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/libpq/pqformat.h.html#LN28"><span class='Ref_to_Proto'>pq_sendfloat8</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN1994"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1993"><span class='Ref_To_Local'>ls</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/libpq/pqformat.h.html#LN28"><span class='Ref_to_Proto'>pq_sendfloat8</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN1994"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1993"><span class='Ref_To_Local'>ls</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/libpq/pqformat.h.html#LN28"><span class='Ref_to_Proto'>pq_sendfloat8</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN1994"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1993"><span class='Ref_To_Local'>ls</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/libpq/pqformat.h.html#LN28"><span class='Ref_to_Proto'>pq_sendfloat8</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN1994"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN1993"><span class='Ref_To_Local'>ls</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN328"><span class='Ref_to_Macro'>PG_RETURN_BYTEA_P</span></a><span class='Parentheses'>(</span><a href="../../../include/libpq/pqformat.h.html#LN32"><span class='Ref_to_Proto'>pq_endtypsend</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN1994"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/* lseg_construct - 
 *      form a LSEG from two Points. 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN2009"></a><span class='Declare_Function'>lseg_construct</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2011"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>pt1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2012"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>pt2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2013"></a>    <a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>result</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN2013"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN2011"><span class='Ref_To_Local'>pt1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN2013"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN2011"><span class='Ref_To_Local'>pt1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN2013"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN2012"><span class='Ref_To_Local'>pt2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN2013"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN2012"><span class='Ref_To_Local'>pt2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/geo_decls.h.html#LN144"><span class='Ref_to_Macro'>PG_RETURN_LSEG_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2013"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* like lseg_construct, but assume space already allocated */ 
</span><span class='Keyword'>static void 
</span><a name="LN2025"></a><span class='Declare_Function'>statlseg_construct</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>lseg</span><span class='Delimiter'>, </span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pt1</span><span class='Delimiter'>, </span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pt2</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <a href="geo_ops.c.html#LN2025"><span class='Ref_to_Parameter'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN2025"><span class='Ref_to_Parameter'>pt1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN2025"><span class='Ref_to_Parameter'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN2025"><span class='Ref_to_Parameter'>pt1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN2025"><span class='Ref_to_Parameter'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN2025"><span class='Ref_to_Parameter'>pt2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN2025"><span class='Ref_to_Parameter'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN2025"><span class='Ref_to_Parameter'>pt2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN2034"></a><span class='Declare_Function'>lseg_length</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2036"></a>    <a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>lseg</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN143"><span class='Ref_to_Macro'>PG_GETARG_LSEG_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN325"><span class='Ref_to_Macro'>PG_RETURN_FLOAT8</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN181"><span class='Ref_to_Proto'>point_dt</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2036"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>], </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2036"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/*---------------------------------------------------------- 
 *  Relative position routines. 
 *---------------------------------------------------------*/ 
</span> 
<span class='Comment_Multi_Line'>/* 
 **  find intersection of the two lines, and see if it falls on 
 **  both segments. 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN2050"></a><span class='Declare_Function'>lseg_intersect</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2052"></a>    <a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>l1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN143"><span class='Ref_to_Macro'>PG_GETARG_LSEG_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2053"></a>    <a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>l2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN143"><span class='Ref_to_Macro'>PG_GETARG_LSEG_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN52"><span class='Ref_to_Proto'>lseg_intersect_internal</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2052"><span class='Ref_To_Local'>l1</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2053"><span class='Ref_To_Local'>l2</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>static bool 
</span><a name="LN2059"></a><span class='Declare_Function'>lseg_intersect_internal</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>l1</span><span class='Delimiter'>, </span><a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>l2</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2061"></a>    <a href="../../../include/utils/geo_decls.h.html#LN89"><span class='Ref_to_Typedef'>LINE</span></a>        <span class='Declare_Local'>ln</span><span class='Delimiter'>; 
</span><a name="LN2062"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>interpt</span><span class='Delimiter'>; 
</span><a name="LN2063"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>retval</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN51"><span class='Ref_to_Proto'>line_construct_pts</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2061"><span class='Ref_To_Local'>ln</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2059"><span class='Ref_to_Parameter'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>], </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2059"><span class='Ref_to_Parameter'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN2062"><span class='Ref_To_Local'>interpt</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN73"><span class='Ref_to_Proto'>interpt_sl</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2059"><span class='Ref_to_Parameter'>l1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2061"><span class='Ref_To_Local'>ln</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2062"><span class='Ref_To_Local'>interpt</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL </span><span class='Operator'>&& </span><a href="geo_ops.c.html#LN54"><span class='Ref_to_Proto'>on_ps_internal</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2062"><span class='Ref_To_Local'>interpt</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2059"><span class='Ref_to_Parameter'>l2</span></a><span class='Parentheses'>))</span> 
        <a href="geo_ops.c.html#LN2063"><span class='Ref_To_Local'>retval</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>;</span>          <span class='Comment_Single_Line'>/* interpt on l1 and l2 */ 
</span>    <span class='Control'>else</span> 
        <a href="geo_ops.c.html#LN2063"><span class='Ref_To_Local'>retval</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="geo_ops.c.html#LN2063"><span class='Ref_To_Local'>retval</span></a><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN2076"></a><span class='Declare_Function'>lseg_parallel</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2078"></a>    <a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>l1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN143"><span class='Ref_to_Macro'>PG_GETARG_LSEG_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2079"></a>    <a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>l2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN143"><span class='Ref_to_Macro'>PG_GETARG_LSEG_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN36"><span class='Ref_to_Macro'>FPeq</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN182"><span class='Ref_to_Proto'>point_sl</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2078"><span class='Ref_To_Local'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>], </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2078"><span class='Ref_To_Local'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                        <a href="../../../include/utils/geo_decls.h.html#LN182"><span class='Ref_to_Proto'>point_sl</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2079"><span class='Ref_To_Local'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>], </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2079"><span class='Ref_To_Local'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* lseg_perp() 
 * Determine if two line segments are perpendicular. 
 * 
 * This code did not get the correct answer for 
 *  '((0,0),(0,1))'::lseg ?-| '((0,0),(1,0))'::lseg 
 * So, modified it to check explicitly for slope of vertical line 
 *  returned by point_sl() and the results seem better. 
 * - thomas 1998-01-31 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN2095"></a><span class='Declare_Function'>lseg_perp</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2097"></a>    <a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>l1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN143"><span class='Ref_to_Macro'>PG_GETARG_LSEG_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2098"></a>    <a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>l2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN143"><span class='Ref_to_Macro'>PG_GETARG_LSEG_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2099"></a>    <span class='Keyword'>double</span>      <span class='Declare_Local'>m1</span><span class='Delimiter'>, 
</span><a name="LN2100"></a>                <span class='Declare_Local'>m2</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN2099"><span class='Ref_To_Local'>m1</span></a> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN182"><span class='Ref_to_Proto'>point_sl</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2097"><span class='Ref_To_Local'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2097"><span class='Ref_To_Local'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN2100"><span class='Ref_To_Local'>m2</span></a> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN182"><span class='Ref_to_Proto'>point_sl</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2098"><span class='Ref_To_Local'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2098"><span class='Ref_To_Local'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
<span class='Directive'>#ifdef</span> GEODEBUG 
    <a href="../../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span><span class='String'>"lseg_perp- slopes are %g and %g\n"</span><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2099"><span class='Ref_To_Local'>m1</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2100"><span class='Ref_To_Local'>m2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN35"><span class='Ref_to_Macro'>FPzero</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2099"><span class='Ref_To_Local'>m1</span></a><span class='Parentheses'>))</span> 
        <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN36"><span class='Ref_to_Macro'>FPeq</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2100"><span class='Ref_To_Local'>m2</span></a><span class='Delimiter'>, </span>DBL_MAX<span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN35"><span class='Ref_to_Macro'>FPzero</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2100"><span class='Ref_To_Local'>m2</span></a><span class='Parentheses'>))</span> 
        <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN36"><span class='Ref_to_Macro'>FPeq</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2099"><span class='Ref_To_Local'>m1</span></a><span class='Delimiter'>, </span>DBL_MAX<span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN36"><span class='Ref_to_Macro'>FPeq</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2099"><span class='Ref_To_Local'>m1</span></a> <span class='Operator'>/ </span><a href="geo_ops.c.html#LN2100"><span class='Ref_To_Local'>m2</span></a><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Operator'>.</span><span class='Number'>0</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end lseg_perp &raquo; </span> 
 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN2117"></a><span class='Declare_Function'>lseg_vertical</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2119"></a>    <a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>lseg</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN143"><span class='Ref_to_Macro'>PG_GETARG_LSEG_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN36"><span class='Ref_to_Macro'>FPeq</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2119"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2119"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN2125"></a><span class='Declare_Function'>lseg_horizontal</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2127"></a>    <a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>lseg</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN143"><span class='Ref_to_Macro'>PG_GETARG_LSEG_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN36"><span class='Ref_to_Macro'>FPeq</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2127"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2127"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN2134"></a><span class='Declare_Function'>lseg_eq</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2136"></a>    <a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>l1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN143"><span class='Ref_to_Macro'>PG_GETARG_LSEG_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2137"></a>    <a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>l2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN143"><span class='Ref_to_Macro'>PG_GETARG_LSEG_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN36"><span class='Ref_to_Macro'>FPeq</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2136"><span class='Ref_To_Local'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2137"><span class='Ref_To_Local'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>                   <a href="../../../include/utils/geo_decls.h.html#LN36"><span class='Ref_to_Macro'>FPeq</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2136"><span class='Ref_To_Local'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2137"><span class='Ref_To_Local'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>                   <a href="../../../include/utils/geo_decls.h.html#LN36"><span class='Ref_to_Macro'>FPeq</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2136"><span class='Ref_To_Local'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2137"><span class='Ref_To_Local'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>                   <a href="../../../include/utils/geo_decls.h.html#LN36"><span class='Ref_to_Macro'>FPeq</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2136"><span class='Ref_To_Local'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2137"><span class='Ref_To_Local'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN2146"></a><span class='Declare_Function'>lseg_ne</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2148"></a>    <a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>l1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN143"><span class='Ref_to_Macro'>PG_GETARG_LSEG_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2149"></a>    <a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>l2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN143"><span class='Ref_to_Macro'>PG_GETARG_LSEG_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/utils/geo_decls.h.html#LN36"><span class='Ref_to_Macro'>FPeq</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2148"><span class='Ref_To_Local'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2149"><span class='Ref_To_Local'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>) </span><span class='Operator'>|| 
</span>                   <span class='Operator'>!</span><a href="../../../include/utils/geo_decls.h.html#LN36"><span class='Ref_to_Macro'>FPeq</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2148"><span class='Ref_To_Local'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2149"><span class='Ref_To_Local'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>) </span><span class='Operator'>|| 
</span>                   <span class='Operator'>!</span><a href="../../../include/utils/geo_decls.h.html#LN36"><span class='Ref_to_Macro'>FPeq</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2148"><span class='Ref_To_Local'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2149"><span class='Ref_To_Local'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>) </span><span class='Operator'>|| 
</span>                   <span class='Operator'>!</span><a href="../../../include/utils/geo_decls.h.html#LN36"><span class='Ref_to_Macro'>FPeq</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2148"><span class='Ref_To_Local'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2149"><span class='Ref_To_Local'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN2158"></a><span class='Declare_Function'>lseg_lt</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2160"></a>    <a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>l1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN143"><span class='Ref_to_Macro'>PG_GETARG_LSEG_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2161"></a>    <a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>l2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN143"><span class='Ref_to_Macro'>PG_GETARG_LSEG_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN38"><span class='Ref_to_Macro'>FPlt</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN181"><span class='Ref_to_Proto'>point_dt</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2160"><span class='Ref_To_Local'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>], </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2160"><span class='Ref_To_Local'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                        <a href="../../../include/utils/geo_decls.h.html#LN181"><span class='Ref_to_Proto'>point_dt</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2161"><span class='Ref_To_Local'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>], </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2161"><span class='Ref_To_Local'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN2168"></a><span class='Declare_Function'>lseg_le</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2170"></a>    <a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>l1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN143"><span class='Ref_to_Macro'>PG_GETARG_LSEG_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2171"></a>    <a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>l2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN143"><span class='Ref_to_Macro'>PG_GETARG_LSEG_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN39"><span class='Ref_to_Macro'>FPle</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN181"><span class='Ref_to_Proto'>point_dt</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2170"><span class='Ref_To_Local'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>], </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2170"><span class='Ref_To_Local'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                        <a href="../../../include/utils/geo_decls.h.html#LN181"><span class='Ref_to_Proto'>point_dt</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2171"><span class='Ref_To_Local'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>], </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2171"><span class='Ref_To_Local'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN2178"></a><span class='Declare_Function'>lseg_gt</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2180"></a>    <a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>l1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN143"><span class='Ref_to_Macro'>PG_GETARG_LSEG_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2181"></a>    <a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>l2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN143"><span class='Ref_to_Macro'>PG_GETARG_LSEG_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN40"><span class='Ref_to_Macro'>FPgt</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN181"><span class='Ref_to_Proto'>point_dt</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2180"><span class='Ref_To_Local'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>], </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2180"><span class='Ref_To_Local'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                        <a href="../../../include/utils/geo_decls.h.html#LN181"><span class='Ref_to_Proto'>point_dt</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2181"><span class='Ref_To_Local'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>], </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2181"><span class='Ref_To_Local'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN2188"></a><span class='Declare_Function'>lseg_ge</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2190"></a>    <a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>l1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN143"><span class='Ref_to_Macro'>PG_GETARG_LSEG_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2191"></a>    <a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>l2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN143"><span class='Ref_to_Macro'>PG_GETARG_LSEG_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN41"><span class='Ref_to_Macro'>FPge</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN181"><span class='Ref_to_Proto'>point_dt</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2190"><span class='Ref_To_Local'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>], </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2190"><span class='Ref_To_Local'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                        <a href="../../../include/utils/geo_decls.h.html#LN181"><span class='Ref_to_Proto'>point_dt</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2191"><span class='Ref_To_Local'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>], </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2191"><span class='Ref_To_Local'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/*---------------------------------------------------------- 
 *  Line arithmetic routines. 
 *---------------------------------------------------------*/ 
</span> 
<span class='Comment_Multi_Line'>/* lseg_distance - 
 *      If two segments don't intersect, then the closest 
 *      point will be from one of the endpoints to the other 
 *      segment. 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN2208"></a><span class='Declare_Function'>lseg_distance</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2210"></a>    <a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>l1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN143"><span class='Ref_to_Macro'>PG_GETARG_LSEG_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2211"></a>    <a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>l2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN143"><span class='Ref_to_Macro'>PG_GETARG_LSEG_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN325"><span class='Ref_to_Macro'>PG_RETURN_FLOAT8</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN53"><span class='Ref_to_Proto'>lseg_dt</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2210"><span class='Ref_To_Local'>l1</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2211"><span class='Ref_To_Local'>l2</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* lseg_dt() 
 * Distance between two line segments. 
 * Must check both sets of endpoints to ensure minimum distance is found. 
 * - thomas 1998-02-01 
 */ 
</span><span class='Keyword'>static double 
</span><a name="LN2222"></a><span class='Declare_Function'>lseg_dt</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>l1</span><span class='Delimiter'>, </span><a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>l2</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2224"></a>    <span class='Keyword'>double</span>      <span class='Declare_Local'>result</span><span class='Delimiter'>, 
</span><a name="LN2225"></a>                <span class='Declare_Local'>d</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN52"><span class='Ref_to_Proto'>lseg_intersect_internal</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2222"><span class='Ref_to_Parameter'>l1</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2222"><span class='Ref_to_Parameter'>l2</span></a><span class='Parentheses'>))</span> 
        <span class='Control'>return</span> <span class='Number'>0</span><span class='Operator'>.</span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN2225"><span class='Ref_To_Local'>d</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN76"><span class='Ref_to_Proto'>dist_ps_internal</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2222"><span class='Ref_to_Parameter'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>], </span><a href="geo_ops.c.html#LN2222"><span class='Ref_to_Parameter'>l2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN2224"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN2225"><span class='Ref_To_Local'>d</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN2225"><span class='Ref_To_Local'>d</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN76"><span class='Ref_to_Proto'>dist_ps_internal</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2222"><span class='Ref_to_Parameter'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>], </span><a href="geo_ops.c.html#LN2222"><span class='Ref_to_Parameter'>l2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN2224"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../interfaces/ecpg/pgtypeslib/numeric.c.html#LN11"><span class='Ref_to_Macro'>Min</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2224"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2225"><span class='Ref_To_Local'>d</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN2225"><span class='Ref_To_Local'>d</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN76"><span class='Ref_to_Proto'>dist_ps_internal</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2222"><span class='Ref_to_Parameter'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>], </span><a href="geo_ops.c.html#LN2222"><span class='Ref_to_Parameter'>l1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN2224"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../interfaces/ecpg/pgtypeslib/numeric.c.html#LN11"><span class='Ref_to_Macro'>Min</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2224"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2225"><span class='Ref_To_Local'>d</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN2225"><span class='Ref_To_Local'>d</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN76"><span class='Ref_to_Proto'>dist_ps_internal</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2222"><span class='Ref_to_Parameter'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>], </span><a href="geo_ops.c.html#LN2222"><span class='Ref_to_Parameter'>l1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN2224"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../interfaces/ecpg/pgtypeslib/numeric.c.html#LN11"><span class='Ref_to_Macro'>Min</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2224"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2225"><span class='Ref_To_Local'>d</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="geo_ops.c.html#LN2224"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end lseg_dt &raquo; </span> 
 
 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN2244"></a><span class='Declare_Function'>lseg_center</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2246"></a>    <a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>lseg</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN143"><span class='Ref_to_Macro'>PG_GETARG_LSEG_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2247"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN2247"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN2247"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2246"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>+ </span><a href="geo_ops.c.html#LN2246"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>) </span><span class='Operator'>/ </span><span class='Number'>2</span><span class='Operator'>.</span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN2247"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2246"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>+ </span><a href="geo_ops.c.html#LN2246"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>) </span><span class='Operator'>/ </span><span class='Number'>2</span><span class='Operator'>.</span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/geo_decls.h.html#LN139"><span class='Ref_to_Macro'>PG_RETURN_POINT_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2247"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>static </span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>* 
</span><a name="LN2258"></a><span class='Declare_Function'>lseg_interpt_internal</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>l1</span><span class='Delimiter'>, </span><a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>l2</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2260"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span><a name="LN2261"></a>    <a href="../../../include/utils/geo_decls.h.html#LN89"><span class='Ref_to_Typedef'>LINE</span></a>        <span class='Declare_Local'>tmp1</span><span class='Delimiter'>, 
</span><a name="LN2262"></a>                <span class='Declare_Local'>tmp2</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Find the intersection of the appropriate lines, if any. 
     */ 
</span>    <a href="geo_ops.c.html#LN51"><span class='Ref_to_Proto'>line_construct_pts</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2261"><span class='Ref_To_Local'>tmp1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2258"><span class='Ref_to_Parameter'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>], </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2258"><span class='Ref_to_Parameter'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN51"><span class='Ref_to_Proto'>line_construct_pts</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2262"><span class='Ref_To_Local'>tmp2</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2258"><span class='Ref_to_Parameter'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>], </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2258"><span class='Ref_to_Parameter'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN2260"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN77"><span class='Ref_to_Proto'>line_interpt_internal</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2261"><span class='Ref_To_Local'>tmp1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2262"><span class='Ref_To_Local'>tmp2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/c.h.html#LN525"><span class='Ref_to_Macro'>PointerIsValid</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2260"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>))</span> 
        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If the line intersection point isn't within l1 (or equivalently l2), 
     * there is no valid segment intersection point at all. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="geo_ops.c.html#LN54"><span class='Ref_to_Proto'>on_ps_internal</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2260"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2258"><span class='Ref_to_Parameter'>l1</span></a><span class='Parentheses'>) </span><span class='Operator'>|| 
</span>        <span class='Operator'>!</span><a href="geo_ops.c.html#LN54"><span class='Ref_to_Proto'>on_ps_internal</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2260"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2258"><span class='Ref_to_Parameter'>l2</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2260"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If there is an intersection, then check explicitly for matching 
     * endpoints since there may be rounding effects with annoying lsb 
     * residue. - tgl 1997-07-09 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="../../../include/utils/geo_decls.h.html#LN36"><span class='Ref_to_Macro'>FPeq</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2258"><span class='Ref_to_Parameter'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2258"><span class='Ref_to_Parameter'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>) </span><span class='Operator'>&& </span><a href="../../../include/utils/geo_decls.h.html#LN36"><span class='Ref_to_Macro'>FPeq</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2258"><span class='Ref_to_Parameter'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2258"><span class='Ref_to_Parameter'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>))</span> <span class='Operator'>|| 
</span>        <span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN36"><span class='Ref_to_Macro'>FPeq</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2258"><span class='Ref_to_Parameter'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2258"><span class='Ref_to_Parameter'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>) </span><span class='Operator'>&& </span><a href="../../../include/utils/geo_decls.h.html#LN36"><span class='Ref_to_Macro'>FPeq</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2258"><span class='Ref_to_Parameter'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2258"><span class='Ref_to_Parameter'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>)))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="geo_ops.c.html#LN2260"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN2258"><span class='Ref_to_Parameter'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN2260"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN2258"><span class='Ref_to_Parameter'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="../../../include/utils/geo_decls.h.html#LN36"><span class='Ref_to_Macro'>FPeq</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2258"><span class='Ref_to_Parameter'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2258"><span class='Ref_to_Parameter'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>) </span><span class='Operator'>&& </span><a href="../../../include/utils/geo_decls.h.html#LN36"><span class='Ref_to_Macro'>FPeq</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2258"><span class='Ref_to_Parameter'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2258"><span class='Ref_to_Parameter'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>))</span> <span class='Operator'>|| 
</span>             <span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN36"><span class='Ref_to_Macro'>FPeq</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2258"><span class='Ref_to_Parameter'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2258"><span class='Ref_to_Parameter'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>) </span><span class='Operator'>&& </span><a href="../../../include/utils/geo_decls.h.html#LN36"><span class='Ref_to_Macro'>FPeq</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2258"><span class='Ref_to_Parameter'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2258"><span class='Ref_to_Parameter'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>)))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="geo_ops.c.html#LN2260"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN2258"><span class='Ref_to_Parameter'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN2260"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN2258"><span class='Ref_to_Parameter'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>return</span> <a href="geo_ops.c.html#LN2260"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end lseg_interpt_internal &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* lseg_interpt - 
 *      Find the intersection point of two segments (if any). 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN2309"></a><span class='Declare_Function'>lseg_interpt</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2311"></a>    <a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>l1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN143"><span class='Ref_to_Macro'>PG_GETARG_LSEG_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2312"></a>    <a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>l2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN143"><span class='Ref_to_Macro'>PG_GETARG_LSEG_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2313"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN2313"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN79"><span class='Ref_to_Proto'>lseg_interpt_internal</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2311"><span class='Ref_To_Local'>l1</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2312"><span class='Ref_To_Local'>l2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/c.h.html#LN525"><span class='Ref_to_Macro'>PointerIsValid</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2313"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>))</span> 
        <a href="../../../include/fmgr.h.html#LN304"><span class='Ref_to_Macro'>PG_RETURN_NULL</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/geo_decls.h.html#LN139"><span class='Ref_to_Macro'>PG_RETURN_POINT_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2313"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/*********************************************************************** 
 ** 
 **     Routines for position comparisons of differently-typed 
 **             2D objects. 
 ** 
 ***********************************************************************/ 
</span> 
<span class='Comment_Multi_Line'>/*--------------------------------------------------------------------- 
 *      dist_ 
 *              Minimum distance from one object to another. 
 *-------------------------------------------------------------------*/ 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Distance from a point to a line 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN2338"></a><span class='Declare_Function'>dist_pl</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2340"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>pt</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2341"></a>    <a href="../../../include/utils/geo_decls.h.html#LN89"><span class='Ref_to_Typedef'>LINE</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>line</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN155"><span class='Ref_to_Macro'>PG_GETARG_LINE_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN325"><span class='Ref_to_Macro'>PG_RETURN_FLOAT8</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN75"><span class='Ref_to_Proto'>dist_pl_internal</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2340"><span class='Ref_To_Local'>pt</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2341"><span class='Ref_To_Local'>line</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>static double 
</span><a name="LN2347"></a><span class='Declare_Function'>dist_pl_internal</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pt</span><span class='Delimiter'>, </span><a href="../../../include/utils/geo_decls.h.html#LN89"><span class='Ref_to_Typedef'>LINE</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>line</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> fabs<span class='Parentheses'>((</span><a href="geo_ops.c.html#LN2347"><span class='Ref_to_Parameter'>line</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN91"><span class='Ref_to_Member'>A</span></a> <span class='Operator'>* </span><a href="geo_ops.c.html#LN2347"><span class='Ref_to_Parameter'>pt</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>+ </span><a href="geo_ops.c.html#LN2347"><span class='Ref_to_Parameter'>line</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN92"><span class='Ref_to_Member'>B</span></a> <span class='Operator'>* </span><a href="geo_ops.c.html#LN2347"><span class='Ref_to_Parameter'>pt</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>+ </span><a href="geo_ops.c.html#LN2347"><span class='Ref_to_Parameter'>line</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN93"><span class='Ref_to_Member'>C</span></a><span class='Parentheses'>) </span><span class='Operator'>/ 
</span>                <a href="../../../include/utils/geo_decls.h.html#LN52"><span class='Ref_to_Macro'>HYPOT</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2347"><span class='Ref_to_Parameter'>line</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN91"><span class='Ref_to_Member'>A</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2347"><span class='Ref_to_Parameter'>line</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN92"><span class='Ref_to_Member'>B</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Distance from a point to a lseg 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN2357"></a><span class='Declare_Function'>dist_ps</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2359"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>pt</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2360"></a>    <a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>lseg</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN143"><span class='Ref_to_Macro'>PG_GETARG_LSEG_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN325"><span class='Ref_to_Macro'>PG_RETURN_FLOAT8</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN76"><span class='Ref_to_Proto'>dist_ps_internal</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2359"><span class='Ref_To_Local'>pt</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2360"><span class='Ref_To_Local'>lseg</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>static double 
</span><a name="LN2366"></a><span class='Declare_Function'>dist_ps_internal</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pt</span><span class='Delimiter'>, </span><a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>lseg</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2368"></a>    <span class='Keyword'>double</span>      <span class='Declare_Local'>m</span><span class='Delimiter'>;</span>              <span class='Comment_Single_Line'>/* slope of perp. */ 
</span><a name="LN2369"></a>    <a href="../../../include/utils/geo_decls.h.html#LN89"><span class='Ref_to_Typedef'>LINE</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>ln</span><span class='Delimiter'>; 
</span><a name="LN2370"></a>    <span class='Keyword'>double</span>      <span class='Declare_Local'>result</span><span class='Delimiter'>, 
</span><a name="LN2371"></a>                <span class='Declare_Local'>tmpdist</span><span class='Delimiter'>; 
</span><a name="LN2372"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>ip</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Construct a line perpendicular to the input segment and through the 
     * input point 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2366"><span class='Ref_to_Parameter'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>== </span><a href="geo_ops.c.html#LN2366"><span class='Ref_to_Parameter'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>) 
</span>        <a href="geo_ops.c.html#LN2368"><span class='Ref_To_Local'>m</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2366"><span class='Ref_to_Parameter'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>== </span><a href="geo_ops.c.html#LN2366"><span class='Ref_to_Parameter'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>) 
</span>        <a href="geo_ops.c.html#LN2368"><span class='Ref_To_Local'>m</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>double</span><span class='Parentheses'>) </span>DBL_MAX<span class='Delimiter'>;</span>   <span class='Comment_Single_Line'>/* slope is infinite */ 
</span>    <span class='Control'>else</span> 
        <a href="geo_ops.c.html#LN2368"><span class='Ref_To_Local'>m</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2366"><span class='Ref_to_Parameter'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>- </span><a href="geo_ops.c.html#LN2366"><span class='Ref_to_Parameter'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>) </span><span class='Operator'>/ </span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2366"><span class='Ref_to_Parameter'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>- </span><a href="geo_ops.c.html#LN2366"><span class='Ref_to_Parameter'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN2369"><span class='Ref_To_Local'>ln</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN50"><span class='Ref_to_Proto'>line_construct_pm</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2366"><span class='Ref_to_Parameter'>pt</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2368"><span class='Ref_To_Local'>m</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<span class='Directive'>#ifdef</span> GEODEBUG 
    <a href="../../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span><span class='String'>"dist_ps- line is A=%g B=%g C=%g from (point) slope (%f,%f) %g\n"</span><span class='Delimiter'>, 
</span>           <a href="geo_ops.c.html#LN2369"><span class='Ref_To_Local'>ln</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN91"><span class='Ref_to_Member'>A</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2369"><span class='Ref_To_Local'>ln</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN92"><span class='Ref_to_Member'>B</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2369"><span class='Ref_To_Local'>ln</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN93"><span class='Ref_to_Member'>C</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2366"><span class='Ref_to_Parameter'>pt</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2366"><span class='Ref_to_Parameter'>pt</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2368"><span class='Ref_To_Local'>m</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
 
    <span class='Comment_Multi_Line'>/* 
     * Calculate distance to the line segment or to the nearest endpoint of 
     * the segment. 
     */ 
</span> 
    <span class='Comment_Multi_Line'>/* intersection is on the line segment? */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="geo_ops.c.html#LN2372"><span class='Ref_To_Local'>ip</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN73"><span class='Ref_to_Proto'>interpt_sl</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2366"><span class='Ref_to_Parameter'>lseg</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2369"><span class='Ref_To_Local'>ln</span></a><span class='Parentheses'>))</span> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* yes, so use distance to the intersection point */ 
</span>        <a href="geo_ops.c.html#LN2370"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN181"><span class='Ref_to_Proto'>point_dt</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2366"><span class='Ref_to_Parameter'>pt</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2372"><span class='Ref_To_Local'>ip</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#ifdef</span> GEODEBUG 
        <a href="../../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span><span class='String'>"dist_ps- distance is %f to intersection point is (%f,%f)\n"</span><span class='Delimiter'>, 
</span>               <a href="geo_ops.c.html#LN2370"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2372"><span class='Ref_To_Local'>ip</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2372"><span class='Ref_To_Local'>ip</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* no, so use distance to the nearer endpoint */ 
</span>        <a href="geo_ops.c.html#LN2370"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN181"><span class='Ref_to_Proto'>point_dt</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2366"><span class='Ref_to_Parameter'>pt</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2366"><span class='Ref_to_Parameter'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN2371"><span class='Ref_To_Local'>tmpdist</span></a> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN181"><span class='Ref_to_Proto'>point_dt</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2366"><span class='Ref_to_Parameter'>pt</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2366"><span class='Ref_to_Parameter'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2371"><span class='Ref_To_Local'>tmpdist</span></a> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN2370"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>) 
</span>            <a href="geo_ops.c.html#LN2370"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN2371"><span class='Ref_To_Local'>tmpdist</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>return</span> <a href="geo_ops.c.html#LN2370"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dist_ps_internal &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Distance from a point to a path 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN2422"></a><span class='Declare_Function'>dist_ppath</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2424"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>pt</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2425"></a>    <a href="../../../include/utils/geo_decls.h.html#LN76"><span class='Ref_to_Typedef'>PATH</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>path</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN149"><span class='Ref_to_Macro'>PG_GETARG_PATH_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2426"></a>    <a href="../../../include/c.h.html#LN380"><span class='Ref_to_Typedef'>float8</span></a>      <span class='Declare_Local'>result</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Operator'>.</span><span class='Number'>0</span><span class='Delimiter'>;</span>   <span class='Comment_Single_Line'>/* keep compiler quiet */ 
</span><a name="LN2427"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>have_min</span> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span><a name="LN2428"></a>    <a href="../../../include/c.h.html#LN380"><span class='Ref_to_Typedef'>float8</span></a>      <span class='Declare_Local'>tmp</span><span class='Delimiter'>; 
</span><a name="LN2429"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN2430"></a>    <a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a>        <span class='Declare_Local'>lseg</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2425"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN79"><span class='Ref_to_Member'>npts</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>case</span> <span class='Number'>0</span><span class='Operator'>: 
</span>            <span class='Comment_Multi_Line'>/* no points in path? then result is undefined... */ 
</span>            <a href="../../../include/fmgr.h.html#LN304"><span class='Ref_to_Macro'>PG_RETURN_NULL</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <span class='Number'>1</span><span class='Operator'>: 
</span>            <span class='Comment_Multi_Line'>/* one point in path? then get distance between two points... */ 
</span>            <a href="geo_ops.c.html#LN2426"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN181"><span class='Ref_to_Proto'>point_dt</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2424"><span class='Ref_To_Local'>pt</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2425"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>default</span><span class='Operator'>: 
</span>            <span class='Comment_Multi_Line'>/* make sure the path makes sense... */ 
</span>            <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2425"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN79"><span class='Ref_to_Member'>npts</span></a> <span class='Operator'>&GT; </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * the distance from a point to a path is the smallest distance 
             * from the point to any of its constituent segments. 
             */ 
</span>            <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2429"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN2429"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN2425"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN79"><span class='Ref_to_Member'>npts</span></a><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN2429"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span><a name="LN2451"></a>                <span class='Keyword'>int</span>         <span class='Declare_Local'>iprev</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2429"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                    <a href="geo_ops.c.html#LN2451"><span class='Ref_To_Local'>iprev</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN2429"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>                <span class='Control'>else</span> 
                <span class='Delimiter'>{ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="geo_ops.c.html#LN2425"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN80"><span class='Ref_to_Member'>closed</span></a><span class='Parentheses'>) 
</span>                        <span class='Control'>continue</span><span class='Delimiter'>; 
</span>                    <a href="geo_ops.c.html#LN2451"><span class='Ref_To_Local'>iprev</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN2425"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN79"><span class='Ref_to_Member'>npts</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* include the closure segment */ 
</span>                <span class='Delimiter'>} 
</span> 
                <a href="geo_ops.c.html#LN70"><span class='Ref_to_Proto'>statlseg_construct</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2430"><span class='Ref_To_Local'>lseg</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2425"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN2451"><span class='Ref_To_Local'>iprev</span></a><span class='Delimiter'>], </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2425"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN2429"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="geo_ops.c.html#LN2428"><span class='Ref_To_Local'>tmp</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN76"><span class='Ref_to_Proto'>dist_ps_internal</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2424"><span class='Ref_To_Local'>pt</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2430"><span class='Ref_To_Local'>lseg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="geo_ops.c.html#LN2427"><span class='Ref_To_Local'>have_min</span></a> <span class='Operator'>|| </span><a href="geo_ops.c.html#LN2428"><span class='Ref_To_Local'>tmp</span></a> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN2426"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <a href="geo_ops.c.html#LN2426"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN2428"><span class='Ref_To_Local'>tmp</span></a><span class='Delimiter'>; 
</span>                    <a href="geo_ops.c.html#LN2427"><span class='Ref_To_Local'>have_min</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;path-&GT;npts;i++ &raquo; </span> 
            <span class='Control'>break</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch path-&GT;npts &raquo; </span> 
    <a href="../../../include/fmgr.h.html#LN325"><span class='Ref_to_Macro'>PG_RETURN_FLOAT8</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2426"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dist_ppath &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Distance from a point to a box 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN2479"></a><span class='Declare_Function'>dist_pb</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2481"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>pt</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2482"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2483"></a>    <a href="../../../include/c.h.html#LN380"><span class='Ref_to_Typedef'>float8</span></a>      <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span><a name="LN2484"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>near</span><span class='Delimiter'>; 
</span> 
    <span class='Keyword'>near </span><span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN136"><span class='Ref_to_Macro'>DatumGetPointP</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN585"><span class='Ref_to_Macro'>DirectFunctionCall2</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2929"><span class='Ref_to_Func'>close_pb</span></a><span class='Delimiter'>, 
</span>                                              <a href="../../../include/utils/geo_decls.h.html#LN137"><span class='Ref_to_Macro'>PointPGetDatum</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2481"><span class='Ref_To_Local'>pt</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                              <a href="../../../include/utils/geo_decls.h.html#LN159"><span class='Ref_to_Macro'>BoxPGetDatum</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2482"><span class='Ref_To_Local'>box</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN2483"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN181"><span class='Ref_to_Proto'>point_dt</span></a><span class='Parentheses'>(</span><span class='Keyword'>near</span><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2481"><span class='Ref_To_Local'>pt</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN325"><span class='Ref_to_Macro'>PG_RETURN_FLOAT8</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2483"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Distance from a lseg to a line 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN2498"></a><span class='Declare_Function'>dist_sl</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2500"></a>    <a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>lseg</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN143"><span class='Ref_to_Macro'>PG_GETARG_LSEG_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2501"></a>    <a href="../../../include/utils/geo_decls.h.html#LN89"><span class='Ref_to_Typedef'>LINE</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>line</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN155"><span class='Ref_to_Macro'>PG_GETARG_LINE_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2502"></a>    <a href="../../../include/c.h.html#LN380"><span class='Ref_to_Typedef'>float8</span></a>      <span class='Declare_Local'>result</span><span class='Delimiter'>, 
</span><a name="LN2503"></a>                <span class='Declare_Local'>d2</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN74"><span class='Ref_to_Proto'>has_interpt_sl</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2500"><span class='Ref_To_Local'>lseg</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2501"><span class='Ref_To_Local'>line</span></a><span class='Parentheses'>))</span> 
        <a href="geo_ops.c.html#LN2502"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Operator'>.</span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="geo_ops.c.html#LN2502"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN75"><span class='Ref_to_Proto'>dist_pl_internal</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2500"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>], </span><a href="geo_ops.c.html#LN2501"><span class='Ref_To_Local'>line</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN2503"><span class='Ref_To_Local'>d2</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN75"><span class='Ref_to_Proto'>dist_pl_internal</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2500"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>], </span><a href="geo_ops.c.html#LN2501"><span class='Ref_To_Local'>line</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* XXX shouldn't we take the min not max? */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2503"><span class='Ref_To_Local'>d2</span></a> <span class='Operator'>&GT; </span><a href="geo_ops.c.html#LN2502"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>) 
</span>            <a href="geo_ops.c.html#LN2502"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN2503"><span class='Ref_To_Local'>d2</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../../include/fmgr.h.html#LN325"><span class='Ref_to_Macro'>PG_RETURN_FLOAT8</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2502"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dist_sl &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Distance from a lseg to a box 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN2523"></a><span class='Declare_Function'>dist_sb</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2525"></a>    <a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>lseg</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN143"><span class='Ref_to_Macro'>PG_GETARG_LSEG_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2526"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2527"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>tmp</span><span class='Delimiter'>; 
</span><a name="LN2528"></a>    <a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>       <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN2527"><span class='Ref_To_Local'>tmp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN136"><span class='Ref_to_Macro'>DatumGetPointP</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN585"><span class='Ref_to_Macro'>DirectFunctionCall2</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3048"><span class='Ref_to_Func'>close_sb</span></a><span class='Delimiter'>, 
</span>                                             <a href="../../../include/utils/geo_decls.h.html#LN142"><span class='Ref_to_Macro'>LsegPGetDatum</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2525"><span class='Ref_To_Local'>lseg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                             <a href="../../../include/utils/geo_decls.h.html#LN159"><span class='Ref_to_Macro'>BoxPGetDatum</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2526"><span class='Ref_To_Local'>box</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN2528"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN585"><span class='Ref_to_Macro'>DirectFunctionCall2</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2478"><span class='Ref_to_Func'>dist_pb</span></a><span class='Delimiter'>, 
</span>                                 <a href="../../../include/utils/geo_decls.h.html#LN137"><span class='Ref_to_Macro'>PointPGetDatum</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2527"><span class='Ref_To_Local'>tmp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                 <a href="../../../include/utils/geo_decls.h.html#LN159"><span class='Ref_to_Macro'>BoxPGetDatum</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2526"><span class='Ref_To_Local'>box</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN312"><span class='Ref_to_Macro'>PG_RETURN_DATUM</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2528"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Distance from a line to a box 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN2544"></a><span class='Declare_Function'>dist_lb</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><span class='Directive'>#ifdef</span> NOT_USED 
<a name="LN2547"></a>    <a href="../../../include/utils/geo_decls.h.html#LN89"><span class='Ref_to_Typedef'>LINE</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>line</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN155"><span class='Ref_to_Macro'>PG_GETARG_LINE_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2548"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
 
    <span class='Comment_Multi_Line'>/* need to think about this one for a while */ 
</span>    <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>            <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_FEATURE_NOT_SUPPORTED<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>             <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"function \"dist_lb\" not implemented"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN304"><span class='Ref_to_Macro'>PG_RETURN_NULL</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Distance from a circle to a polygon 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN2563"></a><span class='Declare_Function'>dist_cpoly</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2565"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>circle</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN172"><span class='Ref_to_Macro'>PG_GETARG_CIRCLE_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2566"></a>    <a href="../../../include/utils/geo_decls.h.html#LN112"><span class='Ref_to_Typedef'>POLYGON</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>poly</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN166"><span class='Ref_to_Macro'>PG_GETARG_POLYGON_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2567"></a>    <a href="../../../include/c.h.html#LN380"><span class='Ref_to_Typedef'>float8</span></a>      <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* calculate distance to center, and subtract radius */ 
</span>    <a href="geo_ops.c.html#LN2567"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN80"><span class='Ref_to_Proto'>dist_ppoly_internal</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2565"><span class='Ref_To_Local'>circle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2566"><span class='Ref_To_Local'>poly</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN2567"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>-= </span><a href="geo_ops.c.html#LN2565"><span class='Ref_To_Local'>circle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN126"><span class='Ref_to_Member'>radius</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2567"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <a href="geo_ops.c.html#LN2567"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN325"><span class='Ref_to_Macro'>PG_RETURN_FLOAT8</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2567"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Distance from a point to a polygon 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN2583"></a><span class='Declare_Function'>dist_ppoly</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2585"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>point</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2586"></a>    <a href="../../../include/utils/geo_decls.h.html#LN112"><span class='Ref_to_Typedef'>POLYGON</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>poly</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN166"><span class='Ref_to_Macro'>PG_GETARG_POLYGON_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2587"></a>    <a href="../../../include/c.h.html#LN380"><span class='Ref_to_Typedef'>float8</span></a>      <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN2587"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN80"><span class='Ref_to_Proto'>dist_ppoly_internal</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2585"><span class='Ref_To_Local'>point</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2586"><span class='Ref_To_Local'>poly</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN325"><span class='Ref_to_Macro'>PG_RETURN_FLOAT8</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2587"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN2595"></a><span class='Declare_Function'>dist_polyp</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2597"></a>    <a href="../../../include/utils/geo_decls.h.html#LN112"><span class='Ref_to_Typedef'>POLYGON</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>poly</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN166"><span class='Ref_to_Macro'>PG_GETARG_POLYGON_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2598"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>point</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2599"></a>    <a href="../../../include/c.h.html#LN380"><span class='Ref_to_Typedef'>float8</span></a>      <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN2599"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN80"><span class='Ref_to_Proto'>dist_ppoly_internal</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2598"><span class='Ref_To_Local'>point</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2597"><span class='Ref_To_Local'>poly</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN325"><span class='Ref_to_Macro'>PG_RETURN_FLOAT8</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2599"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>static double 
</span><a name="LN2607"></a><span class='Declare_Function'>dist_ppoly_internal</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pt</span><span class='Delimiter'>, </span><a href="../../../include/utils/geo_decls.h.html#LN112"><span class='Ref_to_Typedef'>POLYGON</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>poly</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2609"></a>    <a href="../../../include/c.h.html#LN380"><span class='Ref_to_Typedef'>float8</span></a>      <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span><a name="LN2610"></a>    <a href="../../../include/c.h.html#LN380"><span class='Ref_to_Typedef'>float8</span></a>      <span class='Declare_Local'>d</span><span class='Delimiter'>; 
</span><a name="LN2611"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN2612"></a>    <a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a>        <span class='Declare_Local'>seg</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN40"><span class='Ref_to_Proto'>point_inside</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2607"><span class='Ref_to_Parameter'>pt</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2607"><span class='Ref_to_Parameter'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN115"><span class='Ref_to_Member'>npts</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2607"><span class='Ref_to_Parameter'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span><span class='Directive'>#ifdef</span> GEODEBUG 
        <a href="../../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span><span class='String'>"dist_ppoly_internal- point inside of polygon\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
        <span class='Control'>return</span> <span class='Number'>0</span><span class='Operator'>.</span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* initialize distance with segment between first and last points */ 
</span>    <a href="geo_ops.c.html#LN2612"><span class='Ref_To_Local'>seg</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN2607"><span class='Ref_to_Parameter'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN2612"><span class='Ref_To_Local'>seg</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN2607"><span class='Ref_to_Parameter'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN2612"><span class='Ref_To_Local'>seg</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN2607"><span class='Ref_to_Parameter'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN2607"><span class='Ref_to_Parameter'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN115"><span class='Ref_to_Member'>npts</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN2612"><span class='Ref_To_Local'>seg</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN2607"><span class='Ref_to_Parameter'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN2607"><span class='Ref_to_Parameter'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN115"><span class='Ref_to_Member'>npts</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN2609"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN76"><span class='Ref_to_Proto'>dist_ps_internal</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2607"><span class='Ref_to_Parameter'>pt</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2612"><span class='Ref_To_Local'>seg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#ifdef</span> GEODEBUG 
    <a href="../../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span><span class='String'>"dist_ppoly_internal- segment 0/n distance is %f\n"</span><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2609"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
 
    <span class='Comment_Multi_Line'>/* check distances for other segments */ 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2611"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2611"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN2607"><span class='Ref_to_Parameter'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN115"><span class='Ref_to_Member'>npts</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN2611"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="geo_ops.c.html#LN2612"><span class='Ref_To_Local'>seg</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN2607"><span class='Ref_to_Parameter'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN2611"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN2612"><span class='Ref_To_Local'>seg</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN2607"><span class='Ref_to_Parameter'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN2611"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN2612"><span class='Ref_To_Local'>seg</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN2607"><span class='Ref_to_Parameter'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN2611"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN2612"><span class='Ref_To_Local'>seg</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN2607"><span class='Ref_to_Parameter'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN2611"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN2610"><span class='Ref_To_Local'>d</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN76"><span class='Ref_to_Proto'>dist_ps_internal</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2607"><span class='Ref_to_Parameter'>pt</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2612"><span class='Ref_To_Local'>seg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#ifdef</span> GEODEBUG 
        <a href="../../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span><span class='String'>"dist_ppoly_internal- segment %d distance is %f\n"</span><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2611"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2610"><span class='Ref_To_Local'>d</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2610"><span class='Ref_To_Local'>d</span></a> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN2609"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>) 
</span>            <a href="geo_ops.c.html#LN2609"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN2610"><span class='Ref_To_Local'>d</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>return</span> <a href="geo_ops.c.html#LN2609"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dist_ppoly_internal &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/*--------------------------------------------------------------------- 
 *      interpt_ 
 *              Intersection point of objects. 
 *              We choose to ignore the "point" of intersection between 
 *                lines and boxes, since there are typically two. 
 *-------------------------------------------------------------------*/ 
</span> 
<span class='Comment_Multi_Line'>/* Get intersection point of lseg and line; returns NULL if no intersection */ 
</span><span class='Keyword'>static </span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>* 
</span><a name="LN2660"></a><span class='Declare_Function'>interpt_sl</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>lseg</span><span class='Delimiter'>, </span><a href="../../../include/utils/geo_decls.h.html#LN89"><span class='Ref_to_Typedef'>LINE</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>line</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2662"></a>    <a href="../../../include/utils/geo_decls.h.html#LN89"><span class='Ref_to_Typedef'>LINE</span></a>        <span class='Declare_Local'>tmp</span><span class='Delimiter'>; 
</span><a name="LN2663"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>p</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN51"><span class='Ref_to_Proto'>line_construct_pts</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2662"><span class='Ref_To_Local'>tmp</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2660"><span class='Ref_to_Parameter'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>], </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2660"><span class='Ref_to_Parameter'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN2663"><span class='Ref_To_Local'>p</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN77"><span class='Ref_to_Proto'>line_interpt_internal</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2662"><span class='Ref_To_Local'>tmp</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2660"><span class='Ref_to_Parameter'>line</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#ifdef</span> GEODEBUG 
    <a href="../../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span><span class='String'>"interpt_sl- segment is (%.*g %.*g) (%.*g %.*g)\n"</span><span class='Delimiter'>, 
</span>           DBL_DIG<span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2660"><span class='Ref_to_Parameter'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span>DBL_DIG<span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2660"><span class='Ref_to_Parameter'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>, </span>DBL_DIG<span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2660"><span class='Ref_to_Parameter'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span>DBL_DIG<span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2660"><span class='Ref_to_Parameter'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span><span class='String'>"interpt_sl- segment becomes line A=%.*g B=%.*g C=%.*g\n"</span><span class='Delimiter'>, 
</span>           DBL_DIG<span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2662"><span class='Ref_To_Local'>tmp</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN91"><span class='Ref_to_Member'>A</span></a><span class='Delimiter'>, </span>DBL_DIG<span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2662"><span class='Ref_To_Local'>tmp</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN92"><span class='Ref_to_Member'>B</span></a><span class='Delimiter'>, </span>DBL_DIG<span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2662"><span class='Ref_To_Local'>tmp</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN93"><span class='Ref_to_Member'>C</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN525"><span class='Ref_to_Macro'>PointerIsValid</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2663"><span class='Ref_To_Local'>p</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><span class='Directive'>#ifdef</span> GEODEBUG 
        <a href="../../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span><span class='String'>"interpt_sl- intersection point is (%.*g %.*g)\n"</span><span class='Delimiter'>, </span>DBL_DIG<span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2663"><span class='Ref_To_Local'>p</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span>DBL_DIG<span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2663"><span class='Ref_To_Local'>p</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN54"><span class='Ref_to_Proto'>on_ps_internal</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2663"><span class='Ref_To_Local'>p</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2660"><span class='Ref_to_Parameter'>lseg</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span><span class='Directive'>#ifdef</span> GEODEBUG 
            <a href="../../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span><span class='String'>"interpt_sl- intersection point is on segment\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
            <a href="geo_ops.c.html#LN2663"><span class='Ref_To_Local'>p</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>return</span> <a href="geo_ops.c.html#LN2663"><span class='Ref_To_Local'>p</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end interpt_sl &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* variant: just indicate if intersection point exists */ 
</span><span class='Keyword'>static bool 
</span><a name="LN2693"></a><span class='Declare_Function'>has_interpt_sl</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>lseg</span><span class='Delimiter'>, </span><a href="../../../include/utils/geo_decls.h.html#LN89"><span class='Ref_to_Typedef'>LINE</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>line</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2695"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>tmp</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN2695"><span class='Ref_To_Local'>tmp</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN73"><span class='Ref_to_Proto'>interpt_sl</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2693"><span class='Ref_to_Parameter'>lseg</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2693"><span class='Ref_to_Parameter'>line</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2695"><span class='Ref_To_Local'>tmp</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/*--------------------------------------------------------------------- 
 *      close_ 
 *              Point of closest proximity between objects. 
 *-------------------------------------------------------------------*/ 
</span> 
<span class='Comment_Multi_Line'>/* close_pl - 
 *      The intersection point of a perpendicular of the line 
 *      through the point. 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN2713"></a><span class='Declare_Function'>close_pl</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2715"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>pt</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2716"></a>    <a href="../../../include/utils/geo_decls.h.html#LN89"><span class='Ref_to_Typedef'>LINE</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>line</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN155"><span class='Ref_to_Macro'>PG_GETARG_LINE_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2717"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span><a name="LN2718"></a>    <a href="../../../include/utils/geo_decls.h.html#LN89"><span class='Ref_to_Typedef'>LINE</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>tmp</span><span class='Delimiter'>; 
</span><a name="LN2719"></a>    <span class='Keyword'>double</span>      <span class='Declare_Local'>invm</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN2717"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN35"><span class='Ref_to_Macro'>FPzero</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2716"><span class='Ref_To_Local'>line</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN92"><span class='Ref_to_Member'>B</span></a><span class='Parentheses'>))</span>        <span class='Comment_Single_Line'>/* vertical? */ 
</span>    <span class='Delimiter'>{ 
</span>        <a href="geo_ops.c.html#LN2717"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN2716"><span class='Ref_To_Local'>line</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN93"><span class='Ref_to_Member'>C</span></a><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN2717"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN2715"><span class='Ref_To_Local'>pt</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
</span>        <a href="../../../include/utils/geo_decls.h.html#LN139"><span class='Ref_to_Macro'>PG_RETURN_POINT_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2717"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN35"><span class='Ref_to_Macro'>FPzero</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2716"><span class='Ref_To_Local'>line</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN91"><span class='Ref_to_Member'>A</span></a><span class='Parentheses'>))</span>        <span class='Comment_Single_Line'>/* horizontal? */ 
</span>    <span class='Delimiter'>{ 
</span>        <a href="geo_ops.c.html#LN2717"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN2715"><span class='Ref_To_Local'>pt</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN2717"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN2716"><span class='Ref_To_Local'>line</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN93"><span class='Ref_to_Member'>C</span></a><span class='Delimiter'>; 
</span>        <a href="../../../include/utils/geo_decls.h.html#LN139"><span class='Ref_to_Macro'>PG_RETURN_POINT_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2717"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Comment_Multi_Line'>/* drop a perpendicular and find the intersection point */ 
</span> 
    <span class='Comment_Multi_Line'>/* invert and flip the sign on the slope to get a perpendicular */ 
</span>    <a href="geo_ops.c.html#LN2719"><span class='Ref_To_Local'>invm</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN2716"><span class='Ref_To_Local'>line</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN92"><span class='Ref_to_Member'>B</span></a> <span class='Operator'>/ </span><a href="geo_ops.c.html#LN2716"><span class='Ref_To_Local'>line</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN91"><span class='Ref_to_Member'>A</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN2718"><span class='Ref_To_Local'>tmp</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN50"><span class='Ref_to_Proto'>line_construct_pm</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2715"><span class='Ref_To_Local'>pt</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2719"><span class='Ref_To_Local'>invm</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN2717"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN77"><span class='Ref_to_Proto'>line_interpt_internal</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2718"><span class='Ref_To_Local'>tmp</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2716"><span class='Ref_To_Local'>line</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2717"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/utils/geo_decls.h.html#LN139"><span class='Ref_to_Macro'>PG_RETURN_POINT_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2717"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end close_pl &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* close_ps() 
 * Closest point on line segment to specified point. 
 * Take the closest endpoint if the point is left, right, 
 *  above, or below the segment, otherwise find the intersection 
 *  point of the segment and its perpendicular through the point. 
 * 
 * Some tricky code here, relying on boolean expressions 
 *  evaluating to only zero or one to use as an array index. 
 *      bug fixes by gthaker@atl.lmco.com; May 1, 1998 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN2757"></a><span class='Declare_Function'>close_ps</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2759"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>pt</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2760"></a>    <a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>lseg</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN143"><span class='Ref_to_Macro'>PG_GETARG_LSEG_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2761"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>result</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN2762"></a>    <a href="../../../include/utils/geo_decls.h.html#LN89"><span class='Ref_to_Typedef'>LINE</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>tmp</span><span class='Delimiter'>; 
</span><a name="LN2763"></a>    <span class='Keyword'>double</span>      <span class='Declare_Local'>invm</span><span class='Delimiter'>; 
</span><a name="LN2764"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>xh</span><span class='Delimiter'>, 
</span><a name="LN2765"></a>                <span class='Declare_Local'>yh</span><span class='Delimiter'>; 
</span> 
<span class='Directive'>#ifdef</span> GEODEBUG 
    <a href="../../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span><span class='String'>"close_sp:pt-&GT;x %f pt-&GT;y %f\nlseg(0).x %f lseg(0).y %f  lseg(1).x %f lseg(1).y %f\n"</span><span class='Delimiter'>, 
</span>           <a href="geo_ops.c.html#LN2759"><span class='Ref_To_Local'>pt</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2759"><span class='Ref_To_Local'>pt</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2760"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2760"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>, 
</span>           <a href="geo_ops.c.html#LN2760"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2760"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
 
    <span class='Comment_Multi_Line'>/* xh (or yh) is the index of upper x( or y) end point of lseg */ 
</span>    <span class='Comment_Multi_Line'>/* !xh (or !yh) is the index of lower x( or y) end point of lseg */ 
</span>    <a href="geo_ops.c.html#LN2764"><span class='Ref_To_Local'>xh</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN2760"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN2760"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN2765"><span class='Ref_To_Local'>yh</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN2760"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN2760"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN36"><span class='Ref_to_Macro'>FPeq</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2760"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2760"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>))</span>       <span class='Comment_Single_Line'>/* vertical? */ 
</span>    <span class='Delimiter'>{ 
</span><span class='Directive'>#ifdef</span> GEODEBUG 
        <a href="../../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span><span class='String'>"close_ps- segment is vertical\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
        <span class='Comment_Multi_Line'>/* first check if point is below or above the entire lseg. */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2759"><span class='Ref_To_Local'>pt</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN2760"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Operator'>!</span><a href="geo_ops.c.html#LN2765"><span class='Ref_To_Local'>yh</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>) 
</span>            <a href="geo_ops.c.html#LN2761"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN58"><span class='Ref_to_Proto'>point_copy</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2760"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Operator'>!</span><a href="geo_ops.c.html#LN2765"><span class='Ref_To_Local'>yh</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; </span><span class='Comment_Single_Line'>/* below the lseg */ 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2759"><span class='Ref_To_Local'>pt</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>&GT; </span><a href="geo_ops.c.html#LN2760"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN2765"><span class='Ref_To_Local'>yh</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>) 
</span>            <a href="geo_ops.c.html#LN2761"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN58"><span class='Ref_to_Proto'>point_copy</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2760"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN2765"><span class='Ref_To_Local'>yh</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>;</span>  <span class='Comment_Single_Line'>/* above the lseg */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2761"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <a href="../../../include/utils/geo_decls.h.html#LN139"><span class='Ref_to_Macro'>PG_RETURN_POINT_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2761"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* point lines along (to left or right) of the vertical lseg. */ 
</span> 
        <a href="geo_ops.c.html#LN2761"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN2761"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN2760"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN2761"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN2759"><span class='Ref_To_Local'>pt</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
</span>        <a href="../../../include/utils/geo_decls.h.html#LN139"><span class='Ref_to_Macro'>PG_RETURN_POINT_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2761"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if FPeq(lseg-&GT;p[0].x,lse... &raquo; </span> 
    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN36"><span class='Ref_to_Macro'>FPeq</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2760"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2760"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>))</span>  <span class='Comment_Single_Line'>/* horizontal? */ 
</span>    <span class='Delimiter'>{ 
</span><span class='Directive'>#ifdef</span> GEODEBUG 
        <a href="../../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span><span class='String'>"close_ps- segment is horizontal\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
        <span class='Comment_Multi_Line'>/* first check if point is left or right of the entire lseg. */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2759"><span class='Ref_To_Local'>pt</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN2760"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Operator'>!</span><a href="geo_ops.c.html#LN2764"><span class='Ref_To_Local'>xh</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>) 
</span>            <a href="geo_ops.c.html#LN2761"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN58"><span class='Ref_to_Proto'>point_copy</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2760"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Operator'>!</span><a href="geo_ops.c.html#LN2764"><span class='Ref_To_Local'>xh</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; </span><span class='Comment_Single_Line'>/* left of the lseg */ 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2759"><span class='Ref_To_Local'>pt</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>&GT; </span><a href="geo_ops.c.html#LN2760"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN2764"><span class='Ref_To_Local'>xh</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>) 
</span>            <a href="geo_ops.c.html#LN2761"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN58"><span class='Ref_to_Proto'>point_copy</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2760"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN2764"><span class='Ref_To_Local'>xh</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>;</span>  <span class='Comment_Single_Line'>/* right of the lseg */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2761"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <a href="../../../include/utils/geo_decls.h.html#LN139"><span class='Ref_to_Macro'>PG_RETURN_POINT_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2761"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* point lines along (at top or below) the horiz. lseg. */ 
</span>        <a href="geo_ops.c.html#LN2761"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN2761"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN2759"><span class='Ref_To_Local'>pt</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN2761"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN2760"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
</span>        <a href="../../../include/utils/geo_decls.h.html#LN139"><span class='Ref_to_Macro'>PG_RETURN_POINT_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2761"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * vert. and horiz. cases are down, now check if the closest point is one 
     * of the end points or someplace on the lseg. 
     */ 
</span> 
    <a href="geo_ops.c.html#LN2763"><span class='Ref_To_Local'>invm</span></a> <span class='Operator'>= -</span><span class='Number'>1</span><span class='Operator'>.</span><span class='Number'>0</span> <span class='Operator'>/ </span><a href="../../../include/utils/geo_decls.h.html#LN182"><span class='Ref_to_Proto'>point_sl</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2760"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2760"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN2762"><span class='Ref_To_Local'>tmp</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN50"><span class='Ref_to_Proto'>line_construct_pm</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2760"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Operator'>!</span><a href="geo_ops.c.html#LN2765"><span class='Ref_To_Local'>yh</span></a><span class='Delimiter'>], </span><a href="geo_ops.c.html#LN2763"><span class='Ref_To_Local'>invm</span></a><span class='Parentheses'>)</span><span class='Delimiter'>;</span>       <span class='Comment_Multi_Line'>/* lower edge of the 
                                                         * "band" */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2759"><span class='Ref_To_Local'>pt</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>&LT; </span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2762"><span class='Ref_To_Local'>tmp</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN91"><span class='Ref_to_Member'>A</span></a> <span class='Operator'>* </span><a href="geo_ops.c.html#LN2759"><span class='Ref_To_Local'>pt</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>+ </span><a href="geo_ops.c.html#LN2762"><span class='Ref_To_Local'>tmp</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN93"><span class='Ref_to_Member'>C</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{</span>                           <span class='Comment_Single_Line'>/* we are below the lower edge */ 
</span>        <a href="geo_ops.c.html#LN2761"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN58"><span class='Ref_to_Proto'>point_copy</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2760"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Operator'>!</span><a href="geo_ops.c.html#LN2765"><span class='Ref_To_Local'>yh</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>;</span>     <span class='Comment_Multi_Line'>/* below the lseg, take lower 
                                                 * end pt */ 
</span><span class='Directive'>#ifdef</span> GEODEBUG 
        <a href="../../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span><span class='String'>"close_ps below: tmp A %f  B %f   C %f\n"</span><span class='Delimiter'>, 
</span>               <a href="geo_ops.c.html#LN2762"><span class='Ref_To_Local'>tmp</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN91"><span class='Ref_to_Member'>A</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2762"><span class='Ref_To_Local'>tmp</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN92"><span class='Ref_to_Member'>B</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2762"><span class='Ref_To_Local'>tmp</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN93"><span class='Ref_to_Member'>C</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
        <a href="../../../include/utils/geo_decls.h.html#LN139"><span class='Ref_to_Macro'>PG_RETURN_POINT_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2761"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="geo_ops.c.html#LN2762"><span class='Ref_To_Local'>tmp</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN50"><span class='Ref_to_Proto'>line_construct_pm</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2760"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN2765"><span class='Ref_To_Local'>yh</span></a><span class='Delimiter'>], </span><a href="geo_ops.c.html#LN2763"><span class='Ref_To_Local'>invm</span></a><span class='Parentheses'>)</span><span class='Delimiter'>;</span>        <span class='Comment_Multi_Line'>/* upper edge of the 
                                                         * "band" */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2759"><span class='Ref_To_Local'>pt</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>&GT; </span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2762"><span class='Ref_To_Local'>tmp</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN91"><span class='Ref_to_Member'>A</span></a> <span class='Operator'>* </span><a href="geo_ops.c.html#LN2759"><span class='Ref_To_Local'>pt</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>+ </span><a href="geo_ops.c.html#LN2762"><span class='Ref_To_Local'>tmp</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN93"><span class='Ref_to_Member'>C</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{</span>                           <span class='Comment_Single_Line'>/* we are below the lower edge */ 
</span>        <a href="geo_ops.c.html#LN2761"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN58"><span class='Ref_to_Proto'>point_copy</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2760"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN2765"><span class='Ref_To_Local'>yh</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>;</span>      <span class='Comment_Multi_Line'>/* above the lseg, take higher 
                                                 * end pt */ 
</span><span class='Directive'>#ifdef</span> GEODEBUG 
        <a href="../../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span><span class='String'>"close_ps above: tmp A %f  B %f   C %f\n"</span><span class='Delimiter'>, 
</span>               <a href="geo_ops.c.html#LN2762"><span class='Ref_To_Local'>tmp</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN91"><span class='Ref_to_Member'>A</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2762"><span class='Ref_To_Local'>tmp</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN92"><span class='Ref_to_Member'>B</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2762"><span class='Ref_To_Local'>tmp</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN93"><span class='Ref_to_Member'>C</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
        <a href="../../../include/utils/geo_decls.h.html#LN139"><span class='Ref_to_Macro'>PG_RETURN_POINT_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2761"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * at this point the "normal" from point will hit lseg. The closest point 
     * will be somewhere on the lseg 
     */ 
</span>    <a href="geo_ops.c.html#LN2762"><span class='Ref_To_Local'>tmp</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN50"><span class='Ref_to_Proto'>line_construct_pm</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2759"><span class='Ref_To_Local'>pt</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2763"><span class='Ref_To_Local'>invm</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#ifdef</span> GEODEBUG 
    <a href="../../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span><span class='String'>"close_ps- tmp A %f  B %f   C %f\n"</span><span class='Delimiter'>, 
</span>           <a href="geo_ops.c.html#LN2762"><span class='Ref_To_Local'>tmp</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN91"><span class='Ref_to_Member'>A</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2762"><span class='Ref_To_Local'>tmp</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN92"><span class='Ref_to_Member'>B</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2762"><span class='Ref_To_Local'>tmp</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN93"><span class='Ref_to_Member'>C</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
    <a href="geo_ops.c.html#LN2761"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN73"><span class='Ref_to_Proto'>interpt_sl</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2760"><span class='Ref_To_Local'>lseg</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2762"><span class='Ref_To_Local'>tmp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * ordinarily we should always find an intersection point, but that could 
     * fail in the presence of NaN coordinates, and perhaps even from simple 
     * roundoff issues.  Return a SQL NULL if so. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2761"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="../../../include/fmgr.h.html#LN304"><span class='Ref_to_Macro'>PG_RETURN_NULL</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
<span class='Directive'>#ifdef</span> GEODEBUG 
    <a href="../../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span><span class='String'>"close_ps- result.x %f  result.y %f\n"</span><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2761"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2761"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
    <a href="../../../include/utils/geo_decls.h.html#LN139"><span class='Ref_to_Macro'>PG_RETURN_POINT_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2761"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end close_ps &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* close_lseg() 
 * Closest point to l1 on l2. 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN2879"></a><span class='Declare_Function'>close_lseg</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2881"></a>    <a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>l1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN143"><span class='Ref_to_Macro'>PG_GETARG_LSEG_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2882"></a>    <a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>l2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN143"><span class='Ref_to_Macro'>PG_GETARG_LSEG_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2883"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>result</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN2884"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>       <span class='Declare_Local'>point</span><span class='Delimiter'>; 
</span><a name="LN2885"></a>    <span class='Keyword'>double</span>      <span class='Declare_Local'>dist</span><span class='Delimiter'>; 
</span><a name="LN2886"></a>    <span class='Keyword'>double</span>      <span class='Declare_Local'>d</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN2886"><span class='Ref_To_Local'>d</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN76"><span class='Ref_to_Proto'>dist_ps_internal</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2881"><span class='Ref_To_Local'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>], </span><a href="geo_ops.c.html#LN2882"><span class='Ref_To_Local'>l2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN2885"><span class='Ref_To_Local'>dist</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN2886"><span class='Ref_To_Local'>d</span></a><span class='Delimiter'>; 
</span>    memcpy<span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2884"><span class='Ref_To_Local'>point</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2881"><span class='Ref_To_Local'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>], </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="geo_ops.c.html#LN2886"><span class='Ref_To_Local'>d</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN76"><span class='Ref_to_Proto'>dist_ps_internal</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2881"><span class='Ref_To_Local'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>], </span><a href="geo_ops.c.html#LN2882"><span class='Ref_To_Local'>l2</span></a><span class='Parentheses'>))</span> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN2885"><span class='Ref_To_Local'>dist</span></a><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="geo_ops.c.html#LN2885"><span class='Ref_To_Local'>dist</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN2886"><span class='Ref_To_Local'>d</span></a><span class='Delimiter'>; 
</span>        memcpy<span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2884"><span class='Ref_To_Local'>point</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2881"><span class='Ref_To_Local'>l1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>], </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN76"><span class='Ref_to_Proto'>dist_ps_internal</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2882"><span class='Ref_To_Local'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>], </span><a href="geo_ops.c.html#LN2881"><span class='Ref_To_Local'>l1</span></a><span class='Parentheses'>) </span><span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN2885"><span class='Ref_To_Local'>dist</span></a><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="geo_ops.c.html#LN2883"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN136"><span class='Ref_to_Macro'>DatumGetPointP</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN585"><span class='Ref_to_Macro'>DirectFunctionCall2</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2756"><span class='Ref_to_Func'>close_ps</span></a><span class='Delimiter'>, 
</span>                                                    <a href="../../../include/utils/geo_decls.h.html#LN137"><span class='Ref_to_Macro'>PointPGetDatum</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2882"><span class='Ref_To_Local'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                                    <a href="../../../include/utils/geo_decls.h.html#LN142"><span class='Ref_to_Macro'>LsegPGetDatum</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2881"><span class='Ref_To_Local'>l1</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        memcpy<span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2884"><span class='Ref_To_Local'>point</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2883"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN2883"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN136"><span class='Ref_to_Macro'>DatumGetPointP</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN585"><span class='Ref_to_Macro'>DirectFunctionCall2</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2756"><span class='Ref_to_Func'>close_ps</span></a><span class='Delimiter'>, 
</span>                                                    <a href="../../../include/utils/geo_decls.h.html#LN137"><span class='Ref_to_Macro'>PointPGetDatum</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2884"><span class='Ref_To_Local'>point</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                                    <a href="../../../include/utils/geo_decls.h.html#LN142"><span class='Ref_to_Macro'>LsegPGetDatum</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2882"><span class='Ref_To_Local'>l2</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN76"><span class='Ref_to_Proto'>dist_ps_internal</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2882"><span class='Ref_To_Local'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>], </span><a href="geo_ops.c.html#LN2881"><span class='Ref_To_Local'>l1</span></a><span class='Parentheses'>) </span><span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN2885"><span class='Ref_To_Local'>dist</span></a><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="geo_ops.c.html#LN2883"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN136"><span class='Ref_to_Macro'>DatumGetPointP</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN585"><span class='Ref_to_Macro'>DirectFunctionCall2</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2756"><span class='Ref_to_Func'>close_ps</span></a><span class='Delimiter'>, 
</span>                                                    <a href="../../../include/utils/geo_decls.h.html#LN137"><span class='Ref_to_Macro'>PointPGetDatum</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2882"><span class='Ref_To_Local'>l2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                                    <a href="../../../include/utils/geo_decls.h.html#LN142"><span class='Ref_to_Macro'>LsegPGetDatum</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2881"><span class='Ref_To_Local'>l1</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        memcpy<span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2884"><span class='Ref_To_Local'>point</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2883"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN2883"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN136"><span class='Ref_to_Macro'>DatumGetPointP</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN585"><span class='Ref_to_Macro'>DirectFunctionCall2</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2756"><span class='Ref_to_Func'>close_ps</span></a><span class='Delimiter'>, 
</span>                                                    <a href="../../../include/utils/geo_decls.h.html#LN137"><span class='Ref_to_Macro'>PointPGetDatum</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2884"><span class='Ref_To_Local'>point</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                                    <a href="../../../include/utils/geo_decls.h.html#LN142"><span class='Ref_to_Macro'>LsegPGetDatum</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2882"><span class='Ref_To_Local'>l2</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2883"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="geo_ops.c.html#LN2883"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN58"><span class='Ref_to_Proto'>point_copy</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2884"><span class='Ref_To_Local'>point</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/geo_decls.h.html#LN139"><span class='Ref_to_Macro'>PG_RETURN_POINT_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2883"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end close_lseg &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* close_pb() 
 * Closest point on or in box to specified point. 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN2930"></a><span class='Declare_Function'>close_pb</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2932"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>pt</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2933"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2934"></a>    <a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a>        <span class='Declare_Local'>lseg</span><span class='Delimiter'>, 
</span><a name="LN2935"></a>                <span class='Declare_Local'>seg</span><span class='Delimiter'>; 
</span><a name="LN2936"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>       <span class='Declare_Local'>point</span><span class='Delimiter'>; 
</span><a name="LN2937"></a>    <span class='Keyword'>double</span>      <span class='Declare_Local'>dist</span><span class='Delimiter'>, 
</span><a name="LN2938"></a>                <span class='Declare_Local'>d</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN398"><span class='Ref_to_Macro'>DatumGetBool</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN585"><span class='Ref_to_Macro'>DirectFunctionCall2</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3159"><span class='Ref_to_Func'>on_pb</span></a><span class='Delimiter'>, 
</span>                                         <a href="../../../include/utils/geo_decls.h.html#LN137"><span class='Ref_to_Macro'>PointPGetDatum</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2932"><span class='Ref_To_Local'>pt</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                         <a href="../../../include/utils/geo_decls.h.html#LN159"><span class='Ref_to_Macro'>BoxPGetDatum</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2933"><span class='Ref_To_Local'>box</span></a><span class='Parentheses'>))))</span> 
        <a href="../../../include/utils/geo_decls.h.html#LN139"><span class='Ref_to_Macro'>PG_RETURN_POINT_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2932"><span class='Ref_To_Local'>pt</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* pairwise check lseg distances */ 
</span>    <a href="geo_ops.c.html#LN2936"><span class='Ref_To_Local'>point</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN2933"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN2936"><span class='Ref_To_Local'>point</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN2933"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN70"><span class='Ref_to_Proto'>statlseg_construct</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2934"><span class='Ref_To_Local'>lseg</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2933"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2936"><span class='Ref_To_Local'>point</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN2937"><span class='Ref_To_Local'>dist</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN76"><span class='Ref_to_Proto'>dist_ps_internal</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2932"><span class='Ref_To_Local'>pt</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2934"><span class='Ref_To_Local'>lseg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN70"><span class='Ref_to_Proto'>statlseg_construct</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2935"><span class='Ref_To_Local'>seg</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2933"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2936"><span class='Ref_To_Local'>point</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="geo_ops.c.html#LN2938"><span class='Ref_To_Local'>d</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN76"><span class='Ref_to_Proto'>dist_ps_internal</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2932"><span class='Ref_To_Local'>pt</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2935"><span class='Ref_To_Local'>seg</span></a><span class='Parentheses'>))</span> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN2937"><span class='Ref_To_Local'>dist</span></a><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="geo_ops.c.html#LN2937"><span class='Ref_To_Local'>dist</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN2938"><span class='Ref_To_Local'>d</span></a><span class='Delimiter'>; 
</span>        memcpy<span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2934"><span class='Ref_To_Local'>lseg</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2935"><span class='Ref_To_Local'>seg</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2934"><span class='Ref_To_Local'>lseg</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="geo_ops.c.html#LN2936"><span class='Ref_To_Local'>point</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN2933"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN2936"><span class='Ref_To_Local'>point</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN2933"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN70"><span class='Ref_to_Proto'>statlseg_construct</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2935"><span class='Ref_To_Local'>seg</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2933"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2936"><span class='Ref_To_Local'>point</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="geo_ops.c.html#LN2938"><span class='Ref_To_Local'>d</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN76"><span class='Ref_to_Proto'>dist_ps_internal</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2932"><span class='Ref_To_Local'>pt</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2935"><span class='Ref_To_Local'>seg</span></a><span class='Parentheses'>))</span> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN2937"><span class='Ref_To_Local'>dist</span></a><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="geo_ops.c.html#LN2937"><span class='Ref_To_Local'>dist</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN2938"><span class='Ref_To_Local'>d</span></a><span class='Delimiter'>; 
</span>        memcpy<span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2934"><span class='Ref_To_Local'>lseg</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2935"><span class='Ref_To_Local'>seg</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2934"><span class='Ref_To_Local'>lseg</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="geo_ops.c.html#LN70"><span class='Ref_to_Proto'>statlseg_construct</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2935"><span class='Ref_To_Local'>seg</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2933"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2936"><span class='Ref_To_Local'>point</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="geo_ops.c.html#LN2938"><span class='Ref_To_Local'>d</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN76"><span class='Ref_to_Proto'>dist_ps_internal</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2932"><span class='Ref_To_Local'>pt</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2935"><span class='Ref_To_Local'>seg</span></a><span class='Parentheses'>))</span> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN2937"><span class='Ref_To_Local'>dist</span></a><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="geo_ops.c.html#LN2937"><span class='Ref_To_Local'>dist</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN2938"><span class='Ref_To_Local'>d</span></a><span class='Delimiter'>; 
</span>        memcpy<span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2934"><span class='Ref_To_Local'>lseg</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2935"><span class='Ref_To_Local'>seg</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2934"><span class='Ref_To_Local'>lseg</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../../include/fmgr.h.html#LN312"><span class='Ref_to_Macro'>PG_RETURN_DATUM</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN585"><span class='Ref_to_Macro'>DirectFunctionCall2</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2756"><span class='Ref_to_Func'>close_ps</span></a><span class='Delimiter'>, 
</span>                                        <a href="../../../include/utils/geo_decls.h.html#LN137"><span class='Ref_to_Macro'>PointPGetDatum</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2932"><span class='Ref_To_Local'>pt</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                        <a href="../../../include/utils/geo_decls.h.html#LN142"><span class='Ref_to_Macro'>LsegPGetDatum</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2934"><span class='Ref_To_Local'>lseg</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end close_pb &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* close_sl() 
 * Closest point on line to line segment. 
 * 
 * XXX THIS CODE IS WRONG 
 * The code is actually calculating the point on the line segment 
 *  which is backwards from the routine naming convention. 
 * Copied code to new routine close_ls() but haven't fixed this one yet. 
 * - thomas 1998-01-31 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN2989"></a><span class='Declare_Function'>close_sl</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><span class='Directive'>#ifdef</span> NOT_USED 
<a name="LN2992"></a>    <a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>lseg</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN143"><span class='Ref_to_Macro'>PG_GETARG_LSEG_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2993"></a>    <a href="../../../include/utils/geo_decls.h.html#LN89"><span class='Ref_to_Typedef'>LINE</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>line</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN155"><span class='Ref_to_Macro'>PG_GETARG_LINE_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2994"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span><a name="LN2995"></a>    <a href="../../../include/c.h.html#LN380"><span class='Ref_to_Typedef'>float8</span></a>      <span class='Declare_Local'>d1</span><span class='Delimiter'>, 
</span><a name="LN2996"></a>                <span class='Declare_Local'>d2</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN2994"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN73"><span class='Ref_to_Proto'>interpt_sl</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2992"><span class='Ref_To_Local'>lseg</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN2993"><span class='Ref_To_Local'>line</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2994"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>) 
</span>        <a href="../../../include/utils/geo_decls.h.html#LN139"><span class='Ref_to_Macro'>PG_RETURN_POINT_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2994"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN2995"><span class='Ref_To_Local'>d1</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN75"><span class='Ref_to_Proto'>dist_pl_internal</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2992"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>], </span><a href="geo_ops.c.html#LN2993"><span class='Ref_To_Local'>line</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN2996"><span class='Ref_To_Local'>d2</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN75"><span class='Ref_to_Proto'>dist_pl_internal</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2992"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>], </span><a href="geo_ops.c.html#LN2993"><span class='Ref_To_Local'>line</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2995"><span class='Ref_To_Local'>d1</span></a> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN2996"><span class='Ref_To_Local'>d2</span></a><span class='Parentheses'>) 
</span>        <a href="geo_ops.c.html#LN2994"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN58"><span class='Ref_to_Proto'>point_copy</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2992"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="geo_ops.c.html#LN2994"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN58"><span class='Ref_to_Proto'>point_copy</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN2992"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/geo_decls.h.html#LN139"><span class='Ref_to_Macro'>PG_RETURN_POINT_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2994"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
 
    <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>            <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_FEATURE_NOT_SUPPORTED<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>             <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"function \"close_sl\" not implemented"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN304"><span class='Ref_to_Macro'>PG_RETURN_NULL</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end close_sl &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* close_ls() 
 * Closest point on line segment to line. 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN3023"></a><span class='Declare_Function'>close_ls</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3025"></a>    <a href="../../../include/utils/geo_decls.h.html#LN89"><span class='Ref_to_Typedef'>LINE</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>line</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN155"><span class='Ref_to_Macro'>PG_GETARG_LINE_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3026"></a>    <a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>lseg</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN143"><span class='Ref_to_Macro'>PG_GETARG_LSEG_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3027"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span><a name="LN3028"></a>    <a href="../../../include/c.h.html#LN380"><span class='Ref_to_Typedef'>float8</span></a>      <span class='Declare_Local'>d1</span><span class='Delimiter'>, 
</span><a name="LN3029"></a>                <span class='Declare_Local'>d2</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN3027"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN73"><span class='Ref_to_Proto'>interpt_sl</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3026"><span class='Ref_To_Local'>lseg</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3025"><span class='Ref_To_Local'>line</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3027"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>) 
</span>        <a href="../../../include/utils/geo_decls.h.html#LN139"><span class='Ref_to_Macro'>PG_RETURN_POINT_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3027"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN3028"><span class='Ref_To_Local'>d1</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN75"><span class='Ref_to_Proto'>dist_pl_internal</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3026"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>], </span><a href="geo_ops.c.html#LN3025"><span class='Ref_To_Local'>line</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN3029"><span class='Ref_To_Local'>d2</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN75"><span class='Ref_to_Proto'>dist_pl_internal</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3026"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>], </span><a href="geo_ops.c.html#LN3025"><span class='Ref_To_Local'>line</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3028"><span class='Ref_To_Local'>d1</span></a> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN3029"><span class='Ref_To_Local'>d2</span></a><span class='Parentheses'>) 
</span>        <a href="geo_ops.c.html#LN3027"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN58"><span class='Ref_to_Proto'>point_copy</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3026"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="geo_ops.c.html#LN3027"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN58"><span class='Ref_to_Proto'>point_copy</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3026"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/geo_decls.h.html#LN139"><span class='Ref_to_Macro'>PG_RETURN_POINT_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3027"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end close_ls &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* close_sb() 
 * Closest point on or in box to line segment. 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN3049"></a><span class='Declare_Function'>close_sb</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3051"></a>    <a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>lseg</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN143"><span class='Ref_to_Macro'>PG_GETARG_LSEG_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3052"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3053"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>       <span class='Declare_Local'>point</span><span class='Delimiter'>; 
</span><a name="LN3054"></a>    <a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a>        <span class='Declare_Local'>bseg</span><span class='Delimiter'>, 
</span><a name="LN3055"></a>                <span class='Declare_Local'>seg</span><span class='Delimiter'>; 
</span><a name="LN3056"></a>    <span class='Keyword'>double</span>      <span class='Declare_Local'>dist</span><span class='Delimiter'>, 
</span><a name="LN3057"></a>                <span class='Declare_Local'>d</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* segment intersects box? then just return closest point to center */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN398"><span class='Ref_to_Macro'>DatumGetBool</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN585"><span class='Ref_to_Macro'>DirectFunctionCall2</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3272"><span class='Ref_to_Func'>inter_sb</span></a><span class='Delimiter'>, 
</span>                                         <a href="../../../include/utils/geo_decls.h.html#LN142"><span class='Ref_to_Macro'>LsegPGetDatum</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3051"><span class='Ref_To_Local'>lseg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                         <a href="../../../include/utils/geo_decls.h.html#LN159"><span class='Ref_to_Macro'>BoxPGetDatum</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3052"><span class='Ref_To_Local'>box</span></a><span class='Parentheses'>))))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="geo_ops.c.html#LN72"><span class='Ref_to_Proto'>box_cn</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3053"><span class='Ref_To_Local'>point</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3052"><span class='Ref_To_Local'>box</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../../include/fmgr.h.html#LN312"><span class='Ref_to_Macro'>PG_RETURN_DATUM</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN585"><span class='Ref_to_Macro'>DirectFunctionCall2</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2756"><span class='Ref_to_Func'>close_ps</span></a><span class='Delimiter'>, 
</span>                                            <a href="../../../include/utils/geo_decls.h.html#LN137"><span class='Ref_to_Macro'>PointPGetDatum</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3053"><span class='Ref_To_Local'>point</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                            <a href="../../../include/utils/geo_decls.h.html#LN142"><span class='Ref_to_Macro'>LsegPGetDatum</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3051"><span class='Ref_To_Local'>lseg</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* pairwise check lseg distances */ 
</span>    <a href="geo_ops.c.html#LN3053"><span class='Ref_To_Local'>point</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN3052"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN3053"><span class='Ref_To_Local'>point</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN3052"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN70"><span class='Ref_to_Proto'>statlseg_construct</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3054"><span class='Ref_To_Local'>bseg</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3052"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3053"><span class='Ref_To_Local'>point</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN3056"><span class='Ref_To_Local'>dist</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN53"><span class='Ref_to_Proto'>lseg_dt</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3051"><span class='Ref_To_Local'>lseg</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3054"><span class='Ref_To_Local'>bseg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN70"><span class='Ref_to_Proto'>statlseg_construct</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3055"><span class='Ref_To_Local'>seg</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3052"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3053"><span class='Ref_To_Local'>point</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="geo_ops.c.html#LN3057"><span class='Ref_To_Local'>d</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN53"><span class='Ref_to_Proto'>lseg_dt</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3051"><span class='Ref_To_Local'>lseg</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3055"><span class='Ref_To_Local'>seg</span></a><span class='Parentheses'>))</span> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN3056"><span class='Ref_To_Local'>dist</span></a><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="geo_ops.c.html#LN3056"><span class='Ref_To_Local'>dist</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN3057"><span class='Ref_To_Local'>d</span></a><span class='Delimiter'>; 
</span>        memcpy<span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3054"><span class='Ref_To_Local'>bseg</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3055"><span class='Ref_To_Local'>seg</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3054"><span class='Ref_To_Local'>bseg</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="geo_ops.c.html#LN3053"><span class='Ref_To_Local'>point</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN3052"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN3053"><span class='Ref_To_Local'>point</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN3052"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN70"><span class='Ref_to_Proto'>statlseg_construct</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3055"><span class='Ref_To_Local'>seg</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3052"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3053"><span class='Ref_To_Local'>point</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="geo_ops.c.html#LN3057"><span class='Ref_To_Local'>d</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN53"><span class='Ref_to_Proto'>lseg_dt</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3051"><span class='Ref_To_Local'>lseg</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3055"><span class='Ref_To_Local'>seg</span></a><span class='Parentheses'>))</span> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN3056"><span class='Ref_To_Local'>dist</span></a><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="geo_ops.c.html#LN3056"><span class='Ref_To_Local'>dist</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN3057"><span class='Ref_To_Local'>d</span></a><span class='Delimiter'>; 
</span>        memcpy<span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3054"><span class='Ref_To_Local'>bseg</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3055"><span class='Ref_To_Local'>seg</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3054"><span class='Ref_To_Local'>bseg</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="geo_ops.c.html#LN70"><span class='Ref_to_Proto'>statlseg_construct</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3055"><span class='Ref_To_Local'>seg</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3052"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3053"><span class='Ref_To_Local'>point</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="geo_ops.c.html#LN3057"><span class='Ref_To_Local'>d</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN53"><span class='Ref_to_Proto'>lseg_dt</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3051"><span class='Ref_To_Local'>lseg</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3055"><span class='Ref_To_Local'>seg</span></a><span class='Parentheses'>))</span> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN3056"><span class='Ref_To_Local'>dist</span></a><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="geo_ops.c.html#LN3056"><span class='Ref_To_Local'>dist</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN3057"><span class='Ref_To_Local'>d</span></a><span class='Delimiter'>; 
</span>        memcpy<span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3054"><span class='Ref_To_Local'>bseg</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3055"><span class='Ref_To_Local'>seg</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3054"><span class='Ref_To_Local'>bseg</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* OK, we now have the closest line segment on the box boundary */ 
</span>    <a href="../../../include/fmgr.h.html#LN312"><span class='Ref_to_Macro'>PG_RETURN_DATUM</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN585"><span class='Ref_to_Macro'>DirectFunctionCall2</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN2878"><span class='Ref_to_Func'>close_lseg</span></a><span class='Delimiter'>, 
</span>                                        <a href="../../../include/utils/geo_decls.h.html#LN142"><span class='Ref_to_Macro'>LsegPGetDatum</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3051"><span class='Ref_To_Local'>lseg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                        <a href="../../../include/utils/geo_decls.h.html#LN142"><span class='Ref_to_Macro'>LsegPGetDatum</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3054"><span class='Ref_To_Local'>bseg</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end close_sb &raquo; </span> 
 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN3106"></a><span class='Declare_Function'>close_lb</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><span class='Directive'>#ifdef</span> NOT_USED 
<a name="LN3109"></a>    <a href="../../../include/utils/geo_decls.h.html#LN89"><span class='Ref_to_Typedef'>LINE</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>line</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN155"><span class='Ref_to_Macro'>PG_GETARG_LINE_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3110"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
 
    <span class='Comment_Multi_Line'>/* think about this one for a while */ 
</span>    <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>            <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_FEATURE_NOT_SUPPORTED<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>             <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"function \"close_lb\" not implemented"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN304"><span class='Ref_to_Macro'>PG_RETURN_NULL</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/*--------------------------------------------------------------------- 
 *      on_ 
 *              Whether one object lies completely within another. 
 *-------------------------------------------------------------------*/ 
</span> 
<span class='Comment_Multi_Line'>/* on_pl - 
 *      Does the point satisfy the equation? 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN3130"></a><span class='Declare_Function'>on_pl</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3132"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>pt</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3133"></a>    <a href="../../../include/utils/geo_decls.h.html#LN89"><span class='Ref_to_Typedef'>LINE</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>line</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN155"><span class='Ref_to_Macro'>PG_GETARG_LINE_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN35"><span class='Ref_to_Macro'>FPzero</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3133"><span class='Ref_To_Local'>line</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN91"><span class='Ref_to_Member'>A</span></a> <span class='Operator'>* </span><a href="geo_ops.c.html#LN3132"><span class='Ref_To_Local'>pt</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>+ </span><a href="geo_ops.c.html#LN3133"><span class='Ref_To_Local'>line</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN92"><span class='Ref_to_Member'>B</span></a> <span class='Operator'>* </span><a href="geo_ops.c.html#LN3132"><span class='Ref_To_Local'>pt</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>+ </span><a href="geo_ops.c.html#LN3133"><span class='Ref_To_Local'>line</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN93"><span class='Ref_to_Member'>C</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/* on_ps - 
 *      Determine colinearity by detecting a triangle inequality. 
 * This algorithm seems to behave nicely even with lsb residues - tgl 1997-07-09 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN3144"></a><span class='Declare_Function'>on_ps</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3146"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>pt</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3147"></a>    <a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>lseg</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN143"><span class='Ref_to_Macro'>PG_GETARG_LSEG_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN54"><span class='Ref_to_Proto'>on_ps_internal</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3146"><span class='Ref_To_Local'>pt</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3147"><span class='Ref_To_Local'>lseg</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>static bool 
</span><a name="LN3153"></a><span class='Declare_Function'>on_ps_internal</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pt</span><span class='Delimiter'>, </span><a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>lseg</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> <a href="../../../include/utils/geo_decls.h.html#LN36"><span class='Ref_to_Macro'>FPeq</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN181"><span class='Ref_to_Proto'>point_dt</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3153"><span class='Ref_to_Parameter'>pt</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3153"><span class='Ref_to_Parameter'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Parentheses'>) </span><span class='Operator'>+ </span><a href="../../../include/utils/geo_decls.h.html#LN181"><span class='Ref_to_Proto'>point_dt</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3153"><span class='Ref_to_Parameter'>pt</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3153"><span class='Ref_to_Parameter'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                <a href="../../../include/utils/geo_decls.h.html#LN181"><span class='Ref_to_Proto'>point_dt</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3153"><span class='Ref_to_Parameter'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>], </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3153"><span class='Ref_to_Parameter'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN3160"></a><span class='Declare_Function'>on_pb</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3162"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>pt</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3163"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3162"><span class='Ref_To_Local'>pt</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>&LT;= </span><a href="geo_ops.c.html#LN3163"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>&& </span><a href="geo_ops.c.html#LN3162"><span class='Ref_To_Local'>pt</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>&GT;= </span><a href="geo_ops.c.html#LN3163"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>&& 
</span>                   <a href="geo_ops.c.html#LN3162"><span class='Ref_To_Local'>pt</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>&LT;= </span><a href="geo_ops.c.html#LN3163"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>&& </span><a href="geo_ops.c.html#LN3162"><span class='Ref_To_Local'>pt</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>&GT;= </span><a href="geo_ops.c.html#LN3163"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN3170"></a><span class='Declare_Function'>box_contain_pt</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3172"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3173"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>pt</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3173"><span class='Ref_To_Local'>pt</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>&LT;= </span><a href="geo_ops.c.html#LN3172"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>&& </span><a href="geo_ops.c.html#LN3173"><span class='Ref_To_Local'>pt</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>&GT;= </span><a href="geo_ops.c.html#LN3172"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>&& 
</span>                   <a href="geo_ops.c.html#LN3173"><span class='Ref_To_Local'>pt</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>&LT;= </span><a href="geo_ops.c.html#LN3172"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>&& </span><a href="geo_ops.c.html#LN3173"><span class='Ref_To_Local'>pt</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>&GT;= </span><a href="geo_ops.c.html#LN3172"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* on_ppath - 
 *      Whether a point lies within (on) a polyline. 
 *      If open, we have to (groan) check each segment. 
 * (uses same algorithm as for point intersecting segment - tgl 1997-07-09) 
 *      If closed, we use the old O(n) ray method for point-in-polygon. 
 *              The ray is horizontal, from pt out to the right. 
 *              Each segment that crosses the ray counts as an 
 *              intersection; note that an endpoint or edge may touch 
 *              but not cross. 
 *              (we can do p-in-p in lg(n), but it takes preprocessing) 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN3191"></a><span class='Declare_Function'>on_ppath</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3193"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>pt</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3194"></a>    <a href="../../../include/utils/geo_decls.h.html#LN76"><span class='Ref_to_Typedef'>PATH</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>path</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN149"><span class='Ref_to_Macro'>PG_GETARG_PATH_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3195"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>, 
</span><a name="LN3196"></a>                <span class='Declare_Local'>n</span><span class='Delimiter'>; 
</span><a name="LN3197"></a>    <span class='Keyword'>double</span>      <span class='Declare_Local'>a</span><span class='Delimiter'>, 
</span><a name="LN3198"></a>                <span class='Declare_Local'>b</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/*-- OPEN --*/ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="geo_ops.c.html#LN3194"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN80"><span class='Ref_to_Member'>closed</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="geo_ops.c.html#LN3196"><span class='Ref_To_Local'>n</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN3194"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN79"><span class='Ref_to_Member'>npts</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN3197"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN181"><span class='Ref_to_Proto'>point_dt</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3193"><span class='Ref_To_Local'>pt</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3194"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3195"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN3195"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN3196"><span class='Ref_To_Local'>n</span></a><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN3195"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="geo_ops.c.html#LN3198"><span class='Ref_To_Local'>b</span></a> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN181"><span class='Ref_to_Proto'>point_dt</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3193"><span class='Ref_To_Local'>pt</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3194"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN3195"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN36"><span class='Ref_to_Macro'>FPeq</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3197"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>+ </span><a href="geo_ops.c.html#LN3198"><span class='Ref_To_Local'>b</span></a><span class='Delimiter'>, 
</span>                     <a href="../../../include/utils/geo_decls.h.html#LN181"><span class='Ref_to_Proto'>point_dt</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3194"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN3195"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>], </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3194"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN3195"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>)))</span> 
                <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="geo_ops.c.html#LN3197"><span class='Ref_To_Local'>a</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN3198"><span class='Ref_To_Local'>b</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/*-- CLOSED --*/ 
</span>    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN40"><span class='Ref_to_Proto'>point_inside</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3193"><span class='Ref_To_Local'>pt</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3194"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN79"><span class='Ref_to_Member'>npts</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3194"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end on_ppath &raquo; </span> 
 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN3221"></a><span class='Declare_Function'>on_sl</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3223"></a>    <a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>lseg</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN143"><span class='Ref_to_Macro'>PG_GETARG_LSEG_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3224"></a>    <a href="../../../include/utils/geo_decls.h.html#LN89"><span class='Ref_to_Typedef'>LINE</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>line</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN155"><span class='Ref_to_Macro'>PG_GETARG_LINE_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN398"><span class='Ref_to_Macro'>DatumGetBool</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN585"><span class='Ref_to_Macro'>DirectFunctionCall2</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3129"><span class='Ref_to_Func'>on_pl</span></a><span class='Delimiter'>, 
</span>                                                 <a href="../../../include/utils/geo_decls.h.html#LN137"><span class='Ref_to_Macro'>PointPGetDatum</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3223"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                                    <a href="../../../include/utils/geo_decls.h.html#LN154"><span class='Ref_to_Macro'>LinePGetDatum</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3224"><span class='Ref_To_Local'>line</span></a><span class='Parentheses'>)))</span> <span class='Operator'>&& 
</span>                   <a href="../../../include/postgres.h.html#LN398"><span class='Ref_to_Macro'>DatumGetBool</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN585"><span class='Ref_to_Macro'>DirectFunctionCall2</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3129"><span class='Ref_to_Func'>on_pl</span></a><span class='Delimiter'>, 
</span>                                                 <a href="../../../include/utils/geo_decls.h.html#LN137"><span class='Ref_to_Macro'>PointPGetDatum</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3223"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                                    <a href="../../../include/utils/geo_decls.h.html#LN154"><span class='Ref_to_Macro'>LinePGetDatum</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3224"><span class='Ref_To_Local'>line</span></a><span class='Parentheses'>))))</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN3235"></a><span class='Declare_Function'>on_sb</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3237"></a>    <a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>lseg</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN143"><span class='Ref_to_Macro'>PG_GETARG_LSEG_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3238"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN398"><span class='Ref_to_Macro'>DatumGetBool</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN585"><span class='Ref_to_Macro'>DirectFunctionCall2</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3159"><span class='Ref_to_Func'>on_pb</span></a><span class='Delimiter'>, 
</span>                                                 <a href="../../../include/utils/geo_decls.h.html#LN137"><span class='Ref_to_Macro'>PointPGetDatum</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3237"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                                    <a href="../../../include/utils/geo_decls.h.html#LN159"><span class='Ref_to_Macro'>BoxPGetDatum</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3238"><span class='Ref_To_Local'>box</span></a><span class='Parentheses'>)))</span> <span class='Operator'>&& 
</span>                   <a href="../../../include/postgres.h.html#LN398"><span class='Ref_to_Macro'>DatumGetBool</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN585"><span class='Ref_to_Macro'>DirectFunctionCall2</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3159"><span class='Ref_to_Func'>on_pb</span></a><span class='Delimiter'>, 
</span>                                                 <a href="../../../include/utils/geo_decls.h.html#LN137"><span class='Ref_to_Macro'>PointPGetDatum</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3237"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                                    <a href="../../../include/utils/geo_decls.h.html#LN159"><span class='Ref_to_Macro'>BoxPGetDatum</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3238"><span class='Ref_To_Local'>box</span></a><span class='Parentheses'>))))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/*--------------------------------------------------------------------- 
 *      inter_ 
 *              Whether one object intersects another. 
 *-------------------------------------------------------------------*/ 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN3254"></a><span class='Declare_Function'>inter_sl</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3256"></a>    <a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>lseg</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN143"><span class='Ref_to_Macro'>PG_GETARG_LSEG_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3257"></a>    <a href="../../../include/utils/geo_decls.h.html#LN89"><span class='Ref_to_Typedef'>LINE</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>line</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN155"><span class='Ref_to_Macro'>PG_GETARG_LINE_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN74"><span class='Ref_to_Proto'>has_interpt_sl</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3256"><span class='Ref_To_Local'>lseg</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3257"><span class='Ref_To_Local'>line</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* inter_sb() 
 * Do line segment and box intersect? 
 * 
 * Segment completely inside box counts as intersection. 
 * If you want only segments crossing box boundaries, 
 *  try converting box to path first. 
 * 
 * Optimize for non-intersection by checking for box intersection first. 
 * - thomas 1998-01-30 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN3273"></a><span class='Declare_Function'>inter_sb</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3275"></a>    <a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>lseg</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN143"><span class='Ref_to_Macro'>PG_GETARG_LSEG_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3276"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3277"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>         <span class='Declare_Local'>lbox</span><span class='Delimiter'>; 
</span><a name="LN3278"></a>    <a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a>        <span class='Declare_Local'>bseg</span><span class='Delimiter'>; 
</span><a name="LN3279"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>       <span class='Declare_Local'>point</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN3277"><span class='Ref_To_Local'>lbox</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="../../../interfaces/ecpg/pgtypeslib/numeric.c.html#LN11"><span class='Ref_to_Macro'>Min</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3275"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3275"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN3277"><span class='Ref_To_Local'>lbox</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="../../../interfaces/ecpg/pgtypeslib/numeric.c.html#LN11"><span class='Ref_to_Macro'>Min</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3275"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3275"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN3277"><span class='Ref_To_Local'>lbox</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="../../../interfaces/ecpg/pgtypeslib/numeric.c.html#LN10"><span class='Ref_to_Macro'>Max</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3275"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3275"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN3277"><span class='Ref_To_Local'>lbox</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="../../../interfaces/ecpg/pgtypeslib/numeric.c.html#LN10"><span class='Ref_to_Macro'>Max</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3275"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3275"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* nothing close to overlap? then not going to intersect */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="geo_ops.c.html#LN45"><span class='Ref_to_Proto'>box_ov</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3277"><span class='Ref_To_Local'>lbox</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3276"><span class='Ref_To_Local'>box</span></a><span class='Parentheses'>))</span> 
        <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* an endpoint of segment is inside box? then clearly intersects */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN398"><span class='Ref_to_Macro'>DatumGetBool</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN585"><span class='Ref_to_Macro'>DirectFunctionCall2</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3159"><span class='Ref_to_Func'>on_pb</span></a><span class='Delimiter'>, 
</span>                                         <a href="../../../include/utils/geo_decls.h.html#LN137"><span class='Ref_to_Macro'>PointPGetDatum</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3275"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                         <a href="../../../include/utils/geo_decls.h.html#LN159"><span class='Ref_to_Macro'>BoxPGetDatum</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3276"><span class='Ref_To_Local'>box</span></a><span class='Parentheses'>)))</span> <span class='Operator'>|| 
</span>        <a href="../../../include/postgres.h.html#LN398"><span class='Ref_to_Macro'>DatumGetBool</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN585"><span class='Ref_to_Macro'>DirectFunctionCall2</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3159"><span class='Ref_to_Func'>on_pb</span></a><span class='Delimiter'>, 
</span>                                         <a href="../../../include/utils/geo_decls.h.html#LN137"><span class='Ref_to_Macro'>PointPGetDatum</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3275"><span class='Ref_To_Local'>lseg</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                         <a href="../../../include/utils/geo_decls.h.html#LN159"><span class='Ref_to_Macro'>BoxPGetDatum</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3276"><span class='Ref_To_Local'>box</span></a><span class='Parentheses'>))))</span> 
        <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* pairwise check lseg intersections */ 
</span>    <a href="geo_ops.c.html#LN3279"><span class='Ref_To_Local'>point</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN3276"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN3279"><span class='Ref_To_Local'>point</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN3276"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN70"><span class='Ref_to_Proto'>statlseg_construct</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3278"><span class='Ref_To_Local'>bseg</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3276"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3279"><span class='Ref_To_Local'>point</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN52"><span class='Ref_to_Proto'>lseg_intersect_internal</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3278"><span class='Ref_To_Local'>bseg</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3275"><span class='Ref_To_Local'>lseg</span></a><span class='Parentheses'>))</span> 
        <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN70"><span class='Ref_to_Proto'>statlseg_construct</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3278"><span class='Ref_To_Local'>bseg</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3276"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3279"><span class='Ref_To_Local'>point</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN52"><span class='Ref_to_Proto'>lseg_intersect_internal</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3278"><span class='Ref_To_Local'>bseg</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3275"><span class='Ref_To_Local'>lseg</span></a><span class='Parentheses'>))</span> 
        <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN3279"><span class='Ref_To_Local'>point</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN3276"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN3279"><span class='Ref_To_Local'>point</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN3276"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN70"><span class='Ref_to_Proto'>statlseg_construct</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3278"><span class='Ref_To_Local'>bseg</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3276"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3279"><span class='Ref_To_Local'>point</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN52"><span class='Ref_to_Proto'>lseg_intersect_internal</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3278"><span class='Ref_To_Local'>bseg</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3275"><span class='Ref_To_Local'>lseg</span></a><span class='Parentheses'>))</span> 
        <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN70"><span class='Ref_to_Proto'>statlseg_construct</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3278"><span class='Ref_To_Local'>bseg</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3276"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3279"><span class='Ref_To_Local'>point</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN52"><span class='Ref_to_Proto'>lseg_intersect_internal</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3278"><span class='Ref_To_Local'>bseg</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3275"><span class='Ref_To_Local'>lseg</span></a><span class='Parentheses'>))</span> 
        <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* if we dropped through, no two segs intersected */ 
</span>    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end inter_sb &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* inter_lb() 
 * Do line and box intersect? 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN3328"></a><span class='Declare_Function'>inter_lb</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3330"></a>    <a href="../../../include/utils/geo_decls.h.html#LN89"><span class='Ref_to_Typedef'>LINE</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>line</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN155"><span class='Ref_to_Macro'>PG_GETARG_LINE_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3331"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3332"></a>    <a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a>        <span class='Declare_Local'>bseg</span><span class='Delimiter'>; 
</span><a name="LN3333"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>       <span class='Declare_Local'>p1</span><span class='Delimiter'>, 
</span><a name="LN3334"></a>                <span class='Declare_Local'>p2</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* pairwise check lseg intersections */ 
</span>    <a href="geo_ops.c.html#LN3333"><span class='Ref_To_Local'>p1</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN3331"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN3333"><span class='Ref_To_Local'>p1</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN3331"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN3334"><span class='Ref_To_Local'>p2</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN3331"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN3334"><span class='Ref_To_Local'>p2</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN3331"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN70"><span class='Ref_to_Proto'>statlseg_construct</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3332"><span class='Ref_To_Local'>bseg</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3333"><span class='Ref_To_Local'>p1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3334"><span class='Ref_To_Local'>p2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN74"><span class='Ref_to_Proto'>has_interpt_sl</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3332"><span class='Ref_To_Local'>bseg</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3330"><span class='Ref_To_Local'>line</span></a><span class='Parentheses'>))</span> 
        <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN3333"><span class='Ref_To_Local'>p1</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN3331"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN3333"><span class='Ref_To_Local'>p1</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN3331"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN70"><span class='Ref_to_Proto'>statlseg_construct</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3332"><span class='Ref_To_Local'>bseg</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3333"><span class='Ref_To_Local'>p1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3334"><span class='Ref_To_Local'>p2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN74"><span class='Ref_to_Proto'>has_interpt_sl</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3332"><span class='Ref_To_Local'>bseg</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3330"><span class='Ref_To_Local'>line</span></a><span class='Parentheses'>))</span> 
        <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN3334"><span class='Ref_To_Local'>p2</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN3331"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN3334"><span class='Ref_To_Local'>p2</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN3331"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN70"><span class='Ref_to_Proto'>statlseg_construct</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3332"><span class='Ref_To_Local'>bseg</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3333"><span class='Ref_To_Local'>p1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3334"><span class='Ref_To_Local'>p2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN74"><span class='Ref_to_Proto'>has_interpt_sl</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3332"><span class='Ref_To_Local'>bseg</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3330"><span class='Ref_To_Local'>line</span></a><span class='Parentheses'>))</span> 
        <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN3333"><span class='Ref_To_Local'>p1</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN3331"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN3333"><span class='Ref_To_Local'>p1</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN3331"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN70"><span class='Ref_to_Proto'>statlseg_construct</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3332"><span class='Ref_To_Local'>bseg</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3333"><span class='Ref_To_Local'>p1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3334"><span class='Ref_To_Local'>p2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN74"><span class='Ref_to_Proto'>has_interpt_sl</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3332"><span class='Ref_To_Local'>bseg</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3330"><span class='Ref_To_Local'>line</span></a><span class='Parentheses'>))</span> 
        <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* if we dropped through, no intersection */ 
</span>    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end inter_lb &raquo; </span> 
 
<span class='Comment_Multi_Line'>/*------------------------------------------------------------------ 
 * The following routines define a data type and operator class for 
 * POLYGONS .... Part of which (the polygon's bounding box) is built on 
 * top of the BOX data type. 
 * 
 * make_bound_box - create the bounding box for the input polygon 
 *------------------------------------------------------------------*/ 
</span> 
<span class='Comment_Multi_Line'>/*--------------------------------------------------------------------- 
 * Make the smallest bounding box for the given polygon. 
 *---------------------------------------------------------------------*/ 
</span><span class='Keyword'>static void 
</span><a name="LN3376"></a><span class='Declare_Function'>make_bound_box</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN112"><span class='Ref_to_Typedef'>POLYGON</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>poly</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3378"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN3379"></a>    <span class='Keyword'>double</span>      <span class='Declare_Local'>x1</span><span class='Delimiter'>, 
</span><a name="LN3380"></a>                <span class='Declare_Local'>y1</span><span class='Delimiter'>, 
</span><a name="LN3381"></a>                <span class='Declare_Local'>x2</span><span class='Delimiter'>, 
</span><a name="LN3382"></a>                <span class='Declare_Local'>y2</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3376"><span class='Ref_to_Parameter'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN115"><span class='Ref_to_Member'>npts</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="geo_ops.c.html#LN3381"><span class='Ref_To_Local'>x2</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN3379"><span class='Ref_To_Local'>x1</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN3376"><span class='Ref_to_Parameter'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN3382"><span class='Ref_To_Local'>y2</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN3380"><span class='Ref_To_Local'>y1</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN3376"><span class='Ref_to_Parameter'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3378"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN3378"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN3376"><span class='Ref_to_Parameter'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN115"><span class='Ref_to_Member'>npts</span></a><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN3378"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3376"><span class='Ref_to_Parameter'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN3378"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN3379"><span class='Ref_To_Local'>x1</span></a><span class='Parentheses'>) 
</span>                <a href="geo_ops.c.html#LN3379"><span class='Ref_To_Local'>x1</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN3376"><span class='Ref_to_Parameter'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN3378"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3376"><span class='Ref_to_Parameter'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN3378"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>&GT; </span><a href="geo_ops.c.html#LN3381"><span class='Ref_To_Local'>x2</span></a><span class='Parentheses'>) 
</span>                <a href="geo_ops.c.html#LN3381"><span class='Ref_To_Local'>x2</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN3376"><span class='Ref_to_Parameter'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN3378"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3376"><span class='Ref_to_Parameter'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN3378"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN3380"><span class='Ref_To_Local'>y1</span></a><span class='Parentheses'>) 
</span>                <a href="geo_ops.c.html#LN3380"><span class='Ref_To_Local'>y1</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN3376"><span class='Ref_to_Parameter'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN3378"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3376"><span class='Ref_to_Parameter'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN3378"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>&GT; </span><a href="geo_ops.c.html#LN3382"><span class='Ref_To_Local'>y2</span></a><span class='Parentheses'>) 
</span>                <a href="geo_ops.c.html#LN3382"><span class='Ref_To_Local'>y2</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN3376"><span class='Ref_to_Parameter'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN3378"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <a href="geo_ops.c.html#LN44"><span class='Ref_to_Proto'>box_fill</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3376"><span class='Ref_to_Parameter'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN116"><span class='Ref_to_Member'>boundbox</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3379"><span class='Ref_To_Local'>x1</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3381"><span class='Ref_To_Local'>x2</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3380"><span class='Ref_To_Local'>y1</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3382"><span class='Ref_To_Local'>y2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INVALID_PARAMETER_VALUE<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"cannot create bounding box for empty polygon"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end make_bound_box &raquo; </span> 
 
<span class='Comment_Multi_Line'>/*------------------------------------------------------------------ 
 * poly_in - read in the polygon from a string specification 
 * 
 *      External format: 
 *              "((x0,y0),...,(xn,yn))" 
 *              "x0,y0,...,xn,yn" 
 *              also supports the older style "(x1,...,xn,y1,...yn)" 
 *------------------------------------------------------------------*/ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN3417"></a><span class='Declare_Function'>poly_in</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3419"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>str</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN241"><span class='Ref_to_Macro'>PG_GETARG_CSTRING</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3420"></a>    <a href="../../../include/utils/geo_decls.h.html#LN112"><span class='Ref_to_Typedef'>POLYGON</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>poly</span><span class='Delimiter'>; 
</span><a name="LN3421"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>npts</span><span class='Delimiter'>; 
</span><a name="LN3422"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>size</span><span class='Delimiter'>; 
</span><a name="LN3423"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>base_size</span><span class='Delimiter'>; 
</span><a name="LN3424"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>isopen</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="geo_ops.c.html#LN3421"><span class='Ref_To_Local'>npts</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN65"><span class='Ref_to_Proto'>pair_count</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3419"><span class='Ref_To_Local'>str</span></a><span class='Delimiter'>, </span><span class='String'>','</span><span class='Parentheses'>))</span> <span class='Operator'>&LT;= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INVALID_TEXT_REPRESENTATION<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"invalid input syntax for type %s: \"%s\""</span><span class='Delimiter'>, 
</span>                        <span class='String'>"polygon"</span><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3419"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN3423"><span class='Ref_To_Local'>base_size</span></a> <span class='Operator'>= </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3420"><span class='Ref_To_Local'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="geo_ops.c.html#LN3421"><span class='Ref_To_Local'>npts</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN3422"><span class='Ref_To_Local'>size</span></a> <span class='Operator'>= </span><a href="../../../include/c.h.html#LN554"><span class='Ref_to_Macro'>offsetof</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN112"><span class='Ref_to_Typedef'>POLYGON</span></a><span class='Delimiter'>, </span>p<span class='Parentheses'>) </span><span class='Operator'>+</span><a href="geo_ops.c.html#LN3423"><span class='Ref_To_Local'>base_size</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Check for integer overflow */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3423"><span class='Ref_To_Local'>base_size</span></a> <span class='Operator'>/ </span><a href="geo_ops.c.html#LN3421"><span class='Ref_To_Local'>npts</span></a> <span class='Operator'>!= </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3420"><span class='Ref_To_Local'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Parentheses'>) </span><span class='Operator'>|| </span><a href="geo_ops.c.html#LN3422"><span class='Ref_To_Local'>size</span></a> <span class='Operator'>&LT;= </span><a href="geo_ops.c.html#LN3423"><span class='Ref_To_Local'>base_size</span></a><span class='Parentheses'>)</span> 
        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_PROGRAM_LIMIT_EXCEEDED<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"too many points requested"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN3420"><span class='Ref_To_Local'>poly</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN112"><span class='Ref_to_Typedef'>POLYGON</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3422"><span class='Ref_To_Local'>size</span></a><span class='Parentheses'>)</span><span class='Delimiter'>;</span>   <span class='Comment_Single_Line'>/* zero any holes */ 
</span> 
    <a href="../../../include/postgres.h.html#LN327"><span class='Ref_to_Macro'>SET_VARSIZE</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3420"><span class='Ref_To_Local'>poly</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3422"><span class='Ref_To_Local'>size</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN3420"><span class='Ref_To_Local'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN115"><span class='Ref_to_Member'>npts</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN3421"><span class='Ref_To_Local'>npts</span></a><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN66"><span class='Ref_to_Proto'>path_decode</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3419"><span class='Ref_To_Local'>str</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3421"><span class='Ref_To_Local'>npts</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3420"><span class='Ref_To_Local'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3424"><span class='Ref_To_Local'>isopen</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"polygon"</span><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3419"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN55"><span class='Ref_to_Proto'>make_bound_box</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3420"><span class='Ref_To_Local'>poly</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/geo_decls.h.html#LN168"><span class='Ref_to_Macro'>PG_RETURN_POLYGON_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3420"><span class='Ref_To_Local'>poly</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end poly_in &raquo; </span> 
 
<span class='Comment_Multi_Line'>/*--------------------------------------------------------------- 
 * poly_out - convert internal POLYGON representation to the 
 *            character string format "((f8,f8),...,(f8,f8))" 
 *---------------------------------------------------------------*/ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN3458"></a><span class='Declare_Function'>poly_out</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3460"></a>    <a href="../../../include/utils/geo_decls.h.html#LN112"><span class='Ref_to_Typedef'>POLYGON</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>poly</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN166"><span class='Ref_to_Macro'>PG_GETARG_POLYGON_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN321"><span class='Ref_to_Macro'>PG_RETURN_CSTRING</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN69"><span class='Ref_to_Proto'>path_encode</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN37"><span class='Ref_to_EnumConst'>PATH_CLOSED</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3460"><span class='Ref_To_Local'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN115"><span class='Ref_to_Member'>npts</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3460"><span class='Ref_To_Local'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 *      poly_recv           - converts external binary format to polygon 
 * 
 * External representation is int32 number of points, and the points. 
 * We recompute the bounding box on read, instead of trusting it to 
 * be valid.  (Checking it would take just as long, so may as well 
 * omit it from external representation.) 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN3474"></a><span class='Declare_Function'>poly_recv</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3476"></a>    <a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a><span class='Parentheses'>) </span><a href="../../../include/fmgr.h.html#LN240"><span class='Ref_to_Macro'>PG_GETARG_POINTER</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3477"></a>    <a href="../../../include/utils/geo_decls.h.html#LN112"><span class='Ref_to_Typedef'>POLYGON</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>poly</span><span class='Delimiter'>; 
</span><a name="LN3478"></a>    <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>npts</span><span class='Delimiter'>; 
</span><a name="LN3479"></a>    <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN3480"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>size</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN3478"><span class='Ref_To_Local'>npts</span></a> <span class='Operator'>= </span><a href="../../../include/libpq/pqformat.h.html#LN38"><span class='Ref_to_Proto'>pq_getmsgint</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3476"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3478"><span class='Ref_To_Local'>npts</span></a> <span class='Operator'>&LT;= </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="geo_ops.c.html#LN3478"><span class='Ref_To_Local'>npts</span></a> <span class='Operator'>&GT;= </span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a><span class='Parentheses'>)</span> <span class='Parentheses'>((</span>INT_MAX <span class='Operator'>- </span><a href="../../../include/c.h.html#LN554"><span class='Ref_to_Macro'>offsetof</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN112"><span class='Ref_to_Typedef'>POLYGON</span></a><span class='Delimiter'>, </span>p<span class='Parentheses'>))</span> <span class='Operator'>/ </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a><span class='Parentheses'>)))</span> 
        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INVALID_BINARY_REPRESENTATION<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>          <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"invalid number of points in external \"polygon\" value"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN3480"><span class='Ref_To_Local'>size</span></a> <span class='Operator'>= </span><a href="../../../include/c.h.html#LN554"><span class='Ref_to_Macro'>offsetof</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN112"><span class='Ref_to_Typedef'>POLYGON</span></a><span class='Delimiter'>, </span>p<span class='Parentheses'>) </span><span class='Operator'>+</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3477"><span class='Ref_To_Local'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="geo_ops.c.html#LN3478"><span class='Ref_To_Local'>npts</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN3477"><span class='Ref_To_Local'>poly</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN112"><span class='Ref_to_Typedef'>POLYGON</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3480"><span class='Ref_To_Local'>size</span></a><span class='Parentheses'>)</span><span class='Delimiter'>;</span>   <span class='Comment_Single_Line'>/* zero any holes */ 
</span> 
    <a href="../../../include/postgres.h.html#LN327"><span class='Ref_to_Macro'>SET_VARSIZE</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3477"><span class='Ref_To_Local'>poly</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3480"><span class='Ref_To_Local'>size</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN3477"><span class='Ref_To_Local'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN115"><span class='Ref_to_Member'>npts</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN3478"><span class='Ref_To_Local'>npts</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3479"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN3479"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN3478"><span class='Ref_To_Local'>npts</span></a><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN3479"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="geo_ops.c.html#LN3477"><span class='Ref_To_Local'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN3479"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="../../../include/libpq/pqformat.h.html#LN41"><span class='Ref_to_Proto'>pq_getmsgfloat8</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3476"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN3477"><span class='Ref_To_Local'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN3479"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="../../../include/libpq/pqformat.h.html#LN41"><span class='Ref_to_Proto'>pq_getmsgfloat8</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3476"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="geo_ops.c.html#LN55"><span class='Ref_to_Proto'>make_bound_box</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3477"><span class='Ref_To_Local'>poly</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/geo_decls.h.html#LN168"><span class='Ref_to_Macro'>PG_RETURN_POLYGON_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3477"><span class='Ref_To_Local'>poly</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end poly_recv &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 *      poly_send           - converts polygon to binary format 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN3509"></a><span class='Declare_Function'>poly_send</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3511"></a>    <a href="../../../include/utils/geo_decls.h.html#LN112"><span class='Ref_to_Typedef'>POLYGON</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>poly</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN166"><span class='Ref_to_Macro'>PG_GETARG_POLYGON_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3512"></a>    <a href="../../../include/lib/stringinfo.h.html#LN34"><span class='Ref_to_Struct'>StringInfoData</span></a> <span class='Declare_Local'>buf</span><span class='Delimiter'>; 
</span><a name="LN3513"></a>    <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/libpq/pqformat.h.html#LN31"><span class='Ref_to_Proto'>pq_begintypsend</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3512"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/libpq/pqformat.h.html#LN25"><span class='Ref_to_Proto'>pq_sendint</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3512"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3511"><span class='Ref_To_Local'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN115"><span class='Ref_to_Member'>npts</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3513"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN3513"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN3511"><span class='Ref_To_Local'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN115"><span class='Ref_to_Member'>npts</span></a><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN3513"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../../include/libpq/pqformat.h.html#LN28"><span class='Ref_to_Proto'>pq_sendfloat8</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3512"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3511"><span class='Ref_To_Local'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN3513"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../../include/libpq/pqformat.h.html#LN28"><span class='Ref_to_Proto'>pq_sendfloat8</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3512"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3511"><span class='Ref_To_Local'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN3513"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="../../../include/fmgr.h.html#LN328"><span class='Ref_to_Macro'>PG_RETURN_BYTEA_P</span></a><span class='Parentheses'>(</span><a href="../../../include/libpq/pqformat.h.html#LN32"><span class='Ref_to_Proto'>pq_endtypsend</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3512"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/*------------------------------------------------------- 
 * Is polygon A strictly left of polygon B? i.e. is 
 * the right most point of A left of the left most point 
 * of B? 
 *-------------------------------------------------------*/ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN3532"></a><span class='Declare_Function'>poly_left</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3534"></a>    <a href="../../../include/utils/geo_decls.h.html#LN112"><span class='Ref_to_Typedef'>POLYGON</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>polya</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN166"><span class='Ref_to_Macro'>PG_GETARG_POLYGON_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3535"></a>    <a href="../../../include/utils/geo_decls.h.html#LN112"><span class='Ref_to_Typedef'>POLYGON</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>polyb</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN166"><span class='Ref_to_Macro'>PG_GETARG_POLYGON_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3536"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN3536"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN3534"><span class='Ref_To_Local'>polya</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN116"><span class='Ref_to_Member'>boundbox</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN3535"><span class='Ref_To_Local'>polyb</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN116"><span class='Ref_to_Member'>boundbox</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Avoid leaking memory for toasted inputs ... needed for rtree indexes 
     */ 
</span>    <a href="../../../include/fmgr.h.html#LN224"><span class='Ref_to_Macro'>PG_FREE_IF_COPY</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3534"><span class='Ref_To_Local'>polya</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN224"><span class='Ref_to_Macro'>PG_FREE_IF_COPY</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3535"><span class='Ref_To_Local'>polyb</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3536"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/*------------------------------------------------------- 
 * Is polygon A overlapping or left of polygon B? i.e. is 
 * the right most point of A at or left of the right most point 
 * of B? 
 *-------------------------------------------------------*/ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN3555"></a><span class='Declare_Function'>poly_overleft</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3557"></a>    <a href="../../../include/utils/geo_decls.h.html#LN112"><span class='Ref_to_Typedef'>POLYGON</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>polya</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN166"><span class='Ref_to_Macro'>PG_GETARG_POLYGON_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3558"></a>    <a href="../../../include/utils/geo_decls.h.html#LN112"><span class='Ref_to_Typedef'>POLYGON</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>polyb</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN166"><span class='Ref_to_Macro'>PG_GETARG_POLYGON_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3559"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN3559"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN3557"><span class='Ref_To_Local'>polya</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN116"><span class='Ref_to_Member'>boundbox</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>&LT;= </span><a href="geo_ops.c.html#LN3558"><span class='Ref_To_Local'>polyb</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN116"><span class='Ref_to_Member'>boundbox</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Avoid leaking memory for toasted inputs ... needed for rtree indexes 
     */ 
</span>    <a href="../../../include/fmgr.h.html#LN224"><span class='Ref_to_Macro'>PG_FREE_IF_COPY</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3557"><span class='Ref_To_Local'>polya</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN224"><span class='Ref_to_Macro'>PG_FREE_IF_COPY</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3558"><span class='Ref_To_Local'>polyb</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3559"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/*------------------------------------------------------- 
 * Is polygon A strictly right of polygon B? i.e. is 
 * the left most point of A right of the right most point 
 * of B? 
 *-------------------------------------------------------*/ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN3578"></a><span class='Declare_Function'>poly_right</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3580"></a>    <a href="../../../include/utils/geo_decls.h.html#LN112"><span class='Ref_to_Typedef'>POLYGON</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>polya</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN166"><span class='Ref_to_Macro'>PG_GETARG_POLYGON_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3581"></a>    <a href="../../../include/utils/geo_decls.h.html#LN112"><span class='Ref_to_Typedef'>POLYGON</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>polyb</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN166"><span class='Ref_to_Macro'>PG_GETARG_POLYGON_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3582"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN3582"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN3580"><span class='Ref_To_Local'>polya</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN116"><span class='Ref_to_Member'>boundbox</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>&GT; </span><a href="geo_ops.c.html#LN3581"><span class='Ref_To_Local'>polyb</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN116"><span class='Ref_to_Member'>boundbox</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Avoid leaking memory for toasted inputs ... needed for rtree indexes 
     */ 
</span>    <a href="../../../include/fmgr.h.html#LN224"><span class='Ref_to_Macro'>PG_FREE_IF_COPY</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3580"><span class='Ref_To_Local'>polya</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN224"><span class='Ref_to_Macro'>PG_FREE_IF_COPY</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3581"><span class='Ref_To_Local'>polyb</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3582"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/*------------------------------------------------------- 
 * Is polygon A overlapping or right of polygon B? i.e. is 
 * the left most point of A at or right of the left most point 
 * of B? 
 *-------------------------------------------------------*/ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN3601"></a><span class='Declare_Function'>poly_overright</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3603"></a>    <a href="../../../include/utils/geo_decls.h.html#LN112"><span class='Ref_to_Typedef'>POLYGON</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>polya</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN166"><span class='Ref_to_Macro'>PG_GETARG_POLYGON_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3604"></a>    <a href="../../../include/utils/geo_decls.h.html#LN112"><span class='Ref_to_Typedef'>POLYGON</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>polyb</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN166"><span class='Ref_to_Macro'>PG_GETARG_POLYGON_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3605"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN3605"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN3603"><span class='Ref_To_Local'>polya</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN116"><span class='Ref_to_Member'>boundbox</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>&GT;= </span><a href="geo_ops.c.html#LN3604"><span class='Ref_To_Local'>polyb</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN116"><span class='Ref_to_Member'>boundbox</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Avoid leaking memory for toasted inputs ... needed for rtree indexes 
     */ 
</span>    <a href="../../../include/fmgr.h.html#LN224"><span class='Ref_to_Macro'>PG_FREE_IF_COPY</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3603"><span class='Ref_To_Local'>polya</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN224"><span class='Ref_to_Macro'>PG_FREE_IF_COPY</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3604"><span class='Ref_To_Local'>polyb</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3605"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/*------------------------------------------------------- 
 * Is polygon A strictly below polygon B? i.e. is 
 * the upper most point of A below the lower most point 
 * of B? 
 *-------------------------------------------------------*/ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN3624"></a><span class='Declare_Function'>poly_below</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3626"></a>    <a href="../../../include/utils/geo_decls.h.html#LN112"><span class='Ref_to_Typedef'>POLYGON</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>polya</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN166"><span class='Ref_to_Macro'>PG_GETARG_POLYGON_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3627"></a>    <a href="../../../include/utils/geo_decls.h.html#LN112"><span class='Ref_to_Typedef'>POLYGON</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>polyb</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN166"><span class='Ref_to_Macro'>PG_GETARG_POLYGON_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3628"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN3628"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN3626"><span class='Ref_To_Local'>polya</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN116"><span class='Ref_to_Member'>boundbox</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN3627"><span class='Ref_To_Local'>polyb</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN116"><span class='Ref_to_Member'>boundbox</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Avoid leaking memory for toasted inputs ... needed for rtree indexes 
     */ 
</span>    <a href="../../../include/fmgr.h.html#LN224"><span class='Ref_to_Macro'>PG_FREE_IF_COPY</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3626"><span class='Ref_To_Local'>polya</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN224"><span class='Ref_to_Macro'>PG_FREE_IF_COPY</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3627"><span class='Ref_To_Local'>polyb</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3628"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/*------------------------------------------------------- 
 * Is polygon A overlapping or below polygon B? i.e. is 
 * the upper most point of A at or below the upper most point 
 * of B? 
 *-------------------------------------------------------*/ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN3647"></a><span class='Declare_Function'>poly_overbelow</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3649"></a>    <a href="../../../include/utils/geo_decls.h.html#LN112"><span class='Ref_to_Typedef'>POLYGON</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>polya</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN166"><span class='Ref_to_Macro'>PG_GETARG_POLYGON_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3650"></a>    <a href="../../../include/utils/geo_decls.h.html#LN112"><span class='Ref_to_Typedef'>POLYGON</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>polyb</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN166"><span class='Ref_to_Macro'>PG_GETARG_POLYGON_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3651"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN3651"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN3649"><span class='Ref_To_Local'>polya</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN116"><span class='Ref_to_Member'>boundbox</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>&LT;= </span><a href="geo_ops.c.html#LN3650"><span class='Ref_To_Local'>polyb</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN116"><span class='Ref_to_Member'>boundbox</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Avoid leaking memory for toasted inputs ... needed for rtree indexes 
     */ 
</span>    <a href="../../../include/fmgr.h.html#LN224"><span class='Ref_to_Macro'>PG_FREE_IF_COPY</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3649"><span class='Ref_To_Local'>polya</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN224"><span class='Ref_to_Macro'>PG_FREE_IF_COPY</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3650"><span class='Ref_To_Local'>polyb</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3651"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/*------------------------------------------------------- 
 * Is polygon A strictly above polygon B? i.e. is 
 * the lower most point of A above the upper most point 
 * of B? 
 *-------------------------------------------------------*/ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN3670"></a><span class='Declare_Function'>poly_above</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3672"></a>    <a href="../../../include/utils/geo_decls.h.html#LN112"><span class='Ref_to_Typedef'>POLYGON</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>polya</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN166"><span class='Ref_to_Macro'>PG_GETARG_POLYGON_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3673"></a>    <a href="../../../include/utils/geo_decls.h.html#LN112"><span class='Ref_to_Typedef'>POLYGON</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>polyb</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN166"><span class='Ref_to_Macro'>PG_GETARG_POLYGON_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3674"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN3674"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN3672"><span class='Ref_To_Local'>polya</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN116"><span class='Ref_to_Member'>boundbox</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>&GT; </span><a href="geo_ops.c.html#LN3673"><span class='Ref_To_Local'>polyb</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN116"><span class='Ref_to_Member'>boundbox</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Avoid leaking memory for toasted inputs ... needed for rtree indexes 
     */ 
</span>    <a href="../../../include/fmgr.h.html#LN224"><span class='Ref_to_Macro'>PG_FREE_IF_COPY</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3672"><span class='Ref_To_Local'>polya</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN224"><span class='Ref_to_Macro'>PG_FREE_IF_COPY</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3673"><span class='Ref_To_Local'>polyb</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3674"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/*------------------------------------------------------- 
 * Is polygon A overlapping or above polygon B? i.e. is 
 * the lower most point of A at or above the lower most point 
 * of B? 
 *-------------------------------------------------------*/ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN3693"></a><span class='Declare_Function'>poly_overabove</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3695"></a>    <a href="../../../include/utils/geo_decls.h.html#LN112"><span class='Ref_to_Typedef'>POLYGON</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>polya</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN166"><span class='Ref_to_Macro'>PG_GETARG_POLYGON_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3696"></a>    <a href="../../../include/utils/geo_decls.h.html#LN112"><span class='Ref_to_Typedef'>POLYGON</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>polyb</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN166"><span class='Ref_to_Macro'>PG_GETARG_POLYGON_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3697"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN3697"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN3695"><span class='Ref_To_Local'>polya</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN116"><span class='Ref_to_Member'>boundbox</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>&GT;= </span><a href="geo_ops.c.html#LN3696"><span class='Ref_To_Local'>polyb</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN116"><span class='Ref_to_Member'>boundbox</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Avoid leaking memory for toasted inputs ... needed for rtree indexes 
     */ 
</span>    <a href="../../../include/fmgr.h.html#LN224"><span class='Ref_to_Macro'>PG_FREE_IF_COPY</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3695"><span class='Ref_To_Local'>polya</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN224"><span class='Ref_to_Macro'>PG_FREE_IF_COPY</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3696"><span class='Ref_To_Local'>polyb</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3697"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/*------------------------------------------------------- 
 * Is polygon A the same as polygon B? i.e. are all the 
 * points the same? 
 * Check all points for matches in both forward and reverse 
 *  direction since polygons are non-directional and are 
 *  closed shapes. 
 *-------------------------------------------------------*/ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN3719"></a><span class='Declare_Function'>poly_same</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3721"></a>    <a href="../../../include/utils/geo_decls.h.html#LN112"><span class='Ref_to_Typedef'>POLYGON</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>polya</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN166"><span class='Ref_to_Macro'>PG_GETARG_POLYGON_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3722"></a>    <a href="../../../include/utils/geo_decls.h.html#LN112"><span class='Ref_to_Typedef'>POLYGON</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>polyb</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN166"><span class='Ref_to_Macro'>PG_GETARG_POLYGON_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3723"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3721"><span class='Ref_To_Local'>polya</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN115"><span class='Ref_to_Member'>npts</span></a> <span class='Operator'>!= </span><a href="geo_ops.c.html#LN3722"><span class='Ref_To_Local'>polyb</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN115"><span class='Ref_to_Member'>npts</span></a><span class='Parentheses'>) 
</span>        <a href="geo_ops.c.html#LN3723"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="geo_ops.c.html#LN3723"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN56"><span class='Ref_to_Proto'>plist_same</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3721"><span class='Ref_To_Local'>polya</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN115"><span class='Ref_to_Member'>npts</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3721"><span class='Ref_To_Local'>polya</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3722"><span class='Ref_To_Local'>polyb</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Avoid leaking memory for toasted inputs ... needed for rtree indexes 
     */ 
</span>    <a href="../../../include/fmgr.h.html#LN224"><span class='Ref_to_Macro'>PG_FREE_IF_COPY</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3721"><span class='Ref_To_Local'>polya</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN224"><span class='Ref_to_Macro'>PG_FREE_IF_COPY</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3722"><span class='Ref_To_Local'>polyb</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3723"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end poly_same &raquo; </span> 
 
<span class='Comment_Multi_Line'>/*----------------------------------------------------------------- 
 * Determine if polygon A overlaps polygon B 
 *-----------------------------------------------------------------*/ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN3743"></a><span class='Declare_Function'>poly_overlap</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3745"></a>    <a href="../../../include/utils/geo_decls.h.html#LN112"><span class='Ref_to_Typedef'>POLYGON</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>polya</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN166"><span class='Ref_to_Macro'>PG_GETARG_POLYGON_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3746"></a>    <a href="../../../include/utils/geo_decls.h.html#LN112"><span class='Ref_to_Typedef'>POLYGON</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>polyb</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN166"><span class='Ref_to_Macro'>PG_GETARG_POLYGON_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3747"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Quick check by bounding box */ 
</span>    <a href="geo_ops.c.html#LN3747"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3745"><span class='Ref_To_Local'>polya</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN115"><span class='Ref_to_Member'>npts</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="geo_ops.c.html#LN3746"><span class='Ref_To_Local'>polyb</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN115"><span class='Ref_to_Member'>npts</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span> <span class='Operator'>&& 
</span>              <a href="geo_ops.c.html#LN45"><span class='Ref_to_Proto'>box_ov</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3745"><span class='Ref_To_Local'>polya</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN116"><span class='Ref_to_Member'>boundbox</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3746"><span class='Ref_To_Local'>polyb</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN116"><span class='Ref_to_Member'>boundbox</span></a><span class='Parentheses'>))</span> <span class='Operator'>? </span><span class='Boolean'>true </span><span class='Operator'>: </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Brute-force algorithm - try to find intersected edges, if so then 
     * polygons are overlapped else check is one polygon inside other or not 
     * by testing single point of them. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3747"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN3760"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>ia</span><span class='Delimiter'>, 
</span><a name="LN3761"></a>                    <span class='Declare_Local'>ib</span><span class='Delimiter'>; 
</span><a name="LN3762"></a>        <a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a>        <span class='Declare_Local'>sa</span><span class='Delimiter'>, 
</span><a name="LN3763"></a>                    <span class='Declare_Local'>sb</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Init first of polya's edge with last point */ 
</span>        <a href="geo_ops.c.html#LN3762"><span class='Ref_To_Local'>sa</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="geo_ops.c.html#LN3745"><span class='Ref_To_Local'>polya</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN3745"><span class='Ref_To_Local'>polya</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN115"><span class='Ref_to_Member'>npts</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>]; 
</span>        <a href="geo_ops.c.html#LN3747"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3760"><span class='Ref_To_Local'>ia</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN3760"><span class='Ref_To_Local'>ia</span></a> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN3745"><span class='Ref_To_Local'>polya</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN115"><span class='Ref_to_Member'>npts</span></a> <span class='Operator'>&& </span><a href="geo_ops.c.html#LN3747"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>== </span><span class='Boolean'>false</span><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN3760"><span class='Ref_To_Local'>ia</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* Second point of polya's edge is a current one */ 
</span>            <a href="geo_ops.c.html#LN3762"><span class='Ref_To_Local'>sa</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="geo_ops.c.html#LN3745"><span class='Ref_To_Local'>polya</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN3760"><span class='Ref_To_Local'>ia</span></a><span class='Delimiter'>]; 
</span> 
            <span class='Comment_Multi_Line'>/* Init first of polyb's edge with last point */ 
</span>            <a href="geo_ops.c.html#LN3763"><span class='Ref_To_Local'>sb</span></a><span class='Operator'>.</span>p<span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="geo_ops.c.html#LN3746"><span class='Ref_To_Local'>polyb</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN3746"><span class='Ref_To_Local'>polyb</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN115"><span class='Ref_to_Member'>npts</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>]; 
</span> 
            <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3761"><span class='Ref_To_Local'>ib</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN3761"><span class='Ref_To_Local'>ib</span></a> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN3746"><span class='Ref_To_Local'>polyb</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN115"><span class='Ref_to_Member'>npts</span></a> <span class='Operator'>&& </span><a href="geo_ops.c.html#LN3747"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>== </span><span class='Boolean'>false</span><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN3761"><span class='Ref_To_Local'>ib</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <a href="geo_ops.c.html#LN3763"><span class='Ref_To_Local'>sb</span></a><span class='Operator'>.</span>p<span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="geo_ops.c.html#LN3746"><span class='Ref_To_Local'>polyb</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN3761"><span class='Ref_To_Local'>ib</span></a><span class='Delimiter'>]; 
</span>                <a href="geo_ops.c.html#LN3747"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN52"><span class='Ref_to_Proto'>lseg_intersect_internal</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3762"><span class='Ref_To_Local'>sa</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3763"><span class='Ref_To_Local'>sb</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="geo_ops.c.html#LN3763"><span class='Ref_To_Local'>sb</span></a><span class='Operator'>.</span>p<span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="geo_ops.c.html#LN3763"><span class='Ref_To_Local'>sb</span></a><span class='Operator'>.</span>p<span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]; 
</span>            <span class='Delimiter'>} 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * move current endpoint to the first point of next edge 
             */ 
</span>            <a href="geo_ops.c.html#LN3762"><span class='Ref_To_Local'>sa</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="geo_ops.c.html#LN3762"><span class='Ref_To_Local'>sa</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for ia=0;ia&LT;polya-&GT;npts&&... &raquo; </span> 
 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3747"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>== </span><span class='Boolean'>false</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="geo_ops.c.html#LN3747"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN40"><span class='Ref_to_Proto'>point_inside</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3745"><span class='Ref_To_Local'>polya</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3746"><span class='Ref_To_Local'>polyb</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN115"><span class='Ref_to_Member'>npts</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3746"><span class='Ref_To_Local'>polyb</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Parentheses'>) 
</span>                      <span class='Operator'>|| 
</span>                      <a href="geo_ops.c.html#LN40"><span class='Ref_to_Proto'>point_inside</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3746"><span class='Ref_To_Local'>polyb</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3745"><span class='Ref_To_Local'>polya</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN115"><span class='Ref_to_Member'>npts</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3745"><span class='Ref_To_Local'>polya</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if result &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* 
     * Avoid leaking memory for toasted inputs ... needed for rtree indexes 
     */ 
</span>    <a href="../../../include/fmgr.h.html#LN224"><span class='Ref_to_Macro'>PG_FREE_IF_COPY</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3745"><span class='Ref_To_Local'>polya</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN224"><span class='Ref_to_Macro'>PG_FREE_IF_COPY</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3746"><span class='Ref_To_Local'>polyb</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3747"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end poly_overlap &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Tests special kind of segment for in/out of polygon. 
 * Special kind means: 
 *  - point a should be on segment s 
 *  - segment (a,b) should not be contained by s 
 * Returns true if: 
 *  - segment (a,b) is collinear to s and (a,b) is in polygon 
 *  - segment (a,b) s not collinear to s. Note: that doesn't 
 *    mean that segment is in polygon! 
 */ 
</span> 
<span class='Keyword'>static bool 
</span><a name="LN3819"></a><span class='Declare_Function'>touched_lseg_inside_poly</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>a</span><span class='Delimiter'>, </span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>b</span><span class='Delimiter'>, </span><a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>s</span><span class='Delimiter'>, </span><a href="../../../include/utils/geo_decls.h.html#LN112"><span class='Ref_to_Typedef'>POLYGON</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>poly</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>start</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Comment_Multi_Line'>/* point a is on s, b is not */ 
</span><a name="LN3822"></a>    <a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a>        <span class='Declare_Local'>t</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN3822"><span class='Ref_To_Local'>t</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>= *</span><a href="geo_ops.c.html#LN3819"><span class='Ref_to_Parameter'>a</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN3822"><span class='Ref_To_Local'>t</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>= *</span><a href="geo_ops.c.html#LN3819"><span class='Ref_to_Parameter'>b</span></a><span class='Delimiter'>; 
</span> 
<a name="LN3827"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>POINTEQ</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>pt1</span><span class='Delimiter'>, </span><span class='Declare_Parameter'>pt2</span><span class='Parentheses'>)</span>   <span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN36"><span class='Ref_to_Macro'>FPeq</span></a><span class='Parentheses'>((</span>pt1<span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>x<span class='Delimiter'>, </span><span class='Parentheses'>(</span>pt2<span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>x<span class='Parentheses'>)</span> <span class='Operator'>&& </span><a href="../../../include/utils/geo_decls.h.html#LN36"><span class='Ref_to_Macro'>FPeq</span></a><span class='Parentheses'>((</span>pt1<span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>y<span class='Delimiter'>, </span><span class='Parentheses'>(</span>pt2<span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>y<span class='Parentheses'>))</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3827"><span class='Ref_to_Macro'>POINTEQ</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3819"><span class='Ref_to_Parameter'>a</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3819"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN54"><span class='Ref_to_Proto'>on_ps_internal</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3819"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3822"><span class='Ref_To_Local'>t</span></a><span class='Parentheses'>))</span> 
            <span class='Control'>return</span> <a href="geo_ops.c.html#LN78"><span class='Ref_to_Proto'>lseg_inside_poly</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3819"><span class='Ref_to_Parameter'>b</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3819"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3819"><span class='Ref_to_Parameter'>poly</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3819"><span class='Ref_to_Parameter'>start</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3827"><span class='Ref_to_Macro'>POINTEQ</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3819"><span class='Ref_to_Parameter'>a</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3819"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN54"><span class='Ref_to_Proto'>on_ps_internal</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3819"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3822"><span class='Ref_To_Local'>t</span></a><span class='Parentheses'>))</span> 
            <span class='Control'>return</span> <a href="geo_ops.c.html#LN78"><span class='Ref_to_Proto'>lseg_inside_poly</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3819"><span class='Ref_to_Parameter'>b</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3819"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3819"><span class='Ref_to_Parameter'>poly</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3819"><span class='Ref_to_Parameter'>start</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN54"><span class='Ref_to_Proto'>on_ps_internal</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3819"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3822"><span class='Ref_To_Local'>t</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>return</span> <a href="geo_ops.c.html#LN78"><span class='Ref_to_Proto'>lseg_inside_poly</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3819"><span class='Ref_to_Parameter'>b</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3819"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3819"><span class='Ref_to_Parameter'>poly</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3819"><span class='Ref_to_Parameter'>start</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN54"><span class='Ref_to_Proto'>on_ps_internal</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3819"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3822"><span class='Ref_To_Local'>t</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>return</span> <a href="geo_ops.c.html#LN78"><span class='Ref_to_Proto'>lseg_inside_poly</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3819"><span class='Ref_to_Parameter'>b</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3819"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3819"><span class='Ref_to_Parameter'>poly</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3819"><span class='Ref_to_Parameter'>start</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>;</span>                <span class='Comment_Single_Line'>/* may be not true, but that will check later */ 
</span><span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end touched_lseg_inside_poly &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Returns true if segment (a,b) is in polygon, option 
 * start is used for optimization - function checks 
 * polygon's edges started from start 
 */ 
</span><span class='Keyword'>static bool 
</span><a name="LN3856"></a><span class='Declare_Function'>lseg_inside_poly</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>a</span><span class='Delimiter'>, </span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>b</span><span class='Delimiter'>, </span><a href="../../../include/utils/geo_decls.h.html#LN112"><span class='Ref_to_Typedef'>POLYGON</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>poly</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>start</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3858"></a>    <a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a>        <span class='Declare_Local'>s</span><span class='Delimiter'>, 
</span><a name="LN3859"></a>                <span class='Declare_Local'>t</span><span class='Delimiter'>; 
</span><a name="LN3860"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN3861"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>res</span> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>, 
</span><a name="LN3862"></a>                <span class='Declare_Local'>intersection</span> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN3859"><span class='Ref_To_Local'>t</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>= *</span><a href="geo_ops.c.html#LN3856"><span class='Ref_to_Parameter'>a</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN3859"><span class='Ref_To_Local'>t</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>= *</span><a href="geo_ops.c.html#LN3856"><span class='Ref_to_Parameter'>b</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN3858"><span class='Ref_To_Local'>s</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="geo_ops.c.html#LN3856"><span class='Ref_to_Parameter'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3856"><span class='Ref_to_Parameter'>start</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3856"><span class='Ref_to_Parameter'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN115"><span class='Ref_to_Member'>npts</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>) </span><span class='Operator'>: </span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3856"><span class='Ref_to_Parameter'>start</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>]; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3860"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN3856"><span class='Ref_to_Parameter'>start</span></a><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN3860"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN3856"><span class='Ref_to_Parameter'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN115"><span class='Ref_to_Member'>npts</span></a> <span class='Operator'>&& </span><a href="geo_ops.c.html#LN3861"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN3860"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN3870"></a>        <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>interpt</span><span class='Delimiter'>; 
</span> 
        <a href="../../../include/miscadmin.h.html#LN99"><span class='Ref_to_Macro'>CHECK_FOR_INTERRUPTS</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
        <a href="geo_ops.c.html#LN3858"><span class='Ref_To_Local'>s</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="geo_ops.c.html#LN3856"><span class='Ref_to_Parameter'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN3860"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN54"><span class='Ref_to_Proto'>on_ps_internal</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3859"><span class='Ref_To_Local'>t</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3858"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN54"><span class='Ref_to_Proto'>on_ps_internal</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3859"><span class='Ref_To_Local'>t</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3858"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>))</span> 
                <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* t is contained by s */ 
</span> 
            <span class='Comment_Multi_Line'>/* Y-cross */ 
</span>            <a href="geo_ops.c.html#LN3861"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN3818"><span class='Ref_to_Func'>touched_lseg_inside_poly</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3859"><span class='Ref_To_Local'>t</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3859"><span class='Ref_To_Local'>t</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3858"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3856"><span class='Ref_to_Parameter'>poly</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3860"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN54"><span class='Ref_to_Proto'>on_ps_internal</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3859"><span class='Ref_To_Local'>t</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3858"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* Y-cross */ 
</span>            <a href="geo_ops.c.html#LN3861"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN3818"><span class='Ref_to_Func'>touched_lseg_inside_poly</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3859"><span class='Ref_To_Local'>t</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3859"><span class='Ref_To_Local'>t</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3858"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3856"><span class='Ref_to_Parameter'>poly</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3860"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="geo_ops.c.html#LN3870"><span class='Ref_To_Local'>interpt</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN79"><span class='Ref_to_Proto'>lseg_interpt_internal</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3859"><span class='Ref_To_Local'>t</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3858"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>))</span> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * segments are X-crossing, go to check each subsegment 
             */ 
</span> 
            <a href="geo_ops.c.html#LN3862"><span class='Ref_To_Local'>intersection</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>            <a href="geo_ops.c.html#LN3861"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN78"><span class='Ref_to_Proto'>lseg_inside_poly</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3859"><span class='Ref_To_Local'>t</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3870"><span class='Ref_To_Local'>interpt</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3856"><span class='Ref_to_Parameter'>poly</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3860"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3861"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>) 
</span>                <a href="geo_ops.c.html#LN3861"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN78"><span class='Ref_to_Proto'>lseg_inside_poly</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3859"><span class='Ref_To_Local'>t</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3870"><span class='Ref_To_Local'>interpt</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3856"><span class='Ref_to_Parameter'>poly</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3860"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3870"><span class='Ref_To_Local'>interpt</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <a href="geo_ops.c.html#LN3858"><span class='Ref_To_Local'>s</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="geo_ops.c.html#LN3858"><span class='Ref_To_Local'>s</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=start;i&LT;poly-&GT;npts&... &raquo; </span> 
 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3861"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>&& !</span><a href="geo_ops.c.html#LN3862"><span class='Ref_To_Local'>intersection</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN3907"></a>        <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>       <span class='Declare_Local'>p</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * if X-intersection wasn't found  then check central point of tested 
         * segment. In opposite case we already check all subsegments 
         */ 
</span>        <a href="geo_ops.c.html#LN3907"><span class='Ref_To_Local'>p</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3859"><span class='Ref_To_Local'>t</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>+ </span><a href="geo_ops.c.html#LN3859"><span class='Ref_To_Local'>t</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>) </span><span class='Operator'>/ </span><span class='Number'>2</span><span class='Operator'>.</span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN3907"><span class='Ref_To_Local'>p</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3859"><span class='Ref_To_Local'>t</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>+ </span><a href="geo_ops.c.html#LN3859"><span class='Ref_To_Local'>t</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>) </span><span class='Operator'>/ </span><span class='Number'>2</span><span class='Operator'>.</span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
        <a href="geo_ops.c.html#LN3861"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN40"><span class='Ref_to_Proto'>point_inside</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3907"><span class='Ref_To_Local'>p</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3856"><span class='Ref_to_Parameter'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN115"><span class='Ref_to_Member'>npts</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3856"><span class='Ref_to_Parameter'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>return</span> <a href="geo_ops.c.html#LN3861"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end lseg_inside_poly &raquo; </span> 
 
<span class='Comment_Multi_Line'>/*----------------------------------------------------------------- 
 * Determine if polygon A contains polygon B. 
 *-----------------------------------------------------------------*/ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN3926"></a><span class='Declare_Function'>poly_contain</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3928"></a>    <a href="../../../include/utils/geo_decls.h.html#LN112"><span class='Ref_to_Typedef'>POLYGON</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>polya</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN166"><span class='Ref_to_Macro'>PG_GETARG_POLYGON_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3929"></a>    <a href="../../../include/utils/geo_decls.h.html#LN112"><span class='Ref_to_Typedef'>POLYGON</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>polyb</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN166"><span class='Ref_to_Macro'>PG_GETARG_POLYGON_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3930"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Quick check to see if bounding box is contained. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3928"><span class='Ref_To_Local'>polya</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN115"><span class='Ref_to_Member'>npts</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="geo_ops.c.html#LN3929"><span class='Ref_To_Local'>polyb</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN115"><span class='Ref_to_Member'>npts</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span> <span class='Operator'>&& 
</span>        <a href="../../../include/postgres.h.html#LN398"><span class='Ref_to_Macro'>DatumGetBool</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN585"><span class='Ref_to_Macro'>DirectFunctionCall2</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN648"><span class='Ref_to_Func'>box_contain</span></a><span class='Delimiter'>, 
</span>                                         <a href="../../../include/utils/geo_decls.h.html#LN159"><span class='Ref_to_Macro'>BoxPGetDatum</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3928"><span class='Ref_To_Local'>polya</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN116"><span class='Ref_to_Member'>boundbox</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                         <a href="../../../include/utils/geo_decls.h.html#LN159"><span class='Ref_to_Macro'>BoxPGetDatum</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN3929"><span class='Ref_To_Local'>polyb</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN116"><span class='Ref_to_Member'>boundbox</span></a><span class='Parentheses'>))))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN3940"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN3941"></a>        <a href="../../../include/utils/geo_decls.h.html#LN67"><span class='Ref_to_Typedef'>LSEG</span></a>        <span class='Declare_Local'>s</span><span class='Delimiter'>; 
</span> 
        <a href="geo_ops.c.html#LN3941"><span class='Ref_To_Local'>s</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="geo_ops.c.html#LN3929"><span class='Ref_To_Local'>polyb</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN3929"><span class='Ref_To_Local'>polyb</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN115"><span class='Ref_to_Member'>npts</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>]; 
</span>        <a href="geo_ops.c.html#LN3930"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3940"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN3940"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN3929"><span class='Ref_To_Local'>polyb</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN115"><span class='Ref_to_Member'>npts</span></a> <span class='Operator'>&& </span><a href="geo_ops.c.html#LN3930"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN3940"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="geo_ops.c.html#LN3941"><span class='Ref_To_Local'>s</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="geo_ops.c.html#LN3929"><span class='Ref_To_Local'>polyb</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN3940"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span>            <a href="geo_ops.c.html#LN3930"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN78"><span class='Ref_to_Proto'>lseg_inside_poly</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3941"><span class='Ref_To_Local'>s</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3941"><span class='Ref_To_Local'>s</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3928"><span class='Ref_To_Local'>polya</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="geo_ops.c.html#LN3941"><span class='Ref_To_Local'>s</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="geo_ops.c.html#LN3941"><span class='Ref_To_Local'>s</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN69"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="geo_ops.c.html#LN3930"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Avoid leaking memory for toasted inputs ... needed for rtree indexes 
     */ 
</span>    <a href="../../../include/fmgr.h.html#LN224"><span class='Ref_to_Macro'>PG_FREE_IF_COPY</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3928"><span class='Ref_To_Local'>polya</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN224"><span class='Ref_to_Macro'>PG_FREE_IF_COPY</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3929"><span class='Ref_To_Local'>polyb</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3930"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end poly_contain &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/*----------------------------------------------------------------- 
 * Determine if polygon A is contained by polygon B 
 *-----------------------------------------------------------------*/ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN3972"></a><span class='Declare_Function'>poly_contained</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3974"></a>    <a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>       <span class='Declare_Local'>polya</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN232"><span class='Ref_to_Macro'>PG_GETARG_DATUM</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3975"></a>    <a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>       <span class='Declare_Local'>polyb</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN232"><span class='Ref_to_Macro'>PG_GETARG_DATUM</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Just switch the arguments and pass it off to poly_contain */ 
</span>    <a href="../../../include/fmgr.h.html#LN312"><span class='Ref_to_Macro'>PG_RETURN_DATUM</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN585"><span class='Ref_to_Macro'>DirectFunctionCall2</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3925"><span class='Ref_to_Func'>poly_contain</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3975"><span class='Ref_To_Local'>polyb</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3974"><span class='Ref_To_Local'>polya</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN3983"></a><span class='Declare_Function'>poly_contain_pt</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3985"></a>    <a href="../../../include/utils/geo_decls.h.html#LN112"><span class='Ref_to_Typedef'>POLYGON</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>poly</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN166"><span class='Ref_to_Macro'>PG_GETARG_POLYGON_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3986"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>p</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN40"><span class='Ref_to_Proto'>point_inside</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3986"><span class='Ref_To_Local'>p</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3985"><span class='Ref_To_Local'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN115"><span class='Ref_to_Member'>npts</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3985"><span class='Ref_To_Local'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN3992"></a><span class='Declare_Function'>pt_contained_poly</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3994"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>p</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3995"></a>    <a href="../../../include/utils/geo_decls.h.html#LN112"><span class='Ref_to_Typedef'>POLYGON</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>poly</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN166"><span class='Ref_to_Macro'>PG_GETARG_POLYGON_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN40"><span class='Ref_to_Proto'>point_inside</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN3994"><span class='Ref_To_Local'>p</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3995"><span class='Ref_To_Local'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN115"><span class='Ref_to_Member'>npts</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN3995"><span class='Ref_To_Local'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN4002"></a><span class='Declare_Function'>poly_distance</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><span class='Directive'>#ifdef</span> NOT_USED 
<a name="LN4005"></a>    <a href="../../../include/utils/geo_decls.h.html#LN112"><span class='Ref_to_Typedef'>POLYGON</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>polya</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN166"><span class='Ref_to_Macro'>PG_GETARG_POLYGON_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4006"></a>    <a href="../../../include/utils/geo_decls.h.html#LN112"><span class='Ref_to_Typedef'>POLYGON</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>polyb</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN166"><span class='Ref_to_Macro'>PG_GETARG_POLYGON_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
 
    <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>            <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_FEATURE_NOT_SUPPORTED<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>             <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"function \"poly_distance\" not implemented"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN304"><span class='Ref_to_Macro'>PG_RETURN_NULL</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/*********************************************************************** 
 ** 
 **     Routines for 2D points. 
 ** 
 ***********************************************************************/ 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN4024"></a><span class='Declare_Function'>construct_point</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4026"></a>    <a href="../../../include/c.h.html#LN380"><span class='Ref_to_Typedef'>float8</span></a>      <span class='Declare_Local'>x</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN245"><span class='Ref_to_Macro'>PG_GETARG_FLOAT8</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4027"></a>    <a href="../../../include/c.h.html#LN380"><span class='Ref_to_Typedef'>float8</span></a>      <span class='Declare_Local'>y</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN245"><span class='Ref_to_Macro'>PG_GETARG_FLOAT8</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/geo_decls.h.html#LN139"><span class='Ref_to_Macro'>PG_RETURN_POINT_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN57"><span class='Ref_to_Proto'>point_construct</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4026"><span class='Ref_To_Local'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN4027"><span class='Ref_To_Local'>y</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN4033"></a><span class='Declare_Function'>point_add</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4035"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>p1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4036"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>p2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4037"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN4037"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN4037"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4035"><span class='Ref_To_Local'>p1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>+ </span><a href="geo_ops.c.html#LN4036"><span class='Ref_To_Local'>p2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN4037"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4035"><span class='Ref_To_Local'>p1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>+ </span><a href="geo_ops.c.html#LN4036"><span class='Ref_To_Local'>p2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/geo_decls.h.html#LN139"><span class='Ref_to_Macro'>PG_RETURN_POINT_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4037"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN4048"></a><span class='Declare_Function'>point_sub</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4050"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>p1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4051"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>p2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4052"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN4052"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN4052"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4050"><span class='Ref_To_Local'>p1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>- </span><a href="geo_ops.c.html#LN4051"><span class='Ref_To_Local'>p2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN4052"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4050"><span class='Ref_To_Local'>p1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>- </span><a href="geo_ops.c.html#LN4051"><span class='Ref_To_Local'>p2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/geo_decls.h.html#LN139"><span class='Ref_to_Macro'>PG_RETURN_POINT_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4052"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN4063"></a><span class='Declare_Function'>point_mul</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4065"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>p1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4066"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>p2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4067"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN4067"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN4067"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4065"><span class='Ref_To_Local'>p1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>* </span><a href="geo_ops.c.html#LN4066"><span class='Ref_To_Local'>p2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>) </span><span class='Operator'>- </span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4065"><span class='Ref_To_Local'>p1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>* </span><a href="geo_ops.c.html#LN4066"><span class='Ref_To_Local'>p2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN4067"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4065"><span class='Ref_To_Local'>p1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>* </span><a href="geo_ops.c.html#LN4066"><span class='Ref_To_Local'>p2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>) </span><span class='Operator'>+ </span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4065"><span class='Ref_To_Local'>p1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>* </span><a href="geo_ops.c.html#LN4066"><span class='Ref_To_Local'>p2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/geo_decls.h.html#LN139"><span class='Ref_to_Macro'>PG_RETURN_POINT_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4067"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN4078"></a><span class='Declare_Function'>point_div</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4080"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>p1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4081"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>p2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4082"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span><a name="LN4083"></a>    <span class='Keyword'>double</span>      <span class='Declare_Local'>div</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN4082"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN4083"><span class='Ref_To_Local'>div</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4081"><span class='Ref_To_Local'>p2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>* </span><a href="geo_ops.c.html#LN4081"><span class='Ref_To_Local'>p2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>) </span><span class='Operator'>+ </span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4081"><span class='Ref_To_Local'>p2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>* </span><a href="geo_ops.c.html#LN4081"><span class='Ref_To_Local'>p2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4083"><span class='Ref_To_Local'>div</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Operator'>.</span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_DIVISION_BY_ZERO<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"division by zero"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN4082"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><span class='Parentheses'>((</span><a href="geo_ops.c.html#LN4080"><span class='Ref_To_Local'>p1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>* </span><a href="geo_ops.c.html#LN4081"><span class='Ref_To_Local'>p2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>) </span><span class='Operator'>+ </span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4080"><span class='Ref_To_Local'>p1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>* </span><a href="geo_ops.c.html#LN4081"><span class='Ref_To_Local'>p2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>))</span> <span class='Operator'>/ </span><a href="geo_ops.c.html#LN4083"><span class='Ref_To_Local'>div</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN4082"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><span class='Parentheses'>((</span><a href="geo_ops.c.html#LN4081"><span class='Ref_To_Local'>p2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>* </span><a href="geo_ops.c.html#LN4080"><span class='Ref_To_Local'>p1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>) </span><span class='Operator'>- </span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4081"><span class='Ref_To_Local'>p2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>* </span><a href="geo_ops.c.html#LN4080"><span class='Ref_To_Local'>p1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>))</span> <span class='Operator'>/ </span><a href="geo_ops.c.html#LN4083"><span class='Ref_To_Local'>div</span></a><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/geo_decls.h.html#LN139"><span class='Ref_to_Macro'>PG_RETURN_POINT_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4082"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end point_div &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/*********************************************************************** 
 ** 
 **     Routines for 2D boxes. 
 ** 
 ***********************************************************************/ 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN4108"></a><span class='Declare_Function'>points_box</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4110"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>p1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4111"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>p2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/geo_decls.h.html#LN161"><span class='Ref_to_Macro'>PG_RETURN_BOX_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN42"><span class='Ref_to_Proto'>box_construct</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4110"><span class='Ref_To_Local'>p1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN4111"><span class='Ref_To_Local'>p2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN4110"><span class='Ref_To_Local'>p1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN4111"><span class='Ref_To_Local'>p2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN4117"></a><span class='Declare_Function'>box_add</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4119"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4120"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>p</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/geo_decls.h.html#LN161"><span class='Ref_to_Macro'>PG_RETURN_BOX_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN42"><span class='Ref_to_Proto'>box_construct</span></a><span class='Parentheses'>((</span><a href="geo_ops.c.html#LN4119"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>+ </span><a href="geo_ops.c.html#LN4120"><span class='Ref_To_Local'>p</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                  <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4119"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>+ </span><a href="geo_ops.c.html#LN4120"><span class='Ref_To_Local'>p</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                  <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4119"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>+ </span><a href="geo_ops.c.html#LN4120"><span class='Ref_To_Local'>p</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                  <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4119"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>+ </span><a href="geo_ops.c.html#LN4120"><span class='Ref_To_Local'>p</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN4129"></a><span class='Declare_Function'>box_sub</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4131"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4132"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>p</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/geo_decls.h.html#LN161"><span class='Ref_to_Macro'>PG_RETURN_BOX_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN42"><span class='Ref_to_Proto'>box_construct</span></a><span class='Parentheses'>((</span><a href="geo_ops.c.html#LN4131"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>- </span><a href="geo_ops.c.html#LN4132"><span class='Ref_To_Local'>p</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                  <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4131"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>- </span><a href="geo_ops.c.html#LN4132"><span class='Ref_To_Local'>p</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                  <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4131"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>- </span><a href="geo_ops.c.html#LN4132"><span class='Ref_To_Local'>p</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                  <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4131"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>- </span><a href="geo_ops.c.html#LN4132"><span class='Ref_To_Local'>p</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN4141"></a><span class='Declare_Function'>box_mul</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4143"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4144"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>p</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4145"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span><a name="LN4146"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>high</span><span class='Delimiter'>, 
</span><a name="LN4147"></a>               <span class='Operator'>*</span><span class='Declare_Local'>low</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN4146"><span class='Ref_To_Local'>high</span></a> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN136"><span class='Ref_to_Macro'>DatumGetPointP</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN585"><span class='Ref_to_Macro'>DirectFunctionCall2</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4062"><span class='Ref_to_Func'>point_mul</span></a><span class='Delimiter'>, 
</span>                                              <a href="../../../include/utils/geo_decls.h.html#LN137"><span class='Ref_to_Macro'>PointPGetDatum</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN4143"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                              <a href="../../../include/utils/geo_decls.h.html#LN137"><span class='Ref_to_Macro'>PointPGetDatum</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4144"><span class='Ref_To_Local'>p</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN4147"><span class='Ref_To_Local'>low</span></a> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN136"><span class='Ref_to_Macro'>DatumGetPointP</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN585"><span class='Ref_to_Macro'>DirectFunctionCall2</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4062"><span class='Ref_to_Func'>point_mul</span></a><span class='Delimiter'>, 
</span>                                             <a href="../../../include/utils/geo_decls.h.html#LN137"><span class='Ref_to_Macro'>PointPGetDatum</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN4143"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                             <a href="../../../include/utils/geo_decls.h.html#LN137"><span class='Ref_to_Macro'>PointPGetDatum</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4144"><span class='Ref_To_Local'>p</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN4145"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN42"><span class='Ref_to_Proto'>box_construct</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4146"><span class='Ref_To_Local'>high</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN4147"><span class='Ref_To_Local'>low</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN4146"><span class='Ref_To_Local'>high</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN4147"><span class='Ref_To_Local'>low</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/geo_decls.h.html#LN161"><span class='Ref_to_Macro'>PG_RETURN_BOX_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4145"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end box_mul &raquo; </span> 
 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN4162"></a><span class='Declare_Function'>box_div</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4164"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4165"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>p</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4166"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span><a name="LN4167"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>high</span><span class='Delimiter'>, 
</span><a name="LN4168"></a>               <span class='Operator'>*</span><span class='Declare_Local'>low</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN4167"><span class='Ref_To_Local'>high</span></a> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN136"><span class='Ref_to_Macro'>DatumGetPointP</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN585"><span class='Ref_to_Macro'>DirectFunctionCall2</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4077"><span class='Ref_to_Func'>point_div</span></a><span class='Delimiter'>, 
</span>                                              <a href="../../../include/utils/geo_decls.h.html#LN137"><span class='Ref_to_Macro'>PointPGetDatum</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN4164"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                              <a href="../../../include/utils/geo_decls.h.html#LN137"><span class='Ref_to_Macro'>PointPGetDatum</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4165"><span class='Ref_To_Local'>p</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN4168"><span class='Ref_To_Local'>low</span></a> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN136"><span class='Ref_to_Macro'>DatumGetPointP</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN585"><span class='Ref_to_Macro'>DirectFunctionCall2</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4077"><span class='Ref_to_Func'>point_div</span></a><span class='Delimiter'>, 
</span>                                             <a href="../../../include/utils/geo_decls.h.html#LN137"><span class='Ref_to_Macro'>PointPGetDatum</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN4164"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                             <a href="../../../include/utils/geo_decls.h.html#LN137"><span class='Ref_to_Macro'>PointPGetDatum</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4165"><span class='Ref_To_Local'>p</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN4166"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN42"><span class='Ref_to_Proto'>box_construct</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4167"><span class='Ref_To_Local'>high</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN4168"><span class='Ref_To_Local'>low</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN4167"><span class='Ref_To_Local'>high</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN4168"><span class='Ref_To_Local'>low</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/geo_decls.h.html#LN161"><span class='Ref_to_Macro'>PG_RETURN_BOX_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4166"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end box_div &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Convert point to empty box 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN4186"></a><span class='Declare_Function'>point_box</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4188"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>pt</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4189"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN4189"><span class='Ref_To_Local'>box</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN4189"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN4188"><span class='Ref_To_Local'>pt</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN4189"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN4188"><span class='Ref_To_Local'>pt</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN4189"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN4188"><span class='Ref_To_Local'>pt</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN4189"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN4188"><span class='Ref_To_Local'>pt</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/geo_decls.h.html#LN161"><span class='Ref_to_Macro'>PG_RETURN_BOX_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4189"><span class='Ref_To_Local'>box</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Smallest bounding box that includes both of the given boxes 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN4205"></a><span class='Declare_Function'>boxes_bound_box</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4207"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span><a name="LN4208"></a>               <span class='Operator'>*</span><span class='Declare_Local'>box2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span><a name="LN4209"></a>               <span class='Operator'>*</span><span class='Declare_Local'>container</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN4209"><span class='Ref_To_Local'>container</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN4209"><span class='Ref_To_Local'>container</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="../../../interfaces/ecpg/pgtypeslib/numeric.c.html#LN10"><span class='Ref_to_Macro'>Max</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4207"><span class='Ref_To_Local'>box1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN4208"><span class='Ref_To_Local'>box2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN4209"><span class='Ref_To_Local'>container</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="../../../interfaces/ecpg/pgtypeslib/numeric.c.html#LN11"><span class='Ref_to_Macro'>Min</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4207"><span class='Ref_To_Local'>box1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN4208"><span class='Ref_To_Local'>box2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN4209"><span class='Ref_To_Local'>container</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="../../../interfaces/ecpg/pgtypeslib/numeric.c.html#LN10"><span class='Ref_to_Macro'>Max</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4207"><span class='Ref_To_Local'>box1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN4208"><span class='Ref_To_Local'>box2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN4209"><span class='Ref_To_Local'>container</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="../../../interfaces/ecpg/pgtypeslib/numeric.c.html#LN11"><span class='Ref_to_Macro'>Min</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4207"><span class='Ref_To_Local'>box1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN4208"><span class='Ref_To_Local'>box2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/geo_decls.h.html#LN161"><span class='Ref_to_Macro'>PG_RETURN_BOX_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4209"><span class='Ref_To_Local'>container</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/*********************************************************************** 
 ** 
 **     Routines for 2D paths. 
 ** 
 ***********************************************************************/ 
</span> 
<span class='Comment_Multi_Line'>/* path_add() 
 * Concatenate two paths (only if they are both open). 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN4232"></a><span class='Declare_Function'>path_add</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4234"></a>    <a href="../../../include/utils/geo_decls.h.html#LN76"><span class='Ref_to_Typedef'>PATH</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>p1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN149"><span class='Ref_to_Macro'>PG_GETARG_PATH_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4235"></a>    <a href="../../../include/utils/geo_decls.h.html#LN76"><span class='Ref_to_Typedef'>PATH</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>p2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN149"><span class='Ref_to_Macro'>PG_GETARG_PATH_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4236"></a>    <a href="../../../include/utils/geo_decls.h.html#LN76"><span class='Ref_to_Typedef'>PATH</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span><a name="LN4237"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>size</span><span class='Delimiter'>, 
</span><a name="LN4238"></a>                <span class='Declare_Local'>base_size</span><span class='Delimiter'>; 
</span><a name="LN4239"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4234"><span class='Ref_To_Local'>p1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN80"><span class='Ref_to_Member'>closed</span></a> <span class='Operator'>|| </span><a href="geo_ops.c.html#LN4235"><span class='Ref_To_Local'>p2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN80"><span class='Ref_to_Member'>closed</span></a><span class='Parentheses'>) 
</span>        <a href="../../../include/fmgr.h.html#LN304"><span class='Ref_to_Macro'>PG_RETURN_NULL</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN4238"><span class='Ref_To_Local'>base_size</span></a> <span class='Operator'>= </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4234"><span class='Ref_To_Local'>p1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Parentheses'>) </span><span class='Operator'>* </span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4234"><span class='Ref_To_Local'>p1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN79"><span class='Ref_to_Member'>npts</span></a> <span class='Operator'>+ </span><a href="geo_ops.c.html#LN4235"><span class='Ref_To_Local'>p2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN79"><span class='Ref_to_Member'>npts</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN4237"><span class='Ref_To_Local'>size</span></a> <span class='Operator'>= </span><a href="../../../include/c.h.html#LN554"><span class='Ref_to_Macro'>offsetof</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN76"><span class='Ref_to_Typedef'>PATH</span></a><span class='Delimiter'>, </span>p<span class='Parentheses'>) </span><span class='Operator'>+</span><a href="geo_ops.c.html#LN4238"><span class='Ref_To_Local'>base_size</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Check for integer overflow */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4238"><span class='Ref_To_Local'>base_size</span></a> <span class='Operator'>/ </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4234"><span class='Ref_To_Local'>p1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4234"><span class='Ref_To_Local'>p1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN79"><span class='Ref_to_Member'>npts</span></a> <span class='Operator'>+ </span><a href="geo_ops.c.html#LN4235"><span class='Ref_To_Local'>p2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN79"><span class='Ref_to_Member'>npts</span></a><span class='Parentheses'>) </span><span class='Operator'>|| 
</span>        <a href="geo_ops.c.html#LN4237"><span class='Ref_To_Local'>size</span></a> <span class='Operator'>&LT;= </span><a href="geo_ops.c.html#LN4238"><span class='Ref_To_Local'>base_size</span></a><span class='Parentheses'>)</span> 
        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_PROGRAM_LIMIT_EXCEEDED<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"too many points requested"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN4236"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN76"><span class='Ref_to_Typedef'>PATH</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4237"><span class='Ref_To_Local'>size</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/postgres.h.html#LN327"><span class='Ref_to_Macro'>SET_VARSIZE</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4236"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN4237"><span class='Ref_To_Local'>size</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN4236"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN79"><span class='Ref_to_Member'>npts</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4234"><span class='Ref_To_Local'>p1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN79"><span class='Ref_to_Member'>npts</span></a> <span class='Operator'>+ </span><a href="geo_ops.c.html#LN4235"><span class='Ref_To_Local'>p2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN79"><span class='Ref_to_Member'>npts</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN4236"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN80"><span class='Ref_to_Member'>closed</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN4234"><span class='Ref_To_Local'>p1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN80"><span class='Ref_to_Member'>closed</span></a><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* prevent instability in unused pad bytes */ 
</span>    <a href="geo_ops.c.html#LN4236"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN81"><span class='Ref_to_Member'>dummy</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4239"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN4239"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN4234"><span class='Ref_To_Local'>p1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN79"><span class='Ref_to_Member'>npts</span></a><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN4239"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="geo_ops.c.html#LN4236"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN4239"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN4234"><span class='Ref_To_Local'>p1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN4239"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN4236"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN4239"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN4234"><span class='Ref_To_Local'>p1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN4239"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4239"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN4239"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN4235"><span class='Ref_To_Local'>p2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN79"><span class='Ref_to_Member'>npts</span></a><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN4239"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="geo_ops.c.html#LN4236"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN4239"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>+ </span><a href="geo_ops.c.html#LN4234"><span class='Ref_To_Local'>p1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN79"><span class='Ref_to_Member'>npts</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN4235"><span class='Ref_To_Local'>p2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN4239"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN4236"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN4239"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>+ </span><a href="geo_ops.c.html#LN4234"><span class='Ref_To_Local'>p1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN79"><span class='Ref_to_Member'>npts</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN4235"><span class='Ref_To_Local'>p2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN4239"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../../include/utils/geo_decls.h.html#LN151"><span class='Ref_to_Macro'>PG_RETURN_PATH_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4236"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end path_add &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* path_add_pt() 
 * Translation operators. 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN4280"></a><span class='Declare_Function'>path_add_pt</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4282"></a>    <a href="../../../include/utils/geo_decls.h.html#LN76"><span class='Ref_to_Typedef'>PATH</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>path</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN150"><span class='Ref_to_Macro'>PG_GETARG_PATH_P_COPY</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4283"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>point</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4284"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4284"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN4284"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN4282"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN79"><span class='Ref_to_Member'>npts</span></a><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN4284"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="geo_ops.c.html#LN4282"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN4284"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>+= </span><a href="geo_ops.c.html#LN4283"><span class='Ref_To_Local'>point</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN4282"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN4284"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>+= </span><a href="geo_ops.c.html#LN4283"><span class='Ref_To_Local'>point</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../../include/utils/geo_decls.h.html#LN151"><span class='Ref_to_Macro'>PG_RETURN_PATH_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4282"><span class='Ref_To_Local'>path</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN4296"></a><span class='Declare_Function'>path_sub_pt</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4298"></a>    <a href="../../../include/utils/geo_decls.h.html#LN76"><span class='Ref_to_Typedef'>PATH</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>path</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN150"><span class='Ref_to_Macro'>PG_GETARG_PATH_P_COPY</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4299"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>point</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4300"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4300"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN4300"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN4298"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN79"><span class='Ref_to_Member'>npts</span></a><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN4300"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="geo_ops.c.html#LN4298"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN4300"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>-= </span><a href="geo_ops.c.html#LN4299"><span class='Ref_To_Local'>point</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN4298"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN4300"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>-= </span><a href="geo_ops.c.html#LN4299"><span class='Ref_To_Local'>point</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../../include/utils/geo_decls.h.html#LN151"><span class='Ref_to_Macro'>PG_RETURN_PATH_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4298"><span class='Ref_To_Local'>path</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* path_mul_pt() 
 * Rotation and scaling operators. 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN4315"></a><span class='Declare_Function'>path_mul_pt</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4317"></a>    <a href="../../../include/utils/geo_decls.h.html#LN76"><span class='Ref_to_Typedef'>PATH</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>path</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN150"><span class='Ref_to_Macro'>PG_GETARG_PATH_P_COPY</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4318"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>point</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4319"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>p</span><span class='Delimiter'>; 
</span><a name="LN4320"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4320"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN4320"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN4317"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN79"><span class='Ref_to_Member'>npts</span></a><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN4320"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="geo_ops.c.html#LN4319"><span class='Ref_To_Local'>p</span></a> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN136"><span class='Ref_to_Macro'>DatumGetPointP</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN585"><span class='Ref_to_Macro'>DirectFunctionCall2</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4062"><span class='Ref_to_Func'>point_mul</span></a><span class='Delimiter'>, 
</span>                                               <a href="../../../include/utils/geo_decls.h.html#LN137"><span class='Ref_to_Macro'>PointPGetDatum</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN4317"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN4320"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                               <a href="../../../include/utils/geo_decls.h.html#LN137"><span class='Ref_to_Macro'>PointPGetDatum</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4318"><span class='Ref_To_Local'>point</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN4317"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN4320"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN4319"><span class='Ref_To_Local'>p</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN4317"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN4320"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN4319"><span class='Ref_To_Local'>p</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../../include/utils/geo_decls.h.html#LN151"><span class='Ref_to_Macro'>PG_RETURN_PATH_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4317"><span class='Ref_To_Local'>path</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN4335"></a><span class='Declare_Function'>path_div_pt</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4337"></a>    <a href="../../../include/utils/geo_decls.h.html#LN76"><span class='Ref_to_Typedef'>PATH</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>path</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN150"><span class='Ref_to_Macro'>PG_GETARG_PATH_P_COPY</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4338"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>point</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4339"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>p</span><span class='Delimiter'>; 
</span><a name="LN4340"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4340"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN4340"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN4337"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN79"><span class='Ref_to_Member'>npts</span></a><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN4340"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="geo_ops.c.html#LN4339"><span class='Ref_To_Local'>p</span></a> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN136"><span class='Ref_to_Macro'>DatumGetPointP</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN585"><span class='Ref_to_Macro'>DirectFunctionCall2</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4077"><span class='Ref_to_Func'>point_div</span></a><span class='Delimiter'>, 
</span>                                               <a href="../../../include/utils/geo_decls.h.html#LN137"><span class='Ref_to_Macro'>PointPGetDatum</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN4337"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN4340"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                               <a href="../../../include/utils/geo_decls.h.html#LN137"><span class='Ref_to_Macro'>PointPGetDatum</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4338"><span class='Ref_To_Local'>point</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN4337"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN4340"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN4339"><span class='Ref_To_Local'>p</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN4337"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN4340"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN4339"><span class='Ref_To_Local'>p</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../../include/utils/geo_decls.h.html#LN151"><span class='Ref_to_Macro'>PG_RETURN_PATH_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4337"><span class='Ref_To_Local'>path</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN4356"></a><span class='Declare_Function'>path_center</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><span class='Directive'>#ifdef</span> NOT_USED 
<a name="LN4359"></a>    <a href="../../../include/utils/geo_decls.h.html#LN76"><span class='Ref_to_Typedef'>PATH</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>path</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN149"><span class='Ref_to_Macro'>PG_GETARG_PATH_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
 
    <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>            <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_FEATURE_NOT_SUPPORTED<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>             <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"function \"path_center\" not implemented"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN304"><span class='Ref_to_Macro'>PG_RETURN_NULL</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN4370"></a><span class='Declare_Function'>path_poly</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4372"></a>    <a href="../../../include/utils/geo_decls.h.html#LN76"><span class='Ref_to_Typedef'>PATH</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>path</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN149"><span class='Ref_to_Macro'>PG_GETARG_PATH_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4373"></a>    <a href="../../../include/utils/geo_decls.h.html#LN112"><span class='Ref_to_Typedef'>POLYGON</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>poly</span><span class='Delimiter'>; 
</span><a name="LN4374"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>size</span><span class='Delimiter'>; 
</span><a name="LN4375"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* This is not very consistent --- other similar cases return NULL ... */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="geo_ops.c.html#LN4372"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN80"><span class='Ref_to_Member'>closed</span></a><span class='Parentheses'>) 
</span>        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INVALID_PARAMETER_VALUE<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"open path cannot be converted to polygon"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Never overflows: the old size fit in MaxAllocSize, and the new size is 
     * just a small constant larger. 
     */ 
</span>    <a href="geo_ops.c.html#LN4374"><span class='Ref_To_Local'>size</span></a> <span class='Operator'>= </span><a href="../../../include/c.h.html#LN554"><span class='Ref_to_Macro'>offsetof</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN112"><span class='Ref_to_Typedef'>POLYGON</span></a><span class='Delimiter'>, </span>p<span class='Parentheses'>) </span><span class='Operator'>+</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4373"><span class='Ref_To_Local'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="geo_ops.c.html#LN4372"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN79"><span class='Ref_to_Member'>npts</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN4373"><span class='Ref_To_Local'>poly</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN112"><span class='Ref_to_Typedef'>POLYGON</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4374"><span class='Ref_To_Local'>size</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/postgres.h.html#LN327"><span class='Ref_to_Macro'>SET_VARSIZE</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4373"><span class='Ref_To_Local'>poly</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN4374"><span class='Ref_To_Local'>size</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN4373"><span class='Ref_To_Local'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN115"><span class='Ref_to_Member'>npts</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN4372"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN79"><span class='Ref_to_Member'>npts</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4375"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN4375"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN4372"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN79"><span class='Ref_to_Member'>npts</span></a><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN4375"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="geo_ops.c.html#LN4373"><span class='Ref_To_Local'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN4375"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN4372"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN4375"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN4373"><span class='Ref_To_Local'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN4375"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN4372"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN4375"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="geo_ops.c.html#LN55"><span class='Ref_to_Proto'>make_bound_box</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4373"><span class='Ref_To_Local'>poly</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/geo_decls.h.html#LN168"><span class='Ref_to_Macro'>PG_RETURN_POLYGON_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4373"><span class='Ref_To_Local'>poly</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end path_poly &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/*********************************************************************** 
 ** 
 **     Routines for 2D polygons. 
 ** 
 ***********************************************************************/ 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN4412"></a><span class='Declare_Function'>poly_npoints</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4414"></a>    <a href="../../../include/utils/geo_decls.h.html#LN112"><span class='Ref_to_Typedef'>POLYGON</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>poly</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN166"><span class='Ref_to_Macro'>PG_GETARG_POLYGON_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN313"><span class='Ref_to_Macro'>PG_RETURN_INT32</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4414"><span class='Ref_To_Local'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN115"><span class='Ref_to_Member'>npts</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN4421"></a><span class='Declare_Function'>poly_center</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4423"></a>    <a href="../../../include/utils/geo_decls.h.html#LN112"><span class='Ref_to_Typedef'>POLYGON</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>poly</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN166"><span class='Ref_to_Macro'>PG_GETARG_POLYGON_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4424"></a>    <a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>       <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span><a name="LN4425"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>circle</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN4425"><span class='Ref_To_Local'>circle</span></a> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN170"><span class='Ref_to_Macro'>DatumGetCircleP</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN583"><span class='Ref_to_Macro'>DirectFunctionCall1</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5205"><span class='Ref_to_Func'>poly_circle</span></a><span class='Delimiter'>, 
</span>                                                 <a href="../../../include/utils/geo_decls.h.html#LN165"><span class='Ref_to_Macro'>PolygonPGetDatum</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4423"><span class='Ref_To_Local'>poly</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN4424"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN583"><span class='Ref_to_Macro'>DirectFunctionCall1</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5069"><span class='Ref_to_Func'>circle_center</span></a><span class='Delimiter'>, 
</span>                                 <a href="../../../include/utils/geo_decls.h.html#LN171"><span class='Ref_to_Macro'>CirclePGetDatum</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4425"><span class='Ref_To_Local'>circle</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN312"><span class='Ref_to_Macro'>PG_RETURN_DATUM</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4424"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN4437"></a><span class='Declare_Function'>poly_box</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4439"></a>    <a href="../../../include/utils/geo_decls.h.html#LN112"><span class='Ref_to_Typedef'>POLYGON</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>poly</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN166"><span class='Ref_to_Macro'>PG_GETARG_POLYGON_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4440"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4439"><span class='Ref_To_Local'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN115"><span class='Ref_to_Member'>npts</span></a> <span class='Operator'>&LT; </span><span class='Number'>1</span><span class='Parentheses'>) 
</span>        <a href="../../../include/fmgr.h.html#LN304"><span class='Ref_to_Macro'>PG_RETURN_NULL</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN4440"><span class='Ref_To_Local'>box</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN43"><span class='Ref_to_Proto'>box_copy</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN4439"><span class='Ref_To_Local'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN116"><span class='Ref_to_Member'>boundbox</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/geo_decls.h.html#LN161"><span class='Ref_to_Macro'>PG_RETURN_BOX_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4440"><span class='Ref_To_Local'>box</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/* box_poly() 
 * Convert a box to a polygon. 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN4455"></a><span class='Declare_Function'>box_poly</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4457"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4458"></a>    <a href="../../../include/utils/geo_decls.h.html#LN112"><span class='Ref_to_Typedef'>POLYGON</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>poly</span><span class='Delimiter'>; 
</span><a name="LN4459"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>size</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* map four corners of the box to a polygon */ 
</span>    <a href="geo_ops.c.html#LN4459"><span class='Ref_To_Local'>size</span></a> <span class='Operator'>= </span><a href="../../../include/c.h.html#LN554"><span class='Ref_to_Macro'>offsetof</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN112"><span class='Ref_to_Typedef'>POLYGON</span></a><span class='Delimiter'>, </span>p<span class='Parentheses'>) </span><span class='Operator'>+</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4458"><span class='Ref_To_Local'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Parentheses'>) </span><span class='Operator'>* </span><span class='Number'>4</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN4458"><span class='Ref_To_Local'>poly</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN112"><span class='Ref_to_Typedef'>POLYGON</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4459"><span class='Ref_To_Local'>size</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/postgres.h.html#LN327"><span class='Ref_to_Macro'>SET_VARSIZE</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4458"><span class='Ref_To_Local'>poly</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN4459"><span class='Ref_To_Local'>size</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN4458"><span class='Ref_To_Local'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN115"><span class='Ref_to_Member'>npts</span></a> <span class='Operator'>= </span><span class='Number'>4</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN4458"><span class='Ref_To_Local'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN4457"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN4458"><span class='Ref_To_Local'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN4457"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN4458"><span class='Ref_To_Local'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN4457"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN4458"><span class='Ref_To_Local'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN4457"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN4458"><span class='Ref_To_Local'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>2</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN4457"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN4458"><span class='Ref_To_Local'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>2</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN4457"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN4458"><span class='Ref_To_Local'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>3</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN4457"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN4458"><span class='Ref_To_Local'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>3</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN4457"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN44"><span class='Ref_to_Proto'>box_fill</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN4458"><span class='Ref_To_Local'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN116"><span class='Ref_to_Member'>boundbox</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN4457"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN4457"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, 
</span>             <a href="geo_ops.c.html#LN4457"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN4457"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/geo_decls.h.html#LN168"><span class='Ref_to_Macro'>PG_RETURN_POLYGON_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4458"><span class='Ref_To_Local'>poly</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end box_poly &raquo; </span> 
 
 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN4485"></a><span class='Declare_Function'>poly_path</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4487"></a>    <a href="../../../include/utils/geo_decls.h.html#LN112"><span class='Ref_to_Typedef'>POLYGON</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>poly</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN166"><span class='Ref_to_Macro'>PG_GETARG_POLYGON_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4488"></a>    <a href="../../../include/utils/geo_decls.h.html#LN76"><span class='Ref_to_Typedef'>PATH</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>path</span><span class='Delimiter'>; 
</span><a name="LN4489"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>size</span><span class='Delimiter'>; 
</span><a name="LN4490"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Never overflows: the old size fit in MaxAllocSize, and the new size is 
     * smaller by a small constant. 
     */ 
</span>    <a href="geo_ops.c.html#LN4489"><span class='Ref_To_Local'>size</span></a> <span class='Operator'>= </span><a href="../../../include/c.h.html#LN554"><span class='Ref_to_Macro'>offsetof</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN76"><span class='Ref_to_Typedef'>PATH</span></a><span class='Delimiter'>, </span>p<span class='Parentheses'>) </span><span class='Operator'>+</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4488"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="geo_ops.c.html#LN4487"><span class='Ref_To_Local'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN115"><span class='Ref_to_Member'>npts</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN4488"><span class='Ref_To_Local'>path</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN76"><span class='Ref_to_Typedef'>PATH</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4489"><span class='Ref_To_Local'>size</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/postgres.h.html#LN327"><span class='Ref_to_Macro'>SET_VARSIZE</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4488"><span class='Ref_To_Local'>path</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN4489"><span class='Ref_To_Local'>size</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN4488"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN79"><span class='Ref_to_Member'>npts</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN4487"><span class='Ref_To_Local'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN115"><span class='Ref_to_Member'>npts</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN4488"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN80"><span class='Ref_to_Member'>closed</span></a> <span class='Operator'>= </span><span class='Boolean'>TRUE</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* prevent instability in unused pad bytes */ 
</span>    <a href="geo_ops.c.html#LN4488"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN81"><span class='Ref_to_Member'>dummy</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4490"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN4490"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN4487"><span class='Ref_To_Local'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN115"><span class='Ref_to_Member'>npts</span></a><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN4490"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="geo_ops.c.html#LN4488"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN4490"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN4487"><span class='Ref_To_Local'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN4490"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN4488"><span class='Ref_To_Local'>path</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN82"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN4490"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN4487"><span class='Ref_To_Local'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN4490"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../../include/utils/geo_decls.h.html#LN151"><span class='Ref_to_Macro'>PG_RETURN_PATH_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4488"><span class='Ref_To_Local'>path</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end poly_path &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/*********************************************************************** 
 ** 
 **     Routines for circles. 
 ** 
 ***********************************************************************/ 
</span> 
<span class='Comment_Multi_Line'>/*---------------------------------------------------------- 
 * Formatting and conversion routines. 
 *---------------------------------------------------------*/ 
</span> 
<span class='Comment_Multi_Line'>/*      circle_in       -       convert a string to internal form. 
 * 
 *      External format: (center and radius of circle) 
 *              "((f8,f8)&LT;f8&GT;)" 
 *              also supports quick entry style "(f8,f8,f8)" 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN4532"></a><span class='Declare_Function'>circle_in</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4534"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>str</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN241"><span class='Ref_to_Macro'>PG_GETARG_CSTRING</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4535"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>circle</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span><a name="LN4536"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>s</span><span class='Delimiter'>, 
</span><a name="LN4537"></a>               <span class='Operator'>*</span><span class='Declare_Local'>cp</span><span class='Delimiter'>; 
</span><a name="LN4538"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>depth</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN4536"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN4534"><span class='Ref_To_Local'>str</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>while</span> <span class='Parentheses'>(</span>isspace<span class='Parentheses'>((</span><span class='Keyword'>unsigned char</span><span class='Parentheses'>) </span><span class='Operator'>*</span><a href="geo_ops.c.html#LN4536"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>))</span> 
        <a href="geo_ops.c.html#LN4536"><span class='Ref_To_Local'>s</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>((</span><span class='Operator'>*</span><a href="geo_ops.c.html#LN4536"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>== </span><a href="geo_ops.c.html#LN94"><span class='Ref_to_Const'>LDELIM_C</span></a><span class='Parentheses'>) </span><span class='Operator'>|| </span><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="geo_ops.c.html#LN4536"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>== </span><a href="../../../test/regress/regress.c.html#LN41"><span class='Ref_to_Const'>LDELIM</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="geo_ops.c.html#LN4538"><span class='Ref_To_Local'>depth</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN4537"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4536"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>while</span> <span class='Parentheses'>(</span>isspace<span class='Parentheses'>((</span><span class='Keyword'>unsigned char</span><span class='Parentheses'>) </span><span class='Operator'>*</span><a href="geo_ops.c.html#LN4537"><span class='Ref_To_Local'>cp</span></a><span class='Parentheses'>))</span> 
            <a href="geo_ops.c.html#LN4537"><span class='Ref_To_Local'>cp</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="geo_ops.c.html#LN4537"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>== </span><a href="../../../test/regress/regress.c.html#LN41"><span class='Ref_to_Const'>LDELIM</span></a><span class='Parentheses'>) 
</span>            <a href="geo_ops.c.html#LN4536"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN4537"><span class='Ref_To_Local'>cp</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="geo_ops.c.html#LN62"><span class='Ref_to_Proto'>pair_decode</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4536"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN4535"><span class='Ref_To_Local'>circle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN4535"><span class='Ref_To_Local'>circle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN4536"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><span class='String'>"circle"</span><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN4534"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="geo_ops.c.html#LN4536"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>== </span><a href="../../../test/regress/regress.c.html#LN43"><span class='Ref_to_Const'>DELIM</span></a><span class='Parentheses'>) 
</span>        <a href="geo_ops.c.html#LN4536"><span class='Ref_To_Local'>s</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN4535"><span class='Ref_To_Local'>circle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN126"><span class='Ref_to_Member'>radius</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN59"><span class='Ref_to_Proto'>single_decode</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4536"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN4536"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><span class='String'>"circle"</span><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN4534"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4535"><span class='Ref_To_Local'>circle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN126"><span class='Ref_to_Member'>radius</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INVALID_TEXT_REPRESENTATION<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"invalid input syntax for type %s: \"%s\""</span><span class='Delimiter'>, 
</span>                        <span class='String'>"circle"</span><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN4534"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4538"><span class='Ref_To_Local'>depth</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>((</span><span class='Operator'>*</span><a href="geo_ops.c.html#LN4536"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>== </span><a href="../../../test/regress/regress.c.html#LN42"><span class='Ref_to_Const'>RDELIM</span></a><span class='Parentheses'>)</span> 
            <span class='Operator'>|| </span><span class='Parentheses'>((</span><span class='Operator'>*</span><a href="geo_ops.c.html#LN4536"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>== </span><a href="geo_ops.c.html#LN95"><span class='Ref_to_Const'>RDELIM_C</span></a><span class='Parentheses'>) </span><span class='Operator'>&& </span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4538"><span class='Ref_To_Local'>depth</span></a> <span class='Operator'>== </span><span class='Number'>1</span><span class='Parentheses'>)))</span> 
        <span class='Delimiter'>{ 
</span>            <a href="geo_ops.c.html#LN4538"><span class='Ref_To_Local'>depth</span></a><span class='Operator'>--</span><span class='Delimiter'>; 
</span>            <a href="geo_ops.c.html#LN4536"><span class='Ref_To_Local'>s</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>            <span class='Control'>while</span> <span class='Parentheses'>(</span>isspace<span class='Parentheses'>((</span><span class='Keyword'>unsigned char</span><span class='Parentheses'>) </span><span class='Operator'>*</span><a href="geo_ops.c.html#LN4536"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>))</span> 
                <a href="geo_ops.c.html#LN4536"><span class='Ref_To_Local'>s</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
            <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INVALID_TEXT_REPRESENTATION<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"invalid input syntax for type %s: \"%s\""</span><span class='Delimiter'>, 
</span>                            <span class='String'>"circle"</span><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN4534"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="geo_ops.c.html#LN4536"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>!= </span><span class='String'>'\0'</span><span class='Parentheses'>) 
</span>        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INVALID_TEXT_REPRESENTATION<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"invalid input syntax for type %s: \"%s\""</span><span class='Delimiter'>, 
</span>                        <span class='String'>"circle"</span><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN4534"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/geo_decls.h.html#LN173"><span class='Ref_to_Macro'>PG_RETURN_CIRCLE_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4535"><span class='Ref_To_Local'>circle</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end circle_in &raquo; </span> 
 
<span class='Comment_Multi_Line'>/*      circle_out      -       convert a circle to external form. 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN4594"></a><span class='Declare_Function'>circle_out</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4596"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>circle</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN172"><span class='Ref_to_Macro'>PG_GETARG_CIRCLE_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4597"></a>    <a href="../../../include/lib/stringinfo.h.html#LN34"><span class='Ref_to_Struct'>StringInfoData</span></a> <span class='Declare_Local'>str</span><span class='Delimiter'>; 
</span> 
    <a href="../../lib/stringinfo.c.html#LN44"><span class='Ref_to_Func'>initStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN4597"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN4597"><span class='Ref_To_Local'>str</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN94"><span class='Ref_to_Const'>LDELIM_C</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN4597"><span class='Ref_To_Local'>str</span></a><span class='Delimiter'>, </span><a href="../../../test/regress/regress.c.html#LN41"><span class='Ref_to_Const'>LDELIM</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN64"><span class='Ref_to_Proto'>pair_encode</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4596"><span class='Ref_To_Local'>circle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN4596"><span class='Ref_To_Local'>circle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN4597"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN4597"><span class='Ref_To_Local'>str</span></a><span class='Delimiter'>, </span><a href="../../../test/regress/regress.c.html#LN42"><span class='Ref_to_Const'>RDELIM</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN4597"><span class='Ref_To_Local'>str</span></a><span class='Delimiter'>, </span><a href="../../../test/regress/regress.c.html#LN43"><span class='Ref_to_Const'>DELIM</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN61"><span class='Ref_to_Proto'>single_encode</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4596"><span class='Ref_To_Local'>circle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN126"><span class='Ref_to_Member'>radius</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN4597"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN4597"><span class='Ref_To_Local'>str</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN95"><span class='Ref_to_Const'>RDELIM_C</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN321"><span class='Ref_to_Macro'>PG_RETURN_CSTRING</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4597"><span class='Ref_To_Local'>str</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 *      circle_recv         - converts external binary format to circle 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN4616"></a><span class='Declare_Function'>circle_recv</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4618"></a>    <a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a><span class='Parentheses'>) </span><a href="../../../include/fmgr.h.html#LN240"><span class='Ref_to_Macro'>PG_GETARG_POINTER</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4619"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>circle</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN4619"><span class='Ref_To_Local'>circle</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN4619"><span class='Ref_To_Local'>circle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="../../../include/libpq/pqformat.h.html#LN41"><span class='Ref_to_Proto'>pq_getmsgfloat8</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4618"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN4619"><span class='Ref_To_Local'>circle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="../../../include/libpq/pqformat.h.html#LN41"><span class='Ref_to_Proto'>pq_getmsgfloat8</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4618"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN4619"><span class='Ref_To_Local'>circle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN126"><span class='Ref_to_Member'>radius</span></a> <span class='Operator'>= </span><a href="../../../include/libpq/pqformat.h.html#LN41"><span class='Ref_to_Proto'>pq_getmsgfloat8</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4618"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4619"><span class='Ref_To_Local'>circle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN126"><span class='Ref_to_Member'>radius</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INVALID_BINARY_REPRESENTATION<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"invalid radius in external \"circle\" value"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/geo_decls.h.html#LN173"><span class='Ref_to_Macro'>PG_RETURN_CIRCLE_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4619"><span class='Ref_To_Local'>circle</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 *      circle_send         - converts circle to binary format 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN4639"></a><span class='Declare_Function'>circle_send</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4641"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>circle</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN172"><span class='Ref_to_Macro'>PG_GETARG_CIRCLE_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4642"></a>    <a href="../../../include/lib/stringinfo.h.html#LN34"><span class='Ref_to_Struct'>StringInfoData</span></a> <span class='Declare_Local'>buf</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/libpq/pqformat.h.html#LN31"><span class='Ref_to_Proto'>pq_begintypsend</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN4642"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/libpq/pqformat.h.html#LN28"><span class='Ref_to_Proto'>pq_sendfloat8</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN4642"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN4641"><span class='Ref_To_Local'>circle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/libpq/pqformat.h.html#LN28"><span class='Ref_to_Proto'>pq_sendfloat8</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN4642"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN4641"><span class='Ref_To_Local'>circle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/libpq/pqformat.h.html#LN28"><span class='Ref_to_Proto'>pq_sendfloat8</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN4642"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN4641"><span class='Ref_To_Local'>circle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN126"><span class='Ref_to_Member'>radius</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN328"><span class='Ref_to_Macro'>PG_RETURN_BYTEA_P</span></a><span class='Parentheses'>(</span><a href="../../../include/libpq/pqformat.h.html#LN32"><span class='Ref_to_Proto'>pq_endtypsend</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN4642"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/*---------------------------------------------------------- 
 *  Relational operators for CIRCLEs. 
 *      &LT;, &GT;, &LT;=, &GT;=, and == are based on circle area. 
 *---------------------------------------------------------*/ 
</span> 
<span class='Comment_Multi_Line'>/*      circles identical? 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN4660"></a><span class='Declare_Function'>circle_same</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4662"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>circle1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN172"><span class='Ref_to_Macro'>PG_GETARG_CIRCLE_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4663"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>circle2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN172"><span class='Ref_to_Macro'>PG_GETARG_CIRCLE_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN36"><span class='Ref_to_Macro'>FPeq</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4662"><span class='Ref_To_Local'>circle1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN126"><span class='Ref_to_Member'>radius</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN4663"><span class='Ref_To_Local'>circle2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN126"><span class='Ref_to_Member'>radius</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>                   <a href="../../../include/utils/geo_decls.h.html#LN36"><span class='Ref_to_Macro'>FPeq</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4662"><span class='Ref_To_Local'>circle1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN4663"><span class='Ref_To_Local'>circle2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>                   <a href="../../../include/utils/geo_decls.h.html#LN36"><span class='Ref_to_Macro'>FPeq</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4662"><span class='Ref_To_Local'>circle1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN4663"><span class='Ref_To_Local'>circle2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/*      circle_overlap  -       does circle1 overlap circle2? 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN4673"></a><span class='Declare_Function'>circle_overlap</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4675"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>circle1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN172"><span class='Ref_to_Macro'>PG_GETARG_CIRCLE_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4676"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>circle2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN172"><span class='Ref_to_Macro'>PG_GETARG_CIRCLE_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN39"><span class='Ref_to_Macro'>FPle</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN181"><span class='Ref_to_Proto'>point_dt</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN4675"><span class='Ref_To_Local'>circle1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN4676"><span class='Ref_To_Local'>circle2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                        <a href="geo_ops.c.html#LN4675"><span class='Ref_To_Local'>circle1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN126"><span class='Ref_to_Member'>radius</span></a> <span class='Operator'>+ </span><a href="geo_ops.c.html#LN4676"><span class='Ref_To_Local'>circle2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN126"><span class='Ref_to_Member'>radius</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/*      circle_overleft -       is the right edge of circle1 at or left of 
 *                              the right edge of circle2? 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN4686"></a><span class='Declare_Function'>circle_overleft</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4688"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>circle1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN172"><span class='Ref_to_Macro'>PG_GETARG_CIRCLE_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4689"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>circle2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN172"><span class='Ref_to_Macro'>PG_GETARG_CIRCLE_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN39"><span class='Ref_to_Macro'>FPle</span></a><span class='Parentheses'>((</span><a href="geo_ops.c.html#LN4688"><span class='Ref_To_Local'>circle1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>+ </span><a href="geo_ops.c.html#LN4688"><span class='Ref_To_Local'>circle1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN126"><span class='Ref_to_Member'>radius</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4689"><span class='Ref_To_Local'>circle2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>+ </span><a href="geo_ops.c.html#LN4689"><span class='Ref_To_Local'>circle2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN126"><span class='Ref_to_Member'>radius</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/*      circle_left     -       is circle1 strictly left of circle2? 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN4698"></a><span class='Declare_Function'>circle_left</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4700"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>circle1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN172"><span class='Ref_to_Macro'>PG_GETARG_CIRCLE_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4701"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>circle2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN172"><span class='Ref_to_Macro'>PG_GETARG_CIRCLE_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN38"><span class='Ref_to_Macro'>FPlt</span></a><span class='Parentheses'>((</span><a href="geo_ops.c.html#LN4700"><span class='Ref_To_Local'>circle1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>+ </span><a href="geo_ops.c.html#LN4700"><span class='Ref_To_Local'>circle1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN126"><span class='Ref_to_Member'>radius</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4701"><span class='Ref_To_Local'>circle2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>- </span><a href="geo_ops.c.html#LN4701"><span class='Ref_To_Local'>circle2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN126"><span class='Ref_to_Member'>radius</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/*      circle_right    -       is circle1 strictly right of circle2? 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN4710"></a><span class='Declare_Function'>circle_right</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4712"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>circle1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN172"><span class='Ref_to_Macro'>PG_GETARG_CIRCLE_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4713"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>circle2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN172"><span class='Ref_to_Macro'>PG_GETARG_CIRCLE_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN40"><span class='Ref_to_Macro'>FPgt</span></a><span class='Parentheses'>((</span><a href="geo_ops.c.html#LN4712"><span class='Ref_To_Local'>circle1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>- </span><a href="geo_ops.c.html#LN4712"><span class='Ref_To_Local'>circle1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN126"><span class='Ref_to_Member'>radius</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4713"><span class='Ref_To_Local'>circle2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>+ </span><a href="geo_ops.c.html#LN4713"><span class='Ref_To_Local'>circle2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN126"><span class='Ref_to_Member'>radius</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/*      circle_overright    -   is the left edge of circle1 at or right of 
 *                              the left edge of circle2? 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN4723"></a><span class='Declare_Function'>circle_overright</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4725"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>circle1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN172"><span class='Ref_to_Macro'>PG_GETARG_CIRCLE_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4726"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>circle2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN172"><span class='Ref_to_Macro'>PG_GETARG_CIRCLE_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN41"><span class='Ref_to_Macro'>FPge</span></a><span class='Parentheses'>((</span><a href="geo_ops.c.html#LN4725"><span class='Ref_To_Local'>circle1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>- </span><a href="geo_ops.c.html#LN4725"><span class='Ref_To_Local'>circle1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN126"><span class='Ref_to_Member'>radius</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4726"><span class='Ref_To_Local'>circle2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>- </span><a href="geo_ops.c.html#LN4726"><span class='Ref_To_Local'>circle2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN126"><span class='Ref_to_Member'>radius</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/*      circle_contained        -       is circle1 contained by circle2? 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN4735"></a><span class='Declare_Function'>circle_contained</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4737"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>circle1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN172"><span class='Ref_to_Macro'>PG_GETARG_CIRCLE_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4738"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>circle2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN172"><span class='Ref_to_Macro'>PG_GETARG_CIRCLE_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN39"><span class='Ref_to_Macro'>FPle</span></a><span class='Parentheses'>((</span><a href="../../../include/utils/geo_decls.h.html#LN181"><span class='Ref_to_Proto'>point_dt</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN4737"><span class='Ref_To_Local'>circle1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN4738"><span class='Ref_To_Local'>circle2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Parentheses'>) </span><span class='Operator'>+ </span><a href="geo_ops.c.html#LN4737"><span class='Ref_To_Local'>circle1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN126"><span class='Ref_to_Member'>radius</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN4738"><span class='Ref_To_Local'>circle2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN126"><span class='Ref_to_Member'>radius</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/*      circle_contain  -       does circle1 contain circle2? 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN4746"></a><span class='Declare_Function'>circle_contain</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4748"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>circle1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN172"><span class='Ref_to_Macro'>PG_GETARG_CIRCLE_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4749"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>circle2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN172"><span class='Ref_to_Macro'>PG_GETARG_CIRCLE_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN39"><span class='Ref_to_Macro'>FPle</span></a><span class='Parentheses'>((</span><a href="../../../include/utils/geo_decls.h.html#LN181"><span class='Ref_to_Proto'>point_dt</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN4748"><span class='Ref_To_Local'>circle1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN4749"><span class='Ref_To_Local'>circle2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Parentheses'>) </span><span class='Operator'>+ </span><a href="geo_ops.c.html#LN4749"><span class='Ref_To_Local'>circle2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN126"><span class='Ref_to_Member'>radius</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN4748"><span class='Ref_To_Local'>circle1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN126"><span class='Ref_to_Member'>radius</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/*      circle_below        -       is circle1 strictly below circle2? 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN4758"></a><span class='Declare_Function'>circle_below</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4760"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>circle1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN172"><span class='Ref_to_Macro'>PG_GETARG_CIRCLE_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4761"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>circle2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN172"><span class='Ref_to_Macro'>PG_GETARG_CIRCLE_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN38"><span class='Ref_to_Macro'>FPlt</span></a><span class='Parentheses'>((</span><a href="geo_ops.c.html#LN4760"><span class='Ref_To_Local'>circle1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>+ </span><a href="geo_ops.c.html#LN4760"><span class='Ref_To_Local'>circle1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN126"><span class='Ref_to_Member'>radius</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4761"><span class='Ref_To_Local'>circle2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>- </span><a href="geo_ops.c.html#LN4761"><span class='Ref_To_Local'>circle2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN126"><span class='Ref_to_Member'>radius</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/*      circle_above    -       is circle1 strictly above circle2? 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN4770"></a><span class='Declare_Function'>circle_above</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4772"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>circle1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN172"><span class='Ref_to_Macro'>PG_GETARG_CIRCLE_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4773"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>circle2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN172"><span class='Ref_to_Macro'>PG_GETARG_CIRCLE_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN40"><span class='Ref_to_Macro'>FPgt</span></a><span class='Parentheses'>((</span><a href="geo_ops.c.html#LN4772"><span class='Ref_To_Local'>circle1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>- </span><a href="geo_ops.c.html#LN4772"><span class='Ref_To_Local'>circle1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN126"><span class='Ref_to_Member'>radius</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4773"><span class='Ref_To_Local'>circle2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>+ </span><a href="geo_ops.c.html#LN4773"><span class='Ref_To_Local'>circle2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN126"><span class='Ref_to_Member'>radius</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/*      circle_overbelow -      is the upper edge of circle1 at or below 
 *                              the upper edge of circle2? 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN4783"></a><span class='Declare_Function'>circle_overbelow</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4785"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>circle1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN172"><span class='Ref_to_Macro'>PG_GETARG_CIRCLE_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4786"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>circle2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN172"><span class='Ref_to_Macro'>PG_GETARG_CIRCLE_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN39"><span class='Ref_to_Macro'>FPle</span></a><span class='Parentheses'>((</span><a href="geo_ops.c.html#LN4785"><span class='Ref_To_Local'>circle1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>+ </span><a href="geo_ops.c.html#LN4785"><span class='Ref_To_Local'>circle1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN126"><span class='Ref_to_Member'>radius</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4786"><span class='Ref_To_Local'>circle2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>+ </span><a href="geo_ops.c.html#LN4786"><span class='Ref_To_Local'>circle2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN126"><span class='Ref_to_Member'>radius</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/*      circle_overabove    -   is the lower edge of circle1 at or above 
 *                              the lower edge of circle2? 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN4796"></a><span class='Declare_Function'>circle_overabove</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4798"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>circle1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN172"><span class='Ref_to_Macro'>PG_GETARG_CIRCLE_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4799"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>circle2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN172"><span class='Ref_to_Macro'>PG_GETARG_CIRCLE_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN41"><span class='Ref_to_Macro'>FPge</span></a><span class='Parentheses'>((</span><a href="geo_ops.c.html#LN4798"><span class='Ref_To_Local'>circle1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>- </span><a href="geo_ops.c.html#LN4798"><span class='Ref_To_Local'>circle1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN126"><span class='Ref_to_Member'>radius</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4799"><span class='Ref_To_Local'>circle2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>- </span><a href="geo_ops.c.html#LN4799"><span class='Ref_To_Local'>circle2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN126"><span class='Ref_to_Member'>radius</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/*      circle_relop    -       is area(circle1) relop area(circle2), within 
 *                              our accuracy constraint? 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN4810"></a><span class='Declare_Function'>circle_eq</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4812"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>circle1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN172"><span class='Ref_to_Macro'>PG_GETARG_CIRCLE_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4813"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>circle2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN172"><span class='Ref_to_Macro'>PG_GETARG_CIRCLE_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN36"><span class='Ref_to_Macro'>FPeq</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN48"><span class='Ref_to_Proto'>circle_ar</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4812"><span class='Ref_To_Local'>circle1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN48"><span class='Ref_to_Proto'>circle_ar</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4813"><span class='Ref_To_Local'>circle2</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN4819"></a><span class='Declare_Function'>circle_ne</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4821"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>circle1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN172"><span class='Ref_to_Macro'>PG_GETARG_CIRCLE_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4822"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>circle2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN172"><span class='Ref_to_Macro'>PG_GETARG_CIRCLE_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN37"><span class='Ref_to_Macro'>FPne</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN48"><span class='Ref_to_Proto'>circle_ar</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4821"><span class='Ref_To_Local'>circle1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN48"><span class='Ref_to_Proto'>circle_ar</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4822"><span class='Ref_To_Local'>circle2</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN4828"></a><span class='Declare_Function'>circle_lt</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4830"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>circle1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN172"><span class='Ref_to_Macro'>PG_GETARG_CIRCLE_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4831"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>circle2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN172"><span class='Ref_to_Macro'>PG_GETARG_CIRCLE_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN38"><span class='Ref_to_Macro'>FPlt</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN48"><span class='Ref_to_Proto'>circle_ar</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4830"><span class='Ref_To_Local'>circle1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN48"><span class='Ref_to_Proto'>circle_ar</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4831"><span class='Ref_To_Local'>circle2</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN4837"></a><span class='Declare_Function'>circle_gt</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4839"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>circle1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN172"><span class='Ref_to_Macro'>PG_GETARG_CIRCLE_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4840"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>circle2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN172"><span class='Ref_to_Macro'>PG_GETARG_CIRCLE_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN40"><span class='Ref_to_Macro'>FPgt</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN48"><span class='Ref_to_Proto'>circle_ar</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4839"><span class='Ref_To_Local'>circle1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN48"><span class='Ref_to_Proto'>circle_ar</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4840"><span class='Ref_To_Local'>circle2</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN4846"></a><span class='Declare_Function'>circle_le</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4848"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>circle1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN172"><span class='Ref_to_Macro'>PG_GETARG_CIRCLE_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4849"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>circle2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN172"><span class='Ref_to_Macro'>PG_GETARG_CIRCLE_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN39"><span class='Ref_to_Macro'>FPle</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN48"><span class='Ref_to_Proto'>circle_ar</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4848"><span class='Ref_To_Local'>circle1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN48"><span class='Ref_to_Proto'>circle_ar</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4849"><span class='Ref_To_Local'>circle2</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN4855"></a><span class='Declare_Function'>circle_ge</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4857"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>circle1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN172"><span class='Ref_to_Macro'>PG_GETARG_CIRCLE_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4858"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>circle2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN172"><span class='Ref_to_Macro'>PG_GETARG_CIRCLE_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN41"><span class='Ref_to_Macro'>FPge</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN48"><span class='Ref_to_Proto'>circle_ar</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4857"><span class='Ref_To_Local'>circle1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN48"><span class='Ref_to_Proto'>circle_ar</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4858"><span class='Ref_To_Local'>circle2</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/*---------------------------------------------------------- 
 *  "Arithmetic" operators on circles. 
 *---------------------------------------------------------*/ 
</span> 
<span class='Keyword'>static </span><a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a> <span class='Operator'>* 
</span><a name="LN4869"></a><span class='Declare_Function'>circle_copy</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>circle</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4871"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/c.h.html#LN525"><span class='Ref_to_Macro'>PointerIsValid</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4869"><span class='Ref_to_Parameter'>circle</span></a><span class='Parentheses'>))</span> 
        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN4871"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    memcpy<span class='Parentheses'>((</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="geo_ops.c.html#LN4871"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="geo_ops.c.html#LN4869"><span class='Ref_to_Parameter'>circle</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="geo_ops.c.html#LN4871"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/* circle_add_pt() 
 * Translation operator. 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN4886"></a><span class='Declare_Function'>circle_add_pt</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4888"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>circle</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN172"><span class='Ref_to_Macro'>PG_GETARG_CIRCLE_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4889"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>point</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4890"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN4890"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN49"><span class='Ref_to_Proto'>circle_copy</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4888"><span class='Ref_To_Local'>circle</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN4890"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>+= </span><a href="geo_ops.c.html#LN4889"><span class='Ref_To_Local'>point</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN4890"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>+= </span><a href="geo_ops.c.html#LN4889"><span class='Ref_To_Local'>point</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/geo_decls.h.html#LN173"><span class='Ref_to_Macro'>PG_RETURN_CIRCLE_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4890"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN4901"></a><span class='Declare_Function'>circle_sub_pt</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4903"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>circle</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN172"><span class='Ref_to_Macro'>PG_GETARG_CIRCLE_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4904"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>point</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4905"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN4905"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN49"><span class='Ref_to_Proto'>circle_copy</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4903"><span class='Ref_To_Local'>circle</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN4905"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>-= </span><a href="geo_ops.c.html#LN4904"><span class='Ref_To_Local'>point</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN4905"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>-= </span><a href="geo_ops.c.html#LN4904"><span class='Ref_To_Local'>point</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/geo_decls.h.html#LN173"><span class='Ref_to_Macro'>PG_RETURN_CIRCLE_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4905"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/* circle_mul_pt() 
 * Rotation and scaling operators. 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN4920"></a><span class='Declare_Function'>circle_mul_pt</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4922"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>circle</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN172"><span class='Ref_to_Macro'>PG_GETARG_CIRCLE_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4923"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>point</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4924"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span><a name="LN4925"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>p</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN4924"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN49"><span class='Ref_to_Proto'>circle_copy</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4922"><span class='Ref_To_Local'>circle</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN4925"><span class='Ref_To_Local'>p</span></a> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN136"><span class='Ref_to_Macro'>DatumGetPointP</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN585"><span class='Ref_to_Macro'>DirectFunctionCall2</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4062"><span class='Ref_to_Func'>point_mul</span></a><span class='Delimiter'>, 
</span>                                           <a href="../../../include/utils/geo_decls.h.html#LN137"><span class='Ref_to_Macro'>PointPGetDatum</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN4922"><span class='Ref_To_Local'>circle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                           <a href="../../../include/utils/geo_decls.h.html#LN137"><span class='Ref_to_Macro'>PointPGetDatum</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4923"><span class='Ref_To_Local'>point</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN4924"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN4925"><span class='Ref_To_Local'>p</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN4924"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN4925"><span class='Ref_To_Local'>p</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN4924"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN126"><span class='Ref_to_Member'>radius</span></a> <span class='Operator'>*= </span><a href="../../../include/utils/geo_decls.h.html#LN52"><span class='Ref_to_Macro'>HYPOT</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4923"><span class='Ref_To_Local'>point</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN4923"><span class='Ref_To_Local'>point</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/geo_decls.h.html#LN173"><span class='Ref_to_Macro'>PG_RETURN_CIRCLE_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4924"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN4940"></a><span class='Declare_Function'>circle_div_pt</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4942"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>circle</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN172"><span class='Ref_to_Macro'>PG_GETARG_CIRCLE_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4943"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>point</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4944"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span><a name="LN4945"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>p</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN4944"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN49"><span class='Ref_to_Proto'>circle_copy</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4942"><span class='Ref_To_Local'>circle</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN4945"><span class='Ref_To_Local'>p</span></a> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN136"><span class='Ref_to_Macro'>DatumGetPointP</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN585"><span class='Ref_to_Macro'>DirectFunctionCall2</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4077"><span class='Ref_to_Func'>point_div</span></a><span class='Delimiter'>, 
</span>                                           <a href="../../../include/utils/geo_decls.h.html#LN137"><span class='Ref_to_Macro'>PointPGetDatum</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN4942"><span class='Ref_To_Local'>circle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                           <a href="../../../include/utils/geo_decls.h.html#LN137"><span class='Ref_to_Macro'>PointPGetDatum</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4943"><span class='Ref_To_Local'>point</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN4944"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN4945"><span class='Ref_To_Local'>p</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN4944"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN4945"><span class='Ref_To_Local'>p</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN4944"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN126"><span class='Ref_to_Member'>radius</span></a> <span class='Operator'>/= </span><a href="../../../include/utils/geo_decls.h.html#LN52"><span class='Ref_to_Macro'>HYPOT</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4943"><span class='Ref_To_Local'>point</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN4943"><span class='Ref_To_Local'>point</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/geo_decls.h.html#LN173"><span class='Ref_to_Macro'>PG_RETURN_CIRCLE_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4944"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/*      circle_area     -       returns the area of the circle. 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN4963"></a><span class='Declare_Function'>circle_area</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4965"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>circle</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN172"><span class='Ref_to_Macro'>PG_GETARG_CIRCLE_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN325"><span class='Ref_to_Macro'>PG_RETURN_FLOAT8</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN48"><span class='Ref_to_Proto'>circle_ar</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4965"><span class='Ref_To_Local'>circle</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/*      circle_diameter -       returns the diameter of the circle. 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN4974"></a><span class='Declare_Function'>circle_diameter</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4976"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>circle</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN172"><span class='Ref_to_Macro'>PG_GETARG_CIRCLE_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN325"><span class='Ref_to_Macro'>PG_RETURN_FLOAT8</span></a><span class='Parentheses'>(</span><span class='Number'>2</span> <span class='Operator'>* </span><a href="geo_ops.c.html#LN4976"><span class='Ref_To_Local'>circle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN126"><span class='Ref_to_Member'>radius</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/*      circle_radius   -       returns the radius of the circle. 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN4985"></a><span class='Declare_Function'>circle_radius</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4987"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>circle</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN172"><span class='Ref_to_Macro'>PG_GETARG_CIRCLE_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN325"><span class='Ref_to_Macro'>PG_RETURN_FLOAT8</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4987"><span class='Ref_To_Local'>circle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN126"><span class='Ref_to_Member'>radius</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/*      circle_distance -       returns the distance between 
 *                                two circles. 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN4997"></a><span class='Declare_Function'>circle_distance</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4999"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>circle1</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN172"><span class='Ref_to_Macro'>PG_GETARG_CIRCLE_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN5000"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>circle2</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN172"><span class='Ref_to_Macro'>PG_GETARG_CIRCLE_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN5001"></a>    <a href="../../../include/c.h.html#LN380"><span class='Ref_to_Typedef'>float8</span></a>      <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN5001"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN181"><span class='Ref_to_Proto'>point_dt</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN4999"><span class='Ref_To_Local'>circle1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN5000"><span class='Ref_To_Local'>circle2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Parentheses'>) 
</span>        <span class='Operator'>- </span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN4999"><span class='Ref_To_Local'>circle1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN126"><span class='Ref_to_Member'>radius</span></a> <span class='Operator'>+ </span><a href="geo_ops.c.html#LN5000"><span class='Ref_To_Local'>circle2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN126"><span class='Ref_to_Member'>radius</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5001"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <a href="geo_ops.c.html#LN5001"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN325"><span class='Ref_to_Macro'>PG_RETURN_FLOAT8</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5001"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN5012"></a><span class='Declare_Function'>circle_contain_pt</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN5014"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>circle</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN172"><span class='Ref_to_Macro'>PG_GETARG_CIRCLE_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN5015"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>point</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN5016"></a>    <span class='Keyword'>double</span>      <span class='Declare_Local'>d</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN5016"><span class='Ref_To_Local'>d</span></a> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN181"><span class='Ref_to_Proto'>point_dt</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN5014"><span class='Ref_To_Local'>circle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN5015"><span class='Ref_To_Local'>point</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5016"><span class='Ref_To_Local'>d</span></a> <span class='Operator'>&LT;= </span><a href="geo_ops.c.html#LN5014"><span class='Ref_To_Local'>circle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN126"><span class='Ref_to_Member'>radius</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN5024"></a><span class='Declare_Function'>pt_contained_circle</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN5026"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>point</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN5027"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>circle</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN172"><span class='Ref_to_Macro'>PG_GETARG_CIRCLE_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN5028"></a>    <span class='Keyword'>double</span>      <span class='Declare_Local'>d</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN5028"><span class='Ref_To_Local'>d</span></a> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN181"><span class='Ref_to_Proto'>point_dt</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN5027"><span class='Ref_To_Local'>circle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN5026"><span class='Ref_To_Local'>point</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5028"><span class='Ref_To_Local'>d</span></a> <span class='Operator'>&LT;= </span><a href="geo_ops.c.html#LN5027"><span class='Ref_To_Local'>circle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN126"><span class='Ref_to_Member'>radius</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/*      dist_pc -       returns the distance between 
 *                        a point and a circle. 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN5039"></a><span class='Declare_Function'>dist_pc</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN5041"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>point</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN5042"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>circle</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN172"><span class='Ref_to_Macro'>PG_GETARG_CIRCLE_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN5043"></a>    <a href="../../../include/c.h.html#LN380"><span class='Ref_to_Typedef'>float8</span></a>      <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN5043"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN181"><span class='Ref_to_Proto'>point_dt</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5041"><span class='Ref_To_Local'>point</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN5042"><span class='Ref_To_Local'>circle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Parentheses'>) </span><span class='Operator'>- </span><a href="geo_ops.c.html#LN5042"><span class='Ref_To_Local'>circle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN126"><span class='Ref_to_Member'>radius</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5043"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <a href="geo_ops.c.html#LN5043"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN325"><span class='Ref_to_Macro'>PG_RETURN_FLOAT8</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5043"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Distance from a circle to a point 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN5055"></a><span class='Declare_Function'>dist_cpoint</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN5057"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>circle</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN172"><span class='Ref_to_Macro'>PG_GETARG_CIRCLE_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN5058"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>point</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN5059"></a>    <a href="../../../include/c.h.html#LN380"><span class='Ref_to_Typedef'>float8</span></a>      <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN5059"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN181"><span class='Ref_to_Proto'>point_dt</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5058"><span class='Ref_To_Local'>point</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN5057"><span class='Ref_To_Local'>circle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Parentheses'>) </span><span class='Operator'>- </span><a href="geo_ops.c.html#LN5057"><span class='Ref_To_Local'>circle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN126"><span class='Ref_to_Member'>radius</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5059"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <a href="geo_ops.c.html#LN5059"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN325"><span class='Ref_to_Macro'>PG_RETURN_FLOAT8</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5059"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/*      circle_center   -       returns the center point of the circle. 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN5070"></a><span class='Declare_Function'>circle_center</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN5072"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>circle</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN172"><span class='Ref_to_Macro'>PG_GETARG_CIRCLE_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN5073"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN5073"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN5073"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN5072"><span class='Ref_To_Local'>circle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN5073"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN5072"><span class='Ref_To_Local'>circle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/geo_decls.h.html#LN139"><span class='Ref_to_Macro'>PG_RETURN_POINT_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5073"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/*      circle_ar       -       returns the area of the circle. 
 */ 
</span><span class='Keyword'>static double 
</span><a name="LN5086"></a><span class='Declare_Function'>circle_ar</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>circle</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> <a href="../../../../contrib/earthdistance/earthdistance.c.html#LN9"><span class='Ref_to_Const'>M_PI</span></a> <span class='Operator'>* </span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5086"><span class='Ref_to_Parameter'>circle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN126"><span class='Ref_to_Member'>radius</span></a> <span class='Operator'>* </span><a href="geo_ops.c.html#LN5086"><span class='Ref_to_Parameter'>circle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN126"><span class='Ref_to_Member'>radius</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/*---------------------------------------------------------- 
 *  Conversion operators. 
 *---------------------------------------------------------*/ 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN5097"></a><span class='Declare_Function'>cr_circle</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN5099"></a>    <a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>center</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN138"><span class='Ref_to_Macro'>PG_GETARG_POINT_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN5100"></a>    <a href="../../../include/c.h.html#LN380"><span class='Ref_to_Typedef'>float8</span></a>      <span class='Declare_Local'>radius</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN245"><span class='Ref_to_Macro'>PG_GETARG_FLOAT8</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN5101"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN5101"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN5101"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN5099"><span class='Ref_To_Local'>center</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN5101"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN5099"><span class='Ref_To_Local'>center</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN5101"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN126"><span class='Ref_to_Member'>radius</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN5100"><span class='Ref_To_Local'>radius</span></a><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/geo_decls.h.html#LN173"><span class='Ref_to_Macro'>PG_RETURN_CIRCLE_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5101"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN5113"></a><span class='Declare_Function'>circle_box</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN5115"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>circle</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN172"><span class='Ref_to_Macro'>PG_GETARG_CIRCLE_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN5116"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box</span><span class='Delimiter'>; 
</span><a name="LN5117"></a>    <span class='Keyword'>double</span>      <span class='Declare_Local'>delta</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN5116"><span class='Ref_To_Local'>box</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN5117"><span class='Ref_To_Local'>delta</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN5115"><span class='Ref_To_Local'>circle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN126"><span class='Ref_to_Member'>radius</span></a> <span class='Operator'>/ </span>sqrt<span class='Parentheses'>(</span><span class='Number'>2</span><span class='Operator'>.</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN5116"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN5115"><span class='Ref_To_Local'>circle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>+ </span><a href="geo_ops.c.html#LN5117"><span class='Ref_To_Local'>delta</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN5116"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN5115"><span class='Ref_To_Local'>circle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>- </span><a href="geo_ops.c.html#LN5117"><span class='Ref_To_Local'>delta</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN5116"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN5115"><span class='Ref_To_Local'>circle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>+ </span><a href="geo_ops.c.html#LN5117"><span class='Ref_To_Local'>delta</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN5116"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN5115"><span class='Ref_To_Local'>circle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>- </span><a href="geo_ops.c.html#LN5117"><span class='Ref_To_Local'>delta</span></a><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/geo_decls.h.html#LN161"><span class='Ref_to_Macro'>PG_RETURN_BOX_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5116"><span class='Ref_To_Local'>box</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* box_circle() 
 * Convert a box to a circle. 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN5135"></a><span class='Declare_Function'>box_circle</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN5137"></a>    <a href="../../../include/utils/geo_decls.h.html#LN101"><span class='Ref_to_Typedef'>BOX</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>box</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN160"><span class='Ref_to_Macro'>PG_GETARG_BOX_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN5138"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>circle</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN5138"><span class='Ref_To_Local'>circle</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN5138"><span class='Ref_To_Local'>circle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5137"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>+ </span><a href="geo_ops.c.html#LN5137"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>) </span><span class='Operator'>/ </span><span class='Number'>2</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN5138"><span class='Ref_To_Local'>circle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5137"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>+ </span><a href="geo_ops.c.html#LN5137"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN104"><span class='Ref_to_Member'>low</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>) </span><span class='Operator'>/ </span><span class='Number'>2</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN5138"><span class='Ref_To_Local'>circle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN126"><span class='Ref_to_Member'>radius</span></a> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN181"><span class='Ref_to_Proto'>point_dt</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN5138"><span class='Ref_To_Local'>circle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN5137"><span class='Ref_To_Local'>box</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN103"><span class='Ref_to_Member'>high</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/geo_decls.h.html#LN173"><span class='Ref_to_Macro'>PG_RETURN_CIRCLE_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5138"><span class='Ref_To_Local'>circle</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN5152"></a><span class='Declare_Function'>circle_poly</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN5154"></a>    <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>npts</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN233"><span class='Ref_to_Macro'>PG_GETARG_INT32</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN5155"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>circle</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN172"><span class='Ref_to_Macro'>PG_GETARG_CIRCLE_P</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN5156"></a>    <a href="../../../include/utils/geo_decls.h.html#LN112"><span class='Ref_to_Typedef'>POLYGON</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>poly</span><span class='Delimiter'>; 
</span><a name="LN5157"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>base_size</span><span class='Delimiter'>, 
</span><a name="LN5158"></a>                <span class='Declare_Local'>size</span><span class='Delimiter'>; 
</span><a name="LN5159"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN5160"></a>    <span class='Keyword'>double</span>      <span class='Declare_Local'>angle</span><span class='Delimiter'>; 
</span><a name="LN5161"></a>    <span class='Keyword'>double</span>      <span class='Declare_Local'>anglestep</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN35"><span class='Ref_to_Macro'>FPzero</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5155"><span class='Ref_To_Local'>circle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN126"><span class='Ref_to_Member'>radius</span></a><span class='Parentheses'>))</span> 
        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_FEATURE_NOT_SUPPORTED<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>               <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"cannot convert circle with radius zero to polygon"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5154"><span class='Ref_To_Local'>npts</span></a> <span class='Operator'>&LT; </span><span class='Number'>2</span><span class='Parentheses'>) 
</span>        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INVALID_PARAMETER_VALUE<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"must request at least 2 points"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN5157"><span class='Ref_To_Local'>base_size</span></a> <span class='Operator'>= </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5156"><span class='Ref_To_Local'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="geo_ops.c.html#LN5154"><span class='Ref_To_Local'>npts</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN5158"><span class='Ref_To_Local'>size</span></a> <span class='Operator'>= </span><a href="../../../include/c.h.html#LN554"><span class='Ref_to_Macro'>offsetof</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN112"><span class='Ref_to_Typedef'>POLYGON</span></a><span class='Delimiter'>, </span>p<span class='Parentheses'>) </span><span class='Operator'>+</span><a href="geo_ops.c.html#LN5157"><span class='Ref_To_Local'>base_size</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Check for integer overflow */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5157"><span class='Ref_To_Local'>base_size</span></a> <span class='Operator'>/ </span><a href="geo_ops.c.html#LN5154"><span class='Ref_To_Local'>npts</span></a> <span class='Operator'>!= </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5156"><span class='Ref_To_Local'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Parentheses'>) </span><span class='Operator'>|| </span><a href="geo_ops.c.html#LN5158"><span class='Ref_To_Local'>size</span></a> <span class='Operator'>&LT;= </span><a href="geo_ops.c.html#LN5157"><span class='Ref_To_Local'>base_size</span></a><span class='Parentheses'>)</span> 
        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_PROGRAM_LIMIT_EXCEEDED<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"too many points requested"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN5156"><span class='Ref_To_Local'>poly</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN112"><span class='Ref_to_Typedef'>POLYGON</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5158"><span class='Ref_To_Local'>size</span></a><span class='Parentheses'>)</span><span class='Delimiter'>;</span>   <span class='Comment_Single_Line'>/* zero any holes */ 
</span>    <a href="../../../include/postgres.h.html#LN327"><span class='Ref_to_Macro'>SET_VARSIZE</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5156"><span class='Ref_To_Local'>poly</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN5158"><span class='Ref_To_Local'>size</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN5156"><span class='Ref_To_Local'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN115"><span class='Ref_to_Member'>npts</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN5154"><span class='Ref_To_Local'>npts</span></a><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN5161"><span class='Ref_To_Local'>anglestep</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Number'>2</span><span class='Operator'>.</span><span class='Number'>0</span> <span class='Operator'>* </span><a href="../../../../contrib/earthdistance/earthdistance.c.html#LN9"><span class='Ref_to_Const'>M_PI</span></a><span class='Parentheses'>) </span><span class='Operator'>/ </span><a href="geo_ops.c.html#LN5154"><span class='Ref_To_Local'>npts</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5159"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN5159"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN5154"><span class='Ref_To_Local'>npts</span></a><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN5159"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="geo_ops.c.html#LN5160"><span class='Ref_To_Local'>angle</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN5159"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>* </span><a href="geo_ops.c.html#LN5161"><span class='Ref_To_Local'>anglestep</span></a><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN5156"><span class='Ref_To_Local'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN5159"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN5155"><span class='Ref_To_Local'>circle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>- </span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5155"><span class='Ref_To_Local'>circle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN126"><span class='Ref_to_Member'>radius</span></a> <span class='Operator'>* </span>cos<span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5160"><span class='Ref_To_Local'>angle</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN5156"><span class='Ref_To_Local'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN5159"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN5155"><span class='Ref_To_Local'>circle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>+ </span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5155"><span class='Ref_To_Local'>circle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN126"><span class='Ref_to_Member'>radius</span></a> <span class='Operator'>* </span>sin<span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5160"><span class='Ref_To_Local'>angle</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="geo_ops.c.html#LN55"><span class='Ref_to_Proto'>make_bound_box</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5156"><span class='Ref_To_Local'>poly</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/geo_decls.h.html#LN168"><span class='Ref_to_Macro'>PG_RETURN_POLYGON_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5156"><span class='Ref_To_Local'>poly</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end circle_poly &raquo; </span> 
 
<span class='Comment_Multi_Line'>/*      poly_circle     - convert polygon to circle 
 * 
 * XXX This algorithm should use weighted means of line segments 
 *  rather than straight average values of points - tgl 97/01/21. 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN5206"></a><span class='Declare_Function'>poly_circle</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN5208"></a>    <a href="../../../include/utils/geo_decls.h.html#LN112"><span class='Ref_to_Typedef'>POLYGON</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>poly</span> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN166"><span class='Ref_to_Macro'>PG_GETARG_POLYGON_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN5209"></a>    <a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>circle</span><span class='Delimiter'>; 
</span><a name="LN5210"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5208"><span class='Ref_To_Local'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN115"><span class='Ref_to_Member'>npts</span></a> <span class='Operator'>&LT; </span><span class='Number'>1</span><span class='Parentheses'>) 
</span>        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INVALID_PARAMETER_VALUE<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"cannot convert empty polygon to circle"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN5209"><span class='Ref_To_Local'>circle</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN123"><span class='Ref_to_Typedef'>CIRCLE</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN5209"><span class='Ref_To_Local'>circle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN5209"><span class='Ref_To_Local'>circle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN5209"><span class='Ref_To_Local'>circle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN126"><span class='Ref_to_Member'>radius</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5210"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN5210"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN5208"><span class='Ref_To_Local'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN115"><span class='Ref_to_Member'>npts</span></a><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN5210"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="geo_ops.c.html#LN5209"><span class='Ref_To_Local'>circle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>+= </span><a href="geo_ops.c.html#LN5208"><span class='Ref_To_Local'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN5210"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN5209"><span class='Ref_To_Local'>circle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>+= </span><a href="geo_ops.c.html#LN5208"><span class='Ref_To_Local'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN5210"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="geo_ops.c.html#LN5209"><span class='Ref_To_Local'>circle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>/= </span><a href="geo_ops.c.html#LN5208"><span class='Ref_To_Local'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN115"><span class='Ref_to_Member'>npts</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN5209"><span class='Ref_To_Local'>circle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>/= </span><a href="geo_ops.c.html#LN5208"><span class='Ref_To_Local'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN115"><span class='Ref_to_Member'>npts</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5210"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN5210"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN5208"><span class='Ref_To_Local'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN115"><span class='Ref_to_Member'>npts</span></a><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN5210"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <a href="geo_ops.c.html#LN5209"><span class='Ref_To_Local'>circle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN126"><span class='Ref_to_Member'>radius</span></a> <span class='Operator'>+= </span><a href="../../../include/utils/geo_decls.h.html#LN181"><span class='Ref_to_Proto'>point_dt</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="geo_ops.c.html#LN5208"><span class='Ref_To_Local'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN117"><span class='Ref_to_Member'>p</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN5210"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>], </span><span class='Operator'>&</span><a href="geo_ops.c.html#LN5209"><span class='Ref_To_Local'>circle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN125"><span class='Ref_to_Member'>center</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN5209"><span class='Ref_To_Local'>circle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN126"><span class='Ref_to_Member'>radius</span></a> <span class='Operator'>/= </span><a href="geo_ops.c.html#LN5208"><span class='Ref_To_Local'>poly</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN115"><span class='Ref_to_Member'>npts</span></a><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/geo_decls.h.html#LN173"><span class='Ref_to_Macro'>PG_RETURN_CIRCLE_P</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5209"><span class='Ref_To_Local'>circle</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end poly_circle &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/*********************************************************************** 
 ** 
 **     Private routines for multiple types. 
 ** 
 ***********************************************************************/ 
</span> 
<span class='Comment_Multi_Line'>/* 
 *  Test to see if the point is inside the polygon, returns 1/0, or 2 if 
 *  the point is on the polygon. 
 *  Code adapted but not copied from integer-based routines in WN: A 
 *  Server for the HTTP 
 *  version 1.15.1, file wn/image.c 
 *  http://hopf.math.northwestern.edu/index.html 
 *  Description of algorithm:  http://www.linuxjournal.com/article/2197 
 *                             http://www.linuxjournal.com/article/2029 
 */ 
</span> 
<a name="LN5256"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>POINT_ON_POLYGON</span> INT_MAX 
 
<span class='Keyword'>static int 
</span><a name="LN5259"></a><span class='Declare_Function'>point_inside</span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>p</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>npts</span><span class='Delimiter'>, </span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>plist</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN5261"></a>    <span class='Keyword'>double</span>      <span class='Declare_Local'>x0</span><span class='Delimiter'>, 
</span><a name="LN5262"></a>                <span class='Declare_Local'>y0</span><span class='Delimiter'>; 
</span><a name="LN5263"></a>    <span class='Keyword'>double</span>      <span class='Declare_Local'>prev_x</span><span class='Delimiter'>, 
</span><a name="LN5264"></a>                <span class='Declare_Local'>prev_y</span><span class='Delimiter'>; 
</span><a name="LN5265"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN5266"></a>    <span class='Keyword'>double</span>      <span class='Declare_Local'>x</span><span class='Delimiter'>, 
</span><a name="LN5267"></a>                <span class='Declare_Local'>y</span><span class='Delimiter'>; 
</span><a name="LN5268"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>cross</span><span class='Delimiter'>, 
</span><a name="LN5269"></a>                <span class='Declare_Local'>total_cross</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5259"><span class='Ref_to_Parameter'>npts</span></a> <span class='Operator'>&LT;= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* compute first polygon point relative to single point */ 
</span>    <a href="geo_ops.c.html#LN5261"><span class='Ref_To_Local'>x0</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN5259"><span class='Ref_to_Parameter'>plist</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>- </span><a href="geo_ops.c.html#LN5259"><span class='Ref_to_Parameter'>p</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN5262"><span class='Ref_To_Local'>y0</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN5259"><span class='Ref_to_Parameter'>plist</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>- </span><a href="geo_ops.c.html#LN5259"><span class='Ref_to_Parameter'>p</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
</span> 
    <a href="geo_ops.c.html#LN5263"><span class='Ref_To_Local'>prev_x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN5261"><span class='Ref_To_Local'>x0</span></a><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN5264"><span class='Ref_To_Local'>prev_y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN5262"><span class='Ref_To_Local'>y0</span></a><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* loop over polygon points and aggregate total_cross */ 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5265"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN5265"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN5259"><span class='Ref_to_Parameter'>npts</span></a><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN5265"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* compute next polygon point relative to single point */ 
</span>        <a href="geo_ops.c.html#LN5266"><span class='Ref_To_Local'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN5259"><span class='Ref_to_Parameter'>plist</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN5265"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a> <span class='Operator'>- </span><a href="geo_ops.c.html#LN5259"><span class='Ref_to_Parameter'>p</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN5267"><span class='Ref_To_Local'>y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN5259"><span class='Ref_to_Parameter'>plist</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN5265"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a> <span class='Operator'>- </span><a href="geo_ops.c.html#LN5259"><span class='Ref_to_Parameter'>p</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* compute previous to current point crossing */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="geo_ops.c.html#LN5268"><span class='Ref_To_Local'>cross</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN41"><span class='Ref_to_Proto'>lseg_crossing</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5266"><span class='Ref_To_Local'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN5267"><span class='Ref_To_Local'>y</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN5263"><span class='Ref_To_Local'>prev_x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN5264"><span class='Ref_To_Local'>prev_y</span></a><span class='Parentheses'>))</span> <span class='Operator'>== </span><a href="geo_ops.c.html#LN5256"><span class='Ref_to_Const'>POINT_ON_POLYGON</span></a><span class='Parentheses'>)</span> 
            <span class='Control'>return</span> <span class='Number'>2</span><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN5269"><span class='Ref_To_Local'>total_cross</span></a> <span class='Operator'>+= </span><a href="geo_ops.c.html#LN5268"><span class='Ref_To_Local'>cross</span></a><span class='Delimiter'>; 
</span> 
        <a href="geo_ops.c.html#LN5263"><span class='Ref_To_Local'>prev_x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN5266"><span class='Ref_To_Local'>x</span></a><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN5264"><span class='Ref_To_Local'>prev_y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN5267"><span class='Ref_To_Local'>y</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* now do the first point */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="geo_ops.c.html#LN5268"><span class='Ref_To_Local'>cross</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN41"><span class='Ref_to_Proto'>lseg_crossing</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5261"><span class='Ref_To_Local'>x0</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN5262"><span class='Ref_To_Local'>y0</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN5263"><span class='Ref_To_Local'>prev_x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN5264"><span class='Ref_To_Local'>prev_y</span></a><span class='Parentheses'>))</span> <span class='Operator'>== </span><a href="geo_ops.c.html#LN5256"><span class='Ref_to_Const'>POINT_ON_POLYGON</span></a><span class='Parentheses'>)</span> 
        <span class='Control'>return</span> <span class='Number'>2</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN5269"><span class='Ref_To_Local'>total_cross</span></a> <span class='Operator'>+= </span><a href="geo_ops.c.html#LN5268"><span class='Ref_To_Local'>cross</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5269"><span class='Ref_To_Local'>total_cross</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end point_inside &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* lseg_crossing() 
 * Returns +/-2 if line segment crosses the positive X-axis in a +/- direction. 
 * Returns +/-1 if one point is on the positive X-axis. 
 * Returns 0 if both points are on the positive X-axis, or there is no crossing. 
 * Returns POINT_ON_POLYGON if the segment contains (0,0). 
 * Wow, that is one confusing API, but it is used above, and when summed, 
 * can tell is if a point is in a polygon. 
 */ 
</span> 
<span class='Keyword'>static int 
</span><a name="LN5317"></a><span class='Declare_Function'>lseg_crossing</span><span class='Parentheses'>(</span><span class='Keyword'>double </span><span class='Declare_Parameter'>x</span><span class='Delimiter'>, </span><span class='Keyword'>double </span><span class='Declare_Parameter'>y</span><span class='Delimiter'>, </span><span class='Keyword'>double </span><span class='Declare_Parameter'>prev_x</span><span class='Delimiter'>, </span><span class='Keyword'>double </span><span class='Declare_Parameter'>prev_y</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN5319"></a>    <span class='Keyword'>double</span>      <span class='Declare_Local'>z</span><span class='Delimiter'>; 
</span><a name="LN5320"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>y_sign</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN35"><span class='Ref_to_Macro'>FPzero</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5317"><span class='Ref_to_Parameter'>y</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{</span>                           <span class='Comment_Single_Line'>/* y == 0, on X axis */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN35"><span class='Ref_to_Macro'>FPzero</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5317"><span class='Ref_to_Parameter'>x</span></a><span class='Parentheses'>))</span>          <span class='Comment_Single_Line'>/* (x,y) is (0,0)? */ 
</span>            <span class='Control'>return</span> <a href="geo_ops.c.html#LN5256"><span class='Ref_to_Const'>POINT_ON_POLYGON</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN40"><span class='Ref_to_Macro'>FPgt</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5317"><span class='Ref_to_Parameter'>x</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{</span>                       <span class='Comment_Single_Line'>/* x &GT; 0 */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN35"><span class='Ref_to_Macro'>FPzero</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5317"><span class='Ref_to_Parameter'>prev_y</span></a><span class='Parentheses'>))</span> <span class='Comment_Single_Line'>/* y and prev_y are zero */ 
</span>                <span class='Comment_Multi_Line'>/* prev_x &GT; 0? */ 
</span>                <span class='Control'>return</span> <a href="../../../include/utils/geo_decls.h.html#LN40"><span class='Ref_to_Macro'>FPgt</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5317"><span class='Ref_to_Parameter'>prev_x</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='Number'>0</span> <span class='Operator'>: </span><a href="geo_ops.c.html#LN5256"><span class='Ref_to_Const'>POINT_ON_POLYGON</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>return</span> <a href="../../../include/utils/geo_decls.h.html#LN38"><span class='Ref_to_Macro'>FPlt</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5317"><span class='Ref_to_Parameter'>prev_y</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='Number'>1</span> <span class='Operator'>: -</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{</span>                       <span class='Comment_Single_Line'>/* x &LT; 0, x not on positive X axis */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN35"><span class='Ref_to_Macro'>FPzero</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5317"><span class='Ref_to_Parameter'>prev_y</span></a><span class='Parentheses'>))</span> 
                <span class='Comment_Multi_Line'>/* prev_x &LT; 0? */ 
</span>                <span class='Control'>return</span> <a href="../../../include/utils/geo_decls.h.html#LN38"><span class='Ref_to_Macro'>FPlt</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5317"><span class='Ref_to_Parameter'>prev_x</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='Number'>0</span> <span class='Operator'>: </span><a href="geo_ops.c.html#LN5256"><span class='Ref_to_Const'>POINT_ON_POLYGON</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{</span>                           <span class='Comment_Single_Line'>/* y != 0 */ 
</span>        <span class='Comment_Multi_Line'>/* compute y crossing direction from previous point */ 
</span>        <a href="geo_ops.c.html#LN5320"><span class='Ref_To_Local'>y_sign</span></a> <span class='Operator'>= </span><a href="../../../include/utils/geo_decls.h.html#LN40"><span class='Ref_to_Macro'>FPgt</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5317"><span class='Ref_to_Parameter'>y</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='Number'>1</span> <span class='Operator'>: -</span><span class='Number'>1</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN35"><span class='Ref_to_Macro'>FPzero</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5317"><span class='Ref_to_Parameter'>prev_y</span></a><span class='Parentheses'>))</span> 
            <span class='Comment_Multi_Line'>/* previous point was on X axis, so new point is either off or on */ 
</span>            <span class='Control'>return</span> <a href="../../../include/utils/geo_decls.h.html#LN38"><span class='Ref_to_Macro'>FPlt</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5317"><span class='Ref_to_Parameter'>prev_x</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='Number'>0</span> <span class='Operator'>: </span><a href="geo_ops.c.html#LN5320"><span class='Ref_To_Local'>y_sign</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN40"><span class='Ref_to_Macro'>FPgt</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5320"><span class='Ref_To_Local'>y_sign</span></a> <span class='Operator'>* </span><a href="geo_ops.c.html#LN5317"><span class='Ref_to_Parameter'>prev_y</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>))</span> 
            <span class='Comment_Multi_Line'>/* both above or below X axis */ 
</span>            <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>;</span>           <span class='Comment_Single_Line'>/* same sign */ 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{</span>                       <span class='Comment_Single_Line'>/* y and prev_y cross X-axis */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN41"><span class='Ref_to_Macro'>FPge</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5317"><span class='Ref_to_Parameter'>x</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>) </span><span class='Operator'>&& </span><a href="../../../include/utils/geo_decls.h.html#LN40"><span class='Ref_to_Macro'>FPgt</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5317"><span class='Ref_to_Parameter'>prev_x</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>))</span> 
                <span class='Comment_Multi_Line'>/* both non-negative so cross positive X-axis */ 
</span>                <span class='Control'>return</span> <span class='Number'>2</span> <span class='Operator'>* </span><a href="geo_ops.c.html#LN5320"><span class='Ref_To_Local'>y_sign</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN38"><span class='Ref_to_Macro'>FPlt</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5317"><span class='Ref_to_Parameter'>x</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>) </span><span class='Operator'>&& </span><a href="../../../include/utils/geo_decls.h.html#LN39"><span class='Ref_to_Macro'>FPle</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5317"><span class='Ref_to_Parameter'>prev_x</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>))</span> 
                <span class='Comment_Multi_Line'>/* both non-positive so do not cross positive X-axis */ 
</span>                <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* x and y cross axises, see URL above point_inside() */ 
</span>            <a href="geo_ops.c.html#LN5319"><span class='Ref_To_Local'>z</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5317"><span class='Ref_to_Parameter'>x</span></a> <span class='Operator'>- </span><a href="geo_ops.c.html#LN5317"><span class='Ref_to_Parameter'>prev_x</span></a><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="geo_ops.c.html#LN5317"><span class='Ref_to_Parameter'>y</span></a> <span class='Operator'>- </span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5317"><span class='Ref_to_Parameter'>y</span></a> <span class='Operator'>- </span><a href="geo_ops.c.html#LN5317"><span class='Ref_to_Parameter'>prev_y</span></a><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="geo_ops.c.html#LN5317"><span class='Ref_to_Parameter'>x</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN35"><span class='Ref_to_Macro'>FPzero</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5319"><span class='Ref_To_Local'>z</span></a><span class='Parentheses'>))</span> 
                <span class='Control'>return</span> <a href="geo_ops.c.html#LN5256"><span class='Ref_to_Const'>POINT_ON_POLYGON</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>return</span> <a href="../../../include/utils/geo_decls.h.html#LN40"><span class='Ref_to_Macro'>FPgt</span></a><span class='Parentheses'>((</span><a href="geo_ops.c.html#LN5320"><span class='Ref_To_Local'>y_sign</span></a> <span class='Operator'>* </span><a href="geo_ops.c.html#LN5319"><span class='Ref_To_Local'>z</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span> <span class='Operator'>? </span><span class='Number'>0</span> <span class='Operator'>: </span><span class='Number'>2</span> <span class='Operator'>* </span><a href="geo_ops.c.html#LN5320"><span class='Ref_To_Local'>y_sign</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
<span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end lseg_crossing &raquo; </span> 
 
 
<span class='Keyword'>static bool 
</span><a name="LN5372"></a><span class='Declare_Function'>plist_same</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>npts</span><span class='Delimiter'>, </span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>p1</span><span class='Delimiter'>, </span><a href="../../../include/utils/geo_decls.h.html#LN57"><span class='Ref_to_Typedef'>Point</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>p2</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN5374"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>, 
</span><a name="LN5375"></a>                <span class='Declare_Local'>ii</span><span class='Delimiter'>, 
</span><a name="LN5376"></a>                <span class='Declare_Local'>j</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* find match for first point */ 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5374"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN5374"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN5372"><span class='Ref_to_Parameter'>npts</span></a><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN5374"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="../../../include/utils/geo_decls.h.html#LN36"><span class='Ref_to_Macro'>FPeq</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5372"><span class='Ref_to_Parameter'>p2</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN5374"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN5372"><span class='Ref_to_Parameter'>p1</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>))</span> 
            <span class='Operator'>&& </span><span class='Parentheses'>(</span><a href="../../../include/utils/geo_decls.h.html#LN36"><span class='Ref_to_Macro'>FPeq</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5372"><span class='Ref_to_Parameter'>p2</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN5374"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN5372"><span class='Ref_to_Parameter'>p1</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>)))</span> 
        <span class='Delimiter'>{ 
</span> 
            <span class='Comment_Multi_Line'>/* match found? then look forward through remaining points */ 
</span>            <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5375"><span class='Ref_To_Local'>ii</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN5376"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN5374"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN5375"><span class='Ref_To_Local'>ii</span></a> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN5372"><span class='Ref_to_Parameter'>npts</span></a><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN5375"><span class='Ref_To_Local'>ii</span></a><span class='Operator'>++</span><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN5376"><span class='Ref_To_Local'>j</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5376"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>&GT;= </span><a href="geo_ops.c.html#LN5372"><span class='Ref_to_Parameter'>npts</span></a><span class='Parentheses'>) 
</span>                    <a href="geo_ops.c.html#LN5376"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>((</span><span class='Operator'>!</span><a href="../../../include/utils/geo_decls.h.html#LN36"><span class='Ref_to_Macro'>FPeq</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5372"><span class='Ref_to_Parameter'>p2</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN5376"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN5372"><span class='Ref_to_Parameter'>p1</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN5375"><span class='Ref_To_Local'>ii</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>))</span> 
                    <span class='Operator'>|| </span><span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/utils/geo_decls.h.html#LN36"><span class='Ref_to_Macro'>FPeq</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5372"><span class='Ref_to_Parameter'>p2</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN5376"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN5372"><span class='Ref_to_Parameter'>p1</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN5375"><span class='Ref_To_Local'>ii</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>)))</span> 
                <span class='Delimiter'>{ 
</span><span class='Directive'>#ifdef</span> GEODEBUG 
                    <a href="../../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span><span class='String'>"plist_same- %d failed forward match with %d\n"</span><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN5376"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN5375"><span class='Ref_To_Local'>ii</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>            <span class='Delimiter'>} 
</span><span class='Directive'>#ifdef</span> GEODEBUG 
            <a href="../../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span><span class='String'>"plist_same- ii = %d/%d after forward match\n"</span><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN5375"><span class='Ref_To_Local'>ii</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN5372"><span class='Ref_to_Parameter'>npts</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5375"><span class='Ref_To_Local'>ii</span></a> <span class='Operator'>== </span><a href="geo_ops.c.html#LN5372"><span class='Ref_to_Parameter'>npts</span></a><span class='Parentheses'>) 
</span>                <span class='Control'>return</span> <span class='Boolean'>TRUE</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* match not found forwards? then look backwards */ 
</span>            <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5375"><span class='Ref_To_Local'>ii</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN5376"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN5374"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN5375"><span class='Ref_To_Local'>ii</span></a> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN5372"><span class='Ref_to_Parameter'>npts</span></a><span class='Delimiter'>; </span><a href="geo_ops.c.html#LN5375"><span class='Ref_To_Local'>ii</span></a><span class='Operator'>++</span><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN5376"><span class='Ref_To_Local'>j</span></a><span class='Operator'>--</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5376"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                    <a href="geo_ops.c.html#LN5376"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5372"><span class='Ref_to_Parameter'>npts</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>((</span><span class='Operator'>!</span><a href="../../../include/utils/geo_decls.h.html#LN36"><span class='Ref_to_Macro'>FPeq</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5372"><span class='Ref_to_Parameter'>p2</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN5376"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN5372"><span class='Ref_to_Parameter'>p1</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN5375"><span class='Ref_To_Local'>ii</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN59"><span class='Ref_to_Member'>x</span></a><span class='Parentheses'>))</span> 
                    <span class='Operator'>|| </span><span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/utils/geo_decls.h.html#LN36"><span class='Ref_to_Macro'>FPeq</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5372"><span class='Ref_to_Parameter'>p2</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN5376"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN5372"><span class='Ref_to_Parameter'>p1</span></a><span class='Delimiter'>[</span><a href="geo_ops.c.html#LN5375"><span class='Ref_To_Local'>ii</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../../../include/utils/geo_decls.h.html#LN60"><span class='Ref_to_Member'>y</span></a><span class='Parentheses'>)))</span> 
                <span class='Delimiter'>{ 
</span><span class='Directive'>#ifdef</span> GEODEBUG 
                    <a href="../../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span><span class='String'>"plist_same- %d failed reverse match with %d\n"</span><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN5376"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN5375"><span class='Ref_To_Local'>ii</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>            <span class='Delimiter'>} 
</span><span class='Directive'>#ifdef</span> GEODEBUG 
            <a href="../../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span><span class='String'>"plist_same- ii = %d/%d after reverse match\n"</span><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN5375"><span class='Ref_To_Local'>ii</span></a><span class='Delimiter'>, </span><a href="geo_ops.c.html#LN5372"><span class='Ref_to_Parameter'>npts</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5375"><span class='Ref_To_Local'>ii</span></a> <span class='Operator'>== </span><a href="geo_ops.c.html#LN5372"><span class='Ref_to_Parameter'>npts</span></a><span class='Parentheses'>) 
</span>                <span class='Control'>return</span> <span class='Boolean'>TRUE</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if (FPeq(p2[i].x,p1[0].x... &raquo; </span> 
    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;npts;i++ &raquo; </span> 
 
    <span class='Control'>return</span> <span class='Boolean'>FALSE</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end plist_same &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/*------------------------------------------------------------------------- 
 * Determine the hypotenuse. 
 * 
 * If required, x and y are swapped to make x the larger number. The 
 * traditional formula of x^2+y^2 is rearranged to factor x outside the 
 * sqrt. This allows computation of the hypotenuse for significantly 
 * larger values, and with a higher precision than when using the naive 
 * formula.  In particular, this cannot overflow unless the final result 
 * would be out-of-range. 
 * 
 * sqrt( x^2 + y^2 ) = sqrt( x^2( 1 + y^2/x^2) ) 
 *                   = x * sqrt( 1 + y^2/x^2 ) 
 *                   = x * sqrt( 1 + y/x * y/x ) 
 * 
 * It is expected that this routine will eventually be replaced with the 
 * C99 hypot() function. 
 * 
 * This implementation conforms to IEEE Std 1003.1 and GLIBC, in that the 
 * case of hypot(inf,nan) results in INF, and not NAN. 
 *----------------------------------------------------------------------- 
 */ 
</span><span class='Keyword'>double 
</span><a name="LN5453"></a><span class='Declare_Function'>pg_hypot</span><span class='Parentheses'>(</span><span class='Keyword'>double </span><span class='Declare_Parameter'>x</span><span class='Delimiter'>, </span><span class='Keyword'>double </span><span class='Declare_Parameter'>y</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN5455"></a>    <span class='Keyword'>double</span>      <span class='Declare_Local'>yx</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Handle INF and NaN properly */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../port/isinf.c.html#LN24"><span class='Ref_to_Func'>isinf</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5453"><span class='Ref_to_Parameter'>x</span></a><span class='Parentheses'>) </span><span class='Operator'>|| </span><a href="../../../port/isinf.c.html#LN24"><span class='Ref_to_Func'>isinf</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5453"><span class='Ref_to_Parameter'>y</span></a><span class='Parentheses'>))</span> 
        <span class='Control'>return</span> <a href="../../../include/utils/builtins.h.html#LN55"><span class='Ref_to_Proto'>get_float8_infinity</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../interfaces/ecpg/test/expected/pgtypeslib-nan_test.c.html#LN30"><span class='Ref_to_Macro'>isnan</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5453"><span class='Ref_to_Parameter'>x</span></a><span class='Parentheses'>) </span><span class='Operator'>|| </span><a href="../../../interfaces/ecpg/test/expected/pgtypeslib-nan_test.c.html#LN30"><span class='Ref_to_Macro'>isnan</span></a><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5453"><span class='Ref_to_Parameter'>y</span></a><span class='Parentheses'>))</span> 
        <span class='Control'>return</span> <a href="../../../include/utils/builtins.h.html#LN57"><span class='Ref_to_Proto'>get_float8_nan</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Else, drop any minus signs */ 
</span>    <a href="geo_ops.c.html#LN5453"><span class='Ref_to_Parameter'>x</span></a> <span class='Operator'>= </span>fabs<span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5453"><span class='Ref_to_Parameter'>x</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="geo_ops.c.html#LN5453"><span class='Ref_to_Parameter'>y</span></a> <span class='Operator'>= </span>fabs<span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5453"><span class='Ref_to_Parameter'>y</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Swap x and y if needed to make x the larger one */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5453"><span class='Ref_to_Parameter'>x</span></a> <span class='Operator'>&LT; </span><a href="geo_ops.c.html#LN5453"><span class='Ref_to_Parameter'>y</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN5471"></a>        <span class='Keyword'>double</span>      <span class='Declare_Local'>temp</span> <span class='Operator'>= </span><a href="geo_ops.c.html#LN5453"><span class='Ref_to_Parameter'>x</span></a><span class='Delimiter'>; 
</span> 
        <a href="geo_ops.c.html#LN5453"><span class='Ref_to_Parameter'>x</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN5453"><span class='Ref_to_Parameter'>y</span></a><span class='Delimiter'>; 
</span>        <a href="geo_ops.c.html#LN5453"><span class='Ref_to_Parameter'>y</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN5471"><span class='Ref_To_Local'>temp</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If y is zero, the hypotenuse is x.  This test saves a few cycles in 
     * such cases, but more importantly it also protects against 
     * divide-by-zero errors, since now x &GT;= y. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5453"><span class='Ref_to_Parameter'>y</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Operator'>.</span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <a href="geo_ops.c.html#LN5453"><span class='Ref_to_Parameter'>x</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Determine the hypotenuse */ 
</span>    <a href="geo_ops.c.html#LN5455"><span class='Ref_To_Local'>yx</span></a> <span class='Operator'>= </span><a href="geo_ops.c.html#LN5453"><span class='Ref_to_Parameter'>y</span></a> <span class='Operator'>/ </span><a href="geo_ops.c.html#LN5453"><span class='Ref_to_Parameter'>x</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="geo_ops.c.html#LN5453"><span class='Ref_to_Parameter'>x</span></a> <span class='Operator'>* </span>sqrt<span class='Parentheses'>(</span><span class='Number'>1</span><span class='Operator'>.</span><span class='Number'>0</span> <span class='Operator'>+ </span><span class='Parentheses'>(</span><a href="geo_ops.c.html#LN5455"><span class='Ref_To_Local'>yx</span></a> <span class='Operator'>* </span><a href="geo_ops.c.html#LN5455"><span class='Ref_To_Local'>yx</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end pg_hypot &raquo; </span> 
</pre>
<table bgcolor='#c0c0c0' width='100%'><tr><td><a href='../../../../Contents.html'>Contents</a></td></tr>
</table><hr><p class='blurb' align='center'><a href='http://www.sourceinsight.com'>HTML Created by Source Insight Version 4.00.0084 Built on 2017-02-26</a></p>
</body></html>