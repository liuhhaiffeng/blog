<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta name="generator" content="Source Insight Version 4.00.0084 Built on 2017-02-26">
<meta charset='UTF-8' />
<style type='text/css'><!--
TD {background-color: #C0C0C0; font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.blurb {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.filename {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 120%; font-weight: bold; }
.dirname {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 100%; font-weight: bold; margin-top: 2.5em;}
--></style>
<title>src\backend\utils\adt\nabstime.c</title>
<LINK REL=StyleSheet HREF="../../../../C_Cpp_Source_File.css" TYPE='text/css' MEDIA=screen>
</head>
<body bgcolor=#ffffff>
<table bgcolor='#c0c0c0' width='100%'>
<tr><td><p class='filename'><b>src\backend\utils\adt\nabstime.c</b></p></td>
<td align='right'>
Wed Jun 14 08:25:52 2017
</td></tr>
<tr><td><a href='../../../../Contents.html'>Contents</a></td></tr>
</table>
<pre>
</span><span class='Comment_Multi_Line'>/*------------------------------------------------------------------------- 
 * 
 * nabstime.c 
 *    Utilities for the built-in type "AbsoluteTime". 
 *    Functions for the built-in type "RelativeTime". 
 *    Functions for the built-in type "TimeInterval". 
 * 
 * Portions Copyright (c) 1996-2017, PostgreSQL Global Development Group 
 * Portions Copyright (c) 1994, Regents of the University of California 
 * 
 * 
 * IDENTIFICATION 
 *    src/backend/utils/adt/nabstime.c 
 * 
 *------------------------------------------------------------------------- 
 */ 
</span><span class='Keyword'>#include </span><span class='String'>"postgres.h"</span> 
 
<span class='Keyword'>#include </span><span class='String'>&LT;ctype.h&GT;</span> 
<span class='Keyword'>#include </span><span class='String'>&LT;float.h&GT;</span> 
<span class='Keyword'>#include </span><span class='String'>&LT;limits.h&GT;</span> 
<span class='Keyword'>#include </span><span class='String'>&LT;math.h&GT;</span> 
<span class='Keyword'>#include </span><span class='String'>&LT;time.h&GT;</span> 
<span class='Keyword'>#include </span><span class='String'>&LT;sys/time.h&GT;</span> 
 
<span class='Keyword'>#include </span><span class='String'>"libpq/pqformat.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"miscadmin.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/builtins.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/datetime.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/nabstime.h"</span> 
 
<a name="LN31"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>MIN_DAYNUM</span> <span class='Parentheses'>(</span><span class='Operator'>-</span><span class='Number'>24856</span><span class='Parentheses'>)</span>     <span class='Comment_Single_Line'>/* December 13, 1901 */ 
</span><a name="LN32"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>MAX_DAYNUM</span> <span class='Number'>24854</span>        <span class='Comment_Single_Line'>/* January 18, 2038 */ 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Unix epoch is Jan  1 00:00:00 1970. 
 * Postgres knows about times sixty-eight years on either side of that 
 * for these 4-byte types. 
 * 
 * "tinterval" is two 4-byte fields. 
 * Definitions for parsing tinterval. 
 */ 
</span> 
<a name="LN43"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>IsSpace</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>C</span><span class='Parentheses'>)</span>              <span class='Parentheses'>((</span><a href="nabstime.c.html#LN43"><span class='Ref_to_Parameter'>C</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='String'>' '</span><span class='Parentheses'>)</span> 
 
<a name="LN45"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>T_INTERVAL_INVAL</span>   <span class='Number'>0</span>    <span class='Comment_Single_Line'>/* data represents no valid tinterval */ 
</span><a name="LN46"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>T_INTERVAL_VALID</span>   <span class='Number'>1</span>    <span class='Comment_Single_Line'>/* data represents a valid tinterval */ 
</span><span class='Comment_Multi_Line'>/* 
 * ['Mon May 10 23:59:12 1943 PST' 'Sun Jan 14 03:14:21 1973 PST'] 
 * 0        1         2         3         4         5         6 
 * 1234567890123456789012345678901234567890123456789012345678901234 
 * 
 * we allocate some extra -- timezones are usually 3 characters but 
 * this is not in the POSIX standard... 
 */ 
</span><a name="LN55"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>T_INTERVAL_LEN</span>                  <span class='Number'>80</span> 
<a name="LN56"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>INVALID_INTERVAL_STR</span>            <span class='String'>"Undefined Range"</span> 
<a name="LN57"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>INVALID_INTERVAL_STR_LEN</span>        <span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="nabstime.c.html#LN56"><span class='Ref_to_Const'>INVALID_INTERVAL_STR</span></a><span class='Parentheses'>)</span><span class='Operator'>-</span><span class='Number'>1</span><span class='Parentheses'>)</span> 
 
<a name="LN59"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>ABSTIMEMIN</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>t1</span><span class='Delimiter'>, </span><span class='Declare_Parameter'>t2</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>    <span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN398"><span class='Ref_to_Macro'>DatumGetBool</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN585"><span class='Ref_to_Macro'>DirectFunctionCall2</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN401"><span class='Ref_to_Func'>abstimele</span></a><span class='Delimiter'>, </span><span class='Operator'>\ 
</span>                  <a href="../../../include/utils/nabstime.h.html#LN53"><span class='Ref_to_Macro'>AbsoluteTimeGetDatum</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN59"><span class='Ref_to_Parameter'>t1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='Operator'>\ 
</span>                  <a href="../../../include/utils/nabstime.h.html#LN53"><span class='Ref_to_Macro'>AbsoluteTimeGetDatum</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN59"><span class='Ref_to_Parameter'>t2</span></a><span class='Parentheses'>)))</span> <span class='Operator'>? </span><span class='Parentheses'>(</span><a href="nabstime.c.html#LN59"><span class='Ref_to_Parameter'>t1</span></a><span class='Parentheses'>)</span> <span class='Operator'>: </span><span class='Parentheses'>(</span><a href="nabstime.c.html#LN59"><span class='Ref_to_Parameter'>t2</span></a><span class='Parentheses'>))</span> 
<a name="LN63"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>ABSTIMEMAX</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>t1</span><span class='Delimiter'>, </span><span class='Declare_Parameter'>t2</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>    <span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN398"><span class='Ref_to_Macro'>DatumGetBool</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN585"><span class='Ref_to_Macro'>DirectFunctionCall2</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN383"><span class='Ref_to_Func'>abstimelt</span></a><span class='Delimiter'>, </span><span class='Operator'>\ 
</span>                  <a href="../../../include/utils/nabstime.h.html#LN53"><span class='Ref_to_Macro'>AbsoluteTimeGetDatum</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN63"><span class='Ref_to_Parameter'>t1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='Operator'>\ 
</span>                  <a href="../../../include/utils/nabstime.h.html#LN53"><span class='Ref_to_Macro'>AbsoluteTimeGetDatum</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN63"><span class='Ref_to_Parameter'>t2</span></a><span class='Parentheses'>)))</span> <span class='Operator'>? </span><span class='Parentheses'>(</span><a href="nabstime.c.html#LN63"><span class='Ref_to_Parameter'>t2</span></a><span class='Parentheses'>)</span> <span class='Operator'>: </span><span class='Parentheses'>(</span><a href="nabstime.c.html#LN63"><span class='Ref_to_Parameter'>t1</span></a><span class='Parentheses'>))</span> 
 
 
<span class='Comment_Multi_Line'>/* 
 * Function prototypes -- internal to this file only 
 */ 
</span> 
<a name="LN73"></a><span class='Keyword'>static </span><a href="../../../interfaces/ecpg/pgtypeslib/dt_common.c.html#LN16"><span class='Ref_to_Typedef'>AbsoluteTime</span></a> <span class='Declare_Prototype'>tm2abstime</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="../../../include/pgtime.h.html#LN24"><span class='Ref_to_Struct'>pg_tm</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>tm</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>tz</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN74"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>reltime2tm</span><span class='Parentheses'>(</span><a href="../../../include/utils/nabstime.h.html#LN36"><span class='Ref_to_Typedef'>RelativeTime</span></a> <span class='Declare_Parameter'>time</span><span class='Delimiter'>, </span><span class='Control'>struct</span> <a href="../../../include/pgtime.h.html#LN24"><span class='Ref_to_Struct'>pg_tm</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>tm</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN75"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>parsetinterval</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>i_string</span><span class='Delimiter'>, 
</span><a name="LN76"></a>               <a href="../../../interfaces/ecpg/pgtypeslib/dt_common.c.html#LN16"><span class='Ref_to_Typedef'>AbsoluteTime</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>i_start</span><span class='Delimiter'>, 
</span><a name="LN77"></a>               <a href="../../../interfaces/ecpg/pgtypeslib/dt_common.c.html#LN16"><span class='Ref_to_Typedef'>AbsoluteTime</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>i_end</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
 
<span class='Comment_Multi_Line'>/* 
 * GetCurrentAbsoluteTime() 
 * 
 * Get the current system time (relative to Unix epoch). 
 * 
 * NB: this will overflow in 2038; it should be gone long before that. 
 */ 
</span><a href="../../../interfaces/ecpg/pgtypeslib/dt_common.c.html#LN16"><span class='Ref_to_Typedef'>AbsoluteTime</span></a> 
<a name="LN88"></a><span class='Declare_Function'>GetCurrentAbsoluteTime</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN90"></a>    time_t      <span class='Declare_Local'>now</span><span class='Delimiter'>; 
</span> 
    <a href="nabstime.c.html#LN90"><span class='Ref_To_Local'>now</span></a> <span class='Operator'>= </span>time<span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <span class='Parentheses'>(</span><a href="../../../interfaces/ecpg/pgtypeslib/dt_common.c.html#LN16"><span class='Ref_to_Typedef'>AbsoluteTime</span></a><span class='Parentheses'>) </span><a href="nabstime.c.html#LN90"><span class='Ref_To_Local'>now</span></a><span class='Delimiter'>; 
} 
</span> 
 
<span class='Keyword'>void 
</span><a name="LN98"></a><span class='Declare_Function'>abstime2tm</span><span class='Parentheses'>(</span><a href="../../../interfaces/ecpg/pgtypeslib/dt_common.c.html#LN16"><span class='Ref_to_Typedef'>AbsoluteTime</span></a> <span class='Declare_Parameter'>_time</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>tzp</span><span class='Delimiter'>, </span><span class='Control'>struct</span> <a href="../../../include/pgtime.h.html#LN24"><span class='Ref_to_Struct'>pg_tm</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>tm</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>**</span><span class='Declare_Parameter'>tzn</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN100"></a>    <a href="../../../include/pgtime.h.html#LN22"><span class='Ref_to_Typedef'>pg_time_t</span></a>   <span class='Declare_Local'>time</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/pgtime.h.html#LN22"><span class='Ref_to_Typedef'>pg_time_t</span></a><span class='Parentheses'>) </span><a href="nabstime.c.html#LN98"><span class='Ref_to_Parameter'>_time</span></a><span class='Delimiter'>; 
</span><a name="LN101"></a>    <span class='Control'>struct</span> <a href="../../../include/pgtime.h.html#LN24"><span class='Ref_to_Struct'>pg_tm</span></a> <span class='Operator'>*</span><span class='Declare_Local'>tx</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN98"><span class='Ref_to_Parameter'>tzp</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="nabstime.c.html#LN101"><span class='Ref_To_Local'>tx</span></a> <span class='Operator'>= </span><a href="../../../include/pgtime.h.html#LN47"><span class='Ref_to_Proto'>pg_localtime</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="nabstime.c.html#LN100"><span class='Ref_To_Local'>time</span></a><span class='Delimiter'>, </span><a href="../../../timezone/pgtz.c.html#LN27"><span class='Ref_to_Global_Var'>session_timezone</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="nabstime.c.html#LN101"><span class='Ref_To_Local'>tx</span></a> <span class='Operator'>= </span><a href="../../../include/pgtime.h.html#LN48"><span class='Ref_to_Proto'>pg_gmtime</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="nabstime.c.html#LN100"><span class='Ref_To_Local'>time</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="nabstime.c.html#LN98"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN31"><span class='Ref_to_Member'>tm_year</span></a> <span class='Operator'>= </span><a href="nabstime.c.html#LN101"><span class='Ref_To_Local'>tx</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN31"><span class='Ref_to_Member'>tm_year</span></a> <span class='Operator'>+ </span><span class='Number'>1900</span><span class='Delimiter'>; 
</span>    <a href="nabstime.c.html#LN98"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN30"><span class='Ref_to_Member'>tm_mon</span></a> <span class='Operator'>= </span><a href="nabstime.c.html#LN101"><span class='Ref_To_Local'>tx</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN30"><span class='Ref_to_Member'>tm_mon</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <a href="nabstime.c.html#LN98"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN29"><span class='Ref_to_Member'>tm_mday</span></a> <span class='Operator'>= </span><a href="nabstime.c.html#LN101"><span class='Ref_To_Local'>tx</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN29"><span class='Ref_to_Member'>tm_mday</span></a><span class='Delimiter'>; 
</span>    <a href="nabstime.c.html#LN98"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN28"><span class='Ref_to_Member'>tm_hour</span></a> <span class='Operator'>= </span><a href="nabstime.c.html#LN101"><span class='Ref_To_Local'>tx</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN28"><span class='Ref_to_Member'>tm_hour</span></a><span class='Delimiter'>; 
</span>    <a href="nabstime.c.html#LN98"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN27"><span class='Ref_to_Member'>tm_min</span></a> <span class='Operator'>= </span><a href="nabstime.c.html#LN101"><span class='Ref_To_Local'>tx</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN27"><span class='Ref_to_Member'>tm_min</span></a><span class='Delimiter'>; 
</span>    <a href="nabstime.c.html#LN98"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN26"><span class='Ref_to_Member'>tm_sec</span></a> <span class='Operator'>= </span><a href="nabstime.c.html#LN101"><span class='Ref_To_Local'>tx</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN26"><span class='Ref_to_Member'>tm_sec</span></a><span class='Delimiter'>; 
</span>    <a href="nabstime.c.html#LN98"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN34"><span class='Ref_to_Member'>tm_isdst</span></a> <span class='Operator'>= </span><a href="nabstime.c.html#LN101"><span class='Ref_To_Local'>tx</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN34"><span class='Ref_to_Member'>tm_isdst</span></a><span class='Delimiter'>; 
</span> 
    <a href="nabstime.c.html#LN98"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN35"><span class='Ref_to_Member'>tm_gmtoff</span></a> <span class='Operator'>= </span><a href="nabstime.c.html#LN101"><span class='Ref_To_Local'>tx</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN35"><span class='Ref_to_Member'>tm_gmtoff</span></a><span class='Delimiter'>; 
</span>    <a href="nabstime.c.html#LN98"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN36"><span class='Ref_to_Member'>tm_zone</span></a> <span class='Operator'>= </span><a href="nabstime.c.html#LN101"><span class='Ref_To_Local'>tx</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN36"><span class='Ref_to_Member'>tm_zone</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN98"><span class='Ref_to_Parameter'>tzp</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Operator'>*</span><a href="nabstime.c.html#LN98"><span class='Ref_to_Parameter'>tzp</span></a> <span class='Operator'>= -</span><a href="nabstime.c.html#LN98"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN35"><span class='Ref_to_Member'>tm_gmtoff</span></a><span class='Delimiter'>;</span>  <span class='Comment_Single_Line'>/* tm_gmtoff is Sun/DEC-ism */ 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * XXX FreeBSD man pages indicate that this should work - tgl 97/04/23 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN98"><span class='Ref_to_Parameter'>tzn</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * Copy no more than MAXTZLEN bytes of timezone to tzn, in case it 
             * contains an error message, which doesn't fit in the buffer 
             */ 
</span>            <a href="../../../include/c.h.html#LN829"><span class='Ref_to_Macro'>StrNCpy</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="nabstime.c.html#LN98"><span class='Ref_to_Parameter'>tzn</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN98"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN36"><span class='Ref_to_Member'>tm_zone</span></a><span class='Delimiter'>, </span><a href="../../../interfaces/ecpg/pgtypeslib/dt.h.html#LN7"><span class='Ref_to_Const'>MAXTZLEN</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span>strlen<span class='Parentheses'>(</span><a href="nabstime.c.html#LN98"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN36"><span class='Ref_to_Member'>tm_zone</span></a><span class='Parentheses'>) </span><span class='Operator'>&GT; </span><a href="../../../interfaces/ecpg/pgtypeslib/dt.h.html#LN7"><span class='Ref_to_Const'>MAXTZLEN</span></a><span class='Parentheses'>)</span> 
                <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN39"><span class='Ref_to_Const'>WARNING</span></a><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INVALID_PARAMETER_VALUE<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"invalid time zone name: \"%s\""</span><span class='Delimiter'>, 
</span>                                <a href="nabstime.c.html#LN98"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN36"><span class='Ref_to_Member'>tm_zone</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if tzp!=NULL &raquo; </span> 
    <span class='Control'>else</span> 
        <a href="nabstime.c.html#LN98"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN34"><span class='Ref_to_Member'>tm_isdst</span></a> <span class='Operator'>= -</span><span class='Number'>1</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end abstime2tm &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* tm2abstime() 
 * Convert a tm structure to abstime. 
 * Note that tm has full year (not 1900-based) and 1-based month. 
 */ 
</span><span class='Keyword'>static </span><a href="../../../interfaces/ecpg/pgtypeslib/dt_common.c.html#LN16"><span class='Ref_to_Typedef'>AbsoluteTime</span></a> 
<a name="LN150"></a><span class='Declare_Function'>tm2abstime</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="../../../include/pgtime.h.html#LN24"><span class='Ref_to_Struct'>pg_tm</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>tm</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>tz</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN152"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>day</span><span class='Delimiter'>; 
</span><a name="LN153"></a>    <a href="../../../interfaces/ecpg/pgtypeslib/dt_common.c.html#LN16"><span class='Ref_to_Typedef'>AbsoluteTime</span></a> <span class='Declare_Local'>sec</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* validate, before going out of range on some members */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN150"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN31"><span class='Ref_to_Member'>tm_year</span></a> <span class='Operator'>&LT; </span><span class='Number'>1901</span> <span class='Operator'>|| </span><a href="nabstime.c.html#LN150"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN31"><span class='Ref_to_Member'>tm_year</span></a> <span class='Operator'>&GT; </span><span class='Number'>2038</span> <span class='Operator'>|| 
</span>        <a href="nabstime.c.html#LN150"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN30"><span class='Ref_to_Member'>tm_mon</span></a> <span class='Operator'>&LT; </span><span class='Number'>1</span> <span class='Operator'>|| </span><a href="nabstime.c.html#LN150"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN30"><span class='Ref_to_Member'>tm_mon</span></a> <span class='Operator'>&GT; </span><a href="../../../include/datatype/timestamp.h.html#LN68"><span class='Ref_to_Const'>MONTHS_PER_YEAR</span></a> <span class='Operator'>|| 
</span>        <a href="nabstime.c.html#LN150"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN29"><span class='Ref_to_Member'>tm_mday</span></a> <span class='Operator'>&LT; </span><span class='Number'>1</span> <span class='Operator'>|| </span><a href="nabstime.c.html#LN150"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN29"><span class='Ref_to_Member'>tm_mday</span></a> <span class='Operator'>&GT; </span><span class='Number'>31</span> <span class='Operator'>|| 
</span>        <a href="nabstime.c.html#LN150"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN28"><span class='Ref_to_Member'>tm_hour</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span> <span class='Operator'>|| 
</span>        <a href="nabstime.c.html#LN150"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN28"><span class='Ref_to_Member'>tm_hour</span></a> <span class='Operator'>&GT; </span><a href="../../../include/datatype/timestamp.h.html#LN77"><span class='Ref_to_Const'>HOURS_PER_DAY</span></a> <span class='Operator'>||</span>  <span class='Comment_Single_Line'>/* test for &GT; 24:00:00 */ 
</span>      <span class='Parentheses'>(</span><a href="nabstime.c.html#LN150"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN28"><span class='Ref_to_Member'>tm_hour</span></a> <span class='Operator'>== </span><a href="../../../include/datatype/timestamp.h.html#LN77"><span class='Ref_to_Const'>HOURS_PER_DAY</span></a> <span class='Operator'>&& </span><span class='Parentheses'>(</span><a href="nabstime.c.html#LN150"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN27"><span class='Ref_to_Member'>tm_min</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="nabstime.c.html#LN150"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN26"><span class='Ref_to_Member'>tm_sec</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>))</span> <span class='Operator'>|| 
</span>        <a href="nabstime.c.html#LN150"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN27"><span class='Ref_to_Member'>tm_min</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="nabstime.c.html#LN150"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN27"><span class='Ref_to_Member'>tm_min</span></a> <span class='Operator'>&GT; </span><a href="../../../include/datatype/timestamp.h.html#LN88"><span class='Ref_to_Const'>MINS_PER_HOUR</span></a> <span class='Operator'>- </span><span class='Number'>1</span> <span class='Operator'>|| 
</span>        <a href="nabstime.c.html#LN150"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN26"><span class='Ref_to_Member'>tm_sec</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="nabstime.c.html#LN150"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN26"><span class='Ref_to_Member'>tm_sec</span></a> <span class='Operator'>&GT; </span><a href="../../../include/datatype/timestamp.h.html#LN87"><span class='Ref_to_Const'>SECS_PER_MINUTE</span></a><span class='Parentheses'>)</span> 
        <span class='Control'>return</span> <a href="../../../include/utils/nabstime.h.html#LN75"><span class='Ref_to_Const'>INVALID_ABSTIME</span></a><span class='Delimiter'>; 
</span> 
    <a href="nabstime.c.html#LN152"><span class='Ref_To_Local'>day</span></a> <span class='Operator'>= </span><a href="datetime.c.html#LN290"><span class='Ref_to_Func'>date2j</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN150"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN31"><span class='Ref_to_Member'>tm_year</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN150"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN30"><span class='Ref_to_Member'>tm_mon</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN150"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN29"><span class='Ref_to_Member'>tm_mday</span></a><span class='Parentheses'>) </span><span class='Operator'>- </span><a href="../../../include/datatype/timestamp.h.html#LN161"><span class='Ref_to_Const'>UNIX_EPOCH_JDATE</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* check for time out of range */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN152"><span class='Ref_To_Local'>day</span></a> <span class='Operator'>&LT; </span><a href="nabstime.c.html#LN31"><span class='Ref_to_Const'>MIN_DAYNUM</span></a> <span class='Operator'>|| </span><a href="nabstime.c.html#LN152"><span class='Ref_To_Local'>day</span></a> <span class='Operator'>&GT; </span><a href="nabstime.c.html#LN32"><span class='Ref_to_Const'>MAX_DAYNUM</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <a href="../../../include/utils/nabstime.h.html#LN75"><span class='Ref_to_Const'>INVALID_ABSTIME</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* convert to seconds */ 
</span>    <a href="nabstime.c.html#LN153"><span class='Ref_To_Local'>sec</span></a> <span class='Operator'>= </span><a href="nabstime.c.html#LN150"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN26"><span class='Ref_to_Member'>tm_sec</span></a> <span class='Operator'>+ </span><a href="nabstime.c.html#LN150"><span class='Ref_to_Parameter'>tz</span></a> <span class='Operator'>+ </span><span class='Parentheses'>(</span><a href="nabstime.c.html#LN150"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN27"><span class='Ref_to_Member'>tm_min</span></a> <span class='Operator'>+ </span><span class='Parentheses'>(</span><a href="nabstime.c.html#LN152"><span class='Ref_To_Local'>day</span></a> <span class='Operator'>* </span><a href="../../../include/datatype/timestamp.h.html#LN77"><span class='Ref_to_Const'>HOURS_PER_DAY</span></a> <span class='Operator'>+ </span><a href="nabstime.c.html#LN150"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN28"><span class='Ref_to_Member'>tm_hour</span></a><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="../../../include/datatype/timestamp.h.html#LN88"><span class='Ref_to_Const'>MINS_PER_HOUR</span></a><span class='Parentheses'>)</span> <span class='Operator'>* </span><a href="../../../include/datatype/timestamp.h.html#LN87"><span class='Ref_to_Const'>SECS_PER_MINUTE</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * check for overflow.  We need a little slop here because the H/M/S plus 
     * TZ offset could add up to more than 1 day. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="nabstime.c.html#LN152"><span class='Ref_To_Local'>day</span></a> <span class='Operator'>&GT;= </span><a href="nabstime.c.html#LN32"><span class='Ref_to_Const'>MAX_DAYNUM</span></a> <span class='Operator'>- </span><span class='Number'>10</span> <span class='Operator'>&& </span><a href="nabstime.c.html#LN153"><span class='Ref_To_Local'>sec</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>) </span><span class='Operator'>|| 
</span>        <span class='Parentheses'>(</span><a href="nabstime.c.html#LN152"><span class='Ref_To_Local'>day</span></a> <span class='Operator'>&LT;= </span><a href="nabstime.c.html#LN31"><span class='Ref_to_Const'>MIN_DAYNUM</span></a> <span class='Operator'>+ </span><span class='Number'>10</span> <span class='Operator'>&& </span><a href="nabstime.c.html#LN153"><span class='Ref_To_Local'>sec</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>))</span> 
        <span class='Control'>return</span> <a href="../../../include/utils/nabstime.h.html#LN75"><span class='Ref_to_Const'>INVALID_ABSTIME</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* check for reserved values (e.g. "current" on edge of usual range */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/utils/nabstime.h.html#LN90"><span class='Ref_to_Macro'>AbsoluteTimeIsReal</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN153"><span class='Ref_To_Local'>sec</span></a><span class='Parentheses'>))</span> 
        <span class='Control'>return</span> <a href="../../../include/utils/nabstime.h.html#LN75"><span class='Ref_to_Const'>INVALID_ABSTIME</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="nabstime.c.html#LN153"><span class='Ref_To_Local'>sec</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end tm2abstime &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* abstimein() 
 * Decode date/time string and return abstime. 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN195"></a><span class='Declare_Function'>abstimein</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN197"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>str</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN241"><span class='Ref_to_Macro'>PG_GETARG_CSTRING</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN198"></a>    <a href="../../../interfaces/ecpg/pgtypeslib/dt_common.c.html#LN16"><span class='Ref_to_Typedef'>AbsoluteTime</span></a> <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span><a name="LN199"></a>    <a href="../../../interfaces/ecpg/pgtypeslib/dt.h.html#LN9"><span class='Ref_to_Typedef'>fsec_t</span></a>      <span class='Declare_Local'>fsec</span><span class='Delimiter'>; 
</span><a name="LN200"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>tz</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN201"></a>    <span class='Control'>struct</span> <a href="../../../include/pgtime.h.html#LN24"><span class='Ref_to_Struct'>pg_tm</span></a> <span class='Declare_Local'>date</span><span class='Delimiter'>, 
</span><a name="LN202"></a>               <span class='Operator'>*</span><span class='Declare_Local'>tm</span> <span class='Operator'>= &</span><a href="nabstime.c.html#LN201"><span class='Ref_To_Local'>date</span></a><span class='Delimiter'>; 
</span><a name="LN203"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>dterr</span><span class='Delimiter'>; 
</span><a name="LN204"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>field</span><span class='Delimiter'>[</span><a href="../../../interfaces/ecpg/pgtypeslib/dt.h.html#LN197"><span class='Ref_to_Const'>MAXDATEFIELDS</span></a><span class='Delimiter'>]; 
</span><a name="LN205"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>workbuf</span><span class='Delimiter'>[</span><a href="../../../interfaces/ecpg/pgtypeslib/dt.h.html#LN195"><span class='Ref_to_Const'>MAXDATELEN</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>]; 
</span><a name="LN206"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>dtype</span><span class='Delimiter'>; 
</span><a name="LN207"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>nf</span><span class='Delimiter'>, 
</span><a name="LN208"></a>                <span class='Declare_Local'>ftype</span><span class='Delimiter'>[</span><a href="../../../interfaces/ecpg/pgtypeslib/dt.h.html#LN197"><span class='Ref_to_Const'>MAXDATEFIELDS</span></a><span class='Delimiter'>]; 
</span> 
    <a href="nabstime.c.html#LN203"><span class='Ref_To_Local'>dterr</span></a> <span class='Operator'>= </span><a href="../../../include/utils/datetime.h.html#LN293"><span class='Ref_to_Proto'>ParseDateTime</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN197"><span class='Ref_To_Local'>str</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN205"><span class='Ref_To_Local'>workbuf</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="nabstime.c.html#LN205"><span class='Ref_To_Local'>workbuf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                          <a href="nabstime.c.html#LN204"><span class='Ref_To_Local'>field</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN208"><span class='Ref_To_Local'>ftype</span></a><span class='Delimiter'>, </span><a href="../../../interfaces/ecpg/pgtypeslib/dt.h.html#LN197"><span class='Ref_to_Const'>MAXDATEFIELDS</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="nabstime.c.html#LN207"><span class='Ref_To_Local'>nf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN203"><span class='Ref_To_Local'>dterr</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <a href="nabstime.c.html#LN203"><span class='Ref_To_Local'>dterr</span></a> <span class='Operator'>= </span><a href="../../../include/utils/datetime.h.html#LN296"><span class='Ref_to_Proto'>DecodeDateTime</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN204"><span class='Ref_To_Local'>field</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN208"><span class='Ref_To_Local'>ftype</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN207"><span class='Ref_To_Local'>nf</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="nabstime.c.html#LN206"><span class='Ref_To_Local'>dtype</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN202"><span class='Ref_To_Local'>tm</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="nabstime.c.html#LN199"><span class='Ref_To_Local'>fsec</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="nabstime.c.html#LN200"><span class='Ref_To_Local'>tz</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN203"><span class='Ref_To_Local'>dterr</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <a href="datetime.c.html#LN3763"><span class='Ref_to_Func'>DateTimeParseError</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN203"><span class='Ref_To_Local'>dterr</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN197"><span class='Ref_To_Local'>str</span></a><span class='Delimiter'>, </span><span class='String'>"abstime"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN206"><span class='Ref_To_Local'>dtype</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>case</span> <a href="../../../interfaces/ecpg/pgtypeslib/dt.h.html#LN139"><span class='Ref_to_Const'>DTK_DATE</span></a><span class='Operator'>: 
</span>            <a href="nabstime.c.html#LN198"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="nabstime.c.html#LN73"><span class='Ref_to_Proto'>tm2abstime</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN202"><span class='Ref_To_Local'>tm</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN200"><span class='Ref_To_Local'>tz</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../interfaces/ecpg/pgtypeslib/dt.h.html#LN149"><span class='Ref_to_Const'>DTK_EPOCH</span></a><span class='Operator'>: 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * Don't bother retaining this as a reserved value, but instead 
             * just set to the actual epoch time (1970-01-01) 
             */ 
</span>            <a href="nabstime.c.html#LN198"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../interfaces/ecpg/pgtypeslib/dt.h.html#LN148"><span class='Ref_to_Const'>DTK_LATE</span></a><span class='Operator'>: 
</span>            <a href="nabstime.c.html#LN198"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN76"><span class='Ref_to_Const'>NOEND_ABSTIME</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../interfaces/ecpg/pgtypeslib/dt.h.html#LN147"><span class='Ref_to_Const'>DTK_EARLY</span></a><span class='Operator'>: 
</span>            <a href="nabstime.c.html#LN198"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN77"><span class='Ref_to_Const'>NOSTART_ABSTIME</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../interfaces/ecpg/pgtypeslib/dt.h.html#LN145"><span class='Ref_to_Const'>DTK_INVALID</span></a><span class='Operator'>: 
</span>            <a href="nabstime.c.html#LN198"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN75"><span class='Ref_to_Const'>INVALID_ABSTIME</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>default</span><span class='Operator'>: 
</span>            <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"unexpected dtype %d while parsing abstime \"%s\""</span><span class='Delimiter'>, 
</span>                 <a href="nabstime.c.html#LN206"><span class='Ref_To_Local'>dtype</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN197"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="nabstime.c.html#LN198"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN75"><span class='Ref_to_Const'>INVALID_ABSTIME</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch dtype &raquo; </span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/nabstime.h.html#LN61"><span class='Ref_to_Macro'>PG_RETURN_ABSOLUTETIME</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN198"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end abstimein &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* abstimeout() 
 * Given an AbsoluteTime return the English text version of the date 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN259"></a><span class='Declare_Function'>abstimeout</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN261"></a>    <a href="../../../interfaces/ecpg/pgtypeslib/dt_common.c.html#LN16"><span class='Ref_to_Typedef'>AbsoluteTime</span></a> <span class='Declare_Local'>time</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN57"><span class='Ref_to_Macro'>PG_GETARG_ABSOLUTETIME</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN262"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span><a name="LN263"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>tz</span><span class='Delimiter'>; 
</span><a name="LN264"></a>    <span class='Keyword'>double</span>      <span class='Declare_Local'>fsec</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN265"></a>    <span class='Control'>struct</span> <a href="../../../include/pgtime.h.html#LN24"><span class='Ref_to_Struct'>pg_tm</span></a> <span class='Declare_Local'>tt</span><span class='Delimiter'>, 
</span><a name="LN266"></a>               <span class='Operator'>*</span><span class='Declare_Local'>tm</span> <span class='Operator'>= &</span><a href="nabstime.c.html#LN265"><span class='Ref_To_Local'>tt</span></a><span class='Delimiter'>; 
</span><a name="LN267"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>buf</span><span class='Delimiter'>[</span><a href="../../../interfaces/ecpg/pgtypeslib/dt.h.html#LN195"><span class='Ref_to_Const'>MAXDATELEN</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>]; 
</span><a name="LN268"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>zone</span><span class='Delimiter'>[</span><a href="../../../interfaces/ecpg/pgtypeslib/dt.h.html#LN195"><span class='Ref_to_Const'>MAXDATELEN</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>], 
</span><a name="LN269"></a>               <span class='Operator'>*</span><span class='Declare_Local'>tzn</span> <span class='Operator'>= </span><a href="nabstime.c.html#LN268"><span class='Ref_To_Local'>zone</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN261"><span class='Ref_To_Local'>time</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * Note that timestamp no longer supports 'invalid'. Retain 
             * 'invalid' for abstime for now, but dump it someday. 
             */ 
</span>        <span class='Control'>case</span> <a href="../../../include/utils/nabstime.h.html#LN75"><span class='Ref_to_Const'>INVALID_ABSTIME</span></a><span class='Operator'>: 
</span>            <a href="../../../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN267"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="../../../../contrib/isn/isn.c.html#LN32"><span class='Ref_to_EnumConst'>INVALID</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../../include/utils/nabstime.h.html#LN76"><span class='Ref_to_Const'>NOEND_ABSTIME</span></a><span class='Operator'>: 
</span>            <a href="../../../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN267"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="../../../interfaces/ecpg/pgtypeslib/dt.h.html#LN37"><span class='Ref_to_Const'>LATE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../../include/utils/nabstime.h.html#LN77"><span class='Ref_to_Const'>NOSTART_ABSTIME</span></a><span class='Operator'>: 
</span>            <a href="../../../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN267"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="../../../interfaces/ecpg/pgtypeslib/dt.h.html#LN36"><span class='Ref_to_Const'>EARLY</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>default</span><span class='Operator'>: 
</span>            <a href="nabstime.c.html#LN97"><span class='Ref_to_Func'>abstime2tm</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN261"><span class='Ref_To_Local'>time</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="nabstime.c.html#LN263"><span class='Ref_To_Local'>tz</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN266"><span class='Ref_To_Local'>tm</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="nabstime.c.html#LN269"><span class='Ref_To_Local'>tzn</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../../interfaces/ecpg/pgtypeslib/dt.h.html#LN315"><span class='Ref_to_Proto'>EncodeDateTime</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN266"><span class='Ref_To_Local'>tm</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN264"><span class='Ref_To_Local'>fsec</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span><a href="nabstime.c.html#LN263"><span class='Ref_To_Local'>tz</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN269"><span class='Ref_To_Local'>tzn</span></a><span class='Delimiter'>, </span><a href="../init/globals.c.html#LN106"><span class='Ref_to_Global_Var'>DateStyle</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN267"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch time &raquo; </span> 
 
    <a href="nabstime.c.html#LN262"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN32"><span class='Ref_to_Proto'>pstrdup</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN267"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN321"><span class='Ref_to_Macro'>PG_RETURN_CSTRING</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN262"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end abstimeout &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 *      abstimerecv         - converts external binary format to abstime 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN300"></a><span class='Declare_Function'>abstimerecv</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN302"></a>    <a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a><span class='Parentheses'>) </span><a href="../../../include/fmgr.h.html#LN240"><span class='Ref_to_Macro'>PG_GETARG_POINTER</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/nabstime.h.html#LN61"><span class='Ref_to_Macro'>PG_RETURN_ABSOLUTETIME</span></a><span class='Parentheses'>((</span><a href="../../../interfaces/ecpg/pgtypeslib/dt_common.c.html#LN16"><span class='Ref_to_Typedef'>AbsoluteTime</span></a><span class='Parentheses'>)</span> <a href="../../../include/libpq/pqformat.h.html#LN38"><span class='Ref_to_Proto'>pq_getmsgint</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN302"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../interfaces/ecpg/pgtypeslib/dt_common.c.html#LN16"><span class='Ref_to_Typedef'>AbsoluteTime</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 *      abstimesend         - converts abstime to binary format 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN311"></a><span class='Declare_Function'>abstimesend</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN313"></a>    <a href="../../../interfaces/ecpg/pgtypeslib/dt_common.c.html#LN16"><span class='Ref_to_Typedef'>AbsoluteTime</span></a> <span class='Declare_Local'>time</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN57"><span class='Ref_to_Macro'>PG_GETARG_ABSOLUTETIME</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN314"></a>    <a href="../../../include/lib/stringinfo.h.html#LN34"><span class='Ref_to_Struct'>StringInfoData</span></a> <span class='Declare_Local'>buf</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/libpq/pqformat.h.html#LN31"><span class='Ref_to_Proto'>pq_begintypsend</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="nabstime.c.html#LN314"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/libpq/pqformat.h.html#LN25"><span class='Ref_to_Proto'>pq_sendint</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="nabstime.c.html#LN314"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN313"><span class='Ref_To_Local'>time</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="nabstime.c.html#LN313"><span class='Ref_To_Local'>time</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN328"><span class='Ref_to_Macro'>PG_RETURN_BYTEA_P</span></a><span class='Parentheses'>(</span><a href="../../../include/libpq/pqformat.h.html#LN32"><span class='Ref_to_Proto'>pq_endtypsend</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="nabstime.c.html#LN314"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/* abstime_finite() 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN325"></a><span class='Declare_Function'>abstime_finite</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN327"></a>    <a href="../../../interfaces/ecpg/pgtypeslib/dt_common.c.html#LN16"><span class='Ref_to_Typedef'>AbsoluteTime</span></a> <span class='Declare_Local'>abstime</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN57"><span class='Ref_to_Macro'>PG_GETARG_ABSOLUTETIME</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN327"><span class='Ref_To_Local'>abstime</span></a> <span class='Operator'>!= </span><a href="../../../include/utils/nabstime.h.html#LN75"><span class='Ref_to_Const'>INVALID_ABSTIME</span></a> <span class='Operator'>&& 
</span>                   <a href="nabstime.c.html#LN327"><span class='Ref_To_Local'>abstime</span></a> <span class='Operator'>!= </span><a href="../../../include/utils/nabstime.h.html#LN77"><span class='Ref_to_Const'>NOSTART_ABSTIME</span></a> <span class='Operator'>&& 
</span>                   <a href="nabstime.c.html#LN327"><span class='Ref_To_Local'>abstime</span></a> <span class='Operator'>!= </span><a href="../../../include/utils/nabstime.h.html#LN76"><span class='Ref_to_Const'>NOEND_ABSTIME</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/* 
 * abstime comparison routines 
 */ 
</span><span class='Keyword'>static int 
</span><a name="LN339"></a><span class='Declare_Function'>abstime_cmp_internal</span><span class='Parentheses'>(</span><a href="../../../interfaces/ecpg/pgtypeslib/dt_common.c.html#LN16"><span class='Ref_to_Typedef'>AbsoluteTime</span></a> <span class='Declare_Parameter'>a</span><span class='Delimiter'>, </span><a href="../../../interfaces/ecpg/pgtypeslib/dt_common.c.html#LN16"><span class='Ref_to_Typedef'>AbsoluteTime</span></a> <span class='Declare_Parameter'>b</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Comment_Multi_Line'>/* 
     * We consider all INVALIDs to be equal and larger than any non-INVALID. 
     * This is somewhat arbitrary; the important thing is to have a consistent 
     * sort order. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN339"><span class='Ref_to_Parameter'>a</span></a> <span class='Operator'>== </span><a href="../../../include/utils/nabstime.h.html#LN75"><span class='Ref_to_Const'>INVALID_ABSTIME</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN339"><span class='Ref_to_Parameter'>b</span></a> <span class='Operator'>== </span><a href="../../../include/utils/nabstime.h.html#LN75"><span class='Ref_to_Const'>INVALID_ABSTIME</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>;</span>           <span class='Comment_Single_Line'>/* INVALID = INVALID */ 
</span>        <span class='Control'>else</span> 
            <span class='Control'>return</span> <span class='Number'>1</span><span class='Delimiter'>;</span>           <span class='Comment_Single_Line'>/* INVALID &GT; non-INVALID */ 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN339"><span class='Ref_to_Parameter'>b</span></a> <span class='Operator'>== </span><a href="../../../include/utils/nabstime.h.html#LN75"><span class='Ref_to_Const'>INVALID_ABSTIME</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>;</span>              <span class='Comment_Single_Line'>/* non-INVALID &LT; INVALID */ 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN339"><span class='Ref_to_Parameter'>a</span></a> <span class='Operator'>&GT; </span><a href="nabstime.c.html#LN339"><span class='Ref_to_Parameter'>b</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN339"><span class='Ref_to_Parameter'>a</span></a> <span class='Operator'>== </span><a href="nabstime.c.html#LN339"><span class='Ref_to_Parameter'>b</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end abstime_cmp_internal &raquo; </span> 
 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN366"></a><span class='Declare_Function'>abstimeeq</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN368"></a>    <a href="../../../interfaces/ecpg/pgtypeslib/dt_common.c.html#LN16"><span class='Ref_to_Typedef'>AbsoluteTime</span></a> <span class='Declare_Local'>t1</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN57"><span class='Ref_to_Macro'>PG_GETARG_ABSOLUTETIME</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN369"></a>    <a href="../../../interfaces/ecpg/pgtypeslib/dt_common.c.html#LN16"><span class='Ref_to_Typedef'>AbsoluteTime</span></a> <span class='Declare_Local'>t2</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN57"><span class='Ref_to_Macro'>PG_GETARG_ABSOLUTETIME</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN338"><span class='Ref_to_Func'>abstime_cmp_internal</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN368"><span class='Ref_To_Local'>t1</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN369"><span class='Ref_To_Local'>t2</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN375"></a><span class='Declare_Function'>abstimene</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN377"></a>    <a href="../../../interfaces/ecpg/pgtypeslib/dt_common.c.html#LN16"><span class='Ref_to_Typedef'>AbsoluteTime</span></a> <span class='Declare_Local'>t1</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN57"><span class='Ref_to_Macro'>PG_GETARG_ABSOLUTETIME</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN378"></a>    <a href="../../../interfaces/ecpg/pgtypeslib/dt_common.c.html#LN16"><span class='Ref_to_Typedef'>AbsoluteTime</span></a> <span class='Declare_Local'>t2</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN57"><span class='Ref_to_Macro'>PG_GETARG_ABSOLUTETIME</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN338"><span class='Ref_to_Func'>abstime_cmp_internal</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN377"><span class='Ref_To_Local'>t1</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN378"><span class='Ref_To_Local'>t2</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN384"></a><span class='Declare_Function'>abstimelt</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN386"></a>    <a href="../../../interfaces/ecpg/pgtypeslib/dt_common.c.html#LN16"><span class='Ref_to_Typedef'>AbsoluteTime</span></a> <span class='Declare_Local'>t1</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN57"><span class='Ref_to_Macro'>PG_GETARG_ABSOLUTETIME</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN387"></a>    <a href="../../../interfaces/ecpg/pgtypeslib/dt_common.c.html#LN16"><span class='Ref_to_Typedef'>AbsoluteTime</span></a> <span class='Declare_Local'>t2</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN57"><span class='Ref_to_Macro'>PG_GETARG_ABSOLUTETIME</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN338"><span class='Ref_to_Func'>abstime_cmp_internal</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN386"><span class='Ref_To_Local'>t1</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN387"><span class='Ref_To_Local'>t2</span></a><span class='Parentheses'>) </span><span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN393"></a><span class='Declare_Function'>abstimegt</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN395"></a>    <a href="../../../interfaces/ecpg/pgtypeslib/dt_common.c.html#LN16"><span class='Ref_to_Typedef'>AbsoluteTime</span></a> <span class='Declare_Local'>t1</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN57"><span class='Ref_to_Macro'>PG_GETARG_ABSOLUTETIME</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN396"></a>    <a href="../../../interfaces/ecpg/pgtypeslib/dt_common.c.html#LN16"><span class='Ref_to_Typedef'>AbsoluteTime</span></a> <span class='Declare_Local'>t2</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN57"><span class='Ref_to_Macro'>PG_GETARG_ABSOLUTETIME</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN338"><span class='Ref_to_Func'>abstime_cmp_internal</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN395"><span class='Ref_To_Local'>t1</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN396"><span class='Ref_To_Local'>t2</span></a><span class='Parentheses'>) </span><span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN402"></a><span class='Declare_Function'>abstimele</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN404"></a>    <a href="../../../interfaces/ecpg/pgtypeslib/dt_common.c.html#LN16"><span class='Ref_to_Typedef'>AbsoluteTime</span></a> <span class='Declare_Local'>t1</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN57"><span class='Ref_to_Macro'>PG_GETARG_ABSOLUTETIME</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN405"></a>    <a href="../../../interfaces/ecpg/pgtypeslib/dt_common.c.html#LN16"><span class='Ref_to_Typedef'>AbsoluteTime</span></a> <span class='Declare_Local'>t2</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN57"><span class='Ref_to_Macro'>PG_GETARG_ABSOLUTETIME</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN338"><span class='Ref_to_Func'>abstime_cmp_internal</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN404"><span class='Ref_To_Local'>t1</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN405"><span class='Ref_To_Local'>t2</span></a><span class='Parentheses'>) </span><span class='Operator'>&LT;= </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN411"></a><span class='Declare_Function'>abstimege</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN413"></a>    <a href="../../../interfaces/ecpg/pgtypeslib/dt_common.c.html#LN16"><span class='Ref_to_Typedef'>AbsoluteTime</span></a> <span class='Declare_Local'>t1</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN57"><span class='Ref_to_Macro'>PG_GETARG_ABSOLUTETIME</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN414"></a>    <a href="../../../interfaces/ecpg/pgtypeslib/dt_common.c.html#LN16"><span class='Ref_to_Typedef'>AbsoluteTime</span></a> <span class='Declare_Local'>t2</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN57"><span class='Ref_to_Macro'>PG_GETARG_ABSOLUTETIME</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN338"><span class='Ref_to_Func'>abstime_cmp_internal</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN413"><span class='Ref_To_Local'>t1</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN414"><span class='Ref_To_Local'>t2</span></a><span class='Parentheses'>) </span><span class='Operator'>&GT;= </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN420"></a><span class='Declare_Function'>btabstimecmp</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN422"></a>    <a href="../../../interfaces/ecpg/pgtypeslib/dt_common.c.html#LN16"><span class='Ref_to_Typedef'>AbsoluteTime</span></a> <span class='Declare_Local'>t1</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN57"><span class='Ref_to_Macro'>PG_GETARG_ABSOLUTETIME</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN423"></a>    <a href="../../../interfaces/ecpg/pgtypeslib/dt_common.c.html#LN16"><span class='Ref_to_Typedef'>AbsoluteTime</span></a> <span class='Declare_Local'>t2</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN57"><span class='Ref_to_Macro'>PG_GETARG_ABSOLUTETIME</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN313"><span class='Ref_to_Macro'>PG_RETURN_INT32</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN338"><span class='Ref_to_Func'>abstime_cmp_internal</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN422"><span class='Ref_To_Local'>t1</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN423"><span class='Ref_To_Local'>t2</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/* timestamp_abstime() 
 * Convert timestamp to abstime. 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN433"></a><span class='Declare_Function'>timestamp_abstime</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN435"></a>    <a href="../../../include/datatype/timestamp.h.html#LN37"><span class='Ref_to_Typedef'>Timestamp</span></a>   <span class='Declare_Local'>timestamp</span> <span class='Operator'>= </span><a href="../../../include/utils/timestamp.h.html#LN34"><span class='Ref_to_Macro'>PG_GETARG_TIMESTAMP</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN436"></a>    <a href="../../../interfaces/ecpg/pgtypeslib/dt_common.c.html#LN16"><span class='Ref_to_Typedef'>AbsoluteTime</span></a> <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span><a name="LN437"></a>    <a href="../../../interfaces/ecpg/pgtypeslib/dt.h.html#LN9"><span class='Ref_to_Typedef'>fsec_t</span></a>      <span class='Declare_Local'>fsec</span><span class='Delimiter'>; 
</span><a name="LN438"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>tz</span><span class='Delimiter'>; 
</span><a name="LN439"></a>    <span class='Control'>struct</span> <a href="../../../include/pgtime.h.html#LN24"><span class='Ref_to_Struct'>pg_tm</span></a> <span class='Declare_Local'>tt</span><span class='Delimiter'>, 
</span><a name="LN440"></a>               <span class='Operator'>*</span><span class='Declare_Local'>tm</span> <span class='Operator'>= &</span><a href="nabstime.c.html#LN439"><span class='Ref_To_Local'>tt</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/datatype/timestamp.h.html#LN114"><span class='Ref_to_Macro'>TIMESTAMP_IS_NOBEGIN</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN435"><span class='Ref_To_Local'>timestamp</span></a><span class='Parentheses'>))</span> 
        <a href="nabstime.c.html#LN436"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN77"><span class='Ref_to_Const'>NOSTART_ABSTIME</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/datatype/timestamp.h.html#LN119"><span class='Ref_to_Macro'>TIMESTAMP_IS_NOEND</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN435"><span class='Ref_To_Local'>timestamp</span></a><span class='Parentheses'>))</span> 
        <a href="nabstime.c.html#LN436"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN76"><span class='Ref_to_Const'>NOEND_ABSTIME</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/timestamp.h.html#LN84"><span class='Ref_to_Proto'>timestamp2tm</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN435"><span class='Ref_To_Local'>timestamp</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="nabstime.c.html#LN440"><span class='Ref_To_Local'>tm</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="nabstime.c.html#LN437"><span class='Ref_To_Local'>fsec</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="nabstime.c.html#LN438"><span class='Ref_To_Local'>tz</span></a> <span class='Operator'>= </span><a href="../../../include/utils/datetime.h.html#LN311"><span class='Ref_to_Proto'>DetermineTimeZoneOffset</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN440"><span class='Ref_To_Local'>tm</span></a><span class='Delimiter'>, </span><a href="../../../timezone/pgtz.c.html#LN27"><span class='Ref_to_Global_Var'>session_timezone</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="nabstime.c.html#LN436"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="nabstime.c.html#LN73"><span class='Ref_to_Proto'>tm2abstime</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN440"><span class='Ref_To_Local'>tm</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN438"><span class='Ref_To_Local'>tz</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_DATETIME_VALUE_OUT_OF_RANGE<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"timestamp out of range"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        <a href="nabstime.c.html#LN436"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN75"><span class='Ref_to_Const'>INVALID_ABSTIME</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../../include/utils/nabstime.h.html#LN61"><span class='Ref_to_Macro'>PG_RETURN_ABSOLUTETIME</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN436"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end timestamp_abstime &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* abstime_timestamp() 
 * Convert abstime to timestamp. 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN466"></a><span class='Declare_Function'>abstime_timestamp</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN468"></a>    <a href="../../../interfaces/ecpg/pgtypeslib/dt_common.c.html#LN16"><span class='Ref_to_Typedef'>AbsoluteTime</span></a> <span class='Declare_Local'>abstime</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN57"><span class='Ref_to_Macro'>PG_GETARG_ABSOLUTETIME</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN469"></a>    <a href="../../../include/datatype/timestamp.h.html#LN37"><span class='Ref_to_Typedef'>Timestamp</span></a>   <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span><a name="LN470"></a>    <span class='Control'>struct</span> <a href="../../../include/pgtime.h.html#LN24"><span class='Ref_to_Struct'>pg_tm</span></a> <span class='Declare_Local'>tt</span><span class='Delimiter'>, 
</span><a name="LN471"></a>               <span class='Operator'>*</span><span class='Declare_Local'>tm</span> <span class='Operator'>= &</span><a href="nabstime.c.html#LN470"><span class='Ref_To_Local'>tt</span></a><span class='Delimiter'>; 
</span><a name="LN472"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>tz</span><span class='Delimiter'>; 
</span><a name="LN473"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>zone</span><span class='Delimiter'>[</span><a href="../../../interfaces/ecpg/pgtypeslib/dt.h.html#LN195"><span class='Ref_to_Const'>MAXDATELEN</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>], 
</span><a name="LN474"></a>               <span class='Operator'>*</span><span class='Declare_Local'>tzn</span> <span class='Operator'>= </span><a href="nabstime.c.html#LN473"><span class='Ref_To_Local'>zone</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN468"><span class='Ref_To_Local'>abstime</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>case</span> <a href="../../../include/utils/nabstime.h.html#LN75"><span class='Ref_to_Const'>INVALID_ABSTIME</span></a><span class='Operator'>: 
</span>            <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_FEATURE_NOT_SUPPORTED<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"cannot convert abstime \"invalid\" to timestamp"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>            <a href="../../../include/datatype/timestamp.h.html#LN111"><span class='Ref_to_Macro'>TIMESTAMP_NOBEGIN</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN469"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/utils/nabstime.h.html#LN77"><span class='Ref_to_Const'>NOSTART_ABSTIME</span></a><span class='Operator'>: 
</span>            <a href="../../../include/datatype/timestamp.h.html#LN111"><span class='Ref_to_Macro'>TIMESTAMP_NOBEGIN</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN469"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/utils/nabstime.h.html#LN76"><span class='Ref_to_Const'>NOEND_ABSTIME</span></a><span class='Operator'>: 
</span>            <a href="../../../include/datatype/timestamp.h.html#LN116"><span class='Ref_to_Macro'>TIMESTAMP_NOEND</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN469"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>default</span><span class='Operator'>: 
</span>            <a href="nabstime.c.html#LN97"><span class='Ref_to_Func'>abstime2tm</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN468"><span class='Ref_To_Local'>abstime</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="nabstime.c.html#LN472"><span class='Ref_To_Local'>tz</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN471"><span class='Ref_To_Local'>tm</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="nabstime.c.html#LN474"><span class='Ref_To_Local'>tzn</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../interfaces/ecpg/pgtypeslib/timestamp.c.html#LN40"><span class='Ref_to_Func'>tm2timestamp</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN471"><span class='Ref_To_Local'>tm</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="nabstime.c.html#LN469"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_DATETIME_VALUE_OUT_OF_RANGE<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"timestamp out of range"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch abstime &raquo; </span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/timestamp.h.html#LN38"><span class='Ref_to_Macro'>PG_RETURN_TIMESTAMP</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN469"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end abstime_timestamp &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* timestamptz_abstime() 
 * Convert timestamp with time zone to abstime. 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN510"></a><span class='Declare_Function'>timestamptz_abstime</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN512"></a>    <a href="../../../interfaces/ecpg/include/pgtypes_timestamp.h.html#LN9"><span class='Ref_to_Typedef'>TimestampTz</span></a> <span class='Declare_Local'>timestamp</span> <span class='Operator'>= </span><a href="../../../include/utils/timestamp.h.html#LN34"><span class='Ref_to_Macro'>PG_GETARG_TIMESTAMP</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN513"></a>    <a href="../../../interfaces/ecpg/pgtypeslib/dt_common.c.html#LN16"><span class='Ref_to_Typedef'>AbsoluteTime</span></a> <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span><a name="LN514"></a>    <a href="../../../interfaces/ecpg/pgtypeslib/dt.h.html#LN9"><span class='Ref_to_Typedef'>fsec_t</span></a>      <span class='Declare_Local'>fsec</span><span class='Delimiter'>; 
</span><a name="LN515"></a>    <span class='Control'>struct</span> <a href="../../../include/pgtime.h.html#LN24"><span class='Ref_to_Struct'>pg_tm</span></a> <span class='Declare_Local'>tt</span><span class='Delimiter'>, 
</span><a name="LN516"></a>               <span class='Operator'>*</span><span class='Declare_Local'>tm</span> <span class='Operator'>= &</span><a href="nabstime.c.html#LN515"><span class='Ref_To_Local'>tt</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/datatype/timestamp.h.html#LN114"><span class='Ref_to_Macro'>TIMESTAMP_IS_NOBEGIN</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN512"><span class='Ref_To_Local'>timestamp</span></a><span class='Parentheses'>))</span> 
        <a href="nabstime.c.html#LN513"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN77"><span class='Ref_to_Const'>NOSTART_ABSTIME</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/datatype/timestamp.h.html#LN119"><span class='Ref_to_Macro'>TIMESTAMP_IS_NOEND</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN512"><span class='Ref_To_Local'>timestamp</span></a><span class='Parentheses'>))</span> 
        <a href="nabstime.c.html#LN513"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN76"><span class='Ref_to_Const'>NOEND_ABSTIME</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/timestamp.h.html#LN84"><span class='Ref_to_Proto'>timestamp2tm</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN512"><span class='Ref_To_Local'>timestamp</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="nabstime.c.html#LN516"><span class='Ref_To_Local'>tm</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="nabstime.c.html#LN514"><span class='Ref_To_Local'>fsec</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <a href="nabstime.c.html#LN513"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="nabstime.c.html#LN73"><span class='Ref_to_Proto'>tm2abstime</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN516"><span class='Ref_To_Local'>tm</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_DATETIME_VALUE_OUT_OF_RANGE<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"timestamp out of range"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        <a href="nabstime.c.html#LN513"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN75"><span class='Ref_to_Const'>INVALID_ABSTIME</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../../include/utils/nabstime.h.html#LN61"><span class='Ref_to_Macro'>PG_RETURN_ABSOLUTETIME</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN513"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end timestamptz_abstime &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* abstime_timestamptz() 
 * Convert abstime to timestamp with time zone. 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN539"></a><span class='Declare_Function'>abstime_timestamptz</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN541"></a>    <a href="../../../interfaces/ecpg/pgtypeslib/dt_common.c.html#LN16"><span class='Ref_to_Typedef'>AbsoluteTime</span></a> <span class='Declare_Local'>abstime</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN57"><span class='Ref_to_Macro'>PG_GETARG_ABSOLUTETIME</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN542"></a>    <a href="../../../interfaces/ecpg/include/pgtypes_timestamp.h.html#LN9"><span class='Ref_to_Typedef'>TimestampTz</span></a> <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span><a name="LN543"></a>    <span class='Control'>struct</span> <a href="../../../include/pgtime.h.html#LN24"><span class='Ref_to_Struct'>pg_tm</span></a> <span class='Declare_Local'>tt</span><span class='Delimiter'>, 
</span><a name="LN544"></a>               <span class='Operator'>*</span><span class='Declare_Local'>tm</span> <span class='Operator'>= &</span><a href="nabstime.c.html#LN543"><span class='Ref_To_Local'>tt</span></a><span class='Delimiter'>; 
</span><a name="LN545"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>tz</span><span class='Delimiter'>; 
</span><a name="LN546"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>zone</span><span class='Delimiter'>[</span><a href="../../../interfaces/ecpg/pgtypeslib/dt.h.html#LN195"><span class='Ref_to_Const'>MAXDATELEN</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>], 
</span><a name="LN547"></a>               <span class='Operator'>*</span><span class='Declare_Local'>tzn</span> <span class='Operator'>= </span><a href="nabstime.c.html#LN546"><span class='Ref_To_Local'>zone</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN541"><span class='Ref_To_Local'>abstime</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>case</span> <a href="../../../include/utils/nabstime.h.html#LN75"><span class='Ref_to_Const'>INVALID_ABSTIME</span></a><span class='Operator'>: 
</span>            <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_FEATURE_NOT_SUPPORTED<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"cannot convert abstime \"invalid\" to timestamp"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>            <a href="../../../include/datatype/timestamp.h.html#LN111"><span class='Ref_to_Macro'>TIMESTAMP_NOBEGIN</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN542"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/utils/nabstime.h.html#LN77"><span class='Ref_to_Const'>NOSTART_ABSTIME</span></a><span class='Operator'>: 
</span>            <a href="../../../include/datatype/timestamp.h.html#LN111"><span class='Ref_to_Macro'>TIMESTAMP_NOBEGIN</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN542"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/utils/nabstime.h.html#LN76"><span class='Ref_to_Const'>NOEND_ABSTIME</span></a><span class='Operator'>: 
</span>            <a href="../../../include/datatype/timestamp.h.html#LN116"><span class='Ref_to_Macro'>TIMESTAMP_NOEND</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN542"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>default</span><span class='Operator'>: 
</span>            <a href="nabstime.c.html#LN97"><span class='Ref_to_Func'>abstime2tm</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN541"><span class='Ref_To_Local'>abstime</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="nabstime.c.html#LN545"><span class='Ref_To_Local'>tz</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN544"><span class='Ref_To_Local'>tm</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="nabstime.c.html#LN547"><span class='Ref_To_Local'>tzn</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../interfaces/ecpg/pgtypeslib/timestamp.c.html#LN40"><span class='Ref_to_Func'>tm2timestamp</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN544"><span class='Ref_To_Local'>tm</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="nabstime.c.html#LN545"><span class='Ref_To_Local'>tz</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="nabstime.c.html#LN542"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_DATETIME_VALUE_OUT_OF_RANGE<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"timestamp out of range"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch abstime &raquo; </span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/timestamp.h.html#LN38"><span class='Ref_to_Macro'>PG_RETURN_TIMESTAMP</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN542"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end abstime_timestamptz &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/***************************************************************************** 
 *   USER I/O ROUTINES                                                       * 
 *****************************************************************************/ 
</span> 
<span class='Comment_Multi_Line'>/* 
 *      reltimein       - converts a reltime string in an internal format 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN587"></a><span class='Declare_Function'>reltimein</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN589"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>str</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN241"><span class='Ref_to_Macro'>PG_GETARG_CSTRING</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN590"></a>    <a href="../../../include/utils/nabstime.h.html#LN36"><span class='Ref_to_Typedef'>RelativeTime</span></a> <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span><a name="LN591"></a>    <span class='Control'>struct</span> <a href="../../../include/pgtime.h.html#LN24"><span class='Ref_to_Struct'>pg_tm</span></a> <span class='Declare_Local'>tt</span><span class='Delimiter'>, 
</span><a name="LN592"></a>               <span class='Operator'>*</span><span class='Declare_Local'>tm</span> <span class='Operator'>= &</span><a href="nabstime.c.html#LN591"><span class='Ref_To_Local'>tt</span></a><span class='Delimiter'>; 
</span><a name="LN593"></a>    <a href="../../../interfaces/ecpg/pgtypeslib/dt.h.html#LN9"><span class='Ref_to_Typedef'>fsec_t</span></a>      <span class='Declare_Local'>fsec</span><span class='Delimiter'>; 
</span><a name="LN594"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>dtype</span><span class='Delimiter'>; 
</span><a name="LN595"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>dterr</span><span class='Delimiter'>; 
</span><a name="LN596"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>field</span><span class='Delimiter'>[</span><a href="../../../interfaces/ecpg/pgtypeslib/dt.h.html#LN197"><span class='Ref_to_Const'>MAXDATEFIELDS</span></a><span class='Delimiter'>]; 
</span><a name="LN597"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>nf</span><span class='Delimiter'>, 
</span><a name="LN598"></a>                <span class='Declare_Local'>ftype</span><span class='Delimiter'>[</span><a href="../../../interfaces/ecpg/pgtypeslib/dt.h.html#LN197"><span class='Ref_to_Const'>MAXDATEFIELDS</span></a><span class='Delimiter'>]; 
</span><a name="LN599"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>workbuf</span><span class='Delimiter'>[</span><a href="../../../interfaces/ecpg/pgtypeslib/dt.h.html#LN195"><span class='Ref_to_Const'>MAXDATELEN</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>]; 
</span> 
    <a href="nabstime.c.html#LN595"><span class='Ref_To_Local'>dterr</span></a> <span class='Operator'>= </span><a href="../../../include/utils/datetime.h.html#LN293"><span class='Ref_to_Proto'>ParseDateTime</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN589"><span class='Ref_To_Local'>str</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN599"><span class='Ref_To_Local'>workbuf</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="nabstime.c.html#LN599"><span class='Ref_To_Local'>workbuf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                          <a href="nabstime.c.html#LN596"><span class='Ref_To_Local'>field</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN598"><span class='Ref_To_Local'>ftype</span></a><span class='Delimiter'>, </span><a href="../../../interfaces/ecpg/pgtypeslib/dt.h.html#LN197"><span class='Ref_to_Const'>MAXDATEFIELDS</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="nabstime.c.html#LN597"><span class='Ref_To_Local'>nf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN595"><span class='Ref_To_Local'>dterr</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <a href="nabstime.c.html#LN595"><span class='Ref_To_Local'>dterr</span></a> <span class='Operator'>= </span><a href="../../../include/utils/datetime.h.html#LN303"><span class='Ref_to_Proto'>DecodeInterval</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN596"><span class='Ref_To_Local'>field</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN598"><span class='Ref_To_Local'>ftype</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN597"><span class='Ref_To_Local'>nf</span></a><span class='Delimiter'>, </span><a href="../../../interfaces/ecpg/pgtypeslib/dt.h.html#LN21"><span class='Ref_to_Const'>INTERVAL_FULL_RANGE</span></a><span class='Delimiter'>, 
</span>                               <span class='Operator'>&</span><a href="nabstime.c.html#LN594"><span class='Ref_To_Local'>dtype</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN592"><span class='Ref_To_Local'>tm</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="nabstime.c.html#LN593"><span class='Ref_To_Local'>fsec</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* if those functions think it's a bad format, try ISO8601 style */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN595"><span class='Ref_To_Local'>dterr</span></a> <span class='Operator'>== </span><a href="../../../interfaces/ecpg/pgtypeslib/dt.h.html#LN25"><span class='Ref_to_Const'>DTERR_BAD_FORMAT</span></a><span class='Parentheses'>) 
</span>        <a href="nabstime.c.html#LN595"><span class='Ref_To_Local'>dterr</span></a> <span class='Operator'>= </span><a href="../../../interfaces/ecpg/pgtypeslib/interval.c.html#LN122"><span class='Ref_to_Func'>DecodeISO8601Interval</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN589"><span class='Ref_To_Local'>str</span></a><span class='Delimiter'>, 
</span>                                      <span class='Operator'>&</span><a href="nabstime.c.html#LN594"><span class='Ref_To_Local'>dtype</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN592"><span class='Ref_To_Local'>tm</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="nabstime.c.html#LN593"><span class='Ref_To_Local'>fsec</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN595"><span class='Ref_To_Local'>dterr</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN595"><span class='Ref_To_Local'>dterr</span></a> <span class='Operator'>== </span><a href="../../../interfaces/ecpg/pgtypeslib/dt.h.html#LN26"><span class='Ref_to_Const'>DTERR_FIELD_OVERFLOW</span></a><span class='Parentheses'>) 
</span>            <a href="nabstime.c.html#LN595"><span class='Ref_To_Local'>dterr</span></a> <span class='Operator'>= </span><a href="../../../interfaces/ecpg/pgtypeslib/dt.h.html#LN28"><span class='Ref_to_Const'>DTERR_INTERVAL_OVERFLOW</span></a><span class='Delimiter'>; 
</span>        <a href="datetime.c.html#LN3763"><span class='Ref_to_Func'>DateTimeParseError</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN595"><span class='Ref_To_Local'>dterr</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN589"><span class='Ref_To_Local'>str</span></a><span class='Delimiter'>, </span><span class='String'>"reltime"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN594"><span class='Ref_To_Local'>dtype</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>case</span> <a href="../../../interfaces/ecpg/pgtypeslib/dt.h.html#LN156"><span class='Ref_to_Const'>DTK_DELTA</span></a><span class='Operator'>: 
</span>            <a href="nabstime.c.html#LN590"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Parentheses'>((</span><a href="nabstime.c.html#LN592"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN28"><span class='Ref_to_Member'>tm_hour</span></a> <span class='Operator'>* </span><a href="../../../include/datatype/timestamp.h.html#LN88"><span class='Ref_to_Const'>MINS_PER_HOUR</span></a> <span class='Operator'>+ </span><a href="nabstime.c.html#LN592"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN27"><span class='Ref_to_Member'>tm_min</span></a><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="../../../include/datatype/timestamp.h.html#LN87"><span class='Ref_to_Const'>SECS_PER_MINUTE</span></a><span class='Parentheses'>)</span> <span class='Operator'>+ </span><a href="nabstime.c.html#LN592"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN26"><span class='Ref_to_Member'>tm_sec</span></a><span class='Delimiter'>; 
</span>            <a href="nabstime.c.html#LN590"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>+= </span><a href="nabstime.c.html#LN592"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN31"><span class='Ref_to_Member'>tm_year</span></a> <span class='Operator'>* </span><a href="../../../include/datatype/timestamp.h.html#LN84"><span class='Ref_to_Const'>SECS_PER_YEAR</span></a> <span class='Operator'>+ </span><span class='Parentheses'>((</span><a href="nabstime.c.html#LN592"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN30"><span class='Ref_to_Member'>tm_mon</span></a> <span class='Operator'>* </span><a href="../../../include/datatype/timestamp.h.html#LN76"><span class='Ref_to_Const'>DAYS_PER_MONTH</span></a><span class='Parentheses'>) </span><span class='Operator'>+ </span><a href="nabstime.c.html#LN592"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN29"><span class='Ref_to_Member'>tm_mday</span></a><span class='Parentheses'>)</span> <span class='Operator'>* </span><a href="../../../include/datatype/timestamp.h.html#LN85"><span class='Ref_to_Const'>SECS_PER_DAY</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>default</span><span class='Operator'>: 
</span>            <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"unexpected dtype %d while parsing reltime \"%s\""</span><span class='Delimiter'>, 
</span>                 <a href="nabstime.c.html#LN594"><span class='Ref_To_Local'>dtype</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN589"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="nabstime.c.html#LN590"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN79"><span class='Ref_to_Const'>INVALID_RELTIME</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../../include/utils/nabstime.h.html#LN62"><span class='Ref_to_Macro'>PG_RETURN_RELATIVETIME</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN590"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end reltimein &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 *      reltimeout      - converts the internal format to a reltime string 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN640"></a><span class='Declare_Function'>reltimeout</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN642"></a>    <a href="../../../include/utils/nabstime.h.html#LN36"><span class='Ref_to_Typedef'>RelativeTime</span></a> <span class='Declare_Local'>time</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN58"><span class='Ref_to_Macro'>PG_GETARG_RELATIVETIME</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN643"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span><a name="LN644"></a>    <span class='Control'>struct</span> <a href="../../../include/pgtime.h.html#LN24"><span class='Ref_to_Struct'>pg_tm</span></a> <span class='Declare_Local'>tt</span><span class='Delimiter'>, 
</span><a name="LN645"></a>               <span class='Operator'>*</span><span class='Declare_Local'>tm</span> <span class='Operator'>= &</span><a href="nabstime.c.html#LN644"><span class='Ref_To_Local'>tt</span></a><span class='Delimiter'>; 
</span><a name="LN646"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>buf</span><span class='Delimiter'>[</span><a href="../../../interfaces/ecpg/pgtypeslib/dt.h.html#LN195"><span class='Ref_to_Const'>MAXDATELEN</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>]; 
</span> 
    <a href="nabstime.c.html#LN74"><span class='Ref_to_Proto'>reltime2tm</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN642"><span class='Ref_To_Local'>time</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN645"><span class='Ref_To_Local'>tm</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../interfaces/ecpg/pgtypeslib/dt.h.html#LN316"><span class='Ref_to_Proto'>EncodeInterval</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN645"><span class='Ref_To_Local'>tm</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../init/globals.c.html#LN108"><span class='Ref_to_Global_Var'>IntervalStyle</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN646"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="nabstime.c.html#LN643"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN32"><span class='Ref_to_Proto'>pstrdup</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN646"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN321"><span class='Ref_to_Macro'>PG_RETURN_CSTRING</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN643"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 *      reltimerecv         - converts external binary format to reltime 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN659"></a><span class='Declare_Function'>reltimerecv</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN661"></a>    <a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a><span class='Parentheses'>) </span><a href="../../../include/fmgr.h.html#LN240"><span class='Ref_to_Macro'>PG_GETARG_POINTER</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/nabstime.h.html#LN62"><span class='Ref_to_Macro'>PG_RETURN_RELATIVETIME</span></a><span class='Parentheses'>((</span><a href="../../../include/utils/nabstime.h.html#LN36"><span class='Ref_to_Typedef'>RelativeTime</span></a><span class='Parentheses'>)</span> <a href="../../../include/libpq/pqformat.h.html#LN38"><span class='Ref_to_Proto'>pq_getmsgint</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN661"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/utils/nabstime.h.html#LN36"><span class='Ref_to_Typedef'>RelativeTime</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 *      reltimesend         - converts reltime to binary format 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN670"></a><span class='Declare_Function'>reltimesend</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN672"></a>    <a href="../../../include/utils/nabstime.h.html#LN36"><span class='Ref_to_Typedef'>RelativeTime</span></a> <span class='Declare_Local'>time</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN58"><span class='Ref_to_Macro'>PG_GETARG_RELATIVETIME</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN673"></a>    <a href="../../../include/lib/stringinfo.h.html#LN34"><span class='Ref_to_Struct'>StringInfoData</span></a> <span class='Declare_Local'>buf</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/libpq/pqformat.h.html#LN31"><span class='Ref_to_Proto'>pq_begintypsend</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="nabstime.c.html#LN673"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/libpq/pqformat.h.html#LN25"><span class='Ref_to_Proto'>pq_sendint</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="nabstime.c.html#LN673"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN672"><span class='Ref_To_Local'>time</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="nabstime.c.html#LN672"><span class='Ref_To_Local'>time</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN328"><span class='Ref_to_Macro'>PG_RETURN_BYTEA_P</span></a><span class='Parentheses'>(</span><a href="../../../include/libpq/pqformat.h.html#LN32"><span class='Ref_to_Proto'>pq_endtypsend</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="nabstime.c.html#LN673"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Keyword'>static void 
</span><a name="LN682"></a><span class='Declare_Function'>reltime2tm</span><span class='Parentheses'>(</span><a href="../../../include/utils/nabstime.h.html#LN36"><span class='Ref_to_Typedef'>RelativeTime</span></a> <span class='Declare_Parameter'>time</span><span class='Delimiter'>, </span><span class='Control'>struct</span> <a href="../../../include/pgtime.h.html#LN24"><span class='Ref_to_Struct'>pg_tm</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>tm</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN684"></a>    <span class='Keyword'>double</span>      <span class='Declare_Local'>dtime</span> <span class='Operator'>= </span><a href="nabstime.c.html#LN682"><span class='Ref_to_Parameter'>time</span></a><span class='Delimiter'>; 
</span> 
    <a href="../../../interfaces/ecpg/pgtypeslib/dt.h.html#LN216"><span class='Ref_to_Macro'>FMODULO</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN684"><span class='Ref_To_Local'>dtime</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN682"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN31"><span class='Ref_to_Member'>tm_year</span></a><span class='Delimiter'>, </span><span class='Number'>31557600</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../interfaces/ecpg/pgtypeslib/dt.h.html#LN216"><span class='Ref_to_Macro'>FMODULO</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN684"><span class='Ref_To_Local'>dtime</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN682"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN30"><span class='Ref_to_Member'>tm_mon</span></a><span class='Delimiter'>, </span><span class='Number'>2592000</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../interfaces/ecpg/pgtypeslib/dt.h.html#LN216"><span class='Ref_to_Macro'>FMODULO</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN684"><span class='Ref_To_Local'>dtime</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN682"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN29"><span class='Ref_to_Member'>tm_mday</span></a><span class='Delimiter'>, </span><a href="../../../include/datatype/timestamp.h.html#LN85"><span class='Ref_to_Const'>SECS_PER_DAY</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../interfaces/ecpg/pgtypeslib/dt.h.html#LN216"><span class='Ref_to_Macro'>FMODULO</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN684"><span class='Ref_To_Local'>dtime</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN682"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN28"><span class='Ref_to_Member'>tm_hour</span></a><span class='Delimiter'>, </span><a href="../../../include/datatype/timestamp.h.html#LN86"><span class='Ref_to_Const'>SECS_PER_HOUR</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../interfaces/ecpg/pgtypeslib/dt.h.html#LN216"><span class='Ref_to_Macro'>FMODULO</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN684"><span class='Ref_To_Local'>dtime</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN682"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN27"><span class='Ref_to_Member'>tm_min</span></a><span class='Delimiter'>, </span><a href="../../../include/datatype/timestamp.h.html#LN87"><span class='Ref_to_Const'>SECS_PER_MINUTE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../interfaces/ecpg/pgtypeslib/dt.h.html#LN216"><span class='Ref_to_Macro'>FMODULO</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN684"><span class='Ref_To_Local'>dtime</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN682"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN26"><span class='Ref_to_Member'>tm_sec</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/* 
 *      tintervalin     - converts an tinterval string to internal format 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN699"></a><span class='Declare_Function'>tintervalin</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN701"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>tintervalstr</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN241"><span class='Ref_to_Macro'>PG_GETARG_CSTRING</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN702"></a>    <a href="../../../include/utils/nabstime.h.html#LN44"><span class='Ref_to_Typedef'>TimeInterval</span></a> <span class='Declare_Local'>tinterval</span><span class='Delimiter'>; 
</span><a name="LN703"></a>    <a href="../../../interfaces/ecpg/pgtypeslib/dt_common.c.html#LN16"><span class='Ref_to_Typedef'>AbsoluteTime</span></a> <span class='Declare_Local'>i_start</span><span class='Delimiter'>, 
</span><a name="LN704"></a>                <span class='Declare_Local'>i_end</span><span class='Delimiter'>, 
</span><a name="LN705"></a>                <span class='Declare_Local'>t1</span><span class='Delimiter'>, 
</span><a name="LN706"></a>                <span class='Declare_Local'>t2</span><span class='Delimiter'>; 
</span> 
    <a href="nabstime.c.html#LN75"><span class='Ref_to_Proto'>parsetinterval</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN701"><span class='Ref_To_Local'>tintervalstr</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="nabstime.c.html#LN705"><span class='Ref_To_Local'>t1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="nabstime.c.html#LN706"><span class='Ref_To_Local'>t2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="nabstime.c.html#LN702"><span class='Ref_To_Local'>tinterval</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/utils/nabstime.h.html#LN44"><span class='Ref_to_Typedef'>TimeInterval</span></a><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/utils/nabstime.h.html#LN38"><span class='Ref_to_Typedef'>TimeIntervalData</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN705"><span class='Ref_To_Local'>t1</span></a> <span class='Operator'>== </span><a href="../../../include/utils/nabstime.h.html#LN75"><span class='Ref_to_Const'>INVALID_ABSTIME</span></a> <span class='Operator'>|| </span><a href="nabstime.c.html#LN706"><span class='Ref_To_Local'>t2</span></a> <span class='Operator'>== </span><a href="../../../include/utils/nabstime.h.html#LN75"><span class='Ref_to_Const'>INVALID_ABSTIME</span></a><span class='Parentheses'>) 
</span>        <a href="nabstime.c.html#LN702"><span class='Ref_To_Local'>tinterval</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN40"><span class='Ref_to_Member'>status</span></a> <span class='Operator'>= </span><a href="nabstime.c.html#LN45"><span class='Ref_to_Const'>T_INTERVAL_INVAL</span></a><span class='Delimiter'>;</span>   <span class='Comment_Single_Line'>/* undefined  */ 
</span>    <span class='Control'>else</span> 
        <a href="nabstime.c.html#LN702"><span class='Ref_To_Local'>tinterval</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN40"><span class='Ref_to_Member'>status</span></a> <span class='Operator'>= </span><a href="nabstime.c.html#LN46"><span class='Ref_to_Const'>T_INTERVAL_VALID</span></a><span class='Delimiter'>; 
</span> 
    <a href="nabstime.c.html#LN703"><span class='Ref_To_Local'>i_start</span></a> <span class='Operator'>= </span><a href="nabstime.c.html#LN59"><span class='Ref_to_Macro'>ABSTIMEMIN</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN705"><span class='Ref_To_Local'>t1</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN706"><span class='Ref_To_Local'>t2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="nabstime.c.html#LN704"><span class='Ref_To_Local'>i_end</span></a> <span class='Operator'>= </span><a href="nabstime.c.html#LN63"><span class='Ref_to_Macro'>ABSTIMEMAX</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN705"><span class='Ref_To_Local'>t1</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN706"><span class='Ref_To_Local'>t2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="nabstime.c.html#LN702"><span class='Ref_To_Local'>tinterval</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN41"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="nabstime.c.html#LN703"><span class='Ref_To_Local'>i_start</span></a><span class='Delimiter'>; 
</span>    <a href="nabstime.c.html#LN702"><span class='Ref_To_Local'>tinterval</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN41"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="nabstime.c.html#LN704"><span class='Ref_To_Local'>i_end</span></a><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/nabstime.h.html#LN63"><span class='Ref_to_Macro'>PG_RETURN_TIMEINTERVAL</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN702"><span class='Ref_To_Local'>tinterval</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end tintervalin &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* 
 *      tintervalout    - converts an internal tinterval format to a string 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN730"></a><span class='Declare_Function'>tintervalout</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN732"></a>    <a href="../../../include/utils/nabstime.h.html#LN44"><span class='Ref_to_Typedef'>TimeInterval</span></a> <span class='Declare_Local'>tinterval</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN59"><span class='Ref_to_Macro'>PG_GETARG_TIMEINTERVAL</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN733"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>i_str</span><span class='Delimiter'>, 
</span><a name="LN734"></a>               <span class='Operator'>*</span><span class='Declare_Local'>p</span><span class='Delimiter'>; 
</span> 
    <a href="nabstime.c.html#LN733"><span class='Ref_To_Local'>i_str</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN55"><span class='Ref_to_Const'>T_INTERVAL_LEN</span></a><span class='Parentheses'>)</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* ["..." "..."] */ 
</span>    <a href="../../../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN733"><span class='Ref_To_Local'>i_str</span></a><span class='Delimiter'>, </span><span class='String'>"[\""</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN732"><span class='Ref_To_Local'>tinterval</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN40"><span class='Ref_to_Member'>status</span></a> <span class='Operator'>== </span><a href="nabstime.c.html#LN45"><span class='Ref_to_Const'>T_INTERVAL_INVAL</span></a><span class='Parentheses'>) 
</span>        strcat<span class='Parentheses'>(</span><a href="nabstime.c.html#LN733"><span class='Ref_To_Local'>i_str</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN56"><span class='Ref_to_Const'>INVALID_INTERVAL_STR</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="nabstime.c.html#LN734"><span class='Ref_To_Local'>p</span></a> <span class='Operator'>= </span><a href="../../../include/postgres.h.html#LN571"><span class='Ref_to_Macro'>DatumGetCString</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN583"><span class='Ref_to_Macro'>DirectFunctionCall1</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN258"><span class='Ref_to_Func'>abstimeout</span></a><span class='Delimiter'>, 
</span>                                  <a href="../../../include/utils/nabstime.h.html#LN53"><span class='Ref_to_Macro'>AbsoluteTimeGetDatum</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN732"><span class='Ref_To_Local'>tinterval</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN41"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        strcat<span class='Parentheses'>(</span><a href="nabstime.c.html#LN733"><span class='Ref_To_Local'>i_str</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN734"><span class='Ref_To_Local'>p</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN734"><span class='Ref_To_Local'>p</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        strcat<span class='Parentheses'>(</span><a href="nabstime.c.html#LN733"><span class='Ref_To_Local'>i_str</span></a><span class='Delimiter'>, </span><span class='String'>"\" \""</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="nabstime.c.html#LN734"><span class='Ref_To_Local'>p</span></a> <span class='Operator'>= </span><a href="../../../include/postgres.h.html#LN571"><span class='Ref_to_Macro'>DatumGetCString</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN583"><span class='Ref_to_Macro'>DirectFunctionCall1</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN258"><span class='Ref_to_Func'>abstimeout</span></a><span class='Delimiter'>, 
</span>                                  <a href="../../../include/utils/nabstime.h.html#LN53"><span class='Ref_to_Macro'>AbsoluteTimeGetDatum</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN732"><span class='Ref_To_Local'>tinterval</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN41"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        strcat<span class='Parentheses'>(</span><a href="nabstime.c.html#LN733"><span class='Ref_To_Local'>i_str</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN734"><span class='Ref_To_Local'>p</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN734"><span class='Ref_To_Local'>p</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    strcat<span class='Parentheses'>(</span><a href="nabstime.c.html#LN733"><span class='Ref_To_Local'>i_str</span></a><span class='Delimiter'>, </span><span class='String'>"\"]"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN321"><span class='Ref_to_Macro'>PG_RETURN_CSTRING</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN733"><span class='Ref_To_Local'>i_str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end tintervalout &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 *      tintervalrecv           - converts external binary format to tinterval 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN760"></a><span class='Declare_Function'>tintervalrecv</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN762"></a>    <a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a><span class='Parentheses'>) </span><a href="../../../include/fmgr.h.html#LN240"><span class='Ref_to_Macro'>PG_GETARG_POINTER</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN763"></a>    <a href="../../../include/utils/nabstime.h.html#LN44"><span class='Ref_to_Typedef'>TimeInterval</span></a> <span class='Declare_Local'>tinterval</span><span class='Delimiter'>; 
</span><a name="LN764"></a>    <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>status</span><span class='Delimiter'>; 
</span> 
    <a href="nabstime.c.html#LN763"><span class='Ref_To_Local'>tinterval</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/utils/nabstime.h.html#LN44"><span class='Ref_to_Typedef'>TimeInterval</span></a><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/utils/nabstime.h.html#LN38"><span class='Ref_to_Typedef'>TimeIntervalData</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="nabstime.c.html#LN763"><span class='Ref_To_Local'>tinterval</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN40"><span class='Ref_to_Member'>status</span></a> <span class='Operator'>= </span><a href="../../../include/libpq/pqformat.h.html#LN38"><span class='Ref_to_Proto'>pq_getmsgint</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN762"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="nabstime.c.html#LN763"><span class='Ref_To_Local'>tinterval</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN40"><span class='Ref_to_Member'>status</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="nabstime.c.html#LN763"><span class='Ref_To_Local'>tinterval</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN41"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="../../../include/libpq/pqformat.h.html#LN38"><span class='Ref_to_Proto'>pq_getmsgint</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN762"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="nabstime.c.html#LN763"><span class='Ref_To_Local'>tinterval</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN41"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="nabstime.c.html#LN763"><span class='Ref_To_Local'>tinterval</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN41"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="../../../include/libpq/pqformat.h.html#LN38"><span class='Ref_to_Proto'>pq_getmsgint</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN762"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="nabstime.c.html#LN763"><span class='Ref_To_Local'>tinterval</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN41"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN763"><span class='Ref_To_Local'>tinterval</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN41"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>== </span><a href="../../../include/utils/nabstime.h.html#LN75"><span class='Ref_to_Const'>INVALID_ABSTIME</span></a> <span class='Operator'>|| 
</span>        <a href="nabstime.c.html#LN763"><span class='Ref_To_Local'>tinterval</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN41"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>== </span><a href="../../../include/utils/nabstime.h.html#LN75"><span class='Ref_to_Const'>INVALID_ABSTIME</span></a><span class='Parentheses'>) 
</span>        <a href="nabstime.c.html#LN764"><span class='Ref_To_Local'>status</span></a> <span class='Operator'>= </span><a href="nabstime.c.html#LN45"><span class='Ref_to_Const'>T_INTERVAL_INVAL</span></a><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* undefined  */ 
</span>    <span class='Control'>else</span> 
        <a href="nabstime.c.html#LN764"><span class='Ref_To_Local'>status</span></a> <span class='Operator'>= </span><a href="nabstime.c.html#LN46"><span class='Ref_to_Const'>T_INTERVAL_VALID</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN764"><span class='Ref_To_Local'>status</span></a> <span class='Operator'>!= </span><a href="nabstime.c.html#LN763"><span class='Ref_To_Local'>tinterval</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN40"><span class='Ref_to_Member'>status</span></a><span class='Parentheses'>) 
</span>        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INVALID_BINARY_REPRESENTATION<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"invalid status in external \"tinterval\" value"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/nabstime.h.html#LN63"><span class='Ref_to_Macro'>PG_RETURN_TIMEINTERVAL</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN763"><span class='Ref_To_Local'>tinterval</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end tintervalrecv &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 *      tintervalsend           - converts tinterval to binary format 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN790"></a><span class='Declare_Function'>tintervalsend</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN792"></a>    <a href="../../../include/utils/nabstime.h.html#LN44"><span class='Ref_to_Typedef'>TimeInterval</span></a> <span class='Declare_Local'>tinterval</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN59"><span class='Ref_to_Macro'>PG_GETARG_TIMEINTERVAL</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN793"></a>    <a href="../../../include/lib/stringinfo.h.html#LN34"><span class='Ref_to_Struct'>StringInfoData</span></a> <span class='Declare_Local'>buf</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/libpq/pqformat.h.html#LN31"><span class='Ref_to_Proto'>pq_begintypsend</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="nabstime.c.html#LN793"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/libpq/pqformat.h.html#LN25"><span class='Ref_to_Proto'>pq_sendint</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="nabstime.c.html#LN793"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN792"><span class='Ref_To_Local'>tinterval</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN40"><span class='Ref_to_Member'>status</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="nabstime.c.html#LN792"><span class='Ref_To_Local'>tinterval</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN40"><span class='Ref_to_Member'>status</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../../include/libpq/pqformat.h.html#LN25"><span class='Ref_to_Proto'>pq_sendint</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="nabstime.c.html#LN793"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN792"><span class='Ref_To_Local'>tinterval</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN41"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>], </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="nabstime.c.html#LN792"><span class='Ref_To_Local'>tinterval</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN41"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../../include/libpq/pqformat.h.html#LN25"><span class='Ref_to_Proto'>pq_sendint</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="nabstime.c.html#LN793"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN792"><span class='Ref_To_Local'>tinterval</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN41"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>], </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="nabstime.c.html#LN792"><span class='Ref_To_Local'>tinterval</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN41"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN328"><span class='Ref_to_Macro'>PG_RETURN_BYTEA_P</span></a><span class='Parentheses'>(</span><a href="../../../include/libpq/pqformat.h.html#LN32"><span class='Ref_to_Proto'>pq_endtypsend</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="nabstime.c.html#LN793"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/***************************************************************************** 
 *   PUBLIC ROUTINES                                                         * 
 *****************************************************************************/ 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN808"></a><span class='Declare_Function'>interval_reltime</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN810"></a>    <a href="../../../include/datatype/timestamp.h.html#LN42"><span class='Ref_to_Typedef'>Interval</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>interval</span> <span class='Operator'>= </span><a href="../../../include/utils/timestamp.h.html#LN36"><span class='Ref_to_Macro'>PG_GETARG_INTERVAL_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN811"></a>    <a href="../../../include/utils/nabstime.h.html#LN36"><span class='Ref_to_Typedef'>RelativeTime</span></a> <span class='Declare_Local'>time</span><span class='Delimiter'>; 
</span><a name="LN812"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>year</span><span class='Delimiter'>, 
</span><a name="LN813"></a>                <span class='Declare_Local'>month</span><span class='Delimiter'>, 
</span><a name="LN814"></a>                <span class='Declare_Local'>day</span><span class='Delimiter'>; 
</span><a name="LN815"></a>    <a href="../../../include/datatype/timestamp.h.html#LN39"><span class='Ref_to_Typedef'>TimeOffset</span></a>  <span class='Declare_Local'>span</span><span class='Delimiter'>; 
</span> 
    <a href="nabstime.c.html#LN812"><span class='Ref_To_Local'>year</span></a> <span class='Operator'>= </span><a href="nabstime.c.html#LN810"><span class='Ref_To_Local'>interval</span></a><span class='Operator'>-&GT;</span><a href="../../../interfaces/ecpg/include/pgtypes_interval.h.html#LN28"><span class='Ref_to_Member'>month</span></a> <span class='Operator'>/ </span><a href="../../../include/datatype/timestamp.h.html#LN68"><span class='Ref_to_Const'>MONTHS_PER_YEAR</span></a><span class='Delimiter'>; 
</span>    <a href="nabstime.c.html#LN813"><span class='Ref_To_Local'>month</span></a> <span class='Operator'>= </span><a href="nabstime.c.html#LN810"><span class='Ref_To_Local'>interval</span></a><span class='Operator'>-&GT;</span><a href="../../../interfaces/ecpg/include/pgtypes_interval.h.html#LN28"><span class='Ref_to_Member'>month</span></a> <span class='Operator'>% </span><a href="../../../include/datatype/timestamp.h.html#LN68"><span class='Ref_to_Const'>MONTHS_PER_YEAR</span></a><span class='Delimiter'>; 
</span>    <a href="nabstime.c.html#LN814"><span class='Ref_To_Local'>day</span></a> <span class='Operator'>= </span><a href="nabstime.c.html#LN810"><span class='Ref_To_Local'>interval</span></a><span class='Operator'>-&GT;</span><a href="../../../include/datatype/timestamp.h.html#LN46"><span class='Ref_to_Member'>day</span></a><span class='Delimiter'>; 
</span> 
    <a href="nabstime.c.html#LN815"><span class='Ref_To_Local'>span</span></a> <span class='Operator'>= </span><span class='Parentheses'>((</span><a href="../../../include/c.h.html#LN306"><span class='Ref_to_Macro'>INT64CONST</span></a><span class='Parentheses'>(</span><span class='Number'>365250000</span><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="nabstime.c.html#LN812"><span class='Ref_To_Local'>year</span></a> <span class='Operator'>+ </span><a href="../../../include/c.h.html#LN306"><span class='Ref_to_Macro'>INT64CONST</span></a><span class='Parentheses'>(</span><span class='Number'>30000000</span><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="nabstime.c.html#LN813"><span class='Ref_To_Local'>month</span></a> <span class='Operator'>+ 
</span>             <a href="../../../include/c.h.html#LN306"><span class='Ref_to_Macro'>INT64CONST</span></a><span class='Parentheses'>(</span><span class='Number'>1000000</span><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="nabstime.c.html#LN814"><span class='Ref_To_Local'>day</span></a><span class='Parentheses'>)</span> <span class='Operator'>* </span><a href="../../../include/c.h.html#LN306"><span class='Ref_to_Macro'>INT64CONST</span></a><span class='Parentheses'>(</span><span class='Number'>86400</span><span class='Parentheses'>))</span> <span class='Operator'>+ 
</span>        <a href="nabstime.c.html#LN810"><span class='Ref_To_Local'>interval</span></a><span class='Operator'>-&GT;</span><a href="../../../interfaces/ecpg/include/pgtypes_interval.h.html#LN27"><span class='Ref_to_Member'>time</span></a><span class='Delimiter'>; 
</span>    <a href="nabstime.c.html#LN815"><span class='Ref_To_Local'>span</span></a> <span class='Operator'>/= </span><a href="../../../include/datatype/timestamp.h.html#LN93"><span class='Ref_to_Const'>USECS_PER_SEC</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN815"><span class='Ref_To_Local'>span</span></a> <span class='Operator'>&LT; </span>INT_MIN <span class='Operator'>|| </span><a href="nabstime.c.html#LN815"><span class='Ref_To_Local'>span</span></a> <span class='Operator'>&GT; </span>INT_MAX<span class='Parentheses'>) 
</span>        <a href="nabstime.c.html#LN811"><span class='Ref_To_Local'>time</span></a> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN79"><span class='Ref_to_Const'>INVALID_RELTIME</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="nabstime.c.html#LN811"><span class='Ref_To_Local'>time</span></a> <span class='Operator'>= </span><a href="nabstime.c.html#LN815"><span class='Ref_To_Local'>span</span></a><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/nabstime.h.html#LN62"><span class='Ref_to_Macro'>PG_RETURN_RELATIVETIME</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN811"><span class='Ref_To_Local'>time</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end interval_reltime &raquo; </span> 
 
 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN836"></a><span class='Declare_Function'>reltime_interval</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN838"></a>    <a href="../../../include/utils/nabstime.h.html#LN36"><span class='Ref_to_Typedef'>RelativeTime</span></a> <span class='Declare_Local'>reltime</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN58"><span class='Ref_to_Macro'>PG_GETARG_RELATIVETIME</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN839"></a>    <a href="../../../include/datatype/timestamp.h.html#LN42"><span class='Ref_to_Typedef'>Interval</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span><a name="LN840"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>year</span><span class='Delimiter'>, 
</span><a name="LN841"></a>                <span class='Declare_Local'>month</span><span class='Delimiter'>, 
</span><a name="LN842"></a>                <span class='Declare_Local'>day</span><span class='Delimiter'>; 
</span> 
    <a href="nabstime.c.html#LN839"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/datatype/timestamp.h.html#LN42"><span class='Ref_to_Typedef'>Interval</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/datatype/timestamp.h.html#LN42"><span class='Ref_to_Typedef'>Interval</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN838"><span class='Ref_To_Local'>reltime</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>case</span> <a href="../../../include/utils/nabstime.h.html#LN79"><span class='Ref_to_Const'>INVALID_RELTIME</span></a><span class='Operator'>: 
</span>            <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_FEATURE_NOT_SUPPORTED<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                  <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"cannot convert reltime \"invalid\" to interval"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>            <a href="nabstime.c.html#LN839"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../interfaces/ecpg/include/pgtypes_interval.h.html#LN27"><span class='Ref_to_Member'>time</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>            <a href="nabstime.c.html#LN839"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/datatype/timestamp.h.html#LN46"><span class='Ref_to_Member'>day</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>            <a href="nabstime.c.html#LN839"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../interfaces/ecpg/include/pgtypes_interval.h.html#LN28"><span class='Ref_to_Member'>month</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>default</span><span class='Operator'>: 
</span>            <a href="nabstime.c.html#LN840"><span class='Ref_To_Local'>year</span></a> <span class='Operator'>= </span><a href="nabstime.c.html#LN838"><span class='Ref_To_Local'>reltime</span></a> <span class='Operator'>/ </span><a href="../../../include/datatype/timestamp.h.html#LN84"><span class='Ref_to_Const'>SECS_PER_YEAR</span></a><span class='Delimiter'>; 
</span>            <a href="nabstime.c.html#LN838"><span class='Ref_To_Local'>reltime</span></a> <span class='Operator'>-= </span><a href="nabstime.c.html#LN840"><span class='Ref_To_Local'>year</span></a> <span class='Operator'>* </span><a href="../../../include/datatype/timestamp.h.html#LN84"><span class='Ref_to_Const'>SECS_PER_YEAR</span></a><span class='Delimiter'>; 
</span>            <a href="nabstime.c.html#LN841"><span class='Ref_To_Local'>month</span></a> <span class='Operator'>= </span><a href="nabstime.c.html#LN838"><span class='Ref_To_Local'>reltime</span></a> <span class='Operator'>/ </span><span class='Parentheses'>(</span><a href="../../../include/datatype/timestamp.h.html#LN76"><span class='Ref_to_Const'>DAYS_PER_MONTH</span></a> <span class='Operator'>* </span><a href="../../../include/datatype/timestamp.h.html#LN85"><span class='Ref_to_Const'>SECS_PER_DAY</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="nabstime.c.html#LN838"><span class='Ref_To_Local'>reltime</span></a> <span class='Operator'>-= </span><a href="nabstime.c.html#LN841"><span class='Ref_To_Local'>month</span></a> <span class='Operator'>* </span><span class='Parentheses'>(</span><a href="../../../include/datatype/timestamp.h.html#LN76"><span class='Ref_to_Const'>DAYS_PER_MONTH</span></a> <span class='Operator'>* </span><a href="../../../include/datatype/timestamp.h.html#LN85"><span class='Ref_to_Const'>SECS_PER_DAY</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="nabstime.c.html#LN842"><span class='Ref_To_Local'>day</span></a> <span class='Operator'>= </span><a href="nabstime.c.html#LN838"><span class='Ref_To_Local'>reltime</span></a> <span class='Operator'>/ </span><a href="../../../include/datatype/timestamp.h.html#LN85"><span class='Ref_to_Const'>SECS_PER_DAY</span></a><span class='Delimiter'>; 
</span>            <a href="nabstime.c.html#LN838"><span class='Ref_To_Local'>reltime</span></a> <span class='Operator'>-= </span><a href="nabstime.c.html#LN842"><span class='Ref_To_Local'>day</span></a> <span class='Operator'>* </span><a href="../../../include/datatype/timestamp.h.html#LN85"><span class='Ref_to_Const'>SECS_PER_DAY</span></a><span class='Delimiter'>; 
</span> 
            <a href="nabstime.c.html#LN839"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../interfaces/ecpg/include/pgtypes_interval.h.html#LN27"><span class='Ref_to_Member'>time</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="nabstime.c.html#LN838"><span class='Ref_To_Local'>reltime</span></a> <span class='Operator'>* </span><a href="../../../include/datatype/timestamp.h.html#LN93"><span class='Ref_to_Const'>USECS_PER_SEC</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="nabstime.c.html#LN839"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../interfaces/ecpg/include/pgtypes_interval.h.html#LN28"><span class='Ref_to_Member'>month</span></a> <span class='Operator'>= </span><a href="../../../include/datatype/timestamp.h.html#LN68"><span class='Ref_to_Const'>MONTHS_PER_YEAR</span></a> <span class='Operator'>* </span><a href="nabstime.c.html#LN840"><span class='Ref_To_Local'>year</span></a> <span class='Operator'>+ </span><a href="nabstime.c.html#LN841"><span class='Ref_To_Local'>month</span></a><span class='Delimiter'>; 
</span>            <a href="nabstime.c.html#LN839"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/datatype/timestamp.h.html#LN46"><span class='Ref_to_Member'>day</span></a> <span class='Operator'>= </span><a href="nabstime.c.html#LN842"><span class='Ref_To_Local'>day</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch reltime &raquo; </span> 
 
    <a href="../../../include/utils/timestamp.h.html#LN40"><span class='Ref_to_Macro'>PG_RETURN_INTERVAL_P</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN839"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end reltime_interval &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* 
 *      mktinterval     - creates a time interval with endpoints t1 and t2 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN879"></a><span class='Declare_Function'>mktinterval</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN881"></a>    <a href="../../../interfaces/ecpg/pgtypeslib/dt_common.c.html#LN16"><span class='Ref_to_Typedef'>AbsoluteTime</span></a> <span class='Declare_Local'>t1</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN57"><span class='Ref_to_Macro'>PG_GETARG_ABSOLUTETIME</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN882"></a>    <a href="../../../interfaces/ecpg/pgtypeslib/dt_common.c.html#LN16"><span class='Ref_to_Typedef'>AbsoluteTime</span></a> <span class='Declare_Local'>t2</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN57"><span class='Ref_to_Macro'>PG_GETARG_ABSOLUTETIME</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN883"></a>    <a href="../../../interfaces/ecpg/pgtypeslib/dt_common.c.html#LN16"><span class='Ref_to_Typedef'>AbsoluteTime</span></a> <span class='Declare_Local'>tstart</span> <span class='Operator'>= </span><a href="nabstime.c.html#LN59"><span class='Ref_to_Macro'>ABSTIMEMIN</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN881"><span class='Ref_To_Local'>t1</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN882"><span class='Ref_To_Local'>t2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN884"></a>    <a href="../../../interfaces/ecpg/pgtypeslib/dt_common.c.html#LN16"><span class='Ref_to_Typedef'>AbsoluteTime</span></a> <span class='Declare_Local'>tend</span> <span class='Operator'>= </span><a href="nabstime.c.html#LN63"><span class='Ref_to_Macro'>ABSTIMEMAX</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN881"><span class='Ref_To_Local'>t1</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN882"><span class='Ref_To_Local'>t2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN885"></a>    <a href="../../../include/utils/nabstime.h.html#LN44"><span class='Ref_to_Typedef'>TimeInterval</span></a> <span class='Declare_Local'>tinterval</span><span class='Delimiter'>; 
</span> 
    <a href="nabstime.c.html#LN885"><span class='Ref_To_Local'>tinterval</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/utils/nabstime.h.html#LN44"><span class='Ref_to_Typedef'>TimeInterval</span></a><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/utils/nabstime.h.html#LN38"><span class='Ref_to_Typedef'>TimeIntervalData</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN881"><span class='Ref_To_Local'>t1</span></a> <span class='Operator'>== </span><a href="../../../include/utils/nabstime.h.html#LN75"><span class='Ref_to_Const'>INVALID_ABSTIME</span></a> <span class='Operator'>|| </span><a href="nabstime.c.html#LN882"><span class='Ref_To_Local'>t2</span></a> <span class='Operator'>== </span><a href="../../../include/utils/nabstime.h.html#LN75"><span class='Ref_to_Const'>INVALID_ABSTIME</span></a><span class='Parentheses'>) 
</span>        <a href="nabstime.c.html#LN885"><span class='Ref_To_Local'>tinterval</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN40"><span class='Ref_to_Member'>status</span></a> <span class='Operator'>= </span><a href="nabstime.c.html#LN45"><span class='Ref_to_Const'>T_INTERVAL_INVAL</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="nabstime.c.html#LN885"><span class='Ref_To_Local'>tinterval</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN40"><span class='Ref_to_Member'>status</span></a> <span class='Operator'>= </span><a href="nabstime.c.html#LN46"><span class='Ref_to_Const'>T_INTERVAL_VALID</span></a><span class='Delimiter'>; 
</span>        <a href="nabstime.c.html#LN885"><span class='Ref_To_Local'>tinterval</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN41"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="nabstime.c.html#LN883"><span class='Ref_To_Local'>tstart</span></a><span class='Delimiter'>; 
</span>        <a href="nabstime.c.html#LN885"><span class='Ref_To_Local'>tinterval</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN41"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="nabstime.c.html#LN884"><span class='Ref_To_Local'>tend</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../../include/utils/nabstime.h.html#LN63"><span class='Ref_to_Macro'>PG_RETURN_TIMEINTERVAL</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN885"><span class='Ref_To_Local'>tinterval</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end mktinterval &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 *      timepl, timemi and abstimemi use the formula 
 *              abstime + reltime = abstime 
 *      so      abstime - reltime = abstime 
 *      and     abstime - abstime = reltime 
 */ 
</span> 
<span class='Comment_Multi_Line'>/* 
 *      timepl          - returns the value of (abstime t1 + reltime t2) 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN913"></a><span class='Declare_Function'>timepl</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN915"></a>    <a href="../../../interfaces/ecpg/pgtypeslib/dt_common.c.html#LN16"><span class='Ref_to_Typedef'>AbsoluteTime</span></a> <span class='Declare_Local'>t1</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN57"><span class='Ref_to_Macro'>PG_GETARG_ABSOLUTETIME</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN916"></a>    <a href="../../../include/utils/nabstime.h.html#LN36"><span class='Ref_to_Typedef'>RelativeTime</span></a> <span class='Declare_Local'>t2</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN58"><span class='Ref_to_Macro'>PG_GETARG_RELATIVETIME</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/nabstime.h.html#LN90"><span class='Ref_to_Macro'>AbsoluteTimeIsReal</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN915"><span class='Ref_To_Local'>t1</span></a><span class='Parentheses'>)</span> <span class='Operator'>&& 
</span>        <a href="../../../include/utils/nabstime.h.html#LN94"><span class='Ref_to_Macro'>RelativeTimeIsValid</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN916"><span class='Ref_To_Local'>t2</span></a><span class='Parentheses'>)</span> <span class='Operator'>&& 
</span>        <span class='Parentheses'>((</span><a href="nabstime.c.html#LN916"><span class='Ref_To_Local'>t2</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="nabstime.c.html#LN915"><span class='Ref_To_Local'>t1</span></a> <span class='Operator'>&LT; </span><a href="../../../include/utils/nabstime.h.html#LN76"><span class='Ref_to_Const'>NOEND_ABSTIME</span></a> <span class='Operator'>- </span><a href="nabstime.c.html#LN916"><span class='Ref_To_Local'>t2</span></a><span class='Parentheses'>) </span><span class='Operator'>|| 
</span>         <span class='Parentheses'>(</span><a href="nabstime.c.html#LN916"><span class='Ref_To_Local'>t2</span></a> <span class='Operator'>&LT;= </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="nabstime.c.html#LN915"><span class='Ref_To_Local'>t1</span></a> <span class='Operator'>&GT; </span><a href="../../../include/utils/nabstime.h.html#LN77"><span class='Ref_to_Const'>NOSTART_ABSTIME</span></a> <span class='Operator'>- </span><a href="nabstime.c.html#LN916"><span class='Ref_To_Local'>t2</span></a><span class='Parentheses'>)))</span>       <span class='Comment_Single_Line'>/* prevent overflow */ 
</span>        <a href="../../../include/utils/nabstime.h.html#LN61"><span class='Ref_to_Macro'>PG_RETURN_ABSOLUTETIME</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN915"><span class='Ref_To_Local'>t1</span></a> <span class='Operator'>+ </span><a href="nabstime.c.html#LN916"><span class='Ref_To_Local'>t2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/nabstime.h.html#LN61"><span class='Ref_to_Macro'>PG_RETURN_ABSOLUTETIME</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/nabstime.h.html#LN75"><span class='Ref_to_Const'>INVALID_ABSTIME</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/* 
 *      timemi          - returns the value of (abstime t1 - reltime t2) 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN932"></a><span class='Declare_Function'>timemi</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN934"></a>    <a href="../../../interfaces/ecpg/pgtypeslib/dt_common.c.html#LN16"><span class='Ref_to_Typedef'>AbsoluteTime</span></a> <span class='Declare_Local'>t1</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN57"><span class='Ref_to_Macro'>PG_GETARG_ABSOLUTETIME</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN935"></a>    <a href="../../../include/utils/nabstime.h.html#LN36"><span class='Ref_to_Typedef'>RelativeTime</span></a> <span class='Declare_Local'>t2</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN58"><span class='Ref_to_Macro'>PG_GETARG_RELATIVETIME</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/nabstime.h.html#LN90"><span class='Ref_to_Macro'>AbsoluteTimeIsReal</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN934"><span class='Ref_To_Local'>t1</span></a><span class='Parentheses'>)</span> <span class='Operator'>&& 
</span>        <a href="../../../include/utils/nabstime.h.html#LN94"><span class='Ref_to_Macro'>RelativeTimeIsValid</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN935"><span class='Ref_To_Local'>t2</span></a><span class='Parentheses'>)</span> <span class='Operator'>&& 
</span>        <span class='Parentheses'>((</span><a href="nabstime.c.html#LN935"><span class='Ref_To_Local'>t2</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="nabstime.c.html#LN934"><span class='Ref_To_Local'>t1</span></a> <span class='Operator'>&GT; </span><a href="../../../include/utils/nabstime.h.html#LN77"><span class='Ref_to_Const'>NOSTART_ABSTIME</span></a> <span class='Operator'>+ </span><a href="nabstime.c.html#LN935"><span class='Ref_To_Local'>t2</span></a><span class='Parentheses'>) </span><span class='Operator'>|| 
</span>         <span class='Parentheses'>(</span><a href="nabstime.c.html#LN935"><span class='Ref_To_Local'>t2</span></a> <span class='Operator'>&LT;= </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="nabstime.c.html#LN934"><span class='Ref_To_Local'>t1</span></a> <span class='Operator'>&LT; </span><a href="../../../include/utils/nabstime.h.html#LN76"><span class='Ref_to_Const'>NOEND_ABSTIME</span></a> <span class='Operator'>+ </span><a href="nabstime.c.html#LN935"><span class='Ref_To_Local'>t2</span></a><span class='Parentheses'>)))</span> <span class='Comment_Single_Line'>/* prevent overflow */ 
</span>        <a href="../../../include/utils/nabstime.h.html#LN61"><span class='Ref_to_Macro'>PG_RETURN_ABSOLUTETIME</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN934"><span class='Ref_To_Local'>t1</span></a> <span class='Operator'>- </span><a href="nabstime.c.html#LN935"><span class='Ref_To_Local'>t2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/nabstime.h.html#LN61"><span class='Ref_to_Macro'>PG_RETURN_ABSOLUTETIME</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/nabstime.h.html#LN75"><span class='Ref_to_Const'>INVALID_ABSTIME</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/* 
 *      intinterval     - returns true iff absolute date is in the tinterval 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN951"></a><span class='Declare_Function'>intinterval</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN953"></a>    <a href="../../../interfaces/ecpg/pgtypeslib/dt_common.c.html#LN16"><span class='Ref_to_Typedef'>AbsoluteTime</span></a> <span class='Declare_Local'>t</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN57"><span class='Ref_to_Macro'>PG_GETARG_ABSOLUTETIME</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN954"></a>    <a href="../../../include/utils/nabstime.h.html#LN44"><span class='Ref_to_Typedef'>TimeInterval</span></a> <span class='Declare_Local'>tinterval</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN59"><span class='Ref_to_Macro'>PG_GETARG_TIMEINTERVAL</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN954"><span class='Ref_To_Local'>tinterval</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN40"><span class='Ref_to_Member'>status</span></a> <span class='Operator'>== </span><a href="nabstime.c.html#LN46"><span class='Ref_to_Const'>T_INTERVAL_VALID</span></a> <span class='Operator'>&& </span><a href="nabstime.c.html#LN953"><span class='Ref_To_Local'>t</span></a> <span class='Operator'>!= </span><a href="../../../include/utils/nabstime.h.html#LN75"><span class='Ref_to_Const'>INVALID_ABSTIME</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN398"><span class='Ref_to_Macro'>DatumGetBool</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN585"><span class='Ref_to_Macro'>DirectFunctionCall2</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN410"><span class='Ref_to_Func'>abstimege</span></a><span class='Delimiter'>, 
</span>                                             <a href="../../../include/utils/nabstime.h.html#LN53"><span class='Ref_to_Macro'>AbsoluteTimeGetDatum</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN953"><span class='Ref_To_Local'>t</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                <a href="../../../include/utils/nabstime.h.html#LN53"><span class='Ref_to_Macro'>AbsoluteTimeGetDatum</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN954"><span class='Ref_To_Local'>tinterval</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN41"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Parentheses'>)))</span> <span class='Operator'>&& 
</span>            <a href="../../../include/postgres.h.html#LN398"><span class='Ref_to_Macro'>DatumGetBool</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN585"><span class='Ref_to_Macro'>DirectFunctionCall2</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN401"><span class='Ref_to_Func'>abstimele</span></a><span class='Delimiter'>, 
</span>                                             <a href="../../../include/utils/nabstime.h.html#LN53"><span class='Ref_to_Macro'>AbsoluteTimeGetDatum</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN953"><span class='Ref_To_Local'>t</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                  <a href="../../../include/utils/nabstime.h.html#LN53"><span class='Ref_to_Macro'>AbsoluteTimeGetDatum</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN954"><span class='Ref_To_Local'>tinterval</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN41"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>))))</span> 
            <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 *      tintervalrel        - returns  relative time corresponding to tinterval 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN973"></a><span class='Declare_Function'>tintervalrel</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN975"></a>    <a href="../../../include/utils/nabstime.h.html#LN44"><span class='Ref_to_Typedef'>TimeInterval</span></a> <span class='Declare_Local'>tinterval</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN59"><span class='Ref_to_Macro'>PG_GETARG_TIMEINTERVAL</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN976"></a>    <a href="../../../interfaces/ecpg/pgtypeslib/dt_common.c.html#LN16"><span class='Ref_to_Typedef'>AbsoluteTime</span></a> <span class='Declare_Local'>t1</span> <span class='Operator'>= </span><a href="nabstime.c.html#LN975"><span class='Ref_To_Local'>tinterval</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN41"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]; 
</span><a name="LN977"></a>    <a href="../../../interfaces/ecpg/pgtypeslib/dt_common.c.html#LN16"><span class='Ref_to_Typedef'>AbsoluteTime</span></a> <span class='Declare_Local'>t2</span> <span class='Operator'>= </span><a href="nabstime.c.html#LN975"><span class='Ref_To_Local'>tinterval</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN41"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN975"><span class='Ref_To_Local'>tinterval</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN40"><span class='Ref_to_Member'>status</span></a> <span class='Operator'>!= </span><a href="nabstime.c.html#LN46"><span class='Ref_to_Const'>T_INTERVAL_VALID</span></a><span class='Parentheses'>) 
</span>        <a href="../../../include/utils/nabstime.h.html#LN62"><span class='Ref_to_Macro'>PG_RETURN_RELATIVETIME</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/nabstime.h.html#LN79"><span class='Ref_to_Const'>INVALID_RELTIME</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/nabstime.h.html#LN90"><span class='Ref_to_Macro'>AbsoluteTimeIsReal</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN976"><span class='Ref_To_Local'>t1</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>        <a href="../../../include/utils/nabstime.h.html#LN90"><span class='Ref_to_Macro'>AbsoluteTimeIsReal</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN977"><span class='Ref_To_Local'>t2</span></a><span class='Parentheses'>))</span> 
        <a href="../../../include/utils/nabstime.h.html#LN62"><span class='Ref_to_Macro'>PG_RETURN_RELATIVETIME</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN977"><span class='Ref_To_Local'>t2</span></a> <span class='Operator'>- </span><a href="nabstime.c.html#LN976"><span class='Ref_To_Local'>t1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/nabstime.h.html#LN62"><span class='Ref_to_Macro'>PG_RETURN_RELATIVETIME</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/nabstime.h.html#LN79"><span class='Ref_to_Const'>INVALID_RELTIME</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/* 
 *      timenow         - returns  time "now", internal format 
 * 
 *      Now AbsoluteTime is time since Jan 1 1970 -mer 7 Feb 1992 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN996"></a><span class='Declare_Function'>timenow</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <a href="../../../include/utils/nabstime.h.html#LN61"><span class='Ref_to_Macro'>PG_RETURN_ABSOLUTETIME</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN87"><span class='Ref_to_Func'>GetCurrentAbsoluteTime</span></a><span class='Parentheses'>())</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * reltime comparison routines 
 */ 
</span><span class='Keyword'>static int 
</span><a name="LN1005"></a><span class='Declare_Function'>reltime_cmp_internal</span><span class='Parentheses'>(</span><a href="../../../include/utils/nabstime.h.html#LN36"><span class='Ref_to_Typedef'>RelativeTime</span></a> <span class='Declare_Parameter'>a</span><span class='Delimiter'>, </span><a href="../../../include/utils/nabstime.h.html#LN36"><span class='Ref_to_Typedef'>RelativeTime</span></a> <span class='Declare_Parameter'>b</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Comment_Multi_Line'>/* 
     * We consider all INVALIDs to be equal and larger than any non-INVALID. 
     * This is somewhat arbitrary; the important thing is to have a consistent 
     * sort order. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN1005"><span class='Ref_to_Parameter'>a</span></a> <span class='Operator'>== </span><a href="../../../include/utils/nabstime.h.html#LN79"><span class='Ref_to_Const'>INVALID_RELTIME</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN1005"><span class='Ref_to_Parameter'>b</span></a> <span class='Operator'>== </span><a href="../../../include/utils/nabstime.h.html#LN79"><span class='Ref_to_Const'>INVALID_RELTIME</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>;</span>           <span class='Comment_Single_Line'>/* INVALID = INVALID */ 
</span>        <span class='Control'>else</span> 
            <span class='Control'>return</span> <span class='Number'>1</span><span class='Delimiter'>;</span>           <span class='Comment_Single_Line'>/* INVALID &GT; non-INVALID */ 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN1005"><span class='Ref_to_Parameter'>b</span></a> <span class='Operator'>== </span><a href="../../../include/utils/nabstime.h.html#LN79"><span class='Ref_to_Const'>INVALID_RELTIME</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>;</span>              <span class='Comment_Single_Line'>/* non-INVALID &LT; INVALID */ 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN1005"><span class='Ref_to_Parameter'>a</span></a> <span class='Operator'>&GT; </span><a href="nabstime.c.html#LN1005"><span class='Ref_to_Parameter'>b</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN1005"><span class='Ref_to_Parameter'>a</span></a> <span class='Operator'>== </span><a href="nabstime.c.html#LN1005"><span class='Ref_to_Parameter'>b</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end reltime_cmp_internal &raquo; </span> 
 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1032"></a><span class='Declare_Function'>reltimeeq</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1034"></a>    <a href="../../../include/utils/nabstime.h.html#LN36"><span class='Ref_to_Typedef'>RelativeTime</span></a> <span class='Declare_Local'>t1</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN58"><span class='Ref_to_Macro'>PG_GETARG_RELATIVETIME</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1035"></a>    <a href="../../../include/utils/nabstime.h.html#LN36"><span class='Ref_to_Typedef'>RelativeTime</span></a> <span class='Declare_Local'>t2</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN58"><span class='Ref_to_Macro'>PG_GETARG_RELATIVETIME</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1004"><span class='Ref_to_Func'>reltime_cmp_internal</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1034"><span class='Ref_To_Local'>t1</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN1035"><span class='Ref_To_Local'>t2</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1041"></a><span class='Declare_Function'>reltimene</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1043"></a>    <a href="../../../include/utils/nabstime.h.html#LN36"><span class='Ref_to_Typedef'>RelativeTime</span></a> <span class='Declare_Local'>t1</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN58"><span class='Ref_to_Macro'>PG_GETARG_RELATIVETIME</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1044"></a>    <a href="../../../include/utils/nabstime.h.html#LN36"><span class='Ref_to_Typedef'>RelativeTime</span></a> <span class='Declare_Local'>t2</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN58"><span class='Ref_to_Macro'>PG_GETARG_RELATIVETIME</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1004"><span class='Ref_to_Func'>reltime_cmp_internal</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1043"><span class='Ref_To_Local'>t1</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN1044"><span class='Ref_To_Local'>t2</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1050"></a><span class='Declare_Function'>reltimelt</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1052"></a>    <a href="../../../include/utils/nabstime.h.html#LN36"><span class='Ref_to_Typedef'>RelativeTime</span></a> <span class='Declare_Local'>t1</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN58"><span class='Ref_to_Macro'>PG_GETARG_RELATIVETIME</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1053"></a>    <a href="../../../include/utils/nabstime.h.html#LN36"><span class='Ref_to_Typedef'>RelativeTime</span></a> <span class='Declare_Local'>t2</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN58"><span class='Ref_to_Macro'>PG_GETARG_RELATIVETIME</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1004"><span class='Ref_to_Func'>reltime_cmp_internal</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1052"><span class='Ref_To_Local'>t1</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN1053"><span class='Ref_To_Local'>t2</span></a><span class='Parentheses'>) </span><span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1059"></a><span class='Declare_Function'>reltimegt</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1061"></a>    <a href="../../../include/utils/nabstime.h.html#LN36"><span class='Ref_to_Typedef'>RelativeTime</span></a> <span class='Declare_Local'>t1</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN58"><span class='Ref_to_Macro'>PG_GETARG_RELATIVETIME</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1062"></a>    <a href="../../../include/utils/nabstime.h.html#LN36"><span class='Ref_to_Typedef'>RelativeTime</span></a> <span class='Declare_Local'>t2</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN58"><span class='Ref_to_Macro'>PG_GETARG_RELATIVETIME</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1004"><span class='Ref_to_Func'>reltime_cmp_internal</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1061"><span class='Ref_To_Local'>t1</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN1062"><span class='Ref_To_Local'>t2</span></a><span class='Parentheses'>) </span><span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1068"></a><span class='Declare_Function'>reltimele</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1070"></a>    <a href="../../../include/utils/nabstime.h.html#LN36"><span class='Ref_to_Typedef'>RelativeTime</span></a> <span class='Declare_Local'>t1</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN58"><span class='Ref_to_Macro'>PG_GETARG_RELATIVETIME</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1071"></a>    <a href="../../../include/utils/nabstime.h.html#LN36"><span class='Ref_to_Typedef'>RelativeTime</span></a> <span class='Declare_Local'>t2</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN58"><span class='Ref_to_Macro'>PG_GETARG_RELATIVETIME</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1004"><span class='Ref_to_Func'>reltime_cmp_internal</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1070"><span class='Ref_To_Local'>t1</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN1071"><span class='Ref_To_Local'>t2</span></a><span class='Parentheses'>) </span><span class='Operator'>&LT;= </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1077"></a><span class='Declare_Function'>reltimege</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1079"></a>    <a href="../../../include/utils/nabstime.h.html#LN36"><span class='Ref_to_Typedef'>RelativeTime</span></a> <span class='Declare_Local'>t1</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN58"><span class='Ref_to_Macro'>PG_GETARG_RELATIVETIME</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1080"></a>    <a href="../../../include/utils/nabstime.h.html#LN36"><span class='Ref_to_Typedef'>RelativeTime</span></a> <span class='Declare_Local'>t2</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN58"><span class='Ref_to_Macro'>PG_GETARG_RELATIVETIME</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1004"><span class='Ref_to_Func'>reltime_cmp_internal</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1079"><span class='Ref_To_Local'>t1</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN1080"><span class='Ref_To_Local'>t2</span></a><span class='Parentheses'>) </span><span class='Operator'>&GT;= </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1086"></a><span class='Declare_Function'>btreltimecmp</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1088"></a>    <a href="../../../include/utils/nabstime.h.html#LN36"><span class='Ref_to_Typedef'>RelativeTime</span></a> <span class='Declare_Local'>t1</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN58"><span class='Ref_to_Macro'>PG_GETARG_RELATIVETIME</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1089"></a>    <a href="../../../include/utils/nabstime.h.html#LN36"><span class='Ref_to_Typedef'>RelativeTime</span></a> <span class='Declare_Local'>t2</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN58"><span class='Ref_to_Macro'>PG_GETARG_RELATIVETIME</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN313"><span class='Ref_to_Macro'>PG_RETURN_INT32</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1004"><span class='Ref_to_Func'>reltime_cmp_internal</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1088"><span class='Ref_To_Local'>t1</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN1089"><span class='Ref_To_Local'>t2</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/* 
 *      tintervalsame   - returns true iff tinterval i1 is same as tinterval i2 
 *      Check begin and end time. 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1100"></a><span class='Declare_Function'>tintervalsame</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1102"></a>    <a href="../../../include/utils/nabstime.h.html#LN44"><span class='Ref_to_Typedef'>TimeInterval</span></a> <span class='Declare_Local'>i1</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN59"><span class='Ref_to_Macro'>PG_GETARG_TIMEINTERVAL</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1103"></a>    <a href="../../../include/utils/nabstime.h.html#LN44"><span class='Ref_to_Typedef'>TimeInterval</span></a> <span class='Declare_Local'>i2</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN59"><span class='Ref_to_Macro'>PG_GETARG_TIMEINTERVAL</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN1102"><span class='Ref_To_Local'>i1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN40"><span class='Ref_to_Member'>status</span></a> <span class='Operator'>== </span><a href="nabstime.c.html#LN45"><span class='Ref_to_Const'>T_INTERVAL_INVAL</span></a> <span class='Operator'>|| </span><a href="nabstime.c.html#LN1103"><span class='Ref_To_Local'>i2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN40"><span class='Ref_to_Member'>status</span></a> <span class='Operator'>== </span><a href="nabstime.c.html#LN45"><span class='Ref_to_Const'>T_INTERVAL_INVAL</span></a><span class='Parentheses'>) 
</span>        <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN398"><span class='Ref_to_Macro'>DatumGetBool</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN585"><span class='Ref_to_Macro'>DirectFunctionCall2</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN365"><span class='Ref_to_Func'>abstimeeq</span></a><span class='Delimiter'>, 
</span>                                         <a href="../../../include/utils/nabstime.h.html#LN53"><span class='Ref_to_Macro'>AbsoluteTimeGetDatum</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1102"><span class='Ref_To_Local'>i1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN41"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                       <a href="../../../include/utils/nabstime.h.html#LN53"><span class='Ref_to_Macro'>AbsoluteTimeGetDatum</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1103"><span class='Ref_To_Local'>i2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN41"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Parentheses'>)))</span> <span class='Operator'>&& 
</span>        <a href="../../../include/postgres.h.html#LN398"><span class='Ref_to_Macro'>DatumGetBool</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN585"><span class='Ref_to_Macro'>DirectFunctionCall2</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN365"><span class='Ref_to_Func'>abstimeeq</span></a><span class='Delimiter'>, 
</span>                                         <a href="../../../include/utils/nabstime.h.html#LN53"><span class='Ref_to_Macro'>AbsoluteTimeGetDatum</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1102"><span class='Ref_To_Local'>i1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN41"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                         <a href="../../../include/utils/nabstime.h.html#LN53"><span class='Ref_to_Macro'>AbsoluteTimeGetDatum</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1103"><span class='Ref_To_Local'>i2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN41"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>))))</span> 
        <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * tinterval comparison routines 
 * 
 * Note: comparison is based only on the lengths of the tintervals, not on 
 * endpoint values (as long as they're not INVALID).  This is pretty bogus, 
 * but since it's only a legacy datatype, we're not going to change it. 
 * 
 * Some other bogus things that won't be changed for compatibility reasons: 
 * 1. The interval length computations overflow at 2^31 seconds, causing 
 * intervals longer than that to sort oddly compared to those shorter. 
 * 2. infinity and minus infinity (NOEND_ABSTIME and NOSTART_ABSTIME) are 
 * just ordinary integers.  Since this code doesn't handle them specially, 
 * it's possible for [a b] to be considered longer than [c infinity] for 
 * finite abstimes a, b, c.  In combination with the previous point, the 
 * interval [-infinity infinity] is treated as being shorter than many finite 
 * intervals :-( 
 * 
 * If tinterval is ever reimplemented atop timestamp, it'd be good to give 
 * some consideration to avoiding these problems. 
 */ 
</span><span class='Keyword'>static int 
</span><a name="LN1139"></a><span class='Declare_Function'>tinterval_cmp_internal</span><span class='Parentheses'>(</span><a href="../../../include/utils/nabstime.h.html#LN44"><span class='Ref_to_Typedef'>TimeInterval</span></a> <span class='Declare_Parameter'>a</span><span class='Delimiter'>, </span><a href="../../../include/utils/nabstime.h.html#LN44"><span class='Ref_to_Typedef'>TimeInterval</span></a> <span class='Declare_Parameter'>b</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1141"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>a_invalid</span><span class='Delimiter'>; 
</span><a name="LN1142"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>b_invalid</span><span class='Delimiter'>; 
</span><a name="LN1143"></a>    <a href="../../../interfaces/ecpg/pgtypeslib/dt_common.c.html#LN16"><span class='Ref_to_Typedef'>AbsoluteTime</span></a> <span class='Declare_Local'>a_len</span><span class='Delimiter'>; 
</span><a name="LN1144"></a>    <a href="../../../interfaces/ecpg/pgtypeslib/dt_common.c.html#LN16"><span class='Ref_to_Typedef'>AbsoluteTime</span></a> <span class='Declare_Local'>b_len</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * We consider all INVALIDs to be equal and larger than any non-INVALID. 
     * This is somewhat arbitrary; the important thing is to have a consistent 
     * sort order. 
     */ 
</span>    <a href="nabstime.c.html#LN1141"><span class='Ref_To_Local'>a_invalid</span></a> <span class='Operator'>= </span><a href="nabstime.c.html#LN1139"><span class='Ref_to_Parameter'>a</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN40"><span class='Ref_to_Member'>status</span></a> <span class='Operator'>== </span><a href="nabstime.c.html#LN45"><span class='Ref_to_Const'>T_INTERVAL_INVAL</span></a> <span class='Operator'>|| 
</span>        <a href="nabstime.c.html#LN1139"><span class='Ref_to_Parameter'>a</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN41"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>== </span><a href="../../../include/utils/nabstime.h.html#LN75"><span class='Ref_to_Const'>INVALID_ABSTIME</span></a> <span class='Operator'>|| 
</span>        <a href="nabstime.c.html#LN1139"><span class='Ref_to_Parameter'>a</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN41"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>== </span><a href="../../../include/utils/nabstime.h.html#LN75"><span class='Ref_to_Const'>INVALID_ABSTIME</span></a><span class='Delimiter'>; 
</span>    <a href="nabstime.c.html#LN1142"><span class='Ref_To_Local'>b_invalid</span></a> <span class='Operator'>= </span><a href="nabstime.c.html#LN1139"><span class='Ref_to_Parameter'>b</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN40"><span class='Ref_to_Member'>status</span></a> <span class='Operator'>== </span><a href="nabstime.c.html#LN45"><span class='Ref_to_Const'>T_INTERVAL_INVAL</span></a> <span class='Operator'>|| 
</span>        <a href="nabstime.c.html#LN1139"><span class='Ref_to_Parameter'>b</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN41"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>== </span><a href="../../../include/utils/nabstime.h.html#LN75"><span class='Ref_to_Const'>INVALID_ABSTIME</span></a> <span class='Operator'>|| 
</span>        <a href="nabstime.c.html#LN1139"><span class='Ref_to_Parameter'>b</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN41"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>== </span><a href="../../../include/utils/nabstime.h.html#LN75"><span class='Ref_to_Const'>INVALID_ABSTIME</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN1141"><span class='Ref_To_Local'>a_invalid</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN1142"><span class='Ref_To_Local'>b_invalid</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>;</span>           <span class='Comment_Single_Line'>/* INVALID = INVALID */ 
</span>        <span class='Control'>else</span> 
            <span class='Control'>return</span> <span class='Number'>1</span><span class='Delimiter'>;</span>           <span class='Comment_Single_Line'>/* INVALID &GT; non-INVALID */ 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN1142"><span class='Ref_To_Local'>b_invalid</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>;</span>              <span class='Comment_Single_Line'>/* non-INVALID &LT; INVALID */ 
</span> 
    <a href="nabstime.c.html#LN1143"><span class='Ref_To_Local'>a_len</span></a> <span class='Operator'>= </span><a href="nabstime.c.html#LN1139"><span class='Ref_to_Parameter'>a</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN41"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>- </span><a href="nabstime.c.html#LN1139"><span class='Ref_to_Parameter'>a</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN41"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]; 
</span>    <a href="nabstime.c.html#LN1144"><span class='Ref_To_Local'>b_len</span></a> <span class='Operator'>= </span><a href="nabstime.c.html#LN1139"><span class='Ref_to_Parameter'>b</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN41"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>- </span><a href="nabstime.c.html#LN1139"><span class='Ref_to_Parameter'>b</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN41"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN1143"><span class='Ref_To_Local'>a_len</span></a> <span class='Operator'>&GT; </span><a href="nabstime.c.html#LN1144"><span class='Ref_To_Local'>b_len</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN1143"><span class='Ref_To_Local'>a_len</span></a> <span class='Operator'>== </span><a href="nabstime.c.html#LN1144"><span class='Ref_To_Local'>b_len</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end tinterval_cmp_internal &raquo; </span> 
 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1181"></a><span class='Declare_Function'>tintervaleq</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1183"></a>    <a href="../../../include/utils/nabstime.h.html#LN44"><span class='Ref_to_Typedef'>TimeInterval</span></a> <span class='Declare_Local'>i1</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN59"><span class='Ref_to_Macro'>PG_GETARG_TIMEINTERVAL</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1184"></a>    <a href="../../../include/utils/nabstime.h.html#LN44"><span class='Ref_to_Typedef'>TimeInterval</span></a> <span class='Declare_Local'>i2</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN59"><span class='Ref_to_Macro'>PG_GETARG_TIMEINTERVAL</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1138"><span class='Ref_to_Func'>tinterval_cmp_internal</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1183"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN1184"><span class='Ref_To_Local'>i2</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1190"></a><span class='Declare_Function'>tintervalne</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1192"></a>    <a href="../../../include/utils/nabstime.h.html#LN44"><span class='Ref_to_Typedef'>TimeInterval</span></a> <span class='Declare_Local'>i1</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN59"><span class='Ref_to_Macro'>PG_GETARG_TIMEINTERVAL</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1193"></a>    <a href="../../../include/utils/nabstime.h.html#LN44"><span class='Ref_to_Typedef'>TimeInterval</span></a> <span class='Declare_Local'>i2</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN59"><span class='Ref_to_Macro'>PG_GETARG_TIMEINTERVAL</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1138"><span class='Ref_to_Func'>tinterval_cmp_internal</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1192"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN1193"><span class='Ref_To_Local'>i2</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1199"></a><span class='Declare_Function'>tintervallt</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1201"></a>    <a href="../../../include/utils/nabstime.h.html#LN44"><span class='Ref_to_Typedef'>TimeInterval</span></a> <span class='Declare_Local'>i1</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN59"><span class='Ref_to_Macro'>PG_GETARG_TIMEINTERVAL</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1202"></a>    <a href="../../../include/utils/nabstime.h.html#LN44"><span class='Ref_to_Typedef'>TimeInterval</span></a> <span class='Declare_Local'>i2</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN59"><span class='Ref_to_Macro'>PG_GETARG_TIMEINTERVAL</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1138"><span class='Ref_to_Func'>tinterval_cmp_internal</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1201"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN1202"><span class='Ref_To_Local'>i2</span></a><span class='Parentheses'>) </span><span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1208"></a><span class='Declare_Function'>tintervalle</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1210"></a>    <a href="../../../include/utils/nabstime.h.html#LN44"><span class='Ref_to_Typedef'>TimeInterval</span></a> <span class='Declare_Local'>i1</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN59"><span class='Ref_to_Macro'>PG_GETARG_TIMEINTERVAL</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1211"></a>    <a href="../../../include/utils/nabstime.h.html#LN44"><span class='Ref_to_Typedef'>TimeInterval</span></a> <span class='Declare_Local'>i2</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN59"><span class='Ref_to_Macro'>PG_GETARG_TIMEINTERVAL</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1138"><span class='Ref_to_Func'>tinterval_cmp_internal</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1210"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN1211"><span class='Ref_To_Local'>i2</span></a><span class='Parentheses'>) </span><span class='Operator'>&LT;= </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1217"></a><span class='Declare_Function'>tintervalgt</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1219"></a>    <a href="../../../include/utils/nabstime.h.html#LN44"><span class='Ref_to_Typedef'>TimeInterval</span></a> <span class='Declare_Local'>i1</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN59"><span class='Ref_to_Macro'>PG_GETARG_TIMEINTERVAL</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1220"></a>    <a href="../../../include/utils/nabstime.h.html#LN44"><span class='Ref_to_Typedef'>TimeInterval</span></a> <span class='Declare_Local'>i2</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN59"><span class='Ref_to_Macro'>PG_GETARG_TIMEINTERVAL</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1138"><span class='Ref_to_Func'>tinterval_cmp_internal</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1219"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN1220"><span class='Ref_To_Local'>i2</span></a><span class='Parentheses'>) </span><span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1226"></a><span class='Declare_Function'>tintervalge</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1228"></a>    <a href="../../../include/utils/nabstime.h.html#LN44"><span class='Ref_to_Typedef'>TimeInterval</span></a> <span class='Declare_Local'>i1</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN59"><span class='Ref_to_Macro'>PG_GETARG_TIMEINTERVAL</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1229"></a>    <a href="../../../include/utils/nabstime.h.html#LN44"><span class='Ref_to_Typedef'>TimeInterval</span></a> <span class='Declare_Local'>i2</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN59"><span class='Ref_to_Macro'>PG_GETARG_TIMEINTERVAL</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1138"><span class='Ref_to_Func'>tinterval_cmp_internal</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1228"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN1229"><span class='Ref_To_Local'>i2</span></a><span class='Parentheses'>) </span><span class='Operator'>&GT;= </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1235"></a><span class='Declare_Function'>bttintervalcmp</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1237"></a>    <a href="../../../include/utils/nabstime.h.html#LN44"><span class='Ref_to_Typedef'>TimeInterval</span></a> <span class='Declare_Local'>i1</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN59"><span class='Ref_to_Macro'>PG_GETARG_TIMEINTERVAL</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1238"></a>    <a href="../../../include/utils/nabstime.h.html#LN44"><span class='Ref_to_Typedef'>TimeInterval</span></a> <span class='Declare_Local'>i2</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN59"><span class='Ref_to_Macro'>PG_GETARG_TIMEINTERVAL</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN313"><span class='Ref_to_Macro'>PG_RETURN_INT32</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1138"><span class='Ref_to_Func'>tinterval_cmp_internal</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1237"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN1238"><span class='Ref_To_Local'>i2</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/* 
 *      tintervalleneq  - returns true iff length of tinterval i is equal to 
 *                              reltime t 
 *      tintervallenne  - returns true iff length of tinterval i is not equal 
 *                              to reltime t 
 *      tintervallenlt  - returns true iff length of tinterval i is less than 
 *                              reltime t 
 *      tintervallengt  - returns true iff length of tinterval i is greater 
 *                              than reltime t 
 *      tintervallenle  - returns true iff length of tinterval i is less or 
 *                              equal than reltime t 
 *      tintervallenge  - returns true iff length of tinterval i is greater or 
 *                              equal than reltime t 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1259"></a><span class='Declare_Function'>tintervalleneq</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1261"></a>    <a href="../../../include/utils/nabstime.h.html#LN44"><span class='Ref_to_Typedef'>TimeInterval</span></a> <span class='Declare_Local'>i</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN59"><span class='Ref_to_Macro'>PG_GETARG_TIMEINTERVAL</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1262"></a>    <a href="../../../include/utils/nabstime.h.html#LN36"><span class='Ref_to_Typedef'>RelativeTime</span></a> <span class='Declare_Local'>t</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN58"><span class='Ref_to_Macro'>PG_GETARG_RELATIVETIME</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1263"></a>    <a href="../../../include/utils/nabstime.h.html#LN36"><span class='Ref_to_Typedef'>RelativeTime</span></a> <span class='Declare_Local'>rt</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN1261"><span class='Ref_To_Local'>i</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN40"><span class='Ref_to_Member'>status</span></a> <span class='Operator'>== </span><a href="nabstime.c.html#LN45"><span class='Ref_to_Const'>T_INTERVAL_INVAL</span></a> <span class='Operator'>|| </span><a href="nabstime.c.html#LN1262"><span class='Ref_To_Local'>t</span></a> <span class='Operator'>== </span><a href="../../../include/utils/nabstime.h.html#LN79"><span class='Ref_to_Const'>INVALID_RELTIME</span></a><span class='Parentheses'>) 
</span>        <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="nabstime.c.html#LN1263"><span class='Ref_To_Local'>rt</span></a> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN50"><span class='Ref_to_Macro'>DatumGetRelativeTime</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN583"><span class='Ref_to_Macro'>DirectFunctionCall1</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN972"><span class='Ref_to_Func'>tintervalrel</span></a><span class='Delimiter'>, 
</span>                                                  <a href="../../../include/utils/nabstime.h.html#LN55"><span class='Ref_to_Macro'>TimeIntervalGetDatum</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1261"><span class='Ref_To_Local'>i</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1263"><span class='Ref_To_Local'>rt</span></a> <span class='Operator'>!= </span><a href="../../../include/utils/nabstime.h.html#LN79"><span class='Ref_to_Const'>INVALID_RELTIME</span></a> <span class='Operator'>&& </span><a href="nabstime.c.html#LN1263"><span class='Ref_To_Local'>rt</span></a> <span class='Operator'>== </span><a href="nabstime.c.html#LN1262"><span class='Ref_To_Local'>t</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1273"></a><span class='Declare_Function'>tintervallenne</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1275"></a>    <a href="../../../include/utils/nabstime.h.html#LN44"><span class='Ref_to_Typedef'>TimeInterval</span></a> <span class='Declare_Local'>i</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN59"><span class='Ref_to_Macro'>PG_GETARG_TIMEINTERVAL</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1276"></a>    <a href="../../../include/utils/nabstime.h.html#LN36"><span class='Ref_to_Typedef'>RelativeTime</span></a> <span class='Declare_Local'>t</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN58"><span class='Ref_to_Macro'>PG_GETARG_RELATIVETIME</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1277"></a>    <a href="../../../include/utils/nabstime.h.html#LN36"><span class='Ref_to_Typedef'>RelativeTime</span></a> <span class='Declare_Local'>rt</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN1275"><span class='Ref_To_Local'>i</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN40"><span class='Ref_to_Member'>status</span></a> <span class='Operator'>== </span><a href="nabstime.c.html#LN45"><span class='Ref_to_Const'>T_INTERVAL_INVAL</span></a> <span class='Operator'>|| </span><a href="nabstime.c.html#LN1276"><span class='Ref_To_Local'>t</span></a> <span class='Operator'>== </span><a href="../../../include/utils/nabstime.h.html#LN79"><span class='Ref_to_Const'>INVALID_RELTIME</span></a><span class='Parentheses'>) 
</span>        <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="nabstime.c.html#LN1277"><span class='Ref_To_Local'>rt</span></a> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN50"><span class='Ref_to_Macro'>DatumGetRelativeTime</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN583"><span class='Ref_to_Macro'>DirectFunctionCall1</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN972"><span class='Ref_to_Func'>tintervalrel</span></a><span class='Delimiter'>, 
</span>                                                  <a href="../../../include/utils/nabstime.h.html#LN55"><span class='Ref_to_Macro'>TimeIntervalGetDatum</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1275"><span class='Ref_To_Local'>i</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1277"><span class='Ref_To_Local'>rt</span></a> <span class='Operator'>!= </span><a href="../../../include/utils/nabstime.h.html#LN79"><span class='Ref_to_Const'>INVALID_RELTIME</span></a> <span class='Operator'>&& </span><a href="nabstime.c.html#LN1277"><span class='Ref_To_Local'>rt</span></a> <span class='Operator'>!= </span><a href="nabstime.c.html#LN1276"><span class='Ref_To_Local'>t</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1287"></a><span class='Declare_Function'>tintervallenlt</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1289"></a>    <a href="../../../include/utils/nabstime.h.html#LN44"><span class='Ref_to_Typedef'>TimeInterval</span></a> <span class='Declare_Local'>i</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN59"><span class='Ref_to_Macro'>PG_GETARG_TIMEINTERVAL</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1290"></a>    <a href="../../../include/utils/nabstime.h.html#LN36"><span class='Ref_to_Typedef'>RelativeTime</span></a> <span class='Declare_Local'>t</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN58"><span class='Ref_to_Macro'>PG_GETARG_RELATIVETIME</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1291"></a>    <a href="../../../include/utils/nabstime.h.html#LN36"><span class='Ref_to_Typedef'>RelativeTime</span></a> <span class='Declare_Local'>rt</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN1289"><span class='Ref_To_Local'>i</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN40"><span class='Ref_to_Member'>status</span></a> <span class='Operator'>== </span><a href="nabstime.c.html#LN45"><span class='Ref_to_Const'>T_INTERVAL_INVAL</span></a> <span class='Operator'>|| </span><a href="nabstime.c.html#LN1290"><span class='Ref_To_Local'>t</span></a> <span class='Operator'>== </span><a href="../../../include/utils/nabstime.h.html#LN79"><span class='Ref_to_Const'>INVALID_RELTIME</span></a><span class='Parentheses'>) 
</span>        <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="nabstime.c.html#LN1291"><span class='Ref_To_Local'>rt</span></a> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN50"><span class='Ref_to_Macro'>DatumGetRelativeTime</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN583"><span class='Ref_to_Macro'>DirectFunctionCall1</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN972"><span class='Ref_to_Func'>tintervalrel</span></a><span class='Delimiter'>, 
</span>                                                  <a href="../../../include/utils/nabstime.h.html#LN55"><span class='Ref_to_Macro'>TimeIntervalGetDatum</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1289"><span class='Ref_To_Local'>i</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1291"><span class='Ref_To_Local'>rt</span></a> <span class='Operator'>!= </span><a href="../../../include/utils/nabstime.h.html#LN79"><span class='Ref_to_Const'>INVALID_RELTIME</span></a> <span class='Operator'>&& </span><a href="nabstime.c.html#LN1291"><span class='Ref_To_Local'>rt</span></a> <span class='Operator'>&LT; </span><a href="nabstime.c.html#LN1290"><span class='Ref_To_Local'>t</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1301"></a><span class='Declare_Function'>tintervallengt</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1303"></a>    <a href="../../../include/utils/nabstime.h.html#LN44"><span class='Ref_to_Typedef'>TimeInterval</span></a> <span class='Declare_Local'>i</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN59"><span class='Ref_to_Macro'>PG_GETARG_TIMEINTERVAL</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1304"></a>    <a href="../../../include/utils/nabstime.h.html#LN36"><span class='Ref_to_Typedef'>RelativeTime</span></a> <span class='Declare_Local'>t</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN58"><span class='Ref_to_Macro'>PG_GETARG_RELATIVETIME</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1305"></a>    <a href="../../../include/utils/nabstime.h.html#LN36"><span class='Ref_to_Typedef'>RelativeTime</span></a> <span class='Declare_Local'>rt</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN1303"><span class='Ref_To_Local'>i</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN40"><span class='Ref_to_Member'>status</span></a> <span class='Operator'>== </span><a href="nabstime.c.html#LN45"><span class='Ref_to_Const'>T_INTERVAL_INVAL</span></a> <span class='Operator'>|| </span><a href="nabstime.c.html#LN1304"><span class='Ref_To_Local'>t</span></a> <span class='Operator'>== </span><a href="../../../include/utils/nabstime.h.html#LN79"><span class='Ref_to_Const'>INVALID_RELTIME</span></a><span class='Parentheses'>) 
</span>        <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="nabstime.c.html#LN1305"><span class='Ref_To_Local'>rt</span></a> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN50"><span class='Ref_to_Macro'>DatumGetRelativeTime</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN583"><span class='Ref_to_Macro'>DirectFunctionCall1</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN972"><span class='Ref_to_Func'>tintervalrel</span></a><span class='Delimiter'>, 
</span>                                                  <a href="../../../include/utils/nabstime.h.html#LN55"><span class='Ref_to_Macro'>TimeIntervalGetDatum</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1303"><span class='Ref_To_Local'>i</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1305"><span class='Ref_To_Local'>rt</span></a> <span class='Operator'>!= </span><a href="../../../include/utils/nabstime.h.html#LN79"><span class='Ref_to_Const'>INVALID_RELTIME</span></a> <span class='Operator'>&& </span><a href="nabstime.c.html#LN1305"><span class='Ref_To_Local'>rt</span></a> <span class='Operator'>&GT; </span><a href="nabstime.c.html#LN1304"><span class='Ref_To_Local'>t</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1315"></a><span class='Declare_Function'>tintervallenle</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1317"></a>    <a href="../../../include/utils/nabstime.h.html#LN44"><span class='Ref_to_Typedef'>TimeInterval</span></a> <span class='Declare_Local'>i</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN59"><span class='Ref_to_Macro'>PG_GETARG_TIMEINTERVAL</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1318"></a>    <a href="../../../include/utils/nabstime.h.html#LN36"><span class='Ref_to_Typedef'>RelativeTime</span></a> <span class='Declare_Local'>t</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN58"><span class='Ref_to_Macro'>PG_GETARG_RELATIVETIME</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1319"></a>    <a href="../../../include/utils/nabstime.h.html#LN36"><span class='Ref_to_Typedef'>RelativeTime</span></a> <span class='Declare_Local'>rt</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN1317"><span class='Ref_To_Local'>i</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN40"><span class='Ref_to_Member'>status</span></a> <span class='Operator'>== </span><a href="nabstime.c.html#LN45"><span class='Ref_to_Const'>T_INTERVAL_INVAL</span></a> <span class='Operator'>|| </span><a href="nabstime.c.html#LN1318"><span class='Ref_To_Local'>t</span></a> <span class='Operator'>== </span><a href="../../../include/utils/nabstime.h.html#LN79"><span class='Ref_to_Const'>INVALID_RELTIME</span></a><span class='Parentheses'>) 
</span>        <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="nabstime.c.html#LN1319"><span class='Ref_To_Local'>rt</span></a> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN50"><span class='Ref_to_Macro'>DatumGetRelativeTime</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN583"><span class='Ref_to_Macro'>DirectFunctionCall1</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN972"><span class='Ref_to_Func'>tintervalrel</span></a><span class='Delimiter'>, 
</span>                                                  <a href="../../../include/utils/nabstime.h.html#LN55"><span class='Ref_to_Macro'>TimeIntervalGetDatum</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1317"><span class='Ref_To_Local'>i</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1319"><span class='Ref_To_Local'>rt</span></a> <span class='Operator'>!= </span><a href="../../../include/utils/nabstime.h.html#LN79"><span class='Ref_to_Const'>INVALID_RELTIME</span></a> <span class='Operator'>&& </span><a href="nabstime.c.html#LN1319"><span class='Ref_To_Local'>rt</span></a> <span class='Operator'>&LT;= </span><a href="nabstime.c.html#LN1318"><span class='Ref_To_Local'>t</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1329"></a><span class='Declare_Function'>tintervallenge</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1331"></a>    <a href="../../../include/utils/nabstime.h.html#LN44"><span class='Ref_to_Typedef'>TimeInterval</span></a> <span class='Declare_Local'>i</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN59"><span class='Ref_to_Macro'>PG_GETARG_TIMEINTERVAL</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1332"></a>    <a href="../../../include/utils/nabstime.h.html#LN36"><span class='Ref_to_Typedef'>RelativeTime</span></a> <span class='Declare_Local'>t</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN58"><span class='Ref_to_Macro'>PG_GETARG_RELATIVETIME</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1333"></a>    <a href="../../../include/utils/nabstime.h.html#LN36"><span class='Ref_to_Typedef'>RelativeTime</span></a> <span class='Declare_Local'>rt</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN1331"><span class='Ref_To_Local'>i</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN40"><span class='Ref_to_Member'>status</span></a> <span class='Operator'>== </span><a href="nabstime.c.html#LN45"><span class='Ref_to_Const'>T_INTERVAL_INVAL</span></a> <span class='Operator'>|| </span><a href="nabstime.c.html#LN1332"><span class='Ref_To_Local'>t</span></a> <span class='Operator'>== </span><a href="../../../include/utils/nabstime.h.html#LN79"><span class='Ref_to_Const'>INVALID_RELTIME</span></a><span class='Parentheses'>) 
</span>        <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="nabstime.c.html#LN1333"><span class='Ref_To_Local'>rt</span></a> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN50"><span class='Ref_to_Macro'>DatumGetRelativeTime</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN583"><span class='Ref_to_Macro'>DirectFunctionCall1</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN972"><span class='Ref_to_Func'>tintervalrel</span></a><span class='Delimiter'>, 
</span>                                                  <a href="../../../include/utils/nabstime.h.html#LN55"><span class='Ref_to_Macro'>TimeIntervalGetDatum</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1331"><span class='Ref_To_Local'>i</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1333"><span class='Ref_To_Local'>rt</span></a> <span class='Operator'>!= </span><a href="../../../include/utils/nabstime.h.html#LN79"><span class='Ref_to_Const'>INVALID_RELTIME</span></a> <span class='Operator'>&& </span><a href="nabstime.c.html#LN1333"><span class='Ref_To_Local'>rt</span></a> <span class='Operator'>&GT;= </span><a href="nabstime.c.html#LN1332"><span class='Ref_To_Local'>t</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 *      tintervalct     - returns true iff tinterval i1 contains tinterval i2 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1346"></a><span class='Declare_Function'>tintervalct</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1348"></a>    <a href="../../../include/utils/nabstime.h.html#LN44"><span class='Ref_to_Typedef'>TimeInterval</span></a> <span class='Declare_Local'>i1</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN59"><span class='Ref_to_Macro'>PG_GETARG_TIMEINTERVAL</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1349"></a>    <a href="../../../include/utils/nabstime.h.html#LN44"><span class='Ref_to_Typedef'>TimeInterval</span></a> <span class='Declare_Local'>i2</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN59"><span class='Ref_to_Macro'>PG_GETARG_TIMEINTERVAL</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN1348"><span class='Ref_To_Local'>i1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN40"><span class='Ref_to_Member'>status</span></a> <span class='Operator'>== </span><a href="nabstime.c.html#LN45"><span class='Ref_to_Const'>T_INTERVAL_INVAL</span></a> <span class='Operator'>|| </span><a href="nabstime.c.html#LN1349"><span class='Ref_To_Local'>i2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN40"><span class='Ref_to_Member'>status</span></a> <span class='Operator'>== </span><a href="nabstime.c.html#LN45"><span class='Ref_to_Const'>T_INTERVAL_INVAL</span></a><span class='Parentheses'>) 
</span>        <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN398"><span class='Ref_to_Macro'>DatumGetBool</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN585"><span class='Ref_to_Macro'>DirectFunctionCall2</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN401"><span class='Ref_to_Func'>abstimele</span></a><span class='Delimiter'>, 
</span>                                         <a href="../../../include/utils/nabstime.h.html#LN53"><span class='Ref_to_Macro'>AbsoluteTimeGetDatum</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1348"><span class='Ref_To_Local'>i1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN41"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                       <a href="../../../include/utils/nabstime.h.html#LN53"><span class='Ref_to_Macro'>AbsoluteTimeGetDatum</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1349"><span class='Ref_To_Local'>i2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN41"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Parentheses'>)))</span> <span class='Operator'>&& 
</span>        <a href="../../../include/postgres.h.html#LN398"><span class='Ref_to_Macro'>DatumGetBool</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN585"><span class='Ref_to_Macro'>DirectFunctionCall2</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN410"><span class='Ref_to_Func'>abstimege</span></a><span class='Delimiter'>, 
</span>                                         <a href="../../../include/utils/nabstime.h.html#LN53"><span class='Ref_to_Macro'>AbsoluteTimeGetDatum</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1348"><span class='Ref_To_Local'>i1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN41"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                         <a href="../../../include/utils/nabstime.h.html#LN53"><span class='Ref_to_Macro'>AbsoluteTimeGetDatum</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1349"><span class='Ref_To_Local'>i2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN41"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>))))</span> 
        <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 *      tintervalov     - returns true iff tinterval i1 (partially) overlaps i2 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1367"></a><span class='Declare_Function'>tintervalov</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1369"></a>    <a href="../../../include/utils/nabstime.h.html#LN44"><span class='Ref_to_Typedef'>TimeInterval</span></a> <span class='Declare_Local'>i1</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN59"><span class='Ref_to_Macro'>PG_GETARG_TIMEINTERVAL</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1370"></a>    <a href="../../../include/utils/nabstime.h.html#LN44"><span class='Ref_to_Typedef'>TimeInterval</span></a> <span class='Declare_Local'>i2</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN59"><span class='Ref_to_Macro'>PG_GETARG_TIMEINTERVAL</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN1369"><span class='Ref_To_Local'>i1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN40"><span class='Ref_to_Member'>status</span></a> <span class='Operator'>== </span><a href="nabstime.c.html#LN45"><span class='Ref_to_Const'>T_INTERVAL_INVAL</span></a> <span class='Operator'>|| </span><a href="nabstime.c.html#LN1370"><span class='Ref_To_Local'>i2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN40"><span class='Ref_to_Member'>status</span></a> <span class='Operator'>== </span><a href="nabstime.c.html#LN45"><span class='Ref_to_Const'>T_INTERVAL_INVAL</span></a><span class='Parentheses'>) 
</span>        <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN398"><span class='Ref_to_Macro'>DatumGetBool</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN585"><span class='Ref_to_Macro'>DirectFunctionCall2</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN383"><span class='Ref_to_Func'>abstimelt</span></a><span class='Delimiter'>, 
</span>                                         <a href="../../../include/utils/nabstime.h.html#LN53"><span class='Ref_to_Macro'>AbsoluteTimeGetDatum</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1369"><span class='Ref_To_Local'>i1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN41"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                       <a href="../../../include/utils/nabstime.h.html#LN53"><span class='Ref_to_Macro'>AbsoluteTimeGetDatum</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1370"><span class='Ref_To_Local'>i2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN41"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Parentheses'>)))</span> <span class='Operator'>|| 
</span>        <a href="../../../include/postgres.h.html#LN398"><span class='Ref_to_Macro'>DatumGetBool</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN585"><span class='Ref_to_Macro'>DirectFunctionCall2</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN392"><span class='Ref_to_Func'>abstimegt</span></a><span class='Delimiter'>, 
</span>                                         <a href="../../../include/utils/nabstime.h.html#LN53"><span class='Ref_to_Macro'>AbsoluteTimeGetDatum</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1369"><span class='Ref_To_Local'>i1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN41"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                         <a href="../../../include/utils/nabstime.h.html#LN53"><span class='Ref_to_Macro'>AbsoluteTimeGetDatum</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1370"><span class='Ref_To_Local'>i2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN41"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>))))</span> 
        <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 *      tintervalstart  - returns  the start of tinterval i 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1388"></a><span class='Declare_Function'>tintervalstart</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1390"></a>    <a href="../../../include/utils/nabstime.h.html#LN44"><span class='Ref_to_Typedef'>TimeInterval</span></a> <span class='Declare_Local'>i</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN59"><span class='Ref_to_Macro'>PG_GETARG_TIMEINTERVAL</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN1390"><span class='Ref_To_Local'>i</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN40"><span class='Ref_to_Member'>status</span></a> <span class='Operator'>== </span><a href="nabstime.c.html#LN45"><span class='Ref_to_Const'>T_INTERVAL_INVAL</span></a><span class='Parentheses'>) 
</span>        <a href="../../../include/utils/nabstime.h.html#LN61"><span class='Ref_to_Macro'>PG_RETURN_ABSOLUTETIME</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/nabstime.h.html#LN75"><span class='Ref_to_Const'>INVALID_ABSTIME</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/utils/nabstime.h.html#LN61"><span class='Ref_to_Macro'>PG_RETURN_ABSOLUTETIME</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1390"><span class='Ref_To_Local'>i</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN41"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 *      tintervalend        - returns  the end of tinterval i 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1401"></a><span class='Declare_Function'>tintervalend</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1403"></a>    <a href="../../../include/utils/nabstime.h.html#LN44"><span class='Ref_to_Typedef'>TimeInterval</span></a> <span class='Declare_Local'>i</span> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN59"><span class='Ref_to_Macro'>PG_GETARG_TIMEINTERVAL</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN1403"><span class='Ref_To_Local'>i</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN40"><span class='Ref_to_Member'>status</span></a> <span class='Operator'>== </span><a href="nabstime.c.html#LN45"><span class='Ref_to_Const'>T_INTERVAL_INVAL</span></a><span class='Parentheses'>) 
</span>        <a href="../../../include/utils/nabstime.h.html#LN61"><span class='Ref_to_Macro'>PG_RETURN_ABSOLUTETIME</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/nabstime.h.html#LN75"><span class='Ref_to_Const'>INVALID_ABSTIME</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/utils/nabstime.h.html#LN61"><span class='Ref_to_Macro'>PG_RETURN_ABSOLUTETIME</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1403"><span class='Ref_To_Local'>i</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/nabstime.h.html#LN41"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/***************************************************************************** 
 *   PRIVATE ROUTINES                                                        * 
 *****************************************************************************/ 
</span> 
<span class='Comment_Multi_Line'>/* 
 *      parsetinterval -- parse a tinterval string 
 * 
 *      output parameters: 
 *              i_start, i_end: tinterval margins 
 * 
 *      Time interval: 
 *      `[' {` '} `'' &LT;AbsTime&GT; `'' {` '} `'' &LT;AbsTime&GT; `'' {` '} `]' 
 * 
 *      OR  `Undefined Range'   (see also INVALID_INTERVAL_STR) 
 * 
 *      where &LT;AbsTime&GT; satisfies the syntax of absolute time. 
 * 
 *      e.g.  [  '  Jan 18 1902'   'Jan 1 00:00:00 1970'] 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN1431"></a><span class='Declare_Function'>parsetinterval</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>i_string</span><span class='Delimiter'>, 
</span><a name="LN1432"></a>               <a href="../../../interfaces/ecpg/pgtypeslib/dt_common.c.html#LN16"><span class='Ref_to_Typedef'>AbsoluteTime</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>i_start</span><span class='Delimiter'>, 
</span><a name="LN1433"></a>               <a href="../../../interfaces/ecpg/pgtypeslib/dt_common.c.html#LN16"><span class='Ref_to_Typedef'>AbsoluteTime</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>i_end</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1435"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>p</span><span class='Delimiter'>, 
</span><a name="LN1436"></a>               <span class='Operator'>*</span><span class='Declare_Local'>p1</span><span class='Delimiter'>; 
</span><a name="LN1437"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>c</span><span class='Delimiter'>; 
</span> 
    <a href="nabstime.c.html#LN1435"><span class='Ref_To_Local'>p</span></a> <span class='Operator'>= </span><a href="nabstime.c.html#LN1431"><span class='Ref_to_Parameter'>i_string</span></a><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* skip leading blanks up to '[' */ 
</span>    <span class='Control'>while</span> <span class='Parentheses'>((</span><a href="nabstime.c.html#LN1437"><span class='Ref_To_Local'>c</span></a> <span class='Operator'>= *</span><a href="nabstime.c.html#LN1435"><span class='Ref_To_Local'>p</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='String'>'\0'</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN43"><span class='Ref_to_Macro'>IsSpace</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1437"><span class='Ref_To_Local'>c</span></a><span class='Parentheses'>))</span> 
            <a href="nabstime.c.html#LN1435"><span class='Ref_To_Local'>p</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN1437"><span class='Ref_To_Local'>c</span></a> <span class='Operator'>!= </span><span class='String'>'['</span><span class='Parentheses'>) 
</span>            <span class='Control'>goto</span> <span class='Symbol_Characters'>&darr;</span><a href="nabstime.c.html#LN1535"><span class='Ref_to_Label'>bogus</span></a><span class='Delimiter'>;</span>         <span class='Comment_Single_Line'>/* syntax error */ 
</span>        <span class='Control'>else</span> 
            <span class='Control'>break</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN1437"><span class='Ref_To_Local'>c</span></a> <span class='Operator'>== </span><span class='String'>'\0'</span><span class='Parentheses'>) 
</span>        <span class='Control'>goto</span> <span class='Symbol_Characters'>&darr;</span><a href="nabstime.c.html#LN1535"><span class='Ref_to_Label'>bogus</span></a><span class='Delimiter'>;</span>             <span class='Comment_Single_Line'>/* syntax error */ 
</span>    <a href="nabstime.c.html#LN1435"><span class='Ref_To_Local'>p</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* skip leading blanks up to '"' */ 
</span>    <span class='Control'>while</span> <span class='Parentheses'>((</span><a href="nabstime.c.html#LN1437"><span class='Ref_To_Local'>c</span></a> <span class='Operator'>= *</span><a href="nabstime.c.html#LN1435"><span class='Ref_To_Local'>p</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='String'>'\0'</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN43"><span class='Ref_to_Macro'>IsSpace</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1437"><span class='Ref_To_Local'>c</span></a><span class='Parentheses'>))</span> 
            <a href="nabstime.c.html#LN1435"><span class='Ref_To_Local'>p</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN1437"><span class='Ref_To_Local'>c</span></a> <span class='Operator'>!= </span><span class='String'>'"'</span><span class='Parentheses'>) 
</span>            <span class='Control'>goto</span> <span class='Symbol_Characters'>&darr;</span><a href="nabstime.c.html#LN1535"><span class='Ref_to_Label'>bogus</span></a><span class='Delimiter'>;</span>         <span class='Comment_Single_Line'>/* syntax error */ 
</span>        <span class='Control'>else</span> 
            <span class='Control'>break</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN1437"><span class='Ref_To_Local'>c</span></a> <span class='Operator'>== </span><span class='String'>'\0'</span><span class='Parentheses'>) 
</span>        <span class='Control'>goto</span> <span class='Symbol_Characters'>&darr;</span><a href="nabstime.c.html#LN1535"><span class='Ref_to_Label'>bogus</span></a><span class='Delimiter'>;</span>             <span class='Comment_Single_Line'>/* syntax error */ 
</span>    <a href="nabstime.c.html#LN1435"><span class='Ref_To_Local'>p</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span>strncmp<span class='Parentheses'>(</span><a href="nabstime.c.html#LN56"><span class='Ref_to_Const'>INVALID_INTERVAL_STR</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN1435"><span class='Ref_To_Local'>p</span></a><span class='Delimiter'>, </span>strlen<span class='Parentheses'>(</span><a href="nabstime.c.html#LN56"><span class='Ref_to_Const'>INVALID_INTERVAL_STR</span></a><span class='Parentheses'>))</span> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <span class='Control'>goto</span> <span class='Symbol_Characters'>&darr;</span><a href="nabstime.c.html#LN1535"><span class='Ref_to_Label'>bogus</span></a><span class='Delimiter'>;</span>             <span class='Comment_Single_Line'>/* undefined range, handled like a syntax err. */ 
</span>    <span class='Comment_Multi_Line'>/* search for the end of the first date and change it to a \0 */ 
</span>    <a href="nabstime.c.html#LN1436"><span class='Ref_To_Local'>p1</span></a> <span class='Operator'>= </span><a href="nabstime.c.html#LN1435"><span class='Ref_To_Local'>p</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>while</span> <span class='Parentheses'>((</span><a href="nabstime.c.html#LN1437"><span class='Ref_To_Local'>c</span></a> <span class='Operator'>= *</span><a href="nabstime.c.html#LN1436"><span class='Ref_To_Local'>p1</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='String'>'\0'</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN1437"><span class='Ref_To_Local'>c</span></a> <span class='Operator'>== </span><span class='String'>'"'</span><span class='Parentheses'>) 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <a href="nabstime.c.html#LN1436"><span class='Ref_To_Local'>p1</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN1437"><span class='Ref_To_Local'>c</span></a> <span class='Operator'>== </span><span class='String'>'\0'</span><span class='Parentheses'>) 
</span>        <span class='Control'>goto</span> <span class='Symbol_Characters'>&darr;</span><a href="nabstime.c.html#LN1535"><span class='Ref_to_Label'>bogus</span></a><span class='Delimiter'>;</span>             <span class='Comment_Single_Line'>/* syntax error */ 
</span>    <span class='Operator'>*</span><a href="nabstime.c.html#LN1436"><span class='Ref_To_Local'>p1</span></a> <span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* get the first date */ 
</span>    <span class='Operator'>*</span><a href="nabstime.c.html#LN1432"><span class='Ref_to_Parameter'>i_start</span></a> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN49"><span class='Ref_to_Macro'>DatumGetAbsoluteTime</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN583"><span class='Ref_to_Macro'>DirectFunctionCall1</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN194"><span class='Ref_to_Func'>abstimein</span></a><span class='Delimiter'>, 
</span>                                                        <a href="../../../include/postgres.h.html#LN583"><span class='Ref_to_Macro'>CStringGetDatum</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1435"><span class='Ref_To_Local'>p</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* undo change to \0 */ 
</span>    <span class='Operator'>*</span><a href="nabstime.c.html#LN1436"><span class='Ref_To_Local'>p1</span></a> <span class='Operator'>= </span><a href="nabstime.c.html#LN1437"><span class='Ref_To_Local'>c</span></a><span class='Delimiter'>; 
</span>    <a href="nabstime.c.html#LN1435"><span class='Ref_To_Local'>p</span></a> <span class='Operator'>= ++</span><a href="nabstime.c.html#LN1436"><span class='Ref_To_Local'>p1</span></a><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* skip blanks up to '"', beginning of second date */ 
</span>    <span class='Control'>while</span> <span class='Parentheses'>((</span><a href="nabstime.c.html#LN1437"><span class='Ref_To_Local'>c</span></a> <span class='Operator'>= *</span><a href="nabstime.c.html#LN1435"><span class='Ref_To_Local'>p</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='String'>'\0'</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN43"><span class='Ref_to_Macro'>IsSpace</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1437"><span class='Ref_To_Local'>c</span></a><span class='Parentheses'>))</span> 
            <a href="nabstime.c.html#LN1435"><span class='Ref_To_Local'>p</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN1437"><span class='Ref_To_Local'>c</span></a> <span class='Operator'>!= </span><span class='String'>'"'</span><span class='Parentheses'>) 
</span>            <span class='Control'>goto</span> <span class='Symbol_Characters'>&darr;</span><a href="nabstime.c.html#LN1535"><span class='Ref_to_Label'>bogus</span></a><span class='Delimiter'>;</span>         <span class='Comment_Single_Line'>/* syntax error */ 
</span>        <span class='Control'>else</span> 
            <span class='Control'>break</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN1437"><span class='Ref_To_Local'>c</span></a> <span class='Operator'>== </span><span class='String'>'\0'</span><span class='Parentheses'>) 
</span>        <span class='Control'>goto</span> <span class='Symbol_Characters'>&darr;</span><a href="nabstime.c.html#LN1535"><span class='Ref_to_Label'>bogus</span></a><span class='Delimiter'>;</span>             <span class='Comment_Single_Line'>/* syntax error */ 
</span>    <a href="nabstime.c.html#LN1435"><span class='Ref_To_Local'>p</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* search for the end of the second date and change it to a \0 */ 
</span>    <a href="nabstime.c.html#LN1436"><span class='Ref_To_Local'>p1</span></a> <span class='Operator'>= </span><a href="nabstime.c.html#LN1435"><span class='Ref_To_Local'>p</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>while</span> <span class='Parentheses'>((</span><a href="nabstime.c.html#LN1437"><span class='Ref_To_Local'>c</span></a> <span class='Operator'>= *</span><a href="nabstime.c.html#LN1436"><span class='Ref_To_Local'>p1</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='String'>'\0'</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN1437"><span class='Ref_To_Local'>c</span></a> <span class='Operator'>== </span><span class='String'>'"'</span><span class='Parentheses'>) 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <a href="nabstime.c.html#LN1436"><span class='Ref_To_Local'>p1</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN1437"><span class='Ref_To_Local'>c</span></a> <span class='Operator'>== </span><span class='String'>'\0'</span><span class='Parentheses'>) 
</span>        <span class='Control'>goto</span> <span class='Symbol_Characters'>&darr;</span><a href="nabstime.c.html#LN1535"><span class='Ref_to_Label'>bogus</span></a><span class='Delimiter'>;</span>             <span class='Comment_Single_Line'>/* syntax error */ 
</span>    <span class='Operator'>*</span><a href="nabstime.c.html#LN1436"><span class='Ref_To_Local'>p1</span></a> <span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* get the second date */ 
</span>    <span class='Operator'>*</span><a href="nabstime.c.html#LN1433"><span class='Ref_to_Parameter'>i_end</span></a> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN49"><span class='Ref_to_Macro'>DatumGetAbsoluteTime</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN583"><span class='Ref_to_Macro'>DirectFunctionCall1</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN194"><span class='Ref_to_Func'>abstimein</span></a><span class='Delimiter'>, 
</span>                                                      <a href="../../../include/postgres.h.html#LN583"><span class='Ref_to_Macro'>CStringGetDatum</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1435"><span class='Ref_To_Local'>p</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* undo change to \0 */ 
</span>    <span class='Operator'>*</span><a href="nabstime.c.html#LN1436"><span class='Ref_To_Local'>p1</span></a> <span class='Operator'>= </span><a href="nabstime.c.html#LN1437"><span class='Ref_To_Local'>c</span></a><span class='Delimiter'>; 
</span>    <a href="nabstime.c.html#LN1435"><span class='Ref_To_Local'>p</span></a> <span class='Operator'>= ++</span><a href="nabstime.c.html#LN1436"><span class='Ref_To_Local'>p1</span></a><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* skip blanks up to ']' */ 
</span>    <span class='Control'>while</span> <span class='Parentheses'>((</span><a href="nabstime.c.html#LN1437"><span class='Ref_To_Local'>c</span></a> <span class='Operator'>= *</span><a href="nabstime.c.html#LN1435"><span class='Ref_To_Local'>p</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='String'>'\0'</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN43"><span class='Ref_to_Macro'>IsSpace</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1437"><span class='Ref_To_Local'>c</span></a><span class='Parentheses'>))</span> 
            <a href="nabstime.c.html#LN1435"><span class='Ref_To_Local'>p</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN1437"><span class='Ref_To_Local'>c</span></a> <span class='Operator'>!= </span><span class='String'>']'</span><span class='Parentheses'>) 
</span>            <span class='Control'>goto</span> <span class='Symbol_Characters'>&darr;</span><a href="nabstime.c.html#LN1535"><span class='Ref_to_Label'>bogus</span></a><span class='Delimiter'>;</span>         <span class='Comment_Single_Line'>/* syntax error */ 
</span>        <span class='Control'>else</span> 
            <span class='Control'>break</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN1437"><span class='Ref_To_Local'>c</span></a> <span class='Operator'>== </span><span class='String'>'\0'</span><span class='Parentheses'>) 
</span>        <span class='Control'>goto</span> <span class='Symbol_Characters'>&darr;</span><a href="nabstime.c.html#LN1535"><span class='Ref_to_Label'>bogus</span></a><span class='Delimiter'>;</span>             <span class='Comment_Single_Line'>/* syntax error */ 
</span>    <a href="nabstime.c.html#LN1435"><span class='Ref_To_Local'>p</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <a href="nabstime.c.html#LN1437"><span class='Ref_To_Local'>c</span></a> <span class='Operator'>= *</span><a href="nabstime.c.html#LN1435"><span class='Ref_To_Local'>p</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="nabstime.c.html#LN1437"><span class='Ref_To_Local'>c</span></a> <span class='Operator'>!= </span><span class='String'>'\0'</span><span class='Parentheses'>) 
</span>        <span class='Control'>goto</span> <span class='Symbol_Characters'>&darr;</span><a href="nabstime.c.html#LN1535"><span class='Ref_to_Label'>bogus</span></a><span class='Delimiter'>;</span>             <span class='Comment_Single_Line'>/* syntax error */ 
</span> 
    <span class='Comment_Multi_Line'>/* it seems to be a valid tinterval */ 
</span>    <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
<a name="LN1535"></a><span class='Label'>bogus</span><span class='Operator'>: 
</span>    <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>            <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INVALID_DATETIME_FORMAT<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>             <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"invalid input syntax for type %s: \"%s\""</span><span class='Delimiter'>, 
</span>                    <span class='String'>"tinterval"</span><span class='Delimiter'>, </span><a href="nabstime.c.html#LN1431"><span class='Ref_to_Parameter'>i_string</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="nabstime.c.html#LN1432"><span class='Ref_to_Parameter'>i_start</span></a> <span class='Operator'>= *</span><a href="nabstime.c.html#LN1433"><span class='Ref_to_Parameter'>i_end</span></a> <span class='Operator'>= </span><a href="../../../include/utils/nabstime.h.html#LN75"><span class='Ref_to_Const'>INVALID_ABSTIME</span></a><span class='Delimiter'>;</span>        <span class='Comment_Single_Line'>/* keep compiler quiet */ 
</span><span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end parsetinterval &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/***************************************************************************** 
 * 
 *****************************************************************************/ 
</span> 
<span class='Comment_Multi_Line'>/* 
 * timeofday - 
 *     returns the current time as a text. similar to timenow() but returns 
 *     seconds with more precision (up to microsecs). (I need this to compare 
 *     the Wisconsin benchmark with Illustra whose TimeNow() shows current 
 *     time with precision up to microsecs.)              - ay 3/95 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1556"></a><span class='Declare_Function'>timeofday</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1558"></a>    <span class='Control'>struct</span> timeval <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span><a name="LN1559"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>templ</span><span class='Delimiter'>[</span><span class='Number'>128</span><span class='Delimiter'>]; 
</span><a name="LN1560"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>buf</span><span class='Delimiter'>[</span><span class='Number'>128</span><span class='Delimiter'>]; 
</span><a name="LN1561"></a>    <a href="../../../include/pgtime.h.html#LN22"><span class='Ref_to_Typedef'>pg_time_t</span></a>   <span class='Declare_Local'>tt</span><span class='Delimiter'>; 
</span> 
    <a href="../../../port/gettimeofday.c.html#LN103"><span class='Ref_to_Func'>gettimeofday</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="nabstime.c.html#LN1558"><span class='Ref_To_Local'>tp</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="nabstime.c.html#LN1561"><span class='Ref_To_Local'>tt</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/pgtime.h.html#LN22"><span class='Ref_to_Typedef'>pg_time_t</span></a><span class='Parentheses'>) </span><a href="nabstime.c.html#LN1558"><span class='Ref_To_Local'>tp</span></a><span class='Operator'>.</span>tv_sec<span class='Delimiter'>; 
</span>    <a href="../../../include/pgtime.h.html#LN67"><span class='Ref_to_Proto'>pg_strftime</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1559"><span class='Ref_To_Local'>templ</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1559"><span class='Ref_To_Local'>templ</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='String'>"%a %b %d %H:%M:%S.%%06d %Y %Z"</span><span class='Delimiter'>, 
</span>                <a href="../../../include/pgtime.h.html#LN47"><span class='Ref_to_Proto'>pg_localtime</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="nabstime.c.html#LN1561"><span class='Ref_To_Local'>tt</span></a><span class='Delimiter'>, </span><a href="../../../timezone/pgtz.c.html#LN27"><span class='Ref_to_Global_Var'>session_timezone</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../../pl/plperl/plperl.h.html#LN60"><span class='Ref_to_Macro'>snprintf</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1560"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1560"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="nabstime.c.html#LN1559"><span class='Ref_To_Local'>templ</span></a><span class='Delimiter'>, </span><a href="nabstime.c.html#LN1558"><span class='Ref_To_Local'>tp</span></a><span class='Operator'>.</span>tv_usec<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN329"><span class='Ref_to_Macro'>PG_RETURN_TEXT_P</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/builtins.h.html#LN85"><span class='Ref_to_Proto'>cstring_to_text</span></a><span class='Parentheses'>(</span><a href="nabstime.c.html#LN1560"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span></pre>
<table bgcolor='#c0c0c0' width='100%'><tr><td><a href='../../../../Contents.html'>Contents</a></td></tr>
</table><hr><p class='blurb' align='center'><a href='http://www.sourceinsight.com'>HTML Created by Source Insight Version 4.00.0084 Built on 2017-02-26</a></p>
</body></html>