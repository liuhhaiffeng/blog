<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta name="generator" content="Source Insight Version 4.00.0084 Built on 2017-02-26">
<meta charset='UTF-8' />
<style type='text/css'><!--
TD {background-color: #C0C0C0; font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.blurb {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.filename {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 120%; font-weight: bold; }
.dirname {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 100%; font-weight: bold; margin-top: 2.5em;}
--></style>
<title>src\backend\utils\adt\rangetypes.c</title>
<LINK REL=StyleSheet HREF="../../../../C_Cpp_Source_File.css" TYPE='text/css' MEDIA=screen>
</head>
<body bgcolor=#ffffff>
<table bgcolor='#c0c0c0' width='100%'>
<tr><td><p class='filename'><b>src\backend\utils\adt\rangetypes.c</b></p></td>
<td align='right'>
Wed Jun 14 08:25:52 2017
</td></tr>
<tr><td><a href='../../../../Contents.html'>Contents</a></td></tr>
</table>
<pre>
</span><span class='Comment_Multi_Line'>/*------------------------------------------------------------------------- 
 * 
 * rangetypes.c 
 *    I/O functions, operators, and support functions for range types. 
 * 
 * The stored (serialized) format of a range value is: 
 * 
 *  4 bytes: varlena header 
 *  4 bytes: range type's OID 
 *  Lower boundary value, if any, aligned according to subtype's typalign 
 *  Upper boundary value, if any, aligned according to subtype's typalign 
 *  1 byte for flags 
 * 
 * This representation is chosen to avoid needing any padding before the 
 * lower boundary value, even when it requires double alignment.  We can 
 * expect that the varlena header is presented to us on a suitably aligned 
 * boundary (possibly after detoasting), and then the lower boundary is too. 
 * Note that this means we can't work with a packed (short varlena header) 
 * value; we must detoast it first. 
 * 
 * 
 * Portions Copyright (c) 1996-2017, PostgreSQL Global Development Group 
 * Portions Copyright (c) 1994, Regents of the University of California 
 * 
 * 
 * IDENTIFICATION 
 *    src/backend/utils/adt/rangetypes.c 
 * 
 *------------------------------------------------------------------------- 
 */ 
</span><span class='Keyword'>#include </span><span class='String'>"postgres.h"</span> 
 
<span class='Keyword'>#include </span><span class='String'>"access/hash.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"lib/stringinfo.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"libpq/pqformat.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"miscadmin.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/builtins.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/date.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/int8.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/lsyscache.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/rangetypes.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/timestamp.h"</span> 
 
 
<a name="LN44"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>RANGE_EMPTY_LITERAL</span> <span class='String'>"empty"</span> 
 
<span class='Comment_Multi_Line'>/* fn_extra cache entry for one of the range I/O functions */ 
</span><a name="LN47"></a><span class='Control'>typedef</span> <span class='Control'>struct</span> <span class='Declare_Struct'>RangeIOData</span> 
<span class='Delimiter'>{ 
</span><a name="LN49"></a>    <a href="../../../include/utils/typcache.h.html#LN28"><span class='Ref_to_Struct'>TypeCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Member'>typcache</span><span class='Delimiter'>;</span>   <span class='Comment_Single_Line'>/* range type's typcache entry */ 
</span><a name="LN50"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Member'>typiofunc</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* element type's I/O function */ 
</span><a name="LN51"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Member'>typioparam</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* element type's I/O parameter */ 
</span><a name="LN52"></a>    <a href="../../../include/fmgr.h.html#LN55"><span class='Ref_to_Struct'>FmgrInfo</span></a>    <span class='Declare_Member'>proc</span><span class='Delimiter'>;</span>           <span class='Comment_Single_Line'>/* lookup result for typiofunc */ 
</span><a name="LN53"></a><span class='Delimiter'>} </span><span class='Declare_Typedef'>RangeIOData</span><span class='Delimiter'>; 
</span> 
 
<a name="LN56"></a><span class='Keyword'>static </span><a href="rangetypes.c.html#LN47"><span class='Ref_to_Struct'>RangeIOData</span></a> <span class='Operator'>*</span><span class='Declare_Prototype'>get_range_io_data</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN37"><span class='Ref_to_Typedef'>FunctionCallInfo</span></a> <span class='Declare_Parameter'>fcinfo</span><span class='Delimiter'>, </span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>rngtypid</span><span class='Delimiter'>, 
</span><a name="LN57"></a>                  <a href="../../../include/utils/lsyscache.h.html#LN29"><span class='Ref_to_Enum'>IOFuncSelector</span></a> <span class='Declare_Parameter'>func</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN58"></a><span class='Keyword'>static char </span><span class='Declare_Prototype'>range_parse_flags</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>flags_str</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN59"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>range_parse</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>input_str</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>flags</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>**</span><span class='Declare_Parameter'>lbound_str</span><span class='Delimiter'>, 
</span><a name="LN60"></a>            <span class='Keyword'>char </span><span class='Operator'>**</span><span class='Declare_Parameter'>ubound_str</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN61"></a><span class='Keyword'>static const char </span><span class='Operator'>*</span><span class='Declare_Prototype'>range_parse_bound</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>string</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>ptr</span><span class='Delimiter'>, 
</span><a name="LN62"></a>                  <span class='Keyword'>char </span><span class='Operator'>**</span><span class='Declare_Parameter'>bound_str</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Declare_Parameter'>infinite</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN63"></a><span class='Keyword'>static char </span><span class='Operator'>*</span><span class='Declare_Prototype'>range_deparse</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Declare_Parameter'>flags</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>lbound_str</span><span class='Delimiter'>, 
</span><a name="LN64"></a>              <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>ubound_str</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN65"></a><span class='Keyword'>static char </span><span class='Operator'>*</span><span class='Declare_Prototype'>range_bound_escape</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>value</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN66"></a><span class='Keyword'>static </span><a href="../../../include/c.h.html#LN355"><span class='Ref_to_Typedef'>Size</span></a> <span class='Declare_Prototype'>datum_compute_size</span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN355"><span class='Ref_to_Typedef'>Size</span></a> <span class='Declare_Parameter'>sz</span><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Declare_Parameter'>datum</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>typbyval</span><span class='Delimiter'>, 
</span><a name="LN67"></a>                   <span class='Keyword'>char </span><span class='Declare_Parameter'>typalign</span><span class='Delimiter'>, </span><a href="../../../include/c.h.html#LN254"><span class='Ref_to_Typedef'>int16</span></a> <span class='Declare_Parameter'>typlen</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Declare_Parameter'>typstorage</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN68"></a><span class='Keyword'>static </span><a href="../../../include/c.h.html#LN244"><span class='Ref_to_Typedef'>Pointer</span></a> <span class='Declare_Prototype'>datum_write</span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN244"><span class='Ref_to_Typedef'>Pointer</span></a> <span class='Declare_Parameter'>ptr</span><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Declare_Parameter'>datum</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>typbyval</span><span class='Delimiter'>, 
</span><a name="LN69"></a>            <span class='Keyword'>char </span><span class='Declare_Parameter'>typalign</span><span class='Delimiter'>, </span><a href="../../../include/c.h.html#LN254"><span class='Ref_to_Typedef'>int16</span></a> <span class='Declare_Parameter'>typlen</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Declare_Parameter'>typstorage</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
 
<span class='Comment_Multi_Line'>/* 
 *---------------------------------------------------------- 
 * I/O FUNCTIONS 
 *---------------------------------------------------------- 
 */ 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN79"></a><span class='Declare_Function'>range_in</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN81"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>input_str</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN241"><span class='Ref_to_Macro'>PG_GETARG_CSTRING</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN82"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>rngtypoid</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN239"><span class='Ref_to_Macro'>PG_GETARG_OID</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN83"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>typmod</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN233"><span class='Ref_to_Macro'>PG_GETARG_INT32</span></a><span class='Parentheses'>(</span><span class='Number'>2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN84"></a>    <a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>range</span><span class='Delimiter'>; 
</span><a name="LN85"></a>    <a href="rangetypes.c.html#LN47"><span class='Ref_to_Struct'>RangeIOData</span></a> <span class='Operator'>*</span><span class='Declare_Local'>cache</span><span class='Delimiter'>; 
</span><a name="LN86"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>flags</span><span class='Delimiter'>; 
</span><a name="LN87"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>lbound_str</span><span class='Delimiter'>; 
</span><a name="LN88"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>ubound_str</span><span class='Delimiter'>; 
</span><a name="LN89"></a>    <a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a>  <span class='Declare_Local'>lower</span><span class='Delimiter'>; 
</span><a name="LN90"></a>    <a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a>  <span class='Declare_Local'>upper</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/miscadmin.h.html#LN275"><span class='Ref_to_Proto'>check_stack_depth</span></a><span class='Parentheses'>()</span><span class='Delimiter'>;</span>        <span class='Comment_Single_Line'>/* recurses when subtype is a range type */ 
</span> 
    <a href="rangetypes.c.html#LN85"><span class='Ref_To_Local'>cache</span></a> <span class='Operator'>= </span><a href="rangetypes.c.html#LN56"><span class='Ref_to_Proto'>get_range_io_data</span></a><span class='Parentheses'>(</span>fcinfo<span class='Delimiter'>, </span><a href="rangetypes.c.html#LN82"><span class='Ref_To_Local'>rngtypoid</span></a><span class='Delimiter'>, </span><a href="../../../include/utils/lsyscache.h.html#LN31"><span class='Ref_to_EnumConst'>IOFunc_input</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* parse */ 
</span>    <a href="rangetypes.c.html#LN59"><span class='Ref_to_Proto'>range_parse</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN81"><span class='Ref_To_Local'>input_str</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN86"><span class='Ref_To_Local'>flags</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN87"><span class='Ref_To_Local'>lbound_str</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN88"><span class='Ref_To_Local'>ubound_str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* call element type's input function */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN45"><span class='Ref_to_Macro'>RANGE_HAS_LBOUND</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN86"><span class='Ref_To_Local'>flags</span></a><span class='Parentheses'>))</span> 
        <a href="rangetypes.c.html#LN89"><span class='Ref_To_Local'>lower</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN61"><span class='Ref_to_Member'>val</span></a> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN642"><span class='Ref_to_Proto'>InputFunctionCall</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rangetypes.c.html#LN85"><span class='Ref_To_Local'>cache</span></a><span class='Operator'>-&GT;</span><a href="rangetypes.c.html#LN52"><span class='Ref_to_Member'>proc</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN87"><span class='Ref_To_Local'>lbound_str</span></a><span class='Delimiter'>, 
</span>                                      <a href="rangetypes.c.html#LN85"><span class='Ref_To_Local'>cache</span></a><span class='Operator'>-&GT;</span><a href="rangetypes.c.html#LN51"><span class='Ref_to_Member'>typioparam</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN83"><span class='Ref_To_Local'>typmod</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN49"><span class='Ref_to_Macro'>RANGE_HAS_UBOUND</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN86"><span class='Ref_To_Local'>flags</span></a><span class='Parentheses'>))</span> 
        <a href="rangetypes.c.html#LN90"><span class='Ref_To_Local'>upper</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN61"><span class='Ref_to_Member'>val</span></a> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN642"><span class='Ref_to_Proto'>InputFunctionCall</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rangetypes.c.html#LN85"><span class='Ref_To_Local'>cache</span></a><span class='Operator'>-&GT;</span><a href="rangetypes.c.html#LN52"><span class='Ref_to_Member'>proc</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN88"><span class='Ref_To_Local'>ubound_str</span></a><span class='Delimiter'>, 
</span>                                      <a href="rangetypes.c.html#LN85"><span class='Ref_To_Local'>cache</span></a><span class='Operator'>-&GT;</span><a href="rangetypes.c.html#LN51"><span class='Ref_to_Member'>typioparam</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN83"><span class='Ref_To_Local'>typmod</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="rangetypes.c.html#LN89"><span class='Ref_To_Local'>lower</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN62"><span class='Ref_to_Member'>infinite</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN86"><span class='Ref_To_Local'>flags</span></a> <span class='Operator'>& </span><a href="../../../include/utils/rangetypes.h.html#LN38"><span class='Ref_to_Const'>RANGE_LB_INF</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="rangetypes.c.html#LN89"><span class='Ref_To_Local'>lower</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN63"><span class='Ref_to_Member'>inclusive</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN86"><span class='Ref_To_Local'>flags</span></a> <span class='Operator'>& </span><a href="../../../include/utils/rangetypes.h.html#LN36"><span class='Ref_to_Const'>RANGE_LB_INC</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="rangetypes.c.html#LN89"><span class='Ref_To_Local'>lower</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN64"><span class='Ref_to_Member'>lower</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <a href="rangetypes.c.html#LN90"><span class='Ref_To_Local'>upper</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN62"><span class='Ref_to_Member'>infinite</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN86"><span class='Ref_To_Local'>flags</span></a> <span class='Operator'>& </span><a href="../../../include/utils/rangetypes.h.html#LN39"><span class='Ref_to_Const'>RANGE_UB_INF</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="rangetypes.c.html#LN90"><span class='Ref_To_Local'>upper</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN63"><span class='Ref_to_Member'>inclusive</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN86"><span class='Ref_To_Local'>flags</span></a> <span class='Operator'>& </span><a href="../../../include/utils/rangetypes.h.html#LN37"><span class='Ref_to_Const'>RANGE_UB_INC</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="rangetypes.c.html#LN90"><span class='Ref_To_Local'>upper</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN64"><span class='Ref_to_Member'>lower</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* serialize and canonicalize */ 
</span>    <a href="rangetypes.c.html#LN84"><span class='Ref_To_Local'>range</span></a> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN128"><span class='Ref_to_Proto'>make_range</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN85"><span class='Ref_To_Local'>cache</span></a><span class='Operator'>-&GT;</span><a href="rangetypes.c.html#LN49"><span class='Ref_to_Member'>typcache</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN89"><span class='Ref_To_Local'>lower</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN90"><span class='Ref_To_Local'>upper</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN86"><span class='Ref_To_Local'>flags</span></a> <span class='Operator'>& </span><a href="../../../include/utils/rangetypes.h.html#LN35"><span class='Ref_to_Const'>RANGE_EMPTY</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/rangetypes.h.html#LN75"><span class='Ref_to_Macro'>PG_RETURN_RANGE</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN84"><span class='Ref_To_Local'>range</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end range_in &raquo; </span> 
 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN121"></a><span class='Declare_Function'>range_out</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN123"></a>    <a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>range</span> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN73"><span class='Ref_to_Macro'>PG_GETARG_RANGE</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN124"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>output_str</span><span class='Delimiter'>; 
</span><a name="LN125"></a>    <a href="rangetypes.c.html#LN47"><span class='Ref_to_Struct'>RangeIOData</span></a> <span class='Operator'>*</span><span class='Declare_Local'>cache</span><span class='Delimiter'>; 
</span><a name="LN126"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>flags</span><span class='Delimiter'>; 
</span><a name="LN127"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>lbound_str</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN128"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>ubound_str</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN129"></a>    <a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a>  <span class='Declare_Local'>lower</span><span class='Delimiter'>; 
</span><a name="LN130"></a>    <a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a>  <span class='Declare_Local'>upper</span><span class='Delimiter'>; 
</span><a name="LN131"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>empty</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/miscadmin.h.html#LN275"><span class='Ref_to_Proto'>check_stack_depth</span></a><span class='Parentheses'>()</span><span class='Delimiter'>;</span>        <span class='Comment_Single_Line'>/* recurses when subtype is a range type */ 
</span> 
    <a href="rangetypes.c.html#LN125"><span class='Ref_To_Local'>cache</span></a> <span class='Operator'>= </span><a href="rangetypes.c.html#LN56"><span class='Ref_to_Proto'>get_range_io_data</span></a><span class='Parentheses'>(</span>fcinfo<span class='Delimiter'>, </span><a href="../../../include/utils/rangetypes.h.html#LN32"><span class='Ref_to_Macro'>RangeTypeGetOid</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN123"><span class='Ref_To_Local'>range</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="../../../include/utils/lsyscache.h.html#LN32"><span class='Ref_to_EnumConst'>IOFunc_output</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* deserialize */ 
</span>    <a href="../../../include/utils/rangetypes.h.html#LN123"><span class='Ref_to_Proto'>range_deserialize</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN125"><span class='Ref_To_Local'>cache</span></a><span class='Operator'>-&GT;</span><a href="rangetypes.c.html#LN49"><span class='Ref_to_Member'>typcache</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN123"><span class='Ref_To_Local'>range</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN129"><span class='Ref_To_Local'>lower</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN130"><span class='Ref_To_Local'>upper</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN131"><span class='Ref_To_Local'>empty</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="rangetypes.c.html#LN126"><span class='Ref_To_Local'>flags</span></a> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN126"><span class='Ref_to_Proto'>range_get_flags</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN123"><span class='Ref_To_Local'>range</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* call element type's output function */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN45"><span class='Ref_to_Macro'>RANGE_HAS_LBOUND</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN126"><span class='Ref_To_Local'>flags</span></a><span class='Parentheses'>))</span> 
        <a href="rangetypes.c.html#LN127"><span class='Ref_To_Local'>lbound_str</span></a> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN646"><span class='Ref_to_Proto'>OutputFunctionCall</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rangetypes.c.html#LN125"><span class='Ref_To_Local'>cache</span></a><span class='Operator'>-&GT;</span><a href="rangetypes.c.html#LN52"><span class='Ref_to_Member'>proc</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN129"><span class='Ref_To_Local'>lower</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN61"><span class='Ref_to_Member'>val</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN49"><span class='Ref_to_Macro'>RANGE_HAS_UBOUND</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN126"><span class='Ref_To_Local'>flags</span></a><span class='Parentheses'>))</span> 
        <a href="rangetypes.c.html#LN128"><span class='Ref_To_Local'>ubound_str</span></a> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN646"><span class='Ref_to_Proto'>OutputFunctionCall</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rangetypes.c.html#LN125"><span class='Ref_To_Local'>cache</span></a><span class='Operator'>-&GT;</span><a href="rangetypes.c.html#LN52"><span class='Ref_to_Member'>proc</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN130"><span class='Ref_To_Local'>upper</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN61"><span class='Ref_to_Member'>val</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* construct result string */ 
</span>    <a href="rangetypes.c.html#LN124"><span class='Ref_To_Local'>output_str</span></a> <span class='Operator'>= </span><a href="rangetypes.c.html#LN63"><span class='Ref_to_Proto'>range_deparse</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN126"><span class='Ref_To_Local'>flags</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN127"><span class='Ref_To_Local'>lbound_str</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN128"><span class='Ref_To_Local'>ubound_str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN321"><span class='Ref_to_Macro'>PG_RETURN_CSTRING</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN124"><span class='Ref_To_Local'>output_str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end range_out &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Binary representation: The first byte is the flags, then the lower bound 
 * (if present), then the upper bound (if present).  Each bound is represented 
 * by a 4-byte length header and the binary representation of that bound (as 
 * returned by a call to the send function for the subtype). 
 */ 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN161"></a><span class='Declare_Function'>range_recv</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN163"></a>    <a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a><span class='Parentheses'>) </span><a href="../../../include/fmgr.h.html#LN240"><span class='Ref_to_Macro'>PG_GETARG_POINTER</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN164"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>rngtypoid</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN239"><span class='Ref_to_Macro'>PG_GETARG_OID</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN165"></a>    <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>typmod</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN233"><span class='Ref_to_Macro'>PG_GETARG_INT32</span></a><span class='Parentheses'>(</span><span class='Number'>2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN166"></a>    <a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>range</span><span class='Delimiter'>; 
</span><a name="LN167"></a>    <a href="rangetypes.c.html#LN47"><span class='Ref_to_Struct'>RangeIOData</span></a> <span class='Operator'>*</span><span class='Declare_Local'>cache</span><span class='Delimiter'>; 
</span><a name="LN168"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>flags</span><span class='Delimiter'>; 
</span><a name="LN169"></a>    <a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a>  <span class='Declare_Local'>lower</span><span class='Delimiter'>; 
</span><a name="LN170"></a>    <a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a>  <span class='Declare_Local'>upper</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/miscadmin.h.html#LN275"><span class='Ref_to_Proto'>check_stack_depth</span></a><span class='Parentheses'>()</span><span class='Delimiter'>;</span>        <span class='Comment_Single_Line'>/* recurses when subtype is a range type */ 
</span> 
    <a href="rangetypes.c.html#LN167"><span class='Ref_To_Local'>cache</span></a> <span class='Operator'>= </span><a href="rangetypes.c.html#LN56"><span class='Ref_to_Proto'>get_range_io_data</span></a><span class='Parentheses'>(</span>fcinfo<span class='Delimiter'>, </span><a href="rangetypes.c.html#LN164"><span class='Ref_To_Local'>rngtypoid</span></a><span class='Delimiter'>, </span><a href="../../../include/utils/lsyscache.h.html#LN33"><span class='Ref_to_EnumConst'>IOFunc_receive</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* receive the flags... */ 
</span>    <a href="rangetypes.c.html#LN168"><span class='Ref_To_Local'>flags</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>unsigned char</span><span class='Parentheses'>) </span><a href="../../../include/libpq/pqformat.h.html#LN37"><span class='Ref_to_Proto'>pq_getmsgbyte</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN163"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Mask out any unsupported flags, particularly RANGE_xB_NULL which would 
     * confuse following tests.  Note that range_serialize will take care of 
     * cleaning up any inconsistencies in the remaining flags. 
     */ 
</span>    <a href="rangetypes.c.html#LN168"><span class='Ref_To_Local'>flags</span></a> <span class='Operator'>&= </span><span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN35"><span class='Ref_to_Const'>RANGE_EMPTY</span></a> <span class='Operator'>| 
</span>              <a href="../../../include/utils/rangetypes.h.html#LN36"><span class='Ref_to_Const'>RANGE_LB_INC</span></a> <span class='Operator'>| 
</span>              <a href="../../../include/utils/rangetypes.h.html#LN38"><span class='Ref_to_Const'>RANGE_LB_INF</span></a> <span class='Operator'>| 
</span>              <a href="../../../include/utils/rangetypes.h.html#LN37"><span class='Ref_to_Const'>RANGE_UB_INC</span></a> <span class='Operator'>| 
</span>              <a href="../../../include/utils/rangetypes.h.html#LN39"><span class='Ref_to_Const'>RANGE_UB_INF</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* receive the bounds ... */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN45"><span class='Ref_to_Macro'>RANGE_HAS_LBOUND</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN168"><span class='Ref_To_Local'>flags</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN193"></a>        <a href="../../../include/c.h.html#LN267"><span class='Ref_to_Typedef'>uint32</span></a>      <span class='Declare_Local'>bound_len</span> <span class='Operator'>= </span><a href="../../../include/libpq/pqformat.h.html#LN38"><span class='Ref_to_Proto'>pq_getmsgint</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN163"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='Number'>4</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN194"></a>        <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>bound_data</span> <span class='Operator'>= </span><a href="../../../include/libpq/pqformat.h.html#LN42"><span class='Ref_to_Proto'>pq_getmsgbytes</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN163"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN193"><span class='Ref_To_Local'>bound_len</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN195"></a>        <a href="../../../include/lib/stringinfo.h.html#LN34"><span class='Ref_to_Struct'>StringInfoData</span></a> <span class='Declare_Local'>bound_buf</span><span class='Delimiter'>; 
</span> 
        <a href="../../lib/stringinfo.c.html#LN44"><span class='Ref_to_Func'>initStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rangetypes.c.html#LN195"><span class='Ref_To_Local'>bound_buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../../include/lib/stringinfo.h.html#LN142"><span class='Ref_to_Proto'>appendBinaryStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rangetypes.c.html#LN195"><span class='Ref_To_Local'>bound_buf</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN194"><span class='Ref_To_Local'>bound_data</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN193"><span class='Ref_To_Local'>bound_len</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="rangetypes.c.html#LN169"><span class='Ref_To_Local'>lower</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN61"><span class='Ref_to_Member'>val</span></a> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN648"><span class='Ref_to_Proto'>ReceiveFunctionCall</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rangetypes.c.html#LN167"><span class='Ref_To_Local'>cache</span></a><span class='Operator'>-&GT;</span><a href="rangetypes.c.html#LN52"><span class='Ref_to_Member'>proc</span></a><span class='Delimiter'>, 
</span>                                        <span class='Operator'>&</span><a href="rangetypes.c.html#LN195"><span class='Ref_To_Local'>bound_buf</span></a><span class='Delimiter'>, 
</span>                                        <a href="rangetypes.c.html#LN167"><span class='Ref_To_Local'>cache</span></a><span class='Operator'>-&GT;</span><a href="rangetypes.c.html#LN51"><span class='Ref_to_Member'>typioparam</span></a><span class='Delimiter'>, 
</span>                                        <a href="rangetypes.c.html#LN165"><span class='Ref_To_Local'>typmod</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN195"><span class='Ref_To_Local'>bound_buf</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
        <a href="rangetypes.c.html#LN169"><span class='Ref_To_Local'>lower</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN61"><span class='Ref_to_Member'>val</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a><span class='Parentheses'>) </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN49"><span class='Ref_to_Macro'>RANGE_HAS_UBOUND</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN168"><span class='Ref_To_Local'>flags</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN211"></a>        <a href="../../../include/c.h.html#LN267"><span class='Ref_to_Typedef'>uint32</span></a>      <span class='Declare_Local'>bound_len</span> <span class='Operator'>= </span><a href="../../../include/libpq/pqformat.h.html#LN38"><span class='Ref_to_Proto'>pq_getmsgint</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN163"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='Number'>4</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN212"></a>        <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>bound_data</span> <span class='Operator'>= </span><a href="../../../include/libpq/pqformat.h.html#LN42"><span class='Ref_to_Proto'>pq_getmsgbytes</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN163"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN211"><span class='Ref_To_Local'>bound_len</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN213"></a>        <a href="../../../include/lib/stringinfo.h.html#LN34"><span class='Ref_to_Struct'>StringInfoData</span></a> <span class='Declare_Local'>bound_buf</span><span class='Delimiter'>; 
</span> 
        <a href="../../lib/stringinfo.c.html#LN44"><span class='Ref_to_Func'>initStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rangetypes.c.html#LN213"><span class='Ref_To_Local'>bound_buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../../include/lib/stringinfo.h.html#LN142"><span class='Ref_to_Proto'>appendBinaryStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rangetypes.c.html#LN213"><span class='Ref_To_Local'>bound_buf</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN212"><span class='Ref_To_Local'>bound_data</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN211"><span class='Ref_To_Local'>bound_len</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="rangetypes.c.html#LN170"><span class='Ref_To_Local'>upper</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN61"><span class='Ref_to_Member'>val</span></a> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN648"><span class='Ref_to_Proto'>ReceiveFunctionCall</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rangetypes.c.html#LN167"><span class='Ref_To_Local'>cache</span></a><span class='Operator'>-&GT;</span><a href="rangetypes.c.html#LN52"><span class='Ref_to_Member'>proc</span></a><span class='Delimiter'>, 
</span>                                        <span class='Operator'>&</span><a href="rangetypes.c.html#LN213"><span class='Ref_To_Local'>bound_buf</span></a><span class='Delimiter'>, 
</span>                                        <a href="rangetypes.c.html#LN167"><span class='Ref_To_Local'>cache</span></a><span class='Operator'>-&GT;</span><a href="rangetypes.c.html#LN51"><span class='Ref_to_Member'>typioparam</span></a><span class='Delimiter'>, 
</span>                                        <a href="rangetypes.c.html#LN165"><span class='Ref_To_Local'>typmod</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN213"><span class='Ref_To_Local'>bound_buf</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
        <a href="rangetypes.c.html#LN170"><span class='Ref_To_Local'>upper</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN61"><span class='Ref_to_Member'>val</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a><span class='Parentheses'>) </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/libpq/pqformat.h.html#LN47"><span class='Ref_to_Proto'>pq_getmsgend</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN163"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* finish constructing RangeBound representation */ 
</span>    <a href="rangetypes.c.html#LN169"><span class='Ref_To_Local'>lower</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN62"><span class='Ref_to_Member'>infinite</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN168"><span class='Ref_To_Local'>flags</span></a> <span class='Operator'>& </span><a href="../../../include/utils/rangetypes.h.html#LN38"><span class='Ref_to_Const'>RANGE_LB_INF</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="rangetypes.c.html#LN169"><span class='Ref_To_Local'>lower</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN63"><span class='Ref_to_Member'>inclusive</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN168"><span class='Ref_To_Local'>flags</span></a> <span class='Operator'>& </span><a href="../../../include/utils/rangetypes.h.html#LN36"><span class='Ref_to_Const'>RANGE_LB_INC</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="rangetypes.c.html#LN169"><span class='Ref_To_Local'>lower</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN64"><span class='Ref_to_Member'>lower</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <a href="rangetypes.c.html#LN170"><span class='Ref_To_Local'>upper</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN62"><span class='Ref_to_Member'>infinite</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN168"><span class='Ref_To_Local'>flags</span></a> <span class='Operator'>& </span><a href="../../../include/utils/rangetypes.h.html#LN39"><span class='Ref_to_Const'>RANGE_UB_INF</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="rangetypes.c.html#LN170"><span class='Ref_To_Local'>upper</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN63"><span class='Ref_to_Member'>inclusive</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN168"><span class='Ref_To_Local'>flags</span></a> <span class='Operator'>& </span><a href="../../../include/utils/rangetypes.h.html#LN37"><span class='Ref_to_Const'>RANGE_UB_INC</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="rangetypes.c.html#LN170"><span class='Ref_To_Local'>upper</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN64"><span class='Ref_to_Member'>lower</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* serialize and canonicalize */ 
</span>    <a href="rangetypes.c.html#LN166"><span class='Ref_To_Local'>range</span></a> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN128"><span class='Ref_to_Proto'>make_range</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN167"><span class='Ref_To_Local'>cache</span></a><span class='Operator'>-&GT;</span><a href="rangetypes.c.html#LN49"><span class='Ref_to_Member'>typcache</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN169"><span class='Ref_To_Local'>lower</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN170"><span class='Ref_To_Local'>upper</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN168"><span class='Ref_To_Local'>flags</span></a> <span class='Operator'>& </span><a href="../../../include/utils/rangetypes.h.html#LN35"><span class='Ref_to_Const'>RANGE_EMPTY</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/rangetypes.h.html#LN75"><span class='Ref_to_Macro'>PG_RETURN_RANGE</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN166"><span class='Ref_To_Local'>range</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end range_recv &raquo; </span> 
 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN244"></a><span class='Declare_Function'>range_send</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN246"></a>    <a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>range</span> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN73"><span class='Ref_to_Macro'>PG_GETARG_RANGE</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN247"></a>    <a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><a href="../../lib/stringinfo.c.html#LN26"><span class='Ref_to_Func'>makeStringInfo</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN248"></a>    <a href="rangetypes.c.html#LN47"><span class='Ref_to_Struct'>RangeIOData</span></a> <span class='Operator'>*</span><span class='Declare_Local'>cache</span><span class='Delimiter'>; 
</span><a name="LN249"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>flags</span><span class='Delimiter'>; 
</span><a name="LN250"></a>    <a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a>  <span class='Declare_Local'>lower</span><span class='Delimiter'>; 
</span><a name="LN251"></a>    <a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a>  <span class='Declare_Local'>upper</span><span class='Delimiter'>; 
</span><a name="LN252"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>empty</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/miscadmin.h.html#LN275"><span class='Ref_to_Proto'>check_stack_depth</span></a><span class='Parentheses'>()</span><span class='Delimiter'>;</span>        <span class='Comment_Single_Line'>/* recurses when subtype is a range type */ 
</span> 
    <a href="rangetypes.c.html#LN248"><span class='Ref_To_Local'>cache</span></a> <span class='Operator'>= </span><a href="rangetypes.c.html#LN56"><span class='Ref_to_Proto'>get_range_io_data</span></a><span class='Parentheses'>(</span>fcinfo<span class='Delimiter'>, </span><a href="../../../include/utils/rangetypes.h.html#LN32"><span class='Ref_to_Macro'>RangeTypeGetOid</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN246"><span class='Ref_To_Local'>range</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="../../../include/utils/lsyscache.h.html#LN34"><span class='Ref_to_EnumConst'>IOFunc_send</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* deserialize */ 
</span>    <a href="../../../include/utils/rangetypes.h.html#LN123"><span class='Ref_to_Proto'>range_deserialize</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN248"><span class='Ref_To_Local'>cache</span></a><span class='Operator'>-&GT;</span><a href="rangetypes.c.html#LN49"><span class='Ref_to_Member'>typcache</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN246"><span class='Ref_To_Local'>range</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN250"><span class='Ref_To_Local'>lower</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN251"><span class='Ref_To_Local'>upper</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN252"><span class='Ref_To_Local'>empty</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="rangetypes.c.html#LN249"><span class='Ref_To_Local'>flags</span></a> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN126"><span class='Ref_to_Proto'>range_get_flags</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN246"><span class='Ref_To_Local'>range</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* construct output */ 
</span>    <a href="../../../include/libpq/pqformat.h.html#LN31"><span class='Ref_to_Proto'>pq_begintypsend</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN247"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/libpq/pqformat.h.html#LN18"><span class='Ref_to_Proto'>pq_sendbyte</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN247"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN249"><span class='Ref_To_Local'>flags</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN45"><span class='Ref_to_Macro'>RANGE_HAS_LBOUND</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN249"><span class='Ref_To_Local'>flags</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN269"></a>        <a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>       <span class='Declare_Local'>bound</span> <span class='Operator'>= </span><a href="../../../include/postgres.h.html#LN561"><span class='Ref_to_Macro'>PointerGetDatum</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN652"><span class='Ref_to_Proto'>SendFunctionCall</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rangetypes.c.html#LN248"><span class='Ref_To_Local'>cache</span></a><span class='Operator'>-&GT;</span><a href="rangetypes.c.html#LN52"><span class='Ref_to_Member'>proc</span></a><span class='Delimiter'>, 
</span>                                                             <a href="rangetypes.c.html#LN250"><span class='Ref_To_Local'>lower</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN61"><span class='Ref_to_Member'>val</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span><a name="LN271"></a>        <a href="../../../include/c.h.html#LN267"><span class='Ref_to_Typedef'>uint32</span></a>      <span class='Declare_Local'>bound_len</span> <span class='Operator'>= </span><a href="../../../include/postgres.h.html#LN303"><span class='Ref_to_Macro'>VARSIZE</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN269"><span class='Ref_To_Local'>bound</span></a><span class='Parentheses'>) </span><span class='Operator'>- </span><a href="../../../include/c.h.html#LN444"><span class='Ref_to_Const'>VARHDRSZ</span></a><span class='Delimiter'>; 
</span><a name="LN272"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>bound_data</span> <span class='Operator'>= </span><a href="../../../include/postgres.h.html#LN302"><span class='Ref_to_Macro'>VARDATA</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN269"><span class='Ref_To_Local'>bound</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../../include/libpq/pqformat.h.html#LN25"><span class='Ref_to_Proto'>pq_sendint</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN247"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN271"><span class='Ref_To_Local'>bound_len</span></a><span class='Delimiter'>, </span><span class='Number'>4</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../../include/libpq/pqformat.h.html#LN19"><span class='Ref_to_Proto'>pq_sendbytes</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN247"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN272"><span class='Ref_To_Local'>bound_data</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN271"><span class='Ref_To_Local'>bound_len</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN49"><span class='Ref_to_Macro'>RANGE_HAS_UBOUND</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN249"><span class='Ref_To_Local'>flags</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN280"></a>        <a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>       <span class='Declare_Local'>bound</span> <span class='Operator'>= </span><a href="../../../include/postgres.h.html#LN561"><span class='Ref_to_Macro'>PointerGetDatum</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN652"><span class='Ref_to_Proto'>SendFunctionCall</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rangetypes.c.html#LN248"><span class='Ref_To_Local'>cache</span></a><span class='Operator'>-&GT;</span><a href="rangetypes.c.html#LN52"><span class='Ref_to_Member'>proc</span></a><span class='Delimiter'>, 
</span>                                                             <a href="rangetypes.c.html#LN251"><span class='Ref_To_Local'>upper</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN61"><span class='Ref_to_Member'>val</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span><a name="LN282"></a>        <a href="../../../include/c.h.html#LN267"><span class='Ref_to_Typedef'>uint32</span></a>      <span class='Declare_Local'>bound_len</span> <span class='Operator'>= </span><a href="../../../include/postgres.h.html#LN303"><span class='Ref_to_Macro'>VARSIZE</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN280"><span class='Ref_To_Local'>bound</span></a><span class='Parentheses'>) </span><span class='Operator'>- </span><a href="../../../include/c.h.html#LN444"><span class='Ref_to_Const'>VARHDRSZ</span></a><span class='Delimiter'>; 
</span><a name="LN283"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>bound_data</span> <span class='Operator'>= </span><a href="../../../include/postgres.h.html#LN302"><span class='Ref_to_Macro'>VARDATA</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN280"><span class='Ref_To_Local'>bound</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../../include/libpq/pqformat.h.html#LN25"><span class='Ref_to_Proto'>pq_sendint</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN247"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN282"><span class='Ref_To_Local'>bound_len</span></a><span class='Delimiter'>, </span><span class='Number'>4</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../../include/libpq/pqformat.h.html#LN19"><span class='Ref_to_Proto'>pq_sendbytes</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN247"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN283"><span class='Ref_To_Local'>bound_data</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN282"><span class='Ref_To_Local'>bound_len</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../../include/fmgr.h.html#LN328"><span class='Ref_to_Macro'>PG_RETURN_BYTEA_P</span></a><span class='Parentheses'>(</span><a href="../../../include/libpq/pqformat.h.html#LN32"><span class='Ref_to_Proto'>pq_endtypsend</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN247"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end range_send &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * get_range_io_data: get cached information needed for range type I/O 
 * 
 * The range I/O functions need a bit more cached info than other range 
 * functions, so they store a RangeIOData struct in fn_extra, not just a 
 * pointer to a type cache entry. 
 */ 
</span><span class='Keyword'>static </span><a href="rangetypes.c.html#LN47"><span class='Ref_to_Struct'>RangeIOData</span></a> <span class='Operator'>* 
</span><a name="LN300"></a><span class='Declare_Function'>get_range_io_data</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN37"><span class='Ref_to_Typedef'>FunctionCallInfo</span></a> <span class='Declare_Parameter'>fcinfo</span><span class='Delimiter'>, </span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>rngtypid</span><span class='Delimiter'>, </span><a href="../../../include/utils/lsyscache.h.html#LN29"><span class='Ref_to_Enum'>IOFuncSelector</span></a> <span class='Declare_Parameter'>func</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN302"></a>    <a href="rangetypes.c.html#LN47"><span class='Ref_to_Struct'>RangeIOData</span></a> <span class='Operator'>*</span><span class='Declare_Local'>cache</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN47"><span class='Ref_to_Struct'>RangeIOData</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="rangetypes.c.html#LN300"><span class='Ref_to_Parameter'>fcinfo</span></a><span class='Operator'>-&GT;</span><a href="../../../include/fmgr.h.html#LN78"><span class='Ref_to_Member'>flinfo</span></a><span class='Operator'>-&GT;</span><a href="../../../include/fmgr.h.html#LN63"><span class='Ref_to_Member'>fn_extra</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN302"><span class='Ref_To_Local'>cache</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL </span><span class='Operator'>|| </span><a href="rangetypes.c.html#LN302"><span class='Ref_To_Local'>cache</span></a><span class='Operator'>-&GT;</span><a href="rangetypes.c.html#LN49"><span class='Ref_to_Member'>typcache</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/typcache.h.html#LN31"><span class='Ref_to_Member'>type_id</span></a> <span class='Operator'>!= </span><a href="rangetypes.c.html#LN300"><span class='Ref_to_Parameter'>rngtypid</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN306"></a>        <a href="../../../include/c.h.html#LN254"><span class='Ref_to_Typedef'>int16</span></a>       <span class='Declare_Local'>typlen</span><span class='Delimiter'>; 
</span><a name="LN307"></a>        <span class='Keyword'>bool</span>        <span class='Declare_Local'>typbyval</span><span class='Delimiter'>; 
</span><a name="LN308"></a>        <span class='Keyword'>char</span>        <span class='Declare_Local'>typalign</span><span class='Delimiter'>; 
</span><a name="LN309"></a>        <span class='Keyword'>char</span>        <span class='Declare_Local'>typdelim</span><span class='Delimiter'>; 
</span> 
        <a href="rangetypes.c.html#LN302"><span class='Ref_To_Local'>cache</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN47"><span class='Ref_to_Struct'>RangeIOData</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/utils/palloc.h.html#LN70"><span class='Ref_to_Proto'>MemoryContextAlloc</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN300"><span class='Ref_to_Parameter'>fcinfo</span></a><span class='Operator'>-&GT;</span><a href="../../../include/fmgr.h.html#LN78"><span class='Ref_to_Member'>flinfo</span></a><span class='Operator'>-&GT;</span><a href="../../../include/fmgr.h.html#LN64"><span class='Ref_to_Member'>fn_mcxt</span></a><span class='Delimiter'>, 
</span>                                                   <span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN47"><span class='Ref_to_Struct'>RangeIOData</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="rangetypes.c.html#LN302"><span class='Ref_To_Local'>cache</span></a><span class='Operator'>-&GT;</span><a href="rangetypes.c.html#LN49"><span class='Ref_to_Member'>typcache</span></a> <span class='Operator'>= </span><a href="../../../include/utils/typcache.h.html#LN142"><span class='Ref_to_Proto'>lookup_type_cache</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN300"><span class='Ref_to_Parameter'>rngtypid</span></a><span class='Delimiter'>, </span><a href="../../../include/utils/typcache.h.html#LN120"><span class='Ref_to_Const'>TYPECACHE_RANGE_INFO</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN302"><span class='Ref_To_Local'>cache</span></a><span class='Operator'>-&GT;</span><a href="rangetypes.c.html#LN49"><span class='Ref_to_Member'>typcache</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/typcache.h.html#LN83"><span class='Ref_to_Member'>rngelemtype</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"type %u is not a range type"</span><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN300"><span class='Ref_to_Parameter'>rngtypid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* get_type_io_data does more than we need, but is convenient */ 
</span>        <a href="../../../include/utils/lsyscache.h.html#LN139"><span class='Ref_to_Proto'>get_type_io_data</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN302"><span class='Ref_To_Local'>cache</span></a><span class='Operator'>-&GT;</span><a href="rangetypes.c.html#LN49"><span class='Ref_to_Member'>typcache</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/typcache.h.html#LN83"><span class='Ref_to_Member'>rngelemtype</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/typcache.h.html#LN31"><span class='Ref_to_Member'>type_id</span></a><span class='Delimiter'>, 
</span>                         <a href="rangetypes.c.html#LN300"><span class='Ref_to_Parameter'>func</span></a><span class='Delimiter'>, 
</span>                         <span class='Operator'>&</span><a href="rangetypes.c.html#LN306"><span class='Ref_To_Local'>typlen</span></a><span class='Delimiter'>, 
</span>                         <span class='Operator'>&</span><a href="rangetypes.c.html#LN307"><span class='Ref_To_Local'>typbyval</span></a><span class='Delimiter'>, 
</span>                         <span class='Operator'>&</span><a href="rangetypes.c.html#LN308"><span class='Ref_To_Local'>typalign</span></a><span class='Delimiter'>, 
</span>                         <span class='Operator'>&</span><a href="rangetypes.c.html#LN309"><span class='Ref_To_Local'>typdelim</span></a><span class='Delimiter'>, 
</span>                         <span class='Operator'>&</span><a href="rangetypes.c.html#LN302"><span class='Ref_To_Local'>cache</span></a><span class='Operator'>-&GT;</span><a href="rangetypes.c.html#LN51"><span class='Ref_to_Member'>typioparam</span></a><span class='Delimiter'>, 
</span>                         <span class='Operator'>&</span><a href="rangetypes.c.html#LN302"><span class='Ref_To_Local'>cache</span></a><span class='Operator'>-&GT;</span><a href="rangetypes.c.html#LN50"><span class='Ref_to_Member'>typiofunc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN302"><span class='Ref_To_Local'>cache</span></a><span class='Operator'>-&GT;</span><a href="rangetypes.c.html#LN50"><span class='Ref_to_Member'>typiofunc</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* this could only happen for receive or send */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN300"><span class='Ref_to_Parameter'>func</span></a> <span class='Operator'>== </span><a href="../../../include/utils/lsyscache.h.html#LN33"><span class='Ref_to_EnumConst'>IOFunc_receive</span></a><span class='Parentheses'>) 
</span>                <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_UNDEFINED_FUNCTION<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"no binary input function available for type %s"</span><span class='Delimiter'>, 
</span>                    <a href="format_type.c.html#LN92"><span class='Ref_to_Func'>format_type_be</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN302"><span class='Ref_To_Local'>cache</span></a><span class='Operator'>-&GT;</span><a href="rangetypes.c.html#LN49"><span class='Ref_to_Member'>typcache</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/typcache.h.html#LN83"><span class='Ref_to_Member'>rngelemtype</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/typcache.h.html#LN31"><span class='Ref_to_Member'>type_id</span></a><span class='Parentheses'>))))</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
                <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_UNDEFINED_FUNCTION<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                    <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"no binary output function available for type %s"</span><span class='Delimiter'>, 
</span>                    <a href="format_type.c.html#LN92"><span class='Ref_to_Func'>format_type_be</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN302"><span class='Ref_To_Local'>cache</span></a><span class='Operator'>-&GT;</span><a href="rangetypes.c.html#LN49"><span class='Ref_to_Member'>typcache</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/typcache.h.html#LN83"><span class='Ref_to_Member'>rngelemtype</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/typcache.h.html#LN31"><span class='Ref_to_Member'>type_id</span></a><span class='Parentheses'>))))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <a href="../../../include/fmgr.h.html#LN99"><span class='Ref_to_Proto'>fmgr_info_cxt</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN302"><span class='Ref_To_Local'>cache</span></a><span class='Operator'>-&GT;</span><a href="rangetypes.c.html#LN50"><span class='Ref_to_Member'>typiofunc</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN302"><span class='Ref_To_Local'>cache</span></a><span class='Operator'>-&GT;</span><a href="rangetypes.c.html#LN52"><span class='Ref_to_Member'>proc</span></a><span class='Delimiter'>, 
</span>                      <a href="rangetypes.c.html#LN300"><span class='Ref_to_Parameter'>fcinfo</span></a><span class='Operator'>-&GT;</span><a href="../../../include/fmgr.h.html#LN78"><span class='Ref_to_Member'>flinfo</span></a><span class='Operator'>-&GT;</span><a href="../../../include/fmgr.h.html#LN64"><span class='Ref_to_Member'>fn_mcxt</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="rangetypes.c.html#LN300"><span class='Ref_to_Parameter'>fcinfo</span></a><span class='Operator'>-&GT;</span><a href="../../../include/fmgr.h.html#LN78"><span class='Ref_to_Member'>flinfo</span></a><span class='Operator'>-&GT;</span><a href="../../../include/fmgr.h.html#LN63"><span class='Ref_to_Member'>fn_extra</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>void </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="rangetypes.c.html#LN302"><span class='Ref_To_Local'>cache</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if cache==NULL||cache-&GT;t... &raquo; </span> 
 
    <span class='Control'>return</span> <a href="rangetypes.c.html#LN302"><span class='Ref_To_Local'>cache</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end get_range_io_data &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* 
 *---------------------------------------------------------- 
 * GENERIC FUNCTIONS 
 *---------------------------------------------------------- 
 */ 
</span> 
<span class='Comment_Multi_Line'>/* Construct standard-form range value from two arguments */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN359"></a><span class='Declare_Function'>range_constructor2</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN361"></a>    <a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>       <span class='Declare_Local'>arg1</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN232"><span class='Ref_to_Macro'>PG_GETARG_DATUM</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN362"></a>    <a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>       <span class='Declare_Local'>arg2</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN232"><span class='Ref_to_Macro'>PG_GETARG_DATUM</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN363"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>rngtypid</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN662"><span class='Ref_to_Proto'>get_fn_expr_rettype</span></a><span class='Parentheses'>(</span>fcinfo<span class='Operator'>-&GT;</span>flinfo<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN364"></a>    <a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>range</span><span class='Delimiter'>; 
</span><a name="LN365"></a>    <a href="../../../include/utils/typcache.h.html#LN28"><span class='Ref_to_Struct'>TypeCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>typcache</span><span class='Delimiter'>; 
</span><a name="LN366"></a>    <a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a>  <span class='Declare_Local'>lower</span><span class='Delimiter'>; 
</span><a name="LN367"></a>    <a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a>  <span class='Declare_Local'>upper</span><span class='Delimiter'>; 
</span> 
    <a href="rangetypes.c.html#LN365"><span class='Ref_To_Local'>typcache</span></a> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN119"><span class='Ref_to_Proto'>range_get_typcache</span></a><span class='Parentheses'>(</span>fcinfo<span class='Delimiter'>, </span><a href="rangetypes.c.html#LN363"><span class='Ref_To_Local'>rngtypid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="rangetypes.c.html#LN366"><span class='Ref_To_Local'>lower</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN61"><span class='Ref_to_Member'>val</span></a> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN173"><span class='Ref_to_Macro'>PG_ARGISNULL</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a><span class='Parentheses'>) </span><span class='Number'>0</span> <span class='Operator'>: </span><a href="rangetypes.c.html#LN361"><span class='Ref_To_Local'>arg1</span></a><span class='Delimiter'>; 
</span>    <a href="rangetypes.c.html#LN366"><span class='Ref_To_Local'>lower</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN62"><span class='Ref_to_Member'>infinite</span></a> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN173"><span class='Ref_to_Macro'>PG_ARGISNULL</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="rangetypes.c.html#LN366"><span class='Ref_To_Local'>lower</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN63"><span class='Ref_to_Member'>inclusive</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <a href="rangetypes.c.html#LN366"><span class='Ref_To_Local'>lower</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN64"><span class='Ref_to_Member'>lower</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
    <a href="rangetypes.c.html#LN367"><span class='Ref_To_Local'>upper</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN61"><span class='Ref_to_Member'>val</span></a> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN173"><span class='Ref_to_Macro'>PG_ARGISNULL</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a><span class='Parentheses'>) </span><span class='Number'>0</span> <span class='Operator'>: </span><a href="rangetypes.c.html#LN362"><span class='Ref_To_Local'>arg2</span></a><span class='Delimiter'>; 
</span>    <a href="rangetypes.c.html#LN367"><span class='Ref_To_Local'>upper</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN62"><span class='Ref_to_Member'>infinite</span></a> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN173"><span class='Ref_to_Macro'>PG_ARGISNULL</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="rangetypes.c.html#LN367"><span class='Ref_To_Local'>upper</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN63"><span class='Ref_to_Member'>inclusive</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="rangetypes.c.html#LN367"><span class='Ref_To_Local'>upper</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN64"><span class='Ref_to_Member'>lower</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
    <a href="rangetypes.c.html#LN364"><span class='Ref_To_Local'>range</span></a> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN128"><span class='Ref_to_Proto'>make_range</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN365"><span class='Ref_To_Local'>typcache</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN366"><span class='Ref_To_Local'>lower</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN367"><span class='Ref_To_Local'>upper</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/rangetypes.h.html#LN75"><span class='Ref_to_Macro'>PG_RETURN_RANGE</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN364"><span class='Ref_To_Local'>range</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end range_constructor2 &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* Construct general range value from three arguments */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN388"></a><span class='Declare_Function'>range_constructor3</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN390"></a>    <a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>       <span class='Declare_Local'>arg1</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN232"><span class='Ref_to_Macro'>PG_GETARG_DATUM</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN391"></a>    <a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>       <span class='Declare_Local'>arg2</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN232"><span class='Ref_to_Macro'>PG_GETARG_DATUM</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN392"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>rngtypid</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN662"><span class='Ref_to_Proto'>get_fn_expr_rettype</span></a><span class='Parentheses'>(</span>fcinfo<span class='Operator'>-&GT;</span>flinfo<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN393"></a>    <a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>range</span><span class='Delimiter'>; 
</span><a name="LN394"></a>    <a href="../../../include/utils/typcache.h.html#LN28"><span class='Ref_to_Struct'>TypeCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>typcache</span><span class='Delimiter'>; 
</span><a name="LN395"></a>    <a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a>  <span class='Declare_Local'>lower</span><span class='Delimiter'>; 
</span><a name="LN396"></a>    <a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a>  <span class='Declare_Local'>upper</span><span class='Delimiter'>; 
</span><a name="LN397"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>flags</span><span class='Delimiter'>; 
</span> 
    <a href="rangetypes.c.html#LN394"><span class='Ref_To_Local'>typcache</span></a> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN119"><span class='Ref_to_Proto'>range_get_typcache</span></a><span class='Parentheses'>(</span>fcinfo<span class='Delimiter'>, </span><a href="rangetypes.c.html#LN392"><span class='Ref_To_Local'>rngtypid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN173"><span class='Ref_to_Macro'>PG_ARGISNULL</span></a><span class='Parentheses'>(</span><span class='Number'>2</span><span class='Parentheses'>))</span> 
        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_DATA_EXCEPTION<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>               <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"range constructor flags argument must not be null"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <a href="rangetypes.c.html#LN397"><span class='Ref_To_Local'>flags</span></a> <span class='Operator'>= </span><a href="rangetypes.c.html#LN58"><span class='Ref_to_Proto'>range_parse_flags</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/builtins.h.html#LN87"><span class='Ref_to_Proto'>text_to_cstring</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN272"><span class='Ref_to_Macro'>PG_GETARG_TEXT_PP</span></a><span class='Parentheses'>(</span><span class='Number'>2</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <a href="rangetypes.c.html#LN395"><span class='Ref_To_Local'>lower</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN61"><span class='Ref_to_Member'>val</span></a> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN173"><span class='Ref_to_Macro'>PG_ARGISNULL</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a><span class='Parentheses'>) </span><span class='Number'>0</span> <span class='Operator'>: </span><a href="rangetypes.c.html#LN390"><span class='Ref_To_Local'>arg1</span></a><span class='Delimiter'>; 
</span>    <a href="rangetypes.c.html#LN395"><span class='Ref_To_Local'>lower</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN62"><span class='Ref_to_Member'>infinite</span></a> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN173"><span class='Ref_to_Macro'>PG_ARGISNULL</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="rangetypes.c.html#LN395"><span class='Ref_To_Local'>lower</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN63"><span class='Ref_to_Member'>inclusive</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN397"><span class='Ref_To_Local'>flags</span></a> <span class='Operator'>& </span><a href="../../../include/utils/rangetypes.h.html#LN36"><span class='Ref_to_Const'>RANGE_LB_INC</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="rangetypes.c.html#LN395"><span class='Ref_To_Local'>lower</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN64"><span class='Ref_to_Member'>lower</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
    <a href="rangetypes.c.html#LN396"><span class='Ref_To_Local'>upper</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN61"><span class='Ref_to_Member'>val</span></a> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN173"><span class='Ref_to_Macro'>PG_ARGISNULL</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a><span class='Parentheses'>) </span><span class='Number'>0</span> <span class='Operator'>: </span><a href="rangetypes.c.html#LN391"><span class='Ref_To_Local'>arg2</span></a><span class='Delimiter'>; 
</span>    <a href="rangetypes.c.html#LN396"><span class='Ref_To_Local'>upper</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN62"><span class='Ref_to_Member'>infinite</span></a> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN173"><span class='Ref_to_Macro'>PG_ARGISNULL</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="rangetypes.c.html#LN396"><span class='Ref_To_Local'>upper</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN63"><span class='Ref_to_Member'>inclusive</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN397"><span class='Ref_To_Local'>flags</span></a> <span class='Operator'>& </span><a href="../../../include/utils/rangetypes.h.html#LN37"><span class='Ref_to_Const'>RANGE_UB_INC</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="rangetypes.c.html#LN396"><span class='Ref_To_Local'>upper</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN64"><span class='Ref_to_Member'>lower</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
    <a href="rangetypes.c.html#LN393"><span class='Ref_To_Local'>range</span></a> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN128"><span class='Ref_to_Proto'>make_range</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN394"><span class='Ref_To_Local'>typcache</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN395"><span class='Ref_To_Local'>lower</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN396"><span class='Ref_To_Local'>upper</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/rangetypes.h.html#LN75"><span class='Ref_to_Macro'>PG_RETURN_RANGE</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN393"><span class='Ref_To_Local'>range</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end range_constructor3 &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* range -&GT; subtype functions */ 
</span> 
<span class='Comment_Multi_Line'>/* extract lower bound value */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN428"></a><span class='Declare_Function'>range_lower</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN430"></a>    <a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>r1</span> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN73"><span class='Ref_to_Macro'>PG_GETARG_RANGE</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN431"></a>    <a href="../../../include/utils/typcache.h.html#LN28"><span class='Ref_to_Struct'>TypeCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>typcache</span><span class='Delimiter'>; 
</span><a name="LN432"></a>    <a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a>  <span class='Declare_Local'>lower</span><span class='Delimiter'>; 
</span><a name="LN433"></a>    <a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a>  <span class='Declare_Local'>upper</span><span class='Delimiter'>; 
</span><a name="LN434"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>empty</span><span class='Delimiter'>; 
</span> 
    <a href="rangetypes.c.html#LN431"><span class='Ref_To_Local'>typcache</span></a> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN119"><span class='Ref_to_Proto'>range_get_typcache</span></a><span class='Parentheses'>(</span>fcinfo<span class='Delimiter'>, </span><a href="../../../include/utils/rangetypes.h.html#LN32"><span class='Ref_to_Macro'>RangeTypeGetOid</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN430"><span class='Ref_To_Local'>r1</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/rangetypes.h.html#LN123"><span class='Ref_to_Proto'>range_deserialize</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN431"><span class='Ref_To_Local'>typcache</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN430"><span class='Ref_To_Local'>r1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN432"><span class='Ref_To_Local'>lower</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN433"><span class='Ref_To_Local'>upper</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN434"><span class='Ref_To_Local'>empty</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Return NULL if there's no finite lower bound */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN434"><span class='Ref_To_Local'>empty</span></a> <span class='Operator'>|| </span><a href="rangetypes.c.html#LN432"><span class='Ref_To_Local'>lower</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN62"><span class='Ref_to_Member'>infinite</span></a><span class='Parentheses'>) 
</span>        <a href="../../../include/fmgr.h.html#LN304"><span class='Ref_to_Macro'>PG_RETURN_NULL</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN312"><span class='Ref_to_Macro'>PG_RETURN_DATUM</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN432"><span class='Ref_To_Local'>lower</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN61"><span class='Ref_to_Member'>val</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* extract upper bound value */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN449"></a><span class='Declare_Function'>range_upper</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN451"></a>    <a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>r1</span> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN73"><span class='Ref_to_Macro'>PG_GETARG_RANGE</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN452"></a>    <a href="../../../include/utils/typcache.h.html#LN28"><span class='Ref_to_Struct'>TypeCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>typcache</span><span class='Delimiter'>; 
</span><a name="LN453"></a>    <a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a>  <span class='Declare_Local'>lower</span><span class='Delimiter'>; 
</span><a name="LN454"></a>    <a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a>  <span class='Declare_Local'>upper</span><span class='Delimiter'>; 
</span><a name="LN455"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>empty</span><span class='Delimiter'>; 
</span> 
    <a href="rangetypes.c.html#LN452"><span class='Ref_To_Local'>typcache</span></a> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN119"><span class='Ref_to_Proto'>range_get_typcache</span></a><span class='Parentheses'>(</span>fcinfo<span class='Delimiter'>, </span><a href="../../../include/utils/rangetypes.h.html#LN32"><span class='Ref_to_Macro'>RangeTypeGetOid</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN451"><span class='Ref_To_Local'>r1</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/rangetypes.h.html#LN123"><span class='Ref_to_Proto'>range_deserialize</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN452"><span class='Ref_To_Local'>typcache</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN451"><span class='Ref_To_Local'>r1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN453"><span class='Ref_To_Local'>lower</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN454"><span class='Ref_To_Local'>upper</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN455"><span class='Ref_To_Local'>empty</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Return NULL if there's no finite upper bound */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN455"><span class='Ref_To_Local'>empty</span></a> <span class='Operator'>|| </span><a href="rangetypes.c.html#LN454"><span class='Ref_To_Local'>upper</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN62"><span class='Ref_to_Member'>infinite</span></a><span class='Parentheses'>) 
</span>        <a href="../../../include/fmgr.h.html#LN304"><span class='Ref_to_Macro'>PG_RETURN_NULL</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN312"><span class='Ref_to_Macro'>PG_RETURN_DATUM</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN454"><span class='Ref_To_Local'>upper</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN61"><span class='Ref_to_Member'>val</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/* range -&GT; bool functions */ 
</span> 
<span class='Comment_Multi_Line'>/* is range empty? */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN473"></a><span class='Declare_Function'>range_empty</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN475"></a>    <a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>r1</span> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN73"><span class='Ref_to_Macro'>PG_GETARG_RANGE</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN476"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>flags</span> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN126"><span class='Ref_to_Proto'>range_get_flags</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN475"><span class='Ref_To_Local'>r1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN476"><span class='Ref_To_Local'>flags</span></a> <span class='Operator'>& </span><a href="../../../include/utils/rangetypes.h.html#LN35"><span class='Ref_to_Const'>RANGE_EMPTY</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* is lower bound inclusive? */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN483"></a><span class='Declare_Function'>range_lower_inc</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN485"></a>    <a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>r1</span> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN73"><span class='Ref_to_Macro'>PG_GETARG_RANGE</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN486"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>flags</span> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN126"><span class='Ref_to_Proto'>range_get_flags</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN485"><span class='Ref_To_Local'>r1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN486"><span class='Ref_To_Local'>flags</span></a> <span class='Operator'>& </span><a href="../../../include/utils/rangetypes.h.html#LN36"><span class='Ref_to_Const'>RANGE_LB_INC</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* is upper bound inclusive? */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN493"></a><span class='Declare_Function'>range_upper_inc</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN495"></a>    <a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>r1</span> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN73"><span class='Ref_to_Macro'>PG_GETARG_RANGE</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN496"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>flags</span> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN126"><span class='Ref_to_Proto'>range_get_flags</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN495"><span class='Ref_To_Local'>r1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN496"><span class='Ref_To_Local'>flags</span></a> <span class='Operator'>& </span><a href="../../../include/utils/rangetypes.h.html#LN37"><span class='Ref_to_Const'>RANGE_UB_INC</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* is lower bound infinite? */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN503"></a><span class='Declare_Function'>range_lower_inf</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN505"></a>    <a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>r1</span> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN73"><span class='Ref_to_Macro'>PG_GETARG_RANGE</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN506"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>flags</span> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN126"><span class='Ref_to_Proto'>range_get_flags</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN505"><span class='Ref_To_Local'>r1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN506"><span class='Ref_To_Local'>flags</span></a> <span class='Operator'>& </span><a href="../../../include/utils/rangetypes.h.html#LN38"><span class='Ref_to_Const'>RANGE_LB_INF</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* is upper bound infinite? */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN513"></a><span class='Declare_Function'>range_upper_inf</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN515"></a>    <a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>r1</span> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN73"><span class='Ref_to_Macro'>PG_GETARG_RANGE</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN516"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>flags</span> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN126"><span class='Ref_to_Proto'>range_get_flags</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN515"><span class='Ref_To_Local'>r1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN516"><span class='Ref_To_Local'>flags</span></a> <span class='Operator'>& </span><a href="../../../include/utils/rangetypes.h.html#LN39"><span class='Ref_to_Const'>RANGE_UB_INF</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/* range, element -&GT; bool functions */ 
</span> 
<span class='Comment_Multi_Line'>/* contains? */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN526"></a><span class='Declare_Function'>range_contains_elem</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN528"></a>    <a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>r</span> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN73"><span class='Ref_to_Macro'>PG_GETARG_RANGE</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN529"></a>    <a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>       <span class='Declare_Local'>val</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN232"><span class='Ref_to_Macro'>PG_GETARG_DATUM</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN530"></a>    <a href="../../../include/utils/typcache.h.html#LN28"><span class='Ref_to_Struct'>TypeCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>typcache</span><span class='Delimiter'>; 
</span> 
    <a href="rangetypes.c.html#LN530"><span class='Ref_To_Local'>typcache</span></a> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN119"><span class='Ref_to_Proto'>range_get_typcache</span></a><span class='Parentheses'>(</span>fcinfo<span class='Delimiter'>, </span><a href="../../../include/utils/rangetypes.h.html#LN32"><span class='Ref_to_Macro'>RangeTypeGetOid</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN528"><span class='Ref_To_Local'>r</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN94"><span class='Ref_to_Proto'>range_contains_elem_internal</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN530"><span class='Ref_To_Local'>typcache</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN528"><span class='Ref_To_Local'>r</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN529"><span class='Ref_To_Local'>val</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* contained by? */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN539"></a><span class='Declare_Function'>elem_contained_by_range</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN541"></a>    <a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>       <span class='Declare_Local'>val</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN232"><span class='Ref_to_Macro'>PG_GETARG_DATUM</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN542"></a>    <a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>r</span> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN73"><span class='Ref_to_Macro'>PG_GETARG_RANGE</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN543"></a>    <a href="../../../include/utils/typcache.h.html#LN28"><span class='Ref_to_Struct'>TypeCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>typcache</span><span class='Delimiter'>; 
</span> 
    <a href="rangetypes.c.html#LN543"><span class='Ref_To_Local'>typcache</span></a> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN119"><span class='Ref_to_Proto'>range_get_typcache</span></a><span class='Parentheses'>(</span>fcinfo<span class='Delimiter'>, </span><a href="../../../include/utils/rangetypes.h.html#LN32"><span class='Ref_to_Macro'>RangeTypeGetOid</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN542"><span class='Ref_To_Local'>r</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN94"><span class='Ref_to_Proto'>range_contains_elem_internal</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN543"><span class='Ref_To_Local'>typcache</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN542"><span class='Ref_To_Local'>r</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN541"><span class='Ref_To_Local'>val</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/* range, range -&GT; bool functions */ 
</span> 
<span class='Comment_Multi_Line'>/* equality (internal version) */ 
</span><span class='Keyword'>bool 
</span><a name="LN555"></a><span class='Declare_Function'>range_eq_internal</span><span class='Parentheses'>(</span><a href="../../../include/utils/typcache.h.html#LN28"><span class='Ref_to_Struct'>TypeCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>typcache</span><span class='Delimiter'>, </span><a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>r1</span><span class='Delimiter'>, </span><a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>r2</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN557"></a>    <a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a>  <span class='Declare_Local'>lower1</span><span class='Delimiter'>, 
</span><a name="LN558"></a>                <span class='Declare_Local'>lower2</span><span class='Delimiter'>; 
</span><a name="LN559"></a>    <a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a>  <span class='Declare_Local'>upper1</span><span class='Delimiter'>, 
</span><a name="LN560"></a>                <span class='Declare_Local'>upper2</span><span class='Delimiter'>; 
</span><a name="LN561"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>empty1</span><span class='Delimiter'>, 
</span><a name="LN562"></a>                <span class='Declare_Local'>empty2</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Different types should be prevented by ANYRANGE matching rules */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN32"><span class='Ref_to_Macro'>RangeTypeGetOid</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN555"><span class='Ref_to_Parameter'>r1</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><a href="../../../include/utils/rangetypes.h.html#LN32"><span class='Ref_to_Macro'>RangeTypeGetOid</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN555"><span class='Ref_to_Parameter'>r2</span></a><span class='Parentheses'>))</span> 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"range types do not match"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/rangetypes.h.html#LN123"><span class='Ref_to_Proto'>range_deserialize</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN555"><span class='Ref_to_Parameter'>typcache</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN555"><span class='Ref_to_Parameter'>r1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN557"><span class='Ref_To_Local'>lower1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN559"><span class='Ref_To_Local'>upper1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN561"><span class='Ref_To_Local'>empty1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/utils/rangetypes.h.html#LN123"><span class='Ref_to_Proto'>range_deserialize</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN555"><span class='Ref_to_Parameter'>typcache</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN555"><span class='Ref_to_Parameter'>r2</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN558"><span class='Ref_To_Local'>lower2</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN560"><span class='Ref_To_Local'>upper2</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN562"><span class='Ref_To_Local'>empty2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN561"><span class='Ref_To_Local'>empty1</span></a> <span class='Operator'>&& </span><a href="rangetypes.c.html#LN562"><span class='Ref_To_Local'>empty2</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN561"><span class='Ref_To_Local'>empty1</span></a> <span class='Operator'>!= </span><a href="rangetypes.c.html#LN562"><span class='Ref_To_Local'>empty2</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN130"><span class='Ref_to_Proto'>range_cmp_bounds</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN555"><span class='Ref_to_Parameter'>typcache</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN557"><span class='Ref_To_Local'>lower1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN558"><span class='Ref_To_Local'>lower2</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN130"><span class='Ref_to_Proto'>range_cmp_bounds</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN555"><span class='Ref_to_Parameter'>typcache</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN559"><span class='Ref_To_Local'>upper1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN560"><span class='Ref_To_Local'>upper2</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end range_eq_internal &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* equality */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN587"></a><span class='Declare_Function'>range_eq</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN589"></a>    <a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>r1</span> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN73"><span class='Ref_to_Macro'>PG_GETARG_RANGE</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN590"></a>    <a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>r2</span> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN73"><span class='Ref_to_Macro'>PG_GETARG_RANGE</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN591"></a>    <a href="../../../include/utils/typcache.h.html#LN28"><span class='Ref_to_Struct'>TypeCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>typcache</span><span class='Delimiter'>; 
</span> 
    <a href="rangetypes.c.html#LN591"><span class='Ref_To_Local'>typcache</span></a> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN119"><span class='Ref_to_Proto'>range_get_typcache</span></a><span class='Parentheses'>(</span>fcinfo<span class='Delimiter'>, </span><a href="../../../include/utils/rangetypes.h.html#LN32"><span class='Ref_to_Macro'>RangeTypeGetOid</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN589"><span class='Ref_To_Local'>r1</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN97"><span class='Ref_to_Proto'>range_eq_internal</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN591"><span class='Ref_To_Local'>typcache</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN589"><span class='Ref_To_Local'>r1</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN590"><span class='Ref_To_Local'>r2</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* inequality (internal version) */ 
</span><span class='Keyword'>bool 
</span><a name="LN600"></a><span class='Declare_Function'>range_ne_internal</span><span class='Parentheses'>(</span><a href="../../../include/utils/typcache.h.html#LN28"><span class='Ref_to_Struct'>TypeCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>typcache</span><span class='Delimiter'>, </span><a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>r1</span><span class='Delimiter'>, </span><a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>r2</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/utils/rangetypes.h.html#LN97"><span class='Ref_to_Proto'>range_eq_internal</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN600"><span class='Ref_to_Parameter'>typcache</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN600"><span class='Ref_to_Parameter'>r1</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN600"><span class='Ref_to_Parameter'>r2</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* inequality */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN607"></a><span class='Declare_Function'>range_ne</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN609"></a>    <a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>r1</span> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN73"><span class='Ref_to_Macro'>PG_GETARG_RANGE</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN610"></a>    <a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>r2</span> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN73"><span class='Ref_to_Macro'>PG_GETARG_RANGE</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN611"></a>    <a href="../../../include/utils/typcache.h.html#LN28"><span class='Ref_to_Struct'>TypeCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>typcache</span><span class='Delimiter'>; 
</span> 
    <a href="rangetypes.c.html#LN611"><span class='Ref_To_Local'>typcache</span></a> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN119"><span class='Ref_to_Proto'>range_get_typcache</span></a><span class='Parentheses'>(</span>fcinfo<span class='Delimiter'>, </span><a href="../../../include/utils/rangetypes.h.html#LN32"><span class='Ref_to_Macro'>RangeTypeGetOid</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN609"><span class='Ref_To_Local'>r1</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN99"><span class='Ref_to_Proto'>range_ne_internal</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN611"><span class='Ref_To_Local'>typcache</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN609"><span class='Ref_To_Local'>r1</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN610"><span class='Ref_To_Local'>r2</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* contains? */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN620"></a><span class='Declare_Function'>range_contains</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN622"></a>    <a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>r1</span> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN73"><span class='Ref_to_Macro'>PG_GETARG_RANGE</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN623"></a>    <a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>r2</span> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN73"><span class='Ref_to_Macro'>PG_GETARG_RANGE</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN624"></a>    <a href="../../../include/utils/typcache.h.html#LN28"><span class='Ref_to_Struct'>TypeCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>typcache</span><span class='Delimiter'>; 
</span> 
    <a href="rangetypes.c.html#LN624"><span class='Ref_To_Local'>typcache</span></a> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN119"><span class='Ref_to_Proto'>range_get_typcache</span></a><span class='Parentheses'>(</span>fcinfo<span class='Delimiter'>, </span><a href="../../../include/utils/rangetypes.h.html#LN32"><span class='Ref_to_Macro'>RangeTypeGetOid</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN622"><span class='Ref_To_Local'>r1</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN101"><span class='Ref_to_Proto'>range_contains_internal</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN624"><span class='Ref_To_Local'>typcache</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN622"><span class='Ref_To_Local'>r1</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN623"><span class='Ref_To_Local'>r2</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* contained by? */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN633"></a><span class='Declare_Function'>range_contained_by</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN635"></a>    <a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>r1</span> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN73"><span class='Ref_to_Macro'>PG_GETARG_RANGE</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN636"></a>    <a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>r2</span> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN73"><span class='Ref_to_Macro'>PG_GETARG_RANGE</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN637"></a>    <a href="../../../include/utils/typcache.h.html#LN28"><span class='Ref_to_Struct'>TypeCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>typcache</span><span class='Delimiter'>; 
</span> 
    <a href="rangetypes.c.html#LN637"><span class='Ref_To_Local'>typcache</span></a> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN119"><span class='Ref_to_Proto'>range_get_typcache</span></a><span class='Parentheses'>(</span>fcinfo<span class='Delimiter'>, </span><a href="../../../include/utils/rangetypes.h.html#LN32"><span class='Ref_to_Macro'>RangeTypeGetOid</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN635"><span class='Ref_To_Local'>r1</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN103"><span class='Ref_to_Proto'>range_contained_by_internal</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN637"><span class='Ref_To_Local'>typcache</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN635"><span class='Ref_To_Local'>r1</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN636"><span class='Ref_To_Local'>r2</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* strictly left of? (internal version) */ 
</span><span class='Keyword'>bool 
</span><a name="LN646"></a><span class='Declare_Function'>range_before_internal</span><span class='Parentheses'>(</span><a href="../../../include/utils/typcache.h.html#LN28"><span class='Ref_to_Struct'>TypeCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>typcache</span><span class='Delimiter'>, </span><a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>r1</span><span class='Delimiter'>, </span><a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>r2</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN648"></a>    <a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a>  <span class='Declare_Local'>lower1</span><span class='Delimiter'>, 
</span><a name="LN649"></a>                <span class='Declare_Local'>lower2</span><span class='Delimiter'>; 
</span><a name="LN650"></a>    <a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a>  <span class='Declare_Local'>upper1</span><span class='Delimiter'>, 
</span><a name="LN651"></a>                <span class='Declare_Local'>upper2</span><span class='Delimiter'>; 
</span><a name="LN652"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>empty1</span><span class='Delimiter'>, 
</span><a name="LN653"></a>                <span class='Declare_Local'>empty2</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Different types should be prevented by ANYRANGE matching rules */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN32"><span class='Ref_to_Macro'>RangeTypeGetOid</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN646"><span class='Ref_to_Parameter'>r1</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><a href="../../../include/utils/rangetypes.h.html#LN32"><span class='Ref_to_Macro'>RangeTypeGetOid</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN646"><span class='Ref_to_Parameter'>r2</span></a><span class='Parentheses'>))</span> 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"range types do not match"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/rangetypes.h.html#LN123"><span class='Ref_to_Proto'>range_deserialize</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN646"><span class='Ref_to_Parameter'>typcache</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN646"><span class='Ref_to_Parameter'>r1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN648"><span class='Ref_To_Local'>lower1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN650"><span class='Ref_To_Local'>upper1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN652"><span class='Ref_To_Local'>empty1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/utils/rangetypes.h.html#LN123"><span class='Ref_to_Proto'>range_deserialize</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN646"><span class='Ref_to_Parameter'>typcache</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN646"><span class='Ref_to_Parameter'>r2</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN649"><span class='Ref_To_Local'>lower2</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN651"><span class='Ref_To_Local'>upper2</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN653"><span class='Ref_To_Local'>empty2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* An empty range is neither before nor after any other range */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN652"><span class='Ref_To_Local'>empty1</span></a> <span class='Operator'>|| </span><a href="rangetypes.c.html#LN653"><span class='Ref_To_Local'>empty2</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN130"><span class='Ref_to_Proto'>range_cmp_bounds</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN646"><span class='Ref_to_Parameter'>typcache</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN650"><span class='Ref_To_Local'>upper1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN649"><span class='Ref_To_Local'>lower2</span></a><span class='Parentheses'>) </span><span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end range_before_internal &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* strictly left of? */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN671"></a><span class='Declare_Function'>range_before</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN673"></a>    <a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>r1</span> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN73"><span class='Ref_to_Macro'>PG_GETARG_RANGE</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN674"></a>    <a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>r2</span> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN73"><span class='Ref_to_Macro'>PG_GETARG_RANGE</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN675"></a>    <a href="../../../include/utils/typcache.h.html#LN28"><span class='Ref_to_Struct'>TypeCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>typcache</span><span class='Delimiter'>; 
</span> 
    <a href="rangetypes.c.html#LN675"><span class='Ref_To_Local'>typcache</span></a> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN119"><span class='Ref_to_Proto'>range_get_typcache</span></a><span class='Parentheses'>(</span>fcinfo<span class='Delimiter'>, </span><a href="../../../include/utils/rangetypes.h.html#LN32"><span class='Ref_to_Macro'>RangeTypeGetOid</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN673"><span class='Ref_To_Local'>r1</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN105"><span class='Ref_to_Proto'>range_before_internal</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN675"><span class='Ref_To_Local'>typcache</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN673"><span class='Ref_To_Local'>r1</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN674"><span class='Ref_To_Local'>r2</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* strictly right of? (internal version) */ 
</span><span class='Keyword'>bool 
</span><a name="LN684"></a><span class='Declare_Function'>range_after_internal</span><span class='Parentheses'>(</span><a href="../../../include/utils/typcache.h.html#LN28"><span class='Ref_to_Struct'>TypeCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>typcache</span><span class='Delimiter'>, </span><a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>r1</span><span class='Delimiter'>, </span><a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>r2</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN686"></a>    <a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a>  <span class='Declare_Local'>lower1</span><span class='Delimiter'>, 
</span><a name="LN687"></a>                <span class='Declare_Local'>lower2</span><span class='Delimiter'>; 
</span><a name="LN688"></a>    <a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a>  <span class='Declare_Local'>upper1</span><span class='Delimiter'>, 
</span><a name="LN689"></a>                <span class='Declare_Local'>upper2</span><span class='Delimiter'>; 
</span><a name="LN690"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>empty1</span><span class='Delimiter'>, 
</span><a name="LN691"></a>                <span class='Declare_Local'>empty2</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Different types should be prevented by ANYRANGE matching rules */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN32"><span class='Ref_to_Macro'>RangeTypeGetOid</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN684"><span class='Ref_to_Parameter'>r1</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><a href="../../../include/utils/rangetypes.h.html#LN32"><span class='Ref_to_Macro'>RangeTypeGetOid</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN684"><span class='Ref_to_Parameter'>r2</span></a><span class='Parentheses'>))</span> 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"range types do not match"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/rangetypes.h.html#LN123"><span class='Ref_to_Proto'>range_deserialize</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN684"><span class='Ref_to_Parameter'>typcache</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN684"><span class='Ref_to_Parameter'>r1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN686"><span class='Ref_To_Local'>lower1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN688"><span class='Ref_To_Local'>upper1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN690"><span class='Ref_To_Local'>empty1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/utils/rangetypes.h.html#LN123"><span class='Ref_to_Proto'>range_deserialize</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN684"><span class='Ref_to_Parameter'>typcache</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN684"><span class='Ref_to_Parameter'>r2</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN687"><span class='Ref_To_Local'>lower2</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN689"><span class='Ref_To_Local'>upper2</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN691"><span class='Ref_To_Local'>empty2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* An empty range is neither before nor after any other range */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN690"><span class='Ref_To_Local'>empty1</span></a> <span class='Operator'>|| </span><a href="rangetypes.c.html#LN691"><span class='Ref_To_Local'>empty2</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN130"><span class='Ref_to_Proto'>range_cmp_bounds</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN684"><span class='Ref_to_Parameter'>typcache</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN686"><span class='Ref_To_Local'>lower1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN689"><span class='Ref_To_Local'>upper2</span></a><span class='Parentheses'>) </span><span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end range_after_internal &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* strictly right of? */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN709"></a><span class='Declare_Function'>range_after</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN711"></a>    <a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>r1</span> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN73"><span class='Ref_to_Macro'>PG_GETARG_RANGE</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN712"></a>    <a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>r2</span> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN73"><span class='Ref_to_Macro'>PG_GETARG_RANGE</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN713"></a>    <a href="../../../include/utils/typcache.h.html#LN28"><span class='Ref_to_Struct'>TypeCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>typcache</span><span class='Delimiter'>; 
</span> 
    <a href="rangetypes.c.html#LN713"><span class='Ref_To_Local'>typcache</span></a> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN119"><span class='Ref_to_Proto'>range_get_typcache</span></a><span class='Parentheses'>(</span>fcinfo<span class='Delimiter'>, </span><a href="../../../include/utils/rangetypes.h.html#LN32"><span class='Ref_to_Macro'>RangeTypeGetOid</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN711"><span class='Ref_To_Local'>r1</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN107"><span class='Ref_to_Proto'>range_after_internal</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN713"><span class='Ref_To_Local'>typcache</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN711"><span class='Ref_To_Local'>r1</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN712"><span class='Ref_To_Local'>r2</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Check if two bounds A and B are "adjacent", where A is an upper bound and B 
 * is a lower bound. For the bounds to be adjacent, each subtype value must 
 * satisfy strictly one of the bounds: there are no values which satisfy both 
 * bounds (i.e. less than A and greater than B); and there are no values which 
 * satisfy neither bound (i.e. greater than A and less than B). 
 * 
 * For discrete ranges, we rely on the canonicalization function to see if A..B 
 * normalizes to empty. (If there is no canonicalization function, it's 
 * impossible for such a range to normalize to empty, so we needn't bother to 
 * try.) 
 * 
 * If A == B, the ranges are adjacent only if the bounds have different 
 * inclusive flags (i.e., exactly one of the ranges includes the common 
 * boundary point). 
 * 
 * And if A &GT; B then the ranges are not adjacent in this order. 
 */ 
</span><span class='Keyword'>bool 
</span><a name="LN739"></a><span class='Declare_Function'>bounds_adjacent</span><span class='Parentheses'>(</span><a href="../../../include/utils/typcache.h.html#LN28"><span class='Ref_to_Struct'>TypeCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>typcache</span><span class='Delimiter'>, </span><a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a> <span class='Declare_Parameter'>boundA</span><span class='Delimiter'>, </span><a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a> <span class='Declare_Parameter'>boundB</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN741"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>cmp</span><span class='Delimiter'>; 
</span> 
    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><span class='Operator'>!</span><a href="rangetypes.c.html#LN739"><span class='Ref_to_Parameter'>boundA</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN64"><span class='Ref_to_Member'>lower</span></a> <span class='Operator'>&& </span><a href="rangetypes.c.html#LN739"><span class='Ref_to_Parameter'>boundB</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN64"><span class='Ref_to_Member'>lower</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="rangetypes.c.html#LN741"><span class='Ref_To_Local'>cmp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN132"><span class='Ref_to_Proto'>range_cmp_bound_values</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN739"><span class='Ref_to_Parameter'>typcache</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN739"><span class='Ref_to_Parameter'>boundA</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN739"><span class='Ref_to_Parameter'>boundB</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN741"><span class='Ref_To_Local'>cmp</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN748"></a>        <a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>r</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Bounds do not overlap; see if there are points in between. 
         */ 
</span> 
        <span class='Comment_Multi_Line'>/* in a continuous subtype, there are assumed to be points between */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN739"><span class='Ref_to_Parameter'>typcache</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/typcache.h.html#LN86"><span class='Ref_to_Member'>rng_canonical_finfo</span></a><span class='Operator'>.</span><a href="../../../include/fmgr.h.html#LN58"><span class='Ref_to_Member'>fn_oid</span></a><span class='Parentheses'>))</span> 
            <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * The bounds are of a discrete range type; so make a range A..B and 
         * see if it's empty. 
         */ 
</span> 
        <span class='Comment_Multi_Line'>/* flip the inclusion flags */ 
</span>        <a href="rangetypes.c.html#LN739"><span class='Ref_to_Parameter'>boundA</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN63"><span class='Ref_to_Member'>inclusive</span></a> <span class='Operator'>= !</span><a href="rangetypes.c.html#LN739"><span class='Ref_to_Parameter'>boundA</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN63"><span class='Ref_to_Member'>inclusive</span></a><span class='Delimiter'>; 
</span>        <a href="rangetypes.c.html#LN739"><span class='Ref_to_Parameter'>boundB</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN63"><span class='Ref_to_Member'>inclusive</span></a> <span class='Operator'>= !</span><a href="rangetypes.c.html#LN739"><span class='Ref_to_Parameter'>boundB</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN63"><span class='Ref_to_Member'>inclusive</span></a><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* change upper/lower labels to avoid Assert failures */ 
</span>        <a href="rangetypes.c.html#LN739"><span class='Ref_to_Parameter'>boundA</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN64"><span class='Ref_to_Member'>lower</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>        <a href="rangetypes.c.html#LN739"><span class='Ref_to_Parameter'>boundB</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN64"><span class='Ref_to_Member'>lower</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>        <a href="rangetypes.c.html#LN748"><span class='Ref_To_Local'>r</span></a> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN128"><span class='Ref_to_Proto'>make_range</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN739"><span class='Ref_to_Parameter'>typcache</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN739"><span class='Ref_to_Parameter'>boundA</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN739"><span class='Ref_to_Parameter'>boundB</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <a href="../../../include/utils/rangetypes.h.html#LN53"><span class='Ref_to_Macro'>RangeIsEmpty</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN748"><span class='Ref_To_Local'>r</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if cmp&LT;0 &raquo; </span> 
    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN741"><span class='Ref_To_Local'>cmp</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <a href="rangetypes.c.html#LN739"><span class='Ref_to_Parameter'>boundA</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN63"><span class='Ref_to_Member'>inclusive</span></a> <span class='Operator'>!= </span><a href="rangetypes.c.html#LN739"><span class='Ref_to_Parameter'>boundB</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN63"><span class='Ref_to_Member'>inclusive</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>;</span>           <span class='Comment_Single_Line'>/* bounds overlap */ 
</span><span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end bounds_adjacent &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* adjacent to (but not overlapping)? (internal version) */ 
</span><span class='Keyword'>bool 
</span><a name="LN780"></a><span class='Declare_Function'>range_adjacent_internal</span><span class='Parentheses'>(</span><a href="../../../include/utils/typcache.h.html#LN28"><span class='Ref_to_Struct'>TypeCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>typcache</span><span class='Delimiter'>, </span><a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>r1</span><span class='Delimiter'>, </span><a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>r2</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN782"></a>    <a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a>  <span class='Declare_Local'>lower1</span><span class='Delimiter'>, 
</span><a name="LN783"></a>                <span class='Declare_Local'>lower2</span><span class='Delimiter'>; 
</span><a name="LN784"></a>    <a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a>  <span class='Declare_Local'>upper1</span><span class='Delimiter'>, 
</span><a name="LN785"></a>                <span class='Declare_Local'>upper2</span><span class='Delimiter'>; 
</span><a name="LN786"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>empty1</span><span class='Delimiter'>, 
</span><a name="LN787"></a>                <span class='Declare_Local'>empty2</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Different types should be prevented by ANYRANGE matching rules */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN32"><span class='Ref_to_Macro'>RangeTypeGetOid</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN780"><span class='Ref_to_Parameter'>r1</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><a href="../../../include/utils/rangetypes.h.html#LN32"><span class='Ref_to_Macro'>RangeTypeGetOid</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN780"><span class='Ref_to_Parameter'>r2</span></a><span class='Parentheses'>))</span> 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"range types do not match"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/rangetypes.h.html#LN123"><span class='Ref_to_Proto'>range_deserialize</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN780"><span class='Ref_to_Parameter'>typcache</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN780"><span class='Ref_to_Parameter'>r1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN782"><span class='Ref_To_Local'>lower1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN784"><span class='Ref_To_Local'>upper1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN786"><span class='Ref_To_Local'>empty1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/utils/rangetypes.h.html#LN123"><span class='Ref_to_Proto'>range_deserialize</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN780"><span class='Ref_to_Parameter'>typcache</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN780"><span class='Ref_to_Parameter'>r2</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN783"><span class='Ref_To_Local'>lower2</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN785"><span class='Ref_To_Local'>upper2</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN787"><span class='Ref_To_Local'>empty2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* An empty range is not adjacent to any other range */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN786"><span class='Ref_To_Local'>empty1</span></a> <span class='Operator'>|| </span><a href="rangetypes.c.html#LN787"><span class='Ref_To_Local'>empty2</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Given two ranges A..B and C..D, the ranges are adjacent if and only if 
     * B is adjacent to C, or D is adjacent to A. 
     */ 
</span>    <span class='Control'>return</span> <span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN134"><span class='Ref_to_Proto'>bounds_adjacent</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN780"><span class='Ref_to_Parameter'>typcache</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN784"><span class='Ref_To_Local'>upper1</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN783"><span class='Ref_To_Local'>lower2</span></a><span class='Parentheses'>) </span><span class='Operator'>|| 
</span>            <a href="../../../include/utils/rangetypes.h.html#LN134"><span class='Ref_to_Proto'>bounds_adjacent</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN780"><span class='Ref_to_Parameter'>typcache</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN785"><span class='Ref_To_Local'>upper2</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN782"><span class='Ref_To_Local'>lower1</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end range_adjacent_internal &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* adjacent to (but not overlapping)? */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN810"></a><span class='Declare_Function'>range_adjacent</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN812"></a>    <a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>r1</span> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN73"><span class='Ref_to_Macro'>PG_GETARG_RANGE</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN813"></a>    <a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>r2</span> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN73"><span class='Ref_to_Macro'>PG_GETARG_RANGE</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN814"></a>    <a href="../../../include/utils/typcache.h.html#LN28"><span class='Ref_to_Struct'>TypeCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>typcache</span><span class='Delimiter'>; 
</span> 
    <a href="rangetypes.c.html#LN814"><span class='Ref_To_Local'>typcache</span></a> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN119"><span class='Ref_to_Proto'>range_get_typcache</span></a><span class='Parentheses'>(</span>fcinfo<span class='Delimiter'>, </span><a href="../../../include/utils/rangetypes.h.html#LN32"><span class='Ref_to_Macro'>RangeTypeGetOid</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN812"><span class='Ref_To_Local'>r1</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN109"><span class='Ref_to_Proto'>range_adjacent_internal</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN814"><span class='Ref_To_Local'>typcache</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN812"><span class='Ref_To_Local'>r1</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN813"><span class='Ref_To_Local'>r2</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* overlaps? (internal version) */ 
</span><span class='Keyword'>bool 
</span><a name="LN823"></a><span class='Declare_Function'>range_overlaps_internal</span><span class='Parentheses'>(</span><a href="../../../include/utils/typcache.h.html#LN28"><span class='Ref_to_Struct'>TypeCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>typcache</span><span class='Delimiter'>, </span><a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>r1</span><span class='Delimiter'>, </span><a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>r2</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN825"></a>    <a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a>  <span class='Declare_Local'>lower1</span><span class='Delimiter'>, 
</span><a name="LN826"></a>                <span class='Declare_Local'>lower2</span><span class='Delimiter'>; 
</span><a name="LN827"></a>    <a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a>  <span class='Declare_Local'>upper1</span><span class='Delimiter'>, 
</span><a name="LN828"></a>                <span class='Declare_Local'>upper2</span><span class='Delimiter'>; 
</span><a name="LN829"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>empty1</span><span class='Delimiter'>, 
</span><a name="LN830"></a>                <span class='Declare_Local'>empty2</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Different types should be prevented by ANYRANGE matching rules */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN32"><span class='Ref_to_Macro'>RangeTypeGetOid</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN823"><span class='Ref_to_Parameter'>r1</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><a href="../../../include/utils/rangetypes.h.html#LN32"><span class='Ref_to_Macro'>RangeTypeGetOid</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN823"><span class='Ref_to_Parameter'>r2</span></a><span class='Parentheses'>))</span> 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"range types do not match"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/rangetypes.h.html#LN123"><span class='Ref_to_Proto'>range_deserialize</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN823"><span class='Ref_to_Parameter'>typcache</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN823"><span class='Ref_to_Parameter'>r1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN825"><span class='Ref_To_Local'>lower1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN827"><span class='Ref_To_Local'>upper1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN829"><span class='Ref_To_Local'>empty1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/utils/rangetypes.h.html#LN123"><span class='Ref_to_Proto'>range_deserialize</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN823"><span class='Ref_to_Parameter'>typcache</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN823"><span class='Ref_to_Parameter'>r2</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN826"><span class='Ref_To_Local'>lower2</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN828"><span class='Ref_To_Local'>upper2</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN830"><span class='Ref_To_Local'>empty2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* An empty range does not overlap any other range */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN829"><span class='Ref_To_Local'>empty1</span></a> <span class='Operator'>|| </span><a href="rangetypes.c.html#LN830"><span class='Ref_To_Local'>empty2</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN130"><span class='Ref_to_Proto'>range_cmp_bounds</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN823"><span class='Ref_to_Parameter'>typcache</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN825"><span class='Ref_To_Local'>lower1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN826"><span class='Ref_To_Local'>lower2</span></a><span class='Parentheses'>) </span><span class='Operator'>&GT;= </span><span class='Number'>0</span> <span class='Operator'>&& 
</span>        <a href="../../../include/utils/rangetypes.h.html#LN130"><span class='Ref_to_Proto'>range_cmp_bounds</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN823"><span class='Ref_to_Parameter'>typcache</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN825"><span class='Ref_To_Local'>lower1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN828"><span class='Ref_To_Local'>upper2</span></a><span class='Parentheses'>) </span><span class='Operator'>&LT;= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN130"><span class='Ref_to_Proto'>range_cmp_bounds</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN823"><span class='Ref_to_Parameter'>typcache</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN826"><span class='Ref_To_Local'>lower2</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN825"><span class='Ref_To_Local'>lower1</span></a><span class='Parentheses'>) </span><span class='Operator'>&GT;= </span><span class='Number'>0</span> <span class='Operator'>&& 
</span>        <a href="../../../include/utils/rangetypes.h.html#LN130"><span class='Ref_to_Proto'>range_cmp_bounds</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN823"><span class='Ref_to_Parameter'>typcache</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN826"><span class='Ref_To_Local'>lower2</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN827"><span class='Ref_To_Local'>upper1</span></a><span class='Parentheses'>) </span><span class='Operator'>&LT;= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end range_overlaps_internal &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* overlaps? */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN856"></a><span class='Declare_Function'>range_overlaps</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN858"></a>    <a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>r1</span> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN73"><span class='Ref_to_Macro'>PG_GETARG_RANGE</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN859"></a>    <a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>r2</span> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN73"><span class='Ref_to_Macro'>PG_GETARG_RANGE</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN860"></a>    <a href="../../../include/utils/typcache.h.html#LN28"><span class='Ref_to_Struct'>TypeCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>typcache</span><span class='Delimiter'>; 
</span> 
    <a href="rangetypes.c.html#LN860"><span class='Ref_To_Local'>typcache</span></a> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN119"><span class='Ref_to_Proto'>range_get_typcache</span></a><span class='Parentheses'>(</span>fcinfo<span class='Delimiter'>, </span><a href="../../../include/utils/rangetypes.h.html#LN32"><span class='Ref_to_Macro'>RangeTypeGetOid</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN858"><span class='Ref_To_Local'>r1</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN111"><span class='Ref_to_Proto'>range_overlaps_internal</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN860"><span class='Ref_To_Local'>typcache</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN858"><span class='Ref_To_Local'>r1</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN859"><span class='Ref_To_Local'>r2</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* does not extend to right of? (internal version) */ 
</span><span class='Keyword'>bool 
</span><a name="LN869"></a><span class='Declare_Function'>range_overleft_internal</span><span class='Parentheses'>(</span><a href="../../../include/utils/typcache.h.html#LN28"><span class='Ref_to_Struct'>TypeCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>typcache</span><span class='Delimiter'>, </span><a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>r1</span><span class='Delimiter'>, </span><a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>r2</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN871"></a>    <a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a>  <span class='Declare_Local'>lower1</span><span class='Delimiter'>, 
</span><a name="LN872"></a>                <span class='Declare_Local'>lower2</span><span class='Delimiter'>; 
</span><a name="LN873"></a>    <a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a>  <span class='Declare_Local'>upper1</span><span class='Delimiter'>, 
</span><a name="LN874"></a>                <span class='Declare_Local'>upper2</span><span class='Delimiter'>; 
</span><a name="LN875"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>empty1</span><span class='Delimiter'>, 
</span><a name="LN876"></a>                <span class='Declare_Local'>empty2</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Different types should be prevented by ANYRANGE matching rules */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN32"><span class='Ref_to_Macro'>RangeTypeGetOid</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN869"><span class='Ref_to_Parameter'>r1</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><a href="../../../include/utils/rangetypes.h.html#LN32"><span class='Ref_to_Macro'>RangeTypeGetOid</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN869"><span class='Ref_to_Parameter'>r2</span></a><span class='Parentheses'>))</span> 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"range types do not match"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/rangetypes.h.html#LN123"><span class='Ref_to_Proto'>range_deserialize</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN869"><span class='Ref_to_Parameter'>typcache</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN869"><span class='Ref_to_Parameter'>r1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN871"><span class='Ref_To_Local'>lower1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN873"><span class='Ref_To_Local'>upper1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN875"><span class='Ref_To_Local'>empty1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/utils/rangetypes.h.html#LN123"><span class='Ref_to_Proto'>range_deserialize</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN869"><span class='Ref_to_Parameter'>typcache</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN869"><span class='Ref_to_Parameter'>r2</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN872"><span class='Ref_To_Local'>lower2</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN874"><span class='Ref_To_Local'>upper2</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN876"><span class='Ref_To_Local'>empty2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* An empty range is neither before nor after any other range */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN875"><span class='Ref_To_Local'>empty1</span></a> <span class='Operator'>|| </span><a href="rangetypes.c.html#LN876"><span class='Ref_To_Local'>empty2</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN130"><span class='Ref_to_Proto'>range_cmp_bounds</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN869"><span class='Ref_to_Parameter'>typcache</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN873"><span class='Ref_To_Local'>upper1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN874"><span class='Ref_To_Local'>upper2</span></a><span class='Parentheses'>) </span><span class='Operator'>&LT;= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end range_overleft_internal &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* does not extend to right of? */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN897"></a><span class='Declare_Function'>range_overleft</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN899"></a>    <a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>r1</span> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN73"><span class='Ref_to_Macro'>PG_GETARG_RANGE</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN900"></a>    <a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>r2</span> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN73"><span class='Ref_to_Macro'>PG_GETARG_RANGE</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN901"></a>    <a href="../../../include/utils/typcache.h.html#LN28"><span class='Ref_to_Struct'>TypeCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>typcache</span><span class='Delimiter'>; 
</span> 
    <a href="rangetypes.c.html#LN901"><span class='Ref_To_Local'>typcache</span></a> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN119"><span class='Ref_to_Proto'>range_get_typcache</span></a><span class='Parentheses'>(</span>fcinfo<span class='Delimiter'>, </span><a href="../../../include/utils/rangetypes.h.html#LN32"><span class='Ref_to_Macro'>RangeTypeGetOid</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN899"><span class='Ref_To_Local'>r1</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN113"><span class='Ref_to_Proto'>range_overleft_internal</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN901"><span class='Ref_To_Local'>typcache</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN899"><span class='Ref_To_Local'>r1</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN900"><span class='Ref_To_Local'>r2</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* does not extend to left of? (internal version) */ 
</span><span class='Keyword'>bool 
</span><a name="LN910"></a><span class='Declare_Function'>range_overright_internal</span><span class='Parentheses'>(</span><a href="../../../include/utils/typcache.h.html#LN28"><span class='Ref_to_Struct'>TypeCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>typcache</span><span class='Delimiter'>, </span><a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>r1</span><span class='Delimiter'>, </span><a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>r2</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN912"></a>    <a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a>  <span class='Declare_Local'>lower1</span><span class='Delimiter'>, 
</span><a name="LN913"></a>                <span class='Declare_Local'>lower2</span><span class='Delimiter'>; 
</span><a name="LN914"></a>    <a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a>  <span class='Declare_Local'>upper1</span><span class='Delimiter'>, 
</span><a name="LN915"></a>                <span class='Declare_Local'>upper2</span><span class='Delimiter'>; 
</span><a name="LN916"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>empty1</span><span class='Delimiter'>, 
</span><a name="LN917"></a>                <span class='Declare_Local'>empty2</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Different types should be prevented by ANYRANGE matching rules */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN32"><span class='Ref_to_Macro'>RangeTypeGetOid</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN910"><span class='Ref_to_Parameter'>r1</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><a href="../../../include/utils/rangetypes.h.html#LN32"><span class='Ref_to_Macro'>RangeTypeGetOid</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN910"><span class='Ref_to_Parameter'>r2</span></a><span class='Parentheses'>))</span> 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"range types do not match"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/rangetypes.h.html#LN123"><span class='Ref_to_Proto'>range_deserialize</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN910"><span class='Ref_to_Parameter'>typcache</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN910"><span class='Ref_to_Parameter'>r1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN912"><span class='Ref_To_Local'>lower1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN914"><span class='Ref_To_Local'>upper1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN916"><span class='Ref_To_Local'>empty1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/utils/rangetypes.h.html#LN123"><span class='Ref_to_Proto'>range_deserialize</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN910"><span class='Ref_to_Parameter'>typcache</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN910"><span class='Ref_to_Parameter'>r2</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN913"><span class='Ref_To_Local'>lower2</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN915"><span class='Ref_To_Local'>upper2</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN917"><span class='Ref_To_Local'>empty2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* An empty range is neither before nor after any other range */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN916"><span class='Ref_To_Local'>empty1</span></a> <span class='Operator'>|| </span><a href="rangetypes.c.html#LN917"><span class='Ref_To_Local'>empty2</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN130"><span class='Ref_to_Proto'>range_cmp_bounds</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN910"><span class='Ref_to_Parameter'>typcache</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN912"><span class='Ref_To_Local'>lower1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN913"><span class='Ref_To_Local'>lower2</span></a><span class='Parentheses'>) </span><span class='Operator'>&GT;= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end range_overright_internal &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* does not extend to left of? */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN938"></a><span class='Declare_Function'>range_overright</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN940"></a>    <a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>r1</span> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN73"><span class='Ref_to_Macro'>PG_GETARG_RANGE</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN941"></a>    <a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>r2</span> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN73"><span class='Ref_to_Macro'>PG_GETARG_RANGE</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN942"></a>    <a href="../../../include/utils/typcache.h.html#LN28"><span class='Ref_to_Struct'>TypeCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>typcache</span><span class='Delimiter'>; 
</span> 
    <a href="rangetypes.c.html#LN942"><span class='Ref_To_Local'>typcache</span></a> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN119"><span class='Ref_to_Proto'>range_get_typcache</span></a><span class='Parentheses'>(</span>fcinfo<span class='Delimiter'>, </span><a href="../../../include/utils/rangetypes.h.html#LN32"><span class='Ref_to_Macro'>RangeTypeGetOid</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN940"><span class='Ref_To_Local'>r1</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN115"><span class='Ref_to_Proto'>range_overright_internal</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN942"><span class='Ref_To_Local'>typcache</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN940"><span class='Ref_To_Local'>r1</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN941"><span class='Ref_To_Local'>r2</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/* range, range -&GT; range functions */ 
</span> 
<span class='Comment_Multi_Line'>/* set difference */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN954"></a><span class='Declare_Function'>range_minus</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN956"></a>    <a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>r1</span> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN73"><span class='Ref_to_Macro'>PG_GETARG_RANGE</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN957"></a>    <a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>r2</span> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN73"><span class='Ref_to_Macro'>PG_GETARG_RANGE</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN958"></a>    <a href="../../../include/utils/typcache.h.html#LN28"><span class='Ref_to_Struct'>TypeCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>typcache</span><span class='Delimiter'>; 
</span><a name="LN959"></a>    <a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a>  <span class='Declare_Local'>lower1</span><span class='Delimiter'>, 
</span><a name="LN960"></a>                <span class='Declare_Local'>lower2</span><span class='Delimiter'>; 
</span><a name="LN961"></a>    <a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a>  <span class='Declare_Local'>upper1</span><span class='Delimiter'>, 
</span><a name="LN962"></a>                <span class='Declare_Local'>upper2</span><span class='Delimiter'>; 
</span><a name="LN963"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>empty1</span><span class='Delimiter'>, 
</span><a name="LN964"></a>                <span class='Declare_Local'>empty2</span><span class='Delimiter'>; 
</span><a name="LN965"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>cmp_l1l2</span><span class='Delimiter'>, 
</span><a name="LN966"></a>                <span class='Declare_Local'>cmp_l1u2</span><span class='Delimiter'>, 
</span><a name="LN967"></a>                <span class='Declare_Local'>cmp_u1l2</span><span class='Delimiter'>, 
</span><a name="LN968"></a>                <span class='Declare_Local'>cmp_u1u2</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Different types should be prevented by ANYRANGE matching rules */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN32"><span class='Ref_to_Macro'>RangeTypeGetOid</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN956"><span class='Ref_To_Local'>r1</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><a href="../../../include/utils/rangetypes.h.html#LN32"><span class='Ref_to_Macro'>RangeTypeGetOid</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN957"><span class='Ref_To_Local'>r2</span></a><span class='Parentheses'>))</span> 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"range types do not match"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="rangetypes.c.html#LN958"><span class='Ref_To_Local'>typcache</span></a> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN119"><span class='Ref_to_Proto'>range_get_typcache</span></a><span class='Parentheses'>(</span>fcinfo<span class='Delimiter'>, </span><a href="../../../include/utils/rangetypes.h.html#LN32"><span class='Ref_to_Macro'>RangeTypeGetOid</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN956"><span class='Ref_To_Local'>r1</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/rangetypes.h.html#LN123"><span class='Ref_to_Proto'>range_deserialize</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN958"><span class='Ref_To_Local'>typcache</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN956"><span class='Ref_To_Local'>r1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN959"><span class='Ref_To_Local'>lower1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN961"><span class='Ref_To_Local'>upper1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN963"><span class='Ref_To_Local'>empty1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/utils/rangetypes.h.html#LN123"><span class='Ref_to_Proto'>range_deserialize</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN958"><span class='Ref_To_Local'>typcache</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN957"><span class='Ref_To_Local'>r2</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN960"><span class='Ref_To_Local'>lower2</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN962"><span class='Ref_To_Local'>upper2</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN964"><span class='Ref_To_Local'>empty2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* if either is empty, r1 is the correct answer */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN963"><span class='Ref_To_Local'>empty1</span></a> <span class='Operator'>|| </span><a href="rangetypes.c.html#LN964"><span class='Ref_To_Local'>empty2</span></a><span class='Parentheses'>) 
</span>        <a href="../../../include/utils/rangetypes.h.html#LN75"><span class='Ref_to_Macro'>PG_RETURN_RANGE</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN956"><span class='Ref_To_Local'>r1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="rangetypes.c.html#LN965"><span class='Ref_To_Local'>cmp_l1l2</span></a> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN130"><span class='Ref_to_Proto'>range_cmp_bounds</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN958"><span class='Ref_To_Local'>typcache</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN959"><span class='Ref_To_Local'>lower1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN960"><span class='Ref_To_Local'>lower2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="rangetypes.c.html#LN966"><span class='Ref_To_Local'>cmp_l1u2</span></a> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN130"><span class='Ref_to_Proto'>range_cmp_bounds</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN958"><span class='Ref_To_Local'>typcache</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN959"><span class='Ref_To_Local'>lower1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN962"><span class='Ref_To_Local'>upper2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="rangetypes.c.html#LN967"><span class='Ref_To_Local'>cmp_u1l2</span></a> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN130"><span class='Ref_to_Proto'>range_cmp_bounds</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN958"><span class='Ref_To_Local'>typcache</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN961"><span class='Ref_To_Local'>upper1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN960"><span class='Ref_To_Local'>lower2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="rangetypes.c.html#LN968"><span class='Ref_To_Local'>cmp_u1u2</span></a> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN130"><span class='Ref_to_Proto'>range_cmp_bounds</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN958"><span class='Ref_To_Local'>typcache</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN961"><span class='Ref_To_Local'>upper1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN962"><span class='Ref_To_Local'>upper2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN965"><span class='Ref_To_Local'>cmp_l1l2</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="rangetypes.c.html#LN968"><span class='Ref_To_Local'>cmp_u1u2</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_DATA_EXCEPTION<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>              <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"result of range difference would not be contiguous"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN966"><span class='Ref_To_Local'>cmp_l1u2</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="rangetypes.c.html#LN967"><span class='Ref_To_Local'>cmp_u1l2</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <a href="../../../include/utils/rangetypes.h.html#LN75"><span class='Ref_to_Macro'>PG_RETURN_RANGE</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN956"><span class='Ref_To_Local'>r1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN965"><span class='Ref_To_Local'>cmp_l1l2</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="rangetypes.c.html#LN968"><span class='Ref_To_Local'>cmp_u1u2</span></a> <span class='Operator'>&LT;= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <a href="../../../include/utils/rangetypes.h.html#LN75"><span class='Ref_to_Macro'>PG_RETURN_RANGE</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN136"><span class='Ref_to_Proto'>make_empty_range</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN958"><span class='Ref_To_Local'>typcache</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN965"><span class='Ref_To_Local'>cmp_l1l2</span></a> <span class='Operator'>&LT;= </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="rangetypes.c.html#LN967"><span class='Ref_To_Local'>cmp_u1l2</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="rangetypes.c.html#LN968"><span class='Ref_To_Local'>cmp_u1u2</span></a> <span class='Operator'>&LT;= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="rangetypes.c.html#LN960"><span class='Ref_To_Local'>lower2</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN63"><span class='Ref_to_Member'>inclusive</span></a> <span class='Operator'>= !</span><a href="rangetypes.c.html#LN960"><span class='Ref_To_Local'>lower2</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN63"><span class='Ref_to_Member'>inclusive</span></a><span class='Delimiter'>; 
</span>        <a href="rangetypes.c.html#LN960"><span class='Ref_To_Local'>lower2</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN64"><span class='Ref_to_Member'>lower</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>;</span>   <span class='Comment_Single_Line'>/* it will become the upper bound */ 
</span>        <a href="../../../include/utils/rangetypes.h.html#LN75"><span class='Ref_to_Macro'>PG_RETURN_RANGE</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN128"><span class='Ref_to_Proto'>make_range</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN958"><span class='Ref_To_Local'>typcache</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN959"><span class='Ref_To_Local'>lower1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN960"><span class='Ref_To_Local'>lower2</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN965"><span class='Ref_To_Local'>cmp_l1l2</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="rangetypes.c.html#LN968"><span class='Ref_To_Local'>cmp_u1u2</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="rangetypes.c.html#LN966"><span class='Ref_To_Local'>cmp_l1u2</span></a> <span class='Operator'>&LT;= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="rangetypes.c.html#LN962"><span class='Ref_To_Local'>upper2</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN63"><span class='Ref_to_Member'>inclusive</span></a> <span class='Operator'>= !</span><a href="rangetypes.c.html#LN962"><span class='Ref_To_Local'>upper2</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN63"><span class='Ref_to_Member'>inclusive</span></a><span class='Delimiter'>; 
</span>        <a href="rangetypes.c.html#LN962"><span class='Ref_To_Local'>upper2</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN64"><span class='Ref_to_Member'>lower</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* it will become the lower bound */ 
</span>        <a href="../../../include/utils/rangetypes.h.html#LN75"><span class='Ref_to_Macro'>PG_RETURN_RANGE</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN128"><span class='Ref_to_Proto'>make_range</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN958"><span class='Ref_To_Local'>typcache</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN962"><span class='Ref_To_Local'>upper2</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN961"><span class='Ref_To_Local'>upper1</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"unexpected case in range_minus"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN304"><span class='Ref_to_Macro'>PG_RETURN_NULL</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end range_minus &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Set union.  If strict is true, it is an error that the two input ranges 
 * are not adjacent or overlapping. 
 */ 
</span><span class='Keyword'>static </span><a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a> <span class='Operator'>* 
</span><a name="LN1022"></a><span class='Declare_Function'>range_union_internal</span><span class='Parentheses'>(</span><a href="../../../include/utils/typcache.h.html#LN28"><span class='Ref_to_Struct'>TypeCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>typcache</span><span class='Delimiter'>, </span><a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>r1</span><span class='Delimiter'>, </span><a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>r2</span><span class='Delimiter'>, 
</span><a name="LN1023"></a>                     <span class='Keyword'>bool </span><span class='Declare_Parameter'>strict</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1025"></a>    <a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a>  <span class='Declare_Local'>lower1</span><span class='Delimiter'>, 
</span><a name="LN1026"></a>                <span class='Declare_Local'>lower2</span><span class='Delimiter'>; 
</span><a name="LN1027"></a>    <a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a>  <span class='Declare_Local'>upper1</span><span class='Delimiter'>, 
</span><a name="LN1028"></a>                <span class='Declare_Local'>upper2</span><span class='Delimiter'>; 
</span><a name="LN1029"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>empty1</span><span class='Delimiter'>, 
</span><a name="LN1030"></a>                <span class='Declare_Local'>empty2</span><span class='Delimiter'>; 
</span><a name="LN1031"></a>    <a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a> <span class='Operator'>*</span><span class='Declare_Local'>result_lower</span><span class='Delimiter'>; 
</span><a name="LN1032"></a>    <a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a> <span class='Operator'>*</span><span class='Declare_Local'>result_upper</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Different types should be prevented by ANYRANGE matching rules */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN32"><span class='Ref_to_Macro'>RangeTypeGetOid</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1022"><span class='Ref_to_Parameter'>r1</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><a href="../../../include/utils/rangetypes.h.html#LN32"><span class='Ref_to_Macro'>RangeTypeGetOid</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1022"><span class='Ref_to_Parameter'>r2</span></a><span class='Parentheses'>))</span> 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"range types do not match"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/rangetypes.h.html#LN123"><span class='Ref_to_Proto'>range_deserialize</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1022"><span class='Ref_to_Parameter'>typcache</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1022"><span class='Ref_to_Parameter'>r1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN1025"><span class='Ref_To_Local'>lower1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN1027"><span class='Ref_To_Local'>upper1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN1029"><span class='Ref_To_Local'>empty1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/utils/rangetypes.h.html#LN123"><span class='Ref_to_Proto'>range_deserialize</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1022"><span class='Ref_to_Parameter'>typcache</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1022"><span class='Ref_to_Parameter'>r2</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN1026"><span class='Ref_To_Local'>lower2</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN1028"><span class='Ref_To_Local'>upper2</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN1030"><span class='Ref_To_Local'>empty2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* if either is empty, the other is the correct answer */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1029"><span class='Ref_To_Local'>empty1</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <a href="rangetypes.c.html#LN1022"><span class='Ref_to_Parameter'>r2</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1030"><span class='Ref_To_Local'>empty2</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <a href="rangetypes.c.html#LN1022"><span class='Ref_to_Parameter'>r1</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1023"><span class='Ref_to_Parameter'>strict</span></a> <span class='Operator'>&& 
</span>        <span class='Operator'>!</span><a href="../../../include/postgres.h.html#LN398"><span class='Ref_to_Macro'>DatumGetBool</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN111"><span class='Ref_to_Proto'>range_overlaps_internal</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1022"><span class='Ref_to_Parameter'>typcache</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1022"><span class='Ref_to_Parameter'>r1</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1022"><span class='Ref_to_Parameter'>r2</span></a><span class='Parentheses'>))</span> <span class='Operator'>&& 
</span>        <span class='Operator'>!</span><a href="../../../include/postgres.h.html#LN398"><span class='Ref_to_Macro'>DatumGetBool</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN109"><span class='Ref_to_Proto'>range_adjacent_internal</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1022"><span class='Ref_to_Parameter'>typcache</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1022"><span class='Ref_to_Parameter'>r1</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1022"><span class='Ref_to_Parameter'>r2</span></a><span class='Parentheses'>)))</span> 
        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_DATA_EXCEPTION<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"result of range union would not be contiguous"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN130"><span class='Ref_to_Proto'>range_cmp_bounds</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1022"><span class='Ref_to_Parameter'>typcache</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN1025"><span class='Ref_To_Local'>lower1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN1026"><span class='Ref_To_Local'>lower2</span></a><span class='Parentheses'>) </span><span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <a href="rangetypes.c.html#LN1031"><span class='Ref_To_Local'>result_lower</span></a> <span class='Operator'>= &</span><a href="rangetypes.c.html#LN1025"><span class='Ref_To_Local'>lower1</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="rangetypes.c.html#LN1031"><span class='Ref_To_Local'>result_lower</span></a> <span class='Operator'>= &</span><a href="rangetypes.c.html#LN1026"><span class='Ref_To_Local'>lower2</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN130"><span class='Ref_to_Proto'>range_cmp_bounds</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1022"><span class='Ref_to_Parameter'>typcache</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN1027"><span class='Ref_To_Local'>upper1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN1028"><span class='Ref_To_Local'>upper2</span></a><span class='Parentheses'>) </span><span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <a href="rangetypes.c.html#LN1032"><span class='Ref_To_Local'>result_upper</span></a> <span class='Operator'>= &</span><a href="rangetypes.c.html#LN1027"><span class='Ref_To_Local'>upper1</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="rangetypes.c.html#LN1032"><span class='Ref_To_Local'>result_upper</span></a> <span class='Operator'>= &</span><a href="rangetypes.c.html#LN1028"><span class='Ref_To_Local'>upper2</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="../../../include/utils/rangetypes.h.html#LN128"><span class='Ref_to_Proto'>make_range</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1022"><span class='Ref_to_Parameter'>typcache</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1031"><span class='Ref_To_Local'>result_lower</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1032"><span class='Ref_To_Local'>result_upper</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end range_union_internal &raquo; </span> 
 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1068"></a><span class='Declare_Function'>range_union</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1070"></a>    <a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>r1</span> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN73"><span class='Ref_to_Macro'>PG_GETARG_RANGE</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1071"></a>    <a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>r2</span> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN73"><span class='Ref_to_Macro'>PG_GETARG_RANGE</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1072"></a>    <a href="../../../include/utils/typcache.h.html#LN28"><span class='Ref_to_Struct'>TypeCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>typcache</span><span class='Delimiter'>; 
</span> 
    <a href="rangetypes.c.html#LN1072"><span class='Ref_To_Local'>typcache</span></a> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN119"><span class='Ref_to_Proto'>range_get_typcache</span></a><span class='Parentheses'>(</span>fcinfo<span class='Delimiter'>, </span><a href="../../../include/utils/rangetypes.h.html#LN32"><span class='Ref_to_Macro'>RangeTypeGetOid</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1070"><span class='Ref_To_Local'>r1</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/rangetypes.h.html#LN75"><span class='Ref_to_Macro'>PG_RETURN_RANGE</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1021"><span class='Ref_to_Func'>range_union_internal</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1072"><span class='Ref_To_Local'>typcache</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1070"><span class='Ref_To_Local'>r1</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1071"><span class='Ref_To_Local'>r2</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * range merge: like set union, except also allow and account for non-adjacent 
 * input ranges. 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1084"></a><span class='Declare_Function'>range_merge</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1086"></a>    <a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>r1</span> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN73"><span class='Ref_to_Macro'>PG_GETARG_RANGE</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1087"></a>    <a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>r2</span> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN73"><span class='Ref_to_Macro'>PG_GETARG_RANGE</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1088"></a>    <a href="../../../include/utils/typcache.h.html#LN28"><span class='Ref_to_Struct'>TypeCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>typcache</span><span class='Delimiter'>; 
</span> 
    <a href="rangetypes.c.html#LN1088"><span class='Ref_To_Local'>typcache</span></a> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN119"><span class='Ref_to_Proto'>range_get_typcache</span></a><span class='Parentheses'>(</span>fcinfo<span class='Delimiter'>, </span><a href="../../../include/utils/rangetypes.h.html#LN32"><span class='Ref_to_Macro'>RangeTypeGetOid</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1086"><span class='Ref_To_Local'>r1</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/rangetypes.h.html#LN75"><span class='Ref_to_Macro'>PG_RETURN_RANGE</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1021"><span class='Ref_to_Func'>range_union_internal</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1088"><span class='Ref_To_Local'>typcache</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1086"><span class='Ref_To_Local'>r1</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1087"><span class='Ref_To_Local'>r2</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* set intersection */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1097"></a><span class='Declare_Function'>range_intersect</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1099"></a>    <a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>r1</span> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN73"><span class='Ref_to_Macro'>PG_GETARG_RANGE</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1100"></a>    <a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>r2</span> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN73"><span class='Ref_to_Macro'>PG_GETARG_RANGE</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1101"></a>    <a href="../../../include/utils/typcache.h.html#LN28"><span class='Ref_to_Struct'>TypeCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>typcache</span><span class='Delimiter'>; 
</span><a name="LN1102"></a>    <a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a>  <span class='Declare_Local'>lower1</span><span class='Delimiter'>, 
</span><a name="LN1103"></a>                <span class='Declare_Local'>lower2</span><span class='Delimiter'>; 
</span><a name="LN1104"></a>    <a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a>  <span class='Declare_Local'>upper1</span><span class='Delimiter'>, 
</span><a name="LN1105"></a>                <span class='Declare_Local'>upper2</span><span class='Delimiter'>; 
</span><a name="LN1106"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>empty1</span><span class='Delimiter'>, 
</span><a name="LN1107"></a>                <span class='Declare_Local'>empty2</span><span class='Delimiter'>; 
</span><a name="LN1108"></a>    <a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a> <span class='Operator'>*</span><span class='Declare_Local'>result_lower</span><span class='Delimiter'>; 
</span><a name="LN1109"></a>    <a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a> <span class='Operator'>*</span><span class='Declare_Local'>result_upper</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Different types should be prevented by ANYRANGE matching rules */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN32"><span class='Ref_to_Macro'>RangeTypeGetOid</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1099"><span class='Ref_To_Local'>r1</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><a href="../../../include/utils/rangetypes.h.html#LN32"><span class='Ref_to_Macro'>RangeTypeGetOid</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1100"><span class='Ref_To_Local'>r2</span></a><span class='Parentheses'>))</span> 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"range types do not match"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="rangetypes.c.html#LN1101"><span class='Ref_To_Local'>typcache</span></a> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN119"><span class='Ref_to_Proto'>range_get_typcache</span></a><span class='Parentheses'>(</span>fcinfo<span class='Delimiter'>, </span><a href="../../../include/utils/rangetypes.h.html#LN32"><span class='Ref_to_Macro'>RangeTypeGetOid</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1099"><span class='Ref_To_Local'>r1</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/rangetypes.h.html#LN123"><span class='Ref_to_Proto'>range_deserialize</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1101"><span class='Ref_To_Local'>typcache</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1099"><span class='Ref_To_Local'>r1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN1102"><span class='Ref_To_Local'>lower1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN1104"><span class='Ref_To_Local'>upper1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN1106"><span class='Ref_To_Local'>empty1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/utils/rangetypes.h.html#LN123"><span class='Ref_to_Proto'>range_deserialize</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1101"><span class='Ref_To_Local'>typcache</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1100"><span class='Ref_To_Local'>r2</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN1103"><span class='Ref_To_Local'>lower2</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN1105"><span class='Ref_To_Local'>upper2</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN1107"><span class='Ref_To_Local'>empty2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1106"><span class='Ref_To_Local'>empty1</span></a> <span class='Operator'>|| </span><a href="rangetypes.c.html#LN1107"><span class='Ref_To_Local'>empty2</span></a> <span class='Operator'>|| !</span><a href="../../../include/postgres.h.html#LN398"><span class='Ref_to_Macro'>DatumGetBool</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN855"><span class='Ref_to_Func'>range_overlaps</span></a><span class='Parentheses'>(</span>fcinfo<span class='Parentheses'>)))</span> 
        <a href="../../../include/utils/rangetypes.h.html#LN75"><span class='Ref_to_Macro'>PG_RETURN_RANGE</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN136"><span class='Ref_to_Proto'>make_empty_range</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1101"><span class='Ref_To_Local'>typcache</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN130"><span class='Ref_to_Proto'>range_cmp_bounds</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1101"><span class='Ref_To_Local'>typcache</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN1102"><span class='Ref_To_Local'>lower1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN1103"><span class='Ref_To_Local'>lower2</span></a><span class='Parentheses'>) </span><span class='Operator'>&GT;= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <a href="rangetypes.c.html#LN1108"><span class='Ref_To_Local'>result_lower</span></a> <span class='Operator'>= &</span><a href="rangetypes.c.html#LN1102"><span class='Ref_To_Local'>lower1</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="rangetypes.c.html#LN1108"><span class='Ref_To_Local'>result_lower</span></a> <span class='Operator'>= &</span><a href="rangetypes.c.html#LN1103"><span class='Ref_To_Local'>lower2</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN130"><span class='Ref_to_Proto'>range_cmp_bounds</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1101"><span class='Ref_To_Local'>typcache</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN1104"><span class='Ref_To_Local'>upper1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN1105"><span class='Ref_To_Local'>upper2</span></a><span class='Parentheses'>) </span><span class='Operator'>&LT;= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <a href="rangetypes.c.html#LN1109"><span class='Ref_To_Local'>result_upper</span></a> <span class='Operator'>= &</span><a href="rangetypes.c.html#LN1104"><span class='Ref_To_Local'>upper1</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="rangetypes.c.html#LN1109"><span class='Ref_To_Local'>result_upper</span></a> <span class='Operator'>= &</span><a href="rangetypes.c.html#LN1105"><span class='Ref_To_Local'>upper2</span></a><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/rangetypes.h.html#LN75"><span class='Ref_to_Macro'>PG_RETURN_RANGE</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN128"><span class='Ref_to_Proto'>make_range</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1101"><span class='Ref_To_Local'>typcache</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1108"><span class='Ref_To_Local'>result_lower</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1109"><span class='Ref_To_Local'>result_upper</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end range_intersect &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* Btree support */ 
</span> 
<span class='Comment_Multi_Line'>/* btree comparator */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1140"></a><span class='Declare_Function'>range_cmp</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1142"></a>    <a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>r1</span> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN73"><span class='Ref_to_Macro'>PG_GETARG_RANGE</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1143"></a>    <a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>r2</span> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN73"><span class='Ref_to_Macro'>PG_GETARG_RANGE</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1144"></a>    <a href="../../../include/utils/typcache.h.html#LN28"><span class='Ref_to_Struct'>TypeCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>typcache</span><span class='Delimiter'>; 
</span><a name="LN1145"></a>    <a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a>  <span class='Declare_Local'>lower1</span><span class='Delimiter'>, 
</span><a name="LN1146"></a>                <span class='Declare_Local'>lower2</span><span class='Delimiter'>; 
</span><a name="LN1147"></a>    <a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a>  <span class='Declare_Local'>upper1</span><span class='Delimiter'>, 
</span><a name="LN1148"></a>                <span class='Declare_Local'>upper2</span><span class='Delimiter'>; 
</span><a name="LN1149"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>empty1</span><span class='Delimiter'>, 
</span><a name="LN1150"></a>                <span class='Declare_Local'>empty2</span><span class='Delimiter'>; 
</span><a name="LN1151"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>cmp</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/miscadmin.h.html#LN275"><span class='Ref_to_Proto'>check_stack_depth</span></a><span class='Parentheses'>()</span><span class='Delimiter'>;</span>        <span class='Comment_Single_Line'>/* recurses when subtype is a range type */ 
</span> 
    <span class='Comment_Multi_Line'>/* Different types should be prevented by ANYRANGE matching rules */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN32"><span class='Ref_to_Macro'>RangeTypeGetOid</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1142"><span class='Ref_To_Local'>r1</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><a href="../../../include/utils/rangetypes.h.html#LN32"><span class='Ref_to_Macro'>RangeTypeGetOid</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1143"><span class='Ref_To_Local'>r2</span></a><span class='Parentheses'>))</span> 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"range types do not match"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="rangetypes.c.html#LN1144"><span class='Ref_To_Local'>typcache</span></a> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN119"><span class='Ref_to_Proto'>range_get_typcache</span></a><span class='Parentheses'>(</span>fcinfo<span class='Delimiter'>, </span><a href="../../../include/utils/rangetypes.h.html#LN32"><span class='Ref_to_Macro'>RangeTypeGetOid</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1142"><span class='Ref_To_Local'>r1</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/rangetypes.h.html#LN123"><span class='Ref_to_Proto'>range_deserialize</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1144"><span class='Ref_To_Local'>typcache</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1142"><span class='Ref_To_Local'>r1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN1145"><span class='Ref_To_Local'>lower1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN1147"><span class='Ref_To_Local'>upper1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN1149"><span class='Ref_To_Local'>empty1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/utils/rangetypes.h.html#LN123"><span class='Ref_to_Proto'>range_deserialize</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1144"><span class='Ref_To_Local'>typcache</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1143"><span class='Ref_To_Local'>r2</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN1146"><span class='Ref_To_Local'>lower2</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN1148"><span class='Ref_To_Local'>upper2</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN1150"><span class='Ref_To_Local'>empty2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* For b-tree use, empty ranges sort before all else */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1149"><span class='Ref_To_Local'>empty1</span></a> <span class='Operator'>&& </span><a href="rangetypes.c.html#LN1150"><span class='Ref_To_Local'>empty2</span></a><span class='Parentheses'>) 
</span>        <a href="rangetypes.c.html#LN1151"><span class='Ref_To_Local'>cmp</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1149"><span class='Ref_To_Local'>empty1</span></a><span class='Parentheses'>) 
</span>        <a href="rangetypes.c.html#LN1151"><span class='Ref_To_Local'>cmp</span></a> <span class='Operator'>= -</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1150"><span class='Ref_To_Local'>empty2</span></a><span class='Parentheses'>) 
</span>        <a href="rangetypes.c.html#LN1151"><span class='Ref_To_Local'>cmp</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="rangetypes.c.html#LN1151"><span class='Ref_To_Local'>cmp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN130"><span class='Ref_to_Proto'>range_cmp_bounds</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1144"><span class='Ref_To_Local'>typcache</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN1145"><span class='Ref_To_Local'>lower1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN1146"><span class='Ref_To_Local'>lower2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1151"><span class='Ref_To_Local'>cmp</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <a href="rangetypes.c.html#LN1151"><span class='Ref_To_Local'>cmp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN130"><span class='Ref_to_Proto'>range_cmp_bounds</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1144"><span class='Ref_To_Local'>typcache</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN1147"><span class='Ref_To_Local'>upper1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN1148"><span class='Ref_To_Local'>upper2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../../include/fmgr.h.html#LN224"><span class='Ref_to_Macro'>PG_FREE_IF_COPY</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1142"><span class='Ref_To_Local'>r1</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN224"><span class='Ref_to_Macro'>PG_FREE_IF_COPY</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1143"><span class='Ref_To_Local'>r2</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN313"><span class='Ref_to_Macro'>PG_RETURN_INT32</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1151"><span class='Ref_To_Local'>cmp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end range_cmp &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* inequality operators using the range_cmp function */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1186"></a><span class='Declare_Function'>range_lt</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1188"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>cmp</span> <span class='Operator'>= </span><a href="rangetypes.c.html#LN1139"><span class='Ref_to_Func'>range_cmp</span></a><span class='Parentheses'>(</span>fcinfo<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1188"><span class='Ref_To_Local'>cmp</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1194"></a><span class='Declare_Function'>range_le</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1196"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>cmp</span> <span class='Operator'>= </span><a href="rangetypes.c.html#LN1139"><span class='Ref_to_Func'>range_cmp</span></a><span class='Parentheses'>(</span>fcinfo<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1196"><span class='Ref_To_Local'>cmp</span></a> <span class='Operator'>&LT;= </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1202"></a><span class='Declare_Function'>range_ge</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1204"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>cmp</span> <span class='Operator'>= </span><a href="rangetypes.c.html#LN1139"><span class='Ref_to_Func'>range_cmp</span></a><span class='Parentheses'>(</span>fcinfo<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1204"><span class='Ref_To_Local'>cmp</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1210"></a><span class='Declare_Function'>range_gt</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1212"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>cmp</span> <span class='Operator'>= </span><a href="rangetypes.c.html#LN1139"><span class='Ref_to_Func'>range_cmp</span></a><span class='Parentheses'>(</span>fcinfo<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1212"><span class='Ref_To_Local'>cmp</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* Hash support */ 
</span> 
<span class='Comment_Multi_Line'>/* hash a range value */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1221"></a><span class='Declare_Function'>hash_range</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1223"></a>    <a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>r</span> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN73"><span class='Ref_to_Macro'>PG_GETARG_RANGE</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1224"></a>    <a href="../../../include/c.h.html#LN267"><span class='Ref_to_Typedef'>uint32</span></a>      <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span><a name="LN1225"></a>    <a href="../../../include/utils/typcache.h.html#LN28"><span class='Ref_to_Struct'>TypeCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>typcache</span><span class='Delimiter'>; 
</span><a name="LN1226"></a>    <a href="../../../include/utils/typcache.h.html#LN28"><span class='Ref_to_Struct'>TypeCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>scache</span><span class='Delimiter'>; 
</span><a name="LN1227"></a>    <a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a>  <span class='Declare_Local'>lower</span><span class='Delimiter'>; 
</span><a name="LN1228"></a>    <a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a>  <span class='Declare_Local'>upper</span><span class='Delimiter'>; 
</span><a name="LN1229"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>empty</span><span class='Delimiter'>; 
</span><a name="LN1230"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>flags</span><span class='Delimiter'>; 
</span><a name="LN1231"></a>    <a href="../../../include/c.h.html#LN267"><span class='Ref_to_Typedef'>uint32</span></a>      <span class='Declare_Local'>lower_hash</span><span class='Delimiter'>; 
</span><a name="LN1232"></a>    <a href="../../../include/c.h.html#LN267"><span class='Ref_to_Typedef'>uint32</span></a>      <span class='Declare_Local'>upper_hash</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/miscadmin.h.html#LN275"><span class='Ref_to_Proto'>check_stack_depth</span></a><span class='Parentheses'>()</span><span class='Delimiter'>;</span>        <span class='Comment_Single_Line'>/* recurses when subtype is a range type */ 
</span> 
    <a href="rangetypes.c.html#LN1225"><span class='Ref_To_Local'>typcache</span></a> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN119"><span class='Ref_to_Proto'>range_get_typcache</span></a><span class='Parentheses'>(</span>fcinfo<span class='Delimiter'>, </span><a href="../../../include/utils/rangetypes.h.html#LN32"><span class='Ref_to_Macro'>RangeTypeGetOid</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1223"><span class='Ref_To_Local'>r</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* deserialize */ 
</span>    <a href="../../../include/utils/rangetypes.h.html#LN123"><span class='Ref_to_Proto'>range_deserialize</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1225"><span class='Ref_To_Local'>typcache</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1223"><span class='Ref_To_Local'>r</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN1227"><span class='Ref_To_Local'>lower</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN1228"><span class='Ref_To_Local'>upper</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN1229"><span class='Ref_To_Local'>empty</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="rangetypes.c.html#LN1230"><span class='Ref_To_Local'>flags</span></a> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN126"><span class='Ref_to_Proto'>range_get_flags</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1223"><span class='Ref_To_Local'>r</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Look up the element type's hash function, if not done already. 
     */ 
</span>    <a href="rangetypes.c.html#LN1226"><span class='Ref_To_Local'>scache</span></a> <span class='Operator'>= </span><a href="rangetypes.c.html#LN1225"><span class='Ref_To_Local'>typcache</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/typcache.h.html#LN83"><span class='Ref_to_Member'>rngelemtype</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1226"><span class='Ref_To_Local'>scache</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/typcache.h.html#LN68"><span class='Ref_to_Member'>hash_proc_finfo</span></a><span class='Operator'>.</span><a href="../../../include/fmgr.h.html#LN58"><span class='Ref_to_Member'>fn_oid</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="rangetypes.c.html#LN1226"><span class='Ref_To_Local'>scache</span></a> <span class='Operator'>= </span><a href="../../../include/utils/typcache.h.html#LN142"><span class='Ref_to_Proto'>lookup_type_cache</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1226"><span class='Ref_To_Local'>scache</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/typcache.h.html#LN31"><span class='Ref_to_Member'>type_id</span></a><span class='Delimiter'>, </span><a href="../../../include/utils/typcache.h.html#LN116"><span class='Ref_to_Const'>TYPECACHE_HASH_PROC_FINFO</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1226"><span class='Ref_To_Local'>scache</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/typcache.h.html#LN68"><span class='Ref_to_Member'>hash_proc_finfo</span></a><span class='Operator'>.</span><a href="../../../include/fmgr.h.html#LN58"><span class='Ref_to_Member'>fn_oid</span></a><span class='Parentheses'>))</span> 
            <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_UNDEFINED_FUNCTION<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"could not identify a hash function for type %s"</span><span class='Delimiter'>, 
</span>                            <a href="format_type.c.html#LN92"><span class='Ref_to_Func'>format_type_be</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1226"><span class='Ref_To_Local'>scache</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/typcache.h.html#LN31"><span class='Ref_to_Member'>type_id</span></a><span class='Parentheses'>))))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Apply the hash function to each bound. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN45"><span class='Ref_to_Macro'>RANGE_HAS_LBOUND</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1230"><span class='Ref_To_Local'>flags</span></a><span class='Parentheses'>))</span> 
        <a href="rangetypes.c.html#LN1231"><span class='Ref_To_Local'>lower_hash</span></a> <span class='Operator'>= </span><a href="../../../include/postgres.h.html#LN491"><span class='Ref_to_Macro'>DatumGetUInt32</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN510"><span class='Ref_to_Proto'>FunctionCall1Coll</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rangetypes.c.html#LN1226"><span class='Ref_To_Local'>scache</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/typcache.h.html#LN68"><span class='Ref_to_Member'>hash_proc_finfo</span></a><span class='Delimiter'>, 
</span>                                                      <a href="rangetypes.c.html#LN1225"><span class='Ref_To_Local'>typcache</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/typcache.h.html#LN84"><span class='Ref_to_Member'>rng_collation</span></a><span class='Delimiter'>, 
</span>                                                      <a href="rangetypes.c.html#LN1227"><span class='Ref_To_Local'>lower</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN61"><span class='Ref_to_Member'>val</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="rangetypes.c.html#LN1231"><span class='Ref_To_Local'>lower_hash</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN49"><span class='Ref_to_Macro'>RANGE_HAS_UBOUND</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1230"><span class='Ref_To_Local'>flags</span></a><span class='Parentheses'>))</span> 
        <a href="rangetypes.c.html#LN1232"><span class='Ref_To_Local'>upper_hash</span></a> <span class='Operator'>= </span><a href="../../../include/postgres.h.html#LN491"><span class='Ref_to_Macro'>DatumGetUInt32</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN510"><span class='Ref_to_Proto'>FunctionCall1Coll</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rangetypes.c.html#LN1226"><span class='Ref_To_Local'>scache</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/typcache.h.html#LN68"><span class='Ref_to_Member'>hash_proc_finfo</span></a><span class='Delimiter'>, 
</span>                                                      <a href="rangetypes.c.html#LN1225"><span class='Ref_To_Local'>typcache</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/typcache.h.html#LN84"><span class='Ref_to_Member'>rng_collation</span></a><span class='Delimiter'>, 
</span>                                                      <a href="rangetypes.c.html#LN1228"><span class='Ref_To_Local'>upper</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN61"><span class='Ref_to_Member'>val</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="rangetypes.c.html#LN1232"><span class='Ref_To_Local'>upper_hash</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Merge hashes of flags and bounds */ 
</span>    <a href="rangetypes.c.html#LN1224"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../include/access/hash.h.html#LN326"><span class='Ref_to_Proto'>hash_uint32</span></a><span class='Parentheses'>((</span><a href="../../../include/c.h.html#LN267"><span class='Ref_to_Typedef'>uint32</span></a><span class='Parentheses'>) </span><a href="rangetypes.c.html#LN1230"><span class='Ref_To_Local'>flags</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="rangetypes.c.html#LN1224"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>^= </span><a href="rangetypes.c.html#LN1231"><span class='Ref_To_Local'>lower_hash</span></a><span class='Delimiter'>; 
</span>    <a href="rangetypes.c.html#LN1224"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1224"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>&LT;&LT; </span><span class='Number'>1</span><span class='Parentheses'>) </span><span class='Operator'>| </span><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1224"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>&GT;&GT; </span><span class='Number'>31</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="rangetypes.c.html#LN1224"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>^= </span><a href="rangetypes.c.html#LN1232"><span class='Ref_To_Local'>upper_hash</span></a><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN313"><span class='Ref_to_Macro'>PG_RETURN_INT32</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1224"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end hash_range &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 *---------------------------------------------------------- 
 * CANONICAL FUNCTIONS 
 * 
 *   Functions for specific built-in range types. 
 *---------------------------------------------------------- 
 */ 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1291"></a><span class='Declare_Function'>int4range_canonical</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1293"></a>    <a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>r</span> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN73"><span class='Ref_to_Macro'>PG_GETARG_RANGE</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1294"></a>    <a href="../../../include/utils/typcache.h.html#LN28"><span class='Ref_to_Struct'>TypeCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>typcache</span><span class='Delimiter'>; 
</span><a name="LN1295"></a>    <a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a>  <span class='Declare_Local'>lower</span><span class='Delimiter'>; 
</span><a name="LN1296"></a>    <a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a>  <span class='Declare_Local'>upper</span><span class='Delimiter'>; 
</span><a name="LN1297"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>empty</span><span class='Delimiter'>; 
</span> 
    <a href="rangetypes.c.html#LN1294"><span class='Ref_To_Local'>typcache</span></a> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN119"><span class='Ref_to_Proto'>range_get_typcache</span></a><span class='Parentheses'>(</span>fcinfo<span class='Delimiter'>, </span><a href="../../../include/utils/rangetypes.h.html#LN32"><span class='Ref_to_Macro'>RangeTypeGetOid</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1293"><span class='Ref_To_Local'>r</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/rangetypes.h.html#LN123"><span class='Ref_to_Proto'>range_deserialize</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1294"><span class='Ref_To_Local'>typcache</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1293"><span class='Ref_To_Local'>r</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN1295"><span class='Ref_To_Local'>lower</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN1296"><span class='Ref_To_Local'>upper</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN1297"><span class='Ref_To_Local'>empty</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1297"><span class='Ref_To_Local'>empty</span></a><span class='Parentheses'>) 
</span>        <a href="../../../include/utils/rangetypes.h.html#LN75"><span class='Ref_to_Macro'>PG_RETURN_RANGE</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1293"><span class='Ref_To_Local'>r</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="rangetypes.c.html#LN1295"><span class='Ref_To_Local'>lower</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN62"><span class='Ref_to_Member'>infinite</span></a> <span class='Operator'>&& !</span><a href="rangetypes.c.html#LN1295"><span class='Ref_To_Local'>lower</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN63"><span class='Ref_to_Member'>inclusive</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="rangetypes.c.html#LN1295"><span class='Ref_To_Local'>lower</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN61"><span class='Ref_to_Member'>val</span></a> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN585"><span class='Ref_to_Macro'>DirectFunctionCall2</span></a><span class='Parentheses'>(</span><a href="int.c.html#LN619"><span class='Ref_to_Func'>int4pl</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1295"><span class='Ref_To_Local'>lower</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN61"><span class='Ref_to_Member'>val</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN484"><span class='Ref_to_Macro'>Int32GetDatum</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="rangetypes.c.html#LN1295"><span class='Ref_To_Local'>lower</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN63"><span class='Ref_to_Member'>inclusive</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="rangetypes.c.html#LN1296"><span class='Ref_To_Local'>upper</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN62"><span class='Ref_to_Member'>infinite</span></a> <span class='Operator'>&& </span><a href="rangetypes.c.html#LN1296"><span class='Ref_To_Local'>upper</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN63"><span class='Ref_to_Member'>inclusive</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="rangetypes.c.html#LN1296"><span class='Ref_To_Local'>upper</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN61"><span class='Ref_to_Member'>val</span></a> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN585"><span class='Ref_to_Macro'>DirectFunctionCall2</span></a><span class='Parentheses'>(</span><a href="int.c.html#LN619"><span class='Ref_to_Func'>int4pl</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1296"><span class='Ref_To_Local'>upper</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN61"><span class='Ref_to_Member'>val</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN484"><span class='Ref_to_Macro'>Int32GetDatum</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="rangetypes.c.html#LN1296"><span class='Ref_To_Local'>upper</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN63"><span class='Ref_to_Member'>inclusive</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../../include/utils/rangetypes.h.html#LN75"><span class='Ref_to_Macro'>PG_RETURN_RANGE</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN121"><span class='Ref_to_Proto'>range_serialize</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1294"><span class='Ref_To_Local'>typcache</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN1295"><span class='Ref_To_Local'>lower</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN1296"><span class='Ref_To_Local'>upper</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end int4range_canonical &raquo; </span> 
 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1322"></a><span class='Declare_Function'>int8range_canonical</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1324"></a>    <a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>r</span> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN73"><span class='Ref_to_Macro'>PG_GETARG_RANGE</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1325"></a>    <a href="../../../include/utils/typcache.h.html#LN28"><span class='Ref_to_Struct'>TypeCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>typcache</span><span class='Delimiter'>; 
</span><a name="LN1326"></a>    <a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a>  <span class='Declare_Local'>lower</span><span class='Delimiter'>; 
</span><a name="LN1327"></a>    <a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a>  <span class='Declare_Local'>upper</span><span class='Delimiter'>; 
</span><a name="LN1328"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>empty</span><span class='Delimiter'>; 
</span> 
    <a href="rangetypes.c.html#LN1325"><span class='Ref_To_Local'>typcache</span></a> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN119"><span class='Ref_to_Proto'>range_get_typcache</span></a><span class='Parentheses'>(</span>fcinfo<span class='Delimiter'>, </span><a href="../../../include/utils/rangetypes.h.html#LN32"><span class='Ref_to_Macro'>RangeTypeGetOid</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1324"><span class='Ref_To_Local'>r</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/rangetypes.h.html#LN123"><span class='Ref_to_Proto'>range_deserialize</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1325"><span class='Ref_To_Local'>typcache</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1324"><span class='Ref_To_Local'>r</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN1326"><span class='Ref_To_Local'>lower</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN1327"><span class='Ref_To_Local'>upper</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN1328"><span class='Ref_To_Local'>empty</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1328"><span class='Ref_To_Local'>empty</span></a><span class='Parentheses'>) 
</span>        <a href="../../../include/utils/rangetypes.h.html#LN75"><span class='Ref_to_Macro'>PG_RETURN_RANGE</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1324"><span class='Ref_To_Local'>r</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="rangetypes.c.html#LN1326"><span class='Ref_To_Local'>lower</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN62"><span class='Ref_to_Member'>infinite</span></a> <span class='Operator'>&& !</span><a href="rangetypes.c.html#LN1326"><span class='Ref_To_Local'>lower</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN63"><span class='Ref_to_Member'>inclusive</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="rangetypes.c.html#LN1326"><span class='Ref_To_Local'>lower</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN61"><span class='Ref_to_Member'>val</span></a> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN585"><span class='Ref_to_Macro'>DirectFunctionCall2</span></a><span class='Parentheses'>(</span><a href="int8.c.html#LN511"><span class='Ref_to_Func'>int8pl</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1326"><span class='Ref_To_Local'>lower</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN61"><span class='Ref_to_Member'>val</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN624"><span class='Ref_to_Macro'>Int64GetDatum</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="rangetypes.c.html#LN1326"><span class='Ref_To_Local'>lower</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN63"><span class='Ref_to_Member'>inclusive</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="rangetypes.c.html#LN1327"><span class='Ref_To_Local'>upper</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN62"><span class='Ref_to_Member'>infinite</span></a> <span class='Operator'>&& </span><a href="rangetypes.c.html#LN1327"><span class='Ref_To_Local'>upper</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN63"><span class='Ref_to_Member'>inclusive</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="rangetypes.c.html#LN1327"><span class='Ref_To_Local'>upper</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN61"><span class='Ref_to_Member'>val</span></a> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN585"><span class='Ref_to_Macro'>DirectFunctionCall2</span></a><span class='Parentheses'>(</span><a href="int8.c.html#LN511"><span class='Ref_to_Func'>int8pl</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1327"><span class='Ref_To_Local'>upper</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN61"><span class='Ref_to_Member'>val</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN624"><span class='Ref_to_Macro'>Int64GetDatum</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="rangetypes.c.html#LN1327"><span class='Ref_To_Local'>upper</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN63"><span class='Ref_to_Member'>inclusive</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../../include/utils/rangetypes.h.html#LN75"><span class='Ref_to_Macro'>PG_RETURN_RANGE</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN121"><span class='Ref_to_Proto'>range_serialize</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1325"><span class='Ref_To_Local'>typcache</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN1326"><span class='Ref_To_Local'>lower</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN1327"><span class='Ref_To_Local'>upper</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end int8range_canonical &raquo; </span> 
 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1353"></a><span class='Declare_Function'>daterange_canonical</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1355"></a>    <a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>r</span> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN73"><span class='Ref_to_Macro'>PG_GETARG_RANGE</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1356"></a>    <a href="../../../include/utils/typcache.h.html#LN28"><span class='Ref_to_Struct'>TypeCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>typcache</span><span class='Delimiter'>; 
</span><a name="LN1357"></a>    <a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a>  <span class='Declare_Local'>lower</span><span class='Delimiter'>; 
</span><a name="LN1358"></a>    <a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a>  <span class='Declare_Local'>upper</span><span class='Delimiter'>; 
</span><a name="LN1359"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>empty</span><span class='Delimiter'>; 
</span> 
    <a href="rangetypes.c.html#LN1356"><span class='Ref_To_Local'>typcache</span></a> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN119"><span class='Ref_to_Proto'>range_get_typcache</span></a><span class='Parentheses'>(</span>fcinfo<span class='Delimiter'>, </span><a href="../../../include/utils/rangetypes.h.html#LN32"><span class='Ref_to_Macro'>RangeTypeGetOid</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1355"><span class='Ref_To_Local'>r</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/rangetypes.h.html#LN123"><span class='Ref_to_Proto'>range_deserialize</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1356"><span class='Ref_To_Local'>typcache</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1355"><span class='Ref_To_Local'>r</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN1357"><span class='Ref_To_Local'>lower</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN1358"><span class='Ref_To_Local'>upper</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN1359"><span class='Ref_To_Local'>empty</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1359"><span class='Ref_To_Local'>empty</span></a><span class='Parentheses'>) 
</span>        <a href="../../../include/utils/rangetypes.h.html#LN75"><span class='Ref_to_Macro'>PG_RETURN_RANGE</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1355"><span class='Ref_To_Local'>r</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="rangetypes.c.html#LN1357"><span class='Ref_To_Local'>lower</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN62"><span class='Ref_to_Member'>infinite</span></a> <span class='Operator'>&& !</span><a href="rangetypes.c.html#LN1357"><span class='Ref_To_Local'>lower</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN63"><span class='Ref_to_Member'>inclusive</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="rangetypes.c.html#LN1357"><span class='Ref_To_Local'>lower</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN61"><span class='Ref_to_Member'>val</span></a> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN585"><span class='Ref_to_Macro'>DirectFunctionCall2</span></a><span class='Parentheses'>(</span><a href="date.c.html#LN521"><span class='Ref_to_Func'>date_pli</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1357"><span class='Ref_To_Local'>lower</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN61"><span class='Ref_to_Member'>val</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN484"><span class='Ref_to_Macro'>Int32GetDatum</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="rangetypes.c.html#LN1357"><span class='Ref_To_Local'>lower</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN63"><span class='Ref_to_Member'>inclusive</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="rangetypes.c.html#LN1358"><span class='Ref_To_Local'>upper</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN62"><span class='Ref_to_Member'>infinite</span></a> <span class='Operator'>&& </span><a href="rangetypes.c.html#LN1358"><span class='Ref_To_Local'>upper</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN63"><span class='Ref_to_Member'>inclusive</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="rangetypes.c.html#LN1358"><span class='Ref_To_Local'>upper</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN61"><span class='Ref_to_Member'>val</span></a> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN585"><span class='Ref_to_Macro'>DirectFunctionCall2</span></a><span class='Parentheses'>(</span><a href="date.c.html#LN521"><span class='Ref_to_Func'>date_pli</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1358"><span class='Ref_To_Local'>upper</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN61"><span class='Ref_to_Member'>val</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN484"><span class='Ref_to_Macro'>Int32GetDatum</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="rangetypes.c.html#LN1358"><span class='Ref_To_Local'>upper</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN63"><span class='Ref_to_Member'>inclusive</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../../include/utils/rangetypes.h.html#LN75"><span class='Ref_to_Macro'>PG_RETURN_RANGE</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN121"><span class='Ref_to_Proto'>range_serialize</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1356"><span class='Ref_To_Local'>typcache</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN1357"><span class='Ref_To_Local'>lower</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN1358"><span class='Ref_To_Local'>upper</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end daterange_canonical &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 *---------------------------------------------------------- 
 * SUBTYPE_DIFF FUNCTIONS 
 * 
 * Functions for specific built-in range types. 
 * 
 * Note that subtype_diff does return the difference, not the absolute value 
 * of the difference, and it must take care to avoid overflow. 
 * (numrange_subdiff is at some risk there ...) 
 *---------------------------------------------------------- 
 */ 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1396"></a><span class='Declare_Function'>int4range_subdiff</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1398"></a>    <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>v1</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN233"><span class='Ref_to_Macro'>PG_GETARG_INT32</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1399"></a>    <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>v2</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN233"><span class='Ref_to_Macro'>PG_GETARG_INT32</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN325"><span class='Ref_to_Macro'>PG_RETURN_FLOAT8</span></a><span class='Parentheses'>((</span><a href="../../../include/c.h.html#LN380"><span class='Ref_to_Typedef'>float8</span></a><span class='Parentheses'>) </span><a href="rangetypes.c.html#LN1398"><span class='Ref_To_Local'>v1</span></a> <span class='Operator'>- </span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN380"><span class='Ref_to_Typedef'>float8</span></a><span class='Parentheses'>) </span><a href="rangetypes.c.html#LN1399"><span class='Ref_To_Local'>v2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1405"></a><span class='Declare_Function'>int8range_subdiff</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1407"></a>    <a href="../../../include/c.h.html#LN294"><span class='Ref_to_Typedef'>int64</span></a>       <span class='Declare_Local'>v1</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN246"><span class='Ref_to_Macro'>PG_GETARG_INT64</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1408"></a>    <a href="../../../include/c.h.html#LN294"><span class='Ref_to_Typedef'>int64</span></a>       <span class='Declare_Local'>v2</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN246"><span class='Ref_to_Macro'>PG_GETARG_INT64</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN325"><span class='Ref_to_Macro'>PG_RETURN_FLOAT8</span></a><span class='Parentheses'>((</span><a href="../../../include/c.h.html#LN380"><span class='Ref_to_Typedef'>float8</span></a><span class='Parentheses'>) </span><a href="rangetypes.c.html#LN1407"><span class='Ref_To_Local'>v1</span></a> <span class='Operator'>- </span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN380"><span class='Ref_to_Typedef'>float8</span></a><span class='Parentheses'>) </span><a href="rangetypes.c.html#LN1408"><span class='Ref_To_Local'>v2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1414"></a><span class='Declare_Function'>numrange_subdiff</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1416"></a>    <a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>       <span class='Declare_Local'>v1</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN232"><span class='Ref_to_Macro'>PG_GETARG_DATUM</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1417"></a>    <a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>       <span class='Declare_Local'>v2</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN232"><span class='Ref_to_Macro'>PG_GETARG_DATUM</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1418"></a>    <a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>       <span class='Declare_Local'>numresult</span><span class='Delimiter'>; 
</span><a name="LN1419"></a>    <a href="../../../include/c.h.html#LN380"><span class='Ref_to_Typedef'>float8</span></a>      <span class='Declare_Local'>floatresult</span><span class='Delimiter'>; 
</span> 
    <a href="rangetypes.c.html#LN1418"><span class='Ref_To_Local'>numresult</span></a> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN585"><span class='Ref_to_Macro'>DirectFunctionCall2</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN2284"><span class='Ref_to_Func'>numeric_sub</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1416"><span class='Ref_To_Local'>v1</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1417"><span class='Ref_To_Local'>v2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="rangetypes.c.html#LN1419"><span class='Ref_To_Local'>floatresult</span></a> <span class='Operator'>= </span><a href="../../../include/postgres.h.html#LN720"><span class='Ref_to_Func'>DatumGetFloat8</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN583"><span class='Ref_to_Macro'>DirectFunctionCall1</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN3090"><span class='Ref_to_Func'>numeric_float8</span></a><span class='Delimiter'>, 
</span>                                                     <a href="rangetypes.c.html#LN1418"><span class='Ref_To_Local'>numresult</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN325"><span class='Ref_to_Macro'>PG_RETURN_FLOAT8</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1419"><span class='Ref_To_Local'>floatresult</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1430"></a><span class='Declare_Function'>daterange_subdiff</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1432"></a>    <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>v1</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN233"><span class='Ref_to_Macro'>PG_GETARG_INT32</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1433"></a>    <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>v2</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN233"><span class='Ref_to_Macro'>PG_GETARG_INT32</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN325"><span class='Ref_to_Macro'>PG_RETURN_FLOAT8</span></a><span class='Parentheses'>((</span><a href="../../../include/c.h.html#LN380"><span class='Ref_to_Typedef'>float8</span></a><span class='Parentheses'>) </span><a href="rangetypes.c.html#LN1432"><span class='Ref_To_Local'>v1</span></a> <span class='Operator'>- </span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN380"><span class='Ref_to_Typedef'>float8</span></a><span class='Parentheses'>) </span><a href="rangetypes.c.html#LN1433"><span class='Ref_To_Local'>v2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1439"></a><span class='Declare_Function'>tsrange_subdiff</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1441"></a>    <a href="../../../include/datatype/timestamp.h.html#LN37"><span class='Ref_to_Typedef'>Timestamp</span></a>   <span class='Declare_Local'>v1</span> <span class='Operator'>= </span><a href="../../../include/utils/timestamp.h.html#LN34"><span class='Ref_to_Macro'>PG_GETARG_TIMESTAMP</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1442"></a>    <a href="../../../include/datatype/timestamp.h.html#LN37"><span class='Ref_to_Typedef'>Timestamp</span></a>   <span class='Declare_Local'>v2</span> <span class='Operator'>= </span><a href="../../../include/utils/timestamp.h.html#LN34"><span class='Ref_to_Macro'>PG_GETARG_TIMESTAMP</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1443"></a>    <a href="../../../include/c.h.html#LN380"><span class='Ref_to_Typedef'>float8</span></a>      <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <a href="rangetypes.c.html#LN1443"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Parentheses'>((</span><a href="../../../include/c.h.html#LN380"><span class='Ref_to_Typedef'>float8</span></a><span class='Parentheses'>) </span><a href="rangetypes.c.html#LN1441"><span class='Ref_To_Local'>v1</span></a> <span class='Operator'>- </span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN380"><span class='Ref_to_Typedef'>float8</span></a><span class='Parentheses'>) </span><a href="rangetypes.c.html#LN1442"><span class='Ref_To_Local'>v2</span></a><span class='Parentheses'>)</span> <span class='Operator'>/ </span><a href="../../../include/datatype/timestamp.h.html#LN93"><span class='Ref_to_Const'>USECS_PER_SEC</span></a><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN325"><span class='Ref_to_Macro'>PG_RETURN_FLOAT8</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1443"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1450"></a><span class='Declare_Function'>tstzrange_subdiff</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1452"></a>    <a href="../../../include/datatype/timestamp.h.html#LN37"><span class='Ref_to_Typedef'>Timestamp</span></a>   <span class='Declare_Local'>v1</span> <span class='Operator'>= </span><a href="../../../include/utils/timestamp.h.html#LN34"><span class='Ref_to_Macro'>PG_GETARG_TIMESTAMP</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1453"></a>    <a href="../../../include/datatype/timestamp.h.html#LN37"><span class='Ref_to_Typedef'>Timestamp</span></a>   <span class='Declare_Local'>v2</span> <span class='Operator'>= </span><a href="../../../include/utils/timestamp.h.html#LN34"><span class='Ref_to_Macro'>PG_GETARG_TIMESTAMP</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1454"></a>    <a href="../../../include/c.h.html#LN380"><span class='Ref_to_Typedef'>float8</span></a>      <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <a href="rangetypes.c.html#LN1454"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Parentheses'>((</span><a href="../../../include/c.h.html#LN380"><span class='Ref_to_Typedef'>float8</span></a><span class='Parentheses'>) </span><a href="rangetypes.c.html#LN1452"><span class='Ref_To_Local'>v1</span></a> <span class='Operator'>- </span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN380"><span class='Ref_to_Typedef'>float8</span></a><span class='Parentheses'>) </span><a href="rangetypes.c.html#LN1453"><span class='Ref_To_Local'>v2</span></a><span class='Parentheses'>)</span> <span class='Operator'>/ </span><a href="../../../include/datatype/timestamp.h.html#LN93"><span class='Ref_to_Const'>USECS_PER_SEC</span></a><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN325"><span class='Ref_to_Macro'>PG_RETURN_FLOAT8</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1454"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 *---------------------------------------------------------- 
 * SUPPORT FUNCTIONS 
 * 
 *   These functions aren't in pg_proc, but are useful for 
 *   defining new generic range functions in C. 
 *---------------------------------------------------------- 
 */ 
</span> 
<span class='Comment_Multi_Line'>/* 
 * range_get_typcache: get cached information about a range type 
 * 
 * This is for use by range-related functions that follow the convention 
 * of using the fn_extra field as a pointer to the type cache entry for 
 * the range type.  Functions that need to cache more information than 
 * that must fend for themselves. 
 */ 
</span><a href="../../../include/utils/typcache.h.html#LN28"><span class='Ref_to_Struct'>TypeCacheEntry</span></a> <span class='Operator'>* 
</span><a name="LN1478"></a><span class='Declare_Function'>range_get_typcache</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN37"><span class='Ref_to_Typedef'>FunctionCallInfo</span></a> <span class='Declare_Parameter'>fcinfo</span><span class='Delimiter'>, </span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>rngtypid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1480"></a>    <a href="../../../include/utils/typcache.h.html#LN28"><span class='Ref_to_Struct'>TypeCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>typcache</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/utils/typcache.h.html#LN28"><span class='Ref_to_Struct'>TypeCacheEntry</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="rangetypes.c.html#LN1478"><span class='Ref_to_Parameter'>fcinfo</span></a><span class='Operator'>-&GT;</span><a href="../../../include/fmgr.h.html#LN78"><span class='Ref_to_Member'>flinfo</span></a><span class='Operator'>-&GT;</span><a href="../../../include/fmgr.h.html#LN63"><span class='Ref_to_Member'>fn_extra</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1480"><span class='Ref_To_Local'>typcache</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL </span><span class='Operator'>|| 
</span>        <a href="rangetypes.c.html#LN1480"><span class='Ref_To_Local'>typcache</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/typcache.h.html#LN31"><span class='Ref_to_Member'>type_id</span></a> <span class='Operator'>!= </span><a href="rangetypes.c.html#LN1478"><span class='Ref_to_Parameter'>rngtypid</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="rangetypes.c.html#LN1480"><span class='Ref_To_Local'>typcache</span></a> <span class='Operator'>= </span><a href="../../../include/utils/typcache.h.html#LN142"><span class='Ref_to_Proto'>lookup_type_cache</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1478"><span class='Ref_to_Parameter'>rngtypid</span></a><span class='Delimiter'>, </span><a href="../../../include/utils/typcache.h.html#LN120"><span class='Ref_to_Const'>TYPECACHE_RANGE_INFO</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1480"><span class='Ref_To_Local'>typcache</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/typcache.h.html#LN83"><span class='Ref_to_Member'>rngelemtype</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"type %u is not a range type"</span><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1478"><span class='Ref_to_Parameter'>rngtypid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="rangetypes.c.html#LN1478"><span class='Ref_to_Parameter'>fcinfo</span></a><span class='Operator'>-&GT;</span><a href="../../../include/fmgr.h.html#LN78"><span class='Ref_to_Member'>flinfo</span></a><span class='Operator'>-&GT;</span><a href="../../../include/fmgr.h.html#LN63"><span class='Ref_to_Member'>fn_extra</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>void </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="rangetypes.c.html#LN1480"><span class='Ref_To_Local'>typcache</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>return</span> <a href="rangetypes.c.html#LN1480"><span class='Ref_To_Local'>typcache</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * range_serialize: construct a range value from bounds and empty-flag 
 * 
 * This does not force canonicalization of the range value.  In most cases, 
 * external callers should only be canonicalization functions.  Note that 
 * we perform some datatype-independent canonicalization checks anyway. 
 */ 
</span><a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a> <span class='Operator'>* 
</span><a name="LN1502"></a><span class='Declare_Function'>range_serialize</span><span class='Parentheses'>(</span><a href="../../../include/utils/typcache.h.html#LN28"><span class='Ref_to_Struct'>TypeCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>typcache</span><span class='Delimiter'>, </span><a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>lower</span><span class='Delimiter'>, </span><a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>upper</span><span class='Delimiter'>, 
</span><a name="LN1503"></a>                <span class='Keyword'>bool </span><span class='Declare_Parameter'>empty</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1505"></a>    <a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>range</span><span class='Delimiter'>; 
</span><a name="LN1506"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>cmp</span><span class='Delimiter'>; 
</span><a name="LN1507"></a>    <a href="../../../include/c.h.html#LN355"><span class='Ref_to_Typedef'>Size</span></a>        <span class='Declare_Local'>msize</span><span class='Delimiter'>; 
</span><a name="LN1508"></a>    <a href="../../../include/c.h.html#LN244"><span class='Ref_to_Typedef'>Pointer</span></a>     <span class='Declare_Local'>ptr</span><span class='Delimiter'>; 
</span><a name="LN1509"></a>    <a href="../../../include/c.h.html#LN254"><span class='Ref_to_Typedef'>int16</span></a>       <span class='Declare_Local'>typlen</span><span class='Delimiter'>; 
</span><a name="LN1510"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>typbyval</span><span class='Delimiter'>; 
</span><a name="LN1511"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>typalign</span><span class='Delimiter'>; 
</span><a name="LN1512"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>typstorage</span><span class='Delimiter'>; 
</span><a name="LN1513"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>flags</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Verify range is not invalid on its face, and construct flags value, 
     * preventing any non-canonical combinations such as infinite+inclusive. 
     */ 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1502"><span class='Ref_to_Parameter'>lower</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/rangetypes.h.html#LN64"><span class='Ref_to_Member'>lower</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><span class='Operator'>!</span><a href="rangetypes.c.html#LN1502"><span class='Ref_to_Parameter'>upper</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/rangetypes.h.html#LN64"><span class='Ref_to_Member'>lower</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1503"><span class='Ref_to_Parameter'>empty</span></a><span class='Parentheses'>) 
</span>        <a href="rangetypes.c.html#LN1513"><span class='Ref_To_Local'>flags</span></a> <span class='Operator'>|= </span><a href="../../../include/utils/rangetypes.h.html#LN35"><span class='Ref_to_Const'>RANGE_EMPTY</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="rangetypes.c.html#LN1506"><span class='Ref_To_Local'>cmp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN132"><span class='Ref_to_Proto'>range_cmp_bound_values</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1502"><span class='Ref_to_Parameter'>typcache</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1502"><span class='Ref_to_Parameter'>lower</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1502"><span class='Ref_to_Parameter'>upper</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* error check: if lower bound value is above upper, it's wrong */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1506"><span class='Ref_To_Local'>cmp</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_DATA_EXCEPTION<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"range lower bound must be less than or equal to range upper bound"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* if bounds are equal, and not both inclusive, range is empty */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1506"><span class='Ref_To_Local'>cmp</span></a> <span class='Operator'>== </span><span class='Number'>0</span> <span class='Operator'>&& !</span><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1502"><span class='Ref_to_Parameter'>lower</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/rangetypes.h.html#LN63"><span class='Ref_to_Member'>inclusive</span></a> <span class='Operator'>&& </span><a href="rangetypes.c.html#LN1502"><span class='Ref_to_Parameter'>upper</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/rangetypes.h.html#LN63"><span class='Ref_to_Member'>inclusive</span></a><span class='Parentheses'>))</span> 
            <a href="rangetypes.c.html#LN1513"><span class='Ref_To_Local'>flags</span></a> <span class='Operator'>|= </span><a href="../../../include/utils/rangetypes.h.html#LN35"><span class='Ref_to_Const'>RANGE_EMPTY</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* infinite boundaries are never inclusive */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1502"><span class='Ref_to_Parameter'>lower</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/rangetypes.h.html#LN62"><span class='Ref_to_Member'>infinite</span></a><span class='Parentheses'>) 
</span>                <a href="rangetypes.c.html#LN1513"><span class='Ref_To_Local'>flags</span></a> <span class='Operator'>|= </span><a href="../../../include/utils/rangetypes.h.html#LN38"><span class='Ref_to_Const'>RANGE_LB_INF</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1502"><span class='Ref_to_Parameter'>lower</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/rangetypes.h.html#LN63"><span class='Ref_to_Member'>inclusive</span></a><span class='Parentheses'>) 
</span>                <a href="rangetypes.c.html#LN1513"><span class='Ref_To_Local'>flags</span></a> <span class='Operator'>|= </span><a href="../../../include/utils/rangetypes.h.html#LN36"><span class='Ref_to_Const'>RANGE_LB_INC</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1502"><span class='Ref_to_Parameter'>upper</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/rangetypes.h.html#LN62"><span class='Ref_to_Member'>infinite</span></a><span class='Parentheses'>) 
</span>                <a href="rangetypes.c.html#LN1513"><span class='Ref_To_Local'>flags</span></a> <span class='Operator'>|= </span><a href="../../../include/utils/rangetypes.h.html#LN39"><span class='Ref_to_Const'>RANGE_UB_INF</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1502"><span class='Ref_to_Parameter'>upper</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/rangetypes.h.html#LN63"><span class='Ref_to_Member'>inclusive</span></a><span class='Parentheses'>) 
</span>                <a href="rangetypes.c.html#LN1513"><span class='Ref_To_Local'>flags</span></a> <span class='Operator'>|= </span><a href="../../../include/utils/rangetypes.h.html#LN37"><span class='Ref_to_Const'>RANGE_UB_INC</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* Fetch information about range's element type */ 
</span>    <a href="rangetypes.c.html#LN1509"><span class='Ref_To_Local'>typlen</span></a> <span class='Operator'>= </span><a href="rangetypes.c.html#LN1502"><span class='Ref_to_Parameter'>typcache</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/typcache.h.html#LN83"><span class='Ref_to_Member'>rngelemtype</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/typcache.h.html#LN34"><span class='Ref_to_Member'>typlen</span></a><span class='Delimiter'>; 
</span>    <a href="rangetypes.c.html#LN1510"><span class='Ref_To_Local'>typbyval</span></a> <span class='Operator'>= </span><a href="rangetypes.c.html#LN1502"><span class='Ref_to_Parameter'>typcache</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/typcache.h.html#LN83"><span class='Ref_to_Member'>rngelemtype</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/typcache.h.html#LN35"><span class='Ref_to_Member'>typbyval</span></a><span class='Delimiter'>; 
</span>    <a href="rangetypes.c.html#LN1511"><span class='Ref_To_Local'>typalign</span></a> <span class='Operator'>= </span><a href="rangetypes.c.html#LN1502"><span class='Ref_to_Parameter'>typcache</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/typcache.h.html#LN83"><span class='Ref_to_Member'>rngelemtype</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/typcache.h.html#LN36"><span class='Ref_to_Member'>typalign</span></a><span class='Delimiter'>; 
</span>    <a href="rangetypes.c.html#LN1512"><span class='Ref_To_Local'>typstorage</span></a> <span class='Operator'>= </span><a href="rangetypes.c.html#LN1502"><span class='Ref_to_Parameter'>typcache</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/typcache.h.html#LN83"><span class='Ref_to_Member'>rngelemtype</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/typcache.h.html#LN37"><span class='Ref_to_Member'>typstorage</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Count space for varlena header and range type's OID */ 
</span>    <a href="rangetypes.c.html#LN1507"><span class='Ref_To_Local'>msize</span></a> <span class='Operator'>= </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1507"><span class='Ref_To_Local'>msize</span></a> <span class='Operator'>== </span><a href="../../../include/c.h.html#LN587"><span class='Ref_to_Macro'>MAXALIGN</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1507"><span class='Ref_To_Local'>msize</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Count space for bounds */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN45"><span class='Ref_to_Macro'>RANGE_HAS_LBOUND</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1513"><span class='Ref_To_Local'>flags</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * Make sure item to be inserted is not toasted.  It is essential that 
         * we not insert an out-of-line toast value pointer into a range 
         * object, for the same reasons that arrays and records can't contain 
         * them.  It would work to store a compressed-in-line value, but we 
         * prefer to decompress and then let compression be applied to the 
         * whole range object if necessary.  But, unlike arrays, we do allow 
         * short-header varlena objects to stay as-is. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1509"><span class='Ref_To_Local'>typlen</span></a> <span class='Operator'>== -</span><span class='Number'>1</span><span class='Parentheses'>) 
</span>            <a href="rangetypes.c.html#LN1502"><span class='Ref_to_Parameter'>lower</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/rangetypes.h.html#LN61"><span class='Ref_to_Member'>val</span></a> <span class='Operator'>= </span><a href="../../../include/postgres.h.html#LN561"><span class='Ref_to_Macro'>PointerGetDatum</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN212"><span class='Ref_to_Macro'>PG_DETOAST_DATUM_PACKED</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1502"><span class='Ref_to_Parameter'>lower</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/rangetypes.h.html#LN61"><span class='Ref_to_Member'>val</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <a href="rangetypes.c.html#LN1507"><span class='Ref_To_Local'>msize</span></a> <span class='Operator'>= </span><a href="rangetypes.c.html#LN66"><span class='Ref_to_Proto'>datum_compute_size</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1507"><span class='Ref_To_Local'>msize</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1502"><span class='Ref_to_Parameter'>lower</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/rangetypes.h.html#LN61"><span class='Ref_to_Member'>val</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1510"><span class='Ref_To_Local'>typbyval</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1511"><span class='Ref_To_Local'>typalign</span></a><span class='Delimiter'>, 
</span>                                   <a href="rangetypes.c.html#LN1509"><span class='Ref_To_Local'>typlen</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1512"><span class='Ref_To_Local'>typstorage</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN49"><span class='Ref_to_Macro'>RANGE_HAS_UBOUND</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1513"><span class='Ref_To_Local'>flags</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Make sure item to be inserted is not toasted */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1509"><span class='Ref_To_Local'>typlen</span></a> <span class='Operator'>== -</span><span class='Number'>1</span><span class='Parentheses'>) 
</span>            <a href="rangetypes.c.html#LN1502"><span class='Ref_to_Parameter'>upper</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/rangetypes.h.html#LN61"><span class='Ref_to_Member'>val</span></a> <span class='Operator'>= </span><a href="../../../include/postgres.h.html#LN561"><span class='Ref_to_Macro'>PointerGetDatum</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN212"><span class='Ref_to_Macro'>PG_DETOAST_DATUM_PACKED</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1502"><span class='Ref_to_Parameter'>upper</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/rangetypes.h.html#LN61"><span class='Ref_to_Member'>val</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <a href="rangetypes.c.html#LN1507"><span class='Ref_To_Local'>msize</span></a> <span class='Operator'>= </span><a href="rangetypes.c.html#LN66"><span class='Ref_to_Proto'>datum_compute_size</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1507"><span class='Ref_To_Local'>msize</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1502"><span class='Ref_to_Parameter'>upper</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/rangetypes.h.html#LN61"><span class='Ref_to_Member'>val</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1510"><span class='Ref_To_Local'>typbyval</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1511"><span class='Ref_To_Local'>typalign</span></a><span class='Delimiter'>, 
</span>                                   <a href="rangetypes.c.html#LN1509"><span class='Ref_To_Local'>typlen</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1512"><span class='Ref_To_Local'>typstorage</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* Add space for flag byte */ 
</span>    <a href="rangetypes.c.html#LN1507"><span class='Ref_To_Local'>msize</span></a> <span class='Operator'>+= </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>char</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Note: zero-fill is required here, just as in heap tuples */ 
</span>    <a href="rangetypes.c.html#LN1505"><span class='Ref_To_Local'>range</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1507"><span class='Ref_To_Local'>msize</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/postgres.h.html#LN327"><span class='Ref_to_Macro'>SET_VARSIZE</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1505"><span class='Ref_To_Local'>range</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1507"><span class='Ref_To_Local'>msize</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Now fill in the datum */ 
</span>    <a href="rangetypes.c.html#LN1505"><span class='Ref_To_Local'>range</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/rangetypes.h.html#LN27"><span class='Ref_to_Member'>rangetypid</span></a> <span class='Operator'>= </span><a href="rangetypes.c.html#LN1502"><span class='Ref_to_Parameter'>typcache</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/typcache.h.html#LN31"><span class='Ref_to_Member'>type_id</span></a><span class='Delimiter'>; 
</span> 
    <a href="rangetypes.c.html#LN1508"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) (</span><a href="rangetypes.c.html#LN1505"><span class='Ref_To_Local'>range</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN45"><span class='Ref_to_Macro'>RANGE_HAS_LBOUND</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1513"><span class='Ref_To_Local'>flags</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1502"><span class='Ref_to_Parameter'>lower</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/rangetypes.h.html#LN64"><span class='Ref_to_Member'>lower</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="rangetypes.c.html#LN1508"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>= </span><a href="rangetypes.c.html#LN68"><span class='Ref_to_Proto'>datum_write</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1508"><span class='Ref_To_Local'>ptr</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1502"><span class='Ref_to_Parameter'>lower</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/rangetypes.h.html#LN61"><span class='Ref_to_Member'>val</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1510"><span class='Ref_To_Local'>typbyval</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1511"><span class='Ref_To_Local'>typalign</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1509"><span class='Ref_To_Local'>typlen</span></a><span class='Delimiter'>, 
</span>                          <a href="rangetypes.c.html#LN1512"><span class='Ref_To_Local'>typstorage</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN49"><span class='Ref_to_Macro'>RANGE_HAS_UBOUND</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1513"><span class='Ref_To_Local'>flags</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Debug'>Assert</span><span class='Parentheses'>(</span><span class='Operator'>!</span><a href="rangetypes.c.html#LN1502"><span class='Ref_to_Parameter'>upper</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/rangetypes.h.html#LN64"><span class='Ref_to_Member'>lower</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="rangetypes.c.html#LN1508"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>= </span><a href="rangetypes.c.html#LN68"><span class='Ref_to_Proto'>datum_write</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1508"><span class='Ref_To_Local'>ptr</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1502"><span class='Ref_to_Parameter'>upper</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/rangetypes.h.html#LN61"><span class='Ref_to_Member'>val</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1510"><span class='Ref_To_Local'>typbyval</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1511"><span class='Ref_To_Local'>typalign</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1509"><span class='Ref_To_Local'>typlen</span></a><span class='Delimiter'>, 
</span>                          <a href="rangetypes.c.html#LN1512"><span class='Ref_To_Local'>typstorage</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Operator'>*</span><span class='Parentheses'>((</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="rangetypes.c.html#LN1508"><span class='Ref_To_Local'>ptr</span></a><span class='Parentheses'>)</span> <span class='Operator'>= </span><a href="rangetypes.c.html#LN1513"><span class='Ref_To_Local'>flags</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="rangetypes.c.html#LN1505"><span class='Ref_To_Local'>range</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end range_serialize &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * range_deserialize: deconstruct a range value 
 * 
 * NB: the given range object must be fully detoasted; it cannot have a 
 * short varlena header. 
 * 
 * Note that if the element type is pass-by-reference, the datums in the 
 * RangeBound structs will be pointers into the given range object. 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN1631"></a><span class='Declare_Function'>range_deserialize</span><span class='Parentheses'>(</span><a href="../../../include/utils/typcache.h.html#LN28"><span class='Ref_to_Struct'>TypeCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>typcache</span><span class='Delimiter'>, </span><a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>range</span><span class='Delimiter'>, 
</span><a name="LN1632"></a>                  <a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>lower</span><span class='Delimiter'>, </span><a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>upper</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Declare_Parameter'>empty</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1634"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>flags</span><span class='Delimiter'>; 
</span><a name="LN1635"></a>    <a href="../../../include/c.h.html#LN254"><span class='Ref_to_Typedef'>int16</span></a>       <span class='Declare_Local'>typlen</span><span class='Delimiter'>; 
</span><a name="LN1636"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>typbyval</span><span class='Delimiter'>; 
</span><a name="LN1637"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>typalign</span><span class='Delimiter'>; 
</span><a name="LN1638"></a>    <a href="../../../include/c.h.html#LN244"><span class='Ref_to_Typedef'>Pointer</span></a>     <span class='Declare_Local'>ptr</span><span class='Delimiter'>; 
</span><a name="LN1639"></a>    <a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>       <span class='Declare_Local'>lbound</span><span class='Delimiter'>; 
</span><a name="LN1640"></a>    <a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>       <span class='Declare_Local'>ubound</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* assert caller passed the right typcache entry */ 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN32"><span class='Ref_to_Macro'>RangeTypeGetOid</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1631"><span class='Ref_to_Parameter'>range</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><a href="rangetypes.c.html#LN1631"><span class='Ref_to_Parameter'>typcache</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/typcache.h.html#LN31"><span class='Ref_to_Member'>type_id</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* fetch the flag byte from datum's last byte */ 
</span>    <a href="rangetypes.c.html#LN1634"><span class='Ref_To_Local'>flags</span></a> <span class='Operator'>= *</span><span class='Parentheses'>((</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="rangetypes.c.html#LN1631"><span class='Ref_to_Parameter'>range</span></a> <span class='Operator'>+ </span><a href="../../../include/postgres.h.html#LN303"><span class='Ref_to_Macro'>VARSIZE</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1631"><span class='Ref_to_Parameter'>range</span></a><span class='Parentheses'>) </span><span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* fetch information about range's element type */ 
</span>    <a href="rangetypes.c.html#LN1635"><span class='Ref_To_Local'>typlen</span></a> <span class='Operator'>= </span><a href="rangetypes.c.html#LN1631"><span class='Ref_to_Parameter'>typcache</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/typcache.h.html#LN83"><span class='Ref_to_Member'>rngelemtype</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/typcache.h.html#LN34"><span class='Ref_to_Member'>typlen</span></a><span class='Delimiter'>; 
</span>    <a href="rangetypes.c.html#LN1636"><span class='Ref_To_Local'>typbyval</span></a> <span class='Operator'>= </span><a href="rangetypes.c.html#LN1631"><span class='Ref_to_Parameter'>typcache</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/typcache.h.html#LN83"><span class='Ref_to_Member'>rngelemtype</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/typcache.h.html#LN35"><span class='Ref_to_Member'>typbyval</span></a><span class='Delimiter'>; 
</span>    <a href="rangetypes.c.html#LN1637"><span class='Ref_To_Local'>typalign</span></a> <span class='Operator'>= </span><a href="rangetypes.c.html#LN1631"><span class='Ref_to_Parameter'>typcache</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/typcache.h.html#LN83"><span class='Ref_to_Member'>rngelemtype</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/typcache.h.html#LN36"><span class='Ref_to_Member'>typalign</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* initialize data pointer just after the range OID */ 
</span>    <a href="rangetypes.c.html#LN1638"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN244"><span class='Ref_to_Typedef'>Pointer</span></a><span class='Parentheses'>) (</span><a href="rangetypes.c.html#LN1631"><span class='Ref_to_Parameter'>range</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* fetch lower bound, if any */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN45"><span class='Ref_to_Macro'>RANGE_HAS_LBOUND</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1634"><span class='Ref_To_Local'>flags</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* att_align_pointer cannot be necessary here */ 
</span>        <a href="rangetypes.c.html#LN1639"><span class='Ref_To_Local'>lbound</span></a> <span class='Operator'>= </span><a href="../../../include/access/tupmacs.h.html#LN43"><span class='Ref_to_Macro'>fetch_att</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1638"><span class='Ref_To_Local'>ptr</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1636"><span class='Ref_To_Local'>typbyval</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1635"><span class='Ref_To_Local'>typlen</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="rangetypes.c.html#LN1638"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN244"><span class='Ref_to_Typedef'>Pointer</span></a><span class='Parentheses'>) </span><a href="../../../include/access/tupmacs.h.html#LN171"><span class='Ref_to_Macro'>att_addlength_pointer</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1638"><span class='Ref_To_Local'>ptr</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1635"><span class='Ref_To_Local'>typlen</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1638"><span class='Ref_To_Local'>ptr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
        <a href="rangetypes.c.html#LN1639"><span class='Ref_To_Local'>lbound</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a><span class='Parentheses'>) </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* fetch upper bound, if any */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN49"><span class='Ref_to_Macro'>RANGE_HAS_UBOUND</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1634"><span class='Ref_To_Local'>flags</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="rangetypes.c.html#LN1638"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN244"><span class='Ref_to_Typedef'>Pointer</span></a><span class='Parentheses'>) </span><a href="../../../include/access/tupmacs.h.html#LN121"><span class='Ref_to_Macro'>att_align_pointer</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1638"><span class='Ref_To_Local'>ptr</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1637"><span class='Ref_To_Local'>typalign</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1635"><span class='Ref_To_Local'>typlen</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1638"><span class='Ref_To_Local'>ptr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="rangetypes.c.html#LN1640"><span class='Ref_To_Local'>ubound</span></a> <span class='Operator'>= </span><a href="../../../include/access/tupmacs.h.html#LN43"><span class='Ref_to_Macro'>fetch_att</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1638"><span class='Ref_To_Local'>ptr</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1636"><span class='Ref_To_Local'>typbyval</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1635"><span class='Ref_To_Local'>typlen</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* no need for att_addlength_pointer */ 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
        <a href="rangetypes.c.html#LN1640"><span class='Ref_To_Local'>ubound</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a><span class='Parentheses'>) </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* emit results */ 
</span> 
    <span class='Operator'>*</span><a href="rangetypes.c.html#LN1632"><span class='Ref_to_Parameter'>empty</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1634"><span class='Ref_To_Local'>flags</span></a> <span class='Operator'>& </span><a href="../../../include/utils/rangetypes.h.html#LN35"><span class='Ref_to_Const'>RANGE_EMPTY</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <a href="rangetypes.c.html#LN1632"><span class='Ref_to_Parameter'>lower</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/rangetypes.h.html#LN61"><span class='Ref_to_Member'>val</span></a> <span class='Operator'>= </span><a href="rangetypes.c.html#LN1639"><span class='Ref_To_Local'>lbound</span></a><span class='Delimiter'>; 
</span>    <a href="rangetypes.c.html#LN1632"><span class='Ref_to_Parameter'>lower</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/rangetypes.h.html#LN62"><span class='Ref_to_Member'>infinite</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1634"><span class='Ref_To_Local'>flags</span></a> <span class='Operator'>& </span><a href="../../../include/utils/rangetypes.h.html#LN38"><span class='Ref_to_Const'>RANGE_LB_INF</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="rangetypes.c.html#LN1632"><span class='Ref_to_Parameter'>lower</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/rangetypes.h.html#LN63"><span class='Ref_to_Member'>inclusive</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1634"><span class='Ref_To_Local'>flags</span></a> <span class='Operator'>& </span><a href="../../../include/utils/rangetypes.h.html#LN36"><span class='Ref_to_Const'>RANGE_LB_INC</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="rangetypes.c.html#LN1632"><span class='Ref_to_Parameter'>lower</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/rangetypes.h.html#LN64"><span class='Ref_to_Member'>lower</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
    <a href="rangetypes.c.html#LN1632"><span class='Ref_to_Parameter'>upper</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/rangetypes.h.html#LN61"><span class='Ref_to_Member'>val</span></a> <span class='Operator'>= </span><a href="rangetypes.c.html#LN1640"><span class='Ref_To_Local'>ubound</span></a><span class='Delimiter'>; 
</span>    <a href="rangetypes.c.html#LN1632"><span class='Ref_to_Parameter'>upper</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/rangetypes.h.html#LN62"><span class='Ref_to_Member'>infinite</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1634"><span class='Ref_To_Local'>flags</span></a> <span class='Operator'>& </span><a href="../../../include/utils/rangetypes.h.html#LN39"><span class='Ref_to_Const'>RANGE_UB_INF</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="rangetypes.c.html#LN1632"><span class='Ref_to_Parameter'>upper</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/rangetypes.h.html#LN63"><span class='Ref_to_Member'>inclusive</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1634"><span class='Ref_To_Local'>flags</span></a> <span class='Operator'>& </span><a href="../../../include/utils/rangetypes.h.html#LN37"><span class='Ref_to_Const'>RANGE_UB_INC</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="rangetypes.c.html#LN1632"><span class='Ref_to_Parameter'>upper</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/rangetypes.h.html#LN64"><span class='Ref_to_Member'>lower</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end range_deserialize &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * range_get_flags: just get the flags from a RangeType value. 
 * 
 * This is frequently useful in places that only need the flags and not 
 * the full results of range_deserialize. 
 */ 
</span><span class='Keyword'>char 
</span><a name="LN1698"></a><span class='Declare_Function'>range_get_flags</span><span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>range</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Comment_Multi_Line'>/* fetch the flag byte from datum's last byte */ 
</span>    <span class='Control'>return</span> <span class='Operator'>*</span><span class='Parentheses'>((</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="rangetypes.c.html#LN1698"><span class='Ref_to_Parameter'>range</span></a> <span class='Operator'>+ </span><a href="../../../include/postgres.h.html#LN303"><span class='Ref_to_Macro'>VARSIZE</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1698"><span class='Ref_to_Parameter'>range</span></a><span class='Parentheses'>) </span><span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * range_set_contain_empty: set the RANGE_CONTAIN_EMPTY bit in the value. 
 * 
 * This is only needed in GiST operations, so we don't include a provision 
 * for setting it in range_serialize; rather, this function must be applied 
 * afterwards. 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN1712"></a><span class='Declare_Function'>range_set_contain_empty</span><span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>range</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1714"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>flagsp</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* flag byte is datum's last byte */ 
</span>    <a href="rangetypes.c.html#LN1714"><span class='Ref_To_Local'>flagsp</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="rangetypes.c.html#LN1712"><span class='Ref_to_Parameter'>range</span></a> <span class='Operator'>+ </span><a href="../../../include/postgres.h.html#LN303"><span class='Ref_to_Macro'>VARSIZE</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1712"><span class='Ref_to_Parameter'>range</span></a><span class='Parentheses'>) </span><span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>; 
</span> 
    <span class='Operator'>*</span><a href="rangetypes.c.html#LN1714"><span class='Ref_To_Local'>flagsp</span></a> <span class='Operator'>|= </span><a href="../../../include/utils/rangetypes.h.html#LN42"><span class='Ref_to_Const'>RANGE_CONTAIN_EMPTY</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * This both serializes and canonicalizes (if applicable) the range. 
 * This should be used by most callers. 
 */ 
</span><a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a> <span class='Operator'>* 
</span><a name="LN1727"></a><span class='Declare_Function'>make_range</span><span class='Parentheses'>(</span><a href="../../../include/utils/typcache.h.html#LN28"><span class='Ref_to_Struct'>TypeCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>typcache</span><span class='Delimiter'>, </span><a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>lower</span><span class='Delimiter'>, </span><a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>upper</span><span class='Delimiter'>, 
</span><a name="LN1728"></a>           <span class='Keyword'>bool </span><span class='Declare_Parameter'>empty</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1730"></a>    <a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>range</span><span class='Delimiter'>; 
</span> 
    <a href="rangetypes.c.html#LN1730"><span class='Ref_To_Local'>range</span></a> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN121"><span class='Ref_to_Proto'>range_serialize</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1727"><span class='Ref_to_Parameter'>typcache</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1727"><span class='Ref_to_Parameter'>lower</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1727"><span class='Ref_to_Parameter'>upper</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1728"><span class='Ref_to_Parameter'>empty</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* no need to call canonical on empty ranges ... */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1727"><span class='Ref_to_Parameter'>typcache</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/typcache.h.html#LN86"><span class='Ref_to_Member'>rng_canonical_finfo</span></a><span class='Operator'>.</span><a href="../../../include/fmgr.h.html#LN58"><span class='Ref_to_Member'>fn_oid</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>        <span class='Operator'>!</span><a href="../../../include/utils/rangetypes.h.html#LN53"><span class='Ref_to_Macro'>RangeIsEmpty</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1730"><span class='Ref_To_Local'>range</span></a><span class='Parentheses'>))</span> 
        <a href="rangetypes.c.html#LN1730"><span class='Ref_To_Local'>range</span></a> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN70"><span class='Ref_to_Macro'>DatumGetRangeType</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN601"><span class='Ref_to_Macro'>FunctionCall1</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rangetypes.c.html#LN1727"><span class='Ref_to_Parameter'>typcache</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/typcache.h.html#LN86"><span class='Ref_to_Member'>rng_canonical_finfo</span></a><span class='Delimiter'>, 
</span>                                                <a href="../../../include/utils/rangetypes.h.html#LN72"><span class='Ref_to_Macro'>RangeTypeGetDatum</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1730"><span class='Ref_To_Local'>range</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="rangetypes.c.html#LN1730"><span class='Ref_To_Local'>range</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Compare two range boundary points, returning &LT;0, 0, or &GT;0 according to 
 * whether b1 is less than, equal to, or greater than b2. 
 * 
 * The boundaries can be any combination of upper and lower; so it's useful 
 * for a variety of operators. 
 * 
 * The simple case is when b1 and b2 are both finite and inclusive, in which 
 * case the result is just a comparison of the values held in b1 and b2. 
 * 
 * If a bound is exclusive, then we need to know whether it's a lower bound, 
 * in which case we treat the boundary point as "just greater than" the held 
 * value; or an upper bound, in which case we treat the boundary point as 
 * "just less than" the held value. 
 * 
 * If a bound is infinite, it represents minus infinity (less than every other 
 * point) if it's a lower bound; or plus infinity (greater than every other 
 * point) if it's an upper bound. 
 * 
 * There is only one case where two boundaries compare equal but are not 
 * identical: when both bounds are inclusive and hold the same finite value, 
 * but one is an upper bound and the other a lower bound. 
 */ 
</span><span class='Keyword'>int 
</span><a name="LN1767"></a><span class='Declare_Function'>range_cmp_bounds</span><span class='Parentheses'>(</span><a href="../../../include/utils/typcache.h.html#LN28"><span class='Ref_to_Struct'>TypeCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>typcache</span><span class='Delimiter'>, </span><a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>b1</span><span class='Delimiter'>, </span><a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>b2</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1769"></a>    <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * First, handle cases involving infinity, which don't require invoking 
     * the comparison proc. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1767"><span class='Ref_to_Parameter'>b1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/rangetypes.h.html#LN62"><span class='Ref_to_Member'>infinite</span></a> <span class='Operator'>&& </span><a href="rangetypes.c.html#LN1767"><span class='Ref_to_Parameter'>b2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/rangetypes.h.html#LN62"><span class='Ref_to_Member'>infinite</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * Both are infinity, so they are equal unless one is lower and the 
         * other not. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1767"><span class='Ref_to_Parameter'>b1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/rangetypes.h.html#LN64"><span class='Ref_to_Member'>lower</span></a> <span class='Operator'>== </span><a href="rangetypes.c.html#LN1767"><span class='Ref_to_Parameter'>b2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/rangetypes.h.html#LN64"><span class='Ref_to_Member'>lower</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <span class='Control'>return</span> <a href="rangetypes.c.html#LN1767"><span class='Ref_to_Parameter'>b1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/rangetypes.h.html#LN64"><span class='Ref_to_Member'>lower</span></a> <span class='Operator'>? -</span><span class='Number'>1</span> <span class='Operator'>: </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1767"><span class='Ref_to_Parameter'>b1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/rangetypes.h.html#LN62"><span class='Ref_to_Member'>infinite</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <a href="rangetypes.c.html#LN1767"><span class='Ref_to_Parameter'>b1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/rangetypes.h.html#LN64"><span class='Ref_to_Member'>lower</span></a> <span class='Operator'>? -</span><span class='Number'>1</span> <span class='Operator'>: </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1767"><span class='Ref_to_Parameter'>b2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/rangetypes.h.html#LN62"><span class='Ref_to_Member'>infinite</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <a href="rangetypes.c.html#LN1767"><span class='Ref_to_Parameter'>b2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/rangetypes.h.html#LN64"><span class='Ref_to_Member'>lower</span></a> <span class='Operator'>? </span><span class='Number'>1</span> <span class='Operator'>: -</span><span class='Number'>1</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Both boundaries are finite, so compare the held values. 
     */ 
</span>    <a href="rangetypes.c.html#LN1769"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../include/postgres.h.html#LN477"><span class='Ref_to_Macro'>DatumGetInt32</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN512"><span class='Ref_to_Proto'>FunctionCall2Coll</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rangetypes.c.html#LN1767"><span class='Ref_to_Parameter'>typcache</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/typcache.h.html#LN85"><span class='Ref_to_Member'>rng_cmp_proc_finfo</span></a><span class='Delimiter'>, 
</span>                                             <a href="rangetypes.c.html#LN1767"><span class='Ref_to_Parameter'>typcache</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/typcache.h.html#LN84"><span class='Ref_to_Member'>rng_collation</span></a><span class='Delimiter'>, 
</span>                                             <a href="rangetypes.c.html#LN1767"><span class='Ref_to_Parameter'>b1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/rangetypes.h.html#LN61"><span class='Ref_to_Member'>val</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1767"><span class='Ref_to_Parameter'>b2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/rangetypes.h.html#LN61"><span class='Ref_to_Member'>val</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If the comparison is anything other than equal, we're done. If they 
     * compare equal though, we still have to consider whether the boundaries 
     * are inclusive or exclusive. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1769"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="rangetypes.c.html#LN1767"><span class='Ref_to_Parameter'>b1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/rangetypes.h.html#LN63"><span class='Ref_to_Member'>inclusive</span></a> <span class='Operator'>&& !</span><a href="rangetypes.c.html#LN1767"><span class='Ref_to_Parameter'>b2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/rangetypes.h.html#LN63"><span class='Ref_to_Member'>inclusive</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* both are exclusive */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1767"><span class='Ref_to_Parameter'>b1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/rangetypes.h.html#LN64"><span class='Ref_to_Member'>lower</span></a> <span class='Operator'>== </span><a href="rangetypes.c.html#LN1767"><span class='Ref_to_Parameter'>b2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/rangetypes.h.html#LN64"><span class='Ref_to_Member'>lower</span></a><span class='Parentheses'>) 
</span>                <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
                <span class='Control'>return</span> <a href="rangetypes.c.html#LN1767"><span class='Ref_to_Parameter'>b1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/rangetypes.h.html#LN64"><span class='Ref_to_Member'>lower</span></a> <span class='Operator'>? </span><span class='Number'>1</span> <span class='Operator'>: -</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="rangetypes.c.html#LN1767"><span class='Ref_to_Parameter'>b1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/rangetypes.h.html#LN63"><span class='Ref_to_Member'>inclusive</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>return</span> <a href="rangetypes.c.html#LN1767"><span class='Ref_to_Parameter'>b1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/rangetypes.h.html#LN64"><span class='Ref_to_Member'>lower</span></a> <span class='Operator'>? </span><span class='Number'>1</span> <span class='Operator'>: -</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="rangetypes.c.html#LN1767"><span class='Ref_to_Parameter'>b2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/rangetypes.h.html#LN63"><span class='Ref_to_Member'>inclusive</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>return</span> <a href="rangetypes.c.html#LN1767"><span class='Ref_to_Parameter'>b2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/rangetypes.h.html#LN64"><span class='Ref_to_Member'>lower</span></a> <span class='Operator'>? -</span><span class='Number'>1</span> <span class='Operator'>: </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * Both are inclusive and the values held are equal, so they are 
             * equal regardless of whether they are upper or lower boundaries, 
             * or a mix. 
             */ 
</span>            <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if result==0 &raquo; </span> 
 
    <span class='Control'>return</span> <a href="rangetypes.c.html#LN1769"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end range_cmp_bounds &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Compare two range boundary point values, returning &LT;0, 0, or &GT;0 according 
 * to whether b1 is less than, equal to, or greater than b2. 
 * 
 * This is similar to but simpler than range_cmp_bounds().  We just compare 
 * the values held in b1 and b2, ignoring inclusive/exclusive flags.  The 
 * lower/upper flags only matter for infinities, where they tell us if the 
 * infinity is plus or minus. 
 */ 
</span><span class='Keyword'>int 
</span><a name="LN1841"></a><span class='Declare_Function'>range_cmp_bound_values</span><span class='Parentheses'>(</span><a href="../../../include/utils/typcache.h.html#LN28"><span class='Ref_to_Struct'>TypeCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>typcache</span><span class='Delimiter'>, </span><a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>b1</span><span class='Delimiter'>, 
</span><a name="LN1842"></a>                       <a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>b2</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Comment_Multi_Line'>/* 
     * First, handle cases involving infinity, which don't require invoking 
     * the comparison proc. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1841"><span class='Ref_to_Parameter'>b1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/rangetypes.h.html#LN62"><span class='Ref_to_Member'>infinite</span></a> <span class='Operator'>&& </span><a href="rangetypes.c.html#LN1842"><span class='Ref_to_Parameter'>b2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/rangetypes.h.html#LN62"><span class='Ref_to_Member'>infinite</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * Both are infinity, so they are equal unless one is lower and the 
         * other not. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1841"><span class='Ref_to_Parameter'>b1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/rangetypes.h.html#LN64"><span class='Ref_to_Member'>lower</span></a> <span class='Operator'>== </span><a href="rangetypes.c.html#LN1842"><span class='Ref_to_Parameter'>b2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/rangetypes.h.html#LN64"><span class='Ref_to_Member'>lower</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <span class='Control'>return</span> <a href="rangetypes.c.html#LN1841"><span class='Ref_to_Parameter'>b1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/rangetypes.h.html#LN64"><span class='Ref_to_Member'>lower</span></a> <span class='Operator'>? -</span><span class='Number'>1</span> <span class='Operator'>: </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1841"><span class='Ref_to_Parameter'>b1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/rangetypes.h.html#LN62"><span class='Ref_to_Member'>infinite</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <a href="rangetypes.c.html#LN1841"><span class='Ref_to_Parameter'>b1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/rangetypes.h.html#LN64"><span class='Ref_to_Member'>lower</span></a> <span class='Operator'>? -</span><span class='Number'>1</span> <span class='Operator'>: </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1842"><span class='Ref_to_Parameter'>b2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/rangetypes.h.html#LN62"><span class='Ref_to_Member'>infinite</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <a href="rangetypes.c.html#LN1842"><span class='Ref_to_Parameter'>b2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/rangetypes.h.html#LN64"><span class='Ref_to_Member'>lower</span></a> <span class='Operator'>? </span><span class='Number'>1</span> <span class='Operator'>: -</span><span class='Number'>1</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Both boundaries are finite, so compare the held values. 
     */ 
</span>    <span class='Control'>return</span> <a href="../../../include/postgres.h.html#LN477"><span class='Ref_to_Macro'>DatumGetInt32</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN512"><span class='Ref_to_Proto'>FunctionCall2Coll</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rangetypes.c.html#LN1841"><span class='Ref_to_Parameter'>typcache</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/typcache.h.html#LN85"><span class='Ref_to_Member'>rng_cmp_proc_finfo</span></a><span class='Delimiter'>, 
</span>                                           <a href="rangetypes.c.html#LN1841"><span class='Ref_to_Parameter'>typcache</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/typcache.h.html#LN84"><span class='Ref_to_Member'>rng_collation</span></a><span class='Delimiter'>, 
</span>                                           <a href="rangetypes.c.html#LN1841"><span class='Ref_to_Parameter'>b1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/rangetypes.h.html#LN61"><span class='Ref_to_Member'>val</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1842"><span class='Ref_to_Parameter'>b2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/rangetypes.h.html#LN61"><span class='Ref_to_Member'>val</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end range_cmp_bound_values &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Build an empty range value of the type indicated by the typcache entry. 
 */ 
</span><a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a> <span class='Operator'>* 
</span><a name="LN1876"></a><span class='Declare_Function'>make_empty_range</span><span class='Parentheses'>(</span><a href="../../../include/utils/typcache.h.html#LN28"><span class='Ref_to_Struct'>TypeCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>typcache</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1878"></a>    <a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a>  <span class='Declare_Local'>lower</span><span class='Delimiter'>; 
</span><a name="LN1879"></a>    <a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a>  <span class='Declare_Local'>upper</span><span class='Delimiter'>; 
</span> 
    <a href="rangetypes.c.html#LN1878"><span class='Ref_To_Local'>lower</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN61"><span class='Ref_to_Member'>val</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a><span class='Parentheses'>) </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="rangetypes.c.html#LN1878"><span class='Ref_To_Local'>lower</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN62"><span class='Ref_to_Member'>infinite</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="rangetypes.c.html#LN1878"><span class='Ref_To_Local'>lower</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN63"><span class='Ref_to_Member'>inclusive</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="rangetypes.c.html#LN1878"><span class='Ref_To_Local'>lower</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN64"><span class='Ref_to_Member'>lower</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
    <a href="rangetypes.c.html#LN1879"><span class='Ref_To_Local'>upper</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN61"><span class='Ref_to_Member'>val</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a><span class='Parentheses'>) </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="rangetypes.c.html#LN1879"><span class='Ref_To_Local'>upper</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN62"><span class='Ref_to_Member'>infinite</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="rangetypes.c.html#LN1879"><span class='Ref_To_Local'>upper</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN63"><span class='Ref_to_Member'>inclusive</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="rangetypes.c.html#LN1879"><span class='Ref_To_Local'>upper</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN64"><span class='Ref_to_Member'>lower</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="../../../include/utils/rangetypes.h.html#LN128"><span class='Ref_to_Proto'>make_range</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1876"><span class='Ref_to_Parameter'>typcache</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN1878"><span class='Ref_To_Local'>lower</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN1879"><span class='Ref_To_Local'>upper</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/* 
 *---------------------------------------------------------- 
 * STATIC FUNCTIONS 
 *---------------------------------------------------------- 
 */ 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Given a string representing the flags for the range type, return the flags 
 * represented as a char. 
 */ 
</span><span class='Keyword'>static char 
</span><a name="LN1906"></a><span class='Declare_Function'>range_parse_flags</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>flags_str</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1908"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>flags</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1906"><span class='Ref_to_Parameter'>flags_str</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='String'>'\0'</span> <span class='Operator'>|| 
</span>        <a href="rangetypes.c.html#LN1906"><span class='Ref_to_Parameter'>flags_str</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='String'>'\0'</span> <span class='Operator'>|| 
</span>        <a href="rangetypes.c.html#LN1906"><span class='Ref_to_Parameter'>flags_str</span></a><span class='Delimiter'>[</span><span class='Number'>2</span><span class='Delimiter'>] </span><span class='Operator'>!= </span><span class='String'>'\0'</span><span class='Parentheses'>) 
</span>        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_SYNTAX_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"invalid range bound flags"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>           <a href="../error/elog.c.html#LN985"><span class='Ref_to_Func'>errhint</span></a><span class='Parentheses'>(</span><span class='String'>"Valid values are \"[]\", \"[)\", \"(]\", and \"()\"."</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1906"><span class='Ref_to_Parameter'>flags_str</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>case</span> <span class='String'>'['</span><span class='Operator'>: 
</span>            <a href="rangetypes.c.html#LN1908"><span class='Ref_To_Local'>flags</span></a> <span class='Operator'>|= </span><a href="../../../include/utils/rangetypes.h.html#LN36"><span class='Ref_to_Const'>RANGE_LB_INC</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <span class='String'>'('</span><span class='Operator'>: 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>default</span><span class='Operator'>: 
</span>            <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_SYNTAX_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"invalid range bound flags"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>            <a href="../error/elog.c.html#LN985"><span class='Ref_to_Func'>errhint</span></a><span class='Parentheses'>(</span><span class='String'>"Valid values are \"[]\", \"[)\", \"(]\", and \"()\"."</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1906"><span class='Ref_to_Parameter'>flags_str</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>case</span> <span class='String'>']'</span><span class='Operator'>: 
</span>            <a href="rangetypes.c.html#LN1908"><span class='Ref_To_Local'>flags</span></a> <span class='Operator'>|= </span><a href="../../../include/utils/rangetypes.h.html#LN37"><span class='Ref_to_Const'>RANGE_UB_INC</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <span class='String'>')'</span><span class='Operator'>: 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>default</span><span class='Operator'>: 
</span>            <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_SYNTAX_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"invalid range bound flags"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>            <a href="../error/elog.c.html#LN985"><span class='Ref_to_Func'>errhint</span></a><span class='Parentheses'>(</span><span class='String'>"Valid values are \"[]\", \"[)\", \"(]\", and \"()\"."</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>return</span> <a href="rangetypes.c.html#LN1908"><span class='Ref_To_Local'>flags</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end range_parse_flags &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Parse range input. 
 * 
 * Input parameters: 
 *  string: input string to be parsed 
 * Output parameters: 
 *  *flags: receives flags bitmask 
 *  *lbound_str: receives palloc'd lower bound string, or NULL if none 
 *  *ubound_str: receives palloc'd upper bound string, or NULL if none 
 * 
 * This is modeled somewhat after record_in in rowtypes.c. 
 * The input syntax is: 
 *  &LT;range&GT;   := EMPTY 
 *             | &LT;lb-inc&GT; &LT;string&GT;, &LT;string&GT; &LT;ub-inc&GT; 
 *  &LT;lb-inc&GT;  := '[' | '(' 
 *  &LT;ub-inc&GT;  := ']' | ')' 
 * 
 * Whitespace before or after &LT;range&GT; is ignored.  Whitespace within a &LT;string&GT; 
 * is taken literally and becomes part of the input string for that bound. 
 * 
 * A &LT;string&GT; of length zero is taken as "infinite" (i.e. no bound), unless it 
 * is surrounded by double-quotes, in which case it is the literal empty 
 * string. 
 * 
 * Within a &LT;string&GT;, special characters (such as comma, parenthesis, or 
 * brackets) can be enclosed in double-quotes or escaped with backslash. Within 
 * double-quotes, a double-quote can be escaped with double-quote or backslash. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN1978"></a><span class='Declare_Function'>range_parse</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>string</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>flags</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>**</span><span class='Declare_Parameter'>lbound_str</span><span class='Delimiter'>, 
</span><a name="LN1979"></a>            <span class='Keyword'>char </span><span class='Operator'>**</span><span class='Declare_Parameter'>ubound_str</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1981"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>ptr</span> <span class='Operator'>= </span><a href="rangetypes.c.html#LN1978"><span class='Ref_to_Parameter'>string</span></a><span class='Delimiter'>; 
</span><a name="LN1982"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>infinite</span><span class='Delimiter'>; 
</span> 
    <span class='Operator'>*</span><a href="rangetypes.c.html#LN1978"><span class='Ref_to_Parameter'>flags</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* consume whitespace */ 
</span>    <span class='Control'>while</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="rangetypes.c.html#LN1981"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>!= </span><span class='String'>'\0'</span> <span class='Operator'>&& </span>isspace<span class='Parentheses'>((</span><span class='Keyword'>unsigned char</span><span class='Parentheses'>) </span><span class='Operator'>*</span><a href="rangetypes.c.html#LN1981"><span class='Ref_To_Local'>ptr</span></a><span class='Parentheses'>))</span> 
        <a href="rangetypes.c.html#LN1981"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* check for empty range */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../port/pgstrcasecmp.c.html#LN67"><span class='Ref_to_Func'>pg_strncasecmp</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1981"><span class='Ref_To_Local'>ptr</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN44"><span class='Ref_to_Const'>RANGE_EMPTY_LITERAL</span></a><span class='Delimiter'>, 
</span>                       strlen<span class='Parentheses'>(</span><a href="rangetypes.c.html#LN44"><span class='Ref_to_Const'>RANGE_EMPTY_LITERAL</span></a><span class='Parentheses'>))</span> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Operator'>*</span><a href="rangetypes.c.html#LN1978"><span class='Ref_to_Parameter'>flags</span></a> <span class='Operator'>= </span><a href="../../../include/utils/rangetypes.h.html#LN35"><span class='Ref_to_Const'>RANGE_EMPTY</span></a><span class='Delimiter'>; 
</span>        <span class='Operator'>*</span><a href="rangetypes.c.html#LN1978"><span class='Ref_to_Parameter'>lbound_str</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>        <span class='Operator'>*</span><a href="rangetypes.c.html#LN1979"><span class='Ref_to_Parameter'>ubound_str</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
        <a href="rangetypes.c.html#LN1981"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="rangetypes.c.html#LN44"><span class='Ref_to_Const'>RANGE_EMPTY_LITERAL</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* the rest should be whitespace */ 
</span>        <span class='Control'>while</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="rangetypes.c.html#LN1981"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>!= </span><span class='String'>'\0'</span> <span class='Operator'>&& </span>isspace<span class='Parentheses'>((</span><span class='Keyword'>unsigned char</span><span class='Parentheses'>) </span><span class='Operator'>*</span><a href="rangetypes.c.html#LN1981"><span class='Ref_To_Local'>ptr</span></a><span class='Parentheses'>))</span> 
            <a href="rangetypes.c.html#LN1981"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* should have consumed everything */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="rangetypes.c.html#LN1981"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>!= </span><span class='String'>'\0'</span><span class='Parentheses'>) 
</span>            <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INVALID_TEXT_REPRESENTATION<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"malformed range literal: \"%s\""</span><span class='Delimiter'>, 
</span>                            <a href="rangetypes.c.html#LN1978"><span class='Ref_to_Parameter'>string</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../error/elog.c.html#LN871"><span class='Ref_to_Func'>errdetail</span></a><span class='Parentheses'>(</span><span class='String'>"Junk after \"empty\" key word."</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if pg_strncasecmp(ptr,RA... &raquo; </span> 
 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="rangetypes.c.html#LN1981"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>== </span><span class='String'>'['</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Operator'>*</span><a href="rangetypes.c.html#LN1978"><span class='Ref_to_Parameter'>flags</span></a> <span class='Operator'>|= </span><a href="../../../include/utils/rangetypes.h.html#LN36"><span class='Ref_to_Const'>RANGE_LB_INC</span></a><span class='Delimiter'>; 
</span>        <a href="rangetypes.c.html#LN1981"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="rangetypes.c.html#LN1981"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>== </span><span class='String'>'('</span><span class='Parentheses'>) 
</span>        <a href="rangetypes.c.html#LN1981"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INVALID_TEXT_REPRESENTATION<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"malformed range literal: \"%s\""</span><span class='Delimiter'>, 
</span>                        <a href="rangetypes.c.html#LN1978"><span class='Ref_to_Parameter'>string</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN871"><span class='Ref_to_Func'>errdetail</span></a><span class='Parentheses'>(</span><span class='String'>"Missing left parenthesis or bracket."</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <a href="rangetypes.c.html#LN1981"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>= </span><a href="rangetypes.c.html#LN61"><span class='Ref_to_Proto'>range_parse_bound</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1978"><span class='Ref_to_Parameter'>string</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1981"><span class='Ref_To_Local'>ptr</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1978"><span class='Ref_to_Parameter'>lbound_str</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN1982"><span class='Ref_To_Local'>infinite</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1982"><span class='Ref_To_Local'>infinite</span></a><span class='Parentheses'>) 
</span>        <span class='Operator'>*</span><a href="rangetypes.c.html#LN1978"><span class='Ref_to_Parameter'>flags</span></a> <span class='Operator'>|= </span><a href="../../../include/utils/rangetypes.h.html#LN38"><span class='Ref_to_Const'>RANGE_LB_INF</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="rangetypes.c.html#LN1981"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>== </span><span class='String'>','</span><span class='Parentheses'>) 
</span>        <a href="rangetypes.c.html#LN1981"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INVALID_TEXT_REPRESENTATION<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"malformed range literal: \"%s\""</span><span class='Delimiter'>, 
</span>                        <a href="rangetypes.c.html#LN1978"><span class='Ref_to_Parameter'>string</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN871"><span class='Ref_to_Func'>errdetail</span></a><span class='Parentheses'>(</span><span class='String'>"Missing comma after lower bound."</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <a href="rangetypes.c.html#LN1981"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>= </span><a href="rangetypes.c.html#LN61"><span class='Ref_to_Proto'>range_parse_bound</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1978"><span class='Ref_to_Parameter'>string</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1981"><span class='Ref_To_Local'>ptr</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN1979"><span class='Ref_to_Parameter'>ubound_str</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN1982"><span class='Ref_To_Local'>infinite</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN1982"><span class='Ref_To_Local'>infinite</span></a><span class='Parentheses'>) 
</span>        <span class='Operator'>*</span><a href="rangetypes.c.html#LN1978"><span class='Ref_to_Parameter'>flags</span></a> <span class='Operator'>|= </span><a href="../../../include/utils/rangetypes.h.html#LN39"><span class='Ref_to_Const'>RANGE_UB_INF</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="rangetypes.c.html#LN1981"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>== </span><span class='String'>']'</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Operator'>*</span><a href="rangetypes.c.html#LN1978"><span class='Ref_to_Parameter'>flags</span></a> <span class='Operator'>|= </span><a href="../../../include/utils/rangetypes.h.html#LN37"><span class='Ref_to_Const'>RANGE_UB_INC</span></a><span class='Delimiter'>; 
</span>        <a href="rangetypes.c.html#LN1981"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="rangetypes.c.html#LN1981"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>== </span><span class='String'>')'</span><span class='Parentheses'>) 
</span>        <a href="rangetypes.c.html#LN1981"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span>    <span class='Comment_Single_Line'>/* must be a comma */ 
</span>        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INVALID_TEXT_REPRESENTATION<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"malformed range literal: \"%s\""</span><span class='Delimiter'>, 
</span>                        <a href="rangetypes.c.html#LN1978"><span class='Ref_to_Parameter'>string</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN871"><span class='Ref_to_Func'>errdetail</span></a><span class='Parentheses'>(</span><span class='String'>"Too many commas."</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* consume whitespace */ 
</span>    <span class='Control'>while</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="rangetypes.c.html#LN1981"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>!= </span><span class='String'>'\0'</span> <span class='Operator'>&& </span>isspace<span class='Parentheses'>((</span><span class='Keyword'>unsigned char</span><span class='Parentheses'>) </span><span class='Operator'>*</span><a href="rangetypes.c.html#LN1981"><span class='Ref_To_Local'>ptr</span></a><span class='Parentheses'>))</span> 
        <a href="rangetypes.c.html#LN1981"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="rangetypes.c.html#LN1981"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>!= </span><span class='String'>'\0'</span><span class='Parentheses'>) 
</span>        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INVALID_TEXT_REPRESENTATION<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"malformed range literal: \"%s\""</span><span class='Delimiter'>, 
</span>                        <a href="rangetypes.c.html#LN1978"><span class='Ref_to_Parameter'>string</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN871"><span class='Ref_to_Func'>errdetail</span></a><span class='Parentheses'>(</span><span class='String'>"Junk after right parenthesis or bracket."</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end range_parse &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Helper for range_parse: parse and de-quote one bound string. 
 * 
 * We scan until finding comma, right parenthesis, or right bracket. 
 * 
 * Input parameters: 
 *  string: entire input string (used only for error reports) 
 *  ptr: where to start parsing bound 
 * Output parameters: 
 *  *bound_str: receives palloc'd bound string, or NULL if none 
 *  *infinite: set true if no bound, else false 
 * 
 * The return value is the scan ptr, advanced past the bound string. 
 */ 
</span><span class='Keyword'>static const char </span><span class='Operator'>* 
</span><a name="LN2087"></a><span class='Declare_Function'>range_parse_bound</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>string</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>ptr</span><span class='Delimiter'>, 
</span><a name="LN2088"></a>                  <span class='Keyword'>char </span><span class='Operator'>**</span><span class='Declare_Parameter'>bound_str</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Declare_Parameter'>infinite</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2090"></a>    <a href="../../../include/lib/stringinfo.h.html#LN34"><span class='Ref_to_Struct'>StringInfoData</span></a> <span class='Declare_Local'>buf</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Check for null: completely empty input means null */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="rangetypes.c.html#LN2087"><span class='Ref_to_Parameter'>ptr</span></a> <span class='Operator'>== </span><span class='String'>','</span> <span class='Operator'>|| *</span><a href="rangetypes.c.html#LN2087"><span class='Ref_to_Parameter'>ptr</span></a> <span class='Operator'>== </span><span class='String'>')'</span> <span class='Operator'>|| *</span><a href="rangetypes.c.html#LN2087"><span class='Ref_to_Parameter'>ptr</span></a> <span class='Operator'>== </span><span class='String'>']'</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Operator'>*</span><a href="rangetypes.c.html#LN2088"><span class='Ref_to_Parameter'>bound_str</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>        <span class='Operator'>*</span><a href="rangetypes.c.html#LN2088"><span class='Ref_to_Parameter'>infinite</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Extract string for this bound */ 
</span><a name="LN2101"></a>        <span class='Keyword'>bool</span>        <span class='Declare_Local'>inquote</span> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
        <a href="../../lib/stringinfo.c.html#LN44"><span class='Ref_to_Func'>initStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rangetypes.c.html#LN2090"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2101"><span class='Ref_To_Local'>inquote</span></a> <span class='Operator'>|| !</span><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="rangetypes.c.html#LN2087"><span class='Ref_to_Parameter'>ptr</span></a> <span class='Operator'>== </span><span class='String'>','</span> <span class='Operator'>|| *</span><a href="rangetypes.c.html#LN2087"><span class='Ref_to_Parameter'>ptr</span></a> <span class='Operator'>== </span><span class='String'>')'</span> <span class='Operator'>|| *</span><a href="rangetypes.c.html#LN2087"><span class='Ref_to_Parameter'>ptr</span></a> <span class='Operator'>== </span><span class='String'>']'</span><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span><a name="LN2106"></a>            <span class='Keyword'>char</span>        <span class='Declare_Local'>ch</span> <span class='Operator'>= *</span><a href="rangetypes.c.html#LN2087"><span class='Ref_to_Parameter'>ptr</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2106"><span class='Ref_To_Local'>ch</span></a> <span class='Operator'>== </span><span class='String'>'\0'</span><span class='Parentheses'>) 
</span>                <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INVALID_TEXT_REPRESENTATION<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"malformed range literal: \"%s\""</span><span class='Delimiter'>, 
</span>                                <a href="rangetypes.c.html#LN2087"><span class='Ref_to_Parameter'>string</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../error/elog.c.html#LN871"><span class='Ref_to_Func'>errdetail</span></a><span class='Parentheses'>(</span><span class='String'>"Unexpected end of input."</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2106"><span class='Ref_To_Local'>ch</span></a> <span class='Operator'>== </span><span class='String'>'\\'</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="rangetypes.c.html#LN2087"><span class='Ref_to_Parameter'>ptr</span></a> <span class='Operator'>== </span><span class='String'>'\0'</span><span class='Parentheses'>) 
</span>                    <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                            <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INVALID_TEXT_REPRESENTATION<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                             <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"malformed range literal: \"%s\""</span><span class='Delimiter'>, 
</span>                                    <a href="rangetypes.c.html#LN2087"><span class='Ref_to_Parameter'>string</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                             <a href="../error/elog.c.html#LN871"><span class='Ref_to_Func'>errdetail</span></a><span class='Parentheses'>(</span><span class='String'>"Unexpected end of input."</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rangetypes.c.html#LN2090"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='Operator'>*</span><a href="rangetypes.c.html#LN2087"><span class='Ref_to_Parameter'>ptr</span></a><span class='Operator'>++</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2106"><span class='Ref_To_Local'>ch</span></a> <span class='Operator'>== </span><span class='String'>'"'</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="rangetypes.c.html#LN2101"><span class='Ref_To_Local'>inquote</span></a><span class='Parentheses'>) 
</span>                    <a href="rangetypes.c.html#LN2101"><span class='Ref_To_Local'>inquote</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>                <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="rangetypes.c.html#LN2087"><span class='Ref_to_Parameter'>ptr</span></a> <span class='Operator'>== </span><span class='String'>'"'</span><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Comment_Multi_Line'>/* doubled quote within quote sequence */ 
</span>                    <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rangetypes.c.html#LN2090"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='Operator'>*</span><a href="rangetypes.c.html#LN2087"><span class='Ref_to_Parameter'>ptr</span></a><span class='Operator'>++</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>else</span> 
                    <a href="rangetypes.c.html#LN2101"><span class='Ref_To_Local'>inquote</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> 
                <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rangetypes.c.html#LN2090"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN2106"><span class='Ref_To_Local'>ch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end while inquote||!(*ptr==','|... &raquo; </span> 
 
        <span class='Operator'>*</span><a href="rangetypes.c.html#LN2088"><span class='Ref_to_Parameter'>bound_str</span></a> <span class='Operator'>= </span><a href="rangetypes.c.html#LN2090"><span class='Ref_To_Local'>buf</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>; 
</span>        <span class='Operator'>*</span><a href="rangetypes.c.html#LN2088"><span class='Ref_to_Parameter'>infinite</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
 
    <span class='Control'>return</span> <a href="rangetypes.c.html#LN2087"><span class='Ref_to_Parameter'>ptr</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end range_parse_bound &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Convert a deserialized range value to text form 
 * 
 * Inputs are the flags byte, and the two bound values already converted to 
 * text (but not yet quoted).  If no bound value, pass NULL. 
 * 
 * Result is a palloc'd string 
 */ 
</span><span class='Keyword'>static char </span><span class='Operator'>* 
</span><a name="LN2156"></a><span class='Declare_Function'>range_deparse</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Declare_Parameter'>flags</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>lbound_str</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>ubound_str</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2158"></a>    <a href="../../../include/lib/stringinfo.h.html#LN34"><span class='Ref_to_Struct'>StringInfoData</span></a> <span class='Declare_Local'>buf</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2156"><span class='Ref_to_Parameter'>flags</span></a> <span class='Operator'>& </span><a href="../../../include/utils/rangetypes.h.html#LN35"><span class='Ref_to_Const'>RANGE_EMPTY</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <a href="../../../include/common/fe_memutils.h.html#LN32"><span class='Ref_to_Proto'>pstrdup</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN44"><span class='Ref_to_Const'>RANGE_EMPTY_LITERAL</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../lib/stringinfo.c.html#LN44"><span class='Ref_to_Func'>initStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rangetypes.c.html#LN2158"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rangetypes.c.html#LN2158"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2156"><span class='Ref_to_Parameter'>flags</span></a> <span class='Operator'>& </span><a href="../../../include/utils/rangetypes.h.html#LN36"><span class='Ref_to_Const'>RANGE_LB_INC</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='String'>'['</span> <span class='Operator'>: </span><span class='String'>'('</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN45"><span class='Ref_to_Macro'>RANGE_HAS_LBOUND</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2156"><span class='Ref_to_Parameter'>flags</span></a><span class='Parentheses'>))</span> 
        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rangetypes.c.html#LN2158"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN65"><span class='Ref_to_Proto'>range_bound_escape</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2156"><span class='Ref_to_Parameter'>lbound_str</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rangetypes.c.html#LN2158"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>','</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN49"><span class='Ref_to_Macro'>RANGE_HAS_UBOUND</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2156"><span class='Ref_to_Parameter'>flags</span></a><span class='Parentheses'>))</span> 
        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rangetypes.c.html#LN2158"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN65"><span class='Ref_to_Proto'>range_bound_escape</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2156"><span class='Ref_to_Parameter'>ubound_str</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rangetypes.c.html#LN2158"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2156"><span class='Ref_to_Parameter'>flags</span></a> <span class='Operator'>& </span><a href="../../../include/utils/rangetypes.h.html#LN37"><span class='Ref_to_Const'>RANGE_UB_INC</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='String'>']'</span> <span class='Operator'>: </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="rangetypes.c.html#LN2158"><span class='Ref_To_Local'>buf</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end range_deparse &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Helper for range_deparse: quote a bound value as needed 
 * 
 * Result is a palloc'd string 
 */ 
</span><span class='Keyword'>static char </span><span class='Operator'>* 
</span><a name="LN2186"></a><span class='Declare_Function'>range_bound_escape</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>value</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2188"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>nq</span><span class='Delimiter'>; 
</span><a name="LN2189"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>ptr</span><span class='Delimiter'>; 
</span><a name="LN2190"></a>    <a href="../../../include/lib/stringinfo.h.html#LN34"><span class='Ref_to_Struct'>StringInfoData</span></a> <span class='Declare_Local'>buf</span><span class='Delimiter'>; 
</span> 
    <a href="../../lib/stringinfo.c.html#LN44"><span class='Ref_to_Func'>initStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rangetypes.c.html#LN2190"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Detect whether we need double quotes for this value */ 
</span>    <a href="rangetypes.c.html#LN2188"><span class='Ref_To_Local'>nq</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>value</span><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='String'>'\0'</span><span class='Parentheses'>)</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* force quotes for empty string */ 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2189"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>= </span><span class='Keyword'>value</span><span class='Delimiter'>; </span><span class='Operator'>*</span><a href="rangetypes.c.html#LN2189"><span class='Ref_To_Local'>ptr</span></a><span class='Delimiter'>; </span><a href="rangetypes.c.html#LN2189"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN2198"></a>        <span class='Keyword'>char</span>        <span class='Declare_Local'>ch</span> <span class='Operator'>= *</span><a href="rangetypes.c.html#LN2189"><span class='Ref_To_Local'>ptr</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2198"><span class='Ref_To_Local'>ch</span></a> <span class='Operator'>== </span><span class='String'>'"'</span> <span class='Operator'>|| </span><a href="rangetypes.c.html#LN2198"><span class='Ref_To_Local'>ch</span></a> <span class='Operator'>== </span><span class='String'>'\\'</span> <span class='Operator'>|| 
</span>            <a href="rangetypes.c.html#LN2198"><span class='Ref_To_Local'>ch</span></a> <span class='Operator'>== </span><span class='String'>'('</span> <span class='Operator'>|| </span><a href="rangetypes.c.html#LN2198"><span class='Ref_To_Local'>ch</span></a> <span class='Operator'>== </span><span class='String'>')'</span> <span class='Operator'>|| 
</span>            <a href="rangetypes.c.html#LN2198"><span class='Ref_To_Local'>ch</span></a> <span class='Operator'>== </span><span class='String'>'['</span> <span class='Operator'>|| </span><a href="rangetypes.c.html#LN2198"><span class='Ref_To_Local'>ch</span></a> <span class='Operator'>== </span><span class='String'>']'</span> <span class='Operator'>|| 
</span>            <a href="rangetypes.c.html#LN2198"><span class='Ref_To_Local'>ch</span></a> <span class='Operator'>== </span><span class='String'>','</span> <span class='Operator'>|| 
</span>            isspace<span class='Parentheses'>((</span><span class='Keyword'>unsigned char</span><span class='Parentheses'>) </span><a href="rangetypes.c.html#LN2198"><span class='Ref_To_Local'>ch</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <a href="rangetypes.c.html#LN2188"><span class='Ref_To_Local'>nq</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* And emit the string */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2188"><span class='Ref_To_Local'>nq</span></a><span class='Parentheses'>) 
</span>        <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rangetypes.c.html#LN2190"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'"'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2189"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>= </span><span class='Keyword'>value</span><span class='Delimiter'>; </span><span class='Operator'>*</span><a href="rangetypes.c.html#LN2189"><span class='Ref_To_Local'>ptr</span></a><span class='Delimiter'>; </span><a href="rangetypes.c.html#LN2189"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN2216"></a>        <span class='Keyword'>char</span>        <span class='Declare_Local'>ch</span> <span class='Operator'>= *</span><a href="rangetypes.c.html#LN2189"><span class='Ref_To_Local'>ptr</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2216"><span class='Ref_To_Local'>ch</span></a> <span class='Operator'>== </span><span class='String'>'"'</span> <span class='Operator'>|| </span><a href="rangetypes.c.html#LN2216"><span class='Ref_To_Local'>ch</span></a> <span class='Operator'>== </span><span class='String'>'\\'</span><span class='Parentheses'>) 
</span>            <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rangetypes.c.html#LN2190"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN2216"><span class='Ref_To_Local'>ch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rangetypes.c.html#LN2190"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN2216"><span class='Ref_To_Local'>ch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2188"><span class='Ref_To_Local'>nq</span></a><span class='Parentheses'>) 
</span>        <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rangetypes.c.html#LN2190"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'"'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="rangetypes.c.html#LN2190"><span class='Ref_To_Local'>buf</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end range_bound_escape &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Test whether range r1 contains range r2. 
 * 
 * Caller has already checked that they are the same range type, and looked up 
 * the necessary typcache entry. 
 */ 
</span><span class='Keyword'>bool 
</span><a name="LN2235"></a><span class='Declare_Function'>range_contains_internal</span><span class='Parentheses'>(</span><a href="../../../include/utils/typcache.h.html#LN28"><span class='Ref_to_Struct'>TypeCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>typcache</span><span class='Delimiter'>, </span><a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>r1</span><span class='Delimiter'>, </span><a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>r2</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2237"></a>    <a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a>  <span class='Declare_Local'>lower1</span><span class='Delimiter'>; 
</span><a name="LN2238"></a>    <a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a>  <span class='Declare_Local'>upper1</span><span class='Delimiter'>; 
</span><a name="LN2239"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>empty1</span><span class='Delimiter'>; 
</span><a name="LN2240"></a>    <a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a>  <span class='Declare_Local'>lower2</span><span class='Delimiter'>; 
</span><a name="LN2241"></a>    <a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a>  <span class='Declare_Local'>upper2</span><span class='Delimiter'>; 
</span><a name="LN2242"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>empty2</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Different types should be prevented by ANYRANGE matching rules */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN32"><span class='Ref_to_Macro'>RangeTypeGetOid</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2235"><span class='Ref_to_Parameter'>r1</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><a href="../../../include/utils/rangetypes.h.html#LN32"><span class='Ref_to_Macro'>RangeTypeGetOid</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2235"><span class='Ref_to_Parameter'>r2</span></a><span class='Parentheses'>))</span> 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"range types do not match"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/rangetypes.h.html#LN123"><span class='Ref_to_Proto'>range_deserialize</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2235"><span class='Ref_to_Parameter'>typcache</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN2235"><span class='Ref_to_Parameter'>r1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN2237"><span class='Ref_To_Local'>lower1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN2238"><span class='Ref_To_Local'>upper1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN2239"><span class='Ref_To_Local'>empty1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/utils/rangetypes.h.html#LN123"><span class='Ref_to_Proto'>range_deserialize</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2235"><span class='Ref_to_Parameter'>typcache</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN2235"><span class='Ref_to_Parameter'>r2</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN2240"><span class='Ref_To_Local'>lower2</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN2241"><span class='Ref_To_Local'>upper2</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN2242"><span class='Ref_To_Local'>empty2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* If either range is empty, the answer is easy */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2242"><span class='Ref_To_Local'>empty2</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2239"><span class='Ref_To_Local'>empty1</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Else we must have lower1 &LT;= lower2 and upper1 &GT;= upper2 */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN130"><span class='Ref_to_Proto'>range_cmp_bounds</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2235"><span class='Ref_to_Parameter'>typcache</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN2237"><span class='Ref_To_Local'>lower1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN2240"><span class='Ref_To_Local'>lower2</span></a><span class='Parentheses'>) </span><span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/rangetypes.h.html#LN130"><span class='Ref_to_Proto'>range_cmp_bounds</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2235"><span class='Ref_to_Parameter'>typcache</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN2238"><span class='Ref_To_Local'>upper1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN2241"><span class='Ref_To_Local'>upper2</span></a><span class='Parentheses'>) </span><span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end range_contains_internal &raquo; </span> 
 
<span class='Keyword'>bool 
</span><a name="LN2267"></a><span class='Declare_Function'>range_contained_by_internal</span><span class='Parentheses'>(</span><a href="../../../include/utils/typcache.h.html#LN28"><span class='Ref_to_Struct'>TypeCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>typcache</span><span class='Delimiter'>, </span><a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>r1</span><span class='Delimiter'>, </span><a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>r2</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> <a href="../../../include/utils/rangetypes.h.html#LN101"><span class='Ref_to_Proto'>range_contains_internal</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2267"><span class='Ref_to_Parameter'>typcache</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN2267"><span class='Ref_to_Parameter'>r2</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN2267"><span class='Ref_to_Parameter'>r1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Test whether range r contains a specific element value. 
 */ 
</span><span class='Keyword'>bool 
</span><a name="LN2276"></a><span class='Declare_Function'>range_contains_elem_internal</span><span class='Parentheses'>(</span><a href="../../../include/utils/typcache.h.html#LN28"><span class='Ref_to_Struct'>TypeCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>typcache</span><span class='Delimiter'>, </span><a href="../../../include/utils/rangetypes.h.html#LN24"><span class='Ref_to_Typedef'>RangeType</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>r</span><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Declare_Parameter'>val</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2278"></a>    <a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a>  <span class='Declare_Local'>lower</span><span class='Delimiter'>; 
</span><a name="LN2279"></a>    <a href="../../../include/utils/rangetypes.h.html#LN59"><span class='Ref_to_Typedef'>RangeBound</span></a>  <span class='Declare_Local'>upper</span><span class='Delimiter'>; 
</span><a name="LN2280"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>empty</span><span class='Delimiter'>; 
</span><a name="LN2281"></a>    <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>cmp</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/rangetypes.h.html#LN123"><span class='Ref_to_Proto'>range_deserialize</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2276"><span class='Ref_to_Parameter'>typcache</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN2276"><span class='Ref_to_Parameter'>r</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN2278"><span class='Ref_To_Local'>lower</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN2279"><span class='Ref_To_Local'>upper</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rangetypes.c.html#LN2280"><span class='Ref_To_Local'>empty</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2280"><span class='Ref_To_Local'>empty</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="rangetypes.c.html#LN2278"><span class='Ref_To_Local'>lower</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN62"><span class='Ref_to_Member'>infinite</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="rangetypes.c.html#LN2281"><span class='Ref_To_Local'>cmp</span></a> <span class='Operator'>= </span><a href="../../../include/postgres.h.html#LN477"><span class='Ref_to_Macro'>DatumGetInt32</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN512"><span class='Ref_to_Proto'>FunctionCall2Coll</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rangetypes.c.html#LN2276"><span class='Ref_to_Parameter'>typcache</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/typcache.h.html#LN85"><span class='Ref_to_Member'>rng_cmp_proc_finfo</span></a><span class='Delimiter'>, 
</span>                                              <a href="rangetypes.c.html#LN2276"><span class='Ref_to_Parameter'>typcache</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/typcache.h.html#LN84"><span class='Ref_to_Member'>rng_collation</span></a><span class='Delimiter'>, 
</span>                                              <a href="rangetypes.c.html#LN2278"><span class='Ref_To_Local'>lower</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN61"><span class='Ref_to_Member'>val</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN2276"><span class='Ref_to_Parameter'>val</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2281"><span class='Ref_To_Local'>cmp</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2281"><span class='Ref_To_Local'>cmp</span></a> <span class='Operator'>== </span><span class='Number'>0</span> <span class='Operator'>&& !</span><a href="rangetypes.c.html#LN2278"><span class='Ref_To_Local'>lower</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN63"><span class='Ref_to_Member'>inclusive</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="rangetypes.c.html#LN2279"><span class='Ref_To_Local'>upper</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN62"><span class='Ref_to_Member'>infinite</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="rangetypes.c.html#LN2281"><span class='Ref_To_Local'>cmp</span></a> <span class='Operator'>= </span><a href="../../../include/postgres.h.html#LN477"><span class='Ref_to_Macro'>DatumGetInt32</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN512"><span class='Ref_to_Proto'>FunctionCall2Coll</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rangetypes.c.html#LN2276"><span class='Ref_to_Parameter'>typcache</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/typcache.h.html#LN85"><span class='Ref_to_Member'>rng_cmp_proc_finfo</span></a><span class='Delimiter'>, 
</span>                                              <a href="rangetypes.c.html#LN2276"><span class='Ref_to_Parameter'>typcache</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/typcache.h.html#LN84"><span class='Ref_to_Member'>rng_collation</span></a><span class='Delimiter'>, 
</span>                                              <a href="rangetypes.c.html#LN2279"><span class='Ref_To_Local'>upper</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN61"><span class='Ref_to_Member'>val</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN2276"><span class='Ref_to_Parameter'>val</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2281"><span class='Ref_To_Local'>cmp</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2281"><span class='Ref_To_Local'>cmp</span></a> <span class='Operator'>== </span><span class='Number'>0</span> <span class='Operator'>&& !</span><a href="rangetypes.c.html#LN2279"><span class='Ref_To_Local'>upper</span></a><span class='Operator'>.</span><a href="../../../include/utils/rangetypes.h.html#LN63"><span class='Ref_to_Member'>inclusive</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end range_contains_elem_internal &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* 
 * datum_compute_size() and datum_write() are used to insert the bound 
 * values into a range object.  They are modeled after heaptuple.c's 
 * heap_compute_data_size() and heap_fill_tuple(), but we need not handle 
 * null values here.  TYPE_IS_PACKABLE must test the same conditions as 
 * heaptuple.c's ATT_IS_PACKABLE macro. 
 */ 
</span> 
<span class='Comment_Multi_Line'>/* Does datatype allow packing into the 1-byte-header varlena format? */ 
</span><a name="LN2323"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>TYPE_IS_PACKABLE</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>typlen</span><span class='Delimiter'>, </span><span class='Declare_Parameter'>typstorage</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>    <span class='Parentheses'>((</span><a href="rangetypes.c.html#LN2323"><span class='Ref_to_Parameter'>typlen</span></a><span class='Parentheses'>) </span><span class='Operator'>== -</span><span class='Number'>1</span> <span class='Operator'>&& </span><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2323"><span class='Ref_to_Parameter'>typstorage</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='String'>'p'</span><span class='Parentheses'>)</span> 
 
<span class='Comment_Multi_Line'>/* 
 * Increment data_length by the space needed by the datum, including any 
 * preceding alignment padding. 
 */ 
</span><span class='Keyword'>static </span><a href="../../../include/c.h.html#LN355"><span class='Ref_to_Typedef'>Size</span></a> 
<a name="LN2331"></a><span class='Declare_Function'>datum_compute_size</span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN355"><span class='Ref_to_Typedef'>Size</span></a> <span class='Declare_Parameter'>data_length</span><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Declare_Parameter'>val</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>typbyval</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Declare_Parameter'>typalign</span><span class='Delimiter'>, 
</span><a name="LN2332"></a>                   <a href="../../../include/c.h.html#LN254"><span class='Ref_to_Typedef'>int16</span></a> <span class='Declare_Parameter'>typlen</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Declare_Parameter'>typstorage</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2323"><span class='Ref_to_Macro'>TYPE_IS_PACKABLE</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2332"><span class='Ref_to_Parameter'>typlen</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN2332"><span class='Ref_to_Parameter'>typstorage</span></a><span class='Parentheses'>)</span> <span class='Operator'>&& 
</span>        <a href="../../../include/postgres.h.html#LN270"><span class='Ref_to_Macro'>VARATT_CAN_MAKE_SHORT</span></a><span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN554"><span class='Ref_to_Macro'>DatumGetPointer</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2331"><span class='Ref_to_Parameter'>val</span></a><span class='Parentheses'>)))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * we're anticipating converting to a short varlena header, so adjust 
         * length and don't count any alignment 
         */ 
</span>        <a href="rangetypes.c.html#LN2331"><span class='Ref_to_Parameter'>data_length</span></a> <span class='Operator'>+= </span><a href="../../../include/postgres.h.html#LN273"><span class='Ref_to_Macro'>VARATT_CONVERTED_SHORT_SIZE</span></a><span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN554"><span class='Ref_to_Macro'>DatumGetPointer</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2331"><span class='Ref_to_Parameter'>val</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="rangetypes.c.html#LN2331"><span class='Ref_to_Parameter'>data_length</span></a> <span class='Operator'>= </span><a href="../../../include/access/tupmacs.h.html#LN100"><span class='Ref_to_Macro'>att_align_datum</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2331"><span class='Ref_to_Parameter'>data_length</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN2331"><span class='Ref_to_Parameter'>typalign</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN2332"><span class='Ref_to_Parameter'>typlen</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN2331"><span class='Ref_to_Parameter'>val</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="rangetypes.c.html#LN2331"><span class='Ref_to_Parameter'>data_length</span></a> <span class='Operator'>= </span><a href="../../../include/access/tupmacs.h.html#LN159"><span class='Ref_to_Macro'>att_addlength_datum</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2331"><span class='Ref_to_Parameter'>data_length</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN2332"><span class='Ref_to_Parameter'>typlen</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN2331"><span class='Ref_to_Parameter'>val</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>return</span> <a href="rangetypes.c.html#LN2331"><span class='Ref_to_Parameter'>data_length</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end datum_compute_size &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Write the given datum beginning at ptr (after advancing to correct 
 * alignment, if needed).  Return the pointer incremented by space used. 
 */ 
</span><span class='Keyword'>static </span><a href="../../../include/c.h.html#LN244"><span class='Ref_to_Typedef'>Pointer</span></a> 
<a name="LN2357"></a><span class='Declare_Function'>datum_write</span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN244"><span class='Ref_to_Typedef'>Pointer</span></a> <span class='Declare_Parameter'>ptr</span><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Declare_Parameter'>datum</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>typbyval</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Declare_Parameter'>typalign</span><span class='Delimiter'>, 
</span><a name="LN2358"></a>            <a href="../../../include/c.h.html#LN254"><span class='Ref_to_Typedef'>int16</span></a> <span class='Declare_Parameter'>typlen</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Declare_Parameter'>typstorage</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2360"></a>    <a href="../../../include/c.h.html#LN355"><span class='Ref_to_Typedef'>Size</span></a>        <span class='Declare_Local'>data_length</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2357"><span class='Ref_to_Parameter'>typbyval</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* pass-by-value */ 
</span>        <a href="rangetypes.c.html#LN2357"><span class='Ref_to_Parameter'>ptr</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/access/tupmacs.h.html#LN143"><span class='Ref_to_Macro'>att_align_nominal</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2357"><span class='Ref_to_Parameter'>ptr</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN2357"><span class='Ref_to_Parameter'>typalign</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../../include/access/tupmacs.h.html#LN197"><span class='Ref_to_Macro'>store_att_byval</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2357"><span class='Ref_to_Parameter'>ptr</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN2357"><span class='Ref_to_Parameter'>datum</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN2358"><span class='Ref_to_Parameter'>typlen</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="rangetypes.c.html#LN2360"><span class='Ref_To_Local'>data_length</span></a> <span class='Operator'>= </span><a href="rangetypes.c.html#LN2358"><span class='Ref_to_Parameter'>typlen</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2358"><span class='Ref_to_Parameter'>typlen</span></a> <span class='Operator'>== -</span><span class='Number'>1</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* varlena */ 
</span><a name="LN2372"></a>        <a href="../../../include/c.h.html#LN244"><span class='Ref_to_Typedef'>Pointer</span></a>     <span class='Declare_Local'>val</span> <span class='Operator'>= </span><a href="../../../include/postgres.h.html#LN554"><span class='Ref_to_Macro'>DatumGetPointer</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2357"><span class='Ref_to_Parameter'>datum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN313"><span class='Ref_to_Macro'>VARATT_IS_EXTERNAL</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2372"><span class='Ref_To_Local'>val</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * Throw error, because we must never put a toast pointer inside a 
             * range object.  Caller should have detoasted it. 
             */ 
</span>            <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"cannot store a toast pointer inside a range"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="rangetypes.c.html#LN2360"><span class='Ref_To_Local'>data_length</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* keep compiler quiet */ 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN324"><span class='Ref_to_Macro'>VARATT_IS_SHORT</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2372"><span class='Ref_To_Local'>val</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* no alignment for short varlenas */ 
</span>            <a href="rangetypes.c.html#LN2360"><span class='Ref_To_Local'>data_length</span></a> <span class='Operator'>= </span><a href="../../../include/postgres.h.html#LN305"><span class='Ref_to_Macro'>VARSIZE_SHORT</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2372"><span class='Ref_To_Local'>val</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            memcpy<span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2357"><span class='Ref_to_Parameter'>ptr</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN2372"><span class='Ref_To_Local'>val</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN2360"><span class='Ref_To_Local'>data_length</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2323"><span class='Ref_to_Macro'>TYPE_IS_PACKABLE</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2358"><span class='Ref_to_Parameter'>typlen</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN2358"><span class='Ref_to_Parameter'>typstorage</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>                 <a href="../../../include/postgres.h.html#LN270"><span class='Ref_to_Macro'>VARATT_CAN_MAKE_SHORT</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2372"><span class='Ref_To_Local'>val</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* convert to short varlena -- no alignment */ 
</span>            <a href="rangetypes.c.html#LN2360"><span class='Ref_To_Local'>data_length</span></a> <span class='Operator'>= </span><a href="../../../include/postgres.h.html#LN273"><span class='Ref_to_Macro'>VARATT_CONVERTED_SHORT_SIZE</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2372"><span class='Ref_To_Local'>val</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../../include/postgres.h.html#LN328"><span class='Ref_to_Macro'>SET_VARSIZE_SHORT</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2357"><span class='Ref_to_Parameter'>ptr</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN2360"><span class='Ref_To_Local'>data_length</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            memcpy<span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2357"><span class='Ref_to_Parameter'>ptr</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN302"><span class='Ref_to_Macro'>VARDATA</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2372"><span class='Ref_To_Local'>val</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN2360"><span class='Ref_To_Local'>data_length</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* full 4-byte header varlena */ 
</span>            <a href="rangetypes.c.html#LN2357"><span class='Ref_to_Parameter'>ptr</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/access/tupmacs.h.html#LN143"><span class='Ref_to_Macro'>att_align_nominal</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2357"><span class='Ref_to_Parameter'>ptr</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN2357"><span class='Ref_to_Parameter'>typalign</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="rangetypes.c.html#LN2360"><span class='Ref_To_Local'>data_length</span></a> <span class='Operator'>= </span><a href="../../../include/postgres.h.html#LN303"><span class='Ref_to_Macro'>VARSIZE</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2372"><span class='Ref_To_Local'>val</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            memcpy<span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2357"><span class='Ref_to_Parameter'>ptr</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN2372"><span class='Ref_To_Local'>val</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN2360"><span class='Ref_To_Local'>data_length</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if typlen==-1 &raquo; </span> 
    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2358"><span class='Ref_to_Parameter'>typlen</span></a> <span class='Operator'>== -</span><span class='Number'>2</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* cstring ... never needs alignment */ 
</span>        <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2357"><span class='Ref_to_Parameter'>typalign</span></a> <span class='Operator'>== </span><span class='String'>'c'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="rangetypes.c.html#LN2360"><span class='Ref_To_Local'>data_length</span></a> <span class='Operator'>= </span>strlen<span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN571"><span class='Ref_to_Macro'>DatumGetCString</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2357"><span class='Ref_to_Parameter'>datum</span></a><span class='Parentheses'>))</span> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        memcpy<span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2357"><span class='Ref_to_Parameter'>ptr</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN554"><span class='Ref_to_Macro'>DatumGetPointer</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2357"><span class='Ref_to_Parameter'>datum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN2360"><span class='Ref_To_Local'>data_length</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* fixed-length pass-by-reference */ 
</span>        <a href="rangetypes.c.html#LN2357"><span class='Ref_to_Parameter'>ptr</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/access/tupmacs.h.html#LN143"><span class='Ref_to_Macro'>att_align_nominal</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2357"><span class='Ref_to_Parameter'>ptr</span></a><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN2357"><span class='Ref_to_Parameter'>typalign</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2358"><span class='Ref_to_Parameter'>typlen</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="rangetypes.c.html#LN2360"><span class='Ref_To_Local'>data_length</span></a> <span class='Operator'>= </span><a href="rangetypes.c.html#LN2358"><span class='Ref_to_Parameter'>typlen</span></a><span class='Delimiter'>; 
</span>        memcpy<span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2357"><span class='Ref_to_Parameter'>ptr</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN554"><span class='Ref_to_Macro'>DatumGetPointer</span></a><span class='Parentheses'>(</span><a href="rangetypes.c.html#LN2357"><span class='Ref_to_Parameter'>datum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="rangetypes.c.html#LN2360"><span class='Ref_To_Local'>data_length</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="rangetypes.c.html#LN2357"><span class='Ref_to_Parameter'>ptr</span></a> <span class='Operator'>+= </span><a href="rangetypes.c.html#LN2360"><span class='Ref_To_Local'>data_length</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="rangetypes.c.html#LN2357"><span class='Ref_to_Parameter'>ptr</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end datum_write &raquo; </span> 
</pre>
<table bgcolor='#c0c0c0' width='100%'><tr><td><a href='../../../../Contents.html'>Contents</a></td></tr>
</table><hr><p class='blurb' align='center'><a href='http://www.sourceinsight.com'>HTML Created by Source Insight Version 4.00.0084 Built on 2017-02-26</a></p>
</body></html>