<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta name="generator" content="Source Insight Version 4.00.0084 Built on 2017-02-26">
<meta charset='UTF-8' />
<style type='text/css'><!--
TD {background-color: #C0C0C0; font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.blurb {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.filename {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 120%; font-weight: bold; }
.dirname {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 100%; font-weight: bold; margin-top: 2.5em;}
--></style>
<title>src\backend\utils\adt\rowtypes.c</title>
<LINK REL=StyleSheet HREF="../../../../C_Cpp_Source_File.css" TYPE='text/css' MEDIA=screen>
</head>
<body bgcolor=#ffffff>
<table bgcolor='#c0c0c0' width='100%'>
<tr><td><p class='filename'><b>src\backend\utils\adt\rowtypes.c</b></p></td>
<td align='right'>
Wed Jun 14 08:25:53 2017
</td></tr>
<tr><td><a href='../../../../Contents.html'>Contents</a></td></tr>
</table>
<pre>
<span class='Comment_Multi_Line'>/*------------------------------------------------------------------------- 
 * 
 * rowtypes.c 
 *    I/O and comparison functions for generic composite types. 
 * 
 * Portions Copyright (c) 1996-2017, PostgreSQL Global Development Group 
 * Portions Copyright (c) 1994, Regents of the University of California 
 * 
 * 
 * IDENTIFICATION 
 *    src/backend/utils/adt/rowtypes.c 
 * 
 *------------------------------------------------------------------------- 
 */ 
</span><span class='Keyword'>#include </span><span class='String'>"postgres.h"</span> 
 
<span class='Keyword'>#include </span><span class='String'>&LT;ctype.h&GT;</span> 
 
<span class='Keyword'>#include </span><span class='String'>"access/htup_details.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"access/tuptoaster.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_type.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"funcapi.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"libpq/pqformat.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"miscadmin.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/builtins.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/lsyscache.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/typcache.h"</span> 
 
 
<span class='Comment_Multi_Line'>/* 
 * structure to cache metadata needed for record I/O 
 */ 
</span><a name="LN32"></a><span class='Control'>typedef</span> <span class='Control'>struct</span> <span class='Declare_Struct'>ColumnIOData</span> 
<span class='Delimiter'>{ 
</span><a name="LN34"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Member'>column_type</span><span class='Delimiter'>; 
</span><a name="LN35"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Member'>typiofunc</span><span class='Delimiter'>; 
</span><a name="LN36"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Member'>typioparam</span><span class='Delimiter'>; 
</span><a name="LN37"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Member'>typisvarlena</span><span class='Delimiter'>; 
</span><a name="LN38"></a>    <a href="../../../include/fmgr.h.html#LN55"><span class='Ref_to_Struct'>FmgrInfo</span></a>    <span class='Declare_Member'>proc</span><span class='Delimiter'>; 
</span><a name="LN39"></a>} <span class='Declare_Typedef'>ColumnIOData</span><span class='Delimiter'>; 
</span> 
<a name="LN41"></a><span class='Control'>typedef</span> <span class='Control'>struct</span> <span class='Declare_Struct'>RecordIOData</span> 
<span class='Delimiter'>{ 
</span><a name="LN43"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Member'>record_type</span><span class='Delimiter'>; 
</span><a name="LN44"></a>    <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Member'>record_typmod</span><span class='Delimiter'>; 
</span><a name="LN45"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>ncolumns</span><span class='Delimiter'>; 
</span><a name="LN46"></a>    <a href="jsonfuncs.c.html#LN193"><span class='Ref_to_Struct'>ColumnIOData</span></a> <span class='Declare_Member'>columns</span><span class='Delimiter'>[</span>FLEXIBLE_ARRAY_MEMBER<span class='Delimiter'>]; 
</span><a name="LN47"></a>} <span class='Declare_Typedef'>RecordIOData</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* 
 * structure to cache metadata needed for record comparison 
 */ 
</span><a name="LN52"></a><span class='Control'>typedef</span> <span class='Control'>struct</span> <span class='Declare_Struct'>ColumnCompareData</span> 
<span class='Delimiter'>{ 
</span><a name="LN54"></a>    <a href="../../../include/utils/typcache.h.html#LN28"><span class='Ref_to_Struct'>TypeCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Member'>typentry</span><span class='Delimiter'>;</span>   <span class='Comment_Single_Line'>/* has everything we need, actually */ 
</span><a name="LN55"></a><span class='Delimiter'>} </span><span class='Declare_Typedef'>ColumnCompareData</span><span class='Delimiter'>; 
</span> 
<a name="LN57"></a><span class='Control'>typedef</span> <span class='Control'>struct</span> <span class='Declare_Struct'>RecordCompareData</span> 
<span class='Delimiter'>{ 
</span><a name="LN59"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>ncolumns</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* allocated length of columns[] */ 
</span><a name="LN60"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Member'>record1_type</span><span class='Delimiter'>; 
</span><a name="LN61"></a>    <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Member'>record1_typmod</span><span class='Delimiter'>; 
</span><a name="LN62"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Member'>record2_type</span><span class='Delimiter'>; 
</span><a name="LN63"></a>    <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Member'>record2_typmod</span><span class='Delimiter'>; 
</span><a name="LN64"></a>    <a href="rowtypes.c.html#LN52"><span class='Ref_to_Struct'>ColumnCompareData</span></a> <span class='Declare_Member'>columns</span><span class='Delimiter'>[</span>FLEXIBLE_ARRAY_MEMBER<span class='Delimiter'>]; 
</span><a name="LN65"></a>} <span class='Declare_Typedef'>RecordCompareData</span><span class='Delimiter'>; 
</span> 
 
<span class='Comment_Multi_Line'>/* 
 * record_in        - input routine for any composite type. 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN72"></a><span class='Declare_Function'>record_in</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN74"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>string</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN241"><span class='Ref_to_Macro'>PG_GETARG_CSTRING</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN75"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>tupType</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN239"><span class='Ref_to_Macro'>PG_GETARG_OID</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN76"></a>    <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>tupTypmod</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN233"><span class='Ref_to_Macro'>PG_GETARG_INT32</span></a><span class='Parentheses'>(</span><span class='Number'>2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN77"></a>    <a href="../../../include/access/htup.h.html#LN22"><span class='Ref_to_Typedef'>HeapTupleHeader</span></a> <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span><a name="LN78"></a>    <a href="../../../include/access/tupdesc.h.html#LN70"><span class='Ref_to_Typedef'>TupleDesc</span></a>   <span class='Declare_Local'>tupdesc</span><span class='Delimiter'>; 
</span><a name="LN79"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tuple</span><span class='Delimiter'>; 
</span><a name="LN80"></a>    <a href="jsonfuncs.c.html#LN210"><span class='Ref_to_Struct'>RecordIOData</span></a> <span class='Operator'>*</span><span class='Declare_Local'>my_extra</span><span class='Delimiter'>; 
</span><a name="LN81"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>needComma</span> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span><a name="LN82"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ncolumns</span><span class='Delimiter'>; 
</span><a name="LN83"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN84"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>ptr</span><span class='Delimiter'>; 
</span><a name="LN85"></a>    <a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>values</span><span class='Delimiter'>; 
</span><a name="LN86"></a>    <span class='Keyword'>bool</span>       <span class='Operator'>*</span><span class='Declare_Local'>nulls</span><span class='Delimiter'>; 
</span><a name="LN87"></a>    <a href="../../../include/lib/stringinfo.h.html#LN34"><span class='Ref_to_Struct'>StringInfoData</span></a> <span class='Declare_Local'>buf</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/miscadmin.h.html#LN275"><span class='Ref_to_Proto'>check_stack_depth</span></a><span class='Parentheses'>()</span><span class='Delimiter'>;</span>        <span class='Comment_Single_Line'>/* recurses for record-type columns */ 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Give a friendly error message if we did not get enough info to identify 
     * the target record type.  (lookup_rowtype_tupdesc would fail anyway, but 
     * with a non-user-friendly message.)  In ordinary SQL usage, we'll get -1 
     * for typmod, since composite types and RECORD have no type modifiers at 
     * the SQL level, and thus must fail for RECORD.  However some callers can 
     * supply a valid typmod, and then we can do something useful for RECORD. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN75"><span class='Ref_To_Local'>tupType</span></a> <span class='Operator'>== </span><a href="../../../include/catalog/pg_type.h.html#LN679"><span class='Ref_to_Const'>RECORDOID</span></a> <span class='Operator'>&& </span><a href="rowtypes.c.html#LN76"><span class='Ref_To_Local'>tupTypmod</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_FEATURE_NOT_SUPPORTED<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>           <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"input of anonymous composite types is not implemented"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * This comes from the composite type's pg_type.oid and stores system oids 
     * in user tables, specifically DatumTupleFields. This oid must be 
     * preserved by binary upgrades. 
     */ 
</span>    <a href="rowtypes.c.html#LN78"><span class='Ref_To_Local'>tupdesc</span></a> <span class='Operator'>= </span><a href="../../../include/utils/typcache.h.html#LN151"><span class='Ref_to_Proto'>lookup_rowtype_tupdesc</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN75"><span class='Ref_To_Local'>tupType</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN76"><span class='Ref_To_Local'>tupTypmod</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN82"><span class='Ref_To_Local'>ncolumns</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN78"><span class='Ref_To_Local'>tupdesc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN72"><span class='Ref_to_Member'>natts</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * We arrange to look up the needed I/O info just once per series of 
     * calls, assuming the record type doesn't change underneath us. 
     */ 
</span>    <a href="rowtypes.c.html#LN80"><span class='Ref_To_Local'>my_extra</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="jsonfuncs.c.html#LN210"><span class='Ref_to_Struct'>RecordIOData</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span>fcinfo<span class='Operator'>-&GT;</span>flinfo<span class='Operator'>-&GT;</span>fn_extra<span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN80"><span class='Ref_To_Local'>my_extra</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL </span><span class='Operator'>|| 
</span>        <a href="rowtypes.c.html#LN80"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN45"><span class='Ref_to_Member'>ncolumns</span></a> <span class='Operator'>!= </span><a href="rowtypes.c.html#LN82"><span class='Ref_To_Local'>ncolumns</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        fcinfo<span class='Operator'>-&GT;</span>flinfo<span class='Operator'>-&GT;</span>fn_extra <span class='Operator'>= 
</span>            <a href="../../../include/utils/palloc.h.html#LN70"><span class='Ref_to_Proto'>MemoryContextAlloc</span></a><span class='Parentheses'>(</span>fcinfo<span class='Operator'>-&GT;</span>flinfo<span class='Operator'>-&GT;</span>fn_mcxt<span class='Delimiter'>, 
</span>                               <a href="../../../include/c.h.html#LN554"><span class='Ref_to_Macro'>offsetof</span></a><span class='Parentheses'>(</span><a href="jsonfuncs.c.html#LN210"><span class='Ref_to_Struct'>RecordIOData</span></a><span class='Delimiter'>, </span>columns<span class='Parentheses'>) </span><span class='Operator'>+ 
</span>                               <a href="rowtypes.c.html#LN82"><span class='Ref_To_Local'>ncolumns</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="jsonfuncs.c.html#LN193"><span class='Ref_to_Struct'>ColumnIOData</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN80"><span class='Ref_To_Local'>my_extra</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="jsonfuncs.c.html#LN210"><span class='Ref_to_Struct'>RecordIOData</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span>fcinfo<span class='Operator'>-&GT;</span>flinfo<span class='Operator'>-&GT;</span>fn_extra<span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN80"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN43"><span class='Ref_to_Member'>record_type</span></a> <span class='Operator'>= </span><a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN80"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN44"><span class='Ref_to_Member'>record_typmod</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN80"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN43"><span class='Ref_to_Member'>record_type</span></a> <span class='Operator'>!= </span><a href="rowtypes.c.html#LN75"><span class='Ref_To_Local'>tupType</span></a> <span class='Operator'>|| 
</span>        <a href="rowtypes.c.html#LN80"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN44"><span class='Ref_to_Member'>record_typmod</span></a> <span class='Operator'>!= </span><a href="rowtypes.c.html#LN76"><span class='Ref_To_Local'>tupTypmod</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../../include/c.h.html#LN856"><span class='Ref_to_Macro'>MemSet</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN80"><span class='Ref_To_Local'>my_extra</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>               <a href="../../../include/c.h.html#LN554"><span class='Ref_to_Macro'>offsetof</span></a><span class='Parentheses'>(</span><a href="jsonfuncs.c.html#LN210"><span class='Ref_to_Struct'>RecordIOData</span></a><span class='Delimiter'>, </span>columns<span class='Parentheses'>) </span><span class='Operator'>+ 
</span>               <a href="rowtypes.c.html#LN82"><span class='Ref_To_Local'>ncolumns</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="jsonfuncs.c.html#LN193"><span class='Ref_to_Struct'>ColumnIOData</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN80"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN43"><span class='Ref_to_Member'>record_type</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN75"><span class='Ref_To_Local'>tupType</span></a><span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN80"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN44"><span class='Ref_to_Member'>record_typmod</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN76"><span class='Ref_To_Local'>tupTypmod</span></a><span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN80"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN45"><span class='Ref_to_Member'>ncolumns</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN82"><span class='Ref_To_Local'>ncolumns</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="rowtypes.c.html#LN85"><span class='Ref_To_Local'>values</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN82"><span class='Ref_To_Local'>ncolumns</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN86"><span class='Ref_To_Local'>nulls</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN82"><span class='Ref_To_Local'>ncolumns</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>bool</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Scan the string.  We use "buf" to accumulate the de-quoted data for 
     * each column, which is then fed to the appropriate input converter. 
     */ 
</span>    <a href="rowtypes.c.html#LN84"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN74"><span class='Ref_To_Local'>string</span></a><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* Allow leading whitespace */ 
</span>    <span class='Control'>while</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="rowtypes.c.html#LN84"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>&& </span>isspace<span class='Parentheses'>((</span><span class='Keyword'>unsigned char</span><span class='Parentheses'>) </span><span class='Operator'>*</span><a href="rowtypes.c.html#LN84"><span class='Ref_To_Local'>ptr</span></a><span class='Parentheses'>))</span> 
        <a href="rowtypes.c.html#LN84"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="rowtypes.c.html#LN84"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>++ != </span><span class='String'>'('</span><span class='Parentheses'>) 
</span>        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INVALID_TEXT_REPRESENTATION<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"malformed record literal: \"%s\""</span><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN74"><span class='Ref_To_Local'>string</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN871"><span class='Ref_to_Func'>errdetail</span></a><span class='Parentheses'>(</span><span class='String'>"Missing left parenthesis."</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <a href="../../lib/stringinfo.c.html#LN44"><span class='Ref_to_Func'>initStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rowtypes.c.html#LN87"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN83"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="rowtypes.c.html#LN83"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="rowtypes.c.html#LN82"><span class='Ref_To_Local'>ncolumns</span></a><span class='Delimiter'>; </span><a href="rowtypes.c.html#LN83"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN161"></a>        <a href="jsonfuncs.c.html#LN193"><span class='Ref_to_Struct'>ColumnIOData</span></a> <span class='Operator'>*</span><span class='Declare_Local'>column_info</span> <span class='Operator'>= &</span><a href="rowtypes.c.html#LN80"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN46"><span class='Ref_to_Member'>columns</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN83"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span><a name="LN162"></a>        <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>column_type</span> <span class='Operator'>= </span><a href="rowtypes.c.html#LN78"><span class='Ref_To_Local'>tupdesc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN83"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>atttypid<span class='Delimiter'>; 
</span><a name="LN163"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>column_data</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Ignore dropped columns in datatype, but fill with nulls */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN78"><span class='Ref_To_Local'>tupdesc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN83"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attisdropped<span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="rowtypes.c.html#LN85"><span class='Ref_To_Local'>values</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN83"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a><span class='Parentheses'>) </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>            <a href="rowtypes.c.html#LN86"><span class='Ref_To_Local'>nulls</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN83"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN81"><span class='Ref_To_Local'>needComma</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* Skip comma that separates prior field from this one */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="rowtypes.c.html#LN84"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>== </span><span class='String'>','</span><span class='Parentheses'>) 
</span>                <a href="rowtypes.c.html#LN84"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
                <span class='Comment_Multi_Line'>/* *ptr must be ')' */ 
</span>                <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INVALID_TEXT_REPRESENTATION<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"malformed record literal: \"%s\""</span><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN74"><span class='Ref_To_Local'>string</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../error/elog.c.html#LN871"><span class='Ref_to_Func'>errdetail</span></a><span class='Parentheses'>(</span><span class='String'>"Too few columns."</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Comment_Multi_Line'>/* Check for null: completely empty input means null */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="rowtypes.c.html#LN84"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>== </span><span class='String'>','</span> <span class='Operator'>|| *</span><a href="rowtypes.c.html#LN84"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>== </span><span class='String'>')'</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="rowtypes.c.html#LN163"><span class='Ref_To_Local'>column_data</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>            <a href="rowtypes.c.html#LN86"><span class='Ref_To_Local'>nulls</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN83"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* Extract string for this column */ 
</span><a name="LN195"></a>            <span class='Keyword'>bool</span>        <span class='Declare_Local'>inquote</span> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
            <a href="../../lib/stringinfo.c.html#LN60"><span class='Ref_to_Func'>resetStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rowtypes.c.html#LN87"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN195"><span class='Ref_To_Local'>inquote</span></a> <span class='Operator'>|| !</span><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="rowtypes.c.html#LN84"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>== </span><span class='String'>','</span> <span class='Operator'>|| *</span><a href="rowtypes.c.html#LN84"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>== </span><span class='String'>')'</span><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span><a name="LN200"></a>                <span class='Keyword'>char</span>        <span class='Declare_Local'>ch</span> <span class='Operator'>= *</span><a href="rowtypes.c.html#LN84"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN200"><span class='Ref_To_Local'>ch</span></a> <span class='Operator'>== </span><span class='String'>'\0'</span><span class='Parentheses'>) 
</span>                    <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                            <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INVALID_TEXT_REPRESENTATION<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                             <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"malformed record literal: \"%s\""</span><span class='Delimiter'>, 
</span>                                    <a href="rowtypes.c.html#LN74"><span class='Ref_To_Local'>string</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                             <a href="../error/elog.c.html#LN871"><span class='Ref_to_Func'>errdetail</span></a><span class='Parentheses'>(</span><span class='String'>"Unexpected end of input."</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN200"><span class='Ref_To_Local'>ch</span></a> <span class='Operator'>== </span><span class='String'>'\\'</span><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="rowtypes.c.html#LN84"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>== </span><span class='String'>'\0'</span><span class='Parentheses'>) 
</span>                        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INVALID_TEXT_REPRESENTATION<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                 <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"malformed record literal: \"%s\""</span><span class='Delimiter'>, 
</span>                                        <a href="rowtypes.c.html#LN74"><span class='Ref_To_Local'>string</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                 <a href="../error/elog.c.html#LN871"><span class='Ref_to_Func'>errdetail</span></a><span class='Parentheses'>(</span><span class='String'>"Unexpected end of input."</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                    <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rowtypes.c.html#LN87"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='Operator'>*</span><a href="rowtypes.c.html#LN84"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>++</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN200"><span class='Ref_To_Local'>ch</span></a> <span class='Operator'>== </span><span class='String'>'"'</span><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="rowtypes.c.html#LN195"><span class='Ref_To_Local'>inquote</span></a><span class='Parentheses'>) 
</span>                        <a href="rowtypes.c.html#LN195"><span class='Ref_To_Local'>inquote</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>                    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="rowtypes.c.html#LN84"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>== </span><span class='String'>'"'</span><span class='Parentheses'>) 
</span>                    <span class='Delimiter'>{ 
</span>                        <span class='Comment_Multi_Line'>/* doubled quote within quote sequence */ 
</span>                        <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rowtypes.c.html#LN87"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='Operator'>*</span><a href="rowtypes.c.html#LN84"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>++</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                    <span class='Control'>else</span> 
                        <a href="rowtypes.c.html#LN195"><span class='Ref_To_Local'>inquote</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>else</span> 
                    <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rowtypes.c.html#LN87"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN200"><span class='Ref_To_Local'>ch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end while inquote||!(*ptr==','|... &raquo; </span> 
 
            <a href="rowtypes.c.html#LN163"><span class='Ref_To_Local'>column_data</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN87"><span class='Ref_To_Local'>buf</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>; 
</span>            <a href="rowtypes.c.html#LN86"><span class='Ref_To_Local'>nulls</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN83"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
 
        <span class='Comment_Multi_Line'>/* 
         * Convert the column value 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN161"><span class='Ref_To_Local'>column_info</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN34"><span class='Ref_to_Member'>column_type</span></a> <span class='Operator'>!= </span><a href="rowtypes.c.html#LN162"><span class='Ref_To_Local'>column_type</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="../../../include/utils/lsyscache.h.html#LN161"><span class='Ref_to_Proto'>getTypeInputInfo</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN162"><span class='Ref_To_Local'>column_type</span></a><span class='Delimiter'>, 
</span>                             <span class='Operator'>&</span><a href="rowtypes.c.html#LN161"><span class='Ref_To_Local'>column_info</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN35"><span class='Ref_to_Member'>typiofunc</span></a><span class='Delimiter'>, 
</span>                             <span class='Operator'>&</span><a href="rowtypes.c.html#LN161"><span class='Ref_To_Local'>column_info</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN36"><span class='Ref_to_Member'>typioparam</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../../include/fmgr.h.html#LN99"><span class='Ref_to_Proto'>fmgr_info_cxt</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN161"><span class='Ref_To_Local'>column_info</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN35"><span class='Ref_to_Member'>typiofunc</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rowtypes.c.html#LN161"><span class='Ref_To_Local'>column_info</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN38"><span class='Ref_to_Member'>proc</span></a><span class='Delimiter'>, 
</span>                          fcinfo<span class='Operator'>-&GT;</span>flinfo<span class='Operator'>-&GT;</span>fn_mcxt<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="rowtypes.c.html#LN161"><span class='Ref_To_Local'>column_info</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN34"><span class='Ref_to_Member'>column_type</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN162"><span class='Ref_To_Local'>column_type</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <a href="rowtypes.c.html#LN85"><span class='Ref_To_Local'>values</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN83"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN642"><span class='Ref_to_Proto'>InputFunctionCall</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rowtypes.c.html#LN161"><span class='Ref_To_Local'>column_info</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN38"><span class='Ref_to_Member'>proc</span></a><span class='Delimiter'>, 
</span>                                      <a href="rowtypes.c.html#LN163"><span class='Ref_To_Local'>column_data</span></a><span class='Delimiter'>, 
</span>                                      <a href="rowtypes.c.html#LN161"><span class='Ref_To_Local'>column_info</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN36"><span class='Ref_to_Member'>typioparam</span></a><span class='Delimiter'>, 
</span>                                      <a href="rowtypes.c.html#LN78"><span class='Ref_To_Local'>tupdesc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN83"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>atttypmod<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Prep for next column 
         */ 
</span>        <a href="rowtypes.c.html#LN81"><span class='Ref_To_Local'>needComma</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;ncolumns;i++ &raquo; </span> 
 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="rowtypes.c.html#LN84"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>++ != </span><span class='String'>')'</span><span class='Parentheses'>) 
</span>        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INVALID_TEXT_REPRESENTATION<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"malformed record literal: \"%s\""</span><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN74"><span class='Ref_To_Local'>string</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN871"><span class='Ref_to_Func'>errdetail</span></a><span class='Parentheses'>(</span><span class='String'>"Too many columns."</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* Allow trailing whitespace */ 
</span>    <span class='Control'>while</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="rowtypes.c.html#LN84"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>&& </span>isspace<span class='Parentheses'>((</span><span class='Keyword'>unsigned char</span><span class='Parentheses'>) </span><span class='Operator'>*</span><a href="rowtypes.c.html#LN84"><span class='Ref_To_Local'>ptr</span></a><span class='Parentheses'>))</span> 
        <a href="rowtypes.c.html#LN84"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="rowtypes.c.html#LN84"><span class='Ref_To_Local'>ptr</span></a><span class='Parentheses'>) 
</span>        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INVALID_TEXT_REPRESENTATION<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"malformed record literal: \"%s\""</span><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN74"><span class='Ref_To_Local'>string</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN871"><span class='Ref_to_Func'>errdetail</span></a><span class='Parentheses'>(</span><span class='String'>"Junk after right parenthesis."</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <a href="rowtypes.c.html#LN79"><span class='Ref_To_Local'>tuple</span></a> <span class='Operator'>= </span><a href="../../access/common/heaptuple.c.html#LN690"><span class='Ref_to_Func'>heap_form_tuple</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN78"><span class='Ref_To_Local'>tupdesc</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN85"><span class='Ref_To_Local'>values</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN86"><span class='Ref_To_Local'>nulls</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * We cannot return tuple-&GT;t_data because heap_form_tuple allocates it as 
     * part of a larger chunk, and our caller may expect to be able to pfree 
     * our result.  So must copy the info into a new palloc chunk. 
     */ 
</span>    <a href="rowtypes.c.html#LN77"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/access/htup.h.html#LN22"><span class='Ref_to_Typedef'>HeapTupleHeader</span></a><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN79"><span class='Ref_To_Local'>tuple</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/htup.h.html#LN63"><span class='Ref_to_Member'>t_len</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    memcpy<span class='Parentheses'>(</span><a href="rowtypes.c.html#LN77"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN79"><span class='Ref_To_Local'>tuple</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/htup.h.html#LN66"><span class='Ref_to_Member'>t_data</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN79"><span class='Ref_To_Local'>tuple</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/htup.h.html#LN63"><span class='Ref_to_Member'>t_len</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/access/htup_details.h.html#LN815"><span class='Ref_to_Proto'>heap_freetuple</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN79"><span class='Ref_To_Local'>tuple</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN87"><span class='Ref_To_Local'>buf</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN85"><span class='Ref_To_Local'>values</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN86"><span class='Ref_To_Local'>nulls</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/access/tupdesc.h.html#LN106"><span class='Ref_to_Macro'>ReleaseTupleDesc</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN78"><span class='Ref_To_Local'>tupdesc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN332"><span class='Ref_to_Macro'>PG_RETURN_HEAPTUPLEHEADER</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN77"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end record_in &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * record_out       - output routine for any composite type. 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN299"></a><span class='Declare_Function'>record_out</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN301"></a>    <a href="../../../include/access/htup.h.html#LN22"><span class='Ref_to_Typedef'>HeapTupleHeader</span></a> <span class='Declare_Local'>rec</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN275"><span class='Ref_to_Macro'>PG_GETARG_HEAPTUPLEHEADER</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN302"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>tupType</span><span class='Delimiter'>; 
</span><a name="LN303"></a>    <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>tupTypmod</span><span class='Delimiter'>; 
</span><a name="LN304"></a>    <a href="../../../include/access/tupdesc.h.html#LN70"><span class='Ref_to_Typedef'>TupleDesc</span></a>   <span class='Declare_Local'>tupdesc</span><span class='Delimiter'>; 
</span><a name="LN305"></a>    <a href="../../../include/access/htup.h.html#LN61"><span class='Ref_to_Struct'>HeapTupleData</span></a> <span class='Declare_Local'>tuple</span><span class='Delimiter'>; 
</span><a name="LN306"></a>    <a href="jsonfuncs.c.html#LN210"><span class='Ref_to_Struct'>RecordIOData</span></a> <span class='Operator'>*</span><span class='Declare_Local'>my_extra</span><span class='Delimiter'>; 
</span><a name="LN307"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>needComma</span> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span><a name="LN308"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ncolumns</span><span class='Delimiter'>; 
</span><a name="LN309"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN310"></a>    <a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>values</span><span class='Delimiter'>; 
</span><a name="LN311"></a>    <span class='Keyword'>bool</span>       <span class='Operator'>*</span><span class='Declare_Local'>nulls</span><span class='Delimiter'>; 
</span><a name="LN312"></a>    <a href="../../../include/lib/stringinfo.h.html#LN34"><span class='Ref_to_Struct'>StringInfoData</span></a> <span class='Declare_Local'>buf</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/miscadmin.h.html#LN275"><span class='Ref_to_Proto'>check_stack_depth</span></a><span class='Parentheses'>()</span><span class='Delimiter'>;</span>        <span class='Comment_Single_Line'>/* recurses for record-type columns */ 
</span> 
    <span class='Comment_Multi_Line'>/* Extract type info from the tuple itself */ 
</span>    <a href="rowtypes.c.html#LN302"><span class='Ref_To_Local'>tupType</span></a> <span class='Operator'>= </span><a href="../../../include/access/htup_details.h.html#LN444"><span class='Ref_to_Macro'>HeapTupleHeaderGetTypeId</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN301"><span class='Ref_To_Local'>rec</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN303"><span class='Ref_To_Local'>tupTypmod</span></a> <span class='Operator'>= </span><a href="../../../include/access/htup_details.h.html#LN454"><span class='Ref_to_Macro'>HeapTupleHeaderGetTypMod</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN301"><span class='Ref_To_Local'>rec</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN304"><span class='Ref_To_Local'>tupdesc</span></a> <span class='Operator'>= </span><a href="../../../include/utils/typcache.h.html#LN151"><span class='Ref_to_Proto'>lookup_rowtype_tupdesc</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN302"><span class='Ref_To_Local'>tupType</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN303"><span class='Ref_To_Local'>tupTypmod</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN308"><span class='Ref_To_Local'>ncolumns</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN304"><span class='Ref_To_Local'>tupdesc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN72"><span class='Ref_to_Member'>natts</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Build a temporary HeapTuple control structure */ 
</span>    <a href="rowtypes.c.html#LN305"><span class='Ref_To_Local'>tuple</span></a><span class='Operator'>.</span><a href="../../../include/access/htup.h.html#LN63"><span class='Ref_to_Member'>t_len</span></a> <span class='Operator'>= </span><a href="../../../include/access/htup_details.h.html#LN438"><span class='Ref_to_Macro'>HeapTupleHeaderGetDatumLength</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN301"><span class='Ref_To_Local'>rec</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/storage/itemptr.h.html#LN148"><span class='Ref_to_Macro'>ItemPointerSetInvalid</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN305"><span class='Ref_To_Local'>tuple</span></a><span class='Operator'>.</span><a href="../../../include/access/htup.h.html#LN64"><span class='Ref_to_Member'>t_self</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN305"><span class='Ref_To_Local'>tuple</span></a><span class='Operator'>.</span><a href="../../../include/access/htup.h.html#LN65"><span class='Ref_to_Member'>t_tableOid</span></a> <span class='Operator'>= </span><a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN305"><span class='Ref_To_Local'>tuple</span></a><span class='Operator'>.</span><a href="../../../include/access/htup.h.html#LN66"><span class='Ref_to_Member'>t_data</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN301"><span class='Ref_To_Local'>rec</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * We arrange to look up the needed I/O info just once per series of 
     * calls, assuming the record type doesn't change underneath us. 
     */ 
</span>    <a href="rowtypes.c.html#LN306"><span class='Ref_To_Local'>my_extra</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="jsonfuncs.c.html#LN210"><span class='Ref_to_Struct'>RecordIOData</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span>fcinfo<span class='Operator'>-&GT;</span>flinfo<span class='Operator'>-&GT;</span>fn_extra<span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN306"><span class='Ref_To_Local'>my_extra</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL </span><span class='Operator'>|| 
</span>        <a href="rowtypes.c.html#LN306"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN45"><span class='Ref_to_Member'>ncolumns</span></a> <span class='Operator'>!= </span><a href="rowtypes.c.html#LN308"><span class='Ref_To_Local'>ncolumns</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        fcinfo<span class='Operator'>-&GT;</span>flinfo<span class='Operator'>-&GT;</span>fn_extra <span class='Operator'>= 
</span>            <a href="../../../include/utils/palloc.h.html#LN70"><span class='Ref_to_Proto'>MemoryContextAlloc</span></a><span class='Parentheses'>(</span>fcinfo<span class='Operator'>-&GT;</span>flinfo<span class='Operator'>-&GT;</span>fn_mcxt<span class='Delimiter'>, 
</span>                               <a href="../../../include/c.h.html#LN554"><span class='Ref_to_Macro'>offsetof</span></a><span class='Parentheses'>(</span><a href="jsonfuncs.c.html#LN210"><span class='Ref_to_Struct'>RecordIOData</span></a><span class='Delimiter'>, </span>columns<span class='Parentheses'>) </span><span class='Operator'>+ 
</span>                               <a href="rowtypes.c.html#LN308"><span class='Ref_To_Local'>ncolumns</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="jsonfuncs.c.html#LN193"><span class='Ref_to_Struct'>ColumnIOData</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN306"><span class='Ref_To_Local'>my_extra</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="jsonfuncs.c.html#LN210"><span class='Ref_to_Struct'>RecordIOData</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span>fcinfo<span class='Operator'>-&GT;</span>flinfo<span class='Operator'>-&GT;</span>fn_extra<span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN306"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN43"><span class='Ref_to_Member'>record_type</span></a> <span class='Operator'>= </span><a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN306"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN44"><span class='Ref_to_Member'>record_typmod</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN306"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN43"><span class='Ref_to_Member'>record_type</span></a> <span class='Operator'>!= </span><a href="rowtypes.c.html#LN302"><span class='Ref_To_Local'>tupType</span></a> <span class='Operator'>|| 
</span>        <a href="rowtypes.c.html#LN306"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN44"><span class='Ref_to_Member'>record_typmod</span></a> <span class='Operator'>!= </span><a href="rowtypes.c.html#LN303"><span class='Ref_To_Local'>tupTypmod</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../../include/c.h.html#LN856"><span class='Ref_to_Macro'>MemSet</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN306"><span class='Ref_To_Local'>my_extra</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>               <a href="../../../include/c.h.html#LN554"><span class='Ref_to_Macro'>offsetof</span></a><span class='Parentheses'>(</span><a href="jsonfuncs.c.html#LN210"><span class='Ref_to_Struct'>RecordIOData</span></a><span class='Delimiter'>, </span>columns<span class='Parentheses'>) </span><span class='Operator'>+ 
</span>               <a href="rowtypes.c.html#LN308"><span class='Ref_To_Local'>ncolumns</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="jsonfuncs.c.html#LN193"><span class='Ref_to_Struct'>ColumnIOData</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN306"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN43"><span class='Ref_to_Member'>record_type</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN302"><span class='Ref_To_Local'>tupType</span></a><span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN306"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN44"><span class='Ref_to_Member'>record_typmod</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN303"><span class='Ref_To_Local'>tupTypmod</span></a><span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN306"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN45"><span class='Ref_to_Member'>ncolumns</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN308"><span class='Ref_To_Local'>ncolumns</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="rowtypes.c.html#LN310"><span class='Ref_To_Local'>values</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN308"><span class='Ref_To_Local'>ncolumns</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN311"><span class='Ref_To_Local'>nulls</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN308"><span class='Ref_To_Local'>ncolumns</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>bool</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Break down the tuple into fields */ 
</span>    <a href="../../../include/access/htup_details.h.html#LN813"><span class='Ref_to_Proto'>heap_deform_tuple</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rowtypes.c.html#LN305"><span class='Ref_To_Local'>tuple</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN304"><span class='Ref_To_Local'>tupdesc</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN310"><span class='Ref_To_Local'>values</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN311"><span class='Ref_To_Local'>nulls</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* And build the result string */ 
</span>    <a href="../../lib/stringinfo.c.html#LN44"><span class='Ref_to_Func'>initStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rowtypes.c.html#LN312"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rowtypes.c.html#LN312"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'('</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN309"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="rowtypes.c.html#LN309"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="rowtypes.c.html#LN308"><span class='Ref_To_Local'>ncolumns</span></a><span class='Delimiter'>; </span><a href="rowtypes.c.html#LN309"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN369"></a>        <a href="jsonfuncs.c.html#LN193"><span class='Ref_to_Struct'>ColumnIOData</span></a> <span class='Operator'>*</span><span class='Declare_Local'>column_info</span> <span class='Operator'>= &</span><a href="rowtypes.c.html#LN306"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN46"><span class='Ref_to_Member'>columns</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN309"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span><a name="LN370"></a>        <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>column_type</span> <span class='Operator'>= </span><a href="rowtypes.c.html#LN304"><span class='Ref_To_Local'>tupdesc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN309"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>atttypid<span class='Delimiter'>; 
</span><a name="LN371"></a>        <a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>       <span class='Declare_Local'>attr</span><span class='Delimiter'>; 
</span><a name="LN372"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>value</span><span class='Delimiter'>; 
</span><a name="LN373"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>tmp</span><span class='Delimiter'>; 
</span><a name="LN374"></a>        <span class='Keyword'>bool</span>        <span class='Declare_Local'>nq</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Ignore dropped columns in datatype */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN304"><span class='Ref_To_Local'>tupdesc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN309"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attisdropped<span class='Parentheses'>) 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN307"><span class='Ref_To_Local'>needComma</span></a><span class='Parentheses'>) 
</span>            <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rowtypes.c.html#LN312"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>','</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN307"><span class='Ref_To_Local'>needComma</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN311"><span class='Ref_To_Local'>nulls</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN309"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* emit nothing... */ 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Convert the column value to text 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN369"><span class='Ref_To_Local'>column_info</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN34"><span class='Ref_to_Member'>column_type</span></a> <span class='Operator'>!= </span><a href="rowtypes.c.html#LN370"><span class='Ref_To_Local'>column_type</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="../../../include/utils/lsyscache.h.html#LN162"><span class='Ref_to_Proto'>getTypeOutputInfo</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN370"><span class='Ref_To_Local'>column_type</span></a><span class='Delimiter'>, 
</span>                              <span class='Operator'>&</span><a href="rowtypes.c.html#LN369"><span class='Ref_To_Local'>column_info</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN35"><span class='Ref_to_Member'>typiofunc</span></a><span class='Delimiter'>, 
</span>                              <span class='Operator'>&</span><a href="rowtypes.c.html#LN369"><span class='Ref_To_Local'>column_info</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN37"><span class='Ref_to_Member'>typisvarlena</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../../include/fmgr.h.html#LN99"><span class='Ref_to_Proto'>fmgr_info_cxt</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN369"><span class='Ref_To_Local'>column_info</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN35"><span class='Ref_to_Member'>typiofunc</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rowtypes.c.html#LN369"><span class='Ref_To_Local'>column_info</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN38"><span class='Ref_to_Member'>proc</span></a><span class='Delimiter'>, 
</span>                          fcinfo<span class='Operator'>-&GT;</span>flinfo<span class='Operator'>-&GT;</span>fn_mcxt<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="rowtypes.c.html#LN369"><span class='Ref_To_Local'>column_info</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN34"><span class='Ref_to_Member'>column_type</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN370"><span class='Ref_To_Local'>column_type</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <a href="rowtypes.c.html#LN371"><span class='Ref_To_Local'>attr</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN310"><span class='Ref_To_Local'>values</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN309"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span>        <span class='Keyword'>value </span><span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN646"><span class='Ref_to_Proto'>OutputFunctionCall</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rowtypes.c.html#LN369"><span class='Ref_To_Local'>column_info</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN38"><span class='Ref_to_Member'>proc</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN371"><span class='Ref_To_Local'>attr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Detect whether we need double quotes for this value */ 
</span>        <a href="rowtypes.c.html#LN374"><span class='Ref_To_Local'>nq</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>value</span><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='String'>'\0'</span><span class='Parentheses'>)</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* force quotes for empty string */ 
</span>        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN373"><span class='Ref_To_Local'>tmp</span></a> <span class='Operator'>= </span><span class='Keyword'>value</span><span class='Delimiter'>; </span><span class='Operator'>*</span><a href="rowtypes.c.html#LN373"><span class='Ref_To_Local'>tmp</span></a><span class='Delimiter'>; </span><a href="rowtypes.c.html#LN373"><span class='Ref_To_Local'>tmp</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN410"></a>            <span class='Keyword'>char</span>        <span class='Declare_Local'>ch</span> <span class='Operator'>= *</span><a href="rowtypes.c.html#LN373"><span class='Ref_To_Local'>tmp</span></a><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN410"><span class='Ref_To_Local'>ch</span></a> <span class='Operator'>== </span><span class='String'>'"'</span> <span class='Operator'>|| </span><a href="rowtypes.c.html#LN410"><span class='Ref_To_Local'>ch</span></a> <span class='Operator'>== </span><span class='String'>'\\'</span> <span class='Operator'>|| 
</span>                <a href="rowtypes.c.html#LN410"><span class='Ref_To_Local'>ch</span></a> <span class='Operator'>== </span><span class='String'>'('</span> <span class='Operator'>|| </span><a href="rowtypes.c.html#LN410"><span class='Ref_To_Local'>ch</span></a> <span class='Operator'>== </span><span class='String'>')'</span> <span class='Operator'>|| </span><a href="rowtypes.c.html#LN410"><span class='Ref_To_Local'>ch</span></a> <span class='Operator'>== </span><span class='String'>','</span> <span class='Operator'>|| 
</span>                isspace<span class='Parentheses'>((</span><span class='Keyword'>unsigned char</span><span class='Parentheses'>) </span><a href="rowtypes.c.html#LN410"><span class='Ref_To_Local'>ch</span></a><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span>                <a href="rowtypes.c.html#LN374"><span class='Ref_To_Local'>nq</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Comment_Multi_Line'>/* And emit the string */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN374"><span class='Ref_To_Local'>nq</span></a><span class='Parentheses'>) 
</span>            <a href="../../../include/lib/stringinfo.h.html#LN126"><span class='Ref_to_Macro'>appendStringInfoCharMacro</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rowtypes.c.html#LN312"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'"'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN373"><span class='Ref_To_Local'>tmp</span></a> <span class='Operator'>= </span><span class='Keyword'>value</span><span class='Delimiter'>; </span><span class='Operator'>*</span><a href="rowtypes.c.html#LN373"><span class='Ref_To_Local'>tmp</span></a><span class='Delimiter'>; </span><a href="rowtypes.c.html#LN373"><span class='Ref_To_Local'>tmp</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN426"></a>            <span class='Keyword'>char</span>        <span class='Declare_Local'>ch</span> <span class='Operator'>= *</span><a href="rowtypes.c.html#LN373"><span class='Ref_To_Local'>tmp</span></a><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN426"><span class='Ref_To_Local'>ch</span></a> <span class='Operator'>== </span><span class='String'>'"'</span> <span class='Operator'>|| </span><a href="rowtypes.c.html#LN426"><span class='Ref_To_Local'>ch</span></a> <span class='Operator'>== </span><span class='String'>'\\'</span><span class='Parentheses'>) 
</span>                <a href="../../../include/lib/stringinfo.h.html#LN126"><span class='Ref_to_Macro'>appendStringInfoCharMacro</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rowtypes.c.html#LN312"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN426"><span class='Ref_To_Local'>ch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../../include/lib/stringinfo.h.html#LN126"><span class='Ref_to_Macro'>appendStringInfoCharMacro</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rowtypes.c.html#LN312"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN426"><span class='Ref_To_Local'>ch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN374"><span class='Ref_To_Local'>nq</span></a><span class='Parentheses'>) 
</span>            <a href="../../../include/lib/stringinfo.h.html#LN126"><span class='Ref_to_Macro'>appendStringInfoCharMacro</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rowtypes.c.html#LN312"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'"'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;ncolumns;i++ &raquo; </span> 
 
    <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rowtypes.c.html#LN312"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN310"><span class='Ref_To_Local'>values</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN311"><span class='Ref_To_Local'>nulls</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/access/tupdesc.h.html#LN106"><span class='Ref_to_Macro'>ReleaseTupleDesc</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN304"><span class='Ref_To_Local'>tupdesc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN321"><span class='Ref_to_Macro'>PG_RETURN_CSTRING</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN312"><span class='Ref_To_Local'>buf</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end record_out &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * record_recv      - binary input routine for any composite type. 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN449"></a><span class='Declare_Function'>record_recv</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN451"></a>    <a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a><span class='Parentheses'>) </span><a href="../../../include/fmgr.h.html#LN240"><span class='Ref_to_Macro'>PG_GETARG_POINTER</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN452"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>tupType</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN239"><span class='Ref_to_Macro'>PG_GETARG_OID</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN453"></a>    <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>tupTypmod</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN233"><span class='Ref_to_Macro'>PG_GETARG_INT32</span></a><span class='Parentheses'>(</span><span class='Number'>2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN454"></a>    <a href="../../../include/access/htup.h.html#LN22"><span class='Ref_to_Typedef'>HeapTupleHeader</span></a> <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span><a name="LN455"></a>    <a href="../../../include/access/tupdesc.h.html#LN70"><span class='Ref_to_Typedef'>TupleDesc</span></a>   <span class='Declare_Local'>tupdesc</span><span class='Delimiter'>; 
</span><a name="LN456"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tuple</span><span class='Delimiter'>; 
</span><a name="LN457"></a>    <a href="jsonfuncs.c.html#LN210"><span class='Ref_to_Struct'>RecordIOData</span></a> <span class='Operator'>*</span><span class='Declare_Local'>my_extra</span><span class='Delimiter'>; 
</span><a name="LN458"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ncolumns</span><span class='Delimiter'>; 
</span><a name="LN459"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>usercols</span><span class='Delimiter'>; 
</span><a name="LN460"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>validcols</span><span class='Delimiter'>; 
</span><a name="LN461"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN462"></a>    <a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>values</span><span class='Delimiter'>; 
</span><a name="LN463"></a>    <span class='Keyword'>bool</span>       <span class='Operator'>*</span><span class='Declare_Local'>nulls</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/miscadmin.h.html#LN275"><span class='Ref_to_Proto'>check_stack_depth</span></a><span class='Parentheses'>()</span><span class='Delimiter'>;</span>        <span class='Comment_Single_Line'>/* recurses for record-type columns */ 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Give a friendly error message if we did not get enough info to identify 
     * the target record type.  (lookup_rowtype_tupdesc would fail anyway, but 
     * with a non-user-friendly message.)  In ordinary SQL usage, we'll get -1 
     * for typmod, since composite types and RECORD have no type modifiers at 
     * the SQL level, and thus must fail for RECORD.  However some callers can 
     * supply a valid typmod, and then we can do something useful for RECORD. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN452"><span class='Ref_To_Local'>tupType</span></a> <span class='Operator'>== </span><a href="../../../include/catalog/pg_type.h.html#LN679"><span class='Ref_to_Const'>RECORDOID</span></a> <span class='Operator'>&& </span><a href="rowtypes.c.html#LN453"><span class='Ref_To_Local'>tupTypmod</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_FEATURE_NOT_SUPPORTED<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>           <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"input of anonymous composite types is not implemented"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <a href="rowtypes.c.html#LN455"><span class='Ref_To_Local'>tupdesc</span></a> <span class='Operator'>= </span><a href="../../../include/utils/typcache.h.html#LN151"><span class='Ref_to_Proto'>lookup_rowtype_tupdesc</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN452"><span class='Ref_To_Local'>tupType</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN453"><span class='Ref_To_Local'>tupTypmod</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN458"><span class='Ref_To_Local'>ncolumns</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN455"><span class='Ref_To_Local'>tupdesc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN72"><span class='Ref_to_Member'>natts</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * We arrange to look up the needed I/O info just once per series of 
     * calls, assuming the record type doesn't change underneath us. 
     */ 
</span>    <a href="rowtypes.c.html#LN457"><span class='Ref_To_Local'>my_extra</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="jsonfuncs.c.html#LN210"><span class='Ref_to_Struct'>RecordIOData</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span>fcinfo<span class='Operator'>-&GT;</span>flinfo<span class='Operator'>-&GT;</span>fn_extra<span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN457"><span class='Ref_To_Local'>my_extra</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL </span><span class='Operator'>|| 
</span>        <a href="rowtypes.c.html#LN457"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN45"><span class='Ref_to_Member'>ncolumns</span></a> <span class='Operator'>!= </span><a href="rowtypes.c.html#LN458"><span class='Ref_To_Local'>ncolumns</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        fcinfo<span class='Operator'>-&GT;</span>flinfo<span class='Operator'>-&GT;</span>fn_extra <span class='Operator'>= 
</span>            <a href="../../../include/utils/palloc.h.html#LN70"><span class='Ref_to_Proto'>MemoryContextAlloc</span></a><span class='Parentheses'>(</span>fcinfo<span class='Operator'>-&GT;</span>flinfo<span class='Operator'>-&GT;</span>fn_mcxt<span class='Delimiter'>, 
</span>                               <a href="../../../include/c.h.html#LN554"><span class='Ref_to_Macro'>offsetof</span></a><span class='Parentheses'>(</span><a href="jsonfuncs.c.html#LN210"><span class='Ref_to_Struct'>RecordIOData</span></a><span class='Delimiter'>, </span>columns<span class='Parentheses'>) </span><span class='Operator'>+ 
</span>                               <a href="rowtypes.c.html#LN458"><span class='Ref_To_Local'>ncolumns</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="jsonfuncs.c.html#LN193"><span class='Ref_to_Struct'>ColumnIOData</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN457"><span class='Ref_To_Local'>my_extra</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="jsonfuncs.c.html#LN210"><span class='Ref_to_Struct'>RecordIOData</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span>fcinfo<span class='Operator'>-&GT;</span>flinfo<span class='Operator'>-&GT;</span>fn_extra<span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN457"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN43"><span class='Ref_to_Member'>record_type</span></a> <span class='Operator'>= </span><a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN457"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN44"><span class='Ref_to_Member'>record_typmod</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN457"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN43"><span class='Ref_to_Member'>record_type</span></a> <span class='Operator'>!= </span><a href="rowtypes.c.html#LN452"><span class='Ref_To_Local'>tupType</span></a> <span class='Operator'>|| 
</span>        <a href="rowtypes.c.html#LN457"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN44"><span class='Ref_to_Member'>record_typmod</span></a> <span class='Operator'>!= </span><a href="rowtypes.c.html#LN453"><span class='Ref_To_Local'>tupTypmod</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../../include/c.h.html#LN856"><span class='Ref_to_Macro'>MemSet</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN457"><span class='Ref_To_Local'>my_extra</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>               <a href="../../../include/c.h.html#LN554"><span class='Ref_to_Macro'>offsetof</span></a><span class='Parentheses'>(</span><a href="jsonfuncs.c.html#LN210"><span class='Ref_to_Struct'>RecordIOData</span></a><span class='Delimiter'>, </span>columns<span class='Parentheses'>) </span><span class='Operator'>+ 
</span>               <a href="rowtypes.c.html#LN458"><span class='Ref_To_Local'>ncolumns</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="jsonfuncs.c.html#LN193"><span class='Ref_to_Struct'>ColumnIOData</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN457"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN43"><span class='Ref_to_Member'>record_type</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN452"><span class='Ref_To_Local'>tupType</span></a><span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN457"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN44"><span class='Ref_to_Member'>record_typmod</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN453"><span class='Ref_To_Local'>tupTypmod</span></a><span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN457"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN45"><span class='Ref_to_Member'>ncolumns</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN458"><span class='Ref_To_Local'>ncolumns</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="rowtypes.c.html#LN462"><span class='Ref_To_Local'>values</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN458"><span class='Ref_To_Local'>ncolumns</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN463"><span class='Ref_To_Local'>nulls</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN458"><span class='Ref_To_Local'>ncolumns</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>bool</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Fetch number of columns user thinks it has */ 
</span>    <a href="rowtypes.c.html#LN459"><span class='Ref_To_Local'>usercols</span></a> <span class='Operator'>= </span><a href="../../../include/libpq/pqformat.h.html#LN38"><span class='Ref_to_Proto'>pq_getmsgint</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN451"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='Number'>4</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Need to scan to count nondeleted columns */ 
</span>    <a href="rowtypes.c.html#LN460"><span class='Ref_To_Local'>validcols</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN461"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="rowtypes.c.html#LN461"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="rowtypes.c.html#LN458"><span class='Ref_To_Local'>ncolumns</span></a><span class='Delimiter'>; </span><a href="rowtypes.c.html#LN461"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="rowtypes.c.html#LN455"><span class='Ref_To_Local'>tupdesc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN461"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attisdropped<span class='Parentheses'>) 
</span>            <a href="rowtypes.c.html#LN460"><span class='Ref_To_Local'>validcols</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN459"><span class='Ref_To_Local'>usercols</span></a> <span class='Operator'>!= </span><a href="rowtypes.c.html#LN460"><span class='Ref_To_Local'>validcols</span></a><span class='Parentheses'>) 
</span>        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_DATATYPE_MISMATCH<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"wrong number of columns: %d, expected %d"</span><span class='Delimiter'>, 
</span>                        <a href="rowtypes.c.html#LN459"><span class='Ref_To_Local'>usercols</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN460"><span class='Ref_To_Local'>validcols</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Process each column */ 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN461"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="rowtypes.c.html#LN461"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="rowtypes.c.html#LN458"><span class='Ref_To_Local'>ncolumns</span></a><span class='Delimiter'>; </span><a href="rowtypes.c.html#LN461"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN533"></a>        <a href="jsonfuncs.c.html#LN193"><span class='Ref_to_Struct'>ColumnIOData</span></a> <span class='Operator'>*</span><span class='Declare_Local'>column_info</span> <span class='Operator'>= &</span><a href="rowtypes.c.html#LN457"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN46"><span class='Ref_to_Member'>columns</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN461"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span><a name="LN534"></a>        <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>column_type</span> <span class='Operator'>= </span><a href="rowtypes.c.html#LN455"><span class='Ref_To_Local'>tupdesc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN461"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>atttypid<span class='Delimiter'>; 
</span><a name="LN535"></a>        <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>coltypoid</span><span class='Delimiter'>; 
</span><a name="LN536"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>itemlen</span><span class='Delimiter'>; 
</span><a name="LN537"></a>        <a href="../../../include/lib/stringinfo.h.html#LN34"><span class='Ref_to_Struct'>StringInfoData</span></a> <span class='Declare_Local'>item_buf</span><span class='Delimiter'>; 
</span><a name="LN538"></a>        <a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>bufptr</span><span class='Delimiter'>; 
</span><a name="LN539"></a>        <span class='Keyword'>char</span>        <span class='Declare_Local'>csave</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Ignore dropped columns in datatype, but fill with nulls */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN455"><span class='Ref_To_Local'>tupdesc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN461"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attisdropped<span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="rowtypes.c.html#LN462"><span class='Ref_To_Local'>values</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN461"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a><span class='Parentheses'>) </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>            <a href="rowtypes.c.html#LN463"><span class='Ref_To_Local'>nulls</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN461"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Comment_Multi_Line'>/* Verify column datatype */ 
</span>        <a href="rowtypes.c.html#LN535"><span class='Ref_To_Local'>coltypoid</span></a> <span class='Operator'>= </span><a href="../../../include/libpq/pqformat.h.html#LN38"><span class='Ref_to_Proto'>pq_getmsgint</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN451"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN535"><span class='Ref_To_Local'>coltypoid</span></a> <span class='Operator'>!= </span><a href="rowtypes.c.html#LN534"><span class='Ref_To_Local'>column_type</span></a><span class='Parentheses'>) 
</span>            <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_DATATYPE_MISMATCH<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"wrong data type: %u, expected %u"</span><span class='Delimiter'>, 
</span>                            <a href="rowtypes.c.html#LN535"><span class='Ref_To_Local'>coltypoid</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN534"><span class='Ref_To_Local'>column_type</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Get and check the item length */ 
</span>        <a href="rowtypes.c.html#LN536"><span class='Ref_To_Local'>itemlen</span></a> <span class='Operator'>= </span><a href="../../../include/libpq/pqformat.h.html#LN38"><span class='Ref_to_Proto'>pq_getmsgint</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN451"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='Number'>4</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN536"><span class='Ref_To_Local'>itemlen</span></a> <span class='Operator'>&LT; -</span><span class='Number'>1</span> <span class='Operator'>|| </span><a href="rowtypes.c.html#LN536"><span class='Ref_To_Local'>itemlen</span></a> <span class='Operator'>&GT; </span><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN451"><span class='Ref_To_Local'>buf</span></a><span class='Operator'>-&GT;</span><a href="../../../include/lib/stringinfo.h.html#LN37"><span class='Ref_to_Member'>len</span></a> <span class='Operator'>- </span><a href="rowtypes.c.html#LN451"><span class='Ref_To_Local'>buf</span></a><span class='Operator'>-&GT;</span><a href="../../../include/lib/stringinfo.h.html#LN39"><span class='Ref_to_Member'>cursor</span></a><span class='Parentheses'>))</span> 
            <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INVALID_BINARY_REPRESENTATION<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"insufficient data left in message"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN536"><span class='Ref_To_Local'>itemlen</span></a> <span class='Operator'>== -</span><span class='Number'>1</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* -1 length means NULL */ 
</span>            <a href="rowtypes.c.html#LN538"><span class='Ref_To_Local'>bufptr</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>            <a href="rowtypes.c.html#LN463"><span class='Ref_To_Local'>nulls</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN461"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>            <a href="rowtypes.c.html#LN539"><span class='Ref_To_Local'>csave</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>;</span>          <span class='Comment_Single_Line'>/* keep compiler quiet */ 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * Rather than copying data around, we just set up a phony 
             * StringInfo pointing to the correct portion of the input buffer. 
             * We assume we can scribble on the input buffer so as to maintain 
             * the convention that StringInfos have a trailing null. 
             */ 
</span>            <a href="rowtypes.c.html#LN537"><span class='Ref_To_Local'>item_buf</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a> <span class='Operator'>= &</span><a href="rowtypes.c.html#LN451"><span class='Ref_To_Local'>buf</span></a><span class='Operator'>-&GT;</span><a href="../../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN451"><span class='Ref_To_Local'>buf</span></a><span class='Operator'>-&GT;</span><a href="../../../include/lib/stringinfo.h.html#LN39"><span class='Ref_to_Member'>cursor</span></a><span class='Delimiter'>]; 
</span>            <a href="rowtypes.c.html#LN537"><span class='Ref_To_Local'>item_buf</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN38"><span class='Ref_to_Member'>maxlen</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN536"><span class='Ref_To_Local'>itemlen</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>            <a href="rowtypes.c.html#LN537"><span class='Ref_To_Local'>item_buf</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN37"><span class='Ref_to_Member'>len</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN536"><span class='Ref_To_Local'>itemlen</span></a><span class='Delimiter'>; 
</span>            <a href="rowtypes.c.html#LN537"><span class='Ref_To_Local'>item_buf</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN39"><span class='Ref_to_Member'>cursor</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
            <a href="rowtypes.c.html#LN451"><span class='Ref_To_Local'>buf</span></a><span class='Operator'>-&GT;</span><a href="../../../include/lib/stringinfo.h.html#LN39"><span class='Ref_to_Member'>cursor</span></a> <span class='Operator'>+= </span><a href="rowtypes.c.html#LN536"><span class='Ref_To_Local'>itemlen</span></a><span class='Delimiter'>; 
</span> 
            <a href="rowtypes.c.html#LN539"><span class='Ref_To_Local'>csave</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN451"><span class='Ref_To_Local'>buf</span></a><span class='Operator'>-&GT;</span><a href="../../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN451"><span class='Ref_To_Local'>buf</span></a><span class='Operator'>-&GT;</span><a href="../../../include/lib/stringinfo.h.html#LN39"><span class='Ref_to_Member'>cursor</span></a><span class='Delimiter'>]; 
</span>            <a href="rowtypes.c.html#LN451"><span class='Ref_To_Local'>buf</span></a><span class='Operator'>-&GT;</span><a href="../../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN451"><span class='Ref_To_Local'>buf</span></a><span class='Operator'>-&GT;</span><a href="../../../include/lib/stringinfo.h.html#LN39"><span class='Ref_to_Member'>cursor</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span> 
            <a href="rowtypes.c.html#LN538"><span class='Ref_To_Local'>bufptr</span></a> <span class='Operator'>= &</span><a href="rowtypes.c.html#LN537"><span class='Ref_To_Local'>item_buf</span></a><span class='Delimiter'>; 
</span>            <a href="rowtypes.c.html#LN463"><span class='Ref_To_Local'>nulls</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN461"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
 
        <span class='Comment_Multi_Line'>/* Now call the column's receiveproc */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN533"><span class='Ref_To_Local'>column_info</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN34"><span class='Ref_to_Member'>column_type</span></a> <span class='Operator'>!= </span><a href="rowtypes.c.html#LN534"><span class='Ref_To_Local'>column_type</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="../../../include/utils/lsyscache.h.html#LN163"><span class='Ref_to_Proto'>getTypeBinaryInputInfo</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN534"><span class='Ref_To_Local'>column_type</span></a><span class='Delimiter'>, 
</span>                                   <span class='Operator'>&</span><a href="rowtypes.c.html#LN533"><span class='Ref_To_Local'>column_info</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN35"><span class='Ref_to_Member'>typiofunc</span></a><span class='Delimiter'>, 
</span>                                   <span class='Operator'>&</span><a href="rowtypes.c.html#LN533"><span class='Ref_To_Local'>column_info</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN36"><span class='Ref_to_Member'>typioparam</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../../include/fmgr.h.html#LN99"><span class='Ref_to_Proto'>fmgr_info_cxt</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN533"><span class='Ref_To_Local'>column_info</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN35"><span class='Ref_to_Member'>typiofunc</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rowtypes.c.html#LN533"><span class='Ref_To_Local'>column_info</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN38"><span class='Ref_to_Member'>proc</span></a><span class='Delimiter'>, 
</span>                          fcinfo<span class='Operator'>-&GT;</span>flinfo<span class='Operator'>-&GT;</span>fn_mcxt<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="rowtypes.c.html#LN533"><span class='Ref_To_Local'>column_info</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN34"><span class='Ref_to_Member'>column_type</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN534"><span class='Ref_To_Local'>column_type</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <a href="rowtypes.c.html#LN462"><span class='Ref_To_Local'>values</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN461"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN648"><span class='Ref_to_Proto'>ReceiveFunctionCall</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rowtypes.c.html#LN533"><span class='Ref_To_Local'>column_info</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN38"><span class='Ref_to_Member'>proc</span></a><span class='Delimiter'>, 
</span>                                        <a href="rowtypes.c.html#LN538"><span class='Ref_To_Local'>bufptr</span></a><span class='Delimiter'>, 
</span>                                        <a href="rowtypes.c.html#LN533"><span class='Ref_To_Local'>column_info</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN36"><span class='Ref_to_Member'>typioparam</span></a><span class='Delimiter'>, 
</span>                                        <a href="rowtypes.c.html#LN455"><span class='Ref_To_Local'>tupdesc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN461"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>atttypmod<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN538"><span class='Ref_To_Local'>bufptr</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* Trouble if it didn't eat the whole buffer */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN537"><span class='Ref_To_Local'>item_buf</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN39"><span class='Ref_to_Member'>cursor</span></a> <span class='Operator'>!= </span><a href="rowtypes.c.html#LN536"><span class='Ref_To_Local'>itemlen</span></a><span class='Parentheses'>) 
</span>                <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INVALID_BINARY_REPRESENTATION<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"improper binary format in record column %d"</span><span class='Delimiter'>, 
</span>                                <a href="rowtypes.c.html#LN461"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
            <a href="rowtypes.c.html#LN451"><span class='Ref_To_Local'>buf</span></a><span class='Operator'>-&GT;</span><a href="../../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN451"><span class='Ref_To_Local'>buf</span></a><span class='Operator'>-&GT;</span><a href="../../../include/lib/stringinfo.h.html#LN39"><span class='Ref_to_Member'>cursor</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="rowtypes.c.html#LN539"><span class='Ref_To_Local'>csave</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;ncolumns;i++ &raquo; </span> 
 
    <a href="rowtypes.c.html#LN456"><span class='Ref_To_Local'>tuple</span></a> <span class='Operator'>= </span><a href="../../access/common/heaptuple.c.html#LN690"><span class='Ref_to_Func'>heap_form_tuple</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN455"><span class='Ref_To_Local'>tupdesc</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN462"><span class='Ref_To_Local'>values</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN463"><span class='Ref_To_Local'>nulls</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * We cannot return tuple-&GT;t_data because heap_form_tuple allocates it as 
     * part of a larger chunk, and our caller may expect to be able to pfree 
     * our result.  So must copy the info into a new palloc chunk. 
     */ 
</span>    <a href="rowtypes.c.html#LN454"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/access/htup.h.html#LN22"><span class='Ref_to_Typedef'>HeapTupleHeader</span></a><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN456"><span class='Ref_To_Local'>tuple</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/htup.h.html#LN63"><span class='Ref_to_Member'>t_len</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    memcpy<span class='Parentheses'>(</span><a href="rowtypes.c.html#LN454"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN456"><span class='Ref_To_Local'>tuple</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/htup.h.html#LN66"><span class='Ref_to_Member'>t_data</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN456"><span class='Ref_To_Local'>tuple</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/htup.h.html#LN63"><span class='Ref_to_Member'>t_len</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/access/htup_details.h.html#LN815"><span class='Ref_to_Proto'>heap_freetuple</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN456"><span class='Ref_To_Local'>tuple</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN462"><span class='Ref_To_Local'>values</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN463"><span class='Ref_To_Local'>nulls</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/access/tupdesc.h.html#LN106"><span class='Ref_to_Macro'>ReleaseTupleDesc</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN455"><span class='Ref_To_Local'>tupdesc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN332"><span class='Ref_to_Macro'>PG_RETURN_HEAPTUPLEHEADER</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN454"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end record_recv &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * record_send      - binary output routine for any composite type. 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN644"></a><span class='Declare_Function'>record_send</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN646"></a>    <a href="../../../include/access/htup.h.html#LN22"><span class='Ref_to_Typedef'>HeapTupleHeader</span></a> <span class='Declare_Local'>rec</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN275"><span class='Ref_to_Macro'>PG_GETARG_HEAPTUPLEHEADER</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN647"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>tupType</span><span class='Delimiter'>; 
</span><a name="LN648"></a>    <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>tupTypmod</span><span class='Delimiter'>; 
</span><a name="LN649"></a>    <a href="../../../include/access/tupdesc.h.html#LN70"><span class='Ref_to_Typedef'>TupleDesc</span></a>   <span class='Declare_Local'>tupdesc</span><span class='Delimiter'>; 
</span><a name="LN650"></a>    <a href="../../../include/access/htup.h.html#LN61"><span class='Ref_to_Struct'>HeapTupleData</span></a> <span class='Declare_Local'>tuple</span><span class='Delimiter'>; 
</span><a name="LN651"></a>    <a href="jsonfuncs.c.html#LN210"><span class='Ref_to_Struct'>RecordIOData</span></a> <span class='Operator'>*</span><span class='Declare_Local'>my_extra</span><span class='Delimiter'>; 
</span><a name="LN652"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ncolumns</span><span class='Delimiter'>; 
</span><a name="LN653"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>validcols</span><span class='Delimiter'>; 
</span><a name="LN654"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN655"></a>    <a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>values</span><span class='Delimiter'>; 
</span><a name="LN656"></a>    <span class='Keyword'>bool</span>       <span class='Operator'>*</span><span class='Declare_Local'>nulls</span><span class='Delimiter'>; 
</span><a name="LN657"></a>    <a href="../../../include/lib/stringinfo.h.html#LN34"><span class='Ref_to_Struct'>StringInfoData</span></a> <span class='Declare_Local'>buf</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/miscadmin.h.html#LN275"><span class='Ref_to_Proto'>check_stack_depth</span></a><span class='Parentheses'>()</span><span class='Delimiter'>;</span>        <span class='Comment_Single_Line'>/* recurses for record-type columns */ 
</span> 
    <span class='Comment_Multi_Line'>/* Extract type info from the tuple itself */ 
</span>    <a href="rowtypes.c.html#LN647"><span class='Ref_To_Local'>tupType</span></a> <span class='Operator'>= </span><a href="../../../include/access/htup_details.h.html#LN444"><span class='Ref_to_Macro'>HeapTupleHeaderGetTypeId</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN646"><span class='Ref_To_Local'>rec</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN648"><span class='Ref_To_Local'>tupTypmod</span></a> <span class='Operator'>= </span><a href="../../../include/access/htup_details.h.html#LN454"><span class='Ref_to_Macro'>HeapTupleHeaderGetTypMod</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN646"><span class='Ref_To_Local'>rec</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN649"><span class='Ref_To_Local'>tupdesc</span></a> <span class='Operator'>= </span><a href="../../../include/utils/typcache.h.html#LN151"><span class='Ref_to_Proto'>lookup_rowtype_tupdesc</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN647"><span class='Ref_To_Local'>tupType</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN648"><span class='Ref_To_Local'>tupTypmod</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN652"><span class='Ref_To_Local'>ncolumns</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN649"><span class='Ref_To_Local'>tupdesc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN72"><span class='Ref_to_Member'>natts</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Build a temporary HeapTuple control structure */ 
</span>    <a href="rowtypes.c.html#LN650"><span class='Ref_To_Local'>tuple</span></a><span class='Operator'>.</span><a href="../../../include/access/htup.h.html#LN63"><span class='Ref_to_Member'>t_len</span></a> <span class='Operator'>= </span><a href="../../../include/access/htup_details.h.html#LN438"><span class='Ref_to_Macro'>HeapTupleHeaderGetDatumLength</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN646"><span class='Ref_To_Local'>rec</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/storage/itemptr.h.html#LN148"><span class='Ref_to_Macro'>ItemPointerSetInvalid</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN650"><span class='Ref_To_Local'>tuple</span></a><span class='Operator'>.</span><a href="../../../include/access/htup.h.html#LN64"><span class='Ref_to_Member'>t_self</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN650"><span class='Ref_To_Local'>tuple</span></a><span class='Operator'>.</span><a href="../../../include/access/htup.h.html#LN65"><span class='Ref_to_Member'>t_tableOid</span></a> <span class='Operator'>= </span><a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN650"><span class='Ref_To_Local'>tuple</span></a><span class='Operator'>.</span><a href="../../../include/access/htup.h.html#LN66"><span class='Ref_to_Member'>t_data</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN646"><span class='Ref_To_Local'>rec</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * We arrange to look up the needed I/O info just once per series of 
     * calls, assuming the record type doesn't change underneath us. 
     */ 
</span>    <a href="rowtypes.c.html#LN651"><span class='Ref_To_Local'>my_extra</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="jsonfuncs.c.html#LN210"><span class='Ref_to_Struct'>RecordIOData</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span>fcinfo<span class='Operator'>-&GT;</span>flinfo<span class='Operator'>-&GT;</span>fn_extra<span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN651"><span class='Ref_To_Local'>my_extra</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL </span><span class='Operator'>|| 
</span>        <a href="rowtypes.c.html#LN651"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN45"><span class='Ref_to_Member'>ncolumns</span></a> <span class='Operator'>!= </span><a href="rowtypes.c.html#LN652"><span class='Ref_To_Local'>ncolumns</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        fcinfo<span class='Operator'>-&GT;</span>flinfo<span class='Operator'>-&GT;</span>fn_extra <span class='Operator'>= 
</span>            <a href="../../../include/utils/palloc.h.html#LN70"><span class='Ref_to_Proto'>MemoryContextAlloc</span></a><span class='Parentheses'>(</span>fcinfo<span class='Operator'>-&GT;</span>flinfo<span class='Operator'>-&GT;</span>fn_mcxt<span class='Delimiter'>, 
</span>                               <a href="../../../include/c.h.html#LN554"><span class='Ref_to_Macro'>offsetof</span></a><span class='Parentheses'>(</span><a href="jsonfuncs.c.html#LN210"><span class='Ref_to_Struct'>RecordIOData</span></a><span class='Delimiter'>, </span>columns<span class='Parentheses'>) </span><span class='Operator'>+ 
</span>                               <a href="rowtypes.c.html#LN652"><span class='Ref_To_Local'>ncolumns</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="jsonfuncs.c.html#LN193"><span class='Ref_to_Struct'>ColumnIOData</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN651"><span class='Ref_To_Local'>my_extra</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="jsonfuncs.c.html#LN210"><span class='Ref_to_Struct'>RecordIOData</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span>fcinfo<span class='Operator'>-&GT;</span>flinfo<span class='Operator'>-&GT;</span>fn_extra<span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN651"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN43"><span class='Ref_to_Member'>record_type</span></a> <span class='Operator'>= </span><a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN651"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN44"><span class='Ref_to_Member'>record_typmod</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN651"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN43"><span class='Ref_to_Member'>record_type</span></a> <span class='Operator'>!= </span><a href="rowtypes.c.html#LN647"><span class='Ref_To_Local'>tupType</span></a> <span class='Operator'>|| 
</span>        <a href="rowtypes.c.html#LN651"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN44"><span class='Ref_to_Member'>record_typmod</span></a> <span class='Operator'>!= </span><a href="rowtypes.c.html#LN648"><span class='Ref_To_Local'>tupTypmod</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../../include/c.h.html#LN856"><span class='Ref_to_Macro'>MemSet</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN651"><span class='Ref_To_Local'>my_extra</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>               <a href="../../../include/c.h.html#LN554"><span class='Ref_to_Macro'>offsetof</span></a><span class='Parentheses'>(</span><a href="jsonfuncs.c.html#LN210"><span class='Ref_to_Struct'>RecordIOData</span></a><span class='Delimiter'>, </span>columns<span class='Parentheses'>) </span><span class='Operator'>+ 
</span>               <a href="rowtypes.c.html#LN652"><span class='Ref_To_Local'>ncolumns</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="jsonfuncs.c.html#LN193"><span class='Ref_to_Struct'>ColumnIOData</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN651"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN43"><span class='Ref_to_Member'>record_type</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN647"><span class='Ref_To_Local'>tupType</span></a><span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN651"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN44"><span class='Ref_to_Member'>record_typmod</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN648"><span class='Ref_To_Local'>tupTypmod</span></a><span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN651"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN45"><span class='Ref_to_Member'>ncolumns</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN652"><span class='Ref_To_Local'>ncolumns</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="rowtypes.c.html#LN655"><span class='Ref_To_Local'>values</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN652"><span class='Ref_To_Local'>ncolumns</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN656"><span class='Ref_To_Local'>nulls</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN652"><span class='Ref_To_Local'>ncolumns</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>bool</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Break down the tuple into fields */ 
</span>    <a href="../../../include/access/htup_details.h.html#LN813"><span class='Ref_to_Proto'>heap_deform_tuple</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rowtypes.c.html#LN650"><span class='Ref_To_Local'>tuple</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN649"><span class='Ref_To_Local'>tupdesc</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN655"><span class='Ref_To_Local'>values</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN656"><span class='Ref_To_Local'>nulls</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* And build the result string */ 
</span>    <a href="../../../include/libpq/pqformat.h.html#LN31"><span class='Ref_to_Proto'>pq_begintypsend</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rowtypes.c.html#LN657"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Need to scan to count nondeleted columns */ 
</span>    <a href="rowtypes.c.html#LN653"><span class='Ref_To_Local'>validcols</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN654"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="rowtypes.c.html#LN654"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="rowtypes.c.html#LN652"><span class='Ref_To_Local'>ncolumns</span></a><span class='Delimiter'>; </span><a href="rowtypes.c.html#LN654"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="rowtypes.c.html#LN649"><span class='Ref_To_Local'>tupdesc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN654"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attisdropped<span class='Parentheses'>) 
</span>            <a href="rowtypes.c.html#LN653"><span class='Ref_To_Local'>validcols</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="../../../include/libpq/pqformat.h.html#LN25"><span class='Ref_to_Proto'>pq_sendint</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rowtypes.c.html#LN657"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN653"><span class='Ref_To_Local'>validcols</span></a><span class='Delimiter'>, </span><span class='Number'>4</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN654"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="rowtypes.c.html#LN654"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="rowtypes.c.html#LN652"><span class='Ref_To_Local'>ncolumns</span></a><span class='Delimiter'>; </span><a href="rowtypes.c.html#LN654"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN721"></a>        <a href="jsonfuncs.c.html#LN193"><span class='Ref_to_Struct'>ColumnIOData</span></a> <span class='Operator'>*</span><span class='Declare_Local'>column_info</span> <span class='Operator'>= &</span><a href="rowtypes.c.html#LN651"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN46"><span class='Ref_to_Member'>columns</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN654"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span><a name="LN722"></a>        <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>column_type</span> <span class='Operator'>= </span><a href="rowtypes.c.html#LN649"><span class='Ref_To_Local'>tupdesc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN654"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>atttypid<span class='Delimiter'>; 
</span><a name="LN723"></a>        <a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>       <span class='Declare_Local'>attr</span><span class='Delimiter'>; 
</span><a name="LN724"></a>        <a href="../../../include/c.h.html#LN451"><span class='Ref_to_Typedef'>bytea</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>outputbytes</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Ignore dropped columns in datatype */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN649"><span class='Ref_To_Local'>tupdesc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN654"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attisdropped<span class='Parentheses'>) 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
        <a href="../../../include/libpq/pqformat.h.html#LN25"><span class='Ref_to_Proto'>pq_sendint</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rowtypes.c.html#LN657"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN722"><span class='Ref_To_Local'>column_type</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN656"><span class='Ref_To_Local'>nulls</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN654"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* emit -1 data length to signify a NULL */ 
</span>            <a href="../../../include/libpq/pqformat.h.html#LN25"><span class='Ref_to_Proto'>pq_sendint</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rowtypes.c.html#LN657"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Number'>4</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Convert the column value to binary 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN721"><span class='Ref_To_Local'>column_info</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN34"><span class='Ref_to_Member'>column_type</span></a> <span class='Operator'>!= </span><a href="rowtypes.c.html#LN722"><span class='Ref_To_Local'>column_type</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="../../../include/utils/lsyscache.h.html#LN164"><span class='Ref_to_Proto'>getTypeBinaryOutputInfo</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN722"><span class='Ref_To_Local'>column_type</span></a><span class='Delimiter'>, 
</span>                                    <span class='Operator'>&</span><a href="rowtypes.c.html#LN721"><span class='Ref_To_Local'>column_info</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN35"><span class='Ref_to_Member'>typiofunc</span></a><span class='Delimiter'>, 
</span>                                    <span class='Operator'>&</span><a href="rowtypes.c.html#LN721"><span class='Ref_To_Local'>column_info</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN37"><span class='Ref_to_Member'>typisvarlena</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../../include/fmgr.h.html#LN99"><span class='Ref_to_Proto'>fmgr_info_cxt</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN721"><span class='Ref_To_Local'>column_info</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN35"><span class='Ref_to_Member'>typiofunc</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rowtypes.c.html#LN721"><span class='Ref_To_Local'>column_info</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN38"><span class='Ref_to_Member'>proc</span></a><span class='Delimiter'>, 
</span>                          fcinfo<span class='Operator'>-&GT;</span>flinfo<span class='Operator'>-&GT;</span>fn_mcxt<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="rowtypes.c.html#LN721"><span class='Ref_To_Local'>column_info</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN34"><span class='Ref_to_Member'>column_type</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN722"><span class='Ref_To_Local'>column_type</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <a href="rowtypes.c.html#LN723"><span class='Ref_To_Local'>attr</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN655"><span class='Ref_To_Local'>values</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN654"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span>        <a href="rowtypes.c.html#LN724"><span class='Ref_To_Local'>outputbytes</span></a> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN652"><span class='Ref_to_Proto'>SendFunctionCall</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rowtypes.c.html#LN721"><span class='Ref_To_Local'>column_info</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN38"><span class='Ref_to_Member'>proc</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN723"><span class='Ref_To_Local'>attr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../../include/libpq/pqformat.h.html#LN25"><span class='Ref_to_Proto'>pq_sendint</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rowtypes.c.html#LN657"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN303"><span class='Ref_to_Macro'>VARSIZE</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN724"><span class='Ref_To_Local'>outputbytes</span></a><span class='Parentheses'>) </span><span class='Operator'>- </span><a href="../../../include/c.h.html#LN444"><span class='Ref_to_Const'>VARHDRSZ</span></a><span class='Delimiter'>, </span><span class='Number'>4</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../../include/libpq/pqformat.h.html#LN19"><span class='Ref_to_Proto'>pq_sendbytes</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rowtypes.c.html#LN657"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN302"><span class='Ref_to_Macro'>VARDATA</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN724"><span class='Ref_To_Local'>outputbytes</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../../../include/postgres.h.html#LN303"><span class='Ref_to_Macro'>VARSIZE</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN724"><span class='Ref_To_Local'>outputbytes</span></a><span class='Parentheses'>) </span><span class='Operator'>- </span><a href="../../../include/c.h.html#LN444"><span class='Ref_to_Const'>VARHDRSZ</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;ncolumns;i++ &raquo; </span> 
 
    <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN655"><span class='Ref_To_Local'>values</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN656"><span class='Ref_To_Local'>nulls</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/access/tupdesc.h.html#LN106"><span class='Ref_to_Macro'>ReleaseTupleDesc</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN649"><span class='Ref_To_Local'>tupdesc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN328"><span class='Ref_to_Macro'>PG_RETURN_BYTEA_P</span></a><span class='Parentheses'>(</span><a href="../../../include/libpq/pqformat.h.html#LN32"><span class='Ref_to_Proto'>pq_endtypsend</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rowtypes.c.html#LN657"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end record_send &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* 
 * record_cmp() 
 * Internal comparison function for records. 
 * 
 * Returns -1, 0 or 1 
 * 
 * Do not assume that the two inputs are exactly the same record type; 
 * for instance we might be comparing an anonymous ROW() construct against a 
 * named composite type.  We will compare as long as they have the same number 
 * of non-dropped columns of the same types. 
 */ 
</span><span class='Keyword'>static int 
</span><a name="LN779"></a><span class='Declare_Function'>record_cmp</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN37"><span class='Ref_to_Typedef'>FunctionCallInfo</span></a> <span class='Declare_Parameter'>fcinfo</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN781"></a>    <a href="../../../include/access/htup.h.html#LN22"><span class='Ref_to_Typedef'>HeapTupleHeader</span></a> <span class='Declare_Local'>record1</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN275"><span class='Ref_to_Macro'>PG_GETARG_HEAPTUPLEHEADER</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN782"></a>    <a href="../../../include/access/htup.h.html#LN22"><span class='Ref_to_Typedef'>HeapTupleHeader</span></a> <span class='Declare_Local'>record2</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN275"><span class='Ref_to_Macro'>PG_GETARG_HEAPTUPLEHEADER</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN783"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>result</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN784"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>tupType1</span><span class='Delimiter'>; 
</span><a name="LN785"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>tupType2</span><span class='Delimiter'>; 
</span><a name="LN786"></a>    <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>tupTypmod1</span><span class='Delimiter'>; 
</span><a name="LN787"></a>    <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>tupTypmod2</span><span class='Delimiter'>; 
</span><a name="LN788"></a>    <a href="../../../include/access/tupdesc.h.html#LN70"><span class='Ref_to_Typedef'>TupleDesc</span></a>   <span class='Declare_Local'>tupdesc1</span><span class='Delimiter'>; 
</span><a name="LN789"></a>    <a href="../../../include/access/tupdesc.h.html#LN70"><span class='Ref_to_Typedef'>TupleDesc</span></a>   <span class='Declare_Local'>tupdesc2</span><span class='Delimiter'>; 
</span><a name="LN790"></a>    <a href="../../../include/access/htup.h.html#LN61"><span class='Ref_to_Struct'>HeapTupleData</span></a> <span class='Declare_Local'>tuple1</span><span class='Delimiter'>; 
</span><a name="LN791"></a>    <a href="../../../include/access/htup.h.html#LN61"><span class='Ref_to_Struct'>HeapTupleData</span></a> <span class='Declare_Local'>tuple2</span><span class='Delimiter'>; 
</span><a name="LN792"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ncolumns1</span><span class='Delimiter'>; 
</span><a name="LN793"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ncolumns2</span><span class='Delimiter'>; 
</span><a name="LN794"></a>    <a href="rowtypes.c.html#LN57"><span class='Ref_to_Struct'>RecordCompareData</span></a> <span class='Operator'>*</span><span class='Declare_Local'>my_extra</span><span class='Delimiter'>; 
</span><a name="LN795"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ncols</span><span class='Delimiter'>; 
</span><a name="LN796"></a>    <a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>values1</span><span class='Delimiter'>; 
</span><a name="LN797"></a>    <a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>values2</span><span class='Delimiter'>; 
</span><a name="LN798"></a>    <span class='Keyword'>bool</span>       <span class='Operator'>*</span><span class='Declare_Local'>nulls1</span><span class='Delimiter'>; 
</span><a name="LN799"></a>    <span class='Keyword'>bool</span>       <span class='Operator'>*</span><span class='Declare_Local'>nulls2</span><span class='Delimiter'>; 
</span><a name="LN800"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i1</span><span class='Delimiter'>; 
</span><a name="LN801"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i2</span><span class='Delimiter'>; 
</span><a name="LN802"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>j</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/miscadmin.h.html#LN275"><span class='Ref_to_Proto'>check_stack_depth</span></a><span class='Parentheses'>()</span><span class='Delimiter'>;</span>        <span class='Comment_Single_Line'>/* recurses for record-type columns */ 
</span> 
    <span class='Comment_Multi_Line'>/* Extract type info from the tuples */ 
</span>    <a href="rowtypes.c.html#LN784"><span class='Ref_To_Local'>tupType1</span></a> <span class='Operator'>= </span><a href="../../../include/access/htup_details.h.html#LN444"><span class='Ref_to_Macro'>HeapTupleHeaderGetTypeId</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN781"><span class='Ref_To_Local'>record1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN786"><span class='Ref_To_Local'>tupTypmod1</span></a> <span class='Operator'>= </span><a href="../../../include/access/htup_details.h.html#LN454"><span class='Ref_to_Macro'>HeapTupleHeaderGetTypMod</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN781"><span class='Ref_To_Local'>record1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN788"><span class='Ref_To_Local'>tupdesc1</span></a> <span class='Operator'>= </span><a href="../../../include/utils/typcache.h.html#LN151"><span class='Ref_to_Proto'>lookup_rowtype_tupdesc</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN784"><span class='Ref_To_Local'>tupType1</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN786"><span class='Ref_To_Local'>tupTypmod1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN792"><span class='Ref_To_Local'>ncolumns1</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN788"><span class='Ref_To_Local'>tupdesc1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN72"><span class='Ref_to_Member'>natts</span></a><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN785"><span class='Ref_To_Local'>tupType2</span></a> <span class='Operator'>= </span><a href="../../../include/access/htup_details.h.html#LN444"><span class='Ref_to_Macro'>HeapTupleHeaderGetTypeId</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN782"><span class='Ref_To_Local'>record2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN787"><span class='Ref_To_Local'>tupTypmod2</span></a> <span class='Operator'>= </span><a href="../../../include/access/htup_details.h.html#LN454"><span class='Ref_to_Macro'>HeapTupleHeaderGetTypMod</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN782"><span class='Ref_To_Local'>record2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN789"><span class='Ref_To_Local'>tupdesc2</span></a> <span class='Operator'>= </span><a href="../../../include/utils/typcache.h.html#LN151"><span class='Ref_to_Proto'>lookup_rowtype_tupdesc</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN785"><span class='Ref_To_Local'>tupType2</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN787"><span class='Ref_To_Local'>tupTypmod2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN793"><span class='Ref_To_Local'>ncolumns2</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN789"><span class='Ref_To_Local'>tupdesc2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN72"><span class='Ref_to_Member'>natts</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Build temporary HeapTuple control structures */ 
</span>    <a href="rowtypes.c.html#LN790"><span class='Ref_To_Local'>tuple1</span></a><span class='Operator'>.</span><a href="../../../include/access/htup.h.html#LN63"><span class='Ref_to_Member'>t_len</span></a> <span class='Operator'>= </span><a href="../../../include/access/htup_details.h.html#LN438"><span class='Ref_to_Macro'>HeapTupleHeaderGetDatumLength</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN781"><span class='Ref_To_Local'>record1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/storage/itemptr.h.html#LN148"><span class='Ref_to_Macro'>ItemPointerSetInvalid</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN790"><span class='Ref_To_Local'>tuple1</span></a><span class='Operator'>.</span><a href="../../../include/access/htup.h.html#LN64"><span class='Ref_to_Member'>t_self</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN790"><span class='Ref_To_Local'>tuple1</span></a><span class='Operator'>.</span><a href="../../../include/access/htup.h.html#LN65"><span class='Ref_to_Member'>t_tableOid</span></a> <span class='Operator'>= </span><a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN790"><span class='Ref_To_Local'>tuple1</span></a><span class='Operator'>.</span><a href="../../../include/access/htup.h.html#LN66"><span class='Ref_to_Member'>t_data</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN781"><span class='Ref_To_Local'>record1</span></a><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN791"><span class='Ref_To_Local'>tuple2</span></a><span class='Operator'>.</span><a href="../../../include/access/htup.h.html#LN63"><span class='Ref_to_Member'>t_len</span></a> <span class='Operator'>= </span><a href="../../../include/access/htup_details.h.html#LN438"><span class='Ref_to_Macro'>HeapTupleHeaderGetDatumLength</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN782"><span class='Ref_To_Local'>record2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/storage/itemptr.h.html#LN148"><span class='Ref_to_Macro'>ItemPointerSetInvalid</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN791"><span class='Ref_To_Local'>tuple2</span></a><span class='Operator'>.</span><a href="../../../include/access/htup.h.html#LN64"><span class='Ref_to_Member'>t_self</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN791"><span class='Ref_To_Local'>tuple2</span></a><span class='Operator'>.</span><a href="../../../include/access/htup.h.html#LN65"><span class='Ref_to_Member'>t_tableOid</span></a> <span class='Operator'>= </span><a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN791"><span class='Ref_To_Local'>tuple2</span></a><span class='Operator'>.</span><a href="../../../include/access/htup.h.html#LN66"><span class='Ref_to_Member'>t_data</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN782"><span class='Ref_To_Local'>record2</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * We arrange to look up the needed comparison info just once per series 
     * of calls, assuming the record types don't change underneath us. 
     */ 
</span>    <a href="rowtypes.c.html#LN795"><span class='Ref_To_Local'>ncols</span></a> <span class='Operator'>= </span><a href="../../../interfaces/ecpg/pgtypeslib/numeric.c.html#LN10"><span class='Ref_to_Macro'>Max</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN792"><span class='Ref_To_Local'>ncolumns1</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN793"><span class='Ref_To_Local'>ncolumns2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN794"><span class='Ref_To_Local'>my_extra</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN57"><span class='Ref_to_Struct'>RecordCompareData</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="rowtypes.c.html#LN779"><span class='Ref_to_Parameter'>fcinfo</span></a><span class='Operator'>-&GT;</span><a href="../../../include/fmgr.h.html#LN78"><span class='Ref_to_Member'>flinfo</span></a><span class='Operator'>-&GT;</span><a href="../../../include/fmgr.h.html#LN63"><span class='Ref_to_Member'>fn_extra</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN794"><span class='Ref_To_Local'>my_extra</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL </span><span class='Operator'>|| 
</span>        <a href="rowtypes.c.html#LN794"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN59"><span class='Ref_to_Member'>ncolumns</span></a> <span class='Operator'>&LT; </span><a href="rowtypes.c.html#LN795"><span class='Ref_To_Local'>ncols</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="rowtypes.c.html#LN779"><span class='Ref_to_Parameter'>fcinfo</span></a><span class='Operator'>-&GT;</span><a href="../../../include/fmgr.h.html#LN78"><span class='Ref_to_Member'>flinfo</span></a><span class='Operator'>-&GT;</span><a href="../../../include/fmgr.h.html#LN63"><span class='Ref_to_Member'>fn_extra</span></a> <span class='Operator'>= 
</span>            <a href="../../../include/utils/palloc.h.html#LN70"><span class='Ref_to_Proto'>MemoryContextAlloc</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN779"><span class='Ref_to_Parameter'>fcinfo</span></a><span class='Operator'>-&GT;</span><a href="../../../include/fmgr.h.html#LN78"><span class='Ref_to_Member'>flinfo</span></a><span class='Operator'>-&GT;</span><a href="../../../include/fmgr.h.html#LN64"><span class='Ref_to_Member'>fn_mcxt</span></a><span class='Delimiter'>, 
</span>                               <a href="../../../include/c.h.html#LN554"><span class='Ref_to_Macro'>offsetof</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN57"><span class='Ref_to_Struct'>RecordCompareData</span></a><span class='Delimiter'>, </span>columns<span class='Parentheses'>) </span><span class='Operator'>+ 
</span>                               <a href="rowtypes.c.html#LN795"><span class='Ref_To_Local'>ncols</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN52"><span class='Ref_to_Struct'>ColumnCompareData</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN794"><span class='Ref_To_Local'>my_extra</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN57"><span class='Ref_to_Struct'>RecordCompareData</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="rowtypes.c.html#LN779"><span class='Ref_to_Parameter'>fcinfo</span></a><span class='Operator'>-&GT;</span><a href="../../../include/fmgr.h.html#LN78"><span class='Ref_to_Member'>flinfo</span></a><span class='Operator'>-&GT;</span><a href="../../../include/fmgr.h.html#LN63"><span class='Ref_to_Member'>fn_extra</span></a><span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN794"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN59"><span class='Ref_to_Member'>ncolumns</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN795"><span class='Ref_To_Local'>ncols</span></a><span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN794"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN60"><span class='Ref_to_Member'>record1_type</span></a> <span class='Operator'>= </span><a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN794"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN61"><span class='Ref_to_Member'>record1_typmod</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN794"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN62"><span class='Ref_to_Member'>record2_type</span></a> <span class='Operator'>= </span><a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN794"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN63"><span class='Ref_to_Member'>record2_typmod</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN794"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN60"><span class='Ref_to_Member'>record1_type</span></a> <span class='Operator'>!= </span><a href="rowtypes.c.html#LN784"><span class='Ref_To_Local'>tupType1</span></a> <span class='Operator'>|| 
</span>        <a href="rowtypes.c.html#LN794"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN61"><span class='Ref_to_Member'>record1_typmod</span></a> <span class='Operator'>!= </span><a href="rowtypes.c.html#LN786"><span class='Ref_To_Local'>tupTypmod1</span></a> <span class='Operator'>|| 
</span>        <a href="rowtypes.c.html#LN794"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN62"><span class='Ref_to_Member'>record2_type</span></a> <span class='Operator'>!= </span><a href="rowtypes.c.html#LN785"><span class='Ref_To_Local'>tupType2</span></a> <span class='Operator'>|| 
</span>        <a href="rowtypes.c.html#LN794"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN63"><span class='Ref_to_Member'>record2_typmod</span></a> <span class='Operator'>!= </span><a href="rowtypes.c.html#LN787"><span class='Ref_To_Local'>tupTypmod2</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../../include/c.h.html#LN856"><span class='Ref_to_Macro'>MemSet</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN794"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN64"><span class='Ref_to_Member'>columns</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN795"><span class='Ref_To_Local'>ncols</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN52"><span class='Ref_to_Struct'>ColumnCompareData</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN794"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN60"><span class='Ref_to_Member'>record1_type</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN784"><span class='Ref_To_Local'>tupType1</span></a><span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN794"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN61"><span class='Ref_to_Member'>record1_typmod</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN786"><span class='Ref_To_Local'>tupTypmod1</span></a><span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN794"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN62"><span class='Ref_to_Member'>record2_type</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN785"><span class='Ref_To_Local'>tupType2</span></a><span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN794"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN63"><span class='Ref_to_Member'>record2_typmod</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN787"><span class='Ref_To_Local'>tupTypmod2</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* Break down the tuples into fields */ 
</span>    <a href="rowtypes.c.html#LN796"><span class='Ref_To_Local'>values1</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN792"><span class='Ref_To_Local'>ncolumns1</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN798"><span class='Ref_To_Local'>nulls1</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN792"><span class='Ref_To_Local'>ncolumns1</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>bool</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../../include/access/htup_details.h.html#LN813"><span class='Ref_to_Proto'>heap_deform_tuple</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rowtypes.c.html#LN790"><span class='Ref_To_Local'>tuple1</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN788"><span class='Ref_To_Local'>tupdesc1</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN796"><span class='Ref_To_Local'>values1</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN798"><span class='Ref_To_Local'>nulls1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN797"><span class='Ref_To_Local'>values2</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN793"><span class='Ref_To_Local'>ncolumns2</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN799"><span class='Ref_To_Local'>nulls2</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN793"><span class='Ref_To_Local'>ncolumns2</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>bool</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../../include/access/htup_details.h.html#LN813"><span class='Ref_to_Proto'>heap_deform_tuple</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rowtypes.c.html#LN791"><span class='Ref_To_Local'>tuple2</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN789"><span class='Ref_To_Local'>tupdesc2</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN797"><span class='Ref_To_Local'>values2</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN799"><span class='Ref_To_Local'>nulls2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Scan corresponding columns, allowing for dropped columns in different 
     * places in the two rows.  i1 and i2 are physical column indexes, j is 
     * the logical column index. 
     */ 
</span>    <a href="rowtypes.c.html#LN800"><span class='Ref_To_Local'>i1</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN801"><span class='Ref_To_Local'>i2</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN802"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN800"><span class='Ref_To_Local'>i1</span></a> <span class='Operator'>&LT; </span><a href="rowtypes.c.html#LN792"><span class='Ref_To_Local'>ncolumns1</span></a> <span class='Operator'>|| </span><a href="rowtypes.c.html#LN801"><span class='Ref_To_Local'>i2</span></a> <span class='Operator'>&LT; </span><a href="rowtypes.c.html#LN793"><span class='Ref_To_Local'>ncolumns2</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN875"></a>        <a href="../../../include/utils/typcache.h.html#LN28"><span class='Ref_to_Struct'>TypeCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>typentry</span><span class='Delimiter'>; 
</span><a name="LN876"></a>        <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>collation</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Skip dropped columns 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN800"><span class='Ref_To_Local'>i1</span></a> <span class='Operator'>&LT; </span><a href="rowtypes.c.html#LN792"><span class='Ref_To_Local'>ncolumns1</span></a> <span class='Operator'>&& </span><a href="rowtypes.c.html#LN788"><span class='Ref_To_Local'>tupdesc1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN800"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attisdropped<span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="rowtypes.c.html#LN800"><span class='Ref_To_Local'>i1</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN801"><span class='Ref_To_Local'>i2</span></a> <span class='Operator'>&LT; </span><a href="rowtypes.c.html#LN793"><span class='Ref_To_Local'>ncolumns2</span></a> <span class='Operator'>&& </span><a href="rowtypes.c.html#LN789"><span class='Ref_To_Local'>tupdesc2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN801"><span class='Ref_To_Local'>i2</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attisdropped<span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="rowtypes.c.html#LN801"><span class='Ref_To_Local'>i2</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN800"><span class='Ref_To_Local'>i1</span></a> <span class='Operator'>&GT;= </span><a href="rowtypes.c.html#LN792"><span class='Ref_To_Local'>ncolumns1</span></a> <span class='Operator'>|| </span><a href="rowtypes.c.html#LN801"><span class='Ref_To_Local'>i2</span></a> <span class='Operator'>&GT;= </span><a href="rowtypes.c.html#LN793"><span class='Ref_To_Local'>ncolumns2</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>break</span><span class='Delimiter'>;</span>              <span class='Comment_Single_Line'>/* we'll deal with mismatch below loop */ 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Have two matching columns, they must be same type 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN788"><span class='Ref_To_Local'>tupdesc1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN800"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>atttypid <span class='Operator'>!= 
</span>            <a href="rowtypes.c.html#LN789"><span class='Ref_To_Local'>tupdesc2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN801"><span class='Ref_To_Local'>i2</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>atttypid<span class='Parentheses'>) 
</span>            <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_DATATYPE_MISMATCH<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"cannot compare dissimilar column types %s and %s at record column %d"</span><span class='Delimiter'>, 
</span>                            <a href="format_type.c.html#LN92"><span class='Ref_to_Func'>format_type_be</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN788"><span class='Ref_To_Local'>tupdesc1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN800"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>atttypid<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                            <a href="format_type.c.html#LN92"><span class='Ref_to_Func'>format_type_be</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN789"><span class='Ref_To_Local'>tupdesc2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN801"><span class='Ref_To_Local'>i2</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>atttypid<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                            <a href="rowtypes.c.html#LN802"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * If they're not same collation, we don't complain here, but the 
         * comparison function might. 
         */ 
</span>        <a href="rowtypes.c.html#LN876"><span class='Ref_To_Local'>collation</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN788"><span class='Ref_To_Local'>tupdesc1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN800"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attcollation<span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN876"><span class='Ref_To_Local'>collation</span></a> <span class='Operator'>!= </span><a href="rowtypes.c.html#LN789"><span class='Ref_To_Local'>tupdesc2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN801"><span class='Ref_To_Local'>i2</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attcollation<span class='Parentheses'>) 
</span>            <a href="rowtypes.c.html#LN876"><span class='Ref_To_Local'>collation</span></a> <span class='Operator'>= </span><a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Lookup the comparison function if not done already 
         */ 
</span>        <a href="rowtypes.c.html#LN875"><span class='Ref_To_Local'>typentry</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN794"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN64"><span class='Ref_to_Member'>columns</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN802"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="rowtypes.c.html#LN54"><span class='Ref_to_Member'>typentry</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN875"><span class='Ref_To_Local'>typentry</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL </span><span class='Operator'>|| 
</span>            <a href="rowtypes.c.html#LN875"><span class='Ref_To_Local'>typentry</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/typcache.h.html#LN31"><span class='Ref_to_Member'>type_id</span></a> <span class='Operator'>!= </span><a href="rowtypes.c.html#LN788"><span class='Ref_To_Local'>tupdesc1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN800"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>atttypid<span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="rowtypes.c.html#LN875"><span class='Ref_To_Local'>typentry</span></a> <span class='Operator'>= </span><a href="../../../include/utils/typcache.h.html#LN142"><span class='Ref_to_Proto'>lookup_type_cache</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN788"><span class='Ref_To_Local'>tupdesc1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN800"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>atttypid<span class='Delimiter'>, 
</span>                                         <a href="../../../include/utils/typcache.h.html#LN115"><span class='Ref_to_Const'>TYPECACHE_CMP_PROC_FINFO</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN875"><span class='Ref_To_Local'>typentry</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/typcache.h.html#LN67"><span class='Ref_to_Member'>cmp_proc_finfo</span></a><span class='Operator'>.</span><a href="../../../include/fmgr.h.html#LN58"><span class='Ref_to_Member'>fn_oid</span></a><span class='Parentheses'>))</span> 
                <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_UNDEFINED_FUNCTION<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"could not identify a comparison function for type %s"</span><span class='Delimiter'>, 
</span>                       <a href="format_type.c.html#LN92"><span class='Ref_to_Func'>format_type_be</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN875"><span class='Ref_To_Local'>typentry</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/typcache.h.html#LN31"><span class='Ref_to_Member'>type_id</span></a><span class='Parentheses'>))))</span><span class='Delimiter'>; 
</span>            <a href="rowtypes.c.html#LN794"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN64"><span class='Ref_to_Member'>columns</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN802"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="rowtypes.c.html#LN54"><span class='Ref_to_Member'>typentry</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN875"><span class='Ref_To_Local'>typentry</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * We consider two NULLs equal; NULL &GT; not-NULL. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="rowtypes.c.html#LN798"><span class='Ref_To_Local'>nulls1</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN800"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>] </span><span class='Operator'>|| !</span><a href="rowtypes.c.html#LN799"><span class='Ref_To_Local'>nulls2</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN801"><span class='Ref_To_Local'>i2</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN936"></a>            <a href="../../../include/fmgr.h.html#LN76"><span class='Ref_to_Struct'>FunctionCallInfoData</span></a> <span class='Declare_Local'>locfcinfo</span><span class='Delimiter'>; 
</span><a name="LN937"></a>            <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>cmpresult</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN798"><span class='Ref_To_Local'>nulls1</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN800"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* arg1 is greater than arg2 */ 
</span>                <a href="rowtypes.c.html#LN783"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN799"><span class='Ref_To_Local'>nulls2</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN801"><span class='Ref_To_Local'>i2</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* arg1 is less than arg2 */ 
</span>                <a href="rowtypes.c.html#LN783"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= -</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
            <span class='Comment_Multi_Line'>/* Compare the pair of elements */ 
</span>            <a href="../../../include/fmgr.h.html#LN119"><span class='Ref_to_Macro'>InitFunctionCallInfoData</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN936"><span class='Ref_To_Local'>locfcinfo</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rowtypes.c.html#LN875"><span class='Ref_To_Local'>typentry</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/typcache.h.html#LN67"><span class='Ref_to_Member'>cmp_proc_finfo</span></a><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, 
</span>                                     <a href="rowtypes.c.html#LN876"><span class='Ref_To_Local'>collation</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="rowtypes.c.html#LN936"><span class='Ref_To_Local'>locfcinfo</span></a><span class='Operator'>.</span><a href="../../../include/fmgr.h.html#LN84"><span class='Ref_to_Member'>arg</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="rowtypes.c.html#LN796"><span class='Ref_To_Local'>values1</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN800"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>]; 
</span>            <a href="rowtypes.c.html#LN936"><span class='Ref_To_Local'>locfcinfo</span></a><span class='Operator'>.</span><a href="../../../include/fmgr.h.html#LN84"><span class='Ref_to_Member'>arg</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="rowtypes.c.html#LN797"><span class='Ref_To_Local'>values2</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN801"><span class='Ref_To_Local'>i2</span></a><span class='Delimiter'>]; 
</span>            <a href="rowtypes.c.html#LN936"><span class='Ref_To_Local'>locfcinfo</span></a><span class='Operator'>.</span><a href="../../../include/fmgr.h.html#LN85"><span class='Ref_to_Member'>argnull</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>            <a href="rowtypes.c.html#LN936"><span class='Ref_To_Local'>locfcinfo</span></a><span class='Operator'>.</span><a href="../../../include/fmgr.h.html#LN85"><span class='Ref_to_Member'>argnull</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>            <a href="rowtypes.c.html#LN936"><span class='Ref_To_Local'>locfcinfo</span></a><span class='Operator'>.</span><a href="../../../include/fmgr.h.html#LN82"><span class='Ref_to_Member'>isnull</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>            <a href="rowtypes.c.html#LN937"><span class='Ref_To_Local'>cmpresult</span></a> <span class='Operator'>= </span><a href="../../../include/postgres.h.html#LN477"><span class='Ref_to_Macro'>DatumGetInt32</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN136"><span class='Ref_to_Macro'>FunctionCallInvoke</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rowtypes.c.html#LN936"><span class='Ref_To_Local'>locfcinfo</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN937"><span class='Ref_To_Local'>cmpresult</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* arg1 is less than arg2 */ 
</span>                <a href="rowtypes.c.html#LN783"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= -</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN937"><span class='Ref_To_Local'>cmpresult</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* arg1 is greater than arg2 */ 
</span>                <a href="rowtypes.c.html#LN783"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if !nulls1[i1]||!nulls2[... &raquo; </span> 
 
        <span class='Comment_Multi_Line'>/* equal, so continue to next column */ 
</span>        <a href="rowtypes.c.html#LN800"><span class='Ref_To_Local'>i1</span></a><span class='Operator'>++</span><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN801"><span class='Ref_To_Local'>i2</span></a><span class='Operator'>++</span><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN802"><span class='Ref_To_Local'>j</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end while i1&LT;ncolumns1||i2&LT;ncol... &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* 
     * If we didn't break out of the loop early, check for column count 
     * mismatch.  (We do not report such mismatch if we found unequal column 
     * values; is that a feature or a bug?) 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN783"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN800"><span class='Ref_To_Local'>i1</span></a> <span class='Operator'>!= </span><a href="rowtypes.c.html#LN792"><span class='Ref_To_Local'>ncolumns1</span></a> <span class='Operator'>|| </span><a href="rowtypes.c.html#LN801"><span class='Ref_To_Local'>i2</span></a> <span class='Operator'>!= </span><a href="rowtypes.c.html#LN793"><span class='Ref_To_Local'>ncolumns2</span></a><span class='Parentheses'>) 
</span>            <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_DATATYPE_MISMATCH<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"cannot compare record types with different numbers of columns"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN796"><span class='Ref_To_Local'>values1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN798"><span class='Ref_To_Local'>nulls1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN797"><span class='Ref_To_Local'>values2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN799"><span class='Ref_To_Local'>nulls2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/access/tupdesc.h.html#LN106"><span class='Ref_to_Macro'>ReleaseTupleDesc</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN788"><span class='Ref_To_Local'>tupdesc1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/access/tupdesc.h.html#LN106"><span class='Ref_to_Macro'>ReleaseTupleDesc</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN789"><span class='Ref_To_Local'>tupdesc2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Avoid leaking memory when handed toasted input. */ 
</span>    <a href="../../../include/fmgr.h.html#LN224"><span class='Ref_to_Macro'>PG_FREE_IF_COPY</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN781"><span class='Ref_To_Local'>record1</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN224"><span class='Ref_to_Macro'>PG_FREE_IF_COPY</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN782"><span class='Ref_To_Local'>record2</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="rowtypes.c.html#LN783"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end record_cmp &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * record_eq : 
 *        compares two records for equality 
 * result : 
 *        returns true if the records are equal, false otherwise. 
 * 
 * Note: we do not use record_cmp here, since equality may be meaningful in 
 * datatypes that don't have a total ordering (and hence no btree support). 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1017"></a><span class='Declare_Function'>record_eq</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1019"></a>    <a href="../../../include/access/htup.h.html#LN22"><span class='Ref_to_Typedef'>HeapTupleHeader</span></a> <span class='Declare_Local'>record1</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN275"><span class='Ref_to_Macro'>PG_GETARG_HEAPTUPLEHEADER</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1020"></a>    <a href="../../../include/access/htup.h.html#LN22"><span class='Ref_to_Typedef'>HeapTupleHeader</span></a> <span class='Declare_Local'>record2</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN275"><span class='Ref_to_Macro'>PG_GETARG_HEAPTUPLEHEADER</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1021"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>result</span> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span><a name="LN1022"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>tupType1</span><span class='Delimiter'>; 
</span><a name="LN1023"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>tupType2</span><span class='Delimiter'>; 
</span><a name="LN1024"></a>    <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>tupTypmod1</span><span class='Delimiter'>; 
</span><a name="LN1025"></a>    <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>tupTypmod2</span><span class='Delimiter'>; 
</span><a name="LN1026"></a>    <a href="../../../include/access/tupdesc.h.html#LN70"><span class='Ref_to_Typedef'>TupleDesc</span></a>   <span class='Declare_Local'>tupdesc1</span><span class='Delimiter'>; 
</span><a name="LN1027"></a>    <a href="../../../include/access/tupdesc.h.html#LN70"><span class='Ref_to_Typedef'>TupleDesc</span></a>   <span class='Declare_Local'>tupdesc2</span><span class='Delimiter'>; 
</span><a name="LN1028"></a>    <a href="../../../include/access/htup.h.html#LN61"><span class='Ref_to_Struct'>HeapTupleData</span></a> <span class='Declare_Local'>tuple1</span><span class='Delimiter'>; 
</span><a name="LN1029"></a>    <a href="../../../include/access/htup.h.html#LN61"><span class='Ref_to_Struct'>HeapTupleData</span></a> <span class='Declare_Local'>tuple2</span><span class='Delimiter'>; 
</span><a name="LN1030"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ncolumns1</span><span class='Delimiter'>; 
</span><a name="LN1031"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ncolumns2</span><span class='Delimiter'>; 
</span><a name="LN1032"></a>    <a href="rowtypes.c.html#LN57"><span class='Ref_to_Struct'>RecordCompareData</span></a> <span class='Operator'>*</span><span class='Declare_Local'>my_extra</span><span class='Delimiter'>; 
</span><a name="LN1033"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ncols</span><span class='Delimiter'>; 
</span><a name="LN1034"></a>    <a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>values1</span><span class='Delimiter'>; 
</span><a name="LN1035"></a>    <a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>values2</span><span class='Delimiter'>; 
</span><a name="LN1036"></a>    <span class='Keyword'>bool</span>       <span class='Operator'>*</span><span class='Declare_Local'>nulls1</span><span class='Delimiter'>; 
</span><a name="LN1037"></a>    <span class='Keyword'>bool</span>       <span class='Operator'>*</span><span class='Declare_Local'>nulls2</span><span class='Delimiter'>; 
</span><a name="LN1038"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i1</span><span class='Delimiter'>; 
</span><a name="LN1039"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i2</span><span class='Delimiter'>; 
</span><a name="LN1040"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>j</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/miscadmin.h.html#LN275"><span class='Ref_to_Proto'>check_stack_depth</span></a><span class='Parentheses'>()</span><span class='Delimiter'>;</span>        <span class='Comment_Single_Line'>/* recurses for record-type columns */ 
</span> 
    <span class='Comment_Multi_Line'>/* Extract type info from the tuples */ 
</span>    <a href="rowtypes.c.html#LN1022"><span class='Ref_To_Local'>tupType1</span></a> <span class='Operator'>= </span><a href="../../../include/access/htup_details.h.html#LN444"><span class='Ref_to_Macro'>HeapTupleHeaderGetTypeId</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1019"><span class='Ref_To_Local'>record1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN1024"><span class='Ref_To_Local'>tupTypmod1</span></a> <span class='Operator'>= </span><a href="../../../include/access/htup_details.h.html#LN454"><span class='Ref_to_Macro'>HeapTupleHeaderGetTypMod</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1019"><span class='Ref_To_Local'>record1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN1026"><span class='Ref_To_Local'>tupdesc1</span></a> <span class='Operator'>= </span><a href="../../../include/utils/typcache.h.html#LN151"><span class='Ref_to_Proto'>lookup_rowtype_tupdesc</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1022"><span class='Ref_To_Local'>tupType1</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN1024"><span class='Ref_To_Local'>tupTypmod1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN1030"><span class='Ref_To_Local'>ncolumns1</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN1026"><span class='Ref_To_Local'>tupdesc1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN72"><span class='Ref_to_Member'>natts</span></a><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN1023"><span class='Ref_To_Local'>tupType2</span></a> <span class='Operator'>= </span><a href="../../../include/access/htup_details.h.html#LN444"><span class='Ref_to_Macro'>HeapTupleHeaderGetTypeId</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1020"><span class='Ref_To_Local'>record2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN1025"><span class='Ref_To_Local'>tupTypmod2</span></a> <span class='Operator'>= </span><a href="../../../include/access/htup_details.h.html#LN454"><span class='Ref_to_Macro'>HeapTupleHeaderGetTypMod</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1020"><span class='Ref_To_Local'>record2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN1027"><span class='Ref_To_Local'>tupdesc2</span></a> <span class='Operator'>= </span><a href="../../../include/utils/typcache.h.html#LN151"><span class='Ref_to_Proto'>lookup_rowtype_tupdesc</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1023"><span class='Ref_To_Local'>tupType2</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN1025"><span class='Ref_To_Local'>tupTypmod2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN1031"><span class='Ref_To_Local'>ncolumns2</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN1027"><span class='Ref_To_Local'>tupdesc2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN72"><span class='Ref_to_Member'>natts</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Build temporary HeapTuple control structures */ 
</span>    <a href="rowtypes.c.html#LN1028"><span class='Ref_To_Local'>tuple1</span></a><span class='Operator'>.</span><a href="../../../include/access/htup.h.html#LN63"><span class='Ref_to_Member'>t_len</span></a> <span class='Operator'>= </span><a href="../../../include/access/htup_details.h.html#LN438"><span class='Ref_to_Macro'>HeapTupleHeaderGetDatumLength</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1019"><span class='Ref_To_Local'>record1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/storage/itemptr.h.html#LN148"><span class='Ref_to_Macro'>ItemPointerSetInvalid</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1028"><span class='Ref_To_Local'>tuple1</span></a><span class='Operator'>.</span><a href="../../../include/access/htup.h.html#LN64"><span class='Ref_to_Member'>t_self</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN1028"><span class='Ref_To_Local'>tuple1</span></a><span class='Operator'>.</span><a href="../../../include/access/htup.h.html#LN65"><span class='Ref_to_Member'>t_tableOid</span></a> <span class='Operator'>= </span><a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN1028"><span class='Ref_To_Local'>tuple1</span></a><span class='Operator'>.</span><a href="../../../include/access/htup.h.html#LN66"><span class='Ref_to_Member'>t_data</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN1019"><span class='Ref_To_Local'>record1</span></a><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN1029"><span class='Ref_To_Local'>tuple2</span></a><span class='Operator'>.</span><a href="../../../include/access/htup.h.html#LN63"><span class='Ref_to_Member'>t_len</span></a> <span class='Operator'>= </span><a href="../../../include/access/htup_details.h.html#LN438"><span class='Ref_to_Macro'>HeapTupleHeaderGetDatumLength</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1020"><span class='Ref_To_Local'>record2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/storage/itemptr.h.html#LN148"><span class='Ref_to_Macro'>ItemPointerSetInvalid</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1029"><span class='Ref_To_Local'>tuple2</span></a><span class='Operator'>.</span><a href="../../../include/access/htup.h.html#LN64"><span class='Ref_to_Member'>t_self</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN1029"><span class='Ref_To_Local'>tuple2</span></a><span class='Operator'>.</span><a href="../../../include/access/htup.h.html#LN65"><span class='Ref_to_Member'>t_tableOid</span></a> <span class='Operator'>= </span><a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN1029"><span class='Ref_To_Local'>tuple2</span></a><span class='Operator'>.</span><a href="../../../include/access/htup.h.html#LN66"><span class='Ref_to_Member'>t_data</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN1020"><span class='Ref_To_Local'>record2</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * We arrange to look up the needed comparison info just once per series 
     * of calls, assuming the record types don't change underneath us. 
     */ 
</span>    <a href="rowtypes.c.html#LN1033"><span class='Ref_To_Local'>ncols</span></a> <span class='Operator'>= </span><a href="../../../interfaces/ecpg/pgtypeslib/numeric.c.html#LN10"><span class='Ref_to_Macro'>Max</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1030"><span class='Ref_To_Local'>ncolumns1</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN1031"><span class='Ref_To_Local'>ncolumns2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN1032"><span class='Ref_To_Local'>my_extra</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN57"><span class='Ref_to_Struct'>RecordCompareData</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span>fcinfo<span class='Operator'>-&GT;</span>flinfo<span class='Operator'>-&GT;</span>fn_extra<span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1032"><span class='Ref_To_Local'>my_extra</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL </span><span class='Operator'>|| 
</span>        <a href="rowtypes.c.html#LN1032"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN59"><span class='Ref_to_Member'>ncolumns</span></a> <span class='Operator'>&LT; </span><a href="rowtypes.c.html#LN1033"><span class='Ref_To_Local'>ncols</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        fcinfo<span class='Operator'>-&GT;</span>flinfo<span class='Operator'>-&GT;</span>fn_extra <span class='Operator'>= 
</span>            <a href="../../../include/utils/palloc.h.html#LN70"><span class='Ref_to_Proto'>MemoryContextAlloc</span></a><span class='Parentheses'>(</span>fcinfo<span class='Operator'>-&GT;</span>flinfo<span class='Operator'>-&GT;</span>fn_mcxt<span class='Delimiter'>, 
</span>                               <a href="../../../include/c.h.html#LN554"><span class='Ref_to_Macro'>offsetof</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN57"><span class='Ref_to_Struct'>RecordCompareData</span></a><span class='Delimiter'>, </span>columns<span class='Parentheses'>) </span><span class='Operator'>+ 
</span>                               <a href="rowtypes.c.html#LN1033"><span class='Ref_To_Local'>ncols</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN52"><span class='Ref_to_Struct'>ColumnCompareData</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN1032"><span class='Ref_To_Local'>my_extra</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN57"><span class='Ref_to_Struct'>RecordCompareData</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span>fcinfo<span class='Operator'>-&GT;</span>flinfo<span class='Operator'>-&GT;</span>fn_extra<span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN1032"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN59"><span class='Ref_to_Member'>ncolumns</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN1033"><span class='Ref_To_Local'>ncols</span></a><span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN1032"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN60"><span class='Ref_to_Member'>record1_type</span></a> <span class='Operator'>= </span><a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN1032"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN61"><span class='Ref_to_Member'>record1_typmod</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN1032"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN62"><span class='Ref_to_Member'>record2_type</span></a> <span class='Operator'>= </span><a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN1032"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN63"><span class='Ref_to_Member'>record2_typmod</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1032"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN60"><span class='Ref_to_Member'>record1_type</span></a> <span class='Operator'>!= </span><a href="rowtypes.c.html#LN1022"><span class='Ref_To_Local'>tupType1</span></a> <span class='Operator'>|| 
</span>        <a href="rowtypes.c.html#LN1032"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN61"><span class='Ref_to_Member'>record1_typmod</span></a> <span class='Operator'>!= </span><a href="rowtypes.c.html#LN1024"><span class='Ref_To_Local'>tupTypmod1</span></a> <span class='Operator'>|| 
</span>        <a href="rowtypes.c.html#LN1032"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN62"><span class='Ref_to_Member'>record2_type</span></a> <span class='Operator'>!= </span><a href="rowtypes.c.html#LN1023"><span class='Ref_To_Local'>tupType2</span></a> <span class='Operator'>|| 
</span>        <a href="rowtypes.c.html#LN1032"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN63"><span class='Ref_to_Member'>record2_typmod</span></a> <span class='Operator'>!= </span><a href="rowtypes.c.html#LN1025"><span class='Ref_To_Local'>tupTypmod2</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../../include/c.h.html#LN856"><span class='Ref_to_Macro'>MemSet</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1032"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN64"><span class='Ref_to_Member'>columns</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN1033"><span class='Ref_To_Local'>ncols</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN52"><span class='Ref_to_Struct'>ColumnCompareData</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN1032"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN60"><span class='Ref_to_Member'>record1_type</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN1022"><span class='Ref_To_Local'>tupType1</span></a><span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN1032"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN61"><span class='Ref_to_Member'>record1_typmod</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN1024"><span class='Ref_To_Local'>tupTypmod1</span></a><span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN1032"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN62"><span class='Ref_to_Member'>record2_type</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN1023"><span class='Ref_To_Local'>tupType2</span></a><span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN1032"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN63"><span class='Ref_to_Member'>record2_typmod</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN1025"><span class='Ref_To_Local'>tupTypmod2</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* Break down the tuples into fields */ 
</span>    <a href="rowtypes.c.html#LN1034"><span class='Ref_To_Local'>values1</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1030"><span class='Ref_To_Local'>ncolumns1</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN1036"><span class='Ref_To_Local'>nulls1</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1030"><span class='Ref_To_Local'>ncolumns1</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>bool</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../../include/access/htup_details.h.html#LN813"><span class='Ref_to_Proto'>heap_deform_tuple</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rowtypes.c.html#LN1028"><span class='Ref_To_Local'>tuple1</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN1026"><span class='Ref_To_Local'>tupdesc1</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN1034"><span class='Ref_To_Local'>values1</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN1036"><span class='Ref_To_Local'>nulls1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN1035"><span class='Ref_To_Local'>values2</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1031"><span class='Ref_To_Local'>ncolumns2</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN1037"><span class='Ref_To_Local'>nulls2</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1031"><span class='Ref_To_Local'>ncolumns2</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>bool</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../../include/access/htup_details.h.html#LN813"><span class='Ref_to_Proto'>heap_deform_tuple</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rowtypes.c.html#LN1029"><span class='Ref_To_Local'>tuple2</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN1027"><span class='Ref_To_Local'>tupdesc2</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN1035"><span class='Ref_To_Local'>values2</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN1037"><span class='Ref_To_Local'>nulls2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Scan corresponding columns, allowing for dropped columns in different 
     * places in the two rows.  i1 and i2 are physical column indexes, j is 
     * the logical column index. 
     */ 
</span>    <a href="rowtypes.c.html#LN1038"><span class='Ref_To_Local'>i1</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN1039"><span class='Ref_To_Local'>i2</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN1040"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1038"><span class='Ref_To_Local'>i1</span></a> <span class='Operator'>&LT; </span><a href="rowtypes.c.html#LN1030"><span class='Ref_To_Local'>ncolumns1</span></a> <span class='Operator'>|| </span><a href="rowtypes.c.html#LN1039"><span class='Ref_To_Local'>i2</span></a> <span class='Operator'>&LT; </span><a href="rowtypes.c.html#LN1031"><span class='Ref_To_Local'>ncolumns2</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN1113"></a>        <a href="../../../include/utils/typcache.h.html#LN28"><span class='Ref_to_Struct'>TypeCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>typentry</span><span class='Delimiter'>; 
</span><a name="LN1114"></a>        <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>collation</span><span class='Delimiter'>; 
</span><a name="LN1115"></a>        <a href="../../../include/fmgr.h.html#LN76"><span class='Ref_to_Struct'>FunctionCallInfoData</span></a> <span class='Declare_Local'>locfcinfo</span><span class='Delimiter'>; 
</span><a name="LN1116"></a>        <span class='Keyword'>bool</span>        <span class='Declare_Local'>oprresult</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Skip dropped columns 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1038"><span class='Ref_To_Local'>i1</span></a> <span class='Operator'>&LT; </span><a href="rowtypes.c.html#LN1030"><span class='Ref_To_Local'>ncolumns1</span></a> <span class='Operator'>&& </span><a href="rowtypes.c.html#LN1026"><span class='Ref_To_Local'>tupdesc1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1038"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attisdropped<span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="rowtypes.c.html#LN1038"><span class='Ref_To_Local'>i1</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1039"><span class='Ref_To_Local'>i2</span></a> <span class='Operator'>&LT; </span><a href="rowtypes.c.html#LN1031"><span class='Ref_To_Local'>ncolumns2</span></a> <span class='Operator'>&& </span><a href="rowtypes.c.html#LN1027"><span class='Ref_To_Local'>tupdesc2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1039"><span class='Ref_To_Local'>i2</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attisdropped<span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="rowtypes.c.html#LN1039"><span class='Ref_To_Local'>i2</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1038"><span class='Ref_To_Local'>i1</span></a> <span class='Operator'>&GT;= </span><a href="rowtypes.c.html#LN1030"><span class='Ref_To_Local'>ncolumns1</span></a> <span class='Operator'>|| </span><a href="rowtypes.c.html#LN1039"><span class='Ref_To_Local'>i2</span></a> <span class='Operator'>&GT;= </span><a href="rowtypes.c.html#LN1031"><span class='Ref_To_Local'>ncolumns2</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>break</span><span class='Delimiter'>;</span>              <span class='Comment_Single_Line'>/* we'll deal with mismatch below loop */ 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Have two matching columns, they must be same type 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1026"><span class='Ref_To_Local'>tupdesc1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1038"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>atttypid <span class='Operator'>!= 
</span>            <a href="rowtypes.c.html#LN1027"><span class='Ref_To_Local'>tupdesc2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1039"><span class='Ref_To_Local'>i2</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>atttypid<span class='Parentheses'>) 
</span>            <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_DATATYPE_MISMATCH<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"cannot compare dissimilar column types %s and %s at record column %d"</span><span class='Delimiter'>, 
</span>                            <a href="format_type.c.html#LN92"><span class='Ref_to_Func'>format_type_be</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1026"><span class='Ref_To_Local'>tupdesc1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1038"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>atttypid<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                            <a href="format_type.c.html#LN92"><span class='Ref_to_Func'>format_type_be</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1027"><span class='Ref_To_Local'>tupdesc2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1039"><span class='Ref_To_Local'>i2</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>atttypid<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                            <a href="rowtypes.c.html#LN1040"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * If they're not same collation, we don't complain here, but the 
         * equality function might. 
         */ 
</span>        <a href="rowtypes.c.html#LN1114"><span class='Ref_To_Local'>collation</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN1026"><span class='Ref_To_Local'>tupdesc1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1038"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attcollation<span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1114"><span class='Ref_To_Local'>collation</span></a> <span class='Operator'>!= </span><a href="rowtypes.c.html#LN1027"><span class='Ref_To_Local'>tupdesc2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1039"><span class='Ref_To_Local'>i2</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attcollation<span class='Parentheses'>) 
</span>            <a href="rowtypes.c.html#LN1114"><span class='Ref_To_Local'>collation</span></a> <span class='Operator'>= </span><a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Lookup the equality function if not done already 
         */ 
</span>        <a href="rowtypes.c.html#LN1113"><span class='Ref_To_Local'>typentry</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN1032"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN64"><span class='Ref_to_Member'>columns</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1040"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="rowtypes.c.html#LN54"><span class='Ref_to_Member'>typentry</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1113"><span class='Ref_To_Local'>typentry</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL </span><span class='Operator'>|| 
</span>            <a href="rowtypes.c.html#LN1113"><span class='Ref_To_Local'>typentry</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/typcache.h.html#LN31"><span class='Ref_to_Member'>type_id</span></a> <span class='Operator'>!= </span><a href="rowtypes.c.html#LN1026"><span class='Ref_To_Local'>tupdesc1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1038"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>atttypid<span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="rowtypes.c.html#LN1113"><span class='Ref_To_Local'>typentry</span></a> <span class='Operator'>= </span><a href="../../../include/utils/typcache.h.html#LN142"><span class='Ref_to_Proto'>lookup_type_cache</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1026"><span class='Ref_To_Local'>tupdesc1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1038"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>atttypid<span class='Delimiter'>, 
</span>                                         <a href="../../../include/utils/typcache.h.html#LN114"><span class='Ref_to_Const'>TYPECACHE_EQ_OPR_FINFO</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1113"><span class='Ref_To_Local'>typentry</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/typcache.h.html#LN66"><span class='Ref_to_Member'>eq_opr_finfo</span></a><span class='Operator'>.</span><a href="../../../include/fmgr.h.html#LN58"><span class='Ref_to_Member'>fn_oid</span></a><span class='Parentheses'>))</span> 
                <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_UNDEFINED_FUNCTION<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"could not identify an equality operator for type %s"</span><span class='Delimiter'>, 
</span>                       <a href="format_type.c.html#LN92"><span class='Ref_to_Func'>format_type_be</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1113"><span class='Ref_To_Local'>typentry</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/typcache.h.html#LN31"><span class='Ref_to_Member'>type_id</span></a><span class='Parentheses'>))))</span><span class='Delimiter'>; 
</span>            <a href="rowtypes.c.html#LN1032"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN64"><span class='Ref_to_Member'>columns</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1040"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="rowtypes.c.html#LN54"><span class='Ref_to_Member'>typentry</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN1113"><span class='Ref_To_Local'>typentry</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * We consider two NULLs equal; NULL &GT; not-NULL. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="rowtypes.c.html#LN1036"><span class='Ref_To_Local'>nulls1</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1038"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>] </span><span class='Operator'>|| !</span><a href="rowtypes.c.html#LN1037"><span class='Ref_To_Local'>nulls2</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1039"><span class='Ref_To_Local'>i2</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1036"><span class='Ref_To_Local'>nulls1</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1038"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>] </span><span class='Operator'>|| </span><a href="rowtypes.c.html#LN1037"><span class='Ref_To_Local'>nulls2</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1039"><span class='Ref_To_Local'>i2</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <a href="rowtypes.c.html#LN1021"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
            <span class='Comment_Multi_Line'>/* Compare the pair of elements */ 
</span>            <a href="../../../include/fmgr.h.html#LN119"><span class='Ref_to_Macro'>InitFunctionCallInfoData</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1115"><span class='Ref_To_Local'>locfcinfo</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="rowtypes.c.html#LN1113"><span class='Ref_To_Local'>typentry</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/typcache.h.html#LN66"><span class='Ref_to_Member'>eq_opr_finfo</span></a><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, 
</span>                                     <a href="rowtypes.c.html#LN1114"><span class='Ref_To_Local'>collation</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="rowtypes.c.html#LN1115"><span class='Ref_To_Local'>locfcinfo</span></a><span class='Operator'>.</span><a href="../../../include/fmgr.h.html#LN84"><span class='Ref_to_Member'>arg</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="rowtypes.c.html#LN1034"><span class='Ref_To_Local'>values1</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1038"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>]; 
</span>            <a href="rowtypes.c.html#LN1115"><span class='Ref_To_Local'>locfcinfo</span></a><span class='Operator'>.</span><a href="../../../include/fmgr.h.html#LN84"><span class='Ref_to_Member'>arg</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="rowtypes.c.html#LN1035"><span class='Ref_To_Local'>values2</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1039"><span class='Ref_To_Local'>i2</span></a><span class='Delimiter'>]; 
</span>            <a href="rowtypes.c.html#LN1115"><span class='Ref_To_Local'>locfcinfo</span></a><span class='Operator'>.</span><a href="../../../include/fmgr.h.html#LN85"><span class='Ref_to_Member'>argnull</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>            <a href="rowtypes.c.html#LN1115"><span class='Ref_To_Local'>locfcinfo</span></a><span class='Operator'>.</span><a href="../../../include/fmgr.h.html#LN85"><span class='Ref_to_Member'>argnull</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>            <a href="rowtypes.c.html#LN1115"><span class='Ref_To_Local'>locfcinfo</span></a><span class='Operator'>.</span><a href="../../../include/fmgr.h.html#LN82"><span class='Ref_to_Member'>isnull</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>            <a href="rowtypes.c.html#LN1116"><span class='Ref_To_Local'>oprresult</span></a> <span class='Operator'>= </span><a href="../../../include/postgres.h.html#LN398"><span class='Ref_to_Macro'>DatumGetBool</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN136"><span class='Ref_to_Macro'>FunctionCallInvoke</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rowtypes.c.html#LN1115"><span class='Ref_To_Local'>locfcinfo</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="rowtypes.c.html#LN1116"><span class='Ref_To_Local'>oprresult</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <a href="rowtypes.c.html#LN1021"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if !nulls1[i1]||!nulls2[... &raquo; </span> 
 
        <span class='Comment_Multi_Line'>/* equal, so continue to next column */ 
</span>        <a href="rowtypes.c.html#LN1038"><span class='Ref_To_Local'>i1</span></a><span class='Operator'>++</span><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN1039"><span class='Ref_To_Local'>i2</span></a><span class='Operator'>++</span><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN1040"><span class='Ref_To_Local'>j</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end while i1&LT;ncolumns1||i2&LT;ncol... &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* 
     * If we didn't break out of the loop early, check for column count 
     * mismatch.  (We do not report such mismatch if we found unequal column 
     * values; is that a feature or a bug?) 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1021"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1038"><span class='Ref_To_Local'>i1</span></a> <span class='Operator'>!= </span><a href="rowtypes.c.html#LN1030"><span class='Ref_To_Local'>ncolumns1</span></a> <span class='Operator'>|| </span><a href="rowtypes.c.html#LN1039"><span class='Ref_To_Local'>i2</span></a> <span class='Operator'>!= </span><a href="rowtypes.c.html#LN1031"><span class='Ref_To_Local'>ncolumns2</span></a><span class='Parentheses'>) 
</span>            <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_DATATYPE_MISMATCH<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"cannot compare record types with different numbers of columns"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1034"><span class='Ref_To_Local'>values1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1036"><span class='Ref_To_Local'>nulls1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1035"><span class='Ref_To_Local'>values2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1037"><span class='Ref_To_Local'>nulls2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/access/tupdesc.h.html#LN106"><span class='Ref_to_Macro'>ReleaseTupleDesc</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1026"><span class='Ref_To_Local'>tupdesc1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/access/tupdesc.h.html#LN106"><span class='Ref_to_Macro'>ReleaseTupleDesc</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1027"><span class='Ref_To_Local'>tupdesc2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Avoid leaking memory when handed toasted input. */ 
</span>    <a href="../../../include/fmgr.h.html#LN224"><span class='Ref_to_Macro'>PG_FREE_IF_COPY</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1019"><span class='Ref_To_Local'>record1</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN224"><span class='Ref_to_Macro'>PG_FREE_IF_COPY</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1020"><span class='Ref_To_Local'>record2</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1021"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end record_eq &raquo; </span> 
 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1230"></a><span class='Declare_Function'>record_ne</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/postgres.h.html#LN398"><span class='Ref_to_Macro'>DatumGetBool</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1016"><span class='Ref_to_Func'>record_eq</span></a><span class='Parentheses'>(</span>fcinfo<span class='Parentheses'>)))</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1236"></a><span class='Declare_Function'>record_lt</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN778"><span class='Ref_to_Func'>record_cmp</span></a><span class='Parentheses'>(</span>fcinfo<span class='Parentheses'>) </span><span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1242"></a><span class='Declare_Function'>record_gt</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN778"><span class='Ref_to_Func'>record_cmp</span></a><span class='Parentheses'>(</span>fcinfo<span class='Parentheses'>) </span><span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1248"></a><span class='Declare_Function'>record_le</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN778"><span class='Ref_to_Func'>record_cmp</span></a><span class='Parentheses'>(</span>fcinfo<span class='Parentheses'>) </span><span class='Operator'>&LT;= </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1254"></a><span class='Declare_Function'>record_ge</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN778"><span class='Ref_to_Func'>record_cmp</span></a><span class='Parentheses'>(</span>fcinfo<span class='Parentheses'>) </span><span class='Operator'>&GT;= </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1260"></a><span class='Declare_Function'>btrecordcmp</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <a href="../../../include/fmgr.h.html#LN313"><span class='Ref_to_Macro'>PG_RETURN_INT32</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN778"><span class='Ref_to_Func'>record_cmp</span></a><span class='Parentheses'>(</span>fcinfo<span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/* 
 * record_image_cmp : 
 * Internal byte-oriented comparison function for records. 
 * 
 * Returns -1, 0 or 1 
 * 
 * Note: The normal concepts of "equality" do not apply here; different 
 * representation of values considered to be equal are not considered to be 
 * identical.  As an example, for the citext type 'A' and 'a' are equal, but 
 * they are not identical. 
 */ 
</span><span class='Keyword'>static int 
</span><a name="LN1278"></a><span class='Declare_Function'>record_image_cmp</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN37"><span class='Ref_to_Typedef'>FunctionCallInfo</span></a> <span class='Declare_Parameter'>fcinfo</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1280"></a>    <a href="../../../include/access/htup.h.html#LN22"><span class='Ref_to_Typedef'>HeapTupleHeader</span></a> <span class='Declare_Local'>record1</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN275"><span class='Ref_to_Macro'>PG_GETARG_HEAPTUPLEHEADER</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1281"></a>    <a href="../../../include/access/htup.h.html#LN22"><span class='Ref_to_Typedef'>HeapTupleHeader</span></a> <span class='Declare_Local'>record2</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN275"><span class='Ref_to_Macro'>PG_GETARG_HEAPTUPLEHEADER</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1282"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>result</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN1283"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>tupType1</span><span class='Delimiter'>; 
</span><a name="LN1284"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>tupType2</span><span class='Delimiter'>; 
</span><a name="LN1285"></a>    <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>tupTypmod1</span><span class='Delimiter'>; 
</span><a name="LN1286"></a>    <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>tupTypmod2</span><span class='Delimiter'>; 
</span><a name="LN1287"></a>    <a href="../../../include/access/tupdesc.h.html#LN70"><span class='Ref_to_Typedef'>TupleDesc</span></a>   <span class='Declare_Local'>tupdesc1</span><span class='Delimiter'>; 
</span><a name="LN1288"></a>    <a href="../../../include/access/tupdesc.h.html#LN70"><span class='Ref_to_Typedef'>TupleDesc</span></a>   <span class='Declare_Local'>tupdesc2</span><span class='Delimiter'>; 
</span><a name="LN1289"></a>    <a href="../../../include/access/htup.h.html#LN61"><span class='Ref_to_Struct'>HeapTupleData</span></a> <span class='Declare_Local'>tuple1</span><span class='Delimiter'>; 
</span><a name="LN1290"></a>    <a href="../../../include/access/htup.h.html#LN61"><span class='Ref_to_Struct'>HeapTupleData</span></a> <span class='Declare_Local'>tuple2</span><span class='Delimiter'>; 
</span><a name="LN1291"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ncolumns1</span><span class='Delimiter'>; 
</span><a name="LN1292"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ncolumns2</span><span class='Delimiter'>; 
</span><a name="LN1293"></a>    <a href="rowtypes.c.html#LN57"><span class='Ref_to_Struct'>RecordCompareData</span></a> <span class='Operator'>*</span><span class='Declare_Local'>my_extra</span><span class='Delimiter'>; 
</span><a name="LN1294"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ncols</span><span class='Delimiter'>; 
</span><a name="LN1295"></a>    <a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>values1</span><span class='Delimiter'>; 
</span><a name="LN1296"></a>    <a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>values2</span><span class='Delimiter'>; 
</span><a name="LN1297"></a>    <span class='Keyword'>bool</span>       <span class='Operator'>*</span><span class='Declare_Local'>nulls1</span><span class='Delimiter'>; 
</span><a name="LN1298"></a>    <span class='Keyword'>bool</span>       <span class='Operator'>*</span><span class='Declare_Local'>nulls2</span><span class='Delimiter'>; 
</span><a name="LN1299"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i1</span><span class='Delimiter'>; 
</span><a name="LN1300"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i2</span><span class='Delimiter'>; 
</span><a name="LN1301"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>j</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Extract type info from the tuples */ 
</span>    <a href="rowtypes.c.html#LN1283"><span class='Ref_To_Local'>tupType1</span></a> <span class='Operator'>= </span><a href="../../../include/access/htup_details.h.html#LN444"><span class='Ref_to_Macro'>HeapTupleHeaderGetTypeId</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1280"><span class='Ref_To_Local'>record1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN1285"><span class='Ref_To_Local'>tupTypmod1</span></a> <span class='Operator'>= </span><a href="../../../include/access/htup_details.h.html#LN454"><span class='Ref_to_Macro'>HeapTupleHeaderGetTypMod</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1280"><span class='Ref_To_Local'>record1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN1287"><span class='Ref_To_Local'>tupdesc1</span></a> <span class='Operator'>= </span><a href="../../../include/utils/typcache.h.html#LN151"><span class='Ref_to_Proto'>lookup_rowtype_tupdesc</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1283"><span class='Ref_To_Local'>tupType1</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN1285"><span class='Ref_To_Local'>tupTypmod1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN1291"><span class='Ref_To_Local'>ncolumns1</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN1287"><span class='Ref_To_Local'>tupdesc1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN72"><span class='Ref_to_Member'>natts</span></a><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN1284"><span class='Ref_To_Local'>tupType2</span></a> <span class='Operator'>= </span><a href="../../../include/access/htup_details.h.html#LN444"><span class='Ref_to_Macro'>HeapTupleHeaderGetTypeId</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1281"><span class='Ref_To_Local'>record2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN1286"><span class='Ref_To_Local'>tupTypmod2</span></a> <span class='Operator'>= </span><a href="../../../include/access/htup_details.h.html#LN454"><span class='Ref_to_Macro'>HeapTupleHeaderGetTypMod</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1281"><span class='Ref_To_Local'>record2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN1288"><span class='Ref_To_Local'>tupdesc2</span></a> <span class='Operator'>= </span><a href="../../../include/utils/typcache.h.html#LN151"><span class='Ref_to_Proto'>lookup_rowtype_tupdesc</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1284"><span class='Ref_To_Local'>tupType2</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN1286"><span class='Ref_To_Local'>tupTypmod2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN1292"><span class='Ref_To_Local'>ncolumns2</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN1288"><span class='Ref_To_Local'>tupdesc2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN72"><span class='Ref_to_Member'>natts</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Build temporary HeapTuple control structures */ 
</span>    <a href="rowtypes.c.html#LN1289"><span class='Ref_To_Local'>tuple1</span></a><span class='Operator'>.</span><a href="../../../include/access/htup.h.html#LN63"><span class='Ref_to_Member'>t_len</span></a> <span class='Operator'>= </span><a href="../../../include/access/htup_details.h.html#LN438"><span class='Ref_to_Macro'>HeapTupleHeaderGetDatumLength</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1280"><span class='Ref_To_Local'>record1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/storage/itemptr.h.html#LN148"><span class='Ref_to_Macro'>ItemPointerSetInvalid</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1289"><span class='Ref_To_Local'>tuple1</span></a><span class='Operator'>.</span><a href="../../../include/access/htup.h.html#LN64"><span class='Ref_to_Member'>t_self</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN1289"><span class='Ref_To_Local'>tuple1</span></a><span class='Operator'>.</span><a href="../../../include/access/htup.h.html#LN65"><span class='Ref_to_Member'>t_tableOid</span></a> <span class='Operator'>= </span><a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN1289"><span class='Ref_To_Local'>tuple1</span></a><span class='Operator'>.</span><a href="../../../include/access/htup.h.html#LN66"><span class='Ref_to_Member'>t_data</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN1280"><span class='Ref_To_Local'>record1</span></a><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN1290"><span class='Ref_To_Local'>tuple2</span></a><span class='Operator'>.</span><a href="../../../include/access/htup.h.html#LN63"><span class='Ref_to_Member'>t_len</span></a> <span class='Operator'>= </span><a href="../../../include/access/htup_details.h.html#LN438"><span class='Ref_to_Macro'>HeapTupleHeaderGetDatumLength</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1281"><span class='Ref_To_Local'>record2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/storage/itemptr.h.html#LN148"><span class='Ref_to_Macro'>ItemPointerSetInvalid</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1290"><span class='Ref_To_Local'>tuple2</span></a><span class='Operator'>.</span><a href="../../../include/access/htup.h.html#LN64"><span class='Ref_to_Member'>t_self</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN1290"><span class='Ref_To_Local'>tuple2</span></a><span class='Operator'>.</span><a href="../../../include/access/htup.h.html#LN65"><span class='Ref_to_Member'>t_tableOid</span></a> <span class='Operator'>= </span><a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN1290"><span class='Ref_To_Local'>tuple2</span></a><span class='Operator'>.</span><a href="../../../include/access/htup.h.html#LN66"><span class='Ref_to_Member'>t_data</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN1281"><span class='Ref_To_Local'>record2</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * We arrange to look up the needed comparison info just once per series 
     * of calls, assuming the record types don't change underneath us. 
     */ 
</span>    <a href="rowtypes.c.html#LN1294"><span class='Ref_To_Local'>ncols</span></a> <span class='Operator'>= </span><a href="../../../interfaces/ecpg/pgtypeslib/numeric.c.html#LN10"><span class='Ref_to_Macro'>Max</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1291"><span class='Ref_To_Local'>ncolumns1</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN1292"><span class='Ref_To_Local'>ncolumns2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN1293"><span class='Ref_To_Local'>my_extra</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN57"><span class='Ref_to_Struct'>RecordCompareData</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="rowtypes.c.html#LN1278"><span class='Ref_to_Parameter'>fcinfo</span></a><span class='Operator'>-&GT;</span><a href="../../../include/fmgr.h.html#LN78"><span class='Ref_to_Member'>flinfo</span></a><span class='Operator'>-&GT;</span><a href="../../../include/fmgr.h.html#LN63"><span class='Ref_to_Member'>fn_extra</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1293"><span class='Ref_To_Local'>my_extra</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL </span><span class='Operator'>|| 
</span>        <a href="rowtypes.c.html#LN1293"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN59"><span class='Ref_to_Member'>ncolumns</span></a> <span class='Operator'>&LT; </span><a href="rowtypes.c.html#LN1294"><span class='Ref_To_Local'>ncols</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="rowtypes.c.html#LN1278"><span class='Ref_to_Parameter'>fcinfo</span></a><span class='Operator'>-&GT;</span><a href="../../../include/fmgr.h.html#LN78"><span class='Ref_to_Member'>flinfo</span></a><span class='Operator'>-&GT;</span><a href="../../../include/fmgr.h.html#LN63"><span class='Ref_to_Member'>fn_extra</span></a> <span class='Operator'>= 
</span>            <a href="../../../include/utils/palloc.h.html#LN70"><span class='Ref_to_Proto'>MemoryContextAlloc</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1278"><span class='Ref_to_Parameter'>fcinfo</span></a><span class='Operator'>-&GT;</span><a href="../../../include/fmgr.h.html#LN78"><span class='Ref_to_Member'>flinfo</span></a><span class='Operator'>-&GT;</span><a href="../../../include/fmgr.h.html#LN64"><span class='Ref_to_Member'>fn_mcxt</span></a><span class='Delimiter'>, 
</span>                               <a href="../../../include/c.h.html#LN554"><span class='Ref_to_Macro'>offsetof</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN57"><span class='Ref_to_Struct'>RecordCompareData</span></a><span class='Delimiter'>, </span>columns<span class='Parentheses'>) </span><span class='Operator'>+ 
</span>                               <a href="rowtypes.c.html#LN1294"><span class='Ref_To_Local'>ncols</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN52"><span class='Ref_to_Struct'>ColumnCompareData</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN1293"><span class='Ref_To_Local'>my_extra</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN57"><span class='Ref_to_Struct'>RecordCompareData</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="rowtypes.c.html#LN1278"><span class='Ref_to_Parameter'>fcinfo</span></a><span class='Operator'>-&GT;</span><a href="../../../include/fmgr.h.html#LN78"><span class='Ref_to_Member'>flinfo</span></a><span class='Operator'>-&GT;</span><a href="../../../include/fmgr.h.html#LN63"><span class='Ref_to_Member'>fn_extra</span></a><span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN1293"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN59"><span class='Ref_to_Member'>ncolumns</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN1294"><span class='Ref_To_Local'>ncols</span></a><span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN1293"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN60"><span class='Ref_to_Member'>record1_type</span></a> <span class='Operator'>= </span><a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN1293"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN61"><span class='Ref_to_Member'>record1_typmod</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN1293"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN62"><span class='Ref_to_Member'>record2_type</span></a> <span class='Operator'>= </span><a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN1293"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN63"><span class='Ref_to_Member'>record2_typmod</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1293"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN60"><span class='Ref_to_Member'>record1_type</span></a> <span class='Operator'>!= </span><a href="rowtypes.c.html#LN1283"><span class='Ref_To_Local'>tupType1</span></a> <span class='Operator'>|| 
</span>        <a href="rowtypes.c.html#LN1293"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN61"><span class='Ref_to_Member'>record1_typmod</span></a> <span class='Operator'>!= </span><a href="rowtypes.c.html#LN1285"><span class='Ref_To_Local'>tupTypmod1</span></a> <span class='Operator'>|| 
</span>        <a href="rowtypes.c.html#LN1293"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN62"><span class='Ref_to_Member'>record2_type</span></a> <span class='Operator'>!= </span><a href="rowtypes.c.html#LN1284"><span class='Ref_To_Local'>tupType2</span></a> <span class='Operator'>|| 
</span>        <a href="rowtypes.c.html#LN1293"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN63"><span class='Ref_to_Member'>record2_typmod</span></a> <span class='Operator'>!= </span><a href="rowtypes.c.html#LN1286"><span class='Ref_To_Local'>tupTypmod2</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../../include/c.h.html#LN856"><span class='Ref_to_Macro'>MemSet</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1293"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN64"><span class='Ref_to_Member'>columns</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN1294"><span class='Ref_To_Local'>ncols</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN52"><span class='Ref_to_Struct'>ColumnCompareData</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN1293"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN60"><span class='Ref_to_Member'>record1_type</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN1283"><span class='Ref_To_Local'>tupType1</span></a><span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN1293"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN61"><span class='Ref_to_Member'>record1_typmod</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN1285"><span class='Ref_To_Local'>tupTypmod1</span></a><span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN1293"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN62"><span class='Ref_to_Member'>record2_type</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN1284"><span class='Ref_To_Local'>tupType2</span></a><span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN1293"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN63"><span class='Ref_to_Member'>record2_typmod</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN1286"><span class='Ref_To_Local'>tupTypmod2</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* Break down the tuples into fields */ 
</span>    <a href="rowtypes.c.html#LN1295"><span class='Ref_To_Local'>values1</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1291"><span class='Ref_To_Local'>ncolumns1</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN1297"><span class='Ref_To_Local'>nulls1</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1291"><span class='Ref_To_Local'>ncolumns1</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>bool</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../../include/access/htup_details.h.html#LN813"><span class='Ref_to_Proto'>heap_deform_tuple</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rowtypes.c.html#LN1289"><span class='Ref_To_Local'>tuple1</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN1287"><span class='Ref_To_Local'>tupdesc1</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN1295"><span class='Ref_To_Local'>values1</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN1297"><span class='Ref_To_Local'>nulls1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN1296"><span class='Ref_To_Local'>values2</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1292"><span class='Ref_To_Local'>ncolumns2</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN1298"><span class='Ref_To_Local'>nulls2</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1292"><span class='Ref_To_Local'>ncolumns2</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>bool</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../../include/access/htup_details.h.html#LN813"><span class='Ref_to_Proto'>heap_deform_tuple</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rowtypes.c.html#LN1290"><span class='Ref_To_Local'>tuple2</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN1288"><span class='Ref_To_Local'>tupdesc2</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN1296"><span class='Ref_To_Local'>values2</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN1298"><span class='Ref_To_Local'>nulls2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Scan corresponding columns, allowing for dropped columns in different 
     * places in the two rows.  i1 and i2 are physical column indexes, j is 
     * the logical column index. 
     */ 
</span>    <a href="rowtypes.c.html#LN1299"><span class='Ref_To_Local'>i1</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN1300"><span class='Ref_To_Local'>i2</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN1301"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1299"><span class='Ref_To_Local'>i1</span></a> <span class='Operator'>&LT; </span><a href="rowtypes.c.html#LN1291"><span class='Ref_To_Local'>ncolumns1</span></a> <span class='Operator'>|| </span><a href="rowtypes.c.html#LN1300"><span class='Ref_To_Local'>i2</span></a> <span class='Operator'>&LT; </span><a href="rowtypes.c.html#LN1292"><span class='Ref_To_Local'>ncolumns2</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * Skip dropped columns 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1299"><span class='Ref_To_Local'>i1</span></a> <span class='Operator'>&LT; </span><a href="rowtypes.c.html#LN1291"><span class='Ref_To_Local'>ncolumns1</span></a> <span class='Operator'>&& </span><a href="rowtypes.c.html#LN1287"><span class='Ref_To_Local'>tupdesc1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1299"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attisdropped<span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="rowtypes.c.html#LN1299"><span class='Ref_To_Local'>i1</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1300"><span class='Ref_To_Local'>i2</span></a> <span class='Operator'>&LT; </span><a href="rowtypes.c.html#LN1292"><span class='Ref_To_Local'>ncolumns2</span></a> <span class='Operator'>&& </span><a href="rowtypes.c.html#LN1288"><span class='Ref_To_Local'>tupdesc2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1300"><span class='Ref_To_Local'>i2</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attisdropped<span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="rowtypes.c.html#LN1300"><span class='Ref_To_Local'>i2</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1299"><span class='Ref_To_Local'>i1</span></a> <span class='Operator'>&GT;= </span><a href="rowtypes.c.html#LN1291"><span class='Ref_To_Local'>ncolumns1</span></a> <span class='Operator'>|| </span><a href="rowtypes.c.html#LN1300"><span class='Ref_To_Local'>i2</span></a> <span class='Operator'>&GT;= </span><a href="rowtypes.c.html#LN1292"><span class='Ref_To_Local'>ncolumns2</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>break</span><span class='Delimiter'>;</span>              <span class='Comment_Single_Line'>/* we'll deal with mismatch below loop */ 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Have two matching columns, they must be same type 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1287"><span class='Ref_To_Local'>tupdesc1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1299"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>atttypid <span class='Operator'>!= 
</span>            <a href="rowtypes.c.html#LN1288"><span class='Ref_To_Local'>tupdesc2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1300"><span class='Ref_To_Local'>i2</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>atttypid<span class='Parentheses'>) 
</span>            <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_DATATYPE_MISMATCH<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"cannot compare dissimilar column types %s and %s at record column %d"</span><span class='Delimiter'>, 
</span>                            <a href="format_type.c.html#LN92"><span class='Ref_to_Func'>format_type_be</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1287"><span class='Ref_To_Local'>tupdesc1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1299"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>atttypid<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                            <a href="format_type.c.html#LN92"><span class='Ref_to_Func'>format_type_be</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1288"><span class='Ref_To_Local'>tupdesc2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1300"><span class='Ref_To_Local'>i2</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>atttypid<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                            <a href="rowtypes.c.html#LN1301"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * The same type should have the same length (or both should be 
         * variable). 
         */ 
</span>        <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1287"><span class='Ref_To_Local'>tupdesc1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1299"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attlen <span class='Operator'>== 
</span>               <a href="rowtypes.c.html#LN1288"><span class='Ref_To_Local'>tupdesc2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1300"><span class='Ref_To_Local'>i2</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attlen<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * We consider two NULLs equal; NULL &GT; not-NULL. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="rowtypes.c.html#LN1297"><span class='Ref_To_Local'>nulls1</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1299"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>] </span><span class='Operator'>|| !</span><a href="rowtypes.c.html#LN1298"><span class='Ref_To_Local'>nulls2</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1300"><span class='Ref_To_Local'>i2</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN1412"></a>            <span class='Keyword'>int</span>         <span class='Declare_Local'>cmpresult</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1297"><span class='Ref_To_Local'>nulls1</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1299"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* arg1 is greater than arg2 */ 
</span>                <a href="rowtypes.c.html#LN1282"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1298"><span class='Ref_To_Local'>nulls2</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1300"><span class='Ref_To_Local'>i2</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* arg1 is less than arg2 */ 
</span>                <a href="rowtypes.c.html#LN1282"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= -</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
            <span class='Comment_Multi_Line'>/* Compare the pair of elements */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1287"><span class='Ref_To_Local'>tupdesc1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1299"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attlen <span class='Operator'>== -</span><span class='Number'>1</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span><a name="LN1430"></a>                <a href="../../../include/c.h.html#LN355"><span class='Ref_to_Typedef'>Size</span></a>        <span class='Declare_Local'>len1</span><span class='Delimiter'>, 
</span><a name="LN1431"></a>                            <span class='Declare_Local'>len2</span><span class='Delimiter'>; 
</span><a name="LN1432"></a>                <span class='Control'>struct</span> <a href="../../../include/c.h.html#LN438"><span class='Ref_to_Struct'>varlena</span></a> <span class='Operator'>*</span><span class='Declare_Local'>arg1val</span><span class='Delimiter'>; 
</span><a name="LN1433"></a>                <span class='Control'>struct</span> <a href="../../../include/c.h.html#LN438"><span class='Ref_to_Struct'>varlena</span></a> <span class='Operator'>*</span><span class='Declare_Local'>arg2val</span><span class='Delimiter'>; 
</span> 
                <a href="rowtypes.c.html#LN1430"><span class='Ref_To_Local'>len1</span></a> <span class='Operator'>= </span><a href="../../../include/access/tuptoaster.h.html#LN220"><span class='Ref_to_Proto'>toast_raw_datum_size</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1295"><span class='Ref_To_Local'>values1</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1299"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="rowtypes.c.html#LN1431"><span class='Ref_To_Local'>len2</span></a> <span class='Operator'>= </span><a href="../../../include/access/tuptoaster.h.html#LN220"><span class='Ref_to_Proto'>toast_raw_datum_size</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1296"><span class='Ref_To_Local'>values2</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1300"><span class='Ref_To_Local'>i2</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="rowtypes.c.html#LN1432"><span class='Ref_To_Local'>arg1val</span></a> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN212"><span class='Ref_to_Macro'>PG_DETOAST_DATUM_PACKED</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1295"><span class='Ref_To_Local'>values1</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1299"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="rowtypes.c.html#LN1433"><span class='Ref_To_Local'>arg2val</span></a> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN212"><span class='Ref_to_Macro'>PG_DETOAST_DATUM_PACKED</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1296"><span class='Ref_To_Local'>values2</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1300"><span class='Ref_To_Local'>i2</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <a href="rowtypes.c.html#LN1412"><span class='Ref_To_Local'>cmpresult</span></a> <span class='Operator'>= </span>memcmp<span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN346"><span class='Ref_to_Macro'>VARDATA_ANY</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1432"><span class='Ref_To_Local'>arg1val</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                   <a href="../../../include/postgres.h.html#LN346"><span class='Ref_to_Macro'>VARDATA_ANY</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1433"><span class='Ref_To_Local'>arg2val</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                   <a href="../../../interfaces/ecpg/pgtypeslib/numeric.c.html#LN11"><span class='Ref_to_Macro'>Min</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1430"><span class='Ref_To_Local'>len1</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN1431"><span class='Ref_To_Local'>len2</span></a><span class='Parentheses'>) </span><span class='Operator'>- </span><a href="../../../include/c.h.html#LN444"><span class='Ref_to_Const'>VARHDRSZ</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="rowtypes.c.html#LN1412"><span class='Ref_To_Local'>cmpresult</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) </span><span class='Operator'>&& </span><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1430"><span class='Ref_To_Local'>len1</span></a> <span class='Operator'>!= </span><a href="rowtypes.c.html#LN1431"><span class='Ref_To_Local'>len2</span></a><span class='Parentheses'>))</span> 
                    <a href="rowtypes.c.html#LN1412"><span class='Ref_To_Local'>cmpresult</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1430"><span class='Ref_To_Local'>len1</span></a> <span class='Operator'>&LT; </span><a href="rowtypes.c.html#LN1431"><span class='Ref_To_Local'>len2</span></a><span class='Parentheses'>) </span><span class='Operator'>? -</span><span class='Number'>1</span> <span class='Operator'>: </span><span class='Number'>1</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="../../../include/c.h.html#LN244"><span class='Ref_to_Typedef'>Pointer</span></a><span class='Parentheses'>) </span><a href="rowtypes.c.html#LN1432"><span class='Ref_To_Local'>arg1val</span></a> <span class='Operator'>!= </span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN244"><span class='Ref_to_Typedef'>Pointer</span></a><span class='Parentheses'>) </span><a href="rowtypes.c.html#LN1295"><span class='Ref_To_Local'>values1</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1299"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span> 
                    <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1432"><span class='Ref_To_Local'>arg1val</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="../../../include/c.h.html#LN244"><span class='Ref_to_Typedef'>Pointer</span></a><span class='Parentheses'>) </span><a href="rowtypes.c.html#LN1433"><span class='Ref_To_Local'>arg2val</span></a> <span class='Operator'>!= </span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN244"><span class='Ref_to_Typedef'>Pointer</span></a><span class='Parentheses'>) </span><a href="rowtypes.c.html#LN1296"><span class='Ref_To_Local'>values2</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1300"><span class='Ref_To_Local'>i2</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span> 
                    <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1433"><span class='Ref_To_Local'>arg2val</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if tupdesc1-&GT;attrs[i1]-&GT;... &raquo; </span> 
            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1287"><span class='Ref_To_Local'>tupdesc1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1299"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attbyval<span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1287"><span class='Ref_To_Local'>tupdesc1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1299"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attlen<span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Control'>case</span> <span class='Number'>1</span><span class='Operator'>: 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN377"><span class='Ref_to_Macro'>GET_1_BYTE</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1295"><span class='Ref_To_Local'>values1</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1299"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) </span><span class='Operator'>!= 
</span>                            <a href="../../../include/postgres.h.html#LN377"><span class='Ref_to_Macro'>GET_1_BYTE</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1296"><span class='Ref_To_Local'>values2</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1300"><span class='Ref_To_Local'>i2</span></a><span class='Delimiter'>]</span><span class='Parentheses'>))</span> 
                        <span class='Delimiter'>{ 
</span>                            <a href="rowtypes.c.html#LN1412"><span class='Ref_To_Local'>cmpresult</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN377"><span class='Ref_to_Macro'>GET_1_BYTE</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1295"><span class='Ref_To_Local'>values1</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1299"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) </span><span class='Operator'>&LT; 
</span>                                         <a href="../../../include/postgres.h.html#LN377"><span class='Ref_to_Macro'>GET_1_BYTE</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1296"><span class='Ref_To_Local'>values2</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1300"><span class='Ref_To_Local'>i2</span></a><span class='Delimiter'>]</span><span class='Parentheses'>))</span> <span class='Operator'>? -</span><span class='Number'>1</span> <span class='Operator'>: </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>                        <span class='Delimiter'>} 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>case</span> <span class='Number'>2</span><span class='Operator'>: 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN378"><span class='Ref_to_Macro'>GET_2_BYTES</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1295"><span class='Ref_To_Local'>values1</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1299"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) </span><span class='Operator'>!= 
</span>                            <a href="../../../include/postgres.h.html#LN378"><span class='Ref_to_Macro'>GET_2_BYTES</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1296"><span class='Ref_To_Local'>values2</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1300"><span class='Ref_To_Local'>i2</span></a><span class='Delimiter'>]</span><span class='Parentheses'>))</span> 
                        <span class='Delimiter'>{ 
</span>                            <a href="rowtypes.c.html#LN1412"><span class='Ref_To_Local'>cmpresult</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN378"><span class='Ref_to_Macro'>GET_2_BYTES</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1295"><span class='Ref_To_Local'>values1</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1299"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) </span><span class='Operator'>&LT; 
</span>                                         <a href="../../../include/postgres.h.html#LN378"><span class='Ref_to_Macro'>GET_2_BYTES</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1296"><span class='Ref_To_Local'>values2</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1300"><span class='Ref_To_Local'>i2</span></a><span class='Delimiter'>]</span><span class='Parentheses'>))</span> <span class='Operator'>? -</span><span class='Number'>1</span> <span class='Operator'>: </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>                        <span class='Delimiter'>} 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>case</span> <span class='Number'>4</span><span class='Operator'>: 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN379"><span class='Ref_to_Macro'>GET_4_BYTES</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1295"><span class='Ref_To_Local'>values1</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1299"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) </span><span class='Operator'>!= 
</span>                            <a href="../../../include/postgres.h.html#LN379"><span class='Ref_to_Macro'>GET_4_BYTES</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1296"><span class='Ref_To_Local'>values2</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1300"><span class='Ref_To_Local'>i2</span></a><span class='Delimiter'>]</span><span class='Parentheses'>))</span> 
                        <span class='Delimiter'>{ 
</span>                            <a href="rowtypes.c.html#LN1412"><span class='Ref_To_Local'>cmpresult</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN379"><span class='Ref_to_Macro'>GET_4_BYTES</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1295"><span class='Ref_To_Local'>values1</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1299"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) </span><span class='Operator'>&LT; 
</span>                                         <a href="../../../include/postgres.h.html#LN379"><span class='Ref_to_Macro'>GET_4_BYTES</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1296"><span class='Ref_To_Local'>values2</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1300"><span class='Ref_To_Local'>i2</span></a><span class='Delimiter'>]</span><span class='Parentheses'>))</span> <span class='Operator'>? -</span><span class='Number'>1</span> <span class='Operator'>: </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>                        <span class='Delimiter'>} 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span><span class='Directive'>#if</span> <a href="../../../include/postgres.h.html#LN373"><span class='Ref_to_Const'>SIZEOF_DATUM</span></a> <span class='Operator'>== </span><span class='Number'>8</span> 
                    <span class='Control'>case</span> <span class='Number'>8</span><span class='Operator'>: 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN381"><span class='Ref_to_Macro'>GET_8_BYTES</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1295"><span class='Ref_To_Local'>values1</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1299"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) </span><span class='Operator'>!= 
</span>                            <a href="../../../include/postgres.h.html#LN381"><span class='Ref_to_Macro'>GET_8_BYTES</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1296"><span class='Ref_To_Local'>values2</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1300"><span class='Ref_To_Local'>i2</span></a><span class='Delimiter'>]</span><span class='Parentheses'>))</span> 
                        <span class='Delimiter'>{ 
</span>                            <a href="rowtypes.c.html#LN1412"><span class='Ref_To_Local'>cmpresult</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN381"><span class='Ref_to_Macro'>GET_8_BYTES</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1295"><span class='Ref_To_Local'>values1</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1299"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) </span><span class='Operator'>&LT; 
</span>                                         <a href="../../../include/postgres.h.html#LN381"><span class='Ref_to_Macro'>GET_8_BYTES</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1296"><span class='Ref_To_Local'>values2</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1300"><span class='Ref_To_Local'>i2</span></a><span class='Delimiter'>]</span><span class='Parentheses'>))</span> <span class='Operator'>? -</span><span class='Number'>1</span> <span class='Operator'>: </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>                        <span class='Delimiter'>} 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
                    <span class='Control'>default</span><span class='Operator'>: 
</span>                        <span class='Debug'>Assert</span><span class='Parentheses'>(</span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>;</span>  <span class='Comment_Single_Line'>/* cannot happen */ 
</span>                <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch tupdesc1-&GT;attrs[i1]-&GT;... &raquo; </span> 
            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if tupdesc1-&GT;attrs[i1]-&GT;... &raquo; </span> 
            <span class='Control'>else</span> 
            <span class='Delimiter'>{ 
</span>                <a href="rowtypes.c.html#LN1412"><span class='Ref_To_Local'>cmpresult</span></a> <span class='Operator'>= </span>memcmp<span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN554"><span class='Ref_to_Macro'>DatumGetPointer</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1295"><span class='Ref_To_Local'>values1</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1299"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                   <a href="../../../include/postgres.h.html#LN554"><span class='Ref_to_Macro'>DatumGetPointer</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1296"><span class='Ref_To_Local'>values2</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1300"><span class='Ref_To_Local'>i2</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                   <a href="rowtypes.c.html#LN1287"><span class='Ref_To_Local'>tupdesc1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1299"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attlen<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1412"><span class='Ref_To_Local'>cmpresult</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* arg1 is less than arg2 */ 
</span>                <a href="rowtypes.c.html#LN1282"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= -</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1412"><span class='Ref_To_Local'>cmpresult</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* arg1 is greater than arg2 */ 
</span>                <a href="rowtypes.c.html#LN1282"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if !nulls1[i1]||!nulls2[... &raquo; </span> 
 
        <span class='Comment_Multi_Line'>/* equal, so continue to next column */ 
</span>        <a href="rowtypes.c.html#LN1299"><span class='Ref_To_Local'>i1</span></a><span class='Operator'>++</span><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN1300"><span class='Ref_To_Local'>i2</span></a><span class='Operator'>++</span><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN1301"><span class='Ref_To_Local'>j</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end while i1&LT;ncolumns1||i2&LT;ncol... &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* 
     * If we didn't break out of the loop early, check for column count 
     * mismatch.  (We do not report such mismatch if we found unequal column 
     * values; is that a feature or a bug?) 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1282"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1299"><span class='Ref_To_Local'>i1</span></a> <span class='Operator'>!= </span><a href="rowtypes.c.html#LN1291"><span class='Ref_To_Local'>ncolumns1</span></a> <span class='Operator'>|| </span><a href="rowtypes.c.html#LN1300"><span class='Ref_To_Local'>i2</span></a> <span class='Operator'>!= </span><a href="rowtypes.c.html#LN1292"><span class='Ref_To_Local'>ncolumns2</span></a><span class='Parentheses'>) 
</span>            <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_DATATYPE_MISMATCH<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"cannot compare record types with different numbers of columns"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1295"><span class='Ref_To_Local'>values1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1297"><span class='Ref_To_Local'>nulls1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1296"><span class='Ref_To_Local'>values2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1298"><span class='Ref_To_Local'>nulls2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/access/tupdesc.h.html#LN106"><span class='Ref_to_Macro'>ReleaseTupleDesc</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1287"><span class='Ref_To_Local'>tupdesc1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/access/tupdesc.h.html#LN106"><span class='Ref_to_Macro'>ReleaseTupleDesc</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1288"><span class='Ref_To_Local'>tupdesc2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Avoid leaking memory when handed toasted input. */ 
</span>    <a href="../../../include/fmgr.h.html#LN224"><span class='Ref_to_Macro'>PG_FREE_IF_COPY</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1280"><span class='Ref_To_Local'>record1</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN224"><span class='Ref_to_Macro'>PG_FREE_IF_COPY</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1281"><span class='Ref_To_Local'>record2</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="rowtypes.c.html#LN1282"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end record_image_cmp &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * record_image_eq : 
 *        compares two records for identical contents, based on byte images 
 * result : 
 *        returns true if the records are identical, false otherwise. 
 * 
 * Note: we do not use record_image_cmp here, since we can avoid 
 * de-toasting for unequal lengths this way. 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1555"></a><span class='Declare_Function'>record_image_eq</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1557"></a>    <a href="../../../include/access/htup.h.html#LN22"><span class='Ref_to_Typedef'>HeapTupleHeader</span></a> <span class='Declare_Local'>record1</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN275"><span class='Ref_to_Macro'>PG_GETARG_HEAPTUPLEHEADER</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1558"></a>    <a href="../../../include/access/htup.h.html#LN22"><span class='Ref_to_Typedef'>HeapTupleHeader</span></a> <span class='Declare_Local'>record2</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN275"><span class='Ref_to_Macro'>PG_GETARG_HEAPTUPLEHEADER</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1559"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>result</span> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span><a name="LN1560"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>tupType1</span><span class='Delimiter'>; 
</span><a name="LN1561"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>tupType2</span><span class='Delimiter'>; 
</span><a name="LN1562"></a>    <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>tupTypmod1</span><span class='Delimiter'>; 
</span><a name="LN1563"></a>    <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>tupTypmod2</span><span class='Delimiter'>; 
</span><a name="LN1564"></a>    <a href="../../../include/access/tupdesc.h.html#LN70"><span class='Ref_to_Typedef'>TupleDesc</span></a>   <span class='Declare_Local'>tupdesc1</span><span class='Delimiter'>; 
</span><a name="LN1565"></a>    <a href="../../../include/access/tupdesc.h.html#LN70"><span class='Ref_to_Typedef'>TupleDesc</span></a>   <span class='Declare_Local'>tupdesc2</span><span class='Delimiter'>; 
</span><a name="LN1566"></a>    <a href="../../../include/access/htup.h.html#LN61"><span class='Ref_to_Struct'>HeapTupleData</span></a> <span class='Declare_Local'>tuple1</span><span class='Delimiter'>; 
</span><a name="LN1567"></a>    <a href="../../../include/access/htup.h.html#LN61"><span class='Ref_to_Struct'>HeapTupleData</span></a> <span class='Declare_Local'>tuple2</span><span class='Delimiter'>; 
</span><a name="LN1568"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ncolumns1</span><span class='Delimiter'>; 
</span><a name="LN1569"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ncolumns2</span><span class='Delimiter'>; 
</span><a name="LN1570"></a>    <a href="rowtypes.c.html#LN57"><span class='Ref_to_Struct'>RecordCompareData</span></a> <span class='Operator'>*</span><span class='Declare_Local'>my_extra</span><span class='Delimiter'>; 
</span><a name="LN1571"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ncols</span><span class='Delimiter'>; 
</span><a name="LN1572"></a>    <a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>values1</span><span class='Delimiter'>; 
</span><a name="LN1573"></a>    <a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>values2</span><span class='Delimiter'>; 
</span><a name="LN1574"></a>    <span class='Keyword'>bool</span>       <span class='Operator'>*</span><span class='Declare_Local'>nulls1</span><span class='Delimiter'>; 
</span><a name="LN1575"></a>    <span class='Keyword'>bool</span>       <span class='Operator'>*</span><span class='Declare_Local'>nulls2</span><span class='Delimiter'>; 
</span><a name="LN1576"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i1</span><span class='Delimiter'>; 
</span><a name="LN1577"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i2</span><span class='Delimiter'>; 
</span><a name="LN1578"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>j</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Extract type info from the tuples */ 
</span>    <a href="rowtypes.c.html#LN1560"><span class='Ref_To_Local'>tupType1</span></a> <span class='Operator'>= </span><a href="../../../include/access/htup_details.h.html#LN444"><span class='Ref_to_Macro'>HeapTupleHeaderGetTypeId</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1557"><span class='Ref_To_Local'>record1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN1562"><span class='Ref_To_Local'>tupTypmod1</span></a> <span class='Operator'>= </span><a href="../../../include/access/htup_details.h.html#LN454"><span class='Ref_to_Macro'>HeapTupleHeaderGetTypMod</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1557"><span class='Ref_To_Local'>record1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN1564"><span class='Ref_To_Local'>tupdesc1</span></a> <span class='Operator'>= </span><a href="../../../include/utils/typcache.h.html#LN151"><span class='Ref_to_Proto'>lookup_rowtype_tupdesc</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1560"><span class='Ref_To_Local'>tupType1</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN1562"><span class='Ref_To_Local'>tupTypmod1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN1568"><span class='Ref_To_Local'>ncolumns1</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN1564"><span class='Ref_To_Local'>tupdesc1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN72"><span class='Ref_to_Member'>natts</span></a><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN1561"><span class='Ref_To_Local'>tupType2</span></a> <span class='Operator'>= </span><a href="../../../include/access/htup_details.h.html#LN444"><span class='Ref_to_Macro'>HeapTupleHeaderGetTypeId</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1558"><span class='Ref_To_Local'>record2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN1563"><span class='Ref_To_Local'>tupTypmod2</span></a> <span class='Operator'>= </span><a href="../../../include/access/htup_details.h.html#LN454"><span class='Ref_to_Macro'>HeapTupleHeaderGetTypMod</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1558"><span class='Ref_To_Local'>record2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN1565"><span class='Ref_To_Local'>tupdesc2</span></a> <span class='Operator'>= </span><a href="../../../include/utils/typcache.h.html#LN151"><span class='Ref_to_Proto'>lookup_rowtype_tupdesc</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1561"><span class='Ref_To_Local'>tupType2</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN1563"><span class='Ref_To_Local'>tupTypmod2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN1569"><span class='Ref_To_Local'>ncolumns2</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN1565"><span class='Ref_To_Local'>tupdesc2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN72"><span class='Ref_to_Member'>natts</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Build temporary HeapTuple control structures */ 
</span>    <a href="rowtypes.c.html#LN1566"><span class='Ref_To_Local'>tuple1</span></a><span class='Operator'>.</span><a href="../../../include/access/htup.h.html#LN63"><span class='Ref_to_Member'>t_len</span></a> <span class='Operator'>= </span><a href="../../../include/access/htup_details.h.html#LN438"><span class='Ref_to_Macro'>HeapTupleHeaderGetDatumLength</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1557"><span class='Ref_To_Local'>record1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/storage/itemptr.h.html#LN148"><span class='Ref_to_Macro'>ItemPointerSetInvalid</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1566"><span class='Ref_To_Local'>tuple1</span></a><span class='Operator'>.</span><a href="../../../include/access/htup.h.html#LN64"><span class='Ref_to_Member'>t_self</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN1566"><span class='Ref_To_Local'>tuple1</span></a><span class='Operator'>.</span><a href="../../../include/access/htup.h.html#LN65"><span class='Ref_to_Member'>t_tableOid</span></a> <span class='Operator'>= </span><a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN1566"><span class='Ref_To_Local'>tuple1</span></a><span class='Operator'>.</span><a href="../../../include/access/htup.h.html#LN66"><span class='Ref_to_Member'>t_data</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN1557"><span class='Ref_To_Local'>record1</span></a><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN1567"><span class='Ref_To_Local'>tuple2</span></a><span class='Operator'>.</span><a href="../../../include/access/htup.h.html#LN63"><span class='Ref_to_Member'>t_len</span></a> <span class='Operator'>= </span><a href="../../../include/access/htup_details.h.html#LN438"><span class='Ref_to_Macro'>HeapTupleHeaderGetDatumLength</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1558"><span class='Ref_To_Local'>record2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/storage/itemptr.h.html#LN148"><span class='Ref_to_Macro'>ItemPointerSetInvalid</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1567"><span class='Ref_To_Local'>tuple2</span></a><span class='Operator'>.</span><a href="../../../include/access/htup.h.html#LN64"><span class='Ref_to_Member'>t_self</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN1567"><span class='Ref_To_Local'>tuple2</span></a><span class='Operator'>.</span><a href="../../../include/access/htup.h.html#LN65"><span class='Ref_to_Member'>t_tableOid</span></a> <span class='Operator'>= </span><a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN1567"><span class='Ref_To_Local'>tuple2</span></a><span class='Operator'>.</span><a href="../../../include/access/htup.h.html#LN66"><span class='Ref_to_Member'>t_data</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN1558"><span class='Ref_To_Local'>record2</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * We arrange to look up the needed comparison info just once per series 
     * of calls, assuming the record types don't change underneath us. 
     */ 
</span>    <a href="rowtypes.c.html#LN1571"><span class='Ref_To_Local'>ncols</span></a> <span class='Operator'>= </span><a href="../../../interfaces/ecpg/pgtypeslib/numeric.c.html#LN10"><span class='Ref_to_Macro'>Max</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1568"><span class='Ref_To_Local'>ncolumns1</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN1569"><span class='Ref_To_Local'>ncolumns2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN1570"><span class='Ref_To_Local'>my_extra</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN57"><span class='Ref_to_Struct'>RecordCompareData</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span>fcinfo<span class='Operator'>-&GT;</span>flinfo<span class='Operator'>-&GT;</span>fn_extra<span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1570"><span class='Ref_To_Local'>my_extra</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL </span><span class='Operator'>|| 
</span>        <a href="rowtypes.c.html#LN1570"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN59"><span class='Ref_to_Member'>ncolumns</span></a> <span class='Operator'>&LT; </span><a href="rowtypes.c.html#LN1571"><span class='Ref_To_Local'>ncols</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        fcinfo<span class='Operator'>-&GT;</span>flinfo<span class='Operator'>-&GT;</span>fn_extra <span class='Operator'>= 
</span>            <a href="../../../include/utils/palloc.h.html#LN70"><span class='Ref_to_Proto'>MemoryContextAlloc</span></a><span class='Parentheses'>(</span>fcinfo<span class='Operator'>-&GT;</span>flinfo<span class='Operator'>-&GT;</span>fn_mcxt<span class='Delimiter'>, 
</span>                               <a href="../../../include/c.h.html#LN554"><span class='Ref_to_Macro'>offsetof</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN57"><span class='Ref_to_Struct'>RecordCompareData</span></a><span class='Delimiter'>, </span>columns<span class='Parentheses'>) </span><span class='Operator'>+ 
</span>                               <a href="rowtypes.c.html#LN1571"><span class='Ref_To_Local'>ncols</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN52"><span class='Ref_to_Struct'>ColumnCompareData</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN1570"><span class='Ref_To_Local'>my_extra</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN57"><span class='Ref_to_Struct'>RecordCompareData</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span>fcinfo<span class='Operator'>-&GT;</span>flinfo<span class='Operator'>-&GT;</span>fn_extra<span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN1570"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN59"><span class='Ref_to_Member'>ncolumns</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN1571"><span class='Ref_To_Local'>ncols</span></a><span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN1570"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN60"><span class='Ref_to_Member'>record1_type</span></a> <span class='Operator'>= </span><a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN1570"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN61"><span class='Ref_to_Member'>record1_typmod</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN1570"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN62"><span class='Ref_to_Member'>record2_type</span></a> <span class='Operator'>= </span><a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN1570"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN63"><span class='Ref_to_Member'>record2_typmod</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1570"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN60"><span class='Ref_to_Member'>record1_type</span></a> <span class='Operator'>!= </span><a href="rowtypes.c.html#LN1560"><span class='Ref_To_Local'>tupType1</span></a> <span class='Operator'>|| 
</span>        <a href="rowtypes.c.html#LN1570"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN61"><span class='Ref_to_Member'>record1_typmod</span></a> <span class='Operator'>!= </span><a href="rowtypes.c.html#LN1562"><span class='Ref_To_Local'>tupTypmod1</span></a> <span class='Operator'>|| 
</span>        <a href="rowtypes.c.html#LN1570"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN62"><span class='Ref_to_Member'>record2_type</span></a> <span class='Operator'>!= </span><a href="rowtypes.c.html#LN1561"><span class='Ref_To_Local'>tupType2</span></a> <span class='Operator'>|| 
</span>        <a href="rowtypes.c.html#LN1570"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN63"><span class='Ref_to_Member'>record2_typmod</span></a> <span class='Operator'>!= </span><a href="rowtypes.c.html#LN1563"><span class='Ref_To_Local'>tupTypmod2</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../../include/c.h.html#LN856"><span class='Ref_to_Macro'>MemSet</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1570"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN64"><span class='Ref_to_Member'>columns</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN1571"><span class='Ref_To_Local'>ncols</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN52"><span class='Ref_to_Struct'>ColumnCompareData</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN1570"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN60"><span class='Ref_to_Member'>record1_type</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN1560"><span class='Ref_To_Local'>tupType1</span></a><span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN1570"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN61"><span class='Ref_to_Member'>record1_typmod</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN1562"><span class='Ref_To_Local'>tupTypmod1</span></a><span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN1570"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN62"><span class='Ref_to_Member'>record2_type</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN1561"><span class='Ref_To_Local'>tupType2</span></a><span class='Delimiter'>; 
</span>        <a href="rowtypes.c.html#LN1570"><span class='Ref_To_Local'>my_extra</span></a><span class='Operator'>-&GT;</span><a href="rowtypes.c.html#LN63"><span class='Ref_to_Member'>record2_typmod</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN1563"><span class='Ref_To_Local'>tupTypmod2</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* Break down the tuples into fields */ 
</span>    <a href="rowtypes.c.html#LN1572"><span class='Ref_To_Local'>values1</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1568"><span class='Ref_To_Local'>ncolumns1</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN1574"><span class='Ref_To_Local'>nulls1</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1568"><span class='Ref_To_Local'>ncolumns1</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>bool</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../../include/access/htup_details.h.html#LN813"><span class='Ref_to_Proto'>heap_deform_tuple</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rowtypes.c.html#LN1566"><span class='Ref_To_Local'>tuple1</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN1564"><span class='Ref_To_Local'>tupdesc1</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN1572"><span class='Ref_To_Local'>values1</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN1574"><span class='Ref_To_Local'>nulls1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN1573"><span class='Ref_To_Local'>values2</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1569"><span class='Ref_To_Local'>ncolumns2</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="rowtypes.c.html#LN1575"><span class='Ref_To_Local'>nulls2</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1569"><span class='Ref_To_Local'>ncolumns2</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>bool</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../../include/access/htup_details.h.html#LN813"><span class='Ref_to_Proto'>heap_deform_tuple</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="rowtypes.c.html#LN1567"><span class='Ref_To_Local'>tuple2</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN1565"><span class='Ref_To_Local'>tupdesc2</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN1573"><span class='Ref_To_Local'>values2</span></a><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN1575"><span class='Ref_To_Local'>nulls2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Scan corresponding columns, allowing for dropped columns in different 
     * places in the two rows.  i1 and i2 are physical column indexes, j is 
     * the logical column index. 
     */ 
</span>    <a href="rowtypes.c.html#LN1576"><span class='Ref_To_Local'>i1</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN1577"><span class='Ref_To_Local'>i2</span></a> <span class='Operator'>= </span><a href="rowtypes.c.html#LN1578"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1576"><span class='Ref_To_Local'>i1</span></a> <span class='Operator'>&LT; </span><a href="rowtypes.c.html#LN1568"><span class='Ref_To_Local'>ncolumns1</span></a> <span class='Operator'>|| </span><a href="rowtypes.c.html#LN1577"><span class='Ref_To_Local'>i2</span></a> <span class='Operator'>&LT; </span><a href="rowtypes.c.html#LN1569"><span class='Ref_To_Local'>ncolumns2</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * Skip dropped columns 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1576"><span class='Ref_To_Local'>i1</span></a> <span class='Operator'>&LT; </span><a href="rowtypes.c.html#LN1568"><span class='Ref_To_Local'>ncolumns1</span></a> <span class='Operator'>&& </span><a href="rowtypes.c.html#LN1564"><span class='Ref_To_Local'>tupdesc1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1576"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attisdropped<span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="rowtypes.c.html#LN1576"><span class='Ref_To_Local'>i1</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1577"><span class='Ref_To_Local'>i2</span></a> <span class='Operator'>&LT; </span><a href="rowtypes.c.html#LN1569"><span class='Ref_To_Local'>ncolumns2</span></a> <span class='Operator'>&& </span><a href="rowtypes.c.html#LN1565"><span class='Ref_To_Local'>tupdesc2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1577"><span class='Ref_To_Local'>i2</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attisdropped<span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="rowtypes.c.html#LN1577"><span class='Ref_To_Local'>i2</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1576"><span class='Ref_To_Local'>i1</span></a> <span class='Operator'>&GT;= </span><a href="rowtypes.c.html#LN1568"><span class='Ref_To_Local'>ncolumns1</span></a> <span class='Operator'>|| </span><a href="rowtypes.c.html#LN1577"><span class='Ref_To_Local'>i2</span></a> <span class='Operator'>&GT;= </span><a href="rowtypes.c.html#LN1569"><span class='Ref_To_Local'>ncolumns2</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>break</span><span class='Delimiter'>;</span>              <span class='Comment_Single_Line'>/* we'll deal with mismatch below loop */ 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Have two matching columns, they must be same type 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1564"><span class='Ref_To_Local'>tupdesc1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1576"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>atttypid <span class='Operator'>!= 
</span>            <a href="rowtypes.c.html#LN1565"><span class='Ref_To_Local'>tupdesc2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1577"><span class='Ref_To_Local'>i2</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>atttypid<span class='Parentheses'>) 
</span>            <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_DATATYPE_MISMATCH<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"cannot compare dissimilar column types %s and %s at record column %d"</span><span class='Delimiter'>, 
</span>                            <a href="format_type.c.html#LN92"><span class='Ref_to_Func'>format_type_be</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1564"><span class='Ref_To_Local'>tupdesc1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1576"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>atttypid<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                            <a href="format_type.c.html#LN92"><span class='Ref_to_Func'>format_type_be</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1565"><span class='Ref_To_Local'>tupdesc2</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1577"><span class='Ref_To_Local'>i2</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>atttypid<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                            <a href="rowtypes.c.html#LN1578"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * We consider two NULLs equal; NULL &GT; not-NULL. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="rowtypes.c.html#LN1574"><span class='Ref_To_Local'>nulls1</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1576"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>] </span><span class='Operator'>|| !</span><a href="rowtypes.c.html#LN1575"><span class='Ref_To_Local'>nulls2</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1577"><span class='Ref_To_Local'>i2</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1574"><span class='Ref_To_Local'>nulls1</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1576"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>] </span><span class='Operator'>|| </span><a href="rowtypes.c.html#LN1575"><span class='Ref_To_Local'>nulls2</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1577"><span class='Ref_To_Local'>i2</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <a href="rowtypes.c.html#LN1559"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
            <span class='Comment_Multi_Line'>/* Compare the pair of elements */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1564"><span class='Ref_To_Local'>tupdesc1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1576"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attlen <span class='Operator'>== -</span><span class='Number'>1</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span><a name="LN1691"></a>                <a href="../../../include/c.h.html#LN355"><span class='Ref_to_Typedef'>Size</span></a>        <span class='Declare_Local'>len1</span><span class='Delimiter'>, 
</span><a name="LN1692"></a>                            <span class='Declare_Local'>len2</span><span class='Delimiter'>; 
</span> 
                <a href="rowtypes.c.html#LN1691"><span class='Ref_To_Local'>len1</span></a> <span class='Operator'>= </span><a href="../../../include/access/tuptoaster.h.html#LN220"><span class='Ref_to_Proto'>toast_raw_datum_size</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1572"><span class='Ref_To_Local'>values1</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1576"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="rowtypes.c.html#LN1692"><span class='Ref_To_Local'>len2</span></a> <span class='Operator'>= </span><a href="../../../include/access/tuptoaster.h.html#LN220"><span class='Ref_to_Proto'>toast_raw_datum_size</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1573"><span class='Ref_To_Local'>values2</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1577"><span class='Ref_To_Local'>i2</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Comment_Multi_Line'>/* No need to de-toast if lengths don't match. */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1691"><span class='Ref_To_Local'>len1</span></a> <span class='Operator'>!= </span><a href="rowtypes.c.html#LN1692"><span class='Ref_To_Local'>len2</span></a><span class='Parentheses'>) 
</span>                    <a href="rowtypes.c.html#LN1559"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>                <span class='Control'>else</span> 
                <span class='Delimiter'>{ 
</span><a name="LN1701"></a>                    <span class='Control'>struct</span> <a href="../../../include/c.h.html#LN438"><span class='Ref_to_Struct'>varlena</span></a> <span class='Operator'>*</span><span class='Declare_Local'>arg1val</span><span class='Delimiter'>; 
</span><a name="LN1702"></a>                    <span class='Control'>struct</span> <a href="../../../include/c.h.html#LN438"><span class='Ref_to_Struct'>varlena</span></a> <span class='Operator'>*</span><span class='Declare_Local'>arg2val</span><span class='Delimiter'>; 
</span> 
                    <a href="rowtypes.c.html#LN1701"><span class='Ref_To_Local'>arg1val</span></a> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN212"><span class='Ref_to_Macro'>PG_DETOAST_DATUM_PACKED</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1572"><span class='Ref_To_Local'>values1</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1576"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="rowtypes.c.html#LN1702"><span class='Ref_To_Local'>arg2val</span></a> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN212"><span class='Ref_to_Macro'>PG_DETOAST_DATUM_PACKED</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1573"><span class='Ref_To_Local'>values2</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1577"><span class='Ref_To_Local'>i2</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <a href="rowtypes.c.html#LN1559"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span>memcmp<span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN346"><span class='Ref_to_Macro'>VARDATA_ANY</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1701"><span class='Ref_To_Local'>arg1val</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                     <a href="../../../include/postgres.h.html#LN346"><span class='Ref_to_Macro'>VARDATA_ANY</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1702"><span class='Ref_To_Local'>arg2val</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                     <a href="rowtypes.c.html#LN1691"><span class='Ref_To_Local'>len1</span></a> <span class='Operator'>- </span><a href="../../../include/c.h.html#LN444"><span class='Ref_to_Const'>VARHDRSZ</span></a><span class='Parentheses'>)</span> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <span class='Comment_Multi_Line'>/* Only free memory if it's a copy made here. */ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="../../../include/c.h.html#LN244"><span class='Ref_to_Typedef'>Pointer</span></a><span class='Parentheses'>) </span><a href="rowtypes.c.html#LN1701"><span class='Ref_To_Local'>arg1val</span></a> <span class='Operator'>!= </span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN244"><span class='Ref_to_Typedef'>Pointer</span></a><span class='Parentheses'>) </span><a href="rowtypes.c.html#LN1572"><span class='Ref_To_Local'>values1</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1576"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span> 
                        <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1701"><span class='Ref_To_Local'>arg1val</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="../../../include/c.h.html#LN244"><span class='Ref_to_Typedef'>Pointer</span></a><span class='Parentheses'>) </span><a href="rowtypes.c.html#LN1702"><span class='Ref_To_Local'>arg2val</span></a> <span class='Operator'>!= </span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN244"><span class='Ref_to_Typedef'>Pointer</span></a><span class='Parentheses'>) </span><a href="rowtypes.c.html#LN1573"><span class='Ref_To_Local'>values2</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1577"><span class='Ref_To_Local'>i2</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span> 
                        <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1702"><span class='Ref_To_Local'>arg2val</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if tupdesc1-&GT;attrs[i1]-&GT;... &raquo; </span> 
            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1564"><span class='Ref_To_Local'>tupdesc1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1576"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attbyval<span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1564"><span class='Ref_To_Local'>tupdesc1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1576"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attlen<span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Control'>case</span> <span class='Number'>1</span><span class='Operator'>: 
</span>                        <a href="rowtypes.c.html#LN1559"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN377"><span class='Ref_to_Macro'>GET_1_BYTE</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1572"><span class='Ref_To_Local'>values1</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1576"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) </span><span class='Operator'>== 
</span>                                  <a href="../../../include/postgres.h.html#LN377"><span class='Ref_to_Macro'>GET_1_BYTE</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1573"><span class='Ref_To_Local'>values2</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1577"><span class='Ref_To_Local'>i2</span></a><span class='Delimiter'>]</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>case</span> <span class='Number'>2</span><span class='Operator'>: 
</span>                        <a href="rowtypes.c.html#LN1559"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN378"><span class='Ref_to_Macro'>GET_2_BYTES</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1572"><span class='Ref_To_Local'>values1</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1576"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) </span><span class='Operator'>== 
</span>                                  <a href="../../../include/postgres.h.html#LN378"><span class='Ref_to_Macro'>GET_2_BYTES</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1573"><span class='Ref_To_Local'>values2</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1577"><span class='Ref_To_Local'>i2</span></a><span class='Delimiter'>]</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>case</span> <span class='Number'>4</span><span class='Operator'>: 
</span>                        <a href="rowtypes.c.html#LN1559"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN379"><span class='Ref_to_Macro'>GET_4_BYTES</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1572"><span class='Ref_To_Local'>values1</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1576"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) </span><span class='Operator'>== 
</span>                                  <a href="../../../include/postgres.h.html#LN379"><span class='Ref_to_Macro'>GET_4_BYTES</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1573"><span class='Ref_To_Local'>values2</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1577"><span class='Ref_To_Local'>i2</span></a><span class='Delimiter'>]</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span><span class='Directive'>#if</span> <a href="../../../include/postgres.h.html#LN373"><span class='Ref_to_Const'>SIZEOF_DATUM</span></a> <span class='Operator'>== </span><span class='Number'>8</span> 
                    <span class='Control'>case</span> <span class='Number'>8</span><span class='Operator'>: 
</span>                        <a href="rowtypes.c.html#LN1559"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN381"><span class='Ref_to_Macro'>GET_8_BYTES</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1572"><span class='Ref_To_Local'>values1</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1576"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) </span><span class='Operator'>== 
</span>                                  <a href="../../../include/postgres.h.html#LN381"><span class='Ref_to_Macro'>GET_8_BYTES</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1573"><span class='Ref_To_Local'>values2</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1577"><span class='Ref_To_Local'>i2</span></a><span class='Delimiter'>]</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
                    <span class='Control'>default</span><span class='Operator'>: 
</span>                        <span class='Debug'>Assert</span><span class='Parentheses'>(</span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>;</span>  <span class='Comment_Single_Line'>/* cannot happen */ 
</span>                <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch tupdesc1-&GT;attrs[i1]-&GT;... &raquo; </span> 
            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if tupdesc1-&GT;attrs[i1]-&GT;... &raquo; </span> 
            <span class='Control'>else</span> 
            <span class='Delimiter'>{ 
</span>                <a href="rowtypes.c.html#LN1559"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span>memcmp<span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN554"><span class='Ref_to_Macro'>DatumGetPointer</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1572"><span class='Ref_To_Local'>values1</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1576"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                 <a href="../../../include/postgres.h.html#LN554"><span class='Ref_to_Macro'>DatumGetPointer</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1573"><span class='Ref_To_Local'>values2</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1577"><span class='Ref_To_Local'>i2</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                 <a href="rowtypes.c.html#LN1564"><span class='Ref_To_Local'>tupdesc1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="rowtypes.c.html#LN1576"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attlen<span class='Parentheses'>)</span> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="rowtypes.c.html#LN1559"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>) 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if !nulls1[i1]||!nulls2[... &raquo; </span> 
 
        <span class='Comment_Multi_Line'>/* equal, so continue to next column */ 
</span>        <a href="rowtypes.c.html#LN1576"><span class='Ref_To_Local'>i1</span></a><span class='Operator'>++</span><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN1577"><span class='Ref_To_Local'>i2</span></a><span class='Operator'>++</span><span class='Delimiter'>, </span><a href="rowtypes.c.html#LN1578"><span class='Ref_To_Local'>j</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end while i1&LT;ncolumns1||i2&LT;ncol... &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* 
     * If we didn't break out of the loop early, check for column count 
     * mismatch.  (We do not report such mismatch if we found unequal column 
     * values; is that a feature or a bug?) 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1559"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1576"><span class='Ref_To_Local'>i1</span></a> <span class='Operator'>!= </span><a href="rowtypes.c.html#LN1568"><span class='Ref_To_Local'>ncolumns1</span></a> <span class='Operator'>|| </span><a href="rowtypes.c.html#LN1577"><span class='Ref_To_Local'>i2</span></a> <span class='Operator'>!= </span><a href="rowtypes.c.html#LN1569"><span class='Ref_To_Local'>ncolumns2</span></a><span class='Parentheses'>) 
</span>            <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_DATATYPE_MISMATCH<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"cannot compare record types with different numbers of columns"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1572"><span class='Ref_To_Local'>values1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1574"><span class='Ref_To_Local'>nulls1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1573"><span class='Ref_To_Local'>values2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1575"><span class='Ref_To_Local'>nulls2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/access/tupdesc.h.html#LN106"><span class='Ref_to_Macro'>ReleaseTupleDesc</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1564"><span class='Ref_To_Local'>tupdesc1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/access/tupdesc.h.html#LN106"><span class='Ref_to_Macro'>ReleaseTupleDesc</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1565"><span class='Ref_To_Local'>tupdesc2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Avoid leaking memory when handed toasted input. */ 
</span>    <a href="../../../include/fmgr.h.html#LN224"><span class='Ref_to_Macro'>PG_FREE_IF_COPY</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1557"><span class='Ref_To_Local'>record1</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN224"><span class='Ref_to_Macro'>PG_FREE_IF_COPY</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1558"><span class='Ref_To_Local'>record2</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1559"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end record_image_eq &raquo; </span> 
 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1786"></a><span class='Declare_Function'>record_image_ne</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/postgres.h.html#LN398"><span class='Ref_to_Macro'>DatumGetBool</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1554"><span class='Ref_to_Func'>record_image_eq</span></a><span class='Parentheses'>(</span>fcinfo<span class='Parentheses'>)))</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1792"></a><span class='Declare_Function'>record_image_lt</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1277"><span class='Ref_to_Func'>record_image_cmp</span></a><span class='Parentheses'>(</span>fcinfo<span class='Parentheses'>) </span><span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1798"></a><span class='Declare_Function'>record_image_gt</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1277"><span class='Ref_to_Func'>record_image_cmp</span></a><span class='Parentheses'>(</span>fcinfo<span class='Parentheses'>) </span><span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1804"></a><span class='Declare_Function'>record_image_le</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1277"><span class='Ref_to_Func'>record_image_cmp</span></a><span class='Parentheses'>(</span>fcinfo<span class='Parentheses'>) </span><span class='Operator'>&LT;= </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1810"></a><span class='Declare_Function'>record_image_ge</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1277"><span class='Ref_to_Func'>record_image_cmp</span></a><span class='Parentheses'>(</span>fcinfo<span class='Parentheses'>) </span><span class='Operator'>&GT;= </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1816"></a><span class='Declare_Function'>btrecordimagecmp</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <a href="../../../include/fmgr.h.html#LN313"><span class='Ref_to_Macro'>PG_RETURN_INT32</span></a><span class='Parentheses'>(</span><a href="rowtypes.c.html#LN1277"><span class='Ref_to_Func'>record_image_cmp</span></a><span class='Parentheses'>(</span>fcinfo<span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span></pre>
<table bgcolor='#c0c0c0' width='100%'><tr><td><a href='../../../../Contents.html'>Contents</a></td></tr>
</table><hr><p class='blurb' align='center'><a href='http://www.sourceinsight.com'>HTML Created by Source Insight Version 4.00.0084 Built on 2017-02-26</a></p>
</body></html>